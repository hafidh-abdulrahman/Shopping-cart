define("metaserver/static/js/clean/ui/modal_dig",["require","exports","tslib","classnames","dompurify","react","dig-components/buttons","dig-components/modal","dig-components/typography","metaserver/static/js/components/ui/css","metaserver/static/js/components/ui/modal_controller","metaserver/static/js/ux_analytics/utils","metaserver/static/js/core/i18n"],(function(t,e,a,s,n,o,r,i,l,d,p,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReactModal=e.SimpleModal=e.Modal=e.ModalWithCSS=e.ModalButtons=e.ModalButton=void 0,s=a.__importDefault(s),n=a.__importDefault(n),o=a.__importDefault(o),p=a.__importStar(p);const{Header:m,Footer:h,Body:f}=i.Modal;class v extends o.default.Component{constructor(t){super(t),this.state={open:!0},this.modal=o.default.createRef(),this.modalBox=o.default.createRef()}invokeCBThenCloseModal(t,e,a=!1){"function"==typeof t&&t.call(this,e);let s=e.defaultPrevented;"isDefaultPrevented"in e&&(s=e.isDefaultPrevented()),s||(this.props.autoClose||a)&&p.unmountModal()}dismissModal(t){const{onDismiss:e,onDismissCompleted:a}=this.props;this.invokeCBThenCloseModal(e,t,!0),a&&a.call(this,t)}onCancelActionClicked(t){this.dismissModal(t)}onAcceptActionClicked(t){const{onAccept:e}=this.props;this.invokeCBThenCloseModal(e,t)}componentDidMount(){(0,c.dispatchModalOpened)(),i.Modal.setAppElement(document.body)}componentWillUnmount(){(0,c.dispatchModalClosed)()}render(){const t=this.props,e={"db-modal-wrapper":!0,"uxa-modal":!0,"clean-react-modal":!0,"db-modal--default-maestro-style":"default-maestro"===t.style};t.className&&(e[t.className]=!0);const a=(0,s.default)(e),n=(0,c.getModalId)({id:t.id,className:t.className}),{open:d}=this.state,u=this.onCancelActionClicked.bind(this),v=this.onAcceptActionClicked.bind(this),b=t.onShow;return o.default.createElement("div",{className:a},o.default.createElement("div",{ref:this.modal,className:"db-modal db-modal__dig"},o.default.createElement("div",{ref:this.modalBox,className:"db-modal-box"},o.default.createElement(i.Modal,{open:d,className:`db-modal-${t.style}`,onRequestClose:u,onAfterOpen:b,"aria-labelledby":"db-modal-title",overlayClassName:"db-modal-overlay",ariaHideApp:!1,id:p.MODAL_ROOT_ID,"data-testid":p.MODAL_ROOT_TESTID,width:t.width||"standard",withCloseButton:p.CLOSE_BUTTON_TEXT},o.default.createElement("div",{className:"db-modal__dig-container",id:n},t.title&&o.default.createElement(m,{hasBottomSpacing:"title-standard",className:"db-modal-title",id:"db-modal-title"},o.default.createElement(l.Title,null,o.default.createElement("span",{className:"db-modal-title-text"},t.title))),o.default.createElement(f,{ref:this.modalContainer,className:"db-modal-content",hasVerticalSpacing:!1},t.children),o.default.createElement(h,{className:"db-modal-buttons"},t.buttonComponent?t.buttonComponent:o.default.createElement(o.default.Fragment,null,t.helpLink&&o.default.createElement(r.Button,{hasNoUnderline:!0,variant:"transparent",className:"dbmodal-extra-link-button db-modal__unclickable-parent"},t.helpLink),t.altAction&&o.default.createElement(r.Button,{hasNoUnderline:!0,variant:"transparent",className:"db-modal__alt-action db-modal__unclickable-parent"},t.altAction),t.dismissButtonText?o.default.createElement(r.Button,{className:"dbmodal-button dbmodal-button__cancel",key:"tertiary-dismiss",variant:"opacity",onClick:u},t.dismissButtonText):o.default.createElement("span",null),t.acceptButtonText&&o.default.createElement(r.Button,{className:"dbmodal-button dbmodal-button__accept",key:"primary",variant:"primary",disabled:t.acceptButtonDisabled,onClick:v,isLoading:t.submitting},t.acceptButtonText))))))))}}v.displayName="Modal",v.defaultProps={acceptButtonText:u.intl.formatMessage({id:"nOO9Qi",defaultMessage:"OK"}),dismissButtonText:null,buttonComponent:null,onAccept(){},onDismiss(){},onShow(){},autoClose:!0,style:"default",acceptButtonDisabled:!1};const b={show:t=>{const e={acceptButtonText:t.confirm_text,trackingIdPrefix:t.trackingIdPrefix,onAccept:t.confirm_callback,dismissButtonText:t.cancel_text,onDismiss:t.cancel_callback,onDismissCompleted:t.cancel_completed_callback,title:t.title_text,width:t.width,className:"simple-modal",autoClose:t.autoclose,style:t.style,onShow:t.on_show},a=t.body_react?o.default.createElement("div",{className:"simple-modal-content"},t.body_react):o.default.createElement("div",{className:"simple-modal-content",dangerouslySetInnerHTML:{__html:n.default.sanitize(t.body_html)}}),s=o.default.createElement(v,Object.assign({},e),a);return p.mountModal(s)}};e.SimpleModal=b;e.ModalButton=t=>{var{className:e,children:n}=t,i=a.__rest(t,["className","children"]);return o.default.createElement(r.Button,Object.assign({className:(0,s.default)(e,"dbmodal-button",`button-${i.variant}`,`dbmodal-button__${i.variant}`)},i),n)},e.ModalButton.displayName="ModalButton",e.ModalButton.displayName="ModalButton";e.ModalButtons=t=>{var{className:e}=t,n=a.__rest(t,["className"]);return o.default.createElement("div",Object.assign({className:(0,s.default)(e,"db-modal-buttons")},n))},e.ModalButtons.displayName="ModalButtons",e.ModalButtons.displayName="ModalButtons",e.ModalWithCSS=(0,d.requireCssWithComponent)(v,["/static/metaserver/static/css/dig-components/index.web-vflD7DS1H.css"]),e.Modal=e.ModalWithCSS,e.ReactModal=e.ModalWithCSS})),define("metaserver/static/js/clean/ui/button_dig",["require","exports","tslib","classnames","react","dig-components/buttons","metaserver/static/js/core/browser"],(function(t,e,a,s,n,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.link_button=e.button=e.LinkButton=e.Button=void 0,s=a.__importDefault(s),n=a.__importDefault(n),r=a.__importStar(r);const i={secondary:"outline",tertiary:"transparent",styleless:"transparent",primary:"primary"},l=t=>{const e={};e[`button-${t.variant}`]=!(!t.variant||"standard"===t.variant);const n=t.importance||"primary";let o;o=i[n]?i[n]:"primary",t.importance&&"styleless"!==t.importance&&(e["button-"+t.importance]=!0,e[t.importance]=!0),t.className&&(e[t.className]=!0);const{importance:r,variant:l}=t,d=a.__rest(t,["importance","variant"]);return d.className=(0,s.default)(e),{digVariant:o,domAttributes:d}};class d extends n.default.Component{render(){const t=this.props,{digVariant:e,domAttributes:a}=l(t);return n.default.createElement(o.Button,Object.assign({},a,{variant:e}),t.children)}}e.Button=d,d.defaultProps={importance:"primary"},d.displayName="Button";class p extends n.default.Component{render(){const t=this.props,{domAttributes:e}=l(t);delete e.disabled;return n.default.createElement(o.Button,Object.assign({onClick:()=>{t.href&&r.open_tab(t.href)}},e,{variant:"transparent"}),t.children)}}e.LinkButton=p,p.defaultProps={importance:"primary"},p.displayName="LinkButton",e.button=d,e.link_button=p})),define("metaserver/static/js/clean/ui/input_dig",["require","exports","tslib","lodash","classnames","dig-components/text_fields","dig-components/typography","react","ts-key-enum","metaserver/static/js/clean/ui/form_error_mixin","metaserver/static/js/clean/ui/sprite","metaserver/static/js/core/cancelable_promise","metaserver/static/js/core/i18n"],(function(t,e,a,s,n,o,r,i,l,d,p,c,u){"use strict";function m(t,e=!1){const a=function(e){if(t>=e)return"password-input-dot-selected"};let s="password-input-meter";e&&(s="password-input-meter-standalone");const n=i.default.createElement("div",{className:s,ref:"meter"},i.default.createElement("div",{className:`password-input-dot ${a(4)}`}),i.default.createElement("div",{className:`password-input-dot ${a(3)}`}),i.default.createElement("div",{className:`password-input-dot ${a(2)}`}),i.default.createElement("div",{className:`password-input-dot ${a(1)}`}));return e?i.default.createElement("span",{className:"standalone-password-meter-container"},n):n}Object.defineProperty(e,"__esModule",{value:!0}),e.textarea=e.text=e.password=e.password_strength_meter=void 0,s=a.__importStar(s),n=a.__importDefault(n),i=a.__importDefault(i),e.password_strength_meter=m;const h=function(e,h){var f;return(f=class extends i.default.Component{constructor(){super(...arguments),this.displayName=e+"."+h,this.state={inputWidth:0,expanded:!1,value:this.props.defaultValue,errorWrapperIdName:s.uniqueId("input-error")},this.zxcvbnPromise=void 0,this.inputComponent=i.default.createRef(),this.closeButton=i.default.createRef(),this.getValue=()=>{var t;return null===(t=this.inputComponent.current)||void 0===t?void 0:t.value},this.setValue=t=>(this.inputComponent.current&&(this.inputComponent.current.value=t),this.setState({value:t})),this.resizeComponent=()=>{const t=this.inputComponent.current;t&&(t.style.height="1px",t.style.height=`${t.scrollHeight}px`)},this._renderPasswordStrengthBar=()=>{var t;return this.props.measureStrength?m(null!==(t=this.state.score)&&void 0!==t?t:0):null},this._renderFinished=()=>(this.props.autoresize&&this.resizeComponent(),"function"==typeof this.props.afterRender?this.props.afterRender():void 0),this.onCloseClick=t=>{if(null!=t&&t.preventDefault(),!this.props.expandable)return void("function"==typeof this.props.onCloseClick&&this.props.onCloseClick(t));const e=this.closeButton.current,a=this.inputComponent.current;return e.style.opacity="0",a.style.width=`${this.state.inputWidth}px`,"function"==typeof this.props.onCloseClick&&this.props.onCloseClick(t),this.setState({expanded:!1})},this.onChangeInternal=t=>{if("function"==typeof this.props.onChange&&this.props.onChange(t),null!=this.props.value||(this.props.valueLink?this.props.valueLink.requestChange(t.currentTarget.value):this.setState({value:t.currentTarget.value})),this.props.measureStrength){let e;return e=this.state.zxcvbn&&t.currentTarget.value?Math.max(1,this.state.zxcvbn(t.currentTarget.value).score):0,this.setState({score:e})}},this.onFocusInternal=t=>{var e;if("function"==typeof this.props.onFocus&&this.props.onFocus(t),!1===this.props.expandable)return;const a=t.currentTarget,s=this.closeButton.current;let{inputWidth:n}=this.state;0===n&&this.inputComponent.current&&(n=this.inputComponent.current.offsetWidth,this.setState({inputWidth:n}));const o=n+(null!==(e=this.props.expandedWidthOffset)&&void 0!==e?e:0),r=o-parseInt(a.style.paddingRight)+s.offsetWidth/2;return s.style.left=`${r}px`,a.style.width=`${o}px`,a.style.opacity="1",this.setState({expanded:!0})},this.onBlurInternal=t=>{const e=t.currentTarget.value;return!0===this.props.closeOnBlur&&0===e.length&&this.onCloseClick(t),"function"==typeof this.props.onBlur?this.props.onBlur(t):void 0},this.onKeyDownInternal=t=>{if("function"==typeof this.props.onKeyDown&&this.props.onKeyDown(t),null!=this.state.expanded!=!1)switch(t.key){case l.Key.Escape:return t.currentTarget.blur(),this.onCloseClick(t)}}}UNSAFE_componentWillMount(){this.props.measureStrength&&(this.zxcvbnPromise=(0,c.makeCancelable)(new Promise((e,a)=>{t(["zxcvbn"],e,a)}).then(a.__importStar)),this.zxcvbnPromise.then(({default:t})=>{this.setState({zxcvbn:t})}))}componentWillUnmount(){this.zxcvbnPromise&&this.zxcvbnPromise.cancel()}componentDidMount(){var t;this._renderFinished();const e=null===(t=this.inputComponent.current)||void 0===t?void 0:t.offsetWidth;if(e)return this.setState({inputWidth:e})}componentDidUpdate(){return this._renderFinished()}render(){const t={"text-input-input":!0,autofocus:this.props.autofocus,"password-input":"password"===h},a={"text-input":!0,"text-wip-migration-wip":!0,"text-input-expandable":this.props.expandable,"text-input-inline":this.props.inline,"textarea-input":"textarea"===e};if(a[this.props.variant||"standard"]=!0,this.props.className){this.props.className.split(/\s/).forEach(t=>a[t]=!0)}const s=i.default.createElement(d.FormError,Object.assign({},this.props,{errorWrapperIdName:this.state.errorWrapperIdName}));let l=void 0;((null!=this.props.error?this.props.error.message_text:void 0)||null!=(null!=this.props.error?this.props.error.message_html:void 0))&&(l=this.state.errorWrapperIdName);let c=o.TextInput;"textarea"===e&&(c=o.TextArea);const m={id:this.props.id,name:this.props.name,"aria-describedby":l,"aria-label":l,className:(0,n.default)(t),type:h,value:this.props.value||(null!=this.props.valueLink?this.props.valueLink.value:void 0)||this.state.value,onChange:this.onChangeInternal,onFocus:this.onFocusInternal,onBlur:this.onBlurInternal,onKeyDown:this.onKeyDownInternal,autoFocus:this.props.autofocus,ref:this.inputComponent,placeholder:this.props.placeholder&&"password"!==h?this.props.placeholder:""};for(const t in this.props)void 0===m[t]&&"autofocus"!==t&&(m[t]=this.props[t]);const f=i.default.createElement(c,Object.assign({},m));return i.default.createElement("div",{style:this.props.style,className:(0,n.default)(a)},!this.props["error-after"]&&s,i.default.createElement("div",{className:"text-input-wrapper"},this._renderPasswordStrengthBar(),f,this.props.expandable&&i.default.createElement("a",{href:"#",onClick:this.onCloseClick,ref:this.closeButton,className:"close-button u-mar-left-xs"},i.default.createElement(p.Sprite,{group:"web",name:"xclose",alt:u.intl.formatMessage({id:"u/p3Pl",defaultMessage:"Close"})})),this.props.placeholder&&"password"===h&&!(this.props.value||(null!=this.props.valueLink?this.props.valueLink.value:void 0)||this.state.value)&&i.default.createElement("div",{className:"password-placeholder-label"},i.default.createElement(r.Text,{size:"standard",tagName:"label",htmlFor:this.props.id},this.props.placeholder))),this.props["error-after"]&&s)}}).defaultProps={errorWrapperClassName:"text-input-error-wrapper",expandedWidthOffset:90,expandable:!1,animationCurve:"easeOutSine",animationDuration:300,compatiblePlaceholder:!1},f};e.password=h("input","password"),e.text=h("input","text"),e.textarea=h("textarea","text")}));
//# sourceMappingURL=pkg-legacy-dig-migration.min.js-vfl1ZZHJz.map