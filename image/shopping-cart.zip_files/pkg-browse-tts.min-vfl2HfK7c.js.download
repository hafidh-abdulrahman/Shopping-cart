define("typescript/component_libraries/spectrum-sharing/src/utils/logging",["require","exports"],(function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.getLinkType=t.TeamsWebEventName=t.LinkKeyTypes=t.LinkTypes=t.AccessType=t.ScreenName=t.ManageAccessTabName=t.SettingsTabName=t.ShareTabName=t.TiburonEventName=void 0,(function(e){e.AttemptTargetValidation="ATTEMPT_TARGET_VALIDATION",e.BeginShareFlow="BEGIN_SHARE_FLOW",e.ClickManageAccess="CLICK_MANAGE_ACCESS",e.SelectChangeMemberPermission="SELECT_CHANGE_MEMBER_PERMISSION",e.SucceedChangeMemberPermission="SUCCEED_CHANGE_MEMBER_PERMISSION",e.FailChangeMemberPermission="FAIL_CHANGE_MEMBER_PERMISSION",e.AttemptCreateSharedLinkWithSettings="ATTEMPT_CREATE_SHARED_LINK_WITH_SETTINGS",e.SucceedCreateSharedLinkWithSettings="SUCCEED_CREATE_SHARED_LINK_WITH_SETTINGS",e.FailCreateSharedLinkWithSettings="FAIL_CREATE_SHARED_LINK_WITH_SETTINGS",e.FailCreateNamespaceAfterLinkCreated="FAIL_CREATE_NAMESPACE_AFTER_LINK_CREATED",e.ClickTibCopyLink="CLICK_TIB_COPY_LINK",e.ClickTibCreateLink="CLICK_TIB_CREATE_LINK",e.ClickInbandShareButton="CLICK_INBAND_SHARE_BUTTON",e.CopySharedLink="COPY_SHARED_LINK",e.CopySharedLinkFailure="COPY_SHARED_LINK_FAILURE",e.ElementClick="ELEMENT_CLICK",e.ElementView="ELEMENT_VIEW",e.FailInbandShare="FAIL_INBAND_SHARE",e.InconclusiveInbandShare="INCONCLUSIVE_INBAND_SHARE",e.FailTargetValidation="FAIL_TARGET_VALIDATION",e.MemberListLoaded="MEMBER_LIST_LOADED",e.OpenFileSettingsModal="OPEN_FILE_SETTINGS_MODAL",e.OpenFolderSettingsModal="OPEN_FOLDER_SETTINGS_MODAL",e.OpenLinkSettingsModal="OPEN_LINK_SETTINGS_MODAL",e.OpenParentFolderAccessModal="OPEN_PARENT_FOLDER_ACCESS_MODAL",e.ShareModalEmailUnverified="SHARE_MODAL_EMAIL_UNVERIFIED",e.SucceedInbandShare="SUCCEED_INBAND_SHARE",e.SucceedTargetValidation="SUCCEED_TARGET_VALIDATION",e.ViewLinkOnlyModal="VIEW_LINK_ONLY_MODAL",e.ViewShareModal="VIEW_SHARE_MODAL",e.AttemptTargetSearch="ATTEMPT_TARGET_SEARCH",e.SucceedTargetSearch="SUCCEED_TARGET_SEARCH",e.FailTargetSearch="FAIL_TARGET_SEARCH",e.AttemptNavigateAwayDuringShare="ATTEMPT_NAVIGATE_AWAY_DURING_SHARE",e.SucceedNavigateAwayDuringShare="SUCCEED_NAVIGATE_AWAY_DURING_SHARE",e.AttemptRemoveAllMembers="ATTEMPT_REMOVE_ALL_MEMBERS",e.SucceedRemoveAllMembers="SUCCEED_REMOVE_ALL_MEMBERS",e.FailRemoveAllMembers="FAIL_REMOVE_ALL_MEMBERS",e.AttemptRemoveMember="ATTEMPT_REMOVE_MEMBER",e.SucceedRemoveMember="SUCCEED_REMOVE_MEMBER",e.FailRemoveMember="FAIL_REMOVE_MEMBER",e.AttemptUpdateFolderPolicy="ATTEMPT_UPDATE_FOLDER_POLICY",e.SucceedUpdateFolderPolicy="SUCCEED_UPDATE_FOLDER_POLICY",e.FailUpdateFolderPolicy="FAIL_UPDATE_FOLDER_POLICY",e.AttemptDeleteSharedLink="ATTEMPT_DELETE_SHARED_LINK",e.SucceedDeleteSharedLink="SUCCEED_DELETE_SHARED_LINK",e.FailDeleteSharedLink="FAIL_DELETE_SHARED_LINK",e.ChangeSharedLinkAudience="CHANGE_SHARED_LINK_AUDIENCE",e.ClickShareButtonLinkSettingsStatus="CLICK_SHARE_BUTTON_LINK_SETTINGS_STATUS",e.ClickSettingsText="CLICK_SETTINGS_TEXT",e.ClickSettingsGear="CLICK_SETTINGS_GEAR",e.ClickManageAccessPageSettingsText="CLICK_MANAGE_ACCESS_PAGE_SETTINGS_TEXT",e.CloseShareModal="CLOSE_SHARE_MODAL",e.ViewManageAccessScreen="VIEW_MANAGE_ACCESS_SCREEN",e.ViewManageAccessTab="VIEW_MANAGE_ACCESS_TAB",e.ViewSettingsScreen="VIEW_SETTINGS_SCREEN",e.ViewShareScreen="VIEW_SHARE_SCREEN",e.ViewShareTab="VIEW_SHARE_TAB",e.ViewSettingsTab="VIEW_SETTINGS_TAB",e.SaveToDropboxGoToFolder="SAVE_TO_DROPBOX_GO_TO_FOLDER",e.SaveToDropboxRenameLocation="SAVE_TO_DROPBOX_RENAME_LOCATION",e.FolderPreviewChangeViewMode="FOLDER_PREVIEW_CHANGE_VIEW_MODE",e.CreateSharedFolderModalOpen="CREATE_SHARED_FOLDER_MODAL_OPEN",e.CreateSharedFolderModalCreate="CREATE_SHARED_FOLDER_MODAL_CREATE",e.CreateSharedFolderModalClose="CREATE_SHARED_FOLDER_MODAL_CLOSE",e.RRCSenderShareModalView="RRC_SENDER_SHARE_MODAL_VIEW",e.RRCSenderNoteView="RRC_SENDER_NOTE_VIEW",e.RRCSenderTaskMenuClick="RRC_SENDER_TASK_MENU_CLICK",e.RRCSenderTaskMenuItemClick="RRC_SENDER_TASK_MENU_ITEM_CLICK",e.RRCSenderTaskMenuToggleAllClick="RRC_SENDER_TASK_MENU_TOGGLE_ALL_CLICK",e.RRCSenderShareModalShareClick="RRC_SENDER_SHARE_MODAL_SHARE_CLICK",e.RRCSenderCreateSharingTasksError="RRC_SENDER_CREATE_SHARING_TASKS_ERROR",e.RRCReceiverPreviewsInBandView="RRC_RECEIVER_PREVIEWS_IN_BAND_VIEW",e.RRCReceiverPreviewsTaskBladeView="RRC_RECEIVER_PREVIEWS_TASK_BLADE_VIEW",e.RRCReceiverPreviewsTooltipTourView="RRC_RECEIVER_PREVIEWS_TOOLTIP_TOUR_VIEW",e.RRCReceiverPreviewsTooltipTourClick="RRC_RECEIVER_PREVIEWS_TOOLTIP_TOUR_CLICK",e.RRCReceiverPreviewsTaskBladeItemClick="RRC_RECEIVER_PREVIEWS_TASK_BLADE_ITEM_CLICK",e.RRCReceiverPreviewsTaskBladeAllItemComplete="RRC_RECEIVER_PREVIEWS_TASK_BLADE_ALL_ITEM_COMPLETE",e.RRCReceiverPreviewsTaskBladeShowMeHowClick="RRC_RECEIVER_PREVIEWS_TASK_BLADE_SHOW_ME_HOW_CLICK",e.RRCReceiverPreviewsGetSharingTasksError="RRC_RECEIVER_PREVIEWS_GET_SHARING_TASKS_ERROR",e.RRCReceiverPreviewsUpdateSharingTaskError="RRC_RECEIVER_PREVIEWS_UPDATE_SHARING_TASK_ERROR",e.RRCReceiverPreviewsTrackUserActionError="RRC_RECEIVER_PREVIEWS_TRACK_USER_ACTION_ERROR",e.OpenRichSaveDropdown="OPEN_RICH_SAVE_DROPDOWN",e.CloseRichSaveDropdown="CLOSE_RICH_SAVE_DROPDOWN",e.OpenSharingDefaultSettingsTab="OPEN_SHARING_DEFAULT_SETTINGS_TAB",e.AttemptSetDefaultSharingAccessLevel="ATTEMPT_SET_DEFAULT_SHARING_ACCESS_LEVEL",e.SucceedSetDefaultSharingAccessLevel="SUCCEED_SET_DEFAULT_SHARING_ACCESS_LEVEL",e.FailSetDefaultSharingAccessLevel="FAIL_SET_DEFAULT_SHARING_ACCESS_LEVEL",e.AttemptSetDefaultSharingLinkAudience="ATTEMPT_SET_DEFAULT_SHARING_LINK_AUDIENCE",e.SucceedSetDefaultSharingLinkAudience="SUCCEED_SET_DEFAULT_SHARING_LINK_AUDIENCE",e.FailSetDefaultSharingLinkAudience="FAIL_SET_DEFAULT_SHARING_LINK_AUDIENCE"})(t.TiburonEventName||(t.TiburonEventName={})),(function(e){e.EditTab="edit_tab",e.ViewTab="view_tab"})(t.ShareTabName||(t.ShareTabName={})),(function(e){e.FileSettingsTab="file_settings",e.FolderSettingsTab="folder_settings",e.EditLinkSettingsTab="edit_link_settings",e.ViewLinkSettingsTab="view_link_settings"})(t.SettingsTabName||(t.SettingsTabName={})),(function(e){e.ManageLinksTab="manage_links_tab",e.ManagePeopleTab="manage_people_tab"})(t.ManageAccessTabName||(t.ManageAccessTabName={})),(function(e){e.ShareScreen="share_screen",e.ManageAccessScreen="manage_access_screen",e.SettingsScreen="settings_screen"})(t.ScreenName||(t.ScreenName={})),(function(e){e.Editor="editor",e.Viewer="viewer"})(t.AccessType||(t.AccessType={})),(function(e){e[e.NONE=0]="NONE",e.Righteous="righteous",e.Shmodel="shmodel"})(i=t.LinkTypes||(t.LinkTypes={})),(function(e){e[e.NONE=0]="NONE",e.RL="rlkey",e.SH="tkey"})(t.LinkKeyTypes||(t.LinkKeyTypes={})),(function(e){e.ImportContactsComplete="import_contacts_complete"})(t.TeamsWebEventName||(t.TeamsWebEventName={})),t.getLinkType=function(e){if(!e)return i.NONE;const t=new URL(e);return-1!==t.search.indexOf("rlkey")?i.Righteous:-1!==t.pathname.indexOf("/s/")||-1!==t.pathname.indexOf("/sh/")?i.Shmodel:i.NONE}})),define("metaserver/static/js/sharing/views/share_modal_evolution/utils/logging",["require","exports","typescript/component_libraries/spectrum-sharing/src/utils/logging"],(function(e,t,i){"use strict";function a(e){const t=new URL(e);if(-1!==t.search.indexOf("rlkey")){const e=t.searchParams.get("rlkey");return{kind:i.LinkKeyTypes.RL,val:e,link_type:i.LinkTypes.Righteous}}if(-1!==t.pathname.indexOf("/s/")||-1!==t.pathname.indexOf("/sh/")){const e=(e=>e.pathname.indexOf("/raw/")*e.pathname.indexOf("/dl/")*e.pathname.indexOf("/print/")>0)(t)?3:2,a=t.pathname.split("/")[e];return{kind:i.LinkKeyTypes.SH,val:a,link_type:i.LinkTypes.Shmodel}}return{kind:i.LinkKeyTypes.NONE,val:"",link_type:i.LinkTypes.NONE}}function r(e){if(!e)return{};const t={link_id:e.id,link_access_level:(r=e.link_permissions.link_access_level,r?r.hasOwnProperty(".tag")?r[".tag"]:r:i.AccessType.Viewer)};var r;const s=a(e.url);return s.kind!==i.LinkKeyTypes.NONE&&(t[s.kind]=s.val,t.link_type=s.link_type),t}Object.defineProperty(t,"__esModule",{value:!0}),t.buildExtraFromLinkMetadata=t.getLinkKey=t.buildExtraFromMetadata=void 0,t.buildExtraFromMetadata=function(e,t){return Object.assign(Object.assign({},(function(e){return{user_access_type:e.access_type,is_folder:e.isFolder(),fq_path:e.path_lower,content_id:e.contentId(),ns_id:e.nsId(),can_create_edit_link:e.canCreateEditLink(),can_create_view_link:e.canCreateViewLink(),can_edit_inband_invite:e.canEditInbandInvite(),can_view_inband_invite:e.canViewInbandInvite(),max_access:e.canCreateEditLink()||e.canEditInbandInvite()?i.AccessType.Editor:i.AccessType.Viewer}})(e)),r(t))},t.getLinkKey=a,t.buildExtraFromLinkMetadata=r})),define("metaserver/static/js/starred/redux/store",["require","exports","metaserver/static/js/redux/namespaces","metaserver/static/js/redux/store","metaserver/static/js/starred/redux/slice"],(function(e,t,i,a,r){"use strict";let s;Object.defineProperty(t,"__esModule",{value:!0}),t.getStoreForStarred=void 0;t.getStoreForStarred=()=>(s||(s=(0,a.getStoreAndRegisterReducers)({[i.STARRED_NAMESPACE_KEY]:r.reducer})),s)})),define("metaserver/static/js/starred/redux/slice",["require","exports","tslib","@reduxjs/toolkit","metaserver/static/js/starred/api","metaserver/static/js/redux/namespaces","metaserver/static/js/starred/redux/types","metaserver/static/js/starred/redux/selectors","metaserver/static/js/starred/redux/initialState","metaserver/static/js/starred/utils","metaserver/static/js/home/starred/api_post_tti","metaserver/static/js/home/store","metaserver/static/js/core/exception","metaserver/static/js/home/starred/constants","metaserver/static/js/home/resource_id_types","metaserver/static/js/home/starred/actions_post_tti"],(function(e,t,i,a,r,s,n,o,c,l,d,_,p,m,u,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StarredActions=t.reducer=t.getAllStarred=t.updateStarredStatus=t.fetchMissingStarredStatuses=void 0,p=i.__importStar(p),t.fetchMissingStarredStatuses=(0,a.createAsyncThunk)(`${s.STARRED_NAMESPACE_KEY}/getStarredStatus`,(e,{getState:a,dispatch:s})=>i.__awaiter(void 0,void 0,void 0,(function*(){const i=(0,_.getRole)(),c=(0,o.getStarredState)(a());if(!c)return[];const l=e.filter(({id:e})=>{var t;return(null===(t=c.starredStates[e])||void 0===t?void 0:t.loadingState)!==n.StarredLoadingStateEnum.LOADING});if(0===l.length)return[];s(t.StarredActions.setLoadingStates(l));const d=yield(0,r.fetchStatuses)(i,l),p=d.filter(e=>e.is_starred).map(e=>e.id);return s({type:"UPDATE_FAVORITES_ACTION",payload:{update:[...p,...(0,o.getStarredFileIds)(a())]}}),d}))),t.updateStarredStatus=(0,a.createAsyncThunk)(`${s.STARRED_NAMESPACE_KEY}/updateStarredStatus`,({id:e,newStatus:a,idType:s=u.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID},{getState:n,dispatch:c})=>i.__awaiter(void 0,void 0,void 0,(function*(){const i=(0,o.getHasLoadedInitial)(n()),l=yield(0,r.update)((0,_.getRole)(),e,s,a);return i&&!0===a&&c((0,t.getAllStarred)()),l}))),t.getAllStarred=(0,a.createAsyncThunk)(`${s.STARRED_NAMESPACE_KEY}/getAllStarred`,()=>i.__awaiter(void 0,void 0,void 0,(function*(){const e=yield(0,d.retrieveStarred)(m.LOAD_ALL_ITEMS_COUNT);return"success"===e.status&&e.items?((0,E.getStarredStatusMetadata)(e.items.map(e=>({idTypePair:{id:e.resource_id,type:e.id_type},starred:!0}))),e):(p.reportStack("Failed to fetch starred files",{severity:p.SEVERITY.CRITICAL,exc_extra:e,silent:!0}),Promise.reject(new Error("Failed to fetch starred files")))})));const S=e=>{var{resource_id:t,id_type:a,display_type:r}=e,s=e.details,{fq_path:n}=s,o=i.__rest(s,["fq_path"]),c=i.__rest(e,["resource_id","id_type","display_type","details"]);return Object.assign({resourceId:t,idType:a,displayType:r,isMounted:c.is_mounted,perNodeMetadata:c.per_node_metadata,details:Object.assign({fqPath:n},o)},c)},h=e=>{e.starredFilesMetadata.items.forEach(({resourceId:t})=>{e.starredStates[t]={isStarred:!0,loadingState:n.StarredLoadingStateEnum.LOAD_SUCCESS}})},T=(0,a.createSlice)({name:s.STARRED_NAMESPACE_KEY,initialState:c.starredInitialState,reducers:{clear:()=>c.starredInitialState,setStarredStatus:(e,t)=>{e.starredStates[t.payload.id]={loadingState:n.StarredLoadingStateEnum.LOAD_SUCCESS,isStarred:t.payload.isStarred}},deleteStarredItem:(e,t)=>{e.starredFilesMetadata.items=e.starredFilesMetadata.items.filter(e=>e.resourceId!==t.payload.id)},deleteStarredItems:(e,t)=>{e.starredFilesMetadata.items=e.starredFilesMetadata.items.filter(e=>!t.payload.ids.includes(e.resourceId))},setLoadingStates:(e,t)=>{t.payload.forEach(({id:t})=>{void 0===e.starredStates[t]&&(e.starredStates[t]={loadingState:n.StarredLoadingStateEnum.LOADING})})},setStarredMetadata:(e,t)=>{const i=t.payload;"success"===i.status?(e.starredFilesMetadata={items:i.items.map(S),loadingState:n.StarredLoadingStateEnum.LOAD_SUCCESS,hasMore:i.hasMore,hasLoadedInitial:!0},h(e)):e.starredFilesMetadata.loadingState=n.StarredLoadingStateEnum.LOAD_FAILED}},extraReducers:e=>{e.addCase(t.fetchMissingStarredStatuses.fulfilled,(e,t)=>{t.payload.forEach(({id:t,is_starred:i})=>{e.starredStates[t]={loadingState:n.StarredLoadingStateEnum.LOAD_SUCCESS,isStarred:i}})}).addCase(t.fetchMissingStarredStatuses.rejected,(e,t)=>{t.meta.arg.forEach(({id:i})=>{var a,r;e.starredStates[i]={loadingState:n.StarredLoadingStateEnum.LOAD_FAILED,error:null!==(r=null===(a=null==t?void 0:t.error)||void 0===a?void 0:a.message)&&void 0!==r?r:"error fetching starred starred data"}})}).addCase(t.updateStarredStatus.fulfilled,(e,t)=>{const{id:i}=t.meta.arg,a=e.starredStates[i];if(a&&a.loadingState===n.StarredLoadingStateEnum.LOAD_SUCCESS&&(a.isStarred=t.meta.arg.newStatus,t.meta.arg.showSnackbar)){const{itemName:e,newStatus:i}=t.meta.arg;(0,l.displayStarSnackbar)({itemName:e,isStarred:i,success:!0})}}).addCase(t.updateStarredStatus.rejected,(e,t)=>{if(t.meta.arg.showSnackbar){const{itemName:e,newStatus:i}=t.meta.arg;(0,l.displayStarSnackbar)({itemName:e,isStarred:i,success:!1})}}).addCase(t.getAllStarred.pending,e=>{e.starredFilesMetadata.loadingState=n.StarredLoadingStateEnum.LOADING}).addCase(t.getAllStarred.fulfilled,(e,t)=>{e.starredFilesMetadata.loadingState=n.StarredLoadingStateEnum.LOAD_SUCCESS,t.payload.items&&(e.starredFilesMetadata.items=t.payload.items.map(S),h(e),e.starredFilesMetadata.hasLoadedInitial=!0,e.starredFilesMetadata.hasMore=!!t.payload.has_more)}).addCase(t.getAllStarred.rejected,e=>{e.starredFilesMetadata.loadingState=n.StarredLoadingStateEnum.LOAD_FAILED})}});t.reducer=T.reducer,t.StarredActions=T.actions})),define("metaserver/static/js/starred/api",["require","exports","metaserver/static/js/deprecated_ajax/ajax_jquery"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.update=t.fetchStatuses=void 0;const a=(e,t,a)=>new Promise((r,s)=>{(a?i.SilentBackgroundRequest:i.WebRequest)({url:e,type:"POST",dataType:"json",data:t,success:r,error:(e,t,i)=>s(Error(`error: ${i}, status: ${t}`))})});t.fetchStatuses=(e,t)=>a("/starred/get_status",{role:e,resources_json:JSON.stringify(t)},!0);t.update=(e,t,i,r)=>a("/starred/update",{role:e,resource_id:t,id_type:i,is_starred:r},!0)})),define("metaserver/static/js/home/starred/api_post_tti",["require","exports","tslib","metaserver/static/js/home/api","metaserver/static/js/home/store"],(function(e,t,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.retrieveStarred=void 0,t.retrieveStarred=function(e){return i.__awaiter(this,void 0,void 0,(function*(){return yield(0,a.makeRequest)({url:"/home_feed/retrieve_starred",type:"POST",data:{role:(0,r.getRole)(),limit:e}})}))}})),define("metaserver/static/js/starred/redux/initialState",["require","exports","metaserver/static/js/starred/redux/types"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.starredInitialState=void 0,t.starredInitialState={starredStates:{},starredFilesMetadata:{loadingState:i.StarredLoadingStateEnum.NOT_STARTED,items:[],hasMore:!0,hasLoadedInitial:!1}}})),define("metaserver/static/js/home/starred/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INITIAL_STARRED_ITEMS_LIMIT=t.LOAD_ALL_ITEMS_COUNT=t.StarredLoadingTypes=t.StarredLoggingTypes=t.NOT_PAPER_USER_ERROR=t.StarredResourceActionTypes=void 0,t.StarredResourceActionTypes={LOADING_INITIAL:"HOME_STARRED_LOADING_INITIAL",LOADING_ALL:"HOME_STARRED_LOADING_ALL",LOAD_SUCCESS:"HOME_STARRED_LOAD_SUCCESS",LOAD_FAILURE:"HOME_STARRED_LOAD_FAILURE",HIDE_EMPTY_SECTION:"HOME_STARRED_HIDE_EMPTY_SECTION"},t.NOT_PAPER_USER_ERROR="not_paper_user",t.StarredLoggingTypes={CLICK_STAR:"click_star",CLICK_UNSTAR:"click_unstar"},t.StarredLoadingTypes={INITIAL:"INITIAL",ALL:"ALL"},t.LOAD_ALL_ITEMS_COUNT=1e3,t.INITIAL_STARRED_ITEMS_LIMIT=5})),define("metaserver/static/js/starred/redux/selectors",["require","exports","@reduxjs/toolkit","metaserver/static/js/redux/namespaces","metaserver/static/js/redux/selectors","metaserver/static/js/starred/redux/initialState","metaserver/static/js/starred/redux/types"],(function(e,t,i,a,r,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isStarred=t.getHasLoadedInitial=t.getHasMore=t.getStarredItems=t.getMetadataLoadingState=t.getFileMetadata=t.getIsStarred=t.getStarredFileIds=t.getStarredBoolObject=t.getFileStarredData=t.getStarredStatuses=t.getStarredState=void 0;t.getStarredState=e=>(0,r.getStateAtNamespace)(e,a.STARRED_NAMESPACE_KEY)||s.starredInitialState;t.getStarredStatuses=e=>(0,t.getStarredState)(e).starredStates;t.getFileStarredData=(e,i)=>(0,t.getStarredStatuses)(e)[i],t.getStarredBoolObject=(0,i.createSelector)(t.getStarredStatuses,e=>e,(e,i)=>Object.keys(e).reduce((e,a)=>(e[a]=(0,t.getIsStarred)(i,a),e),{})),t.getStarredFileIds=(0,i.createSelector)(t.getStarredBoolObject,e=>Object.keys(e).filter(t=>e[t]));t.getIsStarred=(e,i)=>{const a=(0,t.getFileStarredData)(e,i);return(null==a?void 0:a.loadingState)!==n.StarredLoadingStateEnum.LOAD_FAILED&&((null==a?void 0:a.isStarred)||!1)};t.getFileMetadata=e=>(0,t.getStarredState)(e).starredFilesMetadata;t.getMetadataLoadingState=e=>(0,t.getFileMetadata)(e).loadingState,t.getStarredItems=(0,i.createSelector)(t.getFileMetadata,t.getStarredStatuses,(e,i)=>e.items.filter(({resourceId:e})=>void 0!==i[e]&&(0,t.isStarred)(i[e])));t.getHasMore=e=>(0,t.getFileMetadata)(e).hasMore;t.getHasLoadedInitial=e=>(0,t.getFileMetadata)(e).hasLoadedInitial;t.isStarred=e=>{var t;return(e.loadingState===n.StarredLoadingStateEnum.LOAD_SUCCESS||e.loadingState===n.StarredLoadingStateEnum.LOADING)&&(null!==(t=e.isStarred)&&void 0!==t&&t)}})),define("metaserver/static/js/starred/utils",["require","exports","metaserver/static/js/core/i18n","metaserver/static/js/clean/ui/snackbar"],(function(e,t,i,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.displayStarSnackbar=void 0;t.displayStarSnackbar=({itemName:e,isStarred:t,success:r})=>{if(r){let r;r=e?t?i.intl.formatMessage({id:"m96IvY",defaultMessage:"Starred {itemName}."},{itemName:e}):i.intl.formatMessage({id:"Yn2gx1",defaultMessage:"Unstarred {itemName}."},{itemName:e}):t?i.intl.formatMessage({id:"IxGSEU",defaultMessage:"Starred."},{itemName:e}):i.intl.formatMessage({id:"RZWOu0",defaultMessage:"Unstarred."},{itemName:e}),a.Snackbar.complete(r,"star-action")}else{let r;r=e?t?i.intl.formatMessage({id:"5O9Xva",defaultMessage:"There was a problem starring {item_name}"},{item_name:e}):i.intl.formatMessage({id:"CvW0nU",defaultMessage:"There was a problem unstarring {item_name}"},{item_name:e}):t?i.intl.formatMessage({id:"jouX9E",defaultMessage:"There was a problem starring your selection"}):i.intl.formatMessage({id:"TkdYlT",defaultMessage:"There was a problem unstarring your selection"}),a.Snackbar.fail(r,"star-action")}}})),define("metaserver/static/js/starred/redux/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StarredLoadingStateEnum=void 0,(function(e){e.NOT_STARTED="NOT_STARTED",e.LOADING="LOADING",e.LOAD_SUCCESS="LOAD_SUCCESS",e.LOAD_FAILED="LOAD_FAILED"})(t.StarredLoadingStateEnum||(t.StarredLoadingStateEnum={}))})),define("metaserver/static/js/browse/selection_indicator",["require","exports","tslib","react","dig-components/typography","classnames","metaserver/static/js/core/i18n"],(function(e,t,i,a,r,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionIndicator=void 0,a=i.__importDefault(a),s=i.__importDefault(s),t.SelectionIndicator=a.default.memo(({responsive:e,selectedFilesCount:t,rightRailCollapsed:i,isInFamilyFolder:o})=>{const c=e.isMatchedLarge||!e.isResponsive,l=!c&&e.isMatchedMedium;return(i&&c||l)&&(!o||t>0)?a.default.createElement(r.Text,{className:(0,s.default)("file-selection-indicator",{"file-selection-indicator--hidden":0===t}),isBold:!0},n.intl.formatMessage({id:"P94f2q",defaultMessage:"{count} {count, plural, one{selected} other{selected}}"},{count:t})):null}),t.SelectionIndicator.displayName="SelectionIndicator"})),define("metaserver/static/js/home/resource/api_post_tti",["require","exports","metaserver/static/js/home/api"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFileMetadata=void 0,t.getFileMetadata=function(e,t){return(0,i.makeRequest)({url:"/home_feed/get_file_metadata",type:"POST",subject_user:e.id,data:{resources_json:JSON.stringify(t)}},{isBackground:!0})}})),define("metaserver/static/js/home/starred/actions_post_tti",["require","exports","tslib","metaserver/static/js/flux/dispatcher","metaserver/static/js/home/resource/api_post_tti","metaserver/static/js/starred/id_type_pair","metaserver/static/js/home/constants","metaserver/static/js/home/store"],(function(e,t,i,a,r,s,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStarredStatusMetadata=void 0,t.getStarredStatusMetadata=function(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=e.map(e=>e.idTypePair);if(0===t.length)return;const i=yield(0,r.getFileMetadata)((0,o.getUser)(),t),c={};i.forEach(e=>c[(0,s.idTypePairToString)(e)]=e.file_metadata),a.Dispatcher.dispatch({type:n.HomeResourceStoreActionTypes.RECEIVED_RESOURCE_ID_TO_FILE,resourceIdToFile:c})}))}})),define("metaserver/static/js/home/resource_id_types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HOME_RESOURCE_ID_TYPE=void 0,(function(e){e.ENCODED_FILE_OBJ_ID="ENCODED_FILE_OBJ_ID",e.FQ_PATH="FQ_PATH",e.PAPER_DOCUMENT_ID="PAPER_DOCUMENT_ID",e.PAPER_FOLDER_ID="PAPER_FOLDER_ID",e.PAPER_DOCUMENT_ID_PATH="PAPER_DOCUMENT_ID_PATH",e.PAPER_FOLDER_ID_PATH="PAPER_FOLDER_ID_PATH",e.EXTERNAL_RESOURCE_ID="EXTERNAL_RESOURCE_ID",e.UNKNOWN="UNKNOWN"})(t.HOME_RESOURCE_ID_TYPE||(t.HOME_RESOURCE_ID_TYPE={}))})),define("metaserver/static/js/browse_tts/browse_tts",["require","exports","metaserver/static/js/pap/analytics_client","metaserver/static/js/modules/constants/page_load","metaserver/static/js/dropbox/proto/pap_events/organize/finish_browse_time_to_success"],(function(e,t,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logBrowseTTS=t.initBrowseTTS=void 0;var s=r.pap_events.organize.Finish_BrowseTimeToSuccess;t.initBrowseTTS=e=>{window.localStorage.removeItem("dbx_browse_tts");const t={startTime:Date.now(),origin:e,sessionId:a.SESSION_ID};window.localStorage.setItem("dbx_browse_tts",JSON.stringify(t))};t.logBrowseTTS=e=>{const t=window.localStorage.getItem("dbx_browse_tts");if(!t)return;const r=JSON.parse(t),n=Date.now(),o=n-r.startTime;if(o<0)return;const c=o<27e4&&r.sessionId===a.SESSION_ID,l=s.create({browseTtsOrigin:r.origin,browseTtsStartTimeTs:r.startTime,browseTtsEndTimeTs:n,browseTtsTimeToSuccess:o,browseTtsEventName:e,browseTtsSuccess:c});(0,i.logEvent)(l),window.localStorage.removeItem("dbx_browse_tts")}})),define("metaserver/static/js/dropbox/proto/pap_events/organize/finish_browse_time_to_success",["require","exports","tslib","protobufjs/minimal","metaserver/static/js/dropbox/proto/pap_events/predefined_event"],(function(e,t,i,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;(a=i.__importStar(a)).Reader,a.Writer,a.util;const r=a.roots.default||(a.roots.default={});var s,n;t.default=r,t.pap_events=r.pap_events=((s=r.pap_events||{}).organize=((n=s.organize||{}).Finish_BrowseTimeToSuccess=(function(e){function e(e){if(e)for(let t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.prototype.browseTtsOrigin=0,e.prototype.browseTtsStartTimeTs=0,e.prototype.browseTtsEndTimeTs=0,e.prototype.browseTtsTimeToSuccess=0,e.prototype.browseTtsEventName=0,e.prototype.browseTtsSuccess=!1,e.create=function(t){return new e(t)},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.organize.Finish_BrowseTimeToSuccess"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="ORGANIZE"]=0,t})(),e.BrowseTtsEventName=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_BROWSE_TTS_EVENT_NAME"]=0,t[e[1]="UPLOAD_FILE_BROWSE_TTS_EVENT_NAME"]=1,t[e[2]="UPLOAD_FOLDER_BROWSE_TTS_EVENT_NAME"]=2,t[e[3]="CREATE_FOLDER_BROWSE_TTS_EVENT_NAME"]=3,t[e[4]="SHARE_FILE_BROWSE_TTS_EVENT_NAME"]=4,t[e[5]="OPEN_IN_FINDER_BROWSE_TTS_EVENT_NAME"]=5,t[e[6]="OPEN_IN_APP_BROWSE_TTS_EVENT_NAME"]=6,t[e[7]="DOWNLOAD_FILE_BROWSE_TTS_EVENT_NAME"]=7,t[e[8]="PREVIEW_LOCAL_BROWSE_TTS_EVENT_NAME"]=8,t[e[9]="PREVIEW_DROPBOX_BROWSE_TTS_EVENT_NAME"]=9,t[e[10]="MOVE_FILE_BROWSE_TTS_EVENT_NAME"]=10,t[e[11]="COPY_FILE_BROWSE_TTS_EVENT_NAME"]=11,t[e[12]="OPEN_IN_NEW_TAB_BROWSE_TTS_EVENT_NAME"]=12,t[e[13]="DELETE_FILE_BROWSE_TTS_EVENT_NAME"]=13,t[e[14]="CREATE_DOCUMENT_BROWSE_TTS_EVENT_NAME"]=14,t[e[15]="CREATE_PRESENTATION_BROWSE_TTS_EVENT_NAME"]=15,t[e[16]="CREATE_SPREADSHEET_BROWSE_TTS_EVENT_NAME"]=16,t[e[17]="CREATE_SOMETHING_ELSE_BROWSE_TTS_EVENT_NAME"]=17,t[e[18]="MULTI_FILE_ORGANIZE_BROWSE_TTS_EVENT_NAME"]=18,t[e[19]="RENAME_FILE_BROWSE_TTS_EVENT_NAME"]=19,t[e[20]="SET_NAMING_CONVENTION_BROWSE_TTS_EVENT_NAME"]=20,t[e[21]="FILE_SAVE_AS_BROWSE_TTS_EVENT_NAME"]=21,t[e[22]="WORKFLOWS_SAVE_AS_BROWSE_TTS_EVENT_NAME"]=22,t[e[23]="CREATE_AUTOMATED_FOLDER_BROWSE_TTS_EVENT_NAME"]=23,t[e[24]="GO_TO_FOLDER_BROWSE_TTS_EVENT_NAME"]=24,t[e[25]="STAR_BROWSE_TTS_EVENT_NAME"]=25,t[e[26]="SHARE_WITH_EXTERNAL_APP_BROWSE_TTS_EVENT_NAME"]=26,t[e[27]="UPDATE_FILE_SETTINGS_BROWSE_TTS_EVENT_NAME"]=27,t[e[28]="UNSHARE_FILE_BROWSE_TTS_EVENT_NAME"]=28,t[e[29]="DELETE_LINK_BROWSE_TTS_EVENT_NAME"]=29,t[e[30]="COPY_LINK_BROWSE_TTS_EVENT_NAME"]=30,t[e[31]="FIND_DUPLICATES_BROWSE_TTS_EVENT_NAME"]=31,t})(),e.BrowseTtsOrigin=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_BROWSE_TTS_ORIGIN"]=0,t[e[1]="HOME_BROWSE_TTS_ORIGIN"]=1,t[e[2]="ROOT_BROWSE_TTS_ORIGIN"]=2,t})(),e})(n.Finish_BrowseTimeToSuccess||{}),n),s)})),define("metaserver/static/js/home/roots/home_access_main",["require","exports","tslib","react","classnames","@bufbuild/protobuf","metaserver/static/js/home/constants","metaserver/static/js/home/store","metaserver/static/js/files_page/actionBar/lazy_files_page_action_bar","metaserver/static/js/home/util/conditional_components","metaserver/static/js/home/recents/components/recent_activity_container","metaserver/static/js/home/util/logging/availability_logger","metaserver/static/js/home/retrieval/retrieval_view"],(function(e,t,i,a,r,s,n,o,c,l,d,_,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HomeAccessMain=void 0,a=i.__importDefault(a),r=i.__importDefault(r);class m extends a.default.PureComponent{constructor(e){super(e),this.outerFrame=e=>{this.element=e},this.updateWidth=()=>{this.setState({containerWidth:this.getWidth()})},this.onResize=()=>{window.requestAnimationFrame?window.requestAnimationFrame(this.updateWidth):setTimeout(this.updateWidth,250)},this.onHomeStoreUpdate=()=>this.setState(this.getStateFromStore()),this._LazyFilesActionBar=(0,c.LazyFilesActionBar)(e=>this.setState({actionBarHeight:e})),this.state=this.getStateFromStore(),this.removeStoreListeners=(0,o.getHomeStore)().addListener(this.onHomeStoreUpdate)}componentDidMount(){this.updateWidth(),window.addEventListener("resize",this.onResize)}componentWillUnmount(){this.removeStoreListeners&&this.removeStoreListeners()}getStateFromStore(){var e;const t=(0,o.getHomeStore)(),i=t.getPreTTIProps(),a=this.getHomeTeamFlags(i.expHomeSurfaceExistingTeams);return{sectionVisibility:t.getSectionVisibility(),canRenderAllHomeSections:t.canRenderAllHomeSections(),canRenderItems:t.canRenderItems(),containerWidth:this.getWidth(),pageType:t.getPageType(location.pathname),expHomeSurfaceExistingTeamsProps:a,actionBarHeight:(null===(e=this.state)||void 0===e?void 0:e.actionBarHeight)||0,useFilesActionTable:"ON"===i.starredTableRedesign,homeRetrievalVariant:i.homeRetrievalVariant,homeRetrievalDeprecatePanels:i.homeRetrievalDeprecatePanels}}getHomeTeamFlags(e){return{showTeamsOnHomepageExperiment:(null==e?void 0:e.showTeamsOnHomepageExperiment)||!1,showTeamsLoadingState:(null==e?void 0:e.showTeamsLoadingState)||!1,numberOfTeams:(null==e?void 0:e.numberOfTeams)||s.protoInt64.parse(0)}}getWidth(){let e=1;return this.element&&this.element.getBoundingClientRect&&(e=this.element.getBoundingClientRect().width||1),e}render(){const{canRenderAllHomeSections:e,sectionVisibility:t,canRenderItems:i,expHomeSurfaceExistingTeamsProps:s,containerWidth:o,actionBarHeight:c,homeRetrievalVariant:m,homeRetrievalDeprecatePanels:u}=this.state,{now:E}=this.props;if(e){const e=(0,r.default)({"home-access-sections":!0}),S={height:`calc(100% - ${c}px)`,overflow:"auto"},h=i,T=a.default.createElement(l.ConditionalRecommendedMembersView,{key:"recommended-members-view",isHiddenByUser:!t[n.HomeSections.RECOMMENDED_MEMBERS],canRenderItems:h,containerWidth:o}),g=a.default.createElement(l.ConditionalSuggestView,{key:"suggest-view",isHiddenByUser:!t[n.HomeSections.SUGGEST],containerWidth:o,canRenderItems:h,homeAvailabilityLogger:(0,_.getHomeAvailabilityLogger)()}),R=a.default.createElement(l.ConditionalStarredView,{key:"starred-view",isHiddenByUser:!t[n.HomeSections.STARRED],canRenderItems:h,useFilesActionTable:this.state.useFilesActionTable}),f=a.default.createElement(d.RecentActivityContainer,{key:"recent-activity-view",now:E,canRenderItems:h,isHiddenByUser:!t[n.HomeSections.RECENTS],showHeader:!0,fullItemView:!0,showAll:!1}),C=a.default.createElement(l.ConditionalTeamsView,{key:"teams-view",isHiddenByUser:!t[n.HomeSections.TEAMS],canRenderItems:h,showTeamsLoadingState:s.showTeamsLoadingState,showTeamsOnHomepageExperiment:s.showTeamsOnHomepageExperiment,numberOfTeams:Number(s.numberOfTeams)}),v=a.default.createElement(l.ConditionalHomeInlineContentPromptView,{key:"prompt-view",canRenderItems:h}),L=[a.default.createElement(p.RetrievalView,{homeRetrievalVariant:m}),v,C,T];return"FACETS"!==m&&L.push(g),"RECENTS"!==u&&L.push(f),"STARRED"!==u&&L.push(R),a.default.createElement("div",{className:"home",ref:this.outerFrame},a.default.createElement("main",{className:"home-access",role:"main"},a.default.createElement(this._LazyFilesActionBar,{isEnabled:!0,uploadActionEnabled:!0,createActionProps:{showSharedFolderCreate:!0,showAutomatedFolderCreate:!0,showPaperCreate:!0,showCaptureCreate:!0,showBinderCreate:!0},actionScreen:"home_screen"}),a.default.createElement("div",{className:e,ref:"main",style:S},L)))}return a.default.createElement("div",{ref:this.outerFrame})}}t.HomeAccessMain=m,m.displayName="HomeAccessMain"})),define("metaserver/static/js/files_page/actionBar/lazy_files_page_action_bar",["require","exports","tslib","react","js/common/rendering"],(function(e,t,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LazyFilesActionBar=void 0,a=i.__importStar(a);t.LazyFilesActionBar=t=>(0,r.withSuspenseNoSSR)(a.lazy(()=>i.__awaiter(void 0,void 0,void 0,(function*(){const{FilesPageActionBar:a,FILES_PAGE_ACTION_BAR_HEIGHT:r}=yield new Promise((t,i)=>{e(["metaserver/static/js/files_page/actionBar/files_page_action_bar"],t,i)}).then(i.__importStar);return null==t||t(r),{default:a}}))))}));var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&("get"in r?t.__esModule:!r.writable&&!r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,a,r)}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(t,e,i);return __setModuleDefault(t,e),t};define("metaserver/static/js/continuous_onboarding/continuous_onboarding_loader",["require","exports","metaserver/static/js/async/loadable"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContinuousOnboardingLoadable=void 0,t.ContinuousOnboardingLoadable=(0,i.Loadable)({loader:()=>new Promise((t,i)=>{e(["metaserver/static/js/continuous_onboarding/continuous_onboarding"],t,i)}).then(__importStar).then(({ContinuousOnboarding:e})=>e)})})),define("typescript/dropbox/proto/js_init_data/home_web/home_access_web_pb",["require","exports","@bufbuild/protobuf","../web_timing_logger/web_timing_logger_pb"],(function(e,t,i,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HomeWebPageletProps=t.SectionToConditionalData=t.PreTTIGateProps=t.HomeSurfaceExistingTeamsProps=void 0;class r extends i.Message{constructor(e){super(),this.showTeamsOnHomepageExperiment=!1,this.showTeamsLoadingState=!1,this.numberOfTeams=i.protoInt64.zero,i.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new r).fromBinary(e,t)}static fromJson(e,t){return(new r).fromJson(e,t)}static fromJsonString(e,t){return(new r).fromJsonString(e,t)}static equals(e,t){return i.proto3.util.equals(r,e,t)}}t.HomeSurfaceExistingTeamsProps=r,r.runtime=i.proto3,r.typeName="home_web.HomeSurfaceExistingTeamsProps",r.fields=i.proto3.util.newFieldList(()=>[{no:1,name:"showTeamsOnHomepageExperiment",kind:"scalar",T:8},{no:2,name:"showTeamsLoadingState",kind:"scalar",T:8},{no:3,name:"numberOfTeams",kind:"scalar",T:3}]);class s extends i.Message{constructor(e){super(),this.isPaperEnabledForUser=!1,this.activeVariants={},this.homeStarredActionBar="",this.starredTableRedesign="",this.homeRetrievalVariant="",this.homeRetrievalHomeRename="",this.homeRetrievalDeprecatePanels="",i.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new s).fromBinary(e,t)}static fromJson(e,t){return(new s).fromJson(e,t)}static fromJsonString(e,t){return(new s).fromJsonString(e,t)}static equals(e,t){return i.proto3.util.equals(s,e,t)}}t.PreTTIGateProps=s,s.runtime=i.proto3,s.typeName="home_web.PreTTIGateProps",s.fields=i.proto3.util.newFieldList(()=>[{no:1,name:"is_paper_enabled_for_user",kind:"scalar",T:8},{no:2,name:"active_variants",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:14,name:"exp_home_surface_existing_teams",kind:"message",T:r},{no:21,name:"home_starred_action_bar",kind:"scalar",T:9},{no:22,name:"starred_table_redesign",kind:"scalar",T:9},{no:23,name:"home_retrieval_variant",kind:"scalar",T:9},{no:24,name:"home_retrieval_home_rename",kind:"scalar",T:9},{no:25,name:"home_retrieval_deprecate_panels",kind:"scalar",T:9}]);class n extends i.Message{constructor(e){super(),this.isPostTti=!1,i.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new n).fromBinary(e,t)}static fromJson(e,t){return(new n).fromJson(e,t)}static fromJsonString(e,t){return(new n).fromJsonString(e,t)}static equals(e,t){return i.proto3.util.equals(n,e,t)}}t.SectionToConditionalData=n,n.runtime=i.proto3,n.typeName="home_web.SectionToConditionalData",n.fields=i.proto3.util.newFieldList(()=>[{no:1,name:"is_post_tti",kind:"scalar",T:8}]);class o extends i.Message{constructor(e){super(),this.initialRole="",this.initialSectionVisibility={},this.sectionToConditionalData={},i.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new o).fromBinary(e,t)}static fromJson(e,t){return(new o).fromJson(e,t)}static fromJsonString(e,t){return(new o).fromJsonString(e,t)}static equals(e,t){return i.proto3.util.equals(o,e,t)}}t.HomeWebPageletProps=o,o.runtime=i.proto3,o.typeName="home_web.HomeWebPageletProps",o.fields=i.proto3.util.newFieldList(()=>[{no:1,name:"initial_role",kind:"scalar",T:9},{no:2,name:"initial_section_visibility",kind:"map",K:9,V:{kind:"scalar",T:8}},{no:3,name:"section_to_conditional_data",kind:"map",K:9,V:{kind:"message",T:n}},{no:4,name:"web_timing_logger_server_context",kind:"message",T:a.WebTimingLoggerServerContext},{no:5,name:"pre_tti_props",kind:"message",T:s}])})),define("metaserver/static/js/home/util/conditional_components",["require","exports","tslib","react","metaserver/static/js/home/constants","metaserver/static/js/home/util/conditional","metaserver/static/js/content_suggestions/suggest_loading","metaserver/static/js/home/post_tti/api","metaserver/static/js/components/ui/css"],(function(e,t,i,a,r,s,n,o,c){"use strict";function l(e){return e&&{componentClass:e.StarredView,initPrefetch:()=>{}}}Object.defineProperty(t,"__esModule",{value:!0}),t.ConditionalRecommendedMembersView=t.ConditionalHomeInlineContentPromptView=t.ConditionalTeamsView=t.ConditionalSuggestView=t.ConditionalStarredView=void 0,a=i.__importDefault(a),t.ConditionalStarredView=(0,s.homeConditionalSection)({section:r.HomeSections.STARRED,syncLoader:()=>l(e("metaserver/static/js/home/starred/conditional_interface")),asyncLoader:()=>new Promise((t,i)=>{e(["metaserver/static/js/home/starred/conditional_interface"],t,i)}).then(i.__importStar).then(e=>l(e)),loading:e=>null}),t.ConditionalSuggestView=(0,s.homeConditionalSection)({section:r.HomeSections.SUGGEST,syncLoader:()=>null,asyncLoader:()=>i.__awaiter(void 0,void 0,void 0,(function*(){const{initPrefetch:e,HomeSuggest:t}=yield(0,o.waitForHomeTTI)();return{componentClass:t,initPrefetch:e}})),loading:e=>a.default.createElement(n.SuggestLoading,Object.assign({},e))}),t.ConditionalTeamsView=(0,s.homeConditionalSection)({section:r.HomeSections.TEAMS,syncLoader:()=>null,asyncLoader:()=>i.__awaiter(void 0,void 0,void 0,(function*(){const{initPrefetchHomeTeams:e,HomeTeams:t}=yield(0,o.waitForHomeTTI)();return{componentClass:(0,c.requireCssWithComponent)(t,["/static/metaserver/static/css/home_access/teams-vflbQR75a.css"]),initPrefetch:e}})),loading:e=>null}),t.ConditionalHomeInlineContentPromptView=(0,s.homeConditionalSection)({section:r.HomeSections.PROMPT,syncLoader:()=>null,asyncLoader:()=>i.__awaiter(void 0,void 0,void 0,(function*(){const{initPrefetchHomeInlineContentPrompt:e,HomeInlineContentPrompt:t}=yield(0,o.waitForHomeTTI)();return{componentClass:(0,c.requireCssWithComponent)(t,["/static/metaserver/static/css/upsell/home_inline_content-vflD-aNTQ.css"]),initPrefetch:e}})),loading:e=>null}),t.ConditionalRecommendedMembersView=(0,s.homeConditionalSection)({section:r.HomeSections.RECOMMENDED_MEMBERS,syncLoader:()=>null,asyncLoader:()=>i.__awaiter(void 0,void 0,void 0,(function*(){const{initPrefetchRecommendedMembers:e,RecommendedMembers:t}=yield(0,o.waitForHomeTTI)();return{componentClass:(0,c.requireCssWithComponent)(t,["/static/metaserver/static/css/team_success/home_recommended_members/recommended_members-vflhB8ElQ.css"]),initPrefetch:e}})),loading:e=>null})})),define("metaserver/static/js/home/roots/home_access_web",["require","exports","tslib","typescript/dropbox/proto/js_init_data/home_web/home_access_web_pb","metaserver/static/js/flux/dispatcher","metaserver/static/js/clean/history","metaserver/static/js/home/constants","metaserver/static/js/home/post_tti/api","metaserver/static/js/home/recents/stores/recent_activity_store","metaserver/static/js/home/resource/store","metaserver/static/js/home/roots/home_access_main","metaserver/static/js/home/roots/empty_sidebar","metaserver/static/js/home/store","metaserver/static/js/home/util/conditional_api","metaserver/static/js/home/util/logging/timing_logger","metaserver/static/js/maestro/layout/header","metaserver/static/js/maestro/layout/search","metaserver/static/js/clean/ui/snackbar","metaserver/static/js/clean/ui/snackbar_manager","metaserver/static/js/clean/web_timing_logger","metaserver/static/js/core/exception","metaserver/static/js/core/i18n","js/proto_utils/unpack","react","react-intl","metaserver/static/js/browse_tts/browse_tts","metaserver/static/js/dropbox/proto/pap_events/organize/finish_browse_time_to_success","metaserver/static/js/home/retrieval/home_rename","metaserver/static/js/home/util/logging/availability_logger","metaserver/static/js/starred/redux/slice"],(function(e,t,i,a,r,s,n,o,c,l,d,_,p,m,u,E,S,h,T,g,R,f,C,v,L,A,O,I,y,M){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RootComponent=t.HomeAccessWeb=void 0,s=i.__importDefault(s),g=i.__importStar(g),v=i.__importDefault(v);var N=O.pap_events.organize.Finish_BrowseTimeToSuccess.BrowseTtsOrigin;class b extends v.default.PureComponent{constructor(e){super(e),this.intervalHandle=null,this.snackbarManager=v.default.createRef(),this.closeFileViewerAsNeeded=e=>(t,i)=>{!i.preview&&e.isShown()&&e.close()},this.renderEmptySidebar=()=>v.default.createElement(_.EmptySidebar,null),g.log_js_modules_application_code_start();const{preTtiProps:t,initialRole:i,initialSectionVisibility:a,sectionToConditionalData:r}=e;b.initializeHomeStores(i,a,r,t||n.DEFAULT_PRE_TTI_PROPS),this.state={now:new Date,isPostTTI:!1}}static initializeHomeStores(e,t,i,a){u.homeTimingLogger.activate(),(0,p.getHomeStore)();const s={role:e,sectionVisibility:t,preTTIProps:a,sectionToConditionalData:i};r.Dispatcher.dispatch({type:n.HomeActionTypes.INITIALIZE_STORE,payload:s}),(0,l.getHomeResourceStore)(),(0,c.getRecentActivityStore)(),(0,m.waitForStarred)(e=>{(0,y.getHomeAvailabilityLogger)().handlePrefetch(n.HomePrefetchTypes.RETRIEVE_STARRED,t=>e.getStoreForStarred().dispatch(M.StarredActions.setStarredMetadata(t)))})}componentDidMount(){h.Snackbar.manager=this.snackbarManager.current,(0,o.waitForHomeTTIWithProps)().then(({imports:e,props:t})=>{this.setState({isPostTTI:!0}),this.intervalHandle=setInterval(()=>this.setState({now:new Date}),6e4),e.homeAccessWebComponentDidMount(t.maybeRenderTeamAdminModals),(0,A.initBrowseTTS)(N.HOME_BROWSE_TTS_ORIGIN)}),new Promise((t,i)=>{e(["metaserver/static/js/file_viewer/controller"],t,i)}).then(i.__importStar).then(e=>s.default.add_callback(location.pathname,this.closeFileViewerAsNeeded(e)))}componentWillUnmount(){null!=this.intervalHandle&&clearInterval(this.intervalHandle)}render(){var e;const{now:t}=this.state,i=null===(e=this.props.preTtiProps)||void 0===e?void 0:e.homeRetrievalHomeRename,a=(0,I.getHomeTitle)(i);return v.default.createElement(L.RawIntlProvider,{value:f.intl},v.default.createElement("div",{id:"page-content"},v.default.createElement(S.SearchChrome,{user:(0,p.getUser)(),embeddedAppRegion:v.default.createElement(d.HomeAccessMain,{now:t}),titleRegion:v.default.createElement(E.MaestroHeaderTitle,null,a),sidebarClass:"empty-sidebar",actionSidebarRegion:this.renderEmptySidebar,searchBarProps:{searchVariant:"full-page"},wideSecondarySidebar:!0,chromeClass:"dig2--enabled",useMaestroPortal:!0})),v.default.createElement(T.SnackbarManager,{ref:this.snackbarManager,getParentElement:T.SnackbarManager.getEmbeddedAppPagelet,useDigSnackbars:!0}),v.default.createElement("div",{id:"react-file-viewer"}))}}t.HomeAccessWeb=b,b.displayName="HomeAccessWeb";t.RootComponent=e=>{const t=(0,C.unmarshalProto)(e.encodedProto,a.HomeWebPageletProps),{webTimingLoggerServerContext:r}=t,s=i.__rest(t,["webTimingLoggerServerContext"]);return r?g.initialize({log_time_to_interactive:!0},r):(0,R.reportException)({err:new Error("Missing WebTimingLogger server context"),severity:"non-critical"}),v.default.createElement(b,Object.assign({},s))}})),define("metaserver/static/js/sharing/views/copy_link_mini_modal/copy_link_mini_modal",["require","exports","tslib","react","metaserver/static/js/components/ui/modal","metaserver/static/js/components/ui/css","metaserver/static/js/flux/dispatcher","metaserver/static/js/browse/constants","metaserver/static/js/clean/web_user_action_events","metaserver/static/js/sharing/views/share_modal_evolution/utils/logging","typescript/component_libraries/spectrum-sharing/src/utils/logging","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/clean/analytics","metaserver/static/js/core/browser_detection","metaserver/static/js/sharing/views/copy_link_mini_modal/copy_link_mini_modal_util","metaserver/static/js/sharing/views/copy_link_mini_modal/copy_link_mini_modal_overlay","metaserver/static/js/sharing/views/copy_link_mini_modal/copy_link_mini_modal_util","metaserver/static/js/clean/clipboard_v3","metaserver/static/js/sharing/ui_util","metaserver/static/js/modules/constants/sharing","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/browse/shared_with/redux/store","metaserver/static/js/browse/shared_with/redux/slice"],(function(e,t,i,a,r,s,n,o,c,l,d,_,p,m,u,E,S,h,T,g,R,f,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyLinkMiniModal=t.CopyLinkMiniModalComponent=void 0,a=i.__importDefault(a),r=i.__importStar(r);class v extends a.default.Component{constructor(e){super(e),this.handleCopyLinkToClipboard=()=>{(0,h.copyToClipboard)(this.sharedLink.url,()=>{this.handleClipboardSuccess(u.CopyLinkMethod.EXEC_COMMAND)},this.handleClipboardFailure)},this.handleClipboardSuccess=e=>{e!==u.CopyLinkMethod.MANUAL&&this.setState({stage:u.ModalState.RESULT}),this.logEvent(d.TiburonEventName.CopySharedLink,{created_new_link:this.isLinkNewlyCreated,copy_method:e})},this.handleClipboardFailure=()=>{this.copyLinkToClipboardNewAPI()},this.copyLinkToClipboardNewAPI=()=>{if(navigator.clipboard){const e=this.sharedLink.url;navigator.clipboard.writeText(e).then(()=>{this.handleClipboardSuccess(u.CopyLinkMethod.CLIPBOARD_API)},()=>{this.handleClipboardFailureNewAPI()})}else this.handleClipboardFailureNewAPI()},this.handleClipboardFailureNewAPI=()=>{this.exceptionType=u.CopyLinkException.FAILED_COPY_TO_CLIPBOARD,this.failToFetchCopyLinkHelper()},this.onClose=()=>{this.props.setIsCreatingSharedLink(!1,this.fileIdOrPath),this.props.userActionSource===c.ActionSourceValue.BUTTON&&this.props.onHoverLocked&&this.props.onHoverLocked({isOpen:!1}),this.props.onActionFlowComplete&&this.props.onActionFlowComplete(),this.setState({isOpen:!1})},this.focusOnInput=()=>{this.inputRef.current&&this.inputRef.current.select()},this.inputRef=a.default.createRef(),this.state={isOpen:!0,stage:u.ModalState.PENDING},this.fileIdOrPath=this.getFileIdOrPath()}componentDidMount(){this.createSharedLink()}createSharedLink(){this.props.setIsCreatingSharedLink(!0,this.fileIdOrPath),this.props.userActionSource===c.ActionSourceValue.BUTTON&&this.props.onHoverLocked&&this.props.onHoverLocked({isOpen:!0});const e=(0,S.getApiClient)(this.props.user);let t=this.props.isInUserLevelSharingSettings?"default":"max";t="ON"===g.SHARING_EXPERIMENTS.USER_LEVEL_SHARING_SETTINGS?"default":t,e.createSharedLinkNonAlpha({fileIdOrPath:this.fileIdOrPath,settings:{access:t}}).then(e=>{this.succeedToFetchLinkHelper(e,!0),this.shareFolderIfNeeded(e)}).catch(e=>{e.error[".tag"]===u.CopyLinkException.SHARED_LINK_ALREADY_EXISTS?this.succeedToFetchLinkHelper(e.error.shared_link_already_exists.metadata,!1,e):e.error[".tag"]===u.CopyLinkException.ACCESS_DENIED?(this.exceptionType=u.CopyLinkException.ACCESS_DENIED,this.failToFetchCopyLinkHelper(e)):e.error[".tag"]===u.CopyLinkException.SETTINGS_ERROR&&e.error.settings_error[".tag"]===u.CopyLinkException.NOT_AUTHORIZED?(this.exceptionType=u.CopyLinkException.NOT_AUTHORIZED,this.failToFetchCopyLinkHelper(e)):e.error[".tag"]===u.CopyLinkException.PATH&&e.error.path[".tag"]===u.CopyLinkException.NOT_FOUND?(this.exceptionType=u.CopyLinkException.NOT_FOUND,this.failToFetchCopyLinkHelper(e)):e.error[".tag"]===u.CopyLinkException.EMAIL_NOT_VERIFIED?(this.exceptionType=u.CopyLinkException.EMAIL_NOT_VERIFIED,this.failToFetchCopyLinkHelper(e)):(this.exceptionType=e.error[".tag"]?e.error[".tag"]:u.CopyLinkException.UNDEFINED_ERROR,this.failToFetchCopyLinkHelper(e))})}succeedToFetchLinkHelper(e,t,i){this.sharedLink=e,this.isLinkNewlyCreated=t;const a=t?200:i&&i.raw&&i.raw.status;if(this.logEvent(d.TiburonEventName.SucceedCreateSharedLinkWithSettings,{created_new_link:t,http_status_code:a,response_status:"success",is_alpha:!1}),t&&this.props.file){const e=[this.props.file.fq_path];R.SHARED_WITH_REDUX?(0,f.getStoreForSharedWith)().dispatch((0,C.sharedLinkDataOutOfDate)(e)):n.Dispatcher.dispatch({type:o.SharedWithActionType.SIGNAL_SHARED_LINK_DATA_OUT_OF_DATE,data:{fileFqPaths:e}})}(0,S.isBrowserCopyEnabled)()?this.handleCopyLinkToClipboard():this.setState({stage:u.ModalState.COPY})}failToFetchCopyLinkHelper(e){e&&this.logEvent(d.TiburonEventName.FailCreateSharedLinkWithSettings,{error_message:this.exceptionType,http_status_code:e.raw&&e.raw.status,is_alpha:!1}),this.setState({stage:u.ModalState.ERROR}),this.logEvent(d.TiburonEventName.CopySharedLinkFailure,{error:this.exceptionType})}shareFolderIfNeeded(e){var t;if(!((null===(t=this.props.file)||void 0===t?void 0:t.is_dir)&&!this.props.file.target_ns))return;if(!(e.isRighteousLink()&&"editor"==e.accessLevel()))return;const i=(0,S.getFolderApiClient)(this.props.user.id),a={fqPath:this.props.file.fq_path,folderPolicy:null};i.share(a).catch(e=>{this.logEvent(d.TiburonEventName.FailCreateNamespaceAfterLinkCreated,{http_status_code:e.raw&&e.raw.status,error_tag:e.error&&e.error[".tag"]||"undefined_error",error_summary:e&&e.summary,access:"editor",delay_ns_creation_enabled:!0})})}getFileIdOrPath(){var e,t;return(null===(e=this.props.file)||void 0===e?void 0:e.file_id)||(null===(t=this.props.file)||void 0===t?void 0:t.fq_path)||this.props.filePath}getAccessLevel(){const e=this.sharedLink?this.sharedLink.link_permissions.link_access_level:void 0;let t="viewer";return e&&(t=e.hasOwnProperty(".tag")?e[".tag"]:e),t}logEvent(e,t){var i,a;let r=_.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ROW_BUTTON;this.props.userActionSurfaceLogValue===c.ActionSurfaceLogValue.RIGHT_SIDEBAR?(r=_.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ACTIONS,t=this.props.rightRailCollapsed?Object.assign(Object.assign({},t),{source:"right_rail_collapsed"}):Object.assign(Object.assign({},t),{source:"right_rail_open"})):this.props.userActionSource===c.ActionSourceValue.OVERFLOW_MENU?r=_.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ROW_OVERFLOW_MENU:this.props.userActionSource===c.ActionSourceValue.COPY_LINK_FROM_UPLOAD_MODAL&&(r=_.SHARE_ACTION_ORIGIN_TYPE.COPY_LINK_FROM_UPLOAD_MODAL);const s=(0,m.get_browser_info)();p.ShareTibEventLogger.log(this.props.user.id,e,r,Object.assign(Object.assign(Object.assign({},(0,l.buildExtraFromLinkMetadata)(this.sharedLink)),{file_id:null===(i=this.props.file)||void 0===i?void 0:i.file_id,fq_path:(null===(a=this.props.file)||void 0===a?void 0:a.fq_path)||this.props.filePath,browser:s.browser,browser_version:s.version}),t)),e===d.TiburonEventName.CopySharedLink&&(0,T.trackUserLeapEvent)(T.SharingUserLeapEvent.SHARE_LINK_COPY_SUCCESS,r)}static show(e,i){r.Modal.showInstance(a.default.createElement(t.CopyLinkMiniModal,Object.assign({},e)),!0,i)}render(){if(!this.state.isOpen)return null;switch(this.state.stage){case u.ModalState.PENDING:return a.default.createElement(E.CopyLinkMiniModalOverlay,{stage:u.ModalStage.PENDING,closeButtonHandler:this.onClose,anchorRef:this.props.anchorRef,zIndexOverride:this.props.zIndexOverride,yOffsetDistance:this.props.yOffsetDistance,placement:this.props.placement});case u.ModalState.COPY:return a.default.createElement(E.CopyLinkMiniModalOverlay,{stage:u.ModalStage.COPY,actionHandler:this.handleCopyLinkToClipboard,closeButtonHandler:this.onClose,sharedLink:this.sharedLink,focusOnInput:this.focusOnInput,anchorRef:this.props.anchorRef,inputRef:this.inputRef,shouldFocusOnLink:!1,onCopyToClipboard:this.handleClipboardSuccess,zIndexOverride:this.props.zIndexOverride,yOffsetDistance:this.props.yOffsetDistance,placement:this.props.placement});case u.ModalState.ERROR:return this.exceptionType!==u.CopyLinkException.FAILED_COPY_TO_CLIPBOARD?a.default.createElement(E.CopyLinkMiniModalOverlay,{stage:u.ModalStage.ERROR_SERVER,closeButtonHandler:this.onClose,anchorRef:this.props.anchorRef,errorMessage:(0,S.getServerErrorMessage)(this.exceptionType),zIndexOverride:this.props.zIndexOverride,yOffsetDistance:this.props.yOffsetDistance,placement:this.props.placement}):a.default.createElement(E.CopyLinkMiniModalOverlay,{stage:u.ModalStage.ERROR_CLIENT,actionHandler:this.handleCopyLinkToClipboard,closeButtonHandler:this.onClose,sharedLink:this.sharedLink,focusOnInput:this.focusOnInput,inputRef:this.inputRef,anchorRef:this.props.anchorRef,shouldFocusOnLink:!0,onCopyToClipboard:this.handleClipboardSuccess,zIndexOverride:this.props.zIndexOverride,yOffsetDistance:this.props.yOffsetDistance,placement:this.props.placement});case u.ModalState.RESULT:return a.default.createElement(E.CopyLinkMiniModalOverlay,{stage:u.ModalStage.RESULT,linkAccessLevel:this.getAccessLevel(),actionHandler:this.handleCopyLinkToClipboard,closeButtonHandler:this.onClose,sharedLink:this.sharedLink,focusOnInput:this.focusOnInput,inputRef:this.inputRef,anchorRef:this.props.anchorRef,shouldFocusOnLink:!0,onCopyToClipboard:this.handleClipboardSuccess,zIndexOverride:this.props.zIndexOverride,yOffsetDistance:this.props.yOffsetDistance,placement:this.props.placement,fileInfo:this.props.file,isInCopyLinkRightRailExpt:this.props.isInCopyLinkRightRailExpt})}}}t.CopyLinkMiniModalComponent=v,v.displayName="CopyLinkMiniModalComponent",t.CopyLinkMiniModal=(0,s.requireCssWithComponent)(v,["/static/metaserver/static/css/sharing/copy_link_mini_modal-vfltztsdu.css","/static/metaserver/static/css/dig-components/index.web-vflD7DS1H.css"])})),define("metaserver/static/js/sharing/views/copy_link_mini_modal/copy_link_mini_modal_header",["require","exports","tslib","react","typescript/component_libraries/spectrum-sharing/src/components/sharing_spinner/index","metaserver/static/js/core/i18n","dig-components/typography","dig-components/icons/src","dig-components/icons","dig-components/buttons","metaserver/static/js/components/ui/css","metaserver/static/js/sharing/views/copy_link_mini_modal/copy_link_mini_modal_util","dig-components/truncate"],(function(e,t,i,a,r,s,n,o,c,l,d,_,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyLinkMiniModalHeader=t.CopyLinkMiniModalHeaderComponent=void 0,a=i.__importStar(a);const m="copy-link-mini-modal__header";class u extends a.Component{constructor(){super(...arguments),this._getContentName=e=>{if(e){const t=e.split("/");return t[t.length-1]}}}render(){return a.createElement("div",{className:m},a.createElement("div",{className:`${m}-content`},this.props.stageType===_.ModalStage.PENDING&&this._renderPendingStage(),this.props.stageType===_.ModalStage.COPY&&this._renderCopyStage(),this.props.stageType===_.ModalStage.RESULT&&this._renderResultStage(),this.props.stageType===_.ModalStage.ERROR_CLIENT&&this._renderClientErrorStage(),this.props.stageType===_.ModalStage.ERROR_SERVER&&this._renderServerErrorStage()),this._renderCloseButton())}_renderPendingStage(){return a.createElement(a.Fragment,null,a.createElement(r.SharingSpinner,{ariaValue:"Loading xsmall",textSize:"standard"}),a.createElement(n.Text,{className:`${m}--pending-text`},s.intl.formatMessage({id:"LPF3tp",defaultMessage:"Getting the link..."})))}_renderCopyStage(){return a.createElement(n.Text,null,a.createElement(n.Link,{href:"#",hasNoUnderline:!0,onClick:this.props.actionHandler,isBold:!0},a.createElement(c.UIIcon,{src:o.LinkLine,"aria-label":""}),s.intl.formatMessage({id:"emiHs/",defaultMessage:"Copy Link"})))}_renderResultStage(){var e;const t=s.intl.formatMessage({id:"l+Mf7Y",defaultMessage:"Allows editing."}),i=s.intl.formatMessage({id:"FXqYpV",defaultMessage:"Allows viewing."});let r="";void 0!==this.props.linkAccessLevel&&(r="editor"===this.props.linkAccessLevel?t:i);const l=this._getContentName(null===(e=this.props.fileInfo)||void 0===e?void 0:e.fq_path),d=l?a.createElement(n.Text,{className:`${m}--content-name`,isBold:!0},a.createElement(p.Truncate,{location:.5},'"',l,'."')):void 0,_=this.props.isInCopyLinkRightRailExpt&&d?s.intl.formatMessage({id:"+I9vG3",defaultMessage:"Link copied to {contentNameInHeader}"},{contentNameInHeader:d}):s.intl.formatMessage({id:"v2yJMn",defaultMessage:"Link copied."});return a.createElement(a.Fragment,null,a.createElement(c.UIIcon,{className:`${m}--result-icon`,src:o.CheckmarkCircleLine,size:"standard","aria-label":""}),a.createElement("div",{className:`${m}--result-container`},a.createElement(n.Text,{className:`${m}--result-text`,isBold:!0},_,""),a.createElement(n.Text,null,r)))}_renderClientErrorStage(){return a.createElement(a.Fragment,null,a.createElement(c.UIIcon,{className:`${m}--client-error-icon`,src:o.FailLine,"aria-label":""}),a.createElement(n.Text,{className:`${m}--client-error-text`},a.createElement("b",null,s.intl.formatMessage({id:"rp1Lxc",defaultMessage:"Couldn't copy the link."}),""),a.createElement(n.Link,{href:"#",hasNoUnderline:!0,onClick:this.props.actionHandler,isBold:!0},s.intl.formatMessage({id:"wXhxJC",defaultMessage:"Try again"}))))}_renderServerErrorStage(){return a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement(c.UIIcon,{size:"standard",src:o.FailLine,"aria-label":""})),a.createElement(n.Text,{className:`${m}--server-error-text`},this.props.errorMessage))}_renderCloseButton(){return a.createElement(l.IconButton,{"aria-label":"close",onClick:this.props.closeButtonHandler,variant:"transparent",isRounded:!0,size:"small"},a.createElement(c.UIIcon,{src:o.CloseLine,"aria-label":""}))}}t.CopyLinkMiniModalHeaderComponent=u,u.displayName="CopyLinkMiniModalHeaderComponent",t.CopyLinkMiniModalHeader=(0,d.requireCssWithComponent)(u,["/static/metaserver/static/css/dig-components/index.web-vflD7DS1H.css","/static/metaserver/static/css/sharing/copy_link_mini_modal-vfltztsdu.css"])})),define("metaserver/static/js/sharing/views/copy_link_mini_modal/copy_link_mini_modal_link",["require","exports","tslib","react","metaserver/static/js/components/ui/css","dig-components/text_fields","metaserver/static/js/sharing/views/copy_link_mini_modal/copy_link_mini_modal_util"],(function(e,t,i,a,r,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyLinkMiniModalLink=t.CopyLinkMiniModalLinkComponent=void 0,a=i.__importStar(a);class o extends a.Component{constructor(){super(...arguments),this.handleCopy=()=>{this.props.onCopyToClipboard(n.CopyLinkMethod.MANUAL)}}componentDidMount(){this.props.shouldFocusOnLink&&this.props.focusOnInput()}componentDidUpdate(){this.props.shouldFocusOnLink&&this.props.focusOnInput()}render(){return a.createElement("div",{className:"copy-link-mini-modal__link"},a.createElement(s.TextInput,{onCopy:this.handleCopy,size:"standard","aria-label":"Link for copy link click",value:this.props.sharedLink.url,readOnly:!0,onClick:this.props.focusOnInput,ref:this.props.inputRef}))}}t.CopyLinkMiniModalLinkComponent=o,o.displayName="CopyLinkMiniModalLinkComponent",t.CopyLinkMiniModalLink=(0,r.requireCssWithComponent)(o,["/static/metaserver/static/css/dig-components/index.web-vflD7DS1H.css","/static/metaserver/static/css/sharing/copy_link_mini_modal-vfltztsdu.css"])})),define("metaserver/static/js/sharing/views/copy_link_mini_modal/copy_link_mini_modal_overlay",["require","exports","tslib","react","metaserver/static/js/components/ui/css","lodash","dig-components/overlay","dig-components/click_outside","dig-components/layer","metaserver/static/js/sharing/views/copy_link_mini_modal/copy_link_mini_modal_header","metaserver/static/js/sharing/views/copy_link_mini_modal/copy_link_mini_modal_link"],(function(e,t,i,a,r,s,n,o,c,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyLinkMiniModalOverlay=t.CopyLinkMiniModalOverlayComponent=void 0,a=i.__importDefault(a);class _ extends a.default.Component{constructor(){super(...arguments),this.onWindowResize=(0,s.throttle)(()=>{this.props.anchorRef.current||this.props.closeButtonHandler()},500),this.handleClick=e=>{e.preventDefault(),e.stopPropagation()}}componentDidMount(){window.addEventListener("resize",this.onWindowResize)}componentWillUnmount(){window.removeEventListener("resize",this.onWindowResize)}render(){var e;const{anchorRef:t,inputRef:i,stage:r,closeButtonHandler:s,linkAccessLevel:_,sharedLink:p,shouldFocusOnLink:m,focusOnInput:u,actionHandler:E,errorMessage:S,onCopyToClipboard:h,zIndexOverride:T,placement:g,fileInfo:R,isInCopyLinkRightRailExpt:f}=this.props,C=a.default.createElement(l.CopyLinkMiniModalHeader,{stageType:r,actionHandler:E,closeButtonHandler:s,sharedLink:p,linkAccessLevel:_,errorMessage:S,fileInfo:R,isInCopyLinkRightRailExpt:!!f});let v=a.default.createElement(a.default.Fragment,null);return p&&u&&i&&(v=a.default.createElement(d.CopyLinkMiniModalLink,{sharedLink:p,focusOnInput:u,inputRef:i,shouldFocusOnLink:m,onCopyToClipboard:h})),a.default.createElement(c.LayerContext.Provider,{value:{zIndex:T||20}},a.default.createElement(o.ClickOutside,{isActive:!0,onClickOutside:s,shouldPropagateMouseEvents:!1,isBlock:!0,shouldClickOutsideWhenDefaultPrevented:!0},a.default.createElement(n.Overlay,{className:"copy-link-mini-modal__overlay",anchorRef:t,placement:g||"bottom",auto:!0,offsetDistance:null!==(e=this.props.yOffsetDistance)&&void 0!==e?e:4,onClick:this.handleClick},C,v)))}}t.CopyLinkMiniModalOverlayComponent=_,_.displayName="CopyLinkMiniModalOverlayComponent",t.CopyLinkMiniModalOverlay=(0,r.requireCssWithComponent)(_,["/static/metaserver/static/css/sharing/copy_link_mini_modal-vfltztsdu.css","/static/metaserver/static/css/dig-components/index.web-vflD7DS1H.css"])})),define("metaserver/static/js/sharing/views/copy_link_mini_modal/copy_link_mini_modal_util",["require","exports","metaserver/static/js/sharing/api/client","metaserver/static/js/core/i18n"],(function(e,t,i,a){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.getServerErrorMessage=t.isBrowserCopyEnabled=t.getFolderApiClient=t.getApiClient=t.CopyLinkMethod=t.ModalState=t.CopyLinkException=t.ModalStage=void 0,(function(e){e.PENDING="pending",e.COPY="copy",e.RESULT="result",e.ERROR_CLIENT="error_client",e.ERROR_SERVER="error_server"})(t.ModalStage||(t.ModalStage={})),(function(e){e.SHARED_LINK_ALREADY_EXISTS="shared_link_already_exists",e.ACCESS_DENIED="access_denied",e.PATH="path",e.NOT_FOUND="not_found",e.EMAIL_NOT_VERIFIED="email_not_verified",e.SETTINGS_ERROR="settings_error",e.NOT_AUTHORIZED="not_authorized",e.UNDEFINED_ERROR="undefined_error",e.FAILED_COPY_TO_CLIPBOARD="failed_copy_to_clipboard"})(r=t.CopyLinkException||(t.CopyLinkException={})),(function(e){e.PENDING="pending",e.COPY="copy",e.RESULT="result",e.ERROR="error"})(t.ModalState||(t.ModalState={})),(function(e){e.EXEC_COMMAND="exec_command",e.CLIPBOARD_API="clipboard_api",e.MANUAL="manual"})(t.CopyLinkMethod||(t.CopyLinkMethod={}));t.getApiClient=e=>new i.FileShareApiClient({userId:e.id});t.getFolderApiClient=e=>new i.FolderShareApiClient({userId:e});t.isBrowserCopyEnabled=()=>{const e=document.createElement("input");return e.value="sharing is caring",document.body.appendChild(e),e.select(),document.queryCommandEnabled("copy")};t.getServerErrorMessage=e=>{switch(e){case r.ACCESS_DENIED:case r.NOT_AUTHORIZED:return a.intl.formatMessage({id:"2wQgFw",defaultMessage:"Couldn't copy the link. You don't have permission to create a link to this content."});case r.NOT_FOUND:return a.intl.formatMessage({id:"+HMjSg",defaultMessage:"We can't find this file anymore. Try checking activity or folder history to see what happened."});case r.EMAIL_NOT_VERIFIED:return a.intl.formatMessage({id:"cHWnMe",defaultMessage:"You can't share until you verify your email address."});default:return a.intl.formatMessage({id:"pAS2H5",defaultMessage:"Couldn't copy, but it might be a fluke. Try reloading the page or ask us for help."})}}})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_spinner/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/sharing_spinner/sharing_spinner"],(function(e,t,i,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_spinner/sharing_spinner",["require","exports","tslib","react","classnames","dig-components/typography","dig-components/progress_indicators"],(function(e,t,i,a,r,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSpinner=void 0,a=i.__importStar(a),r=i.__importDefault(r);class o extends a.Component{render(){const{ariaValue:e,iconSize:t,textSize:i,message:o,className:c}=this.props,l=(0,r.default)("scl-sharing-spinner__text",c);return a.createElement(s.Text,{size:i,isBold:!0},a.createElement(n.Spinner,{"aria-valuetext":e,size:t,className:"scl-sharing-spinner__icon"}),o&&a.createElement("span",{className:l},o))}}t.SharingSpinner=o,o.displayName="SharingSpinner",o.defaultProps={iconSize:"xsmall"}})),define("metaserver/static/js/home/util/file_utils",["require","exports","metaserver/static/js/browse/models"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFileFromPartial=void 0;const a={bytes:1024,direct_blockserver_link:"",event_type:0,ext:"",file_id:"",fq_path:"",has_automated_rule:!1,href:"",icon:"",is_cloud_doc:!1,is_dir:!1,is_in_team_folder_tree:!1,is_in_vault_folder:!1,is_symlink:!1,is_locked:!1,is_unmounted:!1,is_versionable:!0,_mount_access_perms:[],ns_id:0,ns_path:"",revision_id:"",sjid:0,sort_key:[""],target_ns:null,type:1};t.getFileFromPartial=function(e){return e&&Object.keys(e).forEach(t=>{void 0===e[t]&&delete e[t]}),new i.File(e?Object.assign(Object.assign({},a),e):a)}})),define("metaserver/static/js/app_actions/app_actions_menu",["require","exports","tslib","metaserver/static/js/async/loadable","metaserver/static/js/clean/web_timing_logger"],(function(e,t,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnconnectedExtensionsMenu=t.ExtensionsMenu=void 0,t.ExtensionsMenu=(0,a.Loadable)({loader:()=>i.__awaiter(void 0,void 0,void 0,(function*(){yield(0,r.waitForTTI)();const{ExtensionsMenu:t}=yield new Promise((t,i)=>{e(["metaserver/static/js/extensions/extensions_menu_component_wrapper"],t,i)}).then(i.__importStar);return t}))}),t.UnconnectedExtensionsMenu=(0,a.Loadable)({loader:()=>new Promise((t,i)=>{e(["metaserver/static/js/app_actions/unconnected_menu_wrapper"],t,i)}).then(i.__importStar).then(({UnconnectedMenu:e})=>e)})})),define("metaserver/static/js/home/util/show_hide_link",["require","exports","tslib","react","dig-components/buttons","dig-components/icons","dig-components/icons/src","metaserver/static/js/core/i18n"],(function(e,t,i,a,r,s,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShowHideLink=void 0,a=i.__importDefault(a);t.ShowHideLink=({onClick:e,isExpanded:t,hiddenItemCount:i,canLoadMore:c})=>{let l=o.intl.formatMessage({id:"s+pc7h",defaultMessage:"Show {number} more"},{number:i});return t?l=o.intl.formatMessage({id:"EFRGA8",defaultMessage:"Collapse section"}):i<=0?l=o.intl.formatMessage({id:"JZEdSO",defaultMessage:"Show more"}):c&&(l=o.intl.formatMessage({id:"w9jP5U",defaultMessage:"Show {number}+ more"},{number:i})),a.default.createElement("div",{className:"show-hide-link__container"},a.default.createElement(r.Button,{onClick:e,variant:"transparent",hasNoUnderline:!0,"data-testid":"show-hide-link__container",withIconLeft:a.default.createElement(s.UIIcon,{src:t?n.ChevronUpLine:n.ChevronDownLine})},l))},t.ShowHideLink.displayName="ShowHideLink"}));
//# sourceMappingURL=pkg-browse-tts.min.js-vflGn5QS9.map