define("metaserver/static/js/auth/u2f",["require","exports","tslib","u2f-api","metaserver/static/js/core/browser_detection"],(function(e,t,r,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sign=t.register=t.canUseAuthenticator=t.canRegisterAuthenticator=t.isSupportedOnBrowser=t.LATEST_PROTOCOL=t.PROTOCOLS=t.FidoU2f=void 0,n=r.__importDefault(n),o=r.__importStar(o),(function(e){let t,r;(function(e){e.bt="bt",e.ble="ble",e.nfc="nfc",e.usb="usb"})(t||(t={})),(function(e){e[e.OK=0]="OK",e[e.OTHER_ERROR=1]="OTHER_ERROR",e[e.BAD_REQUEST=2]="BAD_REQUEST",e[e.CONFIGURATION_UNSUPPORTED=3]="CONFIGURATION_UNSUPPORTED",e[e.DEVICE_INELIGIBLE=4]="DEVICE_INELIGIBLE",e[e.TIMEOUT=5]="TIMEOUT"})(r=e.ErrorCode||(e.ErrorCode={}))})(t.FidoU2f||(t.FidoU2f={})),t.PROTOCOLS={"u2f_js1.1":""},t.LATEST_PROTOCOL="u2f_js1.1";const i=window.u2f;function s(){return!0===o.chrome&&parseInt(o.version,10)>=38&&!o.is_mobile_or_tablet()||Boolean(i)}t.isSupportedOnBrowser=s,t.canRegisterAuthenticator=function(e){return!!e&&s()},t.canUseAuthenticator=function(e){return!!e&&s()},t.register=function(e){return new Promise((t,r)=>{(i||n.default).register(e.appId,e.registerRequests,e.registeredKeys,t,e.opt_timeoutSeconds)})},t.sign=function(e){return new Promise((t,r)=>{(i||n.default).sign(e.appId,e.challenge,e.registeredKeys,t,e.opt_timeoutSeconds)})}})),define("metaserver/static/js/auth/authenticator",["require","exports","tslib","metaserver/static/js/auth/u2f","metaserver/static/js/auth/webauthn"],(function(e,t,r,n,o){"use strict";function i(e){return o.canRegisterAuthenticator(e[o.LATEST_PROTOCOL])?o.LATEST_PROTOCOL:n.canRegisterAuthenticator(e[n.LATEST_PROTOCOL])?n.LATEST_PROTOCOL:null}function s(e){return o.canUseAuthenticator(e[o.LATEST_PROTOCOL])?o.LATEST_PROTOCOL:n.canUseAuthenticator(e[n.LATEST_PROTOCOL])?n.LATEST_PROTOCOL:null}Object.defineProperty(t,"__esModule",{value:!0}),t.sign=t.register=t.canUseAuthenticator=t.canRegisterAuthenticator=t.isWebAuthnEnabled=t.PROTOCOLS=void 0,n=r.__importStar(n),o=r.__importStar(o),t.PROTOCOLS=Object.assign(Object.assign({},n.PROTOCOLS),o.PROTOCOLS),t.isWebAuthnEnabled=function(e){return!!e&&!!e[o.LATEST_PROTOCOL]},t.canRegisterAuthenticator=function(e){return void 0===e?n.isSupportedOnBrowser():null!==i(e)},t.canUseAuthenticator=function(e){return null!==s(e)};const a={error:"Authenticator devices are not supported on this browser"},u={error:"Authenticator protocol not supported"};function c(e,t){let r;return r="register"===e?i(t):s(t),null!==r?Promise.resolve(r):n.isSupportedOnBrowser()||o.isSupportedOnBrowser()?Promise.reject(u):Promise.reject(a)}t.register=function(e){return c("register",e).then((function(t){return t in o.PROTOCOLS?o.register(e[t]).then(r=>({protocol:t,challenge_id:e.challenge_id,response:r})):t in n.PROTOCOLS?n.register(e[t]).then(r=>({protocol:t,challenge_id:e.challenge_id,response:r})):Promise.reject(u)}))},t.sign=function(e){return c("sign",e).then((function(t){return t in o.PROTOCOLS?o.sign(e[t]).then(r=>({protocol:t,challenge_id:e.challenge_id,response:r})):t in n.PROTOCOLS?n.sign(e[t]).then(r=>({protocol:t,challenge_id:e.challenge_id,response:r})):Promise.reject(u)}))}})),define("metaserver/static/js/auth/webauthn",["require","exports","tslib","metaserver/static/js/core/browser_detection","metaserver/static/js/security/util"],(function(e,t,r,n,o){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.sign=t.register=t.canUseAuthenticator=t.canRegisterAuthenticator=t.isSupportedOnBrowser=t.LATEST_PROTOCOL=t.PROTOCOLS=void 0,n=r.__importStar(n),t.PROTOCOLS={webauthn_wd07:""},t.LATEST_PROTOCOL="webauthn_wd07",(function(e){e[e.OtherError=1]="OtherError",e[e.SecurityError=2]="SecurityError",e[e.NotAllowedError=3]="NotAllowedError",e[e.InvalidStateError=4]="InvalidStateError",e[e.Canceled=5]="Canceled",e[e.Timeout=6]="Timeout",e[e.NotSupportedError=7]="NotSupportedError"})(i||(i={}));const s={SecurityError:i.SecurityError,NotAllowedError:i.NotAllowedError,InvalidStateError:i.InvalidStateError,AbortError:i.Canceled,TimeoutError:i.Timeout,NotSupportedError:i.NotSupportedError};var a;function u(){return window.PublicKeyCredential&&(!0===n.mozilla&&parseInt(n.version,10)>=60||!0===n.chrome&&parseInt(n.version,10)>=66||!0===n.edge&&parseFloat(n.version)>=17.17682||!0===n.safari&&parseFloat(n.version)>=12.2)}function c(e){return!(!e||!u())&&((!0!==n.edge||!0!==e.disable_on_edge)&&(!0!==n.safari||!0!==e.disable_on_safari))}function p(e){if(e instanceof DOMException){const t=s[e.name];if(void 0!==t)return{errorCode:t,errorData:e.toString&&e.toString()}}return{errorCode:i.OtherError,errorData:e.toString&&e.toString()}}(function(e){e[e.COSE=0]="COSE",e[e.DER=1]="DER"})(a||(a={})),t.isSupportedOnBrowser=u,t.canRegisterAuthenticator=function(e){return c(e)},t.canUseAuthenticator=function(e){return c(e)&&(function(e){if(!0===n.edge&&parseFloat(n.version)>=17.17682&&parseFloat(n.version)<17.17713||!0===n.chrome&&69===parseInt(n.version,10)||!0===n.safari&&parseFloat(n.version)<13.1){if(e.allowCredentials)for(const t of e.allowCredentials)if(t.key_format===a.COSE)return!0;return!1}return!0})(e)},t.register=function(e){const t={challenge:(0,o.b64urldecode)(e.challenge),timeout:e.timeout,rp:{id:e.rp.id,name:e.rp.name,icon:e.rp.icon},user:{id:(0,o.b64urldecode)(e.user.id),name:e.user.name,displayName:e.user.displayName,icon:e.user.icon},authenticatorSelection:e.authenticatorSelection};return void 0!==e.excludeCredentials&&(t.excludeCredentials=e.excludeCredentials.map(e=>({type:e.type,id:(0,o.b64urldecode)(e.id),transports:e.transports}))),void 0!==e.pubKeyCredParams&&(t.pubKeyCredParams=e.pubKeyCredParams.map(e=>({type:e.type,alg:e.alg}))),void 0===e.attestation&&(t.attestation="direct"),navigator.credentials.create({publicKey:t}).then(e=>({response:{clientDataJSON:(0,o.b64urlencode)(e.response.clientDataJSON),attestationObject:(0,o.b64urlencode)(e.response.attestationObject)}})).catch(e=>p(e))},t.sign=function(e){const t={challenge:(0,o.b64urldecode)(e.challenge),timeout:e.timeout,rpId:e.rpId,userVerification:e.userVerification,extensions:e.extensions};return void 0!==e.allowCredentials&&(t.allowCredentials=e.allowCredentials.map(e=>{let t=void 0;return e.transports&&e.transports.length>0&&(t=e.transports),{type:e.type,id:(0,o.b64urldecode)(e.id),transports:t}})),navigator.credentials.get({publicKey:t}).then(e=>({id:e.id,response:{clientDataJSON:(0,o.b64urlencode)(e.response.clientDataJSON),authenticatorData:(0,o.b64urlencode)(e.response.authenticatorData),signature:(0,o.b64urlencode)(e.response.signature),userHandle:e.response.userHandle&&(0,o.b64urlencode)(e.response.userHandle)}})).catch(e=>p(e))}})),define("metaserver/static/js/fedramp/fedramp_util",["require","exports","metaserver/static/js/core/uri"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFedrampRedirectUrlIfApplicable=void 0,t.getFedrampRedirectUrlIfApplicable=function(e,t){return e?String(new r.URI({path:"/fedramp_message"}).updateQuery({cont:t})):t}})),define("metaserver/static/prod_assets_web_modules/u2f-api",["./common/_commonjsHelpers"],(function(e){"use strict";var t,r={},n={},o=o||{},i=o;return o.EXTENSION_ID="kmendfapggjehodndflmmgagdbamhnfd",o.MessageTypes={U2F_REGISTER_REQUEST:"u2f_register_request",U2F_REGISTER_RESPONSE:"u2f_register_response",U2F_SIGN_REQUEST:"u2f_sign_request",U2F_SIGN_RESPONSE:"u2f_sign_response",U2F_GET_API_VERSION_REQUEST:"u2f_get_api_version_request",U2F_GET_API_VERSION_RESPONSE:"u2f_get_api_version_response"},o.ErrorCodes={OK:0,OTHER_ERROR:1,BAD_REQUEST:2,CONFIGURATION_UNSUPPORTED:3,DEVICE_INELIGIBLE:4,TIMEOUT:5},o.U2fRequest,o.U2fResponse,o.Error,o.Transport,o.Transports,o.SignRequest,o.SignResponse,o.RegisterRequest,o.RegisterResponse,o.RegisteredKey,o.GetJsApiVersionResponse,o.getMessagePort=function(e){if("undefined"!=typeof chrome&&chrome.runtime){var t={type:o.MessageTypes.U2F_SIGN_REQUEST,signRequests:[]};chrome.runtime.sendMessage(o.EXTENSION_ID,t,(function(){chrome.runtime.lastError?o.getIframePort_(e):o.getChromeRuntimePort_(e)}))}else o.isAndroidChrome_()?o.getAuthenticatorPort_(e):o.isIosChrome_()?o.getIosPort_(e):o.getIframePort_(e)},o.isAndroidChrome_=function(){var e=navigator.userAgent;return-1!=e.indexOf("Chrome")&&-1!=e.indexOf("Android")},o.isIosChrome_=function(){return["iPhone","iPad","iPod"].indexOf(navigator.platform)>-1},o.getChromeRuntimePort_=function(e){var t=chrome.runtime.connect(o.EXTENSION_ID,{includeTlsChannelId:!0});setTimeout((function(){e(new o.WrappedChromeRuntimePort_(t))}),0)},o.getAuthenticatorPort_=function(e){setTimeout((function(){e(new o.WrappedAuthenticatorPort_)}),0)},o.getIosPort_=function(e){setTimeout((function(){e(new o.WrappedIosPort_)}),0)},o.WrappedChromeRuntimePort_=function(e){this.port_=e},o.formatSignRequest_=function(e,r,n,i,s){if(void 0===t||t<1.1){for(var a=[],u=0;u<n.length;u++)a[u]={version:n[u].version,challenge:r,keyHandle:n[u].keyHandle,appId:e};return{type:o.MessageTypes.U2F_SIGN_REQUEST,signRequests:a,timeoutSeconds:i,requestId:s}}return{type:o.MessageTypes.U2F_SIGN_REQUEST,appId:e,challenge:r,registeredKeys:n,timeoutSeconds:i,requestId:s}},o.formatRegisterRequest_=function(e,r,n,i,s){if(void 0===t||t<1.1){for(var a=0;a<n.length;a++)n[a].appId=e;var u=[];for(a=0;a<r.length;a++)u[a]={version:r[a].version,challenge:n[0],keyHandle:r[a].keyHandle,appId:e};return{type:o.MessageTypes.U2F_REGISTER_REQUEST,signRequests:u,registerRequests:n,timeoutSeconds:i,requestId:s}}return{type:o.MessageTypes.U2F_REGISTER_REQUEST,appId:e,registerRequests:n,registeredKeys:r,timeoutSeconds:i,requestId:s}},o.WrappedChromeRuntimePort_.prototype.postMessage=function(e){this.port_.postMessage(e)},o.WrappedChromeRuntimePort_.prototype.addEventListener=function(e,t){var r=e.toLowerCase();"message"==r||"onmessage"==r?this.port_.onMessage.addListener((function(e){t({data:e})})):console.error("WrappedChromeRuntimePort only supports onMessage")},o.WrappedAuthenticatorPort_=function(){this.requestId_=-1,this.requestObject_=null},o.WrappedAuthenticatorPort_.prototype.postMessage=function(e){var t=o.WrappedAuthenticatorPort_.INTENT_URL_BASE_+";S.request="+encodeURIComponent(JSON.stringify(e))+";end";document.location=t},o.WrappedAuthenticatorPort_.prototype.getPortType=function(){return"WrappedAuthenticatorPort_"},o.WrappedAuthenticatorPort_.prototype.addEventListener=function(e,t){"message"==e.toLowerCase()?window.addEventListener("message",this.onRequestUpdate_.bind(this,t),!1):console.error("WrappedAuthenticatorPort only supports message")},o.WrappedAuthenticatorPort_.prototype.onRequestUpdate_=function(e,t){var r=JSON.parse(t.data);r.intentURL,r.errorCode;var n=null;r.hasOwnProperty("data")&&(n=JSON.parse(r.data)),e({data:n})},o.WrappedAuthenticatorPort_.INTENT_URL_BASE_="intent:#Intent;action=com.google.android.apps.authenticator.AUTHENTICATE",o.WrappedIosPort_=function(){},o.WrappedIosPort_.prototype.postMessage=function(e){var t=JSON.stringify(e),r="u2f://auth?"+encodeURI(t);location.replace(r)},o.WrappedIosPort_.prototype.getPortType=function(){return"WrappedIosPort_"},o.WrappedIosPort_.prototype.addEventListener=function(e,t){"message"!==e.toLowerCase()&&console.error("WrappedIosPort only supports message")},o.getIframePort_=function(e){var t="chrome-extension://"+o.EXTENSION_ID,r=document.createElement("iframe");r.src=t+"/u2f-comms.html",r.setAttribute("style","display:none"),document.body.appendChild(r);var n=new MessageChannel,i=function(t){"ready"==t.data?(n.port1.removeEventListener("message",i),e(n.port1)):console.error('First event on iframe port was not "ready"')};n.port1.addEventListener("message",i),n.port1.start(),r.addEventListener("load",(function(){r.contentWindow.postMessage("init",t,[n.port2])}))},o.EXTENSION_TIMEOUT_SEC=30,o.port_=null,o.waitingForPort_=[],o.reqCounter_=0,o.callbackMap_={},o.getPortSingleton_=function(e){o.port_?e(o.port_):(0==o.waitingForPort_.length&&o.getMessagePort((function(e){for(o.port_=e,o.port_.addEventListener("message",o.responseHandler_);o.waitingForPort_.length;)o.waitingForPort_.shift()(o.port_)})),o.waitingForPort_.push(e))},o.responseHandler_=function(e){var t=e.data,r=t.requestId;if(r&&o.callbackMap_[r]){var n=o.callbackMap_[r];delete o.callbackMap_[r],n(t.responseData)}else console.error("Unknown or missing requestId in response.")},o.isSupported=function(e){var r=!1;function n(t){r||(r=!0,e(t))}o.getApiVersion((function(e){t=void 0===e.js_api_version?0:e.js_api_version,n(!0)})),setTimeout(n.bind(null,!1),500)},o.sign=function(e,r,n,i,s){void 0===t?o.getApiVersion((function(a){t=void 0===a.js_api_version?0:a.js_api_version,console.log("Extension JS API Version: ",t),o.sendSignRequest(e,r,n,i,s)})):o.sendSignRequest(e,r,n,i,s)},o.sendSignRequest=function(e,t,r,n,i){o.getPortSingleton_((function(s){var a=++o.reqCounter_;o.callbackMap_[a]=n;var u=void 0!==i?i:o.EXTENSION_TIMEOUT_SEC,c=o.formatSignRequest_(e,t,r,u,a);s.postMessage(c)}))},o.register=function(e,r,n,i,s){void 0===t?o.getApiVersion((function(a){t=void 0===a.js_api_version?0:a.js_api_version,console.log("Extension JS API Version: ",t),o.sendRegisterRequest(e,r,n,i,s)})):o.sendRegisterRequest(e,r,n,i,s)},o.sendRegisterRequest=function(e,t,r,n,i){o.getPortSingleton_((function(s){var a=++o.reqCounter_;o.callbackMap_[a]=n;var u=void 0!==i?i:o.EXTENSION_TIMEOUT_SEC,c=o.formatRegisterRequest_(e,r,t,u,a);s.postMessage(c)}))},o.getApiVersion=function(e,t){o.getPortSingleton_((function(r){if(r.getPortType){var n;switch(r.getPortType()){case"WrappedIosPort_":case"WrappedAuthenticatorPort_":n=1.1;break;default:n=0}e({js_api_version:n})}else{var i=++o.reqCounter_;o.callbackMap_[i]=e;var s={type:o.MessageTypes.U2F_GET_API_VERSION_REQUEST,timeoutSeconds:void 0!==t?t:o.EXTENSION_TIMEOUT_SEC,requestId:i};r.postMessage(s)}}))},(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=i,r="undefined"!=typeof navigator&&!!navigator.userAgent,n=r&&navigator.userAgent.match(/Safari\//)&&!navigator.userAgent.match(/Chrome\//),o=r&&navigator.userAgent.match(/Edge\/1[2345]/),s=null;function a(){return s||(s=new Promise((function(e,i){function s(){e({u2f:null})}return r?n?s():void 0!==window.u2f&&"function"==typeof window.u2f.sign?e({u2f:window.u2f}):o||"http:"===location.protocol||"undefined"==typeof MessageChannel?s():void t.isSupported((function(r){r?e({u2f:t}):s()})):s()}))),s}function u(t,r){var n=null!=r?r.errorCode:1,o=e.ErrorNames[""+n],i=new Error(t);return i.metaData={type:o,code:n},i}function c(e){if(!e.u2f){if("http:"===location.protocol)throw new Error("U2F isn't supported over http, only https");throw new Error("U2F not supported")}}e.ErrorCodes={OK:0,OTHER_ERROR:1,BAD_REQUEST:2,CONFIGURATION_UNSUPPORTED:3,DEVICE_INELIGIBLE:4,TIMEOUT:5},e.ErrorNames={0:"OK",1:"OTHER_ERROR",2:"BAD_REQUEST",3:"CONFIGURATION_UNSUPPORTED",4:"DEVICE_INELIGIBLE",5:"TIMEOUT"},e.isSupported=function(){return a().then((function(e){return!!e.u2f}))},e.ensureSupport=function(){return a().then(c)},e.register=function(e,t,r){return Array.isArray(e)||(e=[e]),"number"==typeof t&&void 0===r&&(r=t,t=null),t||(t=[]),a().then((function(n){c(n);var o=n.u2f;return new Promise((function(n,i){var s=e[0].appId;o.register(s,e,t,(function(e){e.errorCode?i(u("Registration failed",e)):(delete e.errorCode,n(e))}),r)}))}))},e.sign=function(e,t){return Array.isArray(e)||(e=[e]),a().then((function(r){c(r);var n=r.u2f;return new Promise((function(r,o){var i=e[0].appId,s=e[0].challenge;n.sign(i,s,e,(function(e){e.errorCode?o(u("Sign failed",e)):(delete e.errorCode,r(e))}),t)}))}))}})(n),(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=n;!(function(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])})(n),e.default=t})(r),e.getDefaultExportFromCjs(r)}));
//# sourceMappingURL=pkg-login-pages-externals.min.js-vflBK5cVj.map