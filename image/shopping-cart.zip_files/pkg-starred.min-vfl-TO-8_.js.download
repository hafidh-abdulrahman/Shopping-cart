define("metaserver/static/js/clean/ui/path_filter_button",["require","exports","tslib","react","spectrum/dropdown_button/index","metaserver/static/js/clean/ui/title_bubble","metaserver/static/js/clean/em_string","js/filepath/filepath","dig-components/tooltips","metaserver/static/js/clean/ui/sticky_position","dig-components/buttons","dig-components/chips"],(function(e,t,a,s,n,r,i,o,c,d,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathFilterButton=void 0,s=a.__importDefault(s),o=a.__importStar(o);t.PathFilterButton=({path:e,defaultText:t,dropdownClasses:a,disabled:p,onClick:m,useDigComponents:y,id:_,label:f,useButtonComponent:v})=>{const g=e&&!o.paths_are_equal(e,"/")?i.Emstring.em_snippet(o.filename(e),10,.6):null;if(y){const n=v?s.default.createElement(l.Button,{variant:"outline",className:a,disabled:p,onClick:m,id:_,"aria-labelledby":`${f} ${_}`,withDropdownIcon:!0},g||t):s.default.createElement(u.FilterChip,{className:a,disabled:p,onClick:m,id:_,"aria-labelledby":`${f} ${_}`,isSelected:!!g},g||t);return e&&g?s.default.createElement(c.Tooltip,{title:e,placement:"bottom"},n):n}const h=s.default.createElement(n.DropdownButton,{className:a,disabled:p,onClick:m,id:_,"aria-labelledby":`${f} ${_}`},g||t);return g?s.default.createElement(r.TitleBubble,{content:e,position:d.StickyPosition.BOTTOM},h):h}})),define("metaserver/static/js/home/recents/recent_activity_starred",["require","exports","tslib","lodash","metaserver/static/js/starred/id_type_pair"],(function(e,t,a,s,n){"use strict";function r(e){return e.resource_id&&e.id_type?{id:e.resource_id,type:e.id_type}:null}Object.defineProperty(t,"__esModule",{value:!0}),t.getIdTypePairFromRecentItem=t.getIdTypePairsByRecentActivityItems=t.getIdTypePair=void 0,s=a.__importStar(s),t.getIdTypePair=r,t.getIdTypePairsByRecentActivityItems=function(e){const t={};return e.forEach(e=>{const a=r(e);a&&(t[(0,n.idTypePairToString)(a)]=a)}),s.values(t)},t.getIdTypePairFromRecentItem=function(e){return e.resourceId&&e.idType?{id:e.resourceId,type:e.idType}:null}})),define("metaserver/static/js/starred/model",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.statusResultsToStarredStatuses=void 0,t.statusResultsToStarredStatuses=function(e){return e.map(e=>{const{id:t,type:a,is_starred:s,canonical_id:n,canonical_id_type:r}=e,i={idTypePair:{id:t,type:a},starred:s};return n&&r&&(i.canonicalIdTypePair={id:n,type:r}),i})}})),define("metaserver/static/js/starred/actions",["require","exports","tslib","metaserver/static/js/flux/dispatcher","metaserver/static/js/starred/api","metaserver/static/js/starred/constants","metaserver/static/js/starred/model","metaserver/static/js/starred/utils"],(function(e,t,a,s,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StarredActions=void 0,n=a.__importStar(n);class c{static setStarredStatus(e,t){s.Dispatcher.dispatch({type:r.StarredActionTypes.SET_STATUS,starredStatuses:[{idTypePair:e,starred:t}]})}static fetchStatuses(e,t,a=!1){return a||c.markAsLoading(t),n.fetchStatuses(e,t).then(e=>{s.Dispatcher.dispatch({type:r.StarredActionTypes.SET_STATUS,starredStatuses:(0,i.statusResultsToStarredStatuses)(e)})}).catch(e=>(s.Dispatcher.dispatch({type:r.StarredActionTypes.LOAD_FAILURE,idTypePairs:t}),Promise.reject(e)))}static markAsLoading(e){s.Dispatcher.dispatch({type:r.StarredActionTypes.LOADING,idTypePairs:e})}static update(e,t,a,i){const o={id:t,type:a};let c;s.Dispatcher.dispatch({type:r.StarredActionTypes.LOADING,idTypePairs:[o]});const d=n.update(e,t,a,i);return d.then(()=>c=i).catch(e=>{throw c=!i,e}).finally(()=>{s.Dispatcher.dispatch({type:r.StarredActionTypes.SET_STATUS,starredStatuses:[{idTypePair:{id:t,type:a},starred:c}]})}),d}static updateWithSnackbar(e,t,a,s,n){return c.update(e,t,a,s).then(()=>{(0,o.displayStarSnackbar)({itemName:n,isStarred:s,success:!0})}).catch(e=>{(0,o.displayStarSnackbar)({itemName:n,isStarred:s,success:!1})})}}t.StarredActions=c})),define("typescript/component_libraries/deep-integrations/src/data/actions",["require","exports","tslib","typescript/component_libraries/deep-integrations/src/api_v2/shared_link","typescript/component_libraries/deep-integrations/src/async","typescript/component_libraries/deep-integrations/src/data/types","lodash"],(function(e,t,a,s,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearMakeZoomMeetingMessage=t.makeZoomMeeting=t.loadUpcomingCalendarEvents=t.loadCalendarEvents=t.getRangeKey=t.loadCalendarEventsInCommon=t.clearLoadEventsError=t.clearLoadEventsInCommonError=t.clearLastSentMessage=t.clearCanSendMessage=t.canSendMessage=t.sendChatMessage=t.saveInputFocus=t.saveChatMessage=void 0,i=a.__importDefault(i);function o(e){return t=>{t({type:r.Actions.clearLastSentMessage,meta:{userKey:e.account_id}})}}function c(e,t){return e.toString()+"-"+t.toString()}function d(e,t){return(s,n,i)=>a.__awaiter(this,void 0,void 0,(function*(){s({type:r.Actions.clearMakeZoomMeetingMessage,meta:{userKey:t,ical_uid:e.ical_uid}})}))}t.saveChatMessage=function(e,t){return a=>{a({type:r.Actions.saveChatMessage,meta:{userKey:e.account_id},payload:{chatMessage:t}})}},t.saveInputFocus=function(e,t){return a=>{a({type:r.Actions.saveInputFocus,meta:{userKey:e.account_id},payload:{hasInputFocus:t}})}},t.sendChatMessage=function(e,t,i){return(c,d,l)=>a.__awaiter(this,void 0,void 0,(function*(){const{apiV2Client:a,reportError:d}=l();c({type:r.Actions.sendChatMessage,meta:{userKey:e.account_id},payload:{state:"pending"}});const u=[i.text],p=(i.attachments||[]).map(e=>"file_share_link"===e.type?(0,s.getSharedLinkMetadata)(e.fileId,a).then(e=>e.url):Promise.resolve(null));try{yield Promise.all(p).then(e=>e.filter(e=>null!==e).forEach(e=>u.push(e)))}catch(t){return c({type:r.Actions.sendChatMessage,meta:{userKey:e.account_id},payload:{state:"rejected",error:t}}),void d(t,"non-critical",["ProfileCard"],{action:"getSharedLinkMetadata"})}const m={target:e.account_id,message:u.join("\n")};switch(t[".tag"]){case"slack_dropbox":{const t=yield(0,n.toAsync)(a.ns("slack").rpc("send_direct_message",m,{}));"rejected"===t.state&&d(t.error,"non-critical",["ProfileCard"],{action:"sendChatMessage_slack"}),"fulfilled"===t.state?(c({type:r.Actions.sendChatMessage,meta:{userKey:e.account_id},payload:{state:"fulfilled",value:{message_link:t.value.deep_link}}}),c({type:r.Actions.saveChatMessage,meta:{userKey:e.account_id},payload:{chatMessage:""}}),setTimeout(()=>c(o(e)),3e3)):c({type:r.Actions.sendChatMessage,meta:{userKey:e.account_id},payload:t});break}case"zoom":{const t=yield(0,n.toAsync)(a.ns("zoom").rpc("send_direct_message",m,{}));"rejected"===t.state&&d(t.error,"non-critical",["ProfileCard"],{action:"sendChatMessage_zoom"}),"fulfilled"===t.state?(c({type:r.Actions.sendChatMessage,meta:{userKey:e.account_id},payload:{state:"fulfilled",value:{message_link:t.value.conversation_link}}}),c({type:r.Actions.saveChatMessage,meta:{userKey:e.account_id},payload:{chatMessage:""}}),setTimeout(()=>c(o(e)),3e3)):c({type:r.Actions.sendChatMessage,meta:{userKey:e.account_id},payload:t});break}}}))},t.canSendMessage=function(e,t){return(s,i,o)=>a.__awaiter(this,void 0,void 0,(function*(){const{apiV2Client:a}=o(),i={target:e.account_id};s({type:r.Actions.canSendMessage,meta:{userKey:e.account_id,serviceType:t},payload:{state:"pending"}});const{reportError:c}=o();let d;switch(t[".tag"]){case"slack_dropbox":d=yield(0,n.toAsync)(a.ns("slack").rpc("can_send_message",i,{}));break;case"zoom":d=yield(0,n.toAsync)(a.ns("zoom").rpc("can_send_message",i,{}));break;default:d={state:"rejected",error:new Error("unknown/unsupported service type")}}"rejected"===d.state&&c(d.error,"non-critical",["ProfileCard"],{action:"canSendMessage"}),s({type:r.Actions.canSendMessage,meta:{userKey:e.account_id,serviceType:t},payload:d})}))},t.clearCanSendMessage=function(e,t){return a=>{a({type:r.Actions.clearCanSendMessage,meta:{userKey:e.account_id,serviceType:t}})}},t.clearLastSentMessage=o,t.clearLoadEventsInCommonError=function(e,t){return t=>{t({type:r.Actions.clearLoadEventsInCommonError,meta:{userKey:e.account_id}})}},t.clearLoadEventsError=function(e,t,a,s){const n=c(t,a);return t=>{t({type:r.Actions.clearLoadEventsError,meta:{userKey:e.account_id,rangeKey:n}})}},t.loadCalendarEventsInCommon=function(e,t){return(s,i,o)=>a.__awaiter(this,void 0,void 0,(function*(){const a=i(),c=a&&a.sharedCalendarState[e.account_id];c&&"rejected"!==c.eventSections.state||s({type:r.Actions.loadCalendarEventsInCommon,meta:{userKey:e.account_id,timestamp:t.now()},payload:{state:"pending"}});const{apiV2Client:d,reportError:l}=o(),u={account_ids_or_emails:[e.account_id],range_start_time:Date.now(),range_end_time:Date.now()+864e5},p=yield(0,n.toAsync)(d.ns("calendar").rpc("fetch_events_in_common",u,{}));if("rejected"===p.state)l(p.error,"non-critical",["ProfileCard"],{integration_action:"loadCalendarEvents"}),s({type:r.Actions.loadCalendarEventsInCommon,meta:{userKey:e.account_id,timestamp:t.now()},payload:p});else if("fulfilled"===p.state){const a=p.value.event_mapping[e.account_id]||[];s({type:r.Actions.loadCalendarEventsInCommon,meta:{userKey:e.account_id,timestamp:t.now()},payload:{state:"fulfilled",value:a}})}}))},t.getRangeKey=c,t.loadCalendarEvents=function(e,t,s,o,d){const l=c(s,o),u=e.account_id,p={range_start_time:s,range_end_time:o,calendar_id:e.email||u};return(e,s,o)=>a.__awaiter(this,void 0,void 0,(function*(){const{apiV2Client:a,reportError:c}=o(),{fullCalendarState:m}=s();void 0!==m[u]&&void 0!==m[u][l]||e({type:r.Actions.loadCalendarEvents,meta:{userKey:u,rangeKey:l,timestamp:t.now()},payload:{state:"pending"}});const y=yield(0,n.toAsync)(a.ns("calendar").rpc("fetch_events",p,{}));if("rejected"===y.state)c(y.error,"non-critical",["FullCalendar"],{integration_action:"loadCalendarEvents"}),e({type:r.Actions.loadCalendarEvents,meta:{userKey:u,rangeKey:l,timestamp:t.now()},payload:y});else if("fulfilled"===y.state){let a=y.value.events;void 0!==d&&(a=a.filter(e=>e.end_time-e.start_time<=d)),a=i.default.sortBy(a,["start_time","end_time"]),e({type:r.Actions.loadCalendarEvents,meta:{userKey:u,rangeKey:l,timestamp:t.now()},payload:{state:"fulfilled",value:a}})}}))},t.loadUpcomingCalendarEvents=function(){return(e,t,s)=>a.__awaiter(this,void 0,void 0,(function*(){const t=s().apiV2Client,a={range_start_time:Date.now(),range_end_time:Date.now()+9e5};e({type:r.Actions.loadUpcomingCalendarEvents,meta:{},payload:{state:"pending"}});try{const s=(yield t.ns("calendar").rpc("fetch_events",a,{})).events;e({type:r.Actions.loadUpcomingCalendarEvents,meta:{},payload:{state:"fulfilled",value:s}})}catch(t){e({type:r.Actions.loadUpcomingCalendarEvents,meta:{},payload:{state:"rejected",error:t}})}}))},t.makeZoomMeeting=function(e,t){return(s,i,o)=>a.__awaiter(this,void 0,void 0,(function*(){const{apiV2Client:a,reportError:i}=o(),c={event_key:e.calendar_event_key};s({type:r.Actions.makeZoomMeeting,meta:{userKey:t,ical_uid:e.ical_uid},payload:{state:"pending"}});const l=yield(0,n.toAsync)(a.ns("zoom").rpc("make_zoom_meeting",c,{}));if("rejected"===l.state)i(l.error,"non-critical",["ProfileCard"],{integration_action:"makeZoomMeeting"}),s({type:r.Actions.makeZoomMeeting,meta:{userKey:t,ical_uid:e.ical_uid},payload:l});else if("fulfilled"===l.state){const e=l.value.calendar_event;s({type:r.Actions.makeZoomMeeting,meta:{userKey:t,ical_uid:e.ical_uid},payload:{state:"fulfilled",value:e}}),setTimeout(()=>s(d(e,t)),3e3)}}))},t.clearMakeZoomMeetingMessage=d})),define("typescript/component_libraries/deep-integrations/src/platform/performance_timer",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultPerformanceTimer=void 0,t.DefaultPerformanceTimer={now:()=>Date.now()}}));
//# sourceMappingURL=pkg-starred.min.js-vflr2E0Ek.map