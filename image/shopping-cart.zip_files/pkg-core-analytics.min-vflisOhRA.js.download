define("js/pap-client/analytics_client",["require","exports","tslib","js/pap-client/event","js/pap-client/exceptions","js/pap-client/logger","js/pap-client/metrics_reporter","js/pap-client/util"],(function(e,t,n,o,r,i,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyticsClient=void 0,a=n.__importDefault(a);const l={application:{productName:"core_dropbox"}};t.AnalyticsClient=class{constructor(e){if(this.resetPersistentFields=()=>this.persistentFields=l,this.getPersistentFields=()=>this.persistentFields,this.setPersistentFields=e=>{var t;this.persistentFields=Object.assign(Object.assign(Object.assign({},this.persistentFields),{application:Object.assign(Object.assign({},this.persistentFields.application),e.application)}),(this.persistentFields.identity||e.identity)&&{identity:Object.assign(Object.assign({},this.persistentFields.identity),null!==(t=e.identity)&&void 0!==t?t:{})})},this.observerCallback=e=>{try{const t=e.getEntriesByName("https://www.dropbox.com/2/pap_event_logging/log_events","resource");for(const e of t)this.metricsReporter.recordPerformance(e)}catch(e){(0,r.reportException)({err:e,tags:["web_analytics_client"]})}},this.persistentFields=l,this.apiClient=e.apiClient,this.metricsReporter=new a.default({apiClient:e.apiClient}),this.logger=new i.Logger({apiClient:this.apiClient,metricsReporter:this.metricsReporter}),window&&window.PerformanceObserver)try{new window.PerformanceObserver(this.observerCallback).observe({entryTypes:["resource"]})}catch(e){(0,r.reportException)({err:e,tags:["web_analytics_client"]})}}updateConfigs(e){this.logger.updateConfigs(e)}logExposureEvent(e,t,n,o,r){const i={experiment_variant:t,feature:e,population_id:n,identity_gid:o,stormcrow_metadata_json:r,".tag":"stormcrow_exposure_event"};this.logEvent(i)}logEvent(e,t={},n="core_dropbox",r=!1){if(!(0,o.isStormcrowExposureEvent)(e)){const t=r?{caller:(0,s._generateCallerID)()}:{};this.metricsReporter.recordEventStats((0,o.getEventName)(e),"pap",t)}this.logger.add(e,Object.assign(Object.assign({},t),{onFailedToSendEvent:e=>{e||this.metricsReporter.recordPermanentlyFailedEvent(),t.onFailedToSendEvent&&t.onFailedToSendEvent(e)}}),Object.assign(Object.assign({},this.persistentFields),n?{application:{productName:n}}:{}))}}})),define("js/pap-client/api",["require","exports","tslib"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addEvents=t.LOG_EVENTS_ENDPOINT=t.PAP_EVENT_LOGGING_NAMESPACE=void 0,t.PAP_EVENT_LOGGING_NAMESPACE="pap_event_logging",t.LOG_EVENTS_ENDPOINT="log_events",t.addEvents=function(e,o){return n.__awaiter(this,void 0,void 0,(function*(){return o.ns(t.PAP_EVENT_LOGGING_NAMESPACE).rpc(t.LOG_EVENTS_ENDPOINT,{event_entries:e},{})}))}})),define("js/pap-client/event",["require","exports","js/pap-client/util","metaserver/static/js/dropbox/proto/pap_events/event_enums"],(function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEventProperties=t.hasValidEventName=t.isStormcrowExposureEvent=t.getEventState=t.getEventActionSurface=t.getEventObject=t.getEventAction=t.getEventName=t.getEventClass=void 0;const r=["actionSurface","eventClass","eventState"];function i(e){if("class"in e&&"action"in e&&"object"in e)return e}function a(e){var t;const o=i(e);if(o)return o.action;try{const o=null===(t=e.constructor)||void 0===t?void 0:t.getTypeUrl().split(".").pop();return(0,n.convertCamelToSnakeCase)(null==o?void 0:o.split("_")[0])}catch(e){}}function s(e){var t;const o=i(e);if(o)return o.object;try{const o=null===(t=e.constructor)||void 0===t?void 0:t.getTypeUrl().split(".").pop();return(0,n.convertCamelToSnakeCase)(null==o?void 0:o.split("_")[1])}catch(e){}}function l(e){return".tag"in e&&"stormcrow_exposure_event"===e[".tag"]}function c(e,t,n){var o;if(!t||!t.length)return;const r=t.charAt(0).toUpperCase()+t.substring(1),i=(null===(o=e.constructor)||void 0===o?void 0:o[r])||{},a=e[t]||n;for(const e of Object.keys(i))if(parseInt(i[e],10)===a)return e.toLowerCase()}t.getEventClass=function(e){const t=i(e);return t?t.class:c(e,"eventClass",0)},t.getEventName=function(e){const t=a(e),n=s(e);if(void 0!==t&&void 0!==n)return t+"."+n},t.getEventAction=a,t.getEventObject=s,t.getEventActionSurface=function(e){var t;const n=i(e);return n?null===(t=n.properties)||void 0===t?void 0:t.actionSurface:null==e?void 0:e.actionSurface},t.getEventState=function(e){var t;const n=i(e);if(n)return(null===(t=n.properties)||void 0===t?void 0:t.eventState)||"unknown_event_state";switch(null==e?void 0:e.eventState){case o.pap_events.EventState.UNKNOWN_EVENT_STATE:return"unknown_event_state";case o.pap_events.EventState.START:return"start";case o.pap_events.EventState.SUCCESS:return"success";case o.pap_events.EventState.FAILED:return"failed";default:return"unknown_event_state"}},t.isStormcrowExposureEvent=l,t.hasValidEventName=function(e){return!!l(e)||void 0!==a(e)&&void 0!==s(e)},t.getEventProperties=function(e){const t={},o=i(e);if(o)for(const e in o.properties)-1===r.indexOf(e)&&o.properties.hasOwnProperty(e)&&(t[(0,n.convertCamelToSnakeCase)(e)]=o.properties[e].toString());else for(const o in e)if(-1===r.indexOf(o)&&e.hasOwnProperty(o)){const r=c(e,o);t[(0,n.convertCamelToSnakeCase)(o)]=r||e[o].toString()}return t}})),define("js/pap-client/exceptions",["require","exports"],(function(e,t){"use strict";function reportException(e){const{err:t}=e;t.tags=[...(null==t?void 0:t.tags)||[],...(null==e?void 0:e.tags)||["pap_web"]],t.severity=e.severity,t.force=e.force,"undefined"==typeof jest&&setTimeout(()=>{throw t},0)}Object.defineProperty(t,"__esModule",{value:!0}),t.reportException=t.reportStack=t.SEVERITY=void 0,t.SEVERITY={CRITICAL:"critical",NONCRITICAL:"non-critical",USER_ERROR:"user-error",UNCAUGHT:"uncaught",OPERATIONAL:"operational"},t.reportStack=function(e,n){const o=new Error(e),r={force:!0,severity:(null==n?void 0:n.severity)||t.SEVERITY.NONCRITICAL,tags:(null==n?void 0:n.tags)||["pap_web"]};reportException(Object.assign({err:o},r))},t.reportException=reportException})),define("js/pap-client/logger",["require","exports","tslib","js/pap-client/api","js/pap-client/event","js/pap-client/exceptions","js/pap-client/serialize","js/pap-client/util"],(function(e,t,n,o,r,i,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=t.EventQueue=t.MAX_EVENT_QUEUE_SIZE=t.MAX_EVENTS_PER_REQUEST=t.MAX_SEND_ATTEMPTS=t.DEFAULT_FLUSH_INTERVAL=t.MIN_FLUSH_INTERVAL=t.TIME_BEFORE_FIRST_FLUSH=void 0,o=n.__importStar(o),t.TIME_BEFORE_FIRST_FLUSH=5e3,t.MIN_FLUSH_INTERVAL=2e3,t.DEFAULT_FLUSH_INTERVAL=3e4,t.MAX_SEND_ATTEMPTS=4,t.MAX_EVENTS_PER_REQUEST=2e3,t.MAX_EVENT_QUEUE_SIZE=2e4;class l{constructor(e){this.events=[],this.metricsReporter=e.metricsReporter,this.configMaxSize=(null==e?void 0:e.maxSize)||t.MAX_EVENT_QUEUE_SIZE}dropEvents(e,t){const n=this.popEvents(e);n.forEach(e=>{void 0!==e&&e.options.onFailedToSendEvent&&e.options.onFailedToSendEvent(!1)}),this.metricsReporter.recordEventsDropped(n.length,{reason:null!=t?t:"unknown_reason"})}popEvents(e){return this.events.splice(0,e)}add(e){this.isFull()&&this.dropEvents(this.events.length-this.configMaxSize+1,"queue_full"),this.events.push(e)}requeue(e){this.events.unshift(...e),this.isFull()&&this.dropEvents(this.events.length-this.configMaxSize,"queue_full")}size(){return this.events.length}isEmpty(){return 0===this.events.length}isFull(){return this.events.length>=this.configMaxSize}}t.EventQueue=l;t.Logger=class{constructor(e){this.eventQueueByPersistentFields={},this.configs={},this.apiClient=e.apiClient,this.configMaxEventsPerRequest=e.maxEventsPerRequest||t.MAX_EVENTS_PER_REQUEST,this.metricsReporter=e.metricsReporter,this.populateWindowPropertiesCache(),this.start()}populateWindowPropertiesCache(){this.windowPropertiesCache={navigator:{language:window.navigator.language,cookieEnabled:window.navigator.cookieEnabled},screen:{height:window.screen.height,width:window.screen.width,colorDepth:window.screen.colorDepth},location:{href:window.location.href},innerWidth:window.innerWidth,innerHeight:window.innerHeight}}start(){document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&this.flush()}),window.addEventListener("pagehide",()=>{this.flush()}),this.scheduleFlush(t.TIME_BEFORE_FIRST_FLUSH)}add(e,t,n){this.populateWindowPropertiesCache(),(0,r.hasValidEventName)(e)||(0,i.reportStack)(`Invalid event name ${(0,r.getEventName)(e)}`);let o=this.eventQueueByPersistentFields[JSON.stringify(n)];void 0===o&&(o=new l({metricsReporter:this.metricsReporter}),this.eventQueueByPersistentFields[JSON.stringify(n)]=o),o.add({payload:e,ts:Date.now(),sendAttempts:0,sessionId:this.getSessionId(),options:t}),t.flush&&this.flush(),this.metricsReporter.recordQueueSize(o.size())}scheduleFlush(e){this.timeoutId=setTimeout(()=>this.flush(),e)}flush(){var e;return n.__awaiter(this,void 0,void 0,(function*(){this.timeoutId&&clearTimeout(this.timeoutId);let n=t.DEFAULT_FLUSH_INTERVAL;for(const[r,l]of Object.entries(this.eventQueueByPersistentFields)){if(void 0===l||l.isEmpty())continue;const c=l.popEvents(this.configMaxEventsPerRequest);let u=!1;c.forEach(e=>e.sendAttempts++);try{const e=(0,a.createPAPEventEntries)(c,JSON.parse(r),this.configs,this.windowPropertiesCache),t=this.metricsReporter.createSendEventsTimer({beacon:"false"});yield o.addEvents(e,this.apiClient),t.record(),u=!0}catch(t){(0,i.reportException)({err:t}),this.metricsReporter.recordRequestsFailed(1,{error_name:(null!==(e=null==t?void 0:t.name)&&void 0!==e?e:null==t?void 0:t.message)?(0,s.getTagFromErrorMessage)(t.message):"unknown_error"})}if(this.metricsReporter.recordRequestsEvents(c.length),u)this.metricsReporter.recordRequestsSuccess(1),this.metricsReporter.recordRequestsAttempts(Math.max(...c.map(e=>e.sendAttempts))),this.metricsReporter.recordEventsSent(c.length),l.isEmpty()||(n=t.MIN_FLUSH_INTERVAL);else{const e=c.filter(e=>(e.options.onFailedToSendEvent&&e.options.onFailedToSendEvent(e.sendAttempts<t.MAX_SEND_ATTEMPTS),e.sendAttempts<t.MAX_SEND_ATTEMPTS));e.length>0&&l.requeue(e);const n=c.length-e.length;n>0&&(this.metricsReporter.recordRequestsAttempts(Math.max(...c.map(e=>e.sendAttempts))),this.metricsReporter.recordEventsDropped(n,{reason:"hit_max_retries"}))}}this.scheduleFlush(Math.floor(n*(.8+.4*Math.random())))}))}getSessionId(){let e;try{e=window.localStorage}catch(e){return Date.now().toString()}if(!e)return Date.now().toString();const t=e.getItem("pap_session_last_used");let n=e.getItem("pap_session_value");return(!n||!t||parseInt(t,10)<Date.now()-18e5)&&(n=Date.now().toString(),e.setItem("pap_session_value",n)),e.setItem("pap_session_last_used",Date.now().toString()),n}updateConfigs(e){this.configs=Object.assign(Object.assign({},this.configs),e)}}})),define("js/pap-client/metrics_reporter",["require","exports","typescript/libraries/shared/apex-metrics/src/index","typescript/libraries/shared/apex-metrics/src/sink/index"],(function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WEB_PAP_AMP_NS=void 0,t.WEB_PAP_AMP_NS="web_product_analytics_pipeline";t.default=class{constructor(e){this.metricsReporter=(0,o.getMetricsReporter)({client:e.apiClient}),this.counterEventsSent=this.metricsReporter.createCounter({ns:t.WEB_PAP_AMP_NS,name:"pap/web/events/sent"}),this.counterRequestsEvents=this.metricsReporter.createCounter({ns:t.WEB_PAP_AMP_NS,name:"pap/web/requests/events"}),this.counterRequestsSuccess=this.metricsReporter.createCounter({ns:t.WEB_PAP_AMP_NS,name:"pap/web/requests/success"}),this.counterRequestsAttempts=this.metricsReporter.createCounter({ns:t.WEB_PAP_AMP_NS,name:"pap/web/requests/attempts"}),this.statsQueueSize=this.metricsReporter.createStats({ns:t.WEB_PAP_AMP_NS,name:"pap/web/events/queued"})}recordEventsDropped(e,n){const o=this.metricsReporter.createCounter({ns:t.WEB_PAP_AMP_NS,name:"pap/web/events/dropped"},n);o.increment(e),o.record()}recordEventsSent(e){this.counterEventsSent.increment(e),this.counterEventsSent.record()}recordRequestsEvents(e){this.counterRequestsEvents.increment(e),this.counterRequestsEvents.record()}recordRequestsSuccess(e){this.counterRequestsSuccess.increment(e),this.counterRequestsSuccess.record()}recordRequestsAttempts(e){this.counterRequestsAttempts.increment(e),this.counterRequestsAttempts.record()}recordRequestsFailed(e,n){const o=this.metricsReporter.createCounter({ns:t.WEB_PAP_AMP_NS,name:"pap/web/requests/failure"},n);o.increment(e),o.record()}recordQueueSize(e){this.statsQueueSize.record(e)}createSendEventsTimer(e){return this.metricsReporter.createTimer({ns:t.WEB_PAP_AMP_NS,name:"analytics-client-logger/events/send-timer"},e)}recordEventStats(e,n,o){const r=this.metricsReporter.createCounter({ns:t.WEB_PAP_AMP_NS,name:"analytics-client-event/"+n+"/"+e},o);r.increment(1),r.record()}recordPerformance(e){const o={latency:this.metricsReporter.createStats({ns:t.WEB_PAP_AMP_NS,name:"pap/web/requests/latency"}),transferSize:this.metricsReporter.createStats({ns:t.WEB_PAP_AMP_NS,name:"pap/web/requests/transfer_size"}),encodedBodySize:this.metricsReporter.createStats({ns:t.WEB_PAP_AMP_NS,name:"pap/web/requests/encoded_body_size"})};o.latency.recordDuration(e.duration,n.TimeUnit.MILLISECONDS),o.transferSize.record(e.transferSize),o.encodedBodySize.record(e.encodedBodySize)}recordPermanentlyFailedEvent(){const e=this.metricsReporter.createCounter({ns:t.WEB_PAP_AMP_NS,name:"pap/web/events/permanently_failed"});e.increment(1),e.record()}}})),define("js/pap-client/serialize",["require","exports","js/pap-client/event","js/pap-client/exceptions","js/uuid/uuid"],(function(e,t,n,o,r){"use strict";function i(e){const{identity:t}=e;return(null==t?void 0:t.foreignUserProvider)&&(null==t?void 0:t.foreignUserId)?{foreign_user_provider:null==t?void 0:t.foreignUserProvider,foreign_user_id:null==t?void 0:t.foreignUserId,user_id:void 0,team_id:void 0,paired_user_id:void 0}:(null==t?void 0:t.foreignUserProvider)&&!(null==t?void 0:t.foreignUserId)||!(null==t?void 0:t.foreignUserProvider)&&(null==t?void 0:t.foreignUserId)?((null==t?void 0:t.foreignUserId)?(null==t?void 0:t.foreignUserProvider)||(0,o.reportStack)("Missing foreign_user_provider"):(0,o.reportStack)("Missing foreign_user_id"),{foreign_user_provider:null==t?void 0:t.foreignUserProvider,foreign_user_id:null==t?void 0:t.foreignUserId,user_id:null==t?void 0:t.userId,team_id:null==t?void 0:t.teamId,paired_user_id:null==t?void 0:t.pairedUserId}):{user_id:null==t?void 0:t.userId,team_id:null==t?void 0:t.teamId,paired_user_id:null==t?void 0:t.pairedUserId}}Object.defineProperty(t,"__esModule",{value:!0}),t.createPAPEventEntries=void 0,t.createPAPEventEntries=function(e,t,o,a){var s,l,c,u,p;return{application_fields:{build_channel:{".tag":"stable"},product_name:{".tag":t.application.productName}},device_fields:{locale:navigator.languages&&navigator.languages.length>0?navigator.languages[0]:navigator.language,platform_fields:{".tag":"client_web_device_fields",ua_browser_lang:null===(s=null==a?void 0:a.navigator)||void 0===s?void 0:s.language,is_br_cookies_enabled:null===(l=null==a?void 0:a.navigator)||void 0===l?void 0:l.cookieEnabled,ua_br_color_depth:null===(c=null==a?void 0:a.screen)||void 0===c?void 0:c.colorDepth,ua_br_viewport_width:null==a?void 0:a.innerWidth,ua_br_viewport_height:null==a?void 0:a.innerHeight,device_screen_height:null===(u=null==a?void 0:a.screen)||void 0===u?void 0:u.height,device_screen_width:null===(p=null==a?void 0:a.screen)||void 0===p?void 0:p.width,url:null==a?void 0:a.location.href,referrer:null===document||void 0===document?void 0:document.referrer,request_id:o.requestId}},client_identity_fields:i(t),events:e.map(({payload:e,ts:t,sessionId:o})=>(function(e,t,o){return(0,n.isStormcrowExposureEvent)(e)?{event_identifier:e,event_ts:new Date(t).toISOString(),platform_session_id:o,event_guid:r.UUID.v4()}:{event_identifier:{event_action:(0,n.getEventAction)(e),event_object:(0,n.getEventObject)(e),".tag":"predefined_event"},event_properties:(0,n.getEventProperties)(e),event_ts:new Date(t).toISOString(),action_surface:(0,n.getEventActionSurface)(e),event_class:(0,n.getEventClass)(e),event_state:{".tag":(0,n.getEventState)(e)},platform_session_id:o,event_guid:r.UUID.v4()}})(e,t,o))}}})),define("js/pap-client/util",["require","exports","lodash"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._generateCallerID=t.getTagFromErrorMessage=t.getEnumValueForString=t.convertCamelToSnakeCase=void 0,t.convertCamelToSnakeCase=function(e){return e.replace(/[A-Z]/g,(e,t)=>0===t?e.toLowerCase():"_"+e.toLowerCase())},t.getEnumValueForString=function(e,t){var o;return t[null===(o=(0,n.snakeCase)(e))||void 0===o?void 0:o.toUpperCase()]},t.getTagFromErrorMessage=function(e,t=25){let n="";const o=e.toLowerCase().split(/\s+/).join("-");for(const e of o){if(n.length>=t)break;const o=e.charCodeAt(0);o>47&&o<58||o>96&&o<123?n+=e:45===o&&"-"!==n[n.length-1]&&(n+=e)}return"-"===n[n.length-1]&&(n=n.slice(0,n.length-1)),n},t._generateCallerID=function(){const e=/([^(]+)@|at ([^(]+) \(/,t=new Error;if(void 0===t.stack)return"unknown";let n="";return t.stack.split("\n").slice(3,7).forEach(t=>{const o=e.exec(t);n+="/"+(null===o?"?":(o[1]||o[2]).replace("<anonymous>","?"))}),n.substring(0,64)}})),define("typescript/dropbox/proto/hql_events/ux_analytics/ux_analytics_events_pb",["require","exports","@bufbuild/protobuf","../extensions_pb"],(function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UXAnalyticsScrollPage=t.UXAnalyticsDismissModal=t.UXAnalyticsShownModal=t.UXAnalyticsHeartbeatPage=t.UXAnalyticsDismissPage=t.UXAnalyticsSelectElement=t.UXAnalyticsSelectLinkNoSessionStorage=t.UXAnalyticsSelectLink=t.UXAnalyticsShownPage=t.ElementPositionFields=t.TimeAndLocationFields=t.UXACommonFields=void 0;class r extends n.Message{constructor(e){super(),this.urlPii="",this.orgReferrerPii="",this.httpReferrerPii="",this.previousUrlPii="",this.requestId="",this.visitId="",this.requestSeq=n.protoInt64.zero,this.uxaV=0,this.instanceEventCount=n.protoInt64.zero,this.instanceInitTs=n.protoInt64.zero,this.spaSource="",this.hashFragmentPii="",this.variants="",this.adobeTargetVariants="",this.warpVariants="",this.cmsPageUuid="",this.paramAd="",this.paramCamp="",this.paramFbclid="",this.paramGclid="",this.paramKw="",this.paramMsclkid="",this.paramNet="",this.paramOqa="",this.paramTk="",this.paramTrigger="",this.paramUtmCampaign="",this.paramUtmContent="",this.paramUtmMedium="",this.paramUtmSource="",this.paramUtmTerm="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new r).fromBinary(e,t)}static fromJson(e,t){return(new r).fromJson(e,t)}static fromJsonString(e,t){return(new r).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(r,e,t)}}t.UXACommonFields=r,r.runtime=n.proto3,r.typeName="hql_events.UXACommonFields",r.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"url_pii",kind:"scalar",T:9},{no:2,name:"org_referrer_pii",kind:"scalar",T:9},{no:3,name:"http_referrer_pii",kind:"scalar",T:9},{no:4,name:"previous_url_pii",kind:"scalar",T:9},{no:5,name:"request_id",kind:"scalar",T:9},{no:6,name:"visit_id",kind:"scalar",T:9},{no:7,name:"request_seq",kind:"scalar",T:3},{no:8,name:"uxa_v",kind:"scalar",T:2},{no:30,name:"instance_event_count",kind:"scalar",T:3},{no:31,name:"instance_init_ts",kind:"scalar",T:3},{no:9,name:"spa_source",kind:"scalar",T:9},{no:10,name:"hash_fragment_pii",kind:"scalar",T:9},{no:11,name:"variants",kind:"scalar",T:9},{no:12,name:"adobe_target_variants",kind:"scalar",T:9},{no:13,name:"warp_variants",kind:"scalar",T:9},{no:14,name:"cms_page_uuid",kind:"scalar",T:9},{no:15,name:"param_ad",kind:"scalar",T:9},{no:16,name:"param_camp",kind:"scalar",T:9},{no:17,name:"param_fbclid",kind:"scalar",T:9},{no:18,name:"param_gclid",kind:"scalar",T:9},{no:19,name:"param_kw",kind:"scalar",T:9},{no:20,name:"param_msclkid",kind:"scalar",T:9},{no:21,name:"param_net",kind:"scalar",T:9},{no:22,name:"param_oqa",kind:"scalar",T:9},{no:23,name:"param_tk",kind:"scalar",T:9},{no:24,name:"param_trigger",kind:"scalar",T:9},{no:25,name:"param_utm_campaign",kind:"scalar",T:9},{no:26,name:"param_utm_content",kind:"scalar",T:9},{no:27,name:"param_utm_medium",kind:"scalar",T:9},{no:28,name:"param_utm_source",kind:"scalar",T:9},{no:29,name:"param_utm_term",kind:"scalar",T:9}]);class i extends n.Message{constructor(e){super(),this.timeOnPage=n.protoInt64.zero,this.verticalOffset=n.protoInt64.zero,n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new i).fromBinary(e,t)}static fromJson(e,t){return(new i).fromJson(e,t)}static fromJsonString(e,t){return(new i).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(i,e,t)}}t.TimeAndLocationFields=i,i.runtime=n.proto3,i.typeName="hql_events.TimeAndLocationFields",i.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"time_on_page",kind:"scalar",T:3},{no:2,name:"vertical_offset",kind:"scalar",T:3}]);class a extends n.Message{constructor(e){super(),this.left=n.protoInt64.zero,this.top=n.protoInt64.zero,n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new a).fromBinary(e,t)}static fromJson(e,t){return(new a).fromJson(e,t)}static fromJsonString(e,t){return(new a).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(a,e,t)}}t.ElementPositionFields=a,a.runtime=n.proto3,a.typeName="hql_events.ElementPositionFields",a.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"left",kind:"scalar",T:3},{no:2,name:"top",kind:"scalar",T:3}]);class s extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new s).fromBinary(e,t)}static fromJson(e,t){return(new s).fromJson(e,t)}static fromJsonString(e,t){return(new s).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(s,e,t)}}t.UXAnalyticsShownPage=s,s.runtime=n.proto3,s.typeName="hql_events.UXAnalyticsShownPage",s.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"hql_metadata",kind:"message",T:o.HQLMetadata},{no:2,name:"uxa_common_fields",kind:"message",T:r}]);class l extends n.Message{constructor(e){super(),this.linkId="",this.linkRank=n.protoInt64.zero,this.tagName="",this.originHrefPii="",this.destinationUrlPii="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new l).fromBinary(e,t)}static fromJson(e,t){return(new l).fromJson(e,t)}static fromJsonString(e,t){return(new l).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(l,e,t)}}t.UXAnalyticsSelectLink=l,l.runtime=n.proto3,l.typeName="hql_events.UXAnalyticsSelectLink",l.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"hql_metadata",kind:"message",T:o.HQLMetadata},{no:2,name:"uxa_common_fields",kind:"message",T:r},{no:3,name:"time_and_location_fields",kind:"message",T:i},{no:4,name:"element_position_fields",kind:"message",T:a},{no:5,name:"link_id",kind:"scalar",T:9},{no:6,name:"link_rank",kind:"scalar",T:3},{no:7,name:"tag_name",kind:"scalar",T:9},{no:8,name:"origin_href_pii",kind:"scalar",T:9},{no:9,name:"destination_url_pii",kind:"scalar",T:9}]);class c extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new c).fromBinary(e,t)}static fromJson(e,t){return(new c).fromJson(e,t)}static fromJsonString(e,t){return(new c).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(c,e,t)}}t.UXAnalyticsSelectLinkNoSessionStorage=c,c.runtime=n.proto3,c.typeName="hql_events.UXAnalyticsSelectLinkNoSessionStorage",c.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"hql_metadata",kind:"message",T:o.HQLMetadata},{no:2,name:"uxa_common_fields",kind:"message",T:r},{no:3,name:"time_and_location_fields",kind:"message",T:i}]);class u extends n.Message{constructor(e){super(),this.elementId="",this.elementRank=n.protoInt64.zero,this.tagName="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new u).fromBinary(e,t)}static fromJson(e,t){return(new u).fromJson(e,t)}static fromJsonString(e,t){return(new u).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(u,e,t)}}t.UXAnalyticsSelectElement=u,u.runtime=n.proto3,u.typeName="hql_events.UXAnalyticsSelectElement",u.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"hql_metadata",kind:"message",T:o.HQLMetadata},{no:2,name:"uxa_common_fields",kind:"message",T:r},{no:3,name:"time_and_location_fields",kind:"message",T:i},{no:4,name:"element_position_fields",kind:"message",T:a},{no:5,name:"element_id",kind:"scalar",T:9},{no:6,name:"element_rank",kind:"scalar",T:3},{no:7,name:"tag_name",kind:"scalar",T:9}]);class p extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new p).fromBinary(e,t)}static fromJson(e,t){return(new p).fromJson(e,t)}static fromJsonString(e,t){return(new p).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(p,e,t)}}t.UXAnalyticsDismissPage=p,p.runtime=n.proto3,p.typeName="hql_events.UXAnalyticsDismissPage",p.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"hql_metadata",kind:"message",T:o.HQLMetadata},{no:2,name:"uxa_common_fields",kind:"message",T:r},{no:3,name:"time_and_location_fields",kind:"message",T:i}]);class d extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new d).fromBinary(e,t)}static fromJson(e,t){return(new d).fromJson(e,t)}static fromJsonString(e,t){return(new d).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(d,e,t)}}t.UXAnalyticsHeartbeatPage=d,d.runtime=n.proto3,d.typeName="hql_events.UXAnalyticsHeartbeatPage",d.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"hql_metadata",kind:"message",T:o.HQLMetadata},{no:2,name:"uxa_common_fields",kind:"message",T:r},{no:3,name:"time_and_location_fields",kind:"message",T:i}]);class g extends n.Message{constructor(e){super(),this.modal="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new g).fromBinary(e,t)}static fromJson(e,t){return(new g).fromJson(e,t)}static fromJsonString(e,t){return(new g).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(g,e,t)}}t.UXAnalyticsShownModal=g,g.runtime=n.proto3,g.typeName="hql_events.UXAnalyticsShownModal",g.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"hql_metadata",kind:"message",T:o.HQLMetadata},{no:2,name:"uxa_common_fields",kind:"message",T:r},{no:3,name:"time_and_location_fields",kind:"message",T:i},{no:4,name:"modal",kind:"scalar",T:9}]);class _ extends n.Message{constructor(e){super(),this.modal="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new _).fromBinary(e,t)}static fromJson(e,t){return(new _).fromJson(e,t)}static fromJsonString(e,t){return(new _).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(_,e,t)}}t.UXAnalyticsDismissModal=_,_.runtime=n.proto3,_.typeName="hql_events.UXAnalyticsDismissModal",_.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"hql_metadata",kind:"message",T:o.HQLMetadata},{no:2,name:"uxa_common_fields",kind:"message",T:r},{no:3,name:"time_and_location_fields",kind:"message",T:i},{no:4,name:"modal",kind:"scalar",T:9}]);class m extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new m).fromBinary(e,t)}static fromJson(e,t){return(new m).fromJson(e,t)}static fromJsonString(e,t){return(new m).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(m,e,t)}}t.UXAnalyticsScrollPage=m,m.runtime=n.proto3,m.typeName="hql_events.UXAnalyticsScrollPage",m.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"hql_metadata",kind:"message",T:o.HQLMetadata},{no:2,name:"uxa_common_fields",kind:"message",T:r},{no:3,name:"time_and_location_fields",kind:"message",T:i}])})),define("typescript/dropbox/proto/hql_events/extensions_pb",["require","exports","@bufbuild/protobuf","./taxonomy_pb"],(function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HQLMetadata=t.HQLEventIdentity_LegacyEvent=t.HQLEventIdentity_EventClass=t.HQLEventIdentity_ActionEventIdentity=t.HQLEventIdentity=void 0;class r extends n.Message{constructor(e){super(),this.identity={case:void 0},n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new r).fromBinary(e,t)}static fromJson(e,t){return(new r).fromJson(e,t)}static fromJsonString(e,t){return(new r).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(r,e,t)}}t.HQLEventIdentity=r,r.runtime=n.proto3,r.typeName="hql_events.HQLEventIdentity",r.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"action_event_id",kind:"message",T:i,oneof:"identity"},{no:2,name:"event_name",kind:"scalar",T:9,oneof:"identity"},{no:3,name:"event_class",kind:"message",T:a},{no:4,name:"legacy_event",kind:"message",T:s}]);class i extends n.Message{constructor(e){super(),this.object="",this.action=o.TaxonomyAction_Action.UNSPECIFIED,n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new i).fromBinary(e,t)}static fromJson(e,t){return(new i).fromJson(e,t)}static fromJsonString(e,t){return(new i).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(i,e,t)}}t.HQLEventIdentity_ActionEventIdentity=i,i.runtime=n.proto3,i.typeName="hql_events.HQLEventIdentity.ActionEventIdentity",i.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"object",kind:"scalar",T:9},{no:2,name:"action",kind:"enum",T:n.proto3.getEnumType(o.TaxonomyAction_Action)}]);class a extends n.Message{constructor(e){super(),this.className=o.TaxonomyClass_ClassName.UNSPECIFIED,this.subclassName=o.TaxonomySubclass_SubclassName.UNSPECIFIED,n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new a).fromBinary(e,t)}static fromJson(e,t){return(new a).fromJson(e,t)}static fromJsonString(e,t){return(new a).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(a,e,t)}}t.HQLEventIdentity_EventClass=a,a.runtime=n.proto3,a.typeName="hql_events.HQLEventIdentity.EventClass",a.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"class_name",kind:"enum",T:n.proto3.getEnumType(o.TaxonomyClass_ClassName)},{no:2,name:"subclass_name",kind:"enum",T:n.proto3.getEnumType(o.TaxonomySubclass_SubclassName)}]);class s extends n.Message{constructor(e){super(),this.table="",this.name="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new s).fromBinary(e,t)}static fromJson(e,t){return(new s).fromJson(e,t)}static fromJsonString(e,t){return(new s).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(s,e,t)}}t.HQLEventIdentity_LegacyEvent=s,s.runtime=n.proto3,s.typeName="hql_events.HQLEventIdentity.LegacyEvent",s.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"table",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9}]);class l extends n.Message{constructor(e){super(),this.appSurface=o.TaxonomyAppSurface_AppSurface.UNSPECIFIED,this.actionSurface=o.TaxonomyActionSurface_ActionSurface.UNSPECIFIED,n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new l).fromBinary(e,t)}static fromJson(e,t){return(new l).fromJson(e,t)}static fromJsonString(e,t){return(new l).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(l,e,t)}}t.HQLMetadata=l,l.runtime=n.proto3,l.typeName="hql_events.HQLMetadata",l.fields=n.proto3.util.newFieldList(()=>[{no:1,name:"app_surface",kind:"enum",T:n.proto3.getEnumType(o.TaxonomyAppSurface_AppSurface)},{no:2,name:"action_surface",kind:"enum",T:n.proto3.getEnumType(o.TaxonomyActionSurface_ActionSurface)},{no:3,name:"identity_override",kind:"message",T:r}])})),define("typescript/dropbox/proto/hql_events/taxonomy_pb",["require","exports","@bufbuild/protobuf"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TaxonomyActionSurface_ActionSurface=t.TaxonomyActionSurface=t.TaxonomyAppSurface_AppSurface=t.TaxonomyAppSurface=t.TaxonomySubclass_SubclassName=t.TaxonomySubclass=t.TaxonomyClass_ClassName=t.TaxonomyClass=t.TaxonomyAction_Action=t.TaxonomyAction=void 0;class o extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new o).fromBinary(e,t)}static fromJson(e,t){return(new o).fromJson(e,t)}static fromJsonString(e,t){return(new o).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(o,e,t)}}var r,i,a,s,l;t.TaxonomyAction=o,o.runtime=n.proto3,o.typeName="hql_events.TaxonomyAction",o.fields=n.proto3.util.newFieldList(()=>[]),(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.START=1]="START",e[e.FOREGROUND=2]="FOREGROUND",e[e.SHOWN=3]="SHOWN",e[e.HOVER=4]="HOVER",e[e.SCROLL=5]="SCROLL",e[e.SEARCH=6]="SEARCH",e[e.SELECT=7]="SELECT",e[e.PIN=8]="PIN",e[e.UNPIN=9]="UNPIN",e[e.MOVE=10]="MOVE",e[e.RENAME=11]="RENAME",e[e.COPY=12]="COPY",e[e.DELETE=13]="DELETE",e[e.OPEN=14]="OPEN",e[e.CREATE=15]="CREATE",e[e.VERSION_HISTORY=16]="VERSION_HISTORY",e[e.DOWNLOAD=17]="DOWNLOAD",e[e.TRANSFER=18]="TRANSFER",e[e.COMMENT=19]="COMMENT",e[e.STAR=20]="STAR",e[e.UNSTAR=21]="UNSTAR",e[e.UPLOAD=22]="UPLOAD",e[e.REQUEST=23]="REQUEST",e[e.REWIND_HISTORY=24]="REWIND_HISTORY",e[e.SHARE=25]="SHARE",e[e.EDIT=26]="EDIT",e[e.PREVIEW=27]="PREVIEW",e[e.INITIATE=28]="INITIATE",e[e.FAIL=29]="FAIL",e[e.SUCCEED=30]="SUCCEED",e[e.ATTEMPT=31]="ATTEMPT",e[e.PREVIEW_RENDER_SUCCEEDED=32]="PREVIEW_RENDER_SUCCEEDED",e[e.DISMISS=33]="DISMISS",e[e.HEARTBEAT=34]="HEARTBEAT",e[e.CONTINUE=35]="CONTINUE"})(r=t.TaxonomyAction_Action||(t.TaxonomyAction_Action={})),n.proto3.util.setEnumType(r,"hql_events.TaxonomyAction.Action",[{no:0,name:"UNSPECIFIED"},{no:1,name:"START"},{no:2,name:"FOREGROUND"},{no:3,name:"SHOWN"},{no:4,name:"HOVER"},{no:5,name:"SCROLL"},{no:6,name:"SEARCH"},{no:7,name:"SELECT"},{no:8,name:"PIN"},{no:9,name:"UNPIN"},{no:10,name:"MOVE"},{no:11,name:"RENAME"},{no:12,name:"COPY"},{no:13,name:"DELETE"},{no:14,name:"OPEN"},{no:15,name:"CREATE"},{no:16,name:"VERSION_HISTORY"},{no:17,name:"DOWNLOAD"},{no:18,name:"TRANSFER"},{no:19,name:"COMMENT"},{no:20,name:"STAR"},{no:21,name:"UNSTAR"},{no:22,name:"UPLOAD"},{no:23,name:"REQUEST"},{no:24,name:"REWIND_HISTORY"},{no:25,name:"SHARE"},{no:26,name:"EDIT"},{no:27,name:"PREVIEW"},{no:28,name:"INITIATE"},{no:29,name:"FAIL"},{no:30,name:"SUCCEED"},{no:31,name:"ATTEMPT"},{no:32,name:"PREVIEW_RENDER_SUCCEEDED"},{no:33,name:"DISMISS"},{no:34,name:"HEARTBEAT"},{no:35,name:"CONTINUE"}]);class c extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new c).fromBinary(e,t)}static fromJson(e,t){return(new c).fromJson(e,t)}static fromJsonString(e,t){return(new c).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(c,e,t)}}t.TaxonomyClass=c,c.runtime=n.proto3,c.typeName="hql_events.TaxonomyClass",c.fields=n.proto3.util.newFieldList(()=>[]),(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SEE_AND_CLICK=1]="SEE_AND_CLICK",e[e.FILE_ACTIONS=2]="FILE_ACTIONS",e[e.FEATURE=3]="FEATURE"})(i=t.TaxonomyClass_ClassName||(t.TaxonomyClass_ClassName={})),n.proto3.util.setEnumType(i,"hql_events.TaxonomyClass.ClassName",[{no:0,name:"UNSPECIFIED"},{no:1,name:"SEE_AND_CLICK"},{no:2,name:"FILE_ACTIONS"},{no:3,name:"FEATURE"}]);class u extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new u).fromBinary(e,t)}static fromJson(e,t){return(new u).fromJson(e,t)}static fromJsonString(e,t){return(new u).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(u,e,t)}}t.TaxonomySubclass=u,u.runtime=n.proto3,u.typeName="hql_events.TaxonomySubclass",u.fields=n.proto3.util.newFieldList(()=>[]),(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SHARE=1]="SHARE"})(a=t.TaxonomySubclass_SubclassName||(t.TaxonomySubclass_SubclassName={})),n.proto3.util.setEnumType(a,"hql_events.TaxonomySubclass.SubclassName",[{no:0,name:"UNSPECIFIED"},{no:1,name:"SHARE"}]);class p extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new p).fromBinary(e,t)}static fromJson(e,t){return(new p).fromJson(e,t)}static fromJsonString(e,t){return(new p).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(p,e,t)}}t.TaxonomyAppSurface=p,p.runtime=n.proto3,p.typeName="hql_events.TaxonomyAppSurface",p.fields=n.proto3.util.newFieldList(()=>[]),(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.DESKTOP_COLLAB_BROWSE=1]="DESKTOP_COLLAB_BROWSE",e[e.DESKTOP_TRAY=2]="DESKTOP_TRAY",e[e.WEB=3]="WEB",e[e.NATIVE=4]="NATIVE",e[e.HARMONY=5]="HARMONY"})(s=t.TaxonomyAppSurface_AppSurface||(t.TaxonomyAppSurface_AppSurface={})),n.proto3.util.setEnumType(s,"hql_events.TaxonomyAppSurface.AppSurface",[{no:0,name:"UNSPECIFIED"},{no:1,name:"DESKTOP_COLLAB_BROWSE"},{no:2,name:"DESKTOP_TRAY"},{no:3,name:"WEB"},{no:4,name:"NATIVE"},{no:5,name:"HARMONY"}]);class d extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new d).fromBinary(e,t)}static fromJson(e,t){return(new d).fromJson(e,t)}static fromJsonString(e,t){return(new d).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(d,e,t)}}t.TaxonomyActionSurface=d,d.runtime=n.proto3,d.typeName="hql_events.TaxonomyActionSurface",d.fields=n.proto3.util.newFieldList(()=>[]),(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SIGN_IN_PAGE=1]="SIGN_IN_PAGE",e[e.SIGN_IN_DBX_PAGE=2]="SIGN_IN_DBX_PAGE",e[e.SIGN_IN_GOOGLE_MODAL=3]="SIGN_IN_GOOGLE_MODAL",e[e.INTERSTITIAL_GOOGLE_ACCOUNTS_PAGE=4]="INTERSTITIAL_GOOGLE_ACCOUNTS_PAGE",e[e.SIGNUP_PAGE=5]="SIGNUP_PAGE",e[e.START_MENU=6]="START_MENU",e[e.START_DOCK=7]="START_DOCK",e[e.TRAY_ICON=8]="TRAY_ICON",e[e.NOTIFICATIONS_TAB=9]="NOTIFICATIONS_TAB",e[e.RECENT_TAB=10]="RECENT_TAB",e[e.FOR_YOU_TAB=11]="FOR_YOU_TAB",e[e.RECENT_YOU_SUB_TAB=12]="RECENT_YOU_SUB_TAB",e[e.RECENT_TEAM_SUB_TAB=13]="RECENT_TEAM_SUB_TAB",e[e.CALENDAR_EVENT_MENU=14]="CALENDAR_EVENT_MENU",e[e.SHARING_MODAL=15]="SHARING_MODAL",e[e.TOP_BAR=16]="TOP_BAR",e[e.FOR_YOU_TABS=17]="FOR_YOU_TABS",e[e.SEARCH_RESULTS=18]="SEARCH_RESULTS",e[e.TOP_BAR_CREATE_MENU=19]="TOP_BAR_CREATE_MENU",e[e.TRAY_MENU=20]="TRAY_MENU",e[e.CENTER_PANE=21]="CENTER_PANE",e[e.PLUS_CANCEL_SURVEY_MODAL=22]="PLUS_CANCEL_SURVEY_MODAL",e[e.PROFILE_MENU=23]="PROFILE_MENU",e[e.BROWSER_WINDOW=24]="BROWSER_WINDOW",e[e.RIGHT_PANE=25]="RIGHT_PANE",e[e.CENTER_PANE_PLAN_TAB=26]="CENTER_PANE_PLAN_TAB",e[e.CENTER_PANE_GENERAL_TAB=27]="CENTER_PANE_GENERAL_TAB",e[e.CENTER_PANE_BILLING_TAB=28]="CENTER_PANE_BILLING_TAB",e[e.CENTER_PANE_PERSON=29]="CENTER_PANE_PERSON",e[e.CENTER_PANE_STARRED=30]="CENTER_PANE_STARRED",e[e.CENTER_PANE_CREATE_CONTEXT_MENU=31]="CENTER_PANE_CREATE_CONTEXT_MENU",e[e.CENTER_PANE_VIEW_CONTEXT_MENU=32]="CENTER_PANE_VIEW_CONTEXT_MENU",e[e.LEFT_PANE=33]="LEFT_PANE",e[e.RIGHT_PANE_SHARE_CONTEXT_MENU=34]="RIGHT_PANE_SHARE_CONTEXT_MENU",e[e.APP_ICON=35]="APP_ICON",e[e.RIGHT_PANE_PERSON=36]="RIGHT_PANE_PERSON",e[e.RIGHT_PANE_CONTEXT_MENU=37]="RIGHT_PANE_CONTEXT_MENU",e[e.RIGHT_PANE_OPEN_CONTEXT_MENU=38]="RIGHT_PANE_OPEN_CONTEXT_MENU",e[e.APPLICATION_MENU=39]="APPLICATION_MENU",e[e.CAROUSEL_ONBOARDING_WINDOW=40]="CAROUSEL_ONBOARDING_WINDOW",e[e.CONNECT_APP_WINDOW=41]="CONNECT_APP_WINDOW",e[e.ONBOARDING_TOOLTIP=42]="ONBOARDING_TOOLTIP",e[e.RIGHT_PANE_PIN_CONTEXT_MENU=43]="RIGHT_PANE_PIN_CONTEXT_MENU",e[e.SPACE_EXAMPLE_MODAL=44]="SPACE_EXAMPLE_MODAL",e[e.TEAM_CANCEL_SURVEY_MODAL=45]="TEAM_CANCEL_SURVEY_MODAL",e[e.MOVE_MODAL=46]="MOVE_MODAL",e[e.ACCOUNT_CONTEXT_MENU=47]="ACCOUNT_CONTEXT_MENU",e[e.BOTTOM_BAR=48]="BOTTOM_BAR",e[e.SYNC_QUEUE=49]="SYNC_QUEUE",e[e.PLAN_CHANGE_MODAL=50]="PLAN_CHANGE_MODAL",e[e.MAGIC_PAIRING_WINDOW=51]="MAGIC_PAIRING_WINDOW",e[e.CONTEXT_MENU=52]="CONTEXT_MENU",e[e.SNACKBAR=53]="SNACKBAR",e[e.FILE_SYSTEM_WARNING=54]="FILE_SYSTEM_WARNING",e[e.SCREENSHOT=55]="SCREENSHOT",e[e.SCREEN_RECORDING=56]="SCREEN_RECORDING",e[e.REEL_HOME_PAGE=57]="REEL_HOME_PAGE",e[e.REEL_VIDEO_PAGE=58]="REEL_VIDEO_PAGE",e[e.COMMERCE_HOME_PAGE=59]="COMMERCE_HOME_PAGE",e[e.COMMERCE_CREATE_LISTING_PAGE=60]="COMMERCE_CREATE_LISTING_PAGE",e[e.COMMERCE_SELLER_LISTING_PAGE=61]="COMMERCE_SELLER_LISTING_PAGE",e[e.COMMERCE_BUYER_PAGE=62]="COMMERCE_BUYER_PAGE",e[e.COMMERCE_STRIPE_ONBOARDING_PAGE=63]="COMMERCE_STRIPE_ONBOARDING_PAGE",e[e.ESSENTIAL_SETUP_PAGE=64]="ESSENTIAL_SETUP_PAGE"})(l=t.TaxonomyActionSurface_ActionSurface||(t.TaxonomyActionSurface_ActionSurface={})),n.proto3.util.setEnumType(l,"hql_events.TaxonomyActionSurface.ActionSurface",[{no:0,name:"UNSPECIFIED"},{no:1,name:"SIGN_IN_PAGE"},{no:2,name:"SIGN_IN_DBX_PAGE"},{no:3,name:"SIGN_IN_GOOGLE_MODAL"},{no:4,name:"INTERSTITIAL_GOOGLE_ACCOUNTS_PAGE"},{no:5,name:"SIGNUP_PAGE"},{no:6,name:"START_MENU"},{no:7,name:"START_DOCK"},{no:8,name:"TRAY_ICON"},{no:9,name:"NOTIFICATIONS_TAB"},{no:10,name:"RECENT_TAB"},{no:11,name:"FOR_YOU_TAB"},{no:12,name:"RECENT_YOU_SUB_TAB"},{no:13,name:"RECENT_TEAM_SUB_TAB"},{no:14,name:"CALENDAR_EVENT_MENU"},{no:15,name:"SHARING_MODAL"},{no:16,name:"TOP_BAR"},{no:17,name:"FOR_YOU_TABS"},{no:18,name:"SEARCH_RESULTS"},{no:19,name:"TOP_BAR_CREATE_MENU"},{no:20,name:"TRAY_MENU"},{no:21,name:"CENTER_PANE"},{no:22,name:"PLUS_CANCEL_SURVEY_MODAL"},{no:23,name:"PROFILE_MENU"},{no:24,name:"BROWSER_WINDOW"},{no:25,name:"RIGHT_PANE"},{no:26,name:"CENTER_PANE_PLAN_TAB"},{no:27,name:"CENTER_PANE_GENERAL_TAB"},{no:28,name:"CENTER_PANE_BILLING_TAB"},{no:29,name:"CENTER_PANE_PERSON"},{no:30,name:"CENTER_PANE_STARRED"},{no:31,name:"CENTER_PANE_CREATE_CONTEXT_MENU"},{no:32,name:"CENTER_PANE_VIEW_CONTEXT_MENU"},{no:33,name:"LEFT_PANE"},{no:34,name:"RIGHT_PANE_SHARE_CONTEXT_MENU"},{no:35,name:"APP_ICON"},{no:36,name:"RIGHT_PANE_PERSON"},{no:37,name:"RIGHT_PANE_CONTEXT_MENU"},{no:38,name:"RIGHT_PANE_OPEN_CONTEXT_MENU"},{no:39,name:"APPLICATION_MENU"},{no:40,name:"CAROUSEL_ONBOARDING_WINDOW"},{no:41,name:"CONNECT_APP_WINDOW"},{no:42,name:"ONBOARDING_TOOLTIP"},{no:43,name:"RIGHT_PANE_PIN_CONTEXT_MENU"},{no:44,name:"SPACE_EXAMPLE_MODAL"},{no:45,name:"TEAM_CANCEL_SURVEY_MODAL"},{no:46,name:"MOVE_MODAL"},{no:47,name:"ACCOUNT_CONTEXT_MENU"},{no:48,name:"BOTTOM_BAR"},{no:49,name:"SYNC_QUEUE"},{no:50,name:"PLAN_CHANGE_MODAL"},{no:51,name:"MAGIC_PAIRING_WINDOW"},{no:52,name:"CONTEXT_MENU"},{no:53,name:"SNACKBAR"},{no:54,name:"FILE_SYSTEM_WARNING"},{no:55,name:"SCREENSHOT"},{no:56,name:"SCREEN_RECORDING"},{no:57,name:"REEL_HOME_PAGE"},{no:58,name:"REEL_VIDEO_PAGE"},{no:59,name:"COMMERCE_HOME_PAGE"},{no:60,name:"COMMERCE_CREATE_LISTING_PAGE"},{no:61,name:"COMMERCE_SELLER_LISTING_PAGE"},{no:62,name:"COMMERCE_BUYER_PAGE"},{no:63,name:"COMMERCE_STRIPE_ONBOARDING_PAGE"},{no:64,name:"ESSENTIAL_SETUP_PAGE"}])})),define("metaserver/static/js/hql/index",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logEvent=void 0,t.logEvent=function(e,t={}){}})),define("metaserver/static/js/google/protobuf/descriptor",["require","exports","tslib","protobufjs/minimal"],(function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.google=void 0;const r=(o=n.__importStar(o)).Reader,i=o.Writer,a=o.util,s=o.roots.default||(o.roots.default={});var l,c;t.default=s,t.google=s.google=((l=s.google||{}).protobuf=((c=l.protobuf||{}).FileDescriptorSet=(function(e){function e(e){if(this.file=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.file=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.file&&e.file.length)for(let n=0;n<e.file.length;++n)s.google.protobuf.FileDescriptorProto.encode(e.file[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.FileDescriptorSet;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:o.file&&o.file.length||(o.file=[]),o.file.push(s.google.protobuf.FileDescriptorProto.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.FileDescriptorSet"},e})(c.FileDescriptorSet||{}),c.FileDescriptorProto=(function(e){function e(e){if(this.dependency=[],this.publicDependency=[],this.weakDependency=[],this.messageType=[],this.enumType=[],this.service=[],this.extension=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.package="",e.prototype.dependency=a.emptyArray,e.prototype.publicDependency=a.emptyArray,e.prototype.weakDependency=a.emptyArray,e.prototype.messageType=a.emptyArray,e.prototype.enumType=a.emptyArray,e.prototype.service=a.emptyArray,e.prototype.extension=a.emptyArray,e.prototype.options=null,e.prototype.sourceCodeInfo=null,e.prototype.syntax="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.package&&Object.hasOwnProperty.call(e,"package")&&t.uint32(18).string(e.package),null!=e.dependency&&e.dependency.length)for(let n=0;n<e.dependency.length;++n)t.uint32(26).string(e.dependency[n]);if(null!=e.messageType&&e.messageType.length)for(let n=0;n<e.messageType.length;++n)s.google.protobuf.DescriptorProto.encode(e.messageType[n],t.uint32(34).fork()).ldelim();if(null!=e.enumType&&e.enumType.length)for(let n=0;n<e.enumType.length;++n)s.google.protobuf.EnumDescriptorProto.encode(e.enumType[n],t.uint32(42).fork()).ldelim();if(null!=e.service&&e.service.length)for(let n=0;n<e.service.length;++n)s.google.protobuf.ServiceDescriptorProto.encode(e.service[n],t.uint32(50).fork()).ldelim();if(null!=e.extension&&e.extension.length)for(let n=0;n<e.extension.length;++n)s.google.protobuf.FieldDescriptorProto.encode(e.extension[n],t.uint32(58).fork()).ldelim();if(null!=e.options&&Object.hasOwnProperty.call(e,"options")&&s.google.protobuf.FileOptions.encode(e.options,t.uint32(66).fork()).ldelim(),null!=e.sourceCodeInfo&&Object.hasOwnProperty.call(e,"sourceCodeInfo")&&s.google.protobuf.SourceCodeInfo.encode(e.sourceCodeInfo,t.uint32(74).fork()).ldelim(),null!=e.publicDependency&&e.publicDependency.length)for(let n=0;n<e.publicDependency.length;++n)t.uint32(80).int32(e.publicDependency[n]);if(null!=e.weakDependency&&e.weakDependency.length)for(let n=0;n<e.weakDependency.length;++n)t.uint32(88).int32(e.weakDependency[n]);return null!=e.syntax&&Object.hasOwnProperty.call(e,"syntax")&&t.uint32(98).string(e.syntax),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.FileDescriptorProto;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:o.name=e.string();break;case 2:o.package=e.string();break;case 3:o.dependency&&o.dependency.length||(o.dependency=[]),o.dependency.push(e.string());break;case 10:if(o.publicDependency&&o.publicDependency.length||(o.publicDependency=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)o.publicDependency.push(e.int32())}else o.publicDependency.push(e.int32());break;case 11:if(o.weakDependency&&o.weakDependency.length||(o.weakDependency=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)o.weakDependency.push(e.int32())}else o.weakDependency.push(e.int32());break;case 4:o.messageType&&o.messageType.length||(o.messageType=[]),o.messageType.push(s.google.protobuf.DescriptorProto.decode(e,e.uint32()));break;case 5:o.enumType&&o.enumType.length||(o.enumType=[]),o.enumType.push(s.google.protobuf.EnumDescriptorProto.decode(e,e.uint32()));break;case 6:o.service&&o.service.length||(o.service=[]),o.service.push(s.google.protobuf.ServiceDescriptorProto.decode(e,e.uint32()));break;case 7:o.extension&&o.extension.length||(o.extension=[]),o.extension.push(s.google.protobuf.FieldDescriptorProto.decode(e,e.uint32()));break;case 8:o.options=s.google.protobuf.FileOptions.decode(e,e.uint32());break;case 9:o.sourceCodeInfo=s.google.protobuf.SourceCodeInfo.decode(e,e.uint32());break;case 12:o.syntax=e.string();break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.FileDescriptorProto"},e})(c.FileDescriptorProto||{}),c.DescriptorProto=(function(e){function e(e){if(this.field=[],this.extension=[],this.nestedType=[],this.enumType=[],this.extensionRange=[],this.oneofDecl=[],this.reservedRange=[],this.reservedName=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.field=a.emptyArray,e.prototype.extension=a.emptyArray,e.prototype.nestedType=a.emptyArray,e.prototype.enumType=a.emptyArray,e.prototype.extensionRange=a.emptyArray,e.prototype.oneofDecl=a.emptyArray,e.prototype.options=null,e.prototype.reservedRange=a.emptyArray,e.prototype.reservedName=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.field&&e.field.length)for(let n=0;n<e.field.length;++n)s.google.protobuf.FieldDescriptorProto.encode(e.field[n],t.uint32(18).fork()).ldelim();if(null!=e.nestedType&&e.nestedType.length)for(let n=0;n<e.nestedType.length;++n)s.google.protobuf.DescriptorProto.encode(e.nestedType[n],t.uint32(26).fork()).ldelim();if(null!=e.enumType&&e.enumType.length)for(let n=0;n<e.enumType.length;++n)s.google.protobuf.EnumDescriptorProto.encode(e.enumType[n],t.uint32(34).fork()).ldelim();if(null!=e.extensionRange&&e.extensionRange.length)for(let n=0;n<e.extensionRange.length;++n)s.google.protobuf.DescriptorProto.ExtensionRange.encode(e.extensionRange[n],t.uint32(42).fork()).ldelim();if(null!=e.extension&&e.extension.length)for(let n=0;n<e.extension.length;++n)s.google.protobuf.FieldDescriptorProto.encode(e.extension[n],t.uint32(50).fork()).ldelim();if(null!=e.options&&Object.hasOwnProperty.call(e,"options")&&s.google.protobuf.MessageOptions.encode(e.options,t.uint32(58).fork()).ldelim(),null!=e.oneofDecl&&e.oneofDecl.length)for(let n=0;n<e.oneofDecl.length;++n)s.google.protobuf.OneofDescriptorProto.encode(e.oneofDecl[n],t.uint32(66).fork()).ldelim();if(null!=e.reservedRange&&e.reservedRange.length)for(let n=0;n<e.reservedRange.length;++n)s.google.protobuf.DescriptorProto.ReservedRange.encode(e.reservedRange[n],t.uint32(74).fork()).ldelim();if(null!=e.reservedName&&e.reservedName.length)for(let n=0;n<e.reservedName.length;++n)t.uint32(82).string(e.reservedName[n]);return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.DescriptorProto;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:o.name=e.string();break;case 2:o.field&&o.field.length||(o.field=[]),o.field.push(s.google.protobuf.FieldDescriptorProto.decode(e,e.uint32()));break;case 6:o.extension&&o.extension.length||(o.extension=[]),o.extension.push(s.google.protobuf.FieldDescriptorProto.decode(e,e.uint32()));break;case 3:o.nestedType&&o.nestedType.length||(o.nestedType=[]),o.nestedType.push(s.google.protobuf.DescriptorProto.decode(e,e.uint32()));break;case 4:o.enumType&&o.enumType.length||(o.enumType=[]),o.enumType.push(s.google.protobuf.EnumDescriptorProto.decode(e,e.uint32()));break;case 5:o.extensionRange&&o.extensionRange.length||(o.extensionRange=[]),o.extensionRange.push(s.google.protobuf.DescriptorProto.ExtensionRange.decode(e,e.uint32()));break;case 8:o.oneofDecl&&o.oneofDecl.length||(o.oneofDecl=[]),o.oneofDecl.push(s.google.protobuf.OneofDescriptorProto.decode(e,e.uint32()));break;case 7:o.options=s.google.protobuf.MessageOptions.decode(e,e.uint32());break;case 9:o.reservedRange&&o.reservedRange.length||(o.reservedRange=[]),o.reservedRange.push(s.google.protobuf.DescriptorProto.ReservedRange.decode(e,e.uint32()));break;case 10:o.reservedName&&o.reservedName.length||(o.reservedName=[]),o.reservedName.push(e.string());break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.DescriptorProto"},e.ExtensionRange=(function(e){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.start=0,e.prototype.end=0,e.prototype.options=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.start&&Object.hasOwnProperty.call(e,"start")&&t.uint32(8).int32(e.start),null!=e.end&&Object.hasOwnProperty.call(e,"end")&&t.uint32(16).int32(e.end),null!=e.options&&Object.hasOwnProperty.call(e,"options")&&s.google.protobuf.ExtensionRangeOptions.encode(e.options,t.uint32(26).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.DescriptorProto.ExtensionRange;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:o.start=e.int32();break;case 2:o.end=e.int32();break;case 3:o.options=s.google.protobuf.ExtensionRangeOptions.decode(e,e.uint32());break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.DescriptorProto.ExtensionRange"},e})(e.ExtensionRange||{}),e.ReservedRange=(function(e){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.start=0,e.prototype.end=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.start&&Object.hasOwnProperty.call(e,"start")&&t.uint32(8).int32(e.start),null!=e.end&&Object.hasOwnProperty.call(e,"end")&&t.uint32(16).int32(e.end),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.DescriptorProto.ReservedRange;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:o.start=e.int32();break;case 2:o.end=e.int32();break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.DescriptorProto.ReservedRange"},e})(e.ReservedRange||{}),e})(c.DescriptorProto||{}),c.ExtensionRangeOptions=(function(e){function e(e){if(this.uninterpretedOption=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.uninterpretedOption=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.uninterpretedOption&&e.uninterpretedOption.length)for(let n=0;n<e.uninterpretedOption.length;++n)s.google.protobuf.UninterpretedOption.encode(e.uninterpretedOption[n],t.uint32(7994).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.ExtensionRangeOptions;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 999:o.uninterpretedOption&&o.uninterpretedOption.length||(o.uninterpretedOption=[]),o.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.ExtensionRangeOptions"},e})(c.ExtensionRangeOptions||{}),c.FieldDescriptorProto=(function(e){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.number=0,e.prototype.label=1,e.prototype.type=1,e.prototype.typeName="",e.prototype.extendee="",e.prototype.defaultValue="",e.prototype.oneofIndex=0,e.prototype.jsonName="",e.prototype.options=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.extendee&&Object.hasOwnProperty.call(e,"extendee")&&t.uint32(18).string(e.extendee),null!=e.number&&Object.hasOwnProperty.call(e,"number")&&t.uint32(24).int32(e.number),null!=e.label&&Object.hasOwnProperty.call(e,"label")&&t.uint32(32).int32(e.label),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(40).int32(e.type),null!=e.typeName&&Object.hasOwnProperty.call(e,"typeName")&&t.uint32(50).string(e.typeName),null!=e.defaultValue&&Object.hasOwnProperty.call(e,"defaultValue")&&t.uint32(58).string(e.defaultValue),null!=e.options&&Object.hasOwnProperty.call(e,"options")&&s.google.protobuf.FieldOptions.encode(e.options,t.uint32(66).fork()).ldelim(),null!=e.oneofIndex&&Object.hasOwnProperty.call(e,"oneofIndex")&&t.uint32(72).int32(e.oneofIndex),null!=e.jsonName&&Object.hasOwnProperty.call(e,"jsonName")&&t.uint32(82).string(e.jsonName),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.FieldDescriptorProto;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:o.name=e.string();break;case 3:o.number=e.int32();break;case 4:o.label=e.int32();break;case 5:o.type=e.int32();break;case 6:o.typeName=e.string();break;case 2:o.extendee=e.string();break;case 7:o.defaultValue=e.string();break;case 9:o.oneofIndex=e.int32();break;case 10:o.jsonName=e.string();break;case 8:o.options=s.google.protobuf.FieldOptions.decode(e,e.uint32());break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.FieldDescriptorProto"},e.Type=(function(){const e={},t=Object.create(e);return t[e[1]="TYPE_DOUBLE"]=1,t[e[2]="TYPE_FLOAT"]=2,t[e[3]="TYPE_INT64"]=3,t[e[4]="TYPE_UINT64"]=4,t[e[5]="TYPE_INT32"]=5,t[e[6]="TYPE_FIXED64"]=6,t[e[7]="TYPE_FIXED32"]=7,t[e[8]="TYPE_BOOL"]=8,t[e[9]="TYPE_STRING"]=9,t[e[10]="TYPE_GROUP"]=10,t[e[11]="TYPE_MESSAGE"]=11,t[e[12]="TYPE_BYTES"]=12,t[e[13]="TYPE_UINT32"]=13,t[e[14]="TYPE_ENUM"]=14,t[e[15]="TYPE_SFIXED32"]=15,t[e[16]="TYPE_SFIXED64"]=16,t[e[17]="TYPE_SINT32"]=17,t[e[18]="TYPE_SINT64"]=18,t})(),e.Label=(function(){const e={},t=Object.create(e);return t[e[1]="LABEL_OPTIONAL"]=1,t[e[2]="LABEL_REQUIRED"]=2,t[e[3]="LABEL_REPEATED"]=3,t})(),e})(c.FieldDescriptorProto||{}),c.OneofDescriptorProto=(function(e){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.options=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.options&&Object.hasOwnProperty.call(e,"options")&&s.google.protobuf.OneofOptions.encode(e.options,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.OneofDescriptorProto;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:o.name=e.string();break;case 2:o.options=s.google.protobuf.OneofOptions.decode(e,e.uint32());break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.OneofDescriptorProto"},e})(c.OneofDescriptorProto||{}),c.EnumDescriptorProto=(function(e){function e(e){if(this.value=[],this.reservedRange=[],this.reservedName=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.value=a.emptyArray,e.prototype.options=null,e.prototype.reservedRange=a.emptyArray,e.prototype.reservedName=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.value&&e.value.length)for(let n=0;n<e.value.length;++n)s.google.protobuf.EnumValueDescriptorProto.encode(e.value[n],t.uint32(18).fork()).ldelim();if(null!=e.options&&Object.hasOwnProperty.call(e,"options")&&s.google.protobuf.EnumOptions.encode(e.options,t.uint32(26).fork()).ldelim(),null!=e.reservedRange&&e.reservedRange.length)for(let n=0;n<e.reservedRange.length;++n)s.google.protobuf.EnumDescriptorProto.EnumReservedRange.encode(e.reservedRange[n],t.uint32(34).fork()).ldelim();if(null!=e.reservedName&&e.reservedName.length)for(let n=0;n<e.reservedName.length;++n)t.uint32(42).string(e.reservedName[n]);return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.EnumDescriptorProto;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:o.name=e.string();break;case 2:o.value&&o.value.length||(o.value=[]),o.value.push(s.google.protobuf.EnumValueDescriptorProto.decode(e,e.uint32()));break;case 3:o.options=s.google.protobuf.EnumOptions.decode(e,e.uint32());break;case 4:o.reservedRange&&o.reservedRange.length||(o.reservedRange=[]),o.reservedRange.push(s.google.protobuf.EnumDescriptorProto.EnumReservedRange.decode(e,e.uint32()));break;case 5:o.reservedName&&o.reservedName.length||(o.reservedName=[]),o.reservedName.push(e.string());break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.EnumDescriptorProto"},e.EnumReservedRange=(function(e){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.start=0,e.prototype.end=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.start&&Object.hasOwnProperty.call(e,"start")&&t.uint32(8).int32(e.start),null!=e.end&&Object.hasOwnProperty.call(e,"end")&&t.uint32(16).int32(e.end),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.EnumDescriptorProto.EnumReservedRange;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:o.start=e.int32();break;case 2:o.end=e.int32();break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.EnumDescriptorProto.EnumReservedRange"},e})(e.EnumReservedRange||{}),e})(c.EnumDescriptorProto||{}),c.EnumValueDescriptorProto=(function(e){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.number=0,e.prototype.options=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.number&&Object.hasOwnProperty.call(e,"number")&&t.uint32(16).int32(e.number),null!=e.options&&Object.hasOwnProperty.call(e,"options")&&s.google.protobuf.EnumValueOptions.encode(e.options,t.uint32(26).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.EnumValueDescriptorProto;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:o.name=e.string();break;case 2:o.number=e.int32();break;case 3:o.options=s.google.protobuf.EnumValueOptions.decode(e,e.uint32());break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.EnumValueDescriptorProto"},e})(c.EnumValueDescriptorProto||{}),c.ServiceDescriptorProto=(function(e){function e(e){if(this.method=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.method=a.emptyArray,e.prototype.options=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.method&&e.method.length)for(let n=0;n<e.method.length;++n)s.google.protobuf.MethodDescriptorProto.encode(e.method[n],t.uint32(18).fork()).ldelim();return null!=e.options&&Object.hasOwnProperty.call(e,"options")&&s.google.protobuf.ServiceOptions.encode(e.options,t.uint32(26).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.ServiceDescriptorProto;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:o.name=e.string();break;case 2:o.method&&o.method.length||(o.method=[]),o.method.push(s.google.protobuf.MethodDescriptorProto.decode(e,e.uint32()));break;case 3:o.options=s.google.protobuf.ServiceOptions.decode(e,e.uint32());break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.ServiceDescriptorProto"},e})(c.ServiceDescriptorProto||{}),c.MethodDescriptorProto=(function(e){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.inputType="",e.prototype.outputType="",e.prototype.options=null,e.prototype.clientStreaming=!1,e.prototype.serverStreaming=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.inputType&&Object.hasOwnProperty.call(e,"inputType")&&t.uint32(18).string(e.inputType),null!=e.outputType&&Object.hasOwnProperty.call(e,"outputType")&&t.uint32(26).string(e.outputType),null!=e.options&&Object.hasOwnProperty.call(e,"options")&&s.google.protobuf.MethodOptions.encode(e.options,t.uint32(34).fork()).ldelim(),null!=e.clientStreaming&&Object.hasOwnProperty.call(e,"clientStreaming")&&t.uint32(40).bool(e.clientStreaming),null!=e.serverStreaming&&Object.hasOwnProperty.call(e,"serverStreaming")&&t.uint32(48).bool(e.serverStreaming),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.MethodDescriptorProto;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:o.name=e.string();break;case 2:o.inputType=e.string();break;case 3:o.outputType=e.string();break;case 4:o.options=s.google.protobuf.MethodOptions.decode(e,e.uint32());break;case 5:o.clientStreaming=e.bool();break;case 6:o.serverStreaming=e.bool();break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.MethodDescriptorProto"},e})(c.MethodDescriptorProto||{}),c.FileOptions=(function(e){function e(e){if(this.uninterpretedOption=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.javaPackage="",e.prototype.javaOuterClassname="",e.prototype.javaMultipleFiles=!1,e.prototype.javaGenerateEqualsAndHash=!1,e.prototype.javaStringCheckUtf8=!1,e.prototype.optimizeFor=1,e.prototype.goPackage="",e.prototype.ccGenericServices=!1,e.prototype.javaGenericServices=!1,e.prototype.pyGenericServices=!1,e.prototype.phpGenericServices=!1,e.prototype.deprecated=!1,e.prototype.ccEnableArenas=!1,e.prototype.objcClassPrefix="",e.prototype.csharpNamespace="",e.prototype.swiftPrefix="",e.prototype.phpClassPrefix="",e.prototype.phpNamespace="",e.prototype.phpMetadataNamespace="",e.prototype.rubyPackage="",e.prototype.uninterpretedOption=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.javaPackage&&Object.hasOwnProperty.call(e,"javaPackage")&&t.uint32(10).string(e.javaPackage),null!=e.javaOuterClassname&&Object.hasOwnProperty.call(e,"javaOuterClassname")&&t.uint32(66).string(e.javaOuterClassname),null!=e.optimizeFor&&Object.hasOwnProperty.call(e,"optimizeFor")&&t.uint32(72).int32(e.optimizeFor),null!=e.javaMultipleFiles&&Object.hasOwnProperty.call(e,"javaMultipleFiles")&&t.uint32(80).bool(e.javaMultipleFiles),null!=e.goPackage&&Object.hasOwnProperty.call(e,"goPackage")&&t.uint32(90).string(e.goPackage),null!=e.ccGenericServices&&Object.hasOwnProperty.call(e,"ccGenericServices")&&t.uint32(128).bool(e.ccGenericServices),null!=e.javaGenericServices&&Object.hasOwnProperty.call(e,"javaGenericServices")&&t.uint32(136).bool(e.javaGenericServices),null!=e.pyGenericServices&&Object.hasOwnProperty.call(e,"pyGenericServices")&&t.uint32(144).bool(e.pyGenericServices),null!=e.javaGenerateEqualsAndHash&&Object.hasOwnProperty.call(e,"javaGenerateEqualsAndHash")&&t.uint32(160).bool(e.javaGenerateEqualsAndHash),null!=e.deprecated&&Object.hasOwnProperty.call(e,"deprecated")&&t.uint32(184).bool(e.deprecated),null!=e.javaStringCheckUtf8&&Object.hasOwnProperty.call(e,"javaStringCheckUtf8")&&t.uint32(216).bool(e.javaStringCheckUtf8),null!=e.ccEnableArenas&&Object.hasOwnProperty.call(e,"ccEnableArenas")&&t.uint32(248).bool(e.ccEnableArenas),null!=e.objcClassPrefix&&Object.hasOwnProperty.call(e,"objcClassPrefix")&&t.uint32(290).string(e.objcClassPrefix),null!=e.csharpNamespace&&Object.hasOwnProperty.call(e,"csharpNamespace")&&t.uint32(298).string(e.csharpNamespace),null!=e.swiftPrefix&&Object.hasOwnProperty.call(e,"swiftPrefix")&&t.uint32(314).string(e.swiftPrefix),null!=e.phpClassPrefix&&Object.hasOwnProperty.call(e,"phpClassPrefix")&&t.uint32(322).string(e.phpClassPrefix),null!=e.phpNamespace&&Object.hasOwnProperty.call(e,"phpNamespace")&&t.uint32(330).string(e.phpNamespace),null!=e.phpGenericServices&&Object.hasOwnProperty.call(e,"phpGenericServices")&&t.uint32(336).bool(e.phpGenericServices),null!=e.phpMetadataNamespace&&Object.hasOwnProperty.call(e,"phpMetadataNamespace")&&t.uint32(354).string(e.phpMetadataNamespace),null!=e.rubyPackage&&Object.hasOwnProperty.call(e,"rubyPackage")&&t.uint32(362).string(e.rubyPackage),null!=e.uninterpretedOption&&e.uninterpretedOption.length)for(let n=0;n<e.uninterpretedOption.length;++n)s.google.protobuf.UninterpretedOption.encode(e.uninterpretedOption[n],t.uint32(7994).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.FileOptions;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:o.javaPackage=e.string();break;case 8:o.javaOuterClassname=e.string();break;case 10:o.javaMultipleFiles=e.bool();break;case 20:o.javaGenerateEqualsAndHash=e.bool();break;case 27:o.javaStringCheckUtf8=e.bool();break;case 9:o.optimizeFor=e.int32();break;case 11:o.goPackage=e.string();break;case 16:o.ccGenericServices=e.bool();break;case 17:o.javaGenericServices=e.bool();break;case 18:o.pyGenericServices=e.bool();break;case 42:o.phpGenericServices=e.bool();break;case 23:o.deprecated=e.bool();break;case 31:o.ccEnableArenas=e.bool();break;case 36:o.objcClassPrefix=e.string();break;case 37:o.csharpNamespace=e.string();break;case 39:o.swiftPrefix=e.string();break;case 40:o.phpClassPrefix=e.string();break;case 41:o.phpNamespace=e.string();break;case 44:o.phpMetadataNamespace=e.string();break;case 45:o.rubyPackage=e.string();break;case 999:o.uninterpretedOption&&o.uninterpretedOption.length||(o.uninterpretedOption=[]),o.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.FileOptions"},e.OptimizeMode=(function(){const e={},t=Object.create(e);return t[e[1]="SPEED"]=1,t[e[2]="CODE_SIZE"]=2,t[e[3]="LITE_RUNTIME"]=3,t})(),e})(c.FileOptions||{}),c.MessageOptions=(function(e){function e(e){if(this.uninterpretedOption=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.messageSetWireFormat=!1,e.prototype.noStandardDescriptorAccessor=!1,e.prototype.deprecated=!1,e.prototype.mapEntry=!1,e.prototype.uninterpretedOption=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.messageSetWireFormat&&Object.hasOwnProperty.call(e,"messageSetWireFormat")&&t.uint32(8).bool(e.messageSetWireFormat),null!=e.noStandardDescriptorAccessor&&Object.hasOwnProperty.call(e,"noStandardDescriptorAccessor")&&t.uint32(16).bool(e.noStandardDescriptorAccessor),null!=e.deprecated&&Object.hasOwnProperty.call(e,"deprecated")&&t.uint32(24).bool(e.deprecated),null!=e.mapEntry&&Object.hasOwnProperty.call(e,"mapEntry")&&t.uint32(56).bool(e.mapEntry),null!=e.uninterpretedOption&&e.uninterpretedOption.length)for(let n=0;n<e.uninterpretedOption.length;++n)s.google.protobuf.UninterpretedOption.encode(e.uninterpretedOption[n],t.uint32(7994).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.MessageOptions;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:o.messageSetWireFormat=e.bool();break;case 2:o.noStandardDescriptorAccessor=e.bool();break;case 3:o.deprecated=e.bool();break;case 7:o.mapEntry=e.bool();break;case 999:o.uninterpretedOption&&o.uninterpretedOption.length||(o.uninterpretedOption=[]),o.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.MessageOptions"},e})(c.MessageOptions||{}),c.FieldOptions=(function(e){function e(e){if(this.uninterpretedOption=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.ctype=0,e.prototype.packed=!1,e.prototype.jstype=0,e.prototype.lazy=!1,e.prototype.deprecated=!1,e.prototype.weak=!1,e.prototype.uninterpretedOption=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.ctype&&Object.hasOwnProperty.call(e,"ctype")&&t.uint32(8).int32(e.ctype),null!=e.packed&&Object.hasOwnProperty.call(e,"packed")&&t.uint32(16).bool(e.packed),null!=e.deprecated&&Object.hasOwnProperty.call(e,"deprecated")&&t.uint32(24).bool(e.deprecated),null!=e.lazy&&Object.hasOwnProperty.call(e,"lazy")&&t.uint32(40).bool(e.lazy),null!=e.jstype&&Object.hasOwnProperty.call(e,"jstype")&&t.uint32(48).int32(e.jstype),null!=e.weak&&Object.hasOwnProperty.call(e,"weak")&&t.uint32(80).bool(e.weak),null!=e.uninterpretedOption&&e.uninterpretedOption.length)for(let n=0;n<e.uninterpretedOption.length;++n)s.google.protobuf.UninterpretedOption.encode(e.uninterpretedOption[n],t.uint32(7994).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.FieldOptions;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:o.ctype=e.int32();break;case 2:o.packed=e.bool();break;case 6:o.jstype=e.int32();break;case 5:o.lazy=e.bool();break;case 3:o.deprecated=e.bool();break;case 10:o.weak=e.bool();break;case 999:o.uninterpretedOption&&o.uninterpretedOption.length||(o.uninterpretedOption=[]),o.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.FieldOptions"},e.CType=(function(){const e={},t=Object.create(e);return t[e[0]="STRING"]=0,t[e[1]="CORD"]=1,t[e[2]="STRING_PIECE"]=2,t})(),e.JSType=(function(){const e={},t=Object.create(e);return t[e[0]="JS_NORMAL"]=0,t[e[1]="JS_STRING"]=1,t[e[2]="JS_NUMBER"]=2,t})(),e})(c.FieldOptions||{}),c.OneofOptions=(function(e){function e(e){if(this.uninterpretedOption=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.uninterpretedOption=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.uninterpretedOption&&e.uninterpretedOption.length)for(let n=0;n<e.uninterpretedOption.length;++n)s.google.protobuf.UninterpretedOption.encode(e.uninterpretedOption[n],t.uint32(7994).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.OneofOptions;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 999:o.uninterpretedOption&&o.uninterpretedOption.length||(o.uninterpretedOption=[]),o.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.OneofOptions"},e})(c.OneofOptions||{}),c.EnumOptions=(function(e){function e(e){if(this.uninterpretedOption=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.allowAlias=!1,e.prototype.deprecated=!1,e.prototype.uninterpretedOption=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.allowAlias&&Object.hasOwnProperty.call(e,"allowAlias")&&t.uint32(16).bool(e.allowAlias),null!=e.deprecated&&Object.hasOwnProperty.call(e,"deprecated")&&t.uint32(24).bool(e.deprecated),null!=e.uninterpretedOption&&e.uninterpretedOption.length)for(let n=0;n<e.uninterpretedOption.length;++n)s.google.protobuf.UninterpretedOption.encode(e.uninterpretedOption[n],t.uint32(7994).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.EnumOptions;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 2:o.allowAlias=e.bool();break;case 3:o.deprecated=e.bool();break;case 999:o.uninterpretedOption&&o.uninterpretedOption.length||(o.uninterpretedOption=[]),o.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.EnumOptions"},e})(c.EnumOptions||{}),c.EnumValueOptions=(function(e){function e(e){if(this.uninterpretedOption=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.deprecated=!1,e.prototype.uninterpretedOption=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.deprecated&&Object.hasOwnProperty.call(e,"deprecated")&&t.uint32(8).bool(e.deprecated),null!=e.uninterpretedOption&&e.uninterpretedOption.length)for(let n=0;n<e.uninterpretedOption.length;++n)s.google.protobuf.UninterpretedOption.encode(e.uninterpretedOption[n],t.uint32(7994).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.EnumValueOptions;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:o.deprecated=e.bool();break;case 999:o.uninterpretedOption&&o.uninterpretedOption.length||(o.uninterpretedOption=[]),o.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.EnumValueOptions"},e})(c.EnumValueOptions||{}),c.ServiceOptions=(function(e){function e(e){if(this.uninterpretedOption=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.deprecated=!1,e.prototype.uninterpretedOption=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.deprecated&&Object.hasOwnProperty.call(e,"deprecated")&&t.uint32(264).bool(e.deprecated),null!=e.uninterpretedOption&&e.uninterpretedOption.length)for(let n=0;n<e.uninterpretedOption.length;++n)s.google.protobuf.UninterpretedOption.encode(e.uninterpretedOption[n],t.uint32(7994).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.ServiceOptions;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 33:o.deprecated=e.bool();break;case 999:o.uninterpretedOption&&o.uninterpretedOption.length||(o.uninterpretedOption=[]),o.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.ServiceOptions"},e})(c.ServiceOptions||{}),c.MethodOptions=(function(e){function e(e){if(this.uninterpretedOption=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.deprecated=!1,e.prototype.idempotencyLevel=0,e.prototype.uninterpretedOption=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.deprecated&&Object.hasOwnProperty.call(e,"deprecated")&&t.uint32(264).bool(e.deprecated),null!=e.idempotencyLevel&&Object.hasOwnProperty.call(e,"idempotencyLevel")&&t.uint32(272).int32(e.idempotencyLevel),null!=e.uninterpretedOption&&e.uninterpretedOption.length)for(let n=0;n<e.uninterpretedOption.length;++n)s.google.protobuf.UninterpretedOption.encode(e.uninterpretedOption[n],t.uint32(7994).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.MethodOptions;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 33:o.deprecated=e.bool();break;case 34:o.idempotencyLevel=e.int32();break;case 999:o.uninterpretedOption&&o.uninterpretedOption.length||(o.uninterpretedOption=[]),o.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.MethodOptions"},e.IdempotencyLevel=(function(){const e={},t=Object.create(e);return t[e[0]="IDEMPOTENCY_UNKNOWN"]=0,t[e[1]="NO_SIDE_EFFECTS"]=1,t[e[2]="IDEMPOTENT"]=2,t})(),e})(c.MethodOptions||{}),c.UninterpretedOption=(function(e){function e(e){if(this.name=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name=a.emptyArray,e.prototype.identifierValue="",e.prototype.positiveIntValue=0,e.prototype.negativeIntValue=0,e.prototype.doubleValue=0,e.prototype.stringValue=a.newBuffer([]),e.prototype.aggregateValue="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.name&&e.name.length)for(let n=0;n<e.name.length;++n)s.google.protobuf.UninterpretedOption.NamePart.encode(e.name[n],t.uint32(18).fork()).ldelim();return null!=e.identifierValue&&Object.hasOwnProperty.call(e,"identifierValue")&&t.uint32(26).string(e.identifierValue),null!=e.positiveIntValue&&Object.hasOwnProperty.call(e,"positiveIntValue")&&t.uint32(32).uint64(e.positiveIntValue),null!=e.negativeIntValue&&Object.hasOwnProperty.call(e,"negativeIntValue")&&t.uint32(40).int64(e.negativeIntValue),null!=e.doubleValue&&Object.hasOwnProperty.call(e,"doubleValue")&&t.uint32(49).double(e.doubleValue),null!=e.stringValue&&Object.hasOwnProperty.call(e,"stringValue")&&t.uint32(58).bytes(e.stringValue),null!=e.aggregateValue&&Object.hasOwnProperty.call(e,"aggregateValue")&&t.uint32(66).string(e.aggregateValue),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.UninterpretedOption;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 2:o.name&&o.name.length||(o.name=[]),o.name.push(s.google.protobuf.UninterpretedOption.NamePart.decode(e,e.uint32()));break;case 3:o.identifierValue=e.string();break;case 4:o.positiveIntValue=e.uint64();break;case 5:o.negativeIntValue=e.int64();break;case 6:o.doubleValue=e.double();break;case 7:o.stringValue=e.bytes();break;case 8:o.aggregateValue=e.string();break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.UninterpretedOption"},e.NamePart=(function(e){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.namePart="",e.prototype.isExtension=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),t.uint32(10).string(e.namePart),t.uint32(16).bool(e.isExtension),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.UninterpretedOption.NamePart;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:o.namePart=e.string();break;case 2:o.isExtension=e.bool();break;default:e.skipType(7&t)}}if(!o.hasOwnProperty("namePart"))throw a.ProtocolError("missing required 'namePart'",{instance:o});if(!o.hasOwnProperty("isExtension"))throw a.ProtocolError("missing required 'isExtension'",{instance:o});return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.UninterpretedOption.NamePart"},e})(e.NamePart||{}),e})(c.UninterpretedOption||{}),c.SourceCodeInfo=(function(e){function e(e){if(this.location=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.location=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.location&&e.location.length)for(let n=0;n<e.location.length;++n)s.google.protobuf.SourceCodeInfo.Location.encode(e.location[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.SourceCodeInfo;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:o.location&&o.location.length||(o.location=[]),o.location.push(s.google.protobuf.SourceCodeInfo.Location.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.SourceCodeInfo"},e.Location=(function(e){function e(e){if(this.path=[],this.span=[],this.leadingDetachedComments=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.path=a.emptyArray,e.prototype.span=a.emptyArray,e.prototype.leadingComments="",e.prototype.trailingComments="",e.prototype.leadingDetachedComments=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.path&&e.path.length){t.uint32(10).fork();for(let n=0;n<e.path.length;++n)t.int32(e.path[n]);t.ldelim()}if(null!=e.span&&e.span.length){t.uint32(18).fork();for(let n=0;n<e.span.length;++n)t.int32(e.span[n]);t.ldelim()}if(null!=e.leadingComments&&Object.hasOwnProperty.call(e,"leadingComments")&&t.uint32(26).string(e.leadingComments),null!=e.trailingComments&&Object.hasOwnProperty.call(e,"trailingComments")&&t.uint32(34).string(e.trailingComments),null!=e.leadingDetachedComments&&e.leadingDetachedComments.length)for(let n=0;n<e.leadingDetachedComments.length;++n)t.uint32(50).string(e.leadingDetachedComments[n]);return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.SourceCodeInfo.Location;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:if(o.path&&o.path.length||(o.path=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)o.path.push(e.int32())}else o.path.push(e.int32());break;case 2:if(o.span&&o.span.length||(o.span=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)o.span.push(e.int32())}else o.span.push(e.int32());break;case 3:o.leadingComments=e.string();break;case 4:o.trailingComments=e.string();break;case 6:o.leadingDetachedComments&&o.leadingDetachedComments.length||(o.leadingDetachedComments=[]),o.leadingDetachedComments.push(e.string());break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.SourceCodeInfo.Location"},e})(e.Location||{}),e})(c.SourceCodeInfo||{}),c.GeneratedCodeInfo=(function(e){function e(e){if(this.annotation=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.annotation=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.annotation&&e.annotation.length)for(let n=0;n<e.annotation.length;++n)s.google.protobuf.GeneratedCodeInfo.Annotation.encode(e.annotation[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.GeneratedCodeInfo;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:o.annotation&&o.annotation.length||(o.annotation=[]),o.annotation.push(s.google.protobuf.GeneratedCodeInfo.Annotation.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.GeneratedCodeInfo"},e.Annotation=(function(e){function e(e){if(this.path=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.path=a.emptyArray,e.prototype.sourceFile="",e.prototype.begin=0,e.prototype.end=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.path&&e.path.length){t.uint32(10).fork();for(let n=0;n<e.path.length;++n)t.int32(e.path[n]);t.ldelim()}return null!=e.sourceFile&&Object.hasOwnProperty.call(e,"sourceFile")&&t.uint32(18).string(e.sourceFile),null!=e.begin&&Object.hasOwnProperty.call(e,"begin")&&t.uint32(24).int32(e.begin),null!=e.end&&Object.hasOwnProperty.call(e,"end")&&t.uint32(32).int32(e.end),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));let n=void 0===t?e.len:e.pos+t,o=new s.google.protobuf.GeneratedCodeInfo.Annotation;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:if(o.path&&o.path.length||(o.path=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)o.path.push(e.int32())}else o.path.push(e.int32());break;case 2:o.sourceFile=e.string();break;case 3:o.begin=e.int32();break;case 4:o.end=e.int32();break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.GeneratedCodeInfo.Annotation"},e})(e.Annotation||{}),e})(c.GeneratedCodeInfo||{}),c),l)})),define("metaserver/static/js/clean/analytics",["require","exports","tslib","typescript/dropbox/proto/hql_events/extensions_pb","typescript/dropbox/proto/hql_events/taxonomy_pb","typescript/dropbox/proto/hql_events/ux_analytics/ux_analytics_events_pb","@bufbuild/protobuf","metaserver/static/js/deprecated_ajax/ajax","metaserver/static/js/clean/amp_web_logger","metaserver/static/js/hql/index","metaserver/static/js/uuid/insecure_uuid","metaserver/static/js/ux_analytics/types","metaserver/static/js/clean/viewer","metaserver/static/js/core/exception","metaserver/static/js/clean/lazy_marketing_tracker"],(function(e,t,n,o,r,i,a,s,l,c,u,p,d,g,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutOfSpaceLogger=t.LowSpaceLogger=t.NqOqEventNames=t.NQOQLogger=t.WebOnboardingLogger=t.LegacySharingVortexLogger=t.ContactSearchLogger=t.WebMiscActivityLogger=t.UserActivityLogger=t.IntentLogger=t.TeamsWebActionsLogger=t.SharingExperimentsLogger=t.ShareTibEventLogger=t.SearchClientActivityLogger=t.MobileFilePreviewLogger=t.PreviewActivityLogger=t.RestorationStepsLogger=t.ProEventsLogger=t.ProEventNames=t.GrowthEventsLogger=t.UXAnalyticsLogger=t.formatUxaExtraKeysForHql=t.get_uids_for_logging=t.PROJECT_MAGNET_ORIGIN=t.SuggestInvitingSharedUsersModalEvents=void 0,o=n.__importStar(o),r=n.__importStar(r),i=n.__importStar(i),s=n.__importStar(s);const m=r.TaxonomyAppSurface_AppSurface,f=r.TaxonomyActionSurface_ActionSurface;(function(e){e.SUGGESTION_ACCEPTED="suggest_invite_modal_accepted",e.SUGGESTION_DISMISSED="suggest_invite_modal_dismissed",e.SUGGESTION_MODAL_OPENED="suggest_invite_modal_opened"})(t.SuggestInvitingSharedUsersModalEvents||(t.SuggestInvitingSharedUsersModalEvents={})),t.PROJECT_MAGNET_ORIGIN="magnet";t.get_uids_for_logging=function(e){let t;const n=d.Viewer.get_viewer();return t=e?[e]:n.get_users().map(e=>e.id),t};const E={modal_open:["modal"],modal_close:["modal"],link_click:["link_id"],link_no_session_storage:["link_id"],element_click:["element_id"],page_view:["page"]},h=e=>e.replace(/_([a-z])/g,e=>e[1].toUpperCase());function y(e){return/dropbox.com\/(scl\/fi|scl\/fo|s|sh)\//.test(e)}t.formatUxaExtraKeysForHql=e=>{const t=["requestSeq","instanceEventCount","instanceInitTs","timeOnPage","verticalOffset","left","top","linkRank","elementRank"],n=["url","org_referrer","http_referrer","previous_url","hash_fragment","origin_href","destination_url"],o={};for(const r of Object.keys(e)){let i=h(r),s=e[r];s=null===s?void 0:s,n.includes(r)&&(i+="_pii"),t.includes(i)&&(s=a.protoInt64.parse(s)),o[h(i)]=s}return o},t.UXAnalyticsLogger={log(e,n,r,a){const u=[["AMP",()=>{if(a&&a.includes(e)){const t={};if(n&&e in E){E[e].forEach(e=>{e in n&&n[e]&&(t[e]=String(n[e]))})}(0,l.getAMPWebLogger)().logEventCount("uxa_events",e,t)}}],["UXA-Backend",()=>{const t={url:"/log/ux_analytics",data:{event_type:e,extra_params:JSON.stringify(n)}};r?s.SilentBackgroundBeaconRequest(t):s.SilentBackgroundRequest(t)}],["HQL",()=>{if(!n)return;const a=(0,t.formatUxaExtraKeysForHql)(n),s={flushWithBeacon:r};switch(e){case p.LOG_EVENTS.pageView:(0,c.logEvent)(new i.UXAnalyticsShownPage({uxaCommonFields:new i.UXACommonFields(a),hqlMetadata:new o.HQLMetadata({appSurface:m.WEB,actionSurface:f.BROWSER_WINDOW})}),s);break;case p.LOG_EVENTS.linkClick:(0,c.logEvent)(new i.UXAnalyticsSelectLink(Object.assign({uxaCommonFields:new i.UXACommonFields(a),hqlMetadata:new o.HQLMetadata({appSurface:m.WEB,actionSurface:f.BROWSER_WINDOW}),timeAndLocationFields:new i.TimeAndLocationFields(a),elementPositionFields:new i.ElementPositionFields(a)},a)),s);break;case p.LOG_EVENTS.linkNoSessionStorage:(0,c.logEvent)(new i.UXAnalyticsSelectLinkNoSessionStorage({uxaCommonFields:new i.UXACommonFields(a),hqlMetadata:new o.HQLMetadata({appSurface:m.WEB,actionSurface:f.BROWSER_WINDOW}),timeAndLocationFields:new i.TimeAndLocationFields(a)}),s);break;case p.LOG_EVENTS.elementClick:(0,c.logEvent)(new i.UXAnalyticsSelectElement(Object.assign({uxaCommonFields:new i.UXACommonFields(a),hqlMetadata:new o.HQLMetadata({appSurface:m.WEB,actionSurface:f.BROWSER_WINDOW}),timeAndLocationFields:new i.TimeAndLocationFields(a),elementPositionFields:new i.ElementPositionFields(a)},a)),s);break;case p.LOG_EVENTS.finalHeartbeat:(0,c.logEvent)(new i.UXAnalyticsDismissPage({uxaCommonFields:new i.UXACommonFields(a),hqlMetadata:new o.HQLMetadata({appSurface:m.WEB,actionSurface:f.BROWSER_WINDOW}),timeAndLocationFields:new i.TimeAndLocationFields(a)}),s);break;case p.LOG_EVENTS.heartbeat:(0,c.logEvent)(new i.UXAnalyticsHeartbeatPage({uxaCommonFields:new i.UXACommonFields(a),hqlMetadata:new o.HQLMetadata({appSurface:m.WEB,actionSurface:f.BROWSER_WINDOW}),timeAndLocationFields:new i.TimeAndLocationFields(a)}),s);break;case p.LOG_EVENTS.modalOpen:(0,c.logEvent)(new i.UXAnalyticsShownModal(Object.assign({uxaCommonFields:new i.UXACommonFields(a),hqlMetadata:new o.HQLMetadata({appSurface:m.WEB,actionSurface:f.BROWSER_WINDOW}),timeAndLocationFields:new i.TimeAndLocationFields(a)},a)),s);break;case p.LOG_EVENTS.modalClose:(0,c.logEvent)(new i.UXAnalyticsDismissModal(Object.assign({uxaCommonFields:new i.UXACommonFields(a),hqlMetadata:new o.HQLMetadata({appSurface:m.WEB,actionSurface:f.BROWSER_WINDOW}),timeAndLocationFields:new i.TimeAndLocationFields(a)},a)),s);break;case p.LOG_EVENTS.scroll:(0,c.logEvent)(new i.UXAnalyticsScrollPage(Object.assign({uxaCommonFields:new i.UXACommonFields(a),hqlMetadata:new o.HQLMetadata({appSurface:m.WEB,actionSurface:f.BROWSER_WINDOW}),timeAndLocationFields:new i.TimeAndLocationFields(a)},a)),s)}}],["marketing-tracker",_.unloadMarketingTrackerLoggingQueue]];for(const[t,o]of u)try{o()}catch(o){(0,g.reportException)(Object.assign({err:o,severity:g.SEVERITY.NONCRITICAL,tags:["ux_analytics",t]},{exc_extra:{extra_params:n,event_type:e}}))}}},t.GrowthEventsLogger={log(e,t,n,o){s.SilentBackgroundRequest({url:"/log/pro_events",data:{event:e,extra:JSON.stringify(t),is_client:!!o},success:n||void 0,error:n||void 0})}},(function(e){e.BUY_TRY_PAGE_CHECKOUT="buy_try_page_checkout",e.INFO_FORM_FILLED="info_form_filled",e.PAYMENT_FORM_FILLED="payment_form_filled",e.BUY_TRY_PAGE_CHECKOUT_CRASH="buy_try_page_checkout_crash"})(t.ProEventNames||(t.ProEventNames={})),t.ProEventsLogger={log(e,t,n,o,r){s.SilentBackgroundRequest({url:"/log/pro_events",data:{event:e,extra:JSON.stringify(t),is_client:!!o,project:r},success:n||void 0,error:n||void 0})}},t.RestorationStepsLogger={generate_restore_id:e=>({type:"restore",value:`restore#${e}#${u.InsecureUUID.v4()}`}),restore_id_from_string:e=>({type:"restore",value:e}),log_step(e){const t=e.postHandler||void 0;s.SilentBackgroundRequest({url:"/log/restoration_step/step",data:{restore_id:e.restoreId.value,step:e.step,extra:JSON.stringify(e.extra)},subject_user:e.userId,success:t,error:t})},log_entry(e){const n=e.postHandler||void 0,o=e.restoreId||t.RestorationStepsLogger.generate_restore_id(e.userId);return s.SilentBackgroundRequest({url:"/log/restoration_step/entry",data:{restore_id:o.value,step:e.step,entry_point:e.entry_point,extra:JSON.stringify(e.extra)},subject_user:e.userId,success:n,error:n}),o},log_success(e){const t=e.postHandler||void 0;s.SilentBackgroundRequest({url:"/log/restoration_step/success",data:{restore_id:e.restoreId.value,step:e.step,success:e.success||"success",extra:JSON.stringify(e.extra)},subject_user:e.userId,success:t,error:t})},log_failure(e){const t=e.postHandler||void 0;s.SilentBackgroundRequest({url:"/log/restoration_step/failure",data:{restore_id:e.restoreId.value,step:e.step,failure:e.failure,extra:JSON.stringify(e.extra)},subject_user:e.userId,success:t,error:t})}},t.PreviewActivityLogger={start_times:{},start(e,n){t.PreviewActivityLogger.start_times[e]=n||Date.now()},stop(e,n){null!=t.PreviewActivityLogger.start_times[e]&&(n.total_time=Date.now()-t.PreviewActivityLogger.start_times[e],t.PreviewActivityLogger.log(e,n),delete t.PreviewActivityLogger.start_times[e])},log(e,t){s.SilentBackgroundRequest({url:"/preview_activity_log",data:{event_name:e,input_method:t.input_method,file_ext:t.file_ext,extra:t.extra}})}},t.MobileFilePreviewLogger={log(e,t,n,o,r,i){s.SilentBackgroundRequest({url:"/log/mobile_file_preview",data:{client_time:+new Date,event_name:e,file_viewer_session_id:t,file_preview_session_id:n,file_ns_id:o,file_sjid:r,extra:JSON.stringify(i)}})}},t.SearchClientActivityLogger={log(e,t,n){s.SilentBackgroundRequest({url:"/searchclientlogger",subject_user:t,data:Object.assign(Object.assign({event_name:e,typeahead_session_id:n.search_session_id},n),{extra:JSON.stringify(n.extra)})})}},t.ShareTibEventLogger={log(e,t,n,o){s.SilentBackgroundRequest({url:"/share_tib_log",data:{event:t,origin:n,extra:JSON.stringify(o)},subject_user:e})},log_unauth:(e,t,n)=>s.SilentBackgroundRequest({url:"/share_tib_log_unauth",data:{event:e,origin:t,extra:JSON.stringify(n)}}),get_shmodel_extra_for_logging(e,t){const n={};return e&&(n.tkey=e.linkKey),t&&y(t)&&(n.url=t),n},get_scl_extra_for_logging(e,t,n){const o={};return e&&(o.sckey=e.linkKey,o.rlkey=e.rlkey),t&&y(t)&&(o.scl_url=t),n&&(o.ns_id=n.toString()),o}},t.SharingExperimentsLogger={log(e,t,n={}){s.SilentBackgroundRequest({url:"/log/sharing_experiments",data:{action_type:t,action_extras:JSON.stringify(n)},subject_user:e})}},t.TeamsWebActionsLogger={LOG_CATEGORY:{PROMO_TEAMS:"promo_teams",TEAM_INFO:"team_info",UPGRADE:"upgrade_to_dfb",USAGE_INFO:"usage_info",LIMITED_TEAM_INFO_DETAILED:"limited_team_info_detailed",TEAM_AND_USER_INFO:"team_and_user_info"},log(e,n,o,r,i,a){const l=(0,t.get_uids_for_logging)(r);return s.SilentBackgroundRequest({url:"/teamswalogger",data:{event_name:e,extra:n?JSON.stringify(n):void 0,for_uids:JSON.stringify(l),log_category:a,restricted:i?"1":void 0},success:o||void 0,error:o||void 0})},log_for_category(e,n,o){t.TeamsWebActionsLogger.log(e,o,void 0,void 0,!1,n)}},t.IntentLogger={log(e,t,o,r){const i=(function(e,t=!0){let n;const o=d.Viewer.get_viewer();return e?[o.get_user_by_id(e).account_id]:(n=o.get_account_ids?o.get_account_ids(t):[],n)})(r),a=t||{},{extra:l}=a,c=n.__rest(a,["extra"]),u=Object.assign({event_name:e,extra:JSON.stringify(l)||"{}",for_acc_ids:JSON.stringify(i)},c);s.SilentBackgroundRequest({url:"/intentlogger",data:u,success:o||void 0,error:o||void 0})}},t.UserActivityLogger={start_times:{},start(e,n,o){t.UserActivityLogger.start_times[n]=o||Date.now()},stop(e,n,o,r){null!=t.UserActivityLogger.start_times[n]&&(o.total_time=Date.now()-t.UserActivityLogger.start_times[n],t.UserActivityLogger.log(e,n,o,r),delete t.UserActivityLogger.start_times[n])},log(e,n,o,r){o=o||{};const i=(0,t.get_uids_for_logging)(r);s.SilentBackgroundRequest({url:"/ualogger",data:{platform:e,event_name:n,extra:JSON.stringify(o),for_uids:JSON.stringify(i)}})}},t.WebMiscActivityLogger={log(e,n,o,r){const i=(0,t.get_uids_for_logging)(o);s.SilentBackgroundRequest({url:"/misclogger",data:{event_name:e,extra:JSON.stringify(n),for_uids:JSON.stringify(i)},success:r||void 0,error:r||void 0})}};t.ContactSearchLogger=class{constructor(e=null,t){this.context=e,this.search_mode=t,this._clear_buffers()}_clear_buffers(){this.selection_buffer=[],this.timing_buffer=[],this.total_searches=0,this.slow_searches=0,this.downloaded_contacts=null,this.downloading_time=null}add_record(e){e.deleted=!1,this.selection_buffer.push(e)}flag_record_as_removed(e){for(const t of this.selection_buffer)if(t.contact_id===e&&!t.deleted)return void(t.deleted=!0)}add_timing_record(e){this.timing_buffer.push(e)}count_search(e){this.total_searches+=1,e&&(this.slow_searches+=1)}add_downloading_stats(e){e&&(this.downloading_time=e.downloading_time,this.downloaded_contacts=e.num_contacts)}log_records(e,t,n=0){const o={events:JSON.stringify(this.selection_buffer),canceled:t};if(this.total_searches||this.timing_buffer.length){const e={context:this.context,search_mode:this.search_mode,total_searches:this.total_searches,slow_searches:this.slow_searches,downloading_time:this.downloading_time,downloaded_contacts:this.downloaded_contacts};o.total_contacts=n,o.timing_events=JSON.stringify(this.timing_buffer),o.session_summary=JSON.stringify(e)}s.SilentBackgroundRequest({url:"/contact_search_log",subject_user:e,data:o}),this._clear_buffers()}},t.LegacySharingVortexLogger={log(e){s.SilentBackgroundRequest({url:"/legacy_sharing_vortex_log",data:{event_name:e}})}},t.WebOnboardingLogger={log(e,t,n,o,r){s.SilentBackgroundRequest({url:"/log/onboarding",data:{module_name:t,event_name:n,status:o,extra:JSON.stringify(r)},subject_user:e})}},t.NQOQLogger={logViewModal:(e,n)=>{const o={modal_type:n.modal_type};t.ProEventsLogger.log(`${e}_view`,o)},logCloseModal:(e,n)=>{const o={modal_type:n.modal_type,cta_type:"close"};t.ProEventsLogger.log(`${e}_click_close`,o)},logPreviewLink:(e,n)=>{const o={modal_type:n.modal_type,cta_type:"secondary",cta_text:"preview link"};t.ProEventsLogger.log(`${e}_click_secondary_preview`,o)},logCancelModal:(e,n)=>{const o={modal_type:n.modal_type,cta_type:"secondary",cta_text:"cancel"};t.ProEventsLogger.log(`${e}_click_secondary_cancel`,o)},logAcceptModal:(e,n)=>{const o={modal_type:n.modal_type,cta_type:"primary",cta_text:n.cta_text};t.ProEventsLogger.log(`${e}_click_primary`,o)}},(function(e){e.PRO="pro",e.PLUS="plus",e.BUY_TOP="buy_top",e.BUY_BOTTOM="buy_bottom",e.BUSINESS="business",e.PRO_TRY="pro_try",e.BUY_PLUS="buy_plus",e.BUY_MOBILE="buy_mobile"})(t.NqOqEventNames||(t.NqOqEventNames={})),t.LowSpaceLogger={logView:e=>{t.ProEventsLogger.log(`low_space${e?"_sharing":""}_view`)},logCtaClick:(e,n,o={},r)=>{t.ProEventsLogger.log(`low_space${n?"_sharing":""}_cta_click_${e}`,o,r)}},t.OutOfSpaceLogger={logView:()=>{t.ProEventsLogger.log("out_of_space_view")},logCtaClick:(e,n={},o)=>{t.ProEventsLogger.log(`out_of_space_cta_click_${e}`,n,o)}}})),define("metaserver/static/js/ux_analytics/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LOG_EVENTS=void 0,t.LOG_EVENTS={heartbeat:"heartbeat",linkClick:"link_click",elementClick:"element_click",linkNoSessionStorage:"link_no_session_storage",modalClose:"modal_close",modalOpen:"modal_open",pageView:"page_view",pageFreeze:"page_freeze",pageResume:"page_resume",scroll:"scroll_event",finalHeartbeat:"final_heartbeat",spaPageView:"spa_page_view",delayedPageViewWithLateMetaTag:"delayed_page_view_with_late_meta_tag",privacyConsentIframeLoaded:"privacy_consent_iframe_loaded",privacyConsentScriptLoaded:"privacy_consent_script_loaded",privacyConsentScriptLoadError:"privacy_consent_script_load_error",marketingTrackerReadyForUxa:"marketing_tracker_ready_for_uxa",dialogOpen:"dialog_open",dialogClose:"dialog_close",documentOpen:"document_open",documentClose:"document_close",conversionDataReady:"conversionDataReady",legacy_hs_analytics_event:"legacy_hs_analytics_event"}})),define("metaserver/static/js/ux_analytics/ux_analytics",["require","exports","tslib","metaserver/static/js/ux_analytics/lazy_ux_analytics","metaserver/static/js/ux_analytics/ux_variants","metaserver/static/js/ux_analytics/types","metaserver/static/js/ux_analytics/window_history_listeners","metaserver/static/js/ux_analytics/utils","metaserver/static/js/clean/lazy_marketing_tracker","metaserver/static/js/ux_analytics/styles/devtools.module.css"],(function(e,t,n,o,r,i,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UXAnalytics=t.maybePrefixWithExpId=t.extractValidExtra=t.DEFAULT_NO_PII_VARIABLES=t.STORAGE_KEYS=t.UXStorage=t.lib=t.DOCUMENT_CUSTOM_EVENT=t.DIALOG_CUSTOM_EVENT=t.MARKETING_TRACKER_READY_EVENT=t.PRIVACY_CONSENT_CUSTOM_EVENT=t.UXA_DELAYED_PAGE_VIEW_WITH_LATE_META_TAG_EVENT=t.UXA_VIEW_UPDATE_EVENT=t.UXA_HISTORY_CHANGE_EVENT=void 0;function c(){return(new Date).getTime()}function u(){const e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}function p(e=window){return e.location.href}function d(){const e={},t=(function(e=window){return e.location.search})();if(t.length){const n=t.substring(1).replace(/&amp;/g,"&").split("&");for(const t of n){let[n,o]=t.split("=");n&&o&&(n=n.trim(),o=o.trim(),n.length&&o.length&&(e[n]=decodeURIComponent(o.replace(/\+/g," "))))}}return e}function g(e){return e&&e.hasAttribute("data-uxa-log")}function _(e){return e&&"A"===e.nodeName}function m(e){return e&&e.getAttribute("data-trackingid")}function f(e){return e&&"BODY"===e.nodeName}function E(){return Math.random().toString().slice(2)}t.UXA_HISTORY_CHANGE_EVENT="historyChange",t.UXA_VIEW_UPDATE_EVENT="viewUpdate",t.UXA_DELAYED_PAGE_VIEW_WITH_LATE_META_TAG_EVENT="delayed_page_view_with_late_meta_tag",t.PRIVACY_CONSENT_CUSTOM_EVENT="privacy_consent_custom_event",t.MARKETING_TRACKER_READY_EVENT="marketing_tracker_ready_for_uxa",t.DIALOG_CUSTOM_EVENT="dialog_custom_event",t.DOCUMENT_CUSTOM_EVENT="document_custom_event",t.lib={idGeneratingNow:c};const h=(()=>{let e=null;const t="uxa.onedoesnotsimplyusesessionstorage";try{e=window.sessionStorage,e&&(e.setItem(t,t),e.removeItem(t))}catch(t){e=null}return e})(),y=(()=>{let e=null;const t=window;return e=t.hasOwnProperty("JSON")?t.JSON:null,e})();var v;(function(e){function t(e){return`uxa.${e}`}const n=h,o=y;function r(e){return n?(n.removeItem(t(e)),null):null}e.isEnabled=function(){return!!n},e.get=function(e){if(!n||!o)return null;try{const r=n.getItem(t(e));return null===r?null:o.parse(r)}catch(e){return null}},e.set=function(e,i){if(!n||!o)return null;try{return null===i?r(e):(n.setItem(t(e),o.stringify(i)),null)}catch(e){return null}},e.remove=r,e.clear=function(e){return n?(n.clear(),null):null}})(v=t.UXStorage||(t.UXStorage={}));const O=new Set(Object.keys(i.LOG_EVENTS).map(e=>i.LOG_EVENTS[e]));t.STORAGE_KEYS={linkClick:"clicked_link",trackingParams:"tracking_params",visitId:"visit_id",previousURL:"previous_url",lastActiveTime:"last_active_time",eventLog:"event_log",eventLogTimestamp:"event_log_timestamp"};const T=/\/account|\/share|\/buy|\/pro\/try/;function S(e,t,n){const o={};for(const[r,i]of Object.entries(e))if(t.includes(r)){o["uxa_"+b(r,n)]=i}return o}function b(e,t){return t[e]?(t[e]+"_"+e).toLowerCase().replace(/[^a-z0-9$\[\].]+/g,"_"):e}t.DEFAULT_NO_PII_VARIABLES=["element_id","link_id","uxa_v","instance_event_count","instance_init_ts","event_ts","client_event_id"],t.extractValidExtra=S,t.maybePrefixWithExpId=b;class A{constructor(e,n,o=!0){var l,d,E;if(this.currentModalId=null,this.lastScrollOffset=0,this.scrollTimer=null,this.trackingParams=null,this.startHeartbeat=()=>{for(const e of[2,5,10,15,30])setTimeout(this.logOnPage.bind(this,i.LOG_EVENTS.heartbeat),1e3*e);for(const e of[1,2,4,9])setTimeout(this.logOnPage.bind(this,i.LOG_EVENTS.heartbeat),60*e*1e3)},this.delayedInit=()=>{this.saveTrackingParams(),this.setupListeners(),this.logPageView(),this.logDelayedClickEvent()},this.getListeners=()=>[[window,"scroll",this.handleScroll],[window,"pageshow",this.handlePageShow],[window,this.uxaRemoveUnloadByPathEnabled?"pagehide":"unload",this.handlePageClose],[document.body,"mousedown",this.handleMousedown],[document.body,"keydown",this.handleKeyboardEnter],[document,"modalOpened",this.trackModalShow],[document,"modalClosed",this.trackModalHide],[document,"freeze",this.handlePageFreeze.bind(this)],[document,"resume",this.handlePageResume.bind(this)],[window,t.UXA_HISTORY_CHANGE_EVENT,this.onDBHistoryChange],[document,t.UXA_VIEW_UPDATE_EVENT,e=>this.logViewUpdate(e)],[window,a.SPA_HISTORY_STATE_CHANGE,this.handleHistoryStateChange],[window,t.UXA_DELAYED_PAGE_VIEW_WITH_LATE_META_TAG_EVENT,this.handleDelayedPageViewEventWithLateMetaTags],[window,t.PRIVACY_CONSENT_CUSTOM_EVENT,this.handlePrivacyConsentCustomEvent],[window,t.MARKETING_TRACKER_READY_EVENT,this.handleMarketTrackerReadyEvent],[document,t.DIALOG_CUSTOM_EVENT,this.handleDialogCustomEvent],[document,t.DOCUMENT_CUSTOM_EVENT,this.handleDocumentCustomEvent]],this.trackScrolling=()=>{this.scrollTimer&&clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(this.onScroll,500)},this.handleScroll=(function(e,t,n={}){let o=null,r=0;return function(){const i=c();r||!1!==n.leading||(r=i);const a=t-(i.valueOf()-r.valueOf());let s=arguments;if(a<=0||a>t)o&&(clearTimeout(o),o=null),r=i,e.apply(null,s),s=null;else if(!o&&!1!==n.trailing){const t=()=>{r=!1===n.leading?0:c(),o=null,e.apply(null,s),s=null};o=setTimeout(t,a)}}})(this.trackScrolling,2e3,{leading:!0}),this.onScroll=()=>{const e=u();this.lastScrollOffset!==e&&(this.lastScrollOffset=e,this.logOnPage(i.LOG_EVENTS.scroll,{vertical_offset:e}))},this.handlePageShow=e=>{const n=(0,s.getNavigationType)();if(this.navigationType=n,this.bfcacheAttempt="back_forward"===n,this.bfcacheEligible=e.persisted&&this.bfcacheAttempt,e.persisted){this.cleanSessionStorage();const e=v.get(t.STORAGE_KEYS.previousURL);v.set(t.STORAGE_KEYS.previousURL,p()),this.previousUrl=e,this.visitId=v.get(t.STORAGE_KEYS.visitId),setTimeout(this.delayedInit,200)}},this.handlePageClose=e=>{const t={};t.vertical_offset=t.vertical_offset||u(),t.time_on_page=t.time_on_page||this.getTimeOnPage(),this.logEvent(this.createEvent(i.LOG_EVENTS.finalHeartbeat,t))},this.handleElementClick=e=>{const t=(function(e){let t=e;for(let e=0;e<6&&!g(t)&&!f(t);e++){const e=t.parentNode;if(!(e instanceof HTMLElement))break;t=e}return t})(e.target);if(!g(t))return;const n=t.getBoundingClientRect(),o=this.createEvent(i.LOG_EVENTS.elementClick,{left:Math.round(n.left),element_id:t.getAttribute("data-uxa-log"),element_rank:this.getElementRank(t),time_on_page:this.getTimeOnPage(),top:Math.round(n.top),vertical_offset:u(),tag_name:t.tagName.toLowerCase()});this.logEvent(o)},this.handleLinkClick=e=>{const t=(function(e){let t=e;for(let e=0;e<6&&(!_(t)&&!m(t))&&!f(t);e++){const e=t.parentNode;if(!(e instanceof HTMLElement))break;t=e}return t})(e.target);if(!_(t)&&!m(t))return;const n=t.getBoundingClientRect(),o=this.createEvent(i.LOG_EVENTS.linkClick,{left:Math.round(n.left),link_id:t.getAttribute("data-trackingid"),link_rank:this.getLinkRank(t),origin_href:t.getAttribute("href"),time_on_page:this.getTimeOnPage(),top:Math.round(n.top),vertical_offset:u(),tag_name:t.tagName.toLowerCase()});this.delayedLinkClickLogging&&_(t)?this.storeDelayedLinkClick(o):this.logEvent(o)},this.onDBHistoryChange=e=>{var n;n=e.detail.url,T.test(n)&&(v.set(t.STORAGE_KEYS.previousURL,p()),this.previousUrl=e.detail.previousUrl,++this.requestSeq,this.logPageView())},this.handleHistoryStateChange=e=>{const n=v.get(t.STORAGE_KEYS.previousURL);v.set(t.STORAGE_KEYS.previousURL,p()),this.previousUrl=n,++this.requestSeq,this.logSpaPageView(e.detail.eventSource)},this.handleDelayedPageViewEventWithLateMetaTags=e=>{(0,r.addConfigsFromDOM)(!0),this.logEvent(this.createEvent(i.LOG_EVENTS.delayedPageViewWithLateMetaTag))},this.handlePrivacyConsentCustomEvent=e=>{this.logEvent(this.createEvent(i.LOG_EVENTS[e.detail.eventType],e.detail.extra))},this.handleDialogCustomEvent=e=>{this.logEvent(this.createEvent(i.LOG_EVENTS[e.detail.eventType],e.detail.extra))},this.handleDocumentCustomEvent=e=>{this.logEvent(this.createEvent(i.LOG_EVENTS[e.detail.eventType],e.detail.extra))},this.handleMousedown=e=>{this.handleLinkClick(e),this.handleElementClick(e)},this.handleKeyboardEnter=e=>{13===e.keyCode&&(this.handleLinkClick(e),this.handleElementClick(e))},this.handleMarketTrackerReadyEvent=e=>{this.logEvent(this.createEvent(i.LOG_EVENTS[e.detail.eventType],e.detail.extra))},this._modalIdSanitizer=e=>{if("upsell-home-modal"===e.id){const t=Array.from(e.classList).find(e=>e.indexOf("db-modal-custom-")>-1);if(t)return t.replace("db-modal-custom-","")}return e.id},this.trackModalShow=()=>{const e=document.querySelectorAll(this.modalClass),t=Array.from(e).find(e=>"none"!==window.getComputedStyle(e).display||e.classList.contains("clean-react-modal")||e.classList.contains("uxa-modal-tracking-span"));t&&(this.currentModalId=this._modalIdSanitizer(t)||"n/a -- file bug to cgi-team",this.logModal(i.LOG_EVENTS.modalOpen,this.currentModalId))},this.trackModalHide=()=>{this.currentModalId&&(this.logModal(i.LOG_EVENTS.modalClose,this.currentModalId),this.currentModalId=null)},n.clientDomainCheckEnabled&&"PITHOS"!=n.inclusionMethod&&"dropbox.com"!=location.hostname.split(".").slice(-2).join("."))throw new Error(`UXAnalytics.log: trying to log at non-entitled site (${location.hostname})`);(0,a.installHistoryListeners)(),this.cleanSessionStorage();const h=v.get(t.STORAGE_KEYS.previousURL)||n.previousUrl;v.set(t.STORAGE_KEYS.previousURL,p()),this.instance_event_count=0,this.instance_init_ts=t.lib.idGeneratingNow(),this.requestId=n.requestId,this.orgReferrer=n.orgReferrer,this.httpReferrer=n.httpReferrer,this.previousUrl=h,this.visitId=v.get(t.STORAGE_KEYS.visitId),this.requestSeq=0,this.event_names=n.event_names,this.logger=e,this.cmsPageUuid=document.body.getAttribute("data-article-uuid"),this.bfcacheAttempt=!1,this.bfcacheEligible=!1,void 0!==n.delayed_link_click_logging?this.delayedLinkClickLogging=n.delayed_link_click_logging:this.delayedLinkClickLogging=!0,void 0!==n.modal_class?this.modalClass=n.modal_class:this.modalClass=".uxa-modal",void 0!==n.no_pii_config_variables?this.no_pii_config_variables=n.no_pii_config_variables:this.no_pii_config_variables=t.DEFAULT_NO_PII_VARIABLES,this.noPiiExtraEnabled=!!n.noPiiExtraEnabled,this.marketingTrackerIntegrationEnabled=!!n.marketingTrackerIntegrationEnabled,this.isInternalIp=!!n.isInternalIp,this.devtoolsEnabled=!!n.devtoolsEnabled,this.isUserDropboxAdmin=!!n.isUserDropboxAdmin,this.uxaRemoveUnloadByPathEnabled=!!n.uxaRemoveUnloadByPathEnabled,this.expEventsToExpIdMap=null!==(l=n.expEventsToExpIdMap)&&void 0!==l?l:{},this.expDataFieldsToExpIdMap=null!==(d=n.expDataFieldsToExpIdMap)&&void 0!==d?d:{},this.inclusionMethod=null!==(E=n.inclusionMethod)&&void 0!==E?E:"need_to_define",this.configTime=Number(n.configTime)||0,this.initTime=c(),this.startHeartbeat(),o?setTimeout(this.delayedInit,200):this.delayedInit()}static initialize(e,t,n=null,o=!0){if(null===A.singleton)A.singleton=new A(e,t,o);else if(n){[["requestId",t.requestId,A.singleton.requestId],["orgReferrer",t.orgReferrer,A.singleton.orgReferrer],["httpReferrer",t.httpReferrer,A.singleton.httpReferrer],["configs.delayed_link_click_logging",t.delayed_link_click_logging,A.singleton.delayedLinkClickLogging],["configs.event_names",t.event_names,A.singleton.event_names],["configs.modal_class",t.modal_class,A.singleton.modalClass],["configs.pii_config_variables",t.no_pii_config_variables,A.singleton.no_pii_config_variables],["configs.marketingTrackerIntegrationEnabled",t.marketingTrackerIntegrationEnabled,A.singleton.marketingTrackerIntegrationEnabled],["configs.noPiiExtraEnabled",t.noPiiExtraEnabled,A.singleton.noPiiExtraEnabled],["configs.isInternalIp",t.isInternalIp,A.singleton.isInternalIp],["configs.devtoolsEnabled",t.devtoolsEnabled,A.singleton.devtoolsEnabled],["configs.isUserDropboxAdmin",t.isUserDropboxAdmin,A.singleton.isUserDropboxAdmin],["configs.expEventsToExpIdMap",t.expEventsToExpIdMap,A.singleton.expEventsToExpIdMap],["configs.expDataFieldsToExpIdMap",t.expDataFieldsToExpIdMap,A.singleton.expEventsToExpIdMap]].forEach(([e,t,o])=>{void 0!==t&&t!==o&&n(new Error(`UX Analytics initialize overload attempt; ${e} '${t}' !== '${o}'`))})}return A.singleton}canUseDevTools(){return this.devtoolsEnabled&&(this.isInternalIp||this.isUserDropboxAdmin)}setupListeners(){this.getListeners().forEach(([e,t,n])=>{e.addEventListener(t,n)}),(0,o.uxaIsListening)()}cleanupListeners(){this.getListeners().forEach(([e,t,n])=>{e.removeEventListener(t,n)})}cleanSessionStorage(){const e=c(),n=v.get(t.STORAGE_KEYS.visitId),o=v.get(t.STORAGE_KEYS.lastActiveTime);null===n?v.set(t.STORAGE_KEYS.visitId,E()):null!==o&&e-o>=18e5&&(v.remove(t.STORAGE_KEYS.previousURL),v.set(t.STORAGE_KEYS.visitId,E())),v.set(t.STORAGE_KEYS.lastActiveTime,e)}handlePageFreeze(){this.logEvent(this.createEvent(i.LOG_EVENTS.pageFreeze))}handlePageResume(){this.logEvent(this.createEvent(i.LOG_EVENTS.pageResume))}logPageView(){const e={page_view_latency:-100,bfcache_eligible:this.bfcacheEligible,bfcache_attempt:this.bfcacheAttempt,navigation_type:this.navigationType};if(this.configTime>0){const t=Math.round((this.instance_init_ts-this.configTime)/1e3);e.page_view_latency=t<=10?t:11,this.configTime=-1}else 0===this.configTime&&(e.page_view_latency=-10,this.configTime=-1);this.logEvent(this.createEvent(i.LOG_EVENTS.pageView,e))}logSpaPageView(e){this.logEvent(this.createEvent(i.LOG_EVENTS.spaPageView,{spa_source:e}))}logModal(e,t){const n={modal:t};this.logOnPage(e,n,!0)}logViewUpdate(e){const{viewId:t,viewStep:n}=e.detail,o={view:t,view_step:n};this.logOnPage("view_update",o,!0)}logDelayedClickEvent(){if(!v.isEnabled())return null;const e=v.get(t.STORAGE_KEYS.linkClick);if(e)try{e.destination_url=p();const n={eventName:i.LOG_EVENTS.linkClick,extra:e};this.logEvent(n),v.remove(t.STORAGE_KEYS.linkClick)}catch(e){}return null}logOnPage(e,t={},n=!1){const o=this.getTimeOnPage();t.vertical_offset=t.vertical_offset||u(),t.time_on_page=t.time_on_page||o,(o<600||n)&&this.logEvent(this.createEvent(e,t))}logEvent(e){var o;return n.__awaiter(this,void 0,void 0,(function*(){try{if(n=e.eventName,!O.has(n))throw new Error(`UXAnalytics.log: trying to log an invalid event (${e.eventName})`);(0,r.addMatchedVariantsToEvent)(e);const a=t.lib.idGeneratingNow();"loading"===document.readyState&&(yield new Promise((function(e){"interactive"===document.readyState||"complete"===document.readyState?e():document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t),e()}))}))),e.extra.instance_event_count=++this.instance_event_count,e.extra.instance_init_ts=this.instance_init_ts,e.extra.event_ts=a,e.extra.client_event_id=`${this.instance_init_ts}-${this.instance_event_count}-${a}`,this.getWARPInfo()&&(e.extra.warp_variants=this.getWARPInfo());let s={};if(this.noPiiExtraEnabled&&(s=S(e.extra,this.no_pii_config_variables,this.expDataFieldsToExpIdMap)),this.marketingTrackerIntegrationEnabled){const t=b(e.eventName,this.expEventsToExpIdMap);(0,l.pushToMarketingTrackerLoggingQueue)(t,s)}if(e.eventName===i.LOG_EVENTS.finalHeartbeat||e.eventName===i.LOG_EVENTS.pageFreeze?this.logger.log(e.eventName,e.extra,!0,this.event_names):this.logger.log(e.eventName,e.extra,!1,this.event_names),this.canUseDevTools()){const n=parseFloat(String(v.get(t.STORAGE_KEYS.eventLogTimestamp)));if(n<=Date.now()){const r=1e3,i=(Array.isArray(v.get(t.STORAGE_KEYS.eventLog))&&null!==(o=v.get(t.STORAGE_KEYS.eventLog))&&void 0!==o?o:[]).filter(e=>{var t;return parseFloat(String(null===(t=null==e?void 0:e.extra)||void 0===t?void 0:t.event_ts))>=n}).concat(e).slice(-r);v.set(t.STORAGE_KEYS.eventLog,i)}else Array.isArray(v.get(t.STORAGE_KEYS.eventLog))&&v.remove(t.STORAGE_KEYS.eventLog)}}catch(e){throw e}var n}))}createEvent(e,t={}){if(this.orgReferrer&&(t.org_referrer=this.orgReferrer),this.visitId&&(t.visit_id=this.visitId),t.request_seq=this.requestSeq,this.httpReferrer&&(t.http_referrer=this.httpReferrer),this.previousUrl&&(t.previous_url=this.previousUrl),this.cmsPageUuid&&(t.cms_page_uuid=this.cmsPageUuid),t.request_id=t.request_id||this.requestId,t.url=t.url||p(),location.hash&&(t.hash_fragment=location.hash),t.uxa_v=2.2,t.uxa_inclusion_method=this.inclusionMethod,this.trackingParams)for(const e of Object.keys(this.trackingParams)){const n=e.replace(/^_/,""),o=this.trackingParams[e];t[`param_${n}`]=o}return{eventName:e,extra:t}}storeDelayedLinkClick(e){if(!v.isEnabled())return this.logOnPage(i.LOG_EVENTS.linkNoSessionStorage),!1;try{v.set(t.STORAGE_KEYS.linkClick,e.extra)}catch(e){return!1}return!0}saveTrackingParams(){const e=this.getTrackingParams();Object.keys(e).length?(v.set(t.STORAGE_KEYS.trackingParams,e),this.trackingParams=e):this.trackingParams=null}getTrackingParams(){const e=v.get(t.STORAGE_KEYS.trackingParams)||{},n=["gclid","oqa","trigger","msclkid","_tk","_camp","_ad","_net","_kw","utm_campaign","utm_content","utm_medium","utm_source","utm_term","fbclid","tfo"],o=d();for(const t of n)o.hasOwnProperty(t)&&(e[t]=o[t]);return e}getWARPInfo(){return this.warpInfo=this.warpInfo||(0,s.getWARPInfoFromDOM)(),this.warpInfo||null}getTimeOnPage(){return Math.round((c()-this.initTime)/1e3)}getElementRank(e){const t=e.nodeName.toLowerCase(),n=e.getAttribute("data-uxa-log"),o=document.querySelectorAll(`${t}[data-uxa-log="${n}"]`);if(1===o.length)return 1;for(let t=0;t<o.length;t++)if(o[t]===e)return t+1;return-1}getLinkRank(e){const t=e.getAttribute("href"),n=document.querySelectorAll(`a[href="${t}"]`);if(1===n.length)return 1;for(let t=0;t<n.length;t++)if(n[t]===e)return t+1;return-1}}t.UXAnalytics=A,A.singleton=null})),define("metaserver/static/js/ux_analytics/UxAnalyticsDispatcher",["require","exports","tslib","metaserver/static/js/ux_analytics/dispatch_custom_event","metaserver/static/js/core/assert"],(function(e,t,n,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UxAnalyticsDispatcher=t.UXA_HISTORY_CHANGE_EVENT=void 0,o=n.__importStar(o),t.UXA_HISTORY_CHANGE_EVENT="historyChange";let i=null;t.UxAnalyticsDispatcher={initUrl(e){i=e},dispatchHistoryChange(e){(0,r.assert)(null!==i,"spaChangesToUxa needs an initial URL");const n=i;i=e;const a={detail:{previousUrl:n,url:i}};o.dispatchCustomEvent(t.UXA_HISTORY_CHANGE_EVENT,a)},reset(){i=null}}})),define("metaserver/static/js/ux_analytics/dispatch_custom_event",["require","exports"],(function(e,t){"use strict";function n(e,t={detail:null}){if("function"==typeof CustomEvent)return new CustomEvent(e,t);const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!0,!0,t.detail),n}Object.defineProperty(t,"__esModule",{value:!0}),t.dispatchCustomEvent=t.createCustomEvent=void 0,t.createCustomEvent=n,t.dispatchCustomEvent=function(e,t){window.dispatchEvent(n(e,t))}})),define("metaserver/static/js/clean/amp_web_logger",["require","exports","metaserver/static/js/metrics/index"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAMPWebLogger=t.AMPLoggerSingleton=void 0;class o{constructor(e){this.metricsReporter=e}logEventCount(e,t,n,o=1){const r={};for(const e in n)n.hasOwnProperty(e)&&(r[e]=n[e]);this.metricsReporter.createStats({ns:e,name:t},r).record(o)}}let r;t.AMPLoggerSingleton=o,t.getAMPWebLogger=function(){return r||(r=new o((0,n.getMetricsReporter)())),r}})),define("metaserver/static/js/pap/analytics_client",["require","exports","tslib","js/pap-client/analytics_client","metaserver/static/js/clean/viewer","metaserver/static/js/clean/active_user","metaserver/static/js/modules/constants/auth","metaserver/static/js/api_v2/noauth_client"],(function(e,t,n,o,r,i,a,s){"use strict";let l,c;function u(){return l||(l=new s.NoAuthApiV2Client),c||(c=new o.AnalyticsClient({apiClient:l})),c}function p(){const e=u().getPersistentFields(),t=(function(){var e,t;const n=r.Viewer.get_viewer(),o=null!==(e=(0,i.getActiveUserId)())&&void 0!==e?e:a.user_id,s=null==n?void 0:n.team_id,l=null===(t=null==n?void 0:n.get_users().find(({id:e})=>e!==o))||void 0===t?void 0:t.id;return Object.assign(Object.assign(Object.assign({},o&&{userId:o}),s&&{teamId:s}),l&&{pairedUserId:l})})(),n=[t,e.identity||{}].some(e=>Object.keys(e).length);u().setPersistentFields(Object.assign(Object.assign({},e),!!n&&{identity:Object.assign(Object.assign({},t),e.identity)}))}function d(e,t={},n="core_dropbox",o=!1){p(),u().logEvent(e,t,n,o)}Object.defineProperty(t,"__esModule",{value:!0}),t.updateConfigs=t.logExposureEvent=t.setPersistentFields=t.logEvent=t.getAnalyticsClientSingleton=void 0,a=n.__importStar(a),t.getAnalyticsClientSingleton=u,t.logEvent=d,t.setPersistentFields=function(e){u().setPersistentFields(e)},t.logExposureEvent=function(e,t,n,o,r){d({experiment_variant:t,feature:e,population_id:n,identity_gid:o,stormcrow_metadata_json:r,".tag":"stormcrow_exposure_event"})},t.updateConfigs=function(e){u().updateConfigs(e)}})),define("metaserver/static/js/pap/util",["require","exports","tslib","js/pap-client/util"],(function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.__exportStar(o,t)})),define("metaserver/static/js/dropbox/proto/pap_events/event_enums",["require","exports","tslib","protobufjs/minimal"],(function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;(o=n.__importStar(o)).Reader,o.Writer,o.util;const r=o.roots.default||(o.roots.default={});var i;t.default=r,t.pap_events=r.pap_events=((i=r.pap_events||{}).EventState=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_EVENT_STATE"]=0,t[e[1]="START"]=1,t[e[2]="SUCCESS"]=2,t[e[3]="FAILED"]=3,t[e[4]="CANCELED"]=4,t})(),i)})),define("metaserver/static/js/dropbox/proto/pap_events/predefined_event",["require","exports","tslib","protobufjs/minimal","metaserver/static/js/google/protobuf/descriptor"],(function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;(o=n.__importStar(o)).Reader,o.Writer,o.util;const r=o.roots.default||(o.roots.default={});t.default=r,t.pap_events=r.pap_events=r.pap_events||{}}));
//# sourceMappingURL=pkg-core-analytics.min.js-vfl1pkasN.map