define("metaserver/static/js/auth/login/sso_utils",["require","exports","tslib","metaserver/static/js/auth/login/api","metaserver/static/js/auth/login/types"],(function(e,t,n,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SsoStateChecker=void 0,o=n.__importStar(o);const s=/^[^@\s]+@[^@\s]+\.[A-Za-z]{2,}$/;t.SsoStateChecker=class{constructor(){this.shouldCheckSsoState=e=>e.match(s),this.checkSsoState=(e,t)=>{this.shouldCheckSsoState(e)?this.CACHE[e]?t(e,this.CACHE[e]):this.INFLIGHT[e]||(this.INFLIGHT[e]=!0,o.checkSsoState(e).then(n=>{switch(n.user_sso_state){case"optional":this.CACHE[e]=a.SsoState.OPTIONAL;break;case"required":this.CACHE[e]=a.SsoState.REQUIRED;break;default:this.CACHE[e]=a.SsoState.OFF}t(e,this.CACHE[e])}).finally(()=>{delete this.INFLIGHT[e]})):t(e,a.SsoState.OFF)},this.CACHE={},this.INFLIGHT={}}}})),define("metaserver/static/js/google_one_tap/google_one_tap_platform",["require","exports","tslib","metaserver/static/js/core/browser_detection","metaserver/static/js/clean/raf_throttle","metaserver/static/js/google_one_tap/lib","metaserver/static/js/core/browser","metaserver/static/js/core/notify","metaserver/static/js/core/i18n","metaserver/static/js/auth/common/stats","metaserver/static/js/google_one_tap/one_tap_tos","metaserver/static/js/fedramp/fedramp_util","metaserver/static/js/core/uri","metaserver/static/js/google_one_tap/google_one_tap_helpers","metaserver/static/js/auth/login/types","metaserver/static/js/auth/login/sso_utils","react"],(function(e,t,n,o,a,s,i,r,l,c,_,d,u,g,m,p,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UseGsiState=t.initialize_module=t.GoogleOneTapPlatform=t.GoogleOneTapPlatformSingleton=void 0,i=n.__importStar(i);class h{constructor(){if(this.tosPromptShown=!1,this.googleIframeObserver=null,this.bodyClass="google-one-tap-displayed",this.tosBodyClass="google-one-tap-tos-displayed",this.currentContext="signin",this.isPromptClosed=!1,this.init=e=>{!this.config&&e&&(this.config=e,this.currentContext=e.context,s.GSIEventManager.sendGSIEvent(s.GSIEvent.INITIALIZE_PLATFORM),e.context!==s.GSIEventManager.getGSIState().context&&this.updateStateContext(e.context),e.isInline&&(s.GSIEventManager.sendGSIEvent(s.GSIEvent.USE_INLINE_PROMPT),s.GSIEventManager.sendGSIEvent(s.GSIEvent.PROMPT_OPEN),document.body.addEventListener("focusin",this.handleFocusIn)),this.loadGSILibrary().then(this.initGSIClient),this.listenForContextChanges(),e.isMobile&&s.GSIEventManager.sendGSIEvent(s.GSIEvent.IS_MOBILE))},this.handleScriptLoadError=()=>{c.GoogleOneTapAmpLogger.logScriptLoadError()},this.handleScriptLoad=()=>{c.GoogleOneTapAmpLogger.logScriptLoadSuccess()},this.loadGSILibrary=()=>{if(this.config.isTest)return(0,g.initTestMock)();const e=document.getElementsByTagName("head")[0],t=document.createElement("script");return t.type="text/javascript",t.async=!0,t.defer=!0,t.src="https://accounts.google.com/gsi/client",t.onerror=this.handleScriptLoadError,t.onload=this.handleScriptLoad,e.insertBefore(t,e.firstChild),new Promise(e=>{window.onGoogleLibraryLoad=e})},this.initGSIClient=()=>{this.config.clientId&&"undefined"!=typeof google&&(this.applyPendingContext(),s.GSIEventManager.clearPendingContext(),this.initContainerListeners())},this.displaySigButton=()=>{let e,t=null;"signin"===this.currentContext?(t=document.getElementById(s.DEFAULT_SIGNIN_BUTTON_CONTAINER_ID),e=s.SIG_BUTTON_TEXT.CONTINUE_WITH):"signup"===this.currentContext&&(t=document.getElementById(s.DEFAULT_SIGNUP_BUTTON_CONTAINER_ID),e=s.SIG_BUTTON_TEXT.SIGN_UP_WITH);const n=s.SIG_BUTTON_STYLES.get(this.config.pageName),o=this.buttonWidth?this.buttonWidth:(null==n?void 0:n.width)||350;if(t){if(this.refreshFormContainer&&!this.refreshSigWrapper){const e=document.createElement("div");e.classList.add("sig-wrapper--dwg-refresh"),t.appendChild(e),this.refreshSigWrapper=e}google.accounts.id.renderButton(this.refreshSigWrapper?this.refreshSigWrapper:t,{text:e,width:o,logo_alignment:n?n.logo_alignment:"left",locale:this.config.locale})}},this.initContainerListeners=()=>{this.config.isInline&&!s.GSIEventManager.getGSIState().inlineContainerMounted||this.displayOneTapPrompt(),s.GSIEventManager.createGSIEventListener(s.GSIEvent.INLINE_CONTAINER_MOUNTED,this.displayOneTapPrompt),s.GSIEventManager.getGSIState().buttonContainerMounted&&(this.initGoogleAccount(),this.initRefreshResizeObserver(),this.displaySigButton()),this.resizeThrottle&&this.resizeObserver||s.GSIEventManager.createGSIEventListener(s.GSIEvent.BUTTON_CONTAINER_MOUNTED,this.initRefreshResizeObserver),s.GSIEventManager.createGSIEventListener(s.GSIEvent.BUTTON_CONTAINER_MOUNTED,this.displaySigButton)},this.getRefreshFormContainerWidth=e=>Math.floor(e.getBoundingClientRect().width),this.handleRefreshResize=()=>{this.buttonWidth=this.getRefreshFormContainerWidth(this.refreshFormContainer),this.displaySigButton()},this.initRefreshResizeObserver=()=>{const e=document.querySelector(".login-register-container--dwg-refresh");e&&(this.refreshFormContainer=e,this.buttonWidth=this.getRefreshFormContainerWidth(this.refreshFormContainer),this.resizeThrottle&&this.resizeObserver&&(this.resizeThrottle.cancelPending(),this.resizeObserver.disconnect()),this.resizeThrottle=new a.RafThrottle(()=>{this.handleRefreshResize()}),this.resizeObserver=new ResizeObserver(this.resizeThrottle.request),this.resizeObserver.observe(this.refreshFormContainer),s.GSIEventManager.createGSIEventListener(s.GSIEvent.BUTTON_CONTAINER_UNMOUNTED,this.removeRefreshResizeObserver))},this.removeRefreshResizeObserver=()=>{this.resizeObserver&&this.resizeObserver.disconnect()},this.displayOneTapPrompt=()=>{const e=!!document.getElementById(this.getPromptParentId()||"");this.config.isInline&&!e||(this.initGoogleAccount(),google.accounts.id.prompt(e=>{e.isDisplayMoment()&&this.handleDisplayMoment(e);const t=e.isNotDisplayed()||e.isSkippedMoment()||e.isDismissedMoment();let n="";if(e.isSkippedMoment()?(c.GoogleOneTapAmpLogger.logOneTapNotShown(e.getSkippedReason()),(0,c.displayEvent)(s.GoogleOneTapEvent.LOGGED_IN_GOOGLE_USER,!0),e.getSkippedReason()===s.GoogleNotShownReason.USER_CANCEL&&(0,c.clickEvent)(s.GoogleOneTapEvent.DISMISS_GOOGLE_ONE_TAP)):e.isNotDisplayed()?(e.getNotDisplayedReason()!==s.GoogleNotShownReason.OPT_OUT_OR_NO_SESSION&&(0,c.displayEvent)(s.GoogleOneTapEvent.LOGGED_IN_GOOGLE_USER,!0),c.GoogleOneTapAmpLogger.logOneTapNotShown(e.getNotDisplayedReason())):e.isDismissedMoment()&&(c.GoogleOneTapAmpLogger.logOneTapNotShown(e.getDismissedReason()),(0,c.displayEvent)(s.GoogleOneTapEvent.LOGGED_IN_GOOGLE_USER,!0),n=e.getDismissedReason()),this.setPromptClosedState(t,n),s.GSIEventManager.getGSIState().isMobile&&!this.googleOneTapDisabledOverlay){this.googleOneTapDisabledOverlay=document.createElement("div"),this.googleOneTapDisabledOverlay.classList.add("google-one-tap-disabled-mobile-overlay");const e=this.getGoogleIframe();null==e||e.insertAdjacentElement("afterend",this.googleOneTapDisabledOverlay)}t?((0,c.displayEvent)(s.GoogleOneTapEvent.GOOGLE_ONE_TAP_NOT_SHOWN,!1),this.setOneTapHeightCssVar("0px"),this.stopObservingGoogleContainer(),document.body.classList.remove(this.bodyClass),this.googleOneTapDisabledOverlay&&this.googleOneTapDisabledOverlay.remove()):((0,c.displayEvent)(s.GoogleOneTapEvent.SHOW_GOOGLE_ONE_TAP,!0),(0,c.displayEvent)(s.GoogleOneTapEvent.LOGGED_IN_GOOGLE_USER,!0))}))},this.handleDisplayMoment=e=>{s.GSIEventManager.sendGSIEvent(s.GSIEvent.DISPLAY_MOMENT),e.isDisplayed()&&(this.setOneTapHeightCssVar(this.getOneTapIframeHeight()),this.observeGoogleIframe(),document.body.classList.add(this.bodyClass),this.config.pageName&&document.body.classList.add(this.config.pageName),this.config.isInline&&(o.safari?s.GSIEventManager.sendGSIEvent(s.GSIEvent.PROMPT_UI_READY):this.pollAndClearIframeFocus()))},this.setPromptClosedState=(e,t)=>{this.isPromptClosed=e,e?s.GSIEventManager.sendGSIEvent(s.GSIEvent.PROMPT_CLOSE,{dismissReason:t}):s.GSIEventManager.sendGSIEvent(s.GSIEvent.PROMPT_OPEN)},this.listenForContextChanges=()=>{this.clearContextChangesListener(),s.GSIEventManager.createGSIEventListener(s.GSIEvent.CONTEXT_CHANGE_SIGNUP,this.handleContextChange),s.GSIEventManager.createGSIEventListener(s.GSIEvent.CONTEXT_CHANGE_SIGNIN,this.handleContextChange)},this.clearContextChangesListener=()=>{s.GSIEventManager.removeGSIEventListener(s.GSIEvent.CONTEXT_CHANGE_SIGNUP,this.handleContextChange),s.GSIEventManager.removeGSIEventListener(s.GSIEvent.CONTEXT_CHANGE_SIGNIN,this.handleContextChange)},this.applyPendingContext=()=>{s.GSIEventManager.getPendingContext()&&this.setCurrentContext(s.GSIEventManager.getPendingContext())},this.handleContextChange=()=>{const e=s.GSIEventManager.getGSIState().context;e!==this.currentContext&&(this.cancelTOS(),this.setCurrentContext(e),this.refreshGSIClient())},this.refreshGSIClient=()=>{var e;s.GSIEventManager.getGSIState().gsiClientInitialized&&(s.GSIEventManager.sendGSIEvent(s.GSIEvent.RESET_DISPLAY_MOMENT),s.GSIEventManager.sendGSIEvent(s.GSIEvent.PROMPT_UI_NOT_READY),(null===(e=this.config)||void 0===e?void 0:e.isInline)&&"undefined"!=typeof google&&google.accounts.id.cancel(),this.initGSIClient())},this.googleSignInCallback=({select_by:e,credential:t})=>{c.GoogleOneTapAmpLogger.logAuthType(e);const n=s.BUTTON_AUTH_TYPES.includes(e);n||((0,c.clickEvent)(s.GoogleOneTapEvent.GOOGLE_ONE_TAP_CONTINUE),(0,c.displayEvent)(s.GoogleOneTapEvent.GOOGLE_ONE_TAP_VERIFICATION_SUCCESS,!0)),s.GSIEventManager.sendGSIEvent(n?s.GSIEvent.USE_BUTTON_FLOW:s.GSIEvent.USE_ONE_TAP_FLOW),this.isButtonFlow=n,this.googleCredentials=t,this.selectBy=e,this.signIn(n)},this.signIn=e=>{const t={googleCredentials:this.googleCredentials,select_by:this.selectBy,tos_signed:!1};(0,g.getIdentityClient)(t).then(t=>{var n,o,a;const _=(0,d.getFedrampRedirectUrlIfApplicable)(t.is_fedramp_user||!1,(null===(n=this.config)||void 0===n?void 0:n.loginContUrl)||s.DEFAULT_CONTINUATION_URL),g=t[".tag"];switch("tos_required"!==g&&(this.isButtonFlow?(c.GoogleUXAnalyticsLogger.logLoginStart(),c.AuthAMPLogger.logLoginAttempt(c.AuthType.GOOGLE_ONE_TAP,"normal")):c.AuthAMPLogger.logLoginAttempt(c.AuthType.GOOGLE,"normal")),g){case"success":this.logOneTapLoginResponse(!0,null),e?c.GoogleUXAnalyticsLogger.logSuccessfulLogin():(0,c.displayEvent)(s.GoogleOneTapEvent.GOOGLE_ONE_TAP_ACCOUNT_LOGIN_SUCCESS,!0),r.Notify.success(l.intl.formatMessage({id:"/qL3on",defaultMessage:"Log in successful! Your browser will be redirected in a few seconds."})),i.redirect(_);break;case"requires_twofactor":{this.logOneTapLoginResponse(!1,"tfa_required"),e||(0,c.displayEvent)(s.GoogleOneTapEvent.GOOGLE_ONE_TAP_ACCOUNT_LOGIN_SUCCESS,!0);const n=new u.URI({path:"/verify_code"}).updateQuery({remember_me:t.remember_me.toString(),pair_user:t.pair_user.toString(),cont:_});i.redirect(n.toString());break}case"tos_required":s.GSIEventManager.sendGSIEvent(s.GSIEvent.TOS_PROMPT_OPEN),this.showTOSPrompt(e);break;case"enable_twofactor_required":{this.logOneTapLoginResponse(!1,g);const e=new u.URI({path:"/twofactor"}).updateQuery({remember_me:t.remember_me.toString(),pair_user:t.pair_user.toString(),cont:_});i.redirect(e.toString());break}case"google_login_not_allowed":this.logOneTapLoginResponse(!1,g),t.redirect_url&&i.redirect(t.redirect_url),r.Notify.error(l.intl.formatMessage({id:"oW2LTj",defaultMessage:"Google Sign In is not allowed with this email."})),this.ssoChecker.checkSsoState((null===(o=t.profile)||void 0===o?void 0:o.email)||"",this.onSsoStateUpdate);break;case"sso_required":this.logOneTapLoginResponse(!1,g),t.redirect_url?i.redirect(t.redirect_url):window.location.href.includes("/login")&&s.GSIEventManager.sendGSIEvent(s.GSIEvent.SSO_REQUIRED,{email:null===(a=t.profile)||void 0===a?void 0:a.email});break;case"requires_password":{this.logOneTapLoginResponse(!1,g);const e=new u.URI({path:"/show_password_form"}).updateQuery({remember_me:t.remember_me.toString(),pair_user:t.pair_user.toString(),cont:_});i.redirect(e.toString());break}default:this.logOneTapLoginResponse(!1,g),r.Notify.error(l.intl.formatMessage({id:"9n1q0s",defaultMessage:"There was a problem completing this request. Please Try Again."}))}}).catch(e=>{this.logOneTapLoginResponse(!1,e[".tag"]),(0,g.handleClientError)(e)})},this.logOneTapLoginResponse=(e,t)=>{this.isButtonFlow?(c.AuthAMPLogger.logThirdPartyLoginResponse(c.AuthType.GOOGLE,"normal",e,t),"tfa_required"===t?c.GoogleUXAnalyticsLogger.logSuccessfulLoginTfaRequired():c.GoogleUXAnalyticsLogger.logUnsuccessfulLogin()):c.AuthAMPLogger.logThirdPartyLoginResponse(c.AuthType.GOOGLE_ONE_TAP,"normal",e,t)},this.onSsoStateUpdate=(e,t)=>{t!==m.SsoState.REQUIRED&&t!==m.SsoState.OPTIONAL||s.GSIEventManager.sendGSIEvent(s.GSIEvent.SSO_REQUIRED,{email:e})},this.signUp=e=>{const t={googleCredentials:this.googleCredentials,select_by:this.selectBy,tos_signed:!0,marketingOptedIn:e};return(0,g.getIdentityClient)(t).then(e=>{var t;switch(e[".tag"]){case"success":{this.isButtonFlow?(c.AuthAMPLogger.logSignupResponse(c.AuthType.GOOGLE,!0,null),c.GoogleUXAnalyticsLogger.logSignupResponse(!0,null)):(c.AuthAMPLogger.logSignupResponse(c.AuthType.GOOGLE_ONE_TAP,!0,null),(0,c.displayEvent)(s.GoogleOneTapEvent.GOOGLE_ONE_TAP_ACCOUNT_CREATION_SUCCESS,!0));const n=(0,d.getFedrampRedirectUrlIfApplicable)(e.is_fedramp_user||!1,(null===(t=this.config)||void 0===t?void 0:t.registerContUrl)||e.redirect_url||"/trial_first");return i.redirect(n),!0}default:return r.Notify.error(l.intl.formatMessage({id:"2q7GH0",defaultMessage:"There was a problem completing this request. Please Try Again."})),!1}}).catch(e=>(this.isButtonFlow?(c.AuthAMPLogger.logSignupResponse(c.AuthType.GOOGLE,!1,e[".tag"]),c.GoogleUXAnalyticsLogger.logSignupResponse(!1,e[".tag"])):c.AuthAMPLogger.logSignupResponse(c.AuthType.GOOGLE_ONE_TAP,!1,e[".tag"]),(0,g.handleClientError)(e),!1))},this.showTOSPrompt=e=>{if(!this.tosPromptShown){const t=e&&!this.config.isMobile,n=this.config.isInline||t?_.TOSModalVariant.V2:_.TOSModalVariant.V1;let o;n===_.TOSModalVariant.V2&&"signin"===this.currentContext&&(o=_.TOSModalVariant.V1),(0,_.displayTOS)({modalVariant:n,animationVariant:o,onToggle:this.handleToggleTOS,onDismiss:this.handleDismissTOS,onSubmit:this.handleTOSSubmit,containerParentSelector:n===_.TOSModalVariant.V2?`${"signup"===this.currentContext?s.DEFAULT_ONE_TAP_INLINE_TOS_ID_REGISTER:s.DEFAULT_ONE_TAP_INLINE_TOS_ID_LOGIN}`:void 0,showMarketingOptIn:this.config.showMarketingOptIn,isImplicit:"V1"===this.config.implicitTOSVariant,googleCredentials:this.googleCredentials}),this.tosPromptShown=!0,document.body.classList.add(this.tosBodyClass)}},this.cancelTOS=()=>{s.GSIEventManager.sendGSIEvent(s.GSIEvent.TOS_PROMPT_CLOSE),this.tosPromptShown&&((0,_.unmountTOS)(),this.tosPromptShown=!1)},this.handleDismissTOS=()=>{(0,c.clickEvent)(s.GoogleOneTapEvent.GOOGLE_ONE_TAP_SIGNUP_DISMISS_TOS),this.cancelTOS(),document.body.classList.remove(this.tosBodyClass),this.refreshGSIClient()},this.handleToggleTOS=e=>{},this.handleTOSSubmit=e=>(this.isButtonFlow?(c.GoogleUXAnalyticsLogger.logSignupStart(),c.AuthAMPLogger.logSignupAttempt(c.AuthType.GOOGLE)):((0,c.clickEvent)(s.GoogleOneTapEvent.GOOGLE_ONE_TAP_SIGNUP_CLICK),c.AuthAMPLogger.logSignupAttempt(c.AuthType.GOOGLE_ONE_TAP)),this.signUp(e)),this.observeGoogleIframe=()=>{const e=this.getGoogleIframe();!this.googleIframeObserver&&e&&(this.googleIframeObserver=new MutationObserver(this.googleIframeObserverCallback),this.googleIframeObserver.observe(e,{attributes:!0}))},this.stopObservingGoogleContainer=()=>{var e;null===(e=this.googleIframeObserver)||void 0===e||e.disconnect(),this.googleIframeObserver=null},this.googleIframeObserverCallback=e=>{e.length&&"style"===e[0].attributeName&&this.setOneTapHeightCssVar(this.getOneTapIframeHeight())},this.setOneTapHeightCssVar=e=>{this.styleTag||(this.styleTag=document.createElement("style"),document.head.appendChild(this.styleTag)),this.styleTag.innerText=`:root { ${s.ONE_TAP_HEIGHT_CSS_VAR}: ${e}; }`},this.getGoogleIframe=()=>document.getElementById(s.GOOGLE_ONE_TAP_IFRAME_ID)||document.querySelector(`#${s.GOOGLE_ONE_TAP_CREDENTIAL_CONTAINER_ID} iframe`),this.getOneTapIframeHeight=()=>{const e=this.getGoogleIframe();return(null==e?void 0:e.style.height)||"0px"},this.pollAndClearIframeFocus=()=>{const e=setInterval(()=>{var t,n;document.activeElement&&document.activeElement===this.getGoogleIframe()&&(null===(t=document.activeElement)||void 0===t||t.blur(),null===(n=this.activeElement)||void 0===n||n.focus(),s.GSIEventManager.sendGSIEvent(s.GSIEvent.PROMPT_UI_READY),clearInterval(e))},5);setTimeout(()=>{s.GSIEventManager.sendGSIEvent(s.GSIEvent.PROMPT_UI_READY),clearInterval(e)},3e3)},this.handleFocusIn=()=>{document.activeElement!==this.getGoogleIframe()&&(this.activeElement=document.activeElement)},this.getPromptParentId=()=>{var e;return(null===(e=this.config)||void 0===e?void 0:e.isInline)?this.getInlineContainerId():void 0},this.getInlineContainerId=()=>this.config&&"signup"===this.currentContext?s.DEFAULT_SIGNUP_CONTAINER_ID:s.DEFAULT_SIGNIN_CONTAINER_ID,this.setCurrentContext=e=>{this.currentContext=e},this.updateStateContext=e=>{const t="signup"===e?s.GSIEvent.CONTEXT_CHANGE_SIGNUP:s.GSIEvent.CONTEXT_CHANGE_SIGNIN;s.GSIEventManager.sendGSIEvent(t)},h.instance)return h.instance;h.instance=this,this.ssoChecker=new p.SsoStateChecker}initGoogleAccount(){const e={client_id:this.config.clientId,callback:this.googleSignInCallback,cancel_on_tap_outside:!1,context:this.currentContext,prompt_parent_id:this.getPromptParentId(),itp_support:!0};google.accounts.id.initialize(e),s.GSIEventManager.getGSIState().gsiClientInitialized||s.GSIEventManager.sendGSIEvent(s.GSIEvent.INITIALIZE_GSI_CLIENT)}}t.GoogleOneTapPlatformSingleton=h,t.GoogleOneTapPlatform=new h,t.initialize_module=function(e){t.GoogleOneTapPlatform.init(e)},t.UseGsiState=function(e){e&&!s.GSIEventManager.getGSIState().isInline&&s.GSIEventManager.sendGSIEvent(s.GSIEvent.USE_INLINE_PROMPT);const[t,n]=(0,E.useState)(s.GSIEventManager.getGSIState()),o=[s.GSIEvent.INITIALIZE_PLATFORM,s.GSIEvent.PROMPT_OPEN,s.GSIEvent.PROMPT_CLOSE,s.GSIEvent.DISPLAY_MOMENT,s.GSIEvent.RESET_DISPLAY_MOMENT,s.GSIEvent.PROMPT_UI_READY,s.GSIEvent.PROMPT_UI_NOT_READY],a=[s.GSIEvent.TOS_PROMPT_OPEN,s.GSIEvent.TOS_PROMPT_CLOSE,s.GSIEvent.IS_MOBILE,...e?o:[]],i=()=>{n(s.GSIEventManager.getGSIState())};return(0,E.useEffect)(()=>(s.GSIEventManager.removeGSIEventListener(a,i),s.GSIEventManager.createGSIEventListener(a,i),()=>{s.GSIEventManager.removeGSIEventListener(a,i)}),[]),t}})),define("metaserver/static/js/google_one_tap/lib",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CONTINUATION_URL=t.ONE_TAP_HEIGHT_CSS_VAR=t.GOOGLE_ONE_TAP_BUTTON_PROMPT_DISABLED=t.GOOGLE_ONE_TAP_CREDENTIAL_CONTAINER_ID=t.GOOGLE_ONE_TAP_IFRAME_ID=t.GOOGLE_ONE_TAP_COLLAPSE_FORM=t.GOOGLE_ONE_TAP_DISABLED_FORM=t.DEFAULT_ONE_TAP_INLINE_SPINNER_CLASS=t.DEFAULT_ONE_TAP_INLINE_TOS_ID_LOGIN=t.DEFAULT_ONE_TAP_INLINE_TOS_ID_REGISTER=t.DEFAULT_ONE_TAP_CONTAINER_CLASS=t.DEFAULT_SIGNIN_BUTTON_CONTAINER_ID=t.DEFAULT_SIGNUP_BUTTON_CONTAINER_ID=t.DEFAULT_SIGNIN_CONTAINER_ID=t.DEFAULT_SIGNUP_CONTAINER_ID=t.GSIEvent=t.GSIEventManager=t.SIG_BUTTON_STYLES=t.BUTTON_AUTH_TYPES=t.DismissReason=t.SIG_BUTTON_TEXT=t.GoogleNotShownReason=t.GoogleOneTapEvent=void 0,(function(e){e.DISMISS_GOOGLE_ONE_TAP="dismiss_google_onetap",e.GOOGLE_ONE_TAP_CONTINUE="google_onetap_continue",e.GOOGLE_ONE_TAP_NOT_SHOWN="google_onetap_not_shown",e.GOOGLE_ONE_TAP_ACCOUNT_CREATION_SUCCESS="google_onetap_account_creation_success",e.GOOGLE_ONE_TAP_ACCOUNT_LOGIN_SUCCESS="google_onetap_account_login_success",e.GOOGLE_ONE_TAP_SIGNUP_CLICK="google_onetap_signup_click",e.GOOGLE_ONE_TAP_SIGNUP_DISMISS_TOS="google_onetap_signup_dismiss_tos",e.GOOGLE_ONE_TAP_SIGNUP_PLEASE_AGREE_TO_TOS="google_onetap_signup_please_agree_to_tos",e.GOOGLE_ONE_TAP_VERIFICATION_FAILED="google_onetap_verification_failed",e.GOOGLE_ONE_TAP_VERIFICATION_SUCCESS="google_onetap_verification_success",e.GOOGLE_ONE_TAP_SIG_BUTTON_CLICKED="google_onetap_sig_button_clicked",e.LOGGED_IN_GOOGLE_USER="loggedin_google_user",e.SHOW_GOOGLE_ONE_TAP="show_google_onetap",e.GOOGLE_ONE_TAP_IMPLICIT_TOS_AGREE="google_one_tap_implicit_tos_agree"})(t.GoogleOneTapEvent||(t.GoogleOneTapEvent={})),(function(e){e.OPT_OUT_OR_NO_SESSION="opt_out_or_no_session",e.USER_CANCEL="user_cancel"})(t.GoogleNotShownReason||(t.GoogleNotShownReason={})),(function(e){e.CONTINUE_WITH="continue_with",e.SIGN_IN_WITH="signin_with",e.SIGN_UP_WITH="signup_with"})(t.SIG_BUTTON_TEXT||(t.SIG_BUTTON_TEXT={})),(function(e){e.inFlow="credential_returned"})(t.DismissReason||(t.DismissReason={})),t.BUTTON_AUTH_TYPES=["btn","btn_confirm","btn_add_session","btn_confirm_add_session"],t.SIG_BUTTON_STYLES=new Map([["default",{width:350,logo_alignment:"left"}],["shared-link-signup-page",{width:400,logo_alignment:"left"}]]);const n={platformInitialized:!1,gsiClientInitialized:!1,displayMoment:!1,isInline:!1,isPromptClosed:!0,context:"signin",pendingContext:null,buttonContainerMounted:!1,inlineContainerMounted:!1,tosPromptDisplayed:!1,promptUIReady:!1,dismissReason:"",formDisabled:!1,isButtonFlow:!1,email:"",isMobile:!1};let o=n;const a=e=>`gsi_${e.toString()}`,s=e=>{o.pendingContext=e},i=e=>{const t=e.detail;o=Object.assign(Object.assign({},o),t||{}),e.type!==a(r.STATE_CHANGE)&&window.dispatchEvent(_(r.STATE_CHANGE))};var r;t.GSIEventManager={sendGSIEvent:(e,{email:t,dismissReason:n}={})=>{const a=c.includes(e),i=_(e,{email:t,dismissReason:n});i&&(window.dispatchEvent(i),a&&!o.platformInitialized&&s(i.detail.context))},getGSIState:()=>o,getPendingContext:()=>o.pendingContext,clearPendingContext:()=>{o.pendingContext=null},getEventType:a,createGSIEventListener:(e,t)=>{const n=e=>window.addEventListener(a(e),t);Array.isArray(e)?e.forEach(e=>{n(e)}):n(e)},removeGSIEventListener:(e,t)=>{const n=e=>window.removeEventListener(a(e),t);Array.isArray(e)?e.forEach(e=>{n(e)}):n(e)},resetGSIState:()=>{o=n}},(function(e){e.STATE_CHANGE="state_change",e.CONTEXT_CHANGE_SIGNUP="context_change_signup",e.CONTEXT_CHANGE_SIGNIN="context_change_signin",e.INITIALIZE_PLATFORM="initialize_platform",e.INITIALIZE_GSI_CLIENT="initialize_gsi_client",e.DISPLAY_MOMENT="display_moment",e.RESET_DISPLAY_MOMENT="reset_display_moment",e.USE_INLINE_PROMPT="use_inline_prompt",e.PROMPT_CLOSE="prompt_close",e.PROMPT_OPEN="prompt_open",e.INLINE_CONTAINER_MOUNTED="inline_container_mounted",e.BUTTON_CONTAINER_MOUNTED="button_container_mounted",e.BUTTON_CONTAINER_UNMOUNTED="button_container_unmounted",e.TOS_PROMPT_OPEN="tos_prompt_open",e.TOS_PROMPT_CLOSE="tos_prompt_closed",e.USE_BUTTON_FLOW="use_button_flow",e.USE_ONE_TAP_FLOW="use_one_tap_flow",e.SSO_REQUIRED="sso_required",e.PROMPT_UI_READY="prompt_ui_ready",e.PROMPT_UI_NOT_READY="prompt_ui_not_ready",e.IS_MOBILE="IS_MOBILE"})(r=t.GSIEvent||(t.GSIEvent={}));const l={context_change_signup:"signup",context_change_signin:"signin"},c=[r.CONTEXT_CHANGE_SIGNIN,r.CONTEXT_CHANGE_SIGNUP],_=(e,{email:t,dismissReason:n}={})=>{const o=a(e);switch(e){case r.CONTEXT_CHANGE_SIGNUP:case r.CONTEXT_CHANGE_SIGNIN:return new CustomEvent(o,{detail:{context:l[e.toString()],formDisabled:!1}});case r.INITIALIZE_PLATFORM:return new CustomEvent(o,{detail:{platformInitialized:!0}});case r.INITIALIZE_GSI_CLIENT:return new CustomEvent(o,{detail:{gsiClientInitialized:!0}});case r.DISPLAY_MOMENT:return new CustomEvent(o,{detail:{displayMoment:!0}});case r.RESET_DISPLAY_MOMENT:return new CustomEvent(o,{detail:{displayMoment:!1}});case r.USE_INLINE_PROMPT:return new CustomEvent(o,{detail:{isInline:!0}});case r.PROMPT_CLOSE:return new CustomEvent(o,{detail:{isPromptClosed:!0,dismissReason:n}});case r.PROMPT_OPEN:return new CustomEvent(o,{detail:{isPromptClosed:!1}});case r.BUTTON_CONTAINER_MOUNTED:return new CustomEvent(o,{detail:{buttonContainerMounted:!0}});case r.BUTTON_CONTAINER_UNMOUNTED:return new CustomEvent(o,{detail:{buttonContainerMounted:!1}});case r.INLINE_CONTAINER_MOUNTED:return new CustomEvent(o,{detail:{inlineContainerMounted:!0}});case r.TOS_PROMPT_OPEN:return new CustomEvent(o,{detail:{tosPromptDisplayed:!0,formDisabled:!0}});case r.TOS_PROMPT_CLOSE:return new CustomEvent(o,{detail:{tosPromptDisplayed:!1,formDisabled:!1,dismissReason:""}});case r.USE_BUTTON_FLOW:return new CustomEvent(o,{detail:{isButtonFlow:!0}});case r.USE_ONE_TAP_FLOW:return new CustomEvent(o,{detail:{isButtonFlow:!1}});case r.STATE_CHANGE:return new CustomEvent(o);case r.SSO_REQUIRED:return new CustomEvent(o,{detail:{email:t}});case r.PROMPT_UI_READY:return new CustomEvent(o,{detail:{promptUIReady:!0}});case r.PROMPT_UI_NOT_READY:return new CustomEvent(o,{detail:{promptUIReady:!1}});case r.IS_MOBILE:return new CustomEvent(o,{detail:{isMobile:!0}});default:return null}};Object.values(r).forEach(e=>{const t=a(e);window.addEventListener(t,i)}),t.DEFAULT_SIGNUP_CONTAINER_ID="google-one-tap-inline-container-register",t.DEFAULT_SIGNIN_CONTAINER_ID="google-one-tap-inline-container-login",t.DEFAULT_SIGNUP_BUTTON_CONTAINER_ID="sign-in-with-google-button-container--register",t.DEFAULT_SIGNIN_BUTTON_CONTAINER_ID="sign-in-with-google-button-container--login",t.DEFAULT_ONE_TAP_CONTAINER_CLASS="google-one-tap-inline-container",t.DEFAULT_ONE_TAP_INLINE_TOS_ID_REGISTER="google-one-tap-inline-tos-register",t.DEFAULT_ONE_TAP_INLINE_TOS_ID_LOGIN="google-one-tap-inline-tos-login",t.DEFAULT_ONE_TAP_INLINE_SPINNER_CLASS="google-one-tap-inline-spinner",t.GOOGLE_ONE_TAP_DISABLED_FORM="google-one-tap-form--disabled",t.GOOGLE_ONE_TAP_COLLAPSE_FORM="google-one-tap-form--collapse",t.GOOGLE_ONE_TAP_IFRAME_ID="credential_picker_iframe",t.GOOGLE_ONE_TAP_CREDENTIAL_CONTAINER_ID="credential_picker_container",t.GOOGLE_ONE_TAP_BUTTON_PROMPT_DISABLED="google-one-tap-button-prompt--disabled",t.ONE_TAP_HEIGHT_CSS_VAR="--google-one-tap-container-height",t.DEFAULT_CONTINUATION_URL="/"})),define("metaserver/static/js/google_one_tap/containers",["require","exports","tslib","classnames","react","metaserver/static/js/google_one_tap/lib","metaserver/static/js/google_one_tap/google_one_tap_helpers","dig-components/progress_indicators","typescript/component_libraries/dwg-components/src/atoms/dwg-box/index"],(function(e,t,n,o,a,s,i,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_TOS_INLINE_CONTAINER_REGISTER=t.DEFAULT_TOS_INLINE_CONTAINER_LOGIN=t.DefaultButtonContainerFC=t.DefaultContainerFC=void 0,o=n.__importDefault(o);const c=(a=n.__importStar(a)).default.createElement(l.DWGBox,{marginBottom:2,className:s.DEFAULT_ONE_TAP_INLINE_SPINNER_CLASS},a.default.createElement(r.Spinner,{"aria-valuetext":"Loading Terms of Service prompt",size:"small"}));t.DefaultContainerFC=e=>{const{context:t,gsiState:n}=e,i="signup"===t?s.DEFAULT_SIGNUP_CONTAINER_ID:s.DEFAULT_SIGNIN_CONTAINER_ID,r=(0,a.useCallback)(e=>{null!==e&&s.GSIEventManager.sendGSIEvent(s.GSIEvent.INLINE_CONTAINER_MOUNTED)},[]);return a.default.createElement("div",{className:(0,o.default)({"expanding-inline-one-tap-prompt":null==n?void 0:n.promptUIReady})},a.default.createElement("div",{id:i,className:(0,o.default)({[s.DEFAULT_ONE_TAP_CONTAINER_CLASS]:!(null==n?void 0:n.isPromptClosed)||!(null==n?void 0:n.displayMoment)}),ref:r},!(null==n?void 0:n.promptUIReady)&&!(null==n?void 0:n.isPromptClosed)&&c))},t.DefaultContainerFC.displayName="DefaultContainerFC";t.DefaultButtonContainerFC=({context:e,gsiState:t})=>{let n;"signup"===e?n=s.DEFAULT_SIGNUP_BUTTON_CONTAINER_ID:"signin"===e&&(n=s.DEFAULT_SIGNIN_BUTTON_CONTAINER_ID);const o=(0,a.useCallback)(e=>{null!==e&&s.GSIEventManager.sendGSIEvent(s.GSIEvent.BUTTON_CONTAINER_MOUNTED)},[]);return(0,a.useEffect)(()=>()=>{s.GSIEventManager.sendGSIEvent(s.GSIEvent.BUTTON_CONTAINER_UNMOUNTED)},[]),a.default.createElement("div",{ref:o,id:n,className:"google-one-tap-inline-button-container",style:!1===(0,i.showOneTapInlineGoogleButton)(t)?{display:"none"}:void 0})},t.DefaultButtonContainerFC.displayName="DefaultButtonContainerFC",t.DEFAULT_TOS_INLINE_CONTAINER_LOGIN=a.default.createElement("div",{id:s.DEFAULT_ONE_TAP_INLINE_TOS_ID_LOGIN,className:"inline-tos-container"}),t.DEFAULT_TOS_INLINE_CONTAINER_REGISTER=a.default.createElement("div",{id:s.DEFAULT_ONE_TAP_INLINE_TOS_ID_REGISTER,className:"inline-tos-container"})})),define("metaserver/static/js/google_one_tap/google_one_tap_helpers",["require","exports","tslib","metaserver/static/js/api_v2/noauth_client","metaserver/static/js/core/browser","metaserver/static/js/core/notify","metaserver/static/js/core/i18n","metaserver/static/js/google_one_tap/lib","metaserver/static/js/google_one_tap/lib"],(function(e,t,n,o,a,s,i,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setGoogleOneTapDisabledBodyClass=t.initTestMock=t.showOneTapInlineGoogleButton=t.handleClientError=t.getIdentityClient=void 0,a=n.__importStar(a),t.getIdentityClient=function({googleCredentials:e,select_by:t,tos_signed:n,marketingOptedIn:s,cont_url:i}){const r={id_token:e,one_tap_platform:{".tag":"web"},select_by:t,remember_me:!0,pair_user:!1,tos_signed:n,source_url:a.get_href(),marketing_opt_in:s,cont_url:i};return(new o.NoAuthApiV2Client).ns("account").rpc("register_or_sign_in_with_1tap",r,{})},t.handleClientError=function(e){switch(e[".tag"]){case"unsupported_platform":s.Notify.error(i.intl.formatMessage({id:"zxg8L5",defaultMessage:"This platform is not supported by Google One Tap."}));break;case"unverified_email":s.Notify.error(i.intl.formatMessage({id:"8vxEe0",defaultMessage:"Verify your email with Google to sign in with this email address."}));break;case"disabled_user":s.Notify.error(i.intl.formatMessage({id:"FtHoiO",defaultMessage:"This account has been marked as inactive. Contact the team admin."}));break;case"user_already_invited_to_team":s.Notify.error(i.intl.formatMessage({id:"WPQLwi",defaultMessage:"You've already been invited. Check your email for an invite link or ask the admin to resend it."}));break;case"invalid_token":s.Notify.error(i.intl.formatMessage({id:"hcIBNz",defaultMessage:"That email address wasn't found, try checking it for typos."}));break;default:s.Notify.error(i.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))}},t.showOneTapInlineGoogleButton=function(e){const t=(null==e?void 0:e.isButtonFlow)&&!(null==e?void 0:e.isMobile),n=((null==e?void 0:e.tosPromptDisplayed)||(null==e?void 0:e.dismissReason)==l.DismissReason.inFlow)&&((null==e?void 0:e.isInline)||t);return!((null==e?void 0:e.isInline)&&(!(null==e?void 0:e.isPromptClosed)||(null==e?void 0:e.tosPromptDisplayed))||n)},t.initTestMock=function(){return n.__awaiter(this,void 0,void 0,(function*(){const e=window.location.search.split("=")[1];let t;window.google={accounts:{id:{initialize:({callback:n})=>{t=()=>{n({credential:e,select_by:"test-select-by"})}},prompt:()=>{if(!!!document.getElementById("onetap-test-modal")){const e=document.createElement("div");e.style.position="absolute",e.style.top="100px",e.style.right="150px",e.style.width="100px",e.style.height="70px";const n=document.createElement("button");n.textContent="Google OneTap test button",n.onclick=t,e.append(n),document.body.append(e)}},renderButton:()=>{if(!!!document.getElementById("onetap-test-sig-button")){const e=document.createElement("button");e.id="onetap-test-sig-button",e.textContent="Sign in with Google test button",e.onclick=t;const n=document.getElementById(r.DEFAULT_SIGNIN_BUTTON_CONTAINER_ID);n&&n.append(e)}}}}}}))};t.setGoogleOneTapDisabledBodyClass=e=>{document.body.classList.toggle(r.GOOGLE_ONE_TAP_BUTTON_PROMPT_DISABLED,e)}})),define("metaserver/static/js/auth/login/api",["require","exports","tslib","metaserver/static/js/deprecated_ajax/ajax_as_promised_jquery","metaserver/static/js/api_v2/default_user_client","metaserver/static/js/auth/login/types","metaserver/static/js/clean/viewer","metaserver/static/js/clean/viewer_refresh","metaserver/static/js/core/assert","metaserver/static/js/core/exception","metaserver/static/js/core/i18n"],(function(e,t,n,o,a,s,i,r,l,c,_){"use strict";function d(){const e=i.Viewer.get_viewer().get_users()[0];return(0,l.assert)(null!=e,"Expect user is logged in when pairing"),new a.DefaultUserApiV2Client(e)}function u(e){var t;return(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t[".tag"])?{status:s.LoginResponseStatus.ERROR,html_response:!1,message:e.message}:{status:s.LoginResponseStatus.ERROR,html_response:!1,message:_.intl.formatMessage({id:"vuVMnM",defaultMessage:"Something went wrong."})}}function g(e){return n.__awaiter(this,void 0,void 0,(function*(){const t=e.login_email,n=e.encrypted_password;(0,l.assert)(null!=t&&null!=n,"Expect login email and password not null");const o=d(),a={login_email:t,encrypted_password:n,remember_me:e.remember_me};try{const e=yield o.ns("team").rpc("account_pair_login",a,{});return e.two_factor_request?e.two_factor_request:e}catch(e){return u(e)}}))}function m(e){return n.__awaiter(this,void 0,void 0,(function*(){const t=e.login_email,n=e.encrypted_password;(0,l.assert)(null!=t&&null!=n,"Expected login email and password not null");const o=d(),a={login_email:t,encrypted_password:n,remember_me:e.remember_me};try{const e=yield o.ns("team").rpc("link_user_login",a,{});return e.two_factor_request?e.two_factor_request:e}catch(e){return u(e)}}))}function p(e){return n.__awaiter(this,void 0,void 0,(function*(){const t=e.checkpoint_token,n=e.code;(0,l.assert)(null!=t&&null!=n,"Expect checkpoint token and code not null");const o=d(),a={checkpoint_token:t,code:n,remember_me:e.remember_me};try{return yield o.ns("team").rpc("account_pair_two_factor_login",a,{})}catch(e){return u(e)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.updateDropboxPasswordsEligibility=t.submitTwoFactorForm=t.retryU2fAuthentication=t.resendTwoFactorCode=t.submitCredentialsForm=t.accountPairTwoFactorLogin=t.linkUserLogin=t.accountPairLogin=t.checkSsoState=void 0,o=n.__importStar(o),t.checkSsoState=function(e){return new Promise(t=>o.WebRequest({url:"/sso_state",data:{email:e},success:e=>t(JSON.parse(e))}))},t.accountPairLogin=g,t.linkUserLogin=m,t.accountPairTwoFactorLogin=p,t.submitCredentialsForm=function(e,t){let n;switch(e){case"multi":n="/ajax_multi_login";break;case"pairing":n="/team/join/new_pair_login_ajax";break;case"cli_link_nonce":n="/cli_link_nonce";break;case"bidirectional_pair":return g(t);case"link_user":return m(t);default:n="/ajax_login"}return new Promise((e,a)=>o.WebRequest({url:n,type:"POST",data:t,skipNotifyError:!0,success:t=>{e(JSON.parse(t))},error:(t,n,o)=>{"{"!==o[0]&&-1===o.indexOf(":")?e({status:s.LoginResponseStatus.ERROR,html_response:!1,message:o}):a(JSON.parse(o))}}))},t.resendTwoFactorCode=function(e,t){return new Promise((n,a)=>o.WebRequest({url:"/twofactor_resend",data:{backup:e,mobile_push:t},success:n,error:a}))},t.retryU2fAuthentication=function(){return new Promise((e,t)=>o.WebRequest({url:"/account/twofactor/u2f_start_authentication",success:e,error:t}))},t.submitTwoFactorForm=function(e,t){let n;switch(e){case"multi":n="/ajax_multi_verify_code";break;case"pairing":n="/team/join/new_pair_login_ajax";break;case"cli_link_nonce":n="/cli_link_twofactor";break;case"admin":n="/admin/login/twofactor";break;case"bidirectional_pair":case"link_user":return p(t);default:n="/ajax_verify_code"}return new Promise((e,a)=>o.WebRequest({url:n,type:"POST",data:t,success:t=>e(JSON.parse(t)),error:(e,t,n)=>a(JSON.parse(n))}))},t.updateDropboxPasswordsEligibility=function(e){return n.__awaiter(this,void 0,void 0,(function*(){i.Viewer.get_viewer().is_signed_in||(yield(0,r.refreshViewerAfterLogin)());try{const t=d();yield t.ns("passwords").rpc("update_freemium_eligibility",{entry_point:{".tag":e}},{})}catch(e){(0,c.reportException)({err:e,severity:"non-critical"})}}))}})),define("metaserver/static/js/auth/common/error",["require","exports","tslib","dompurify","react"],(function(e,t,n,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthError=void 0,o=n.__importDefault(o),a=n.__importDefault(a);class s extends a.default.Component{shouldComponentUpdate(e){return this.hasNewError(e.error)}hasNewError(e){var t;return!this.hasMatchingErrorMessage(e)||(null==e?void 0:e.clientTimestamp)!==(null===(t=this.props.error)||void 0===t?void 0:t.clientTimestamp)}hasMatchingErrorMessage(e){var t,n;return(null==e?void 0:e.message_html)===(null===(t=this.props.error)||void 0===t?void 0:t.message_html)&&(null==e?void 0:e.message_text)===(null===(n=this.props.error)||void 0===n?void 0:n.message_text)}render(){const{error:e,errorId:t}=this.props;return e&&e.message_html?a.default.createElement("div",{id:t,"aria-live":"polite","aria-atomic":"true",className:"text-input-error-wrapper",dangerouslySetInnerHTML:{__html:o.default.sanitize(e.message_html)}}):e&&e.message_text?a.default.createElement("div",{id:t,"aria-live":"polite","aria-atomic":"true",className:"text-input-error-wrapper"},a.default.createElement("span",{className:"error-message"},e.message_text,a.default.createElement("span",{className:"text-input-error-hidden ax-visually-hidden","aria-hidden":"true",style:{visibility:"hidden"}},e.clientTimestamp))):a.default.createElement("div",{id:t,"aria-live":"polite","aria-atomic":"true",className:"text-input-error-wrapper"})}}t.AuthError=s,s.displayName="AuthError"})),define("metaserver/static/js/auth/common/inputs/checkbox",["require","exports","tslib","dompurify","react","classnames","metaserver/static/js/auth/common/error","metaserver/static/js/auth/common/utils","metaserver/static/js/auth/common/types","dig-components/form_row","dig-components/controls","dig-components/icons","dig-components/icons/src"],(function(e,t,n,o,a,s,i,r,l,c,_,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthCheckbox=void 0,o=n.__importDefault(o),a=n.__importStar(a),s=n.__importDefault(s);const g=e=>{const{label:t,htmlFor:n,unsafeLabelHTML:s}=e;return t?a.default.createElement("label",{htmlFor:n,className:"checkbox_label"},a.default.createElement("span",null,t)):s?a.default.createElement("label",{htmlFor:n,className:"checkbox_label"},a.default.createElement("span",{dangerouslySetInnerHTML:{__html:o.default.sanitize(s)}})):null},m=e=>{const{name:t,error:n,label:s,onChange:i,className:r,checked:l,id:m,errorId:p,uxaEventName:E,disabled:h,autoFocus:I}=e,S=n&&(n.message_text||n.message_html);return a.default.createElement("div",{className:"auth__checkbox-row"},a.default.createElement(c.FormRow,{variant:"control"},a.default.createElement(_.Checkbox,{className:r,name:t,id:m,onChange:i,checked:l,"aria-checked":l,"aria-invalid":S?"true":"false","aria-describedby":p,"data-uxa-log":E,disabled:h,autoFocus:I}),a.default.createElement(g,{htmlFor:m,label:s})),a.default.createElement("div",{id:p,"aria-live":"polite","aria-atomic":"true"},S&&a.default.createElement(c.FormHelperText,{isInvalid:!0},a.default.createElement(d.UIIcon,{src:u.FailLine,size:"small"}),(null==n?void 0:n.message_html)?a.default.createElement("span",{dangerouslySetInnerHTML:{__html:o.default.sanitize(n.message_html)}}):a.default.createElement("span",null,null==n?void 0:n.message_text))))};t.AuthCheckbox=e=>{const{checked:t,className:n,disabled:o,error:c,inline:_,label:d,maestroStyle:u,name:p,onChange:E,unsafeLabelHTML:h,variant:I,uxaEventName:S}=e,O=(0,a.useMemo)(()=>(0,r.generateId)(p),[p]),T=(0,a.useMemo)(()=>(0,r.genErrorId)(O),[O]),f=c&&(c.message_text||c.message_html);if(I===l.AuthFormVariant.DIG20)return a.default.createElement(m,Object.assign({},e,{id:O,errorId:T}));const N=(0,s.default)("checkbox",I,n,{"checkbox-inline":_});let v=a.default.createElement("input",{type:"checkbox",id:O,name:p,checked:t,onChange:E,disabled:o,"aria-invalid":f?"true":"false","aria-describedby":T,"data-uxa-log":S});u&&(v=a.default.createElement("label",{className:"maestro_checkbox",htmlFor:O},v,a.default.createElement("span",null)));const G=a.default.createElement(i.AuthError,{error:c,errorId:T});return a.default.createElement("div",{className:N},!u&&G,v,a.default.createElement(g,{htmlFor:O,label:d,unsafeLabelHTML:h}),u&&G)},t.AuthCheckbox.displayName="AuthCheckbox"})),define("metaserver/static/js/auth/common/inputs/text",["require","exports","tslib","classnames","react","dompurify","metaserver/static/js/core/i18n","classnames","metaserver/static/js/auth/common/error","metaserver/static/js/auth/common/types","metaserver/static/js/auth/common/utils","metaserver/static/js/components/password_strength_meter","dig-components/text_fields","dig-components/form_row","dig-components/icons","dig-components/buttons","dig-components/icons/src","metaserver/static/js/clean/ui/input_dig","metaserver/static/js/core/browser_detection"],(function(e,t,n,o,a,s,i,r,l,c,_,d,u,g,m,p,E,h,I){"use strict";function S(e){return"boolean"==typeof e?e?c.AuthTextInputAutoComplete.ON:c.AuthTextInputAutoComplete.OFF:null!=e?e:c.AuthTextInputAutoComplete.OFF}Object.defineProperty(t,"__esModule",{value:!0}),t.AuthTextField=void 0,o=n.__importDefault(o),a=n.__importStar(a),s=n.__importDefault(s),r=n.__importDefault(r);const O=e=>{const t=S(e.autoComplete),n=e.passwordStrengthProps||{},s=i.intl.formatMessage({id:"/uvN/C",defaultMessage:"Good passwords are hard to guess. Use uncommon words or inside jokes, non-standard uPPercasing, creative spelllling, and non-obvious numbers and symbols"}),r=[e.errorId],l=e.dwgRefreshEnabled&&e.type===c.AuthTextInputType.PASSWORD,_=l&&!I.safari,[u,g]=(0,a.useState)(!0),h=a.default.useCallback(e=>{e.preventDefault(),g(e=>!e)},[g]),O=a.default.createElement("div",{className:"show-password-container--dwg-refresh"},a.default.createElement(p.IconButton,{type:"button",variant:"transparent",onClick:h,role:"switch","aria-checked":u?"false":"true","aria-controls":e.id,"aria-label":i.intl.formatMessage({id:"Y5ZvTz",defaultMessage:"Show password"})},a.default.createElement(m.UIIcon,{src:u?E.ShowLine:E.HideLine,size:"standard","aria-hidden":"true"}))),[T,f]=(0,a.useState)(!1),N=i.intl.formatMessage({id:"DYmo9x",defaultMessage:"CapsLock is on"}),v="password-capslock-warning-dwg-refresh__icon",G=a.default.createElement("img",{id:v,className:v,alt:N,src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAiIGhlaWdodD0iMTMiIHZpZXdCb3g9IjAgMCAxMCAxMyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik01IDBMMCA1LjgzMzMzTDIuOTE2NjcgNS44MzMzM0wyLjkxNjY3IDEwTDcuMDgzMzMgMTBMNy4wODMzMyA1LjgzMzMzTDEwIDUuODMzMzNMNSAwWk0yLjkxNjUgMTIuOTE2N0w3LjA4MzE3IDEyLjkxNjdWMTEuMjVMMi45MTY1IDExLjI1TDIuOTE2NSAxMi45MTY3WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg=="}),L=_?e=>{f(e.getModifierState("CapsLock"))}:void 0,C=_?e=>{f(e.getModifierState("CapsLock"))}:void 0,A=_?e=>{f(!1)}:void 0,b=a.default.createElement("div",{className:(0,o.default)("password-capslock-warning-dwg-refresh",{"password-capslock-warning-dwg-refresh--visible":T}),"aria-live":"polite"},T&&G);_&&T&&r.push(v);const y=(0,o.default)("text-input-input",e.className,{"input-error":e.hasError,"numeric-input":e.type===c.AuthTextInputType.NUMBER,"text-input-input--capslock-warning":l&&T});return a.default.createElement("div",{className:"text-input-wrapper"},(!e.value||e.persistLabel)&&a.default.createElement("label",{className:(0,o.default)({"persistent-label":e.persistLabel}),htmlFor:e.id},e.placeholder),a.default.createElement("input",{id:e.id,type:l?u?e.type:c.AuthTextInputType.TEXT:e.type,className:y,name:e.name,value:e.value,onChange:e.onChange,disabled:e.disabled,autoFocus:e.autoFocus,autoComplete:t,"aria-describedby":r.join(" ")||void 0,"aria-invalid":e.hasError?"true":"false",inputMode:e.type===c.AuthTextInputType.NUMBER?"numeric":"text",onKeyDown:e.type===c.AuthTextInputType.NUMBER?e=>{!0===e.ctrlKey||!0===e.metaKey||8===e.keyCode||46===e.keyCode||9===e.keyCode||13===e.keyCode||e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105||144===e.keyCode||37===e.keyCode||39===e.keyCode||e.preventDefault()}:L,onKeyUp:L,onClick:C,onBlur:A}),_&&b,l&&O,e.type===c.AuthTextInputType.PASSWORD&&e.measureStrength&&a.default.createElement(d.PasswordStrengthMeter,{password:e.value||"",zxcvbnPostTti:!0,className:e.variant,bubblePosition:n.position,bubbleDescription:n.description||s,bubbleClassName:n.className,dwgRefreshEnabled:e.dwgRefreshEnabled}))},T=e=>{const{disabled:t,name:n,placeholder:o,error:i,onChange:l,measureStrength:c,type:_,errorId:d}=e,p=!(!i||!i.message_text&&!i.message_html);return a.default.createElement("div",{className:"auth__input-wrapper"},c?a.default.createElement(h.password,{name:"password",className:(0,r.default)("auth__password-input",{"is-invalid":p}),measureStrength:!0,placeholder:o,onChange:l,"aria-describedby":d,"aria-invalid":p?"true":"false"}):a.default.createElement(u.TextInput,{disabled:t,isInvalid:p,name:n,onChange:l,placeholder:o,wrapperProps:{className:"auth__input-field"},type:_,"aria-describedby":d,"aria-invalid":p?"true":"false"}),a.default.createElement("div",{id:d,"aria-live":"polite","aria-atomic":"true"},p&&a.default.createElement(g.FormHelperText,{isInvalid:!0},a.default.createElement(m.UIIcon,{src:E.FailLine,size:"small"}),(null==i?void 0:i.message_html)?a.default.createElement("span",{dangerouslySetInnerHTML:{__html:s.default.sanitize(i.message_html)}}):a.default.createElement("span",null,null==i?void 0:i.message_text))))};t.AuthTextField=e=>{const{name:t,variant:n,error:s,maestroStyle:i,onChange:r,value:d,disabled:u,inputClassName:g,type:m,placeholder:p,measureStrength:E,passwordStrengthProps:h,autoComplete:I,autoFocus:f,label:N,className:v}=e,G=S(I),L=(0,a.useMemo)(()=>(0,_.generateId)(t),[t]),C=(0,a.useMemo)(()=>(0,_.genErrorId)(L),[L]);if(n===c.AuthFormVariant.DIG20)return a.default.createElement(T,Object.assign({},e,{errorId:C}));const A=i?null:v,b=(0,o.default)("text-input",n,A),y=e.styledError,w=y?a.default.createElement(y,{id:C}):a.default.createElement(l.AuthError,{errorId:C,error:s}),R=!!(y||s&&(s.message_html||s.message_text)),M=a.default.createElement("div",{className:b},!i&&w,a.default.createElement(O,{id:L,errorId:C,name:t,onChange:r,value:d,disabled:u,className:g,hasError:R,variant:n,type:m,placeholder:p,measureStrength:E,passwordStrengthProps:h,autoComplete:G,autoFocus:f||!1,persistLabel:!!e.persistLabel,dwgRefreshEnabled:e.dwgRefreshEnabled}),i&&w);if(!i)return M;const P=(0,o.default)(v,{"register-form__name-field":"email"!==m&&"password"!==m,"register-form__field":"email"===m||"password"===m});return a.default.createElement("div",{className:P},N&&a.default.createElement("label",{className:"register-form__field-label",htmlFor:L},N),M)},t.AuthTextField.displayName="AuthTextField"})),define("metaserver/static/js/auth/common/stats",["require","exports","tslib","metaserver/static/js/clean/analytics","metaserver/static/js/core/browser","metaserver/static/js/core/browser_detection","metaserver/static/js/core/exception","metaserver/static/js/auth/login/types","metaserver/static/js/metrics/index","metaserver/static/js/ux_analytics/utils"],(function(e,t,n,o,a,s,i,r,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.displayEvent=t.clickEvent=t.logUXAnalytics=t.GoogleAmpLogger=t.GoogleOneTapAmpLogger=t.AppleUXAnalyticsLogger=t.GoogleUXAnalyticsLogger=t.EmailAuthUXAnalyticsLogger=t.AuthUXAnalyticsLogger=t.AuthAMPLogger=t.AuthType=void 0,a=n.__importStar(a),s=n.__importStar(s);var _,d,u;(function(e){e.CREDENTIALS="email",e.GOOGLE="google_auth",e.GOOGLE_ONE_TAP="google_one_tap",e.APPLE="apple_auth"})(_=t.AuthType||(t.AuthType={})),(function(e){e.GOOGLE_LOGIN_START="google_login_start",e.GOOGLE_LOGIN_SUCCEEDED="google_login_succeeded",e.GOOGLE_LOGIN_REQUIRES_TWO_FACTOR="google_login_requires_two_factor",e.GOOGLE_LOGIN_FAILED="google_login_failed",e.GOOGLE_SIGNUP_START="google_signup_start",e.GOOGLE_SIGNUP_SUCCEEDED="google_signup_succeeded",e.GOOGLE_SIGNUP_FAILED="google_signup_failed"})(d||(d={})),(function(e){e.EMAIL_LOGIN_START="email_login_start",e.EMAIL_SPLIT_SIGNUP_CONTINUE="email_split_signup_continue",e.EMAIL_LOGIN_SUCCEEDED="email_login_succeeded",e.EMAIL_LOGIN_REQUIRES_TWO_FACTOR="email_login_requires_two_factor",e.EMAIL_LOGIN_REDIRECT="email_login_redirect",e.EMAIL_LOGIN_FAILED="email_login_failed",e.EMAIL_SIGNUP_START="email_signup_start",e.EMAIL_SIGNUP_SUCCEEDED="email_signup_succeeded",e.EMAIL_SIGNUP_FAILED="email_signup_failed"})(u||(u={}));const g=new Set(["form_error","user_exists","access_denied","tfa_required","sso_required","emails_do_not_match_redirect"]),m=new Set(["enable_twofactor_required","emails_do_not_match","emails_do_not_match_redirect","not_verified","email_not_verified","google_login_not_allowed","access_denied","disabled_account","tos_required","sso_required","tfa_required","requires_password","requires_twofactor","tos_required","invalid_token","missing_email","unsupported_platform","unverified_email","server_error","disabled_user","user_already_invited_to_team","no_email_in_response","requires_password_on_first_link","apple_login_not_allowed","apple_login_not_allowed_for_teams","user_cancelled_authorize"]);function p(e){return{url:a.get_href(),remember_me:e.remember_me?e.remember_me.toString():void 0,pair_user:e.pair_user?e.pair_user.toString():void 0,err_msg:e.err_msg?e.err_msg:void 0}}function E(e,t){return e&&t.has(e)?e:"unknown"}function h(){const e=[[s.chrome,"chrome"],[s.edge,"edge"],[s.mozilla,"firefox"],[s.msie,"msie"],[s.safari,"safari"]];let t="other";for(const[n,o]of e)if(n){t=o;break}return t}t.AuthAMPLogger={logSignupIntent(){O("signup/intent",{},1)},logSignupAttempt(e){O("signup/attempt",{authType:e},1)},logSignupResponse(e,t,n){"funcaptcha_response"!==n?t?O("signup/success",{authType:e},1):(O("signup/success",{authType:e},0),O("signup/failure",{authType:e,error:E(n,g)},1)):O("signup/failure",{authType:e,error:n},1)},logLoginIntent(e){O("login/intent",{loginType:e||"normal"},1)},logLoginAttempt(e,t){O("login/attempt",{authType:e,loginType:t||"normal"},1)},logCredentialsLoginResponse(e,t){const n=_.CREDENTIALS,o=e||"normal";if("funcaptcha_response"!==t)if(t===r.LoginResponseStatus.OK||t===r.LoginResponseStatus.TWOFACTOR)O("login/success",{authType:n,loginType:o},1);else{let e;switch(t){case r.LoginResponseStatus.TOS_SIGNATURE_REQUIRED:e="tos_required";break;case r.LoginResponseStatus.SSO:e="sso_required";break;case r.LoginResponseStatus.TWOFACTOR_REQUIRED:e="enable_twofactor_required";break;case r.LoginResponseStatus.RATELIMIT:e="rate_limited";break;case r.LoginResponseStatus.EXPIRED:e="login_expired";break;case r.LoginResponseStatus.PASSWORD_EXPIRED:e="password_expired";break;case r.LoginResponseStatus.PASSWORD_DECRYPTION_ERROR:e="password_descryption_error";break;case r.LoginResponseStatus.ERROR:e="generic_error";break;case"form_error":e=t;break;default:e="unknown"}O("login/success",{authType:n,loginType:o},0),O("login/failure",{authType:n,loginType:o,error:e},1)}else O("login/failure",{authType:n,loginType:o,error:t},1)},logThirdPartyLoginResponse(e,t,n,o){const a=t||"normal";n||"tfa_required"===o?O("login/success",{authType:e,loginType:a},1):(O("login/success",{authType:e,loginType:a},0),O("login/failure",{authType:e,loginType:a,error:E(o,m)},1))},log2faResponse(e,t){const n=e||"normal";if(t===r.LoginResponseStatus.OK)O("2fa/success",{loginType:n},1);else{let e;switch(t){case r.LoginResponseStatus.REQUIRES_ROLE:e="requires_role";break;case r.LoginResponseStatus.EXPIRED:e="twofactor_expired";break;case r.LoginResponseStatus.INVALID_CREDENTIALS:e="invalid_credentials";break;case r.LoginResponseStatus.ERROR:e="generic_error";break;case"u2f_error":case"code_error":e=t;break;default:e="unknown"}O("2fa/success",{loginType:n},0),O("2fa/failure",{loginType:n,error:e},1)}}},t.AuthUXAnalyticsLogger={logSignupModalShown(e,t={}){T("signup_modal_shown",Object.assign({url:a.get_href(),kind:e},t))},logLoginModalShown(e,t={}){T("login_modal_shown",Object.assign({url:a.get_href(),kind:e},t))},logSignupModalDismissed(e){T("signup_modal_dismissed",{url:a.get_href(),kind:e})},logLoginModalDismissed(e){T("login_modal_dismissed",{url:a.get_href(),kind:e})},logRecoverableErrorShown(){T("login_recoverable_error_shown",{url:a.get_href()})},logDisabledErrorShown(){T("login_disabled_error_shown",{url:a.get_href()})},logRecoverableErrorDismissed(){T("login_recoverable_error_dismissed",{url:a.get_href()})},logDisabledErrorDismissed(){T("login_disabled_error_dismissed",{url:a.get_href()})}},t.EmailAuthUXAnalyticsLogger={logLoginStart(){f(u.EMAIL_LOGIN_START)},logSplitSignupContinue(){f(u.EMAIL_SPLIT_SIGNUP_CONTINUE)},logLoginResponse(e){switch(e.status){case r.LoginResponseStatus.OK:N(u.EMAIL_LOGIN_SUCCEEDED,!0);break;case r.LoginResponseStatus.TWOFACTOR:N(u.EMAIL_LOGIN_REQUIRES_TWO_FACTOR,!0);break;case r.LoginResponseStatus.TWOFACTOR_REQUIRED:case r.LoginResponseStatus.TOS_SIGNATURE_REQUIRED:case r.LoginResponseStatus.EXPIRED:case r.LoginResponseStatus.SSO:N(u.EMAIL_LOGIN_REDIRECT,!0);break;default:N(u.EMAIL_LOGIN_FAILED,!0)}},logLoginError(){N(u.EMAIL_LOGIN_FAILED,!0)},logSignupStart(){f(u.EMAIL_SIGNUP_START)},logSignupResponse(){N(u.EMAIL_SIGNUP_SUCCEEDED,!0)},logSignupError(){N(u.EMAIL_SIGNUP_FAILED,!0)}},t.GoogleUXAnalyticsLogger={logLoginStart(){f(d.GOOGLE_LOGIN_START)},logLoginResponse(e){e.success?N(d.GOOGLE_LOGIN_SUCCEEDED,!0):"tfa_required"===e.err_msg?N(d.GOOGLE_LOGIN_REQUIRES_TWO_FACTOR,!0):N(d.GOOGLE_LOGIN_FAILED,!0)},logSuccessfulLogin(){N(d.GOOGLE_LOGIN_SUCCEEDED,!0)},logSuccessfulLoginTfaRequired(){N(d.GOOGLE_LOGIN_REQUIRES_TWO_FACTOR,!0)},logUnsuccessfulLogin(){N(d.GOOGLE_LOGIN_FAILED,!0)},logSignupStart(){f(d.GOOGLE_SIGNUP_START)},logSignupResponse(e,t){N(e?d.GOOGLE_SIGNUP_SUCCEEDED:d.GOOGLE_SIGNUP_FAILED,!0)}},t.AppleUXAnalyticsLogger={logLoginStart(){T("sia_login_start",{url:a.get_href()})},logLoginResponse(e){e.success?T("sia_login_succeeded",p(e)):"tfa_required"===e.err_msg?T("sia_login_requires_two_factor",p(e)):"requires_password_on_first_link"===e.err_msg?T("sia_login_requires_password",p(e)):T("sia_login_failed",p(e))}},t.GoogleOneTapAmpLogger={logOneTapNotShown(e){O("google_onetap_not_shown",{error:e},1)},logOneTapShown(){O("show_google_onetap",{},1)},logAuthType(e){O("authType",{selectBy:e},1)},logScriptLoadError(){O("google_onetap_script_load_error",{},1)},logScriptLoadSuccess(){O("google_onetap_script_load_success",{},1)},logCredentialsDecodeError(){O("google_onetap_credentials_decode_error",{},1)}},t.GoogleAmpLogger={logVerificationAttempt(){O("google/verification/attempt",{},1)},logVerificationResult(e,t){e?O("google/verification/success",{},1):(O("google/verification/success",{},0),O("google/verification/fail",{error:E(t,g)},1))}};const I=new Set(["/login","/register","/m/login","/m/register","/","/index","/scl/fi/","/s/"]);function S(){let e=a.get_pathname();return new Set(["/scl/fi/","/s/"]).forEach(t=>{e.includes(t)&&(e=t)}),e}function O(e,t,n=1){const o=I.has(S())&&{pagePath:S()};try{(0,l.getMetricsReporter)().createStats({ns:"web_auth",name:e},Object.assign(Object.assign(Object.assign({},t),{browser:h()}),o)).record(n)}catch(n){(0,i.reportException)({err:n,severity:i.SEVERITY.NONCRITICAL,tags:["web_auth_amp_logging","acquisition_eng"],exc_extra:Object.assign({metricName:e},t)})}}function T(e,t){o.UXAnalyticsLogger.log(e,t)}function f(e){let t=document.createElement("button");t.setAttribute("data-uxa-log",e),document.body.appendChild(t),t.style.visibility="hidden";let n=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0});t.dispatchEvent(n),document.body.removeChild(t)}function N(e,t){t?(0,c.dispatchDialogOpened)({element_id:e}):(0,c.dispatchDialogClosed)({element_id:e})}t.logUXAnalytics=T,t.clickEvent=f,t.displayEvent=N})),define("metaserver/static/js/auth/common/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthFormVariant=t.AuthButtonVariant=t.AuthTextInputAutoComplete=t.AuthTextInputType=void 0,(function(e){e.EMAIL="email",e.PASSWORD="password",e.TEXT="text",e.NUMBER="number"})(t.AuthTextInputType||(t.AuthTextInputType={})),(function(e){e.USERNAME="username",e.NEW_PASSWORD="new-password",e.CURRENT_PASSWORD="current-password",e.FULL_NAME="name",e.FIRST_NAME="given-name",e.LAST_NAME="family-name",e.ON="on",e.OFF="off"})(t.AuthTextInputAutoComplete||(t.AuthTextInputAutoComplete={})),(function(e){e.BIG="big",e.SMALL="small",e.STANDARD="standard"})(t.AuthButtonVariant||(t.AuthButtonVariant={})),(function(e){e.PAPER_COMPACT="paper-compact",e.SMALL="small",e.STANDARD="standard",e.DIG20="dig20"})(t.AuthFormVariant||(t.AuthFormVariant={}))})),define("typescript/component_libraries/dwg-components/src/components/dwg-sso-button/auth-logos/google_logo",["require","exports","tslib","react"],(function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoogleLogoDisabled=t.GoogleLogo=void 0,o=n.__importDefault(o);t.GoogleLogo=()=>o.default.createElement("svg",{width:"44px",height:"44px",viewBox:"0 0 44 44",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},o.default.createElement("defs",null,o.default.createElement("rect",{id:"path-2",x:"0",y:"0",width:"40",height:"40",rx:"2"})),o.default.createElement("g",{id:"Google-Button",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},o.default.createElement("g",{id:"9-PATCH",transform:"translate(-608.000000, -160.000000)"}),o.default.createElement("g",{id:"btn_google_light_normal",transform:"translate(-2.000000, -1.000000)"},o.default.createElement("g",{id:"logo_googleg_48dp",transform:"translate(15.000000, 15.000000)"},o.default.createElement("path",{d:"M17.64,9.20454545 C17.64,8.56636364 17.5827273,7.95272727 17.4763636,7.36363636 L9,7.36363636 L9,10.845 L13.8436364,10.845 C13.635,11.97 13.0009091,12.9231818 12.0477273,13.5613636 L12.0477273,15.8195455 L14.9563636,15.8195455 C16.6581818,14.2527273 17.64,11.9454545 17.64,9.20454545 L17.64,9.20454545 Z",id:"Shape",fill:"#4285F4"}),o.default.createElement("path",{d:"M9,18 C11.43,18 13.4672727,17.1940909 14.9563636,15.8195455 L12.0477273,13.5613636 C11.2418182,14.1013636 10.2109091,14.4204545 9,14.4204545 C6.65590909,14.4204545 4.67181818,12.8372727 3.96409091,10.71 L0.957272727,10.71 L0.957272727,13.0418182 C2.43818182,15.9831818 5.48181818,18 9,18 L9,18 Z",id:"Shape",fill:"#34A853"}),o.default.createElement("path",{d:"M3.96409091,10.71 C3.78409091,10.17 3.68181818,9.59318182 3.68181818,9 C3.68181818,8.40681818 3.78409091,7.83 3.96409091,7.29 L3.96409091,4.95818182 L0.957272727,4.95818182 C0.347727273,6.17318182 0,7.54772727 0,9 C0,10.4522727 0.347727273,11.8268182 0.957272727,13.0418182 L3.96409091,10.71 L3.96409091,10.71 Z",id:"Shape",fill:"#FBBC05"}),o.default.createElement("path",{d:"M9,3.57954545 C10.3213636,3.57954545 11.5077273,4.03363636 12.4404545,4.92545455 L15.0218182,2.34409091 C13.4631818,0.891818182 11.4259091,0 9,0 C5.48181818,0 2.43818182,2.01681818 0.957272727,4.95818182 L3.96409091,7.29 C4.67181818,5.16272727 6.65590909,3.57954545 9,3.57954545 L9,3.57954545 Z",id:"Shape",fill:"#EA4335"}),o.default.createElement("path",{d:"M0,0 L18,0 L18,18 L0,18 L0,0 Z",id:"Shape"})),o.default.createElement("g",{id:"handles_square"})))),t.GoogleLogo.displayName="GoogleLogo";t.GoogleLogoDisabled=()=>o.default.createElement("svg",{width:"44px",height:"44px",viewBox:"0 0 44 44",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},o.default.createElement("title",null,"btn_google_light_disabled_ios"),o.default.createElement("desc",null,"Created with Sketch."),o.default.createElement("defs",null,o.default.createElement("rect",{id:"path-1",x:"0",y:"0",width:"40",height:"40",rx:"2"})),o.default.createElement("g",{id:"Google-Button",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},o.default.createElement("g",{id:"9-PATCH",transform:"translate(-788.000000, -160.000000)"}),o.default.createElement("g",{id:"btn_google_light_disabled",transform:"translate(-2.000000, -1.000000)"},o.default.createElement("g",{id:"button",transform:"translate(4.000000, 4.000000)"}),o.default.createElement("path",{d:"M24.001,25.71 L24.001,22.362 L32.425,22.362 C32.551,22.929 32.65,23.46 32.65,24.207 C32.65,29.346 29.203,33 24.01,33 C19.042,33 15.01,28.968 15.01,24 C15.01,19.032 19.042,15 24.01,15 C26.44,15 28.474,15.891 30.031,17.349 L27.475,19.833 C26.827,19.221 25.693,18.501 24.01,18.501 C21.031,18.501 18.601,20.976 18.601,24.009 C18.601,27.042 21.031,29.517 24.01,29.517 C27.457,29.517 28.726,27.132 28.96,25.719 L24.001,25.719 L24.001,25.71 Z",id:"Shape-Copy",fillOpacity:"0.4",fill:"#000000"}),o.default.createElement("g",{id:"handles_square"})))),t.GoogleLogoDisabled.displayName="GoogleLogoDisabled"})),define("typescript/component_libraries/dwg-components/src/components/dwg-sso-button/index",["require","exports","tslib","react","classnames","typescript/component_libraries/dwg-components/src/atoms/dwg-box/index","typescript/component_libraries/dwg-components/src/components/dwg-lazy-icon/index","typescript/component_libraries/dwg-components/src/components/dwg-sso-button/auth-logos/google_logo","typescript/component_libraries/dwg-components/src/atoms/dwg-text/index","typescript/component_libraries/dwg-components/src/helpers/polyfills"],(function(e,t,n,o,a,s,i,r,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DWGSSOButton=void 0,o=n.__importStar(o),a=n.__importDefault(a);const _=({service:e,disabled:t,v2variant:n})=>{const l=(0,a.default)("dwg-sso-button--apple-logo",{"dwg-sso-button--apple-logo-v2":n,"dwg-sso-button--apple-logo-disabled":t});return"apple"==e?o.default.createElement(s.DWGBox,{className:(0,a.default)(l),alignItems:"center",display:"flex",justifyContent:"center"},o.default.createElement(i.DWGLazyUIIcon,{src:"AppleExternalLogo",size:"large"})):o.default.createElement(s.DWGBox,{alignItems:"center",display:"flex",justifyContent:"center",className:(0,a.default)("dwg-sso-button--google-logo",{"dwg-sso-button--google-logo-v2":n})},t?o.default.createElement(r.GoogleLogoDisabled,null):o.default.createElement(r.GoogleLogo,null))};_.displayName="Logo";t.DWGSSOButton=({children:e,classes:t,dataUxaLog:n,disabled:i=!1,onClick:r,service:d,width:u,v2variant:g=!1})=>{const m=(0,a.default)("dwg-sso-button",{"dwg-sso-button-v2":g,"dwg-sso-button--disabled":i},t),p=(0,a.default)({"dwg-sso-button--text-container-disabled ":i});return(0,o.useEffect)(()=>{(0,c.loadFocusVisiblePolyfill)()},[]),o.default.createElement(s.DWGBox,{className:m,alignItems:"center",color:"standard",backgroundColor:"core-secondary",borderColor:g?void 0:"core-primary",borderColorDisabled:"disabled","data-uxa-log":n,disabled:i,display:"flex",onClick:r,padding:0,tagName:"button",theme:"coconut-200",width:u},o.default.createElement(_,{service:d,disabled:i,v2variant:g}),o.default.createElement(s.DWGBox,{className:g?"dwg-sso-button--text-container-v2":"dwg-sso-button--text-container",display:"flex",justifyContent:"center",width:"full"},o.default.createElement(l.DWGText,{className:p,fontFamily:"atlas-grotesk",fontSize:g?14:16,fontWeight:g?"regular":"medium",lineHeight:g?16:24},e)))},t.DWGSSOButton.displayName="DWGSSOButton"})),define("metaserver/static/js/google_one_tap/one_tap_tos",["require","exports","tslib","react","react-dom","metaserver/static/js/auth/common/inputs/checkbox","metaserver/static/js/auth/common/types","dig-components/buttons","dig-components/icons","dig-components/icons/src","react-transition-group","metaserver/static/js/core/i18n","dig-components/modal","typescript/component_libraries/dwg-components/src/atoms/dwg-text/index","typescript/component_libraries/dwg-components/src/atoms/dwg-box/index","typescript/component_libraries/dwg-components/src/components/dwg-button2/index","dig-components/progress_indicators","metaserver/static/js/components/ui/css","metaserver/static/js/google_one_tap/lib","metaserver/static/js/auth/common/stats"],(function(e,t,n,o,a,s,i,r,l,c,_,d,u,g,m,p,E,h,I,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OneTapTOS=t.unmountTOS=t.displayTOS=t.TOSModalVariant=void 0,o=n.__importStar(o),a=n.__importDefault(a),(function(e){e.V1="v1",e.V2="v2"})(t.TOSModalVariant||(t.TOSModalVariant={}));t.displayTOS=e=>{let t=document.getElementById("one-tap-tos-modal-container");t||(t=document.createElement("div"),I.GSIEventManager.getGSIState().isMobile&&t.classList.add("one-tap-tos-mobile-model-container"),t.id="one-tap-tos-modal-container",t.classList.add("one-tap-tos-modal-container"));const n=(!!e.containerParentSelector&&document.getElementById(e.containerParentSelector)||document.body).appendChild(t);a.default.render(o.default.createElement(T,Object.assign({},e)),n)};t.unmountTOS=()=>{const e=document.getElementById("one-tap-tos-modal-container");e&&a.default.unmountComponentAtNode(e)};const O=({modalVariant:e,animationVariant:n,onSubmit:a,onToggle:s,onDismiss:i,showMarketingOptIn:r,isImplicit:l,googleCredentials:c})=>(n=n||e,o.default.createElement(_.CSSTransition,{in:!0,timeout:125,appear:!0,classNames:`one-tap-tos__modal-animation-${n}`,mountOnEnter:!0,unmountOnExit:!0},o.default.createElement(u.Modal.Content,{className:"one-tap-tos__modal"},o.default.createElement(t.OneTapTOS,{modalVariant:e,animationVariant:n,onSubmit:a,onToggle:s,onDismiss:i,showMarketingOptIn:r,isImplicit:l,googleCredentials:c}))));O.displayName="OneTapModal";const T=(0,h.requireCssWithComponent)(O,["/static/typescript/component_libraries/dwg-components/src/index.web-vflWvw6lp.css","/static/metaserver/static/css/dig-components/index.web-vflD7DS1H.css"]);t.OneTapTOS=({onSubmit:t,onDismiss:a,onToggle:_,showMarketingOptIn:u,modalVariant:h,animationVariant:O,isImplicit:T,googleCredentials:v})=>{const[b,y]=(0,o.useState)(!1),[w,R]=(0,o.useState)(!0),[M,P]=(0,o.useState)(!1),[D,U]=(0,o.useState)(!1),x=w?"google_onetap_signup_marketing_opt_out":"google_onetap_signup_marketing_opt_in",k=b?"google_onetap_signup_agree_to_tos_uncheck":"google_onetap_signup_agree_to_tos_check",F=e=>n.__awaiter(void 0,void 0,void 0,(function*(){if(e.preventDefault(),!b)return U(!0),void(0,S.clickEvent)(I.GoogleOneTapEvent.GOOGLE_ONE_TAP_SIGNUP_PLEASE_AGREE_TO_TOS);P(!0),(yield t(u?w:void 0))||P(!1)})),j=t=>n.__awaiter(void 0,void 0,void 0,(function*(){t.preventDefault(),P(!0),(0,S.clickEvent)(I.GoogleOneTapEvent.GOOGLE_ONE_TAP_IMPLICIT_TOS_AGREE);const[{Modal:s},{OneTapImplicitTOSConfirmationModal:i}]=yield Promise.all([new Promise((t,n)=>{e(["metaserver/static/js/components/ui/modal"],t,n)}).then(n.__importStar),new Promise((t,n)=>{e(["metaserver/static/js/google_one_tap/one_tap_implicit_tos_confirmation"],t,n)}).then(n.__importStar)]);s.showInstance(o.default.createElement(i,{id:"one_tap_implicit_tos_confirmation_modal",googleCredentials:v,onConfirm:()=>{B()},onCancel:()=>{P(!1)},onError:()=>{P(!1),s.close(),a()}}))})),B=()=>n.__awaiter(void 0,void 0,void 0,(function*(){(yield t(u?w:void 0))||P(!1)})),W=()=>{a()},z=()=>{D&&!b&&U(!1),y(!b),_(!b)},H=()=>{R(!w)};return T?o.default.createElement("form",{className:`one-tap-tos one-tap-tos-animation-${O} one-tap-tos-modal-${h} one-tap-tos-modal-animation-${O}`,onSubmit:j},o.default.createElement("div",{className:"one-tap-tos__title-container"},o.default.createElement("div",{className:"one-tap-tos__title-content"},o.default.createElement(g.DWGText,{fontFamily:"atlas-grotesk",lineHeight:20,fontSize:16,fontWeight:"medium"},f),o.default.createElement(r.IconButton,{variant:"transparent",size:"small",onClick:W,type:"button","aria-label":G,disabled:M},o.default.createElement(l.UIIcon,{src:c.CloseLine})))),o.default.createElement("div",{className:"one-tap-tos__signup-container one-tap-tos__row implicit"},M?o.default.createElement("div",{className:"one-tap-tos__loading-indicator"},o.default.createElement(E.Spinner,{"aria-valuetext":"Signing up",size:"small"})):o.default.createElement(m.DWGBox,{theme:"coconut-200"},o.default.createElement(p.DWGPrimaryButton,{label:N,size:"small",width:"full",style:{justifyContent:"center"},disableArrow:!0}))),o.default.createElement("div",{className:"one-tap-tos__terms-container one-tap-tos__row implicit"},o.default.createElement(g.DWGText,{fontFamily:"atlas-grotesk",lineHeight:18,fontSize:12,fontWeight:"regular"},A)),u&&o.default.createElement("div",{className:"one-tap-tos__terms-container one-tap-tos__row implicit"},o.default.createElement(s.AuthCheckbox,{checked:w,className:"one-tap-tos__terms-checkbox-container",disabled:M,inline:!1,label:d.intl.formatMessage({id:"puZoGX",defaultMessage:"Id like to receive direct marketing email updates from Dropbox"}),maestroStyle:!1,name:"marketing_opt_in",onChange:H,variant:i.AuthFormVariant.DIG20,uxaEventName:x})),D&&o.default.createElement(L,null)):o.default.createElement("form",{className:`one-tap-tos one-tap-tos-animation-${O} one-tap-tos-modal-${h} one-tap-tos-modal-animation-${O}`,onSubmit:F},o.default.createElement("div",{className:"one-tap-tos__title-container"},o.default.createElement("div",{className:"one-tap-tos__title-content"},o.default.createElement(g.DWGText,{fontFamily:"atlas-grotesk",lineHeight:20,fontSize:16,fontWeight:"medium"},f),o.default.createElement(r.IconButton,{variant:"transparent",size:"small",onClick:W,type:"button","aria-label":G,disabled:M},o.default.createElement(l.UIIcon,{src:c.CloseLine})))),o.default.createElement("div",{className:"one-tap-tos__terms-container one-tap-tos__row"},o.default.createElement(s.AuthCheckbox,{className:"one-tap-tos__terms-checkbox-container",variant:i.AuthFormVariant.DIG20,checked:b,disabled:M,inline:!1,label:C,maestroStyle:!1,name:"one-tap-tos-checkbox",onChange:z,uxaEventName:k,autoFocus:!0})),u&&o.default.createElement("div",{className:"one-tap-tos__terms-container one-tap-tos__row"},o.default.createElement(s.AuthCheckbox,{checked:w,className:"one-tap-tos__terms-checkbox-container",disabled:M,inline:!1,label:d.intl.formatMessage({id:"puZoGX",defaultMessage:"Id like to receive direct marketing email updates from Dropbox"}),maestroStyle:!1,name:"marketing_opt_in",onChange:H,variant:i.AuthFormVariant.DIG20,uxaEventName:x})),D&&o.default.createElement(L,null),o.default.createElement("div",{className:"one-tap-tos__signup-container one-tap-tos__row"},M?o.default.createElement("div",{className:"one-tap-tos__loading-indicator"},o.default.createElement(E.Spinner,{"aria-valuetext":"Signing up",size:"small"})):o.default.createElement(m.DWGBox,{theme:"coconut-200"},o.default.createElement(p.DWGPrimaryButton,{label:N,size:"small",width:"full",style:{justifyContent:"center"},disableArrow:!0}))))},t.OneTapTOS.displayName="OneTapTOS";const f=d.intl.formatMessage({id:"9csKpE",defaultMessage:"Continue to Dropbox"}),N=d.intl.formatMessage({id:"1XrMh2",defaultMessage:"Sign up"}),v=d.intl.formatMessage({id:"aLP5RS",defaultMessage:"Click the checkbox to agree to the terms of service"}),G=d.intl.formatMessage({id:"56IzdQ",defaultMessage:"Close sign up prompt"}),L=()=>o.default.createElement("div",{className:"one-tap-tos__error-container"},o.default.createElement(g.DWGText,{textAlign:"left",color:"alert",fontWeight:"regular",fontSize:12,lineHeight:18},v)),C=d.intl.formatMessage({id:"zZ7Lc7",defaultMessage:"I agree to the <a>Dropbox Terms</a>. Learn about how we use and protect your data in our <b>Privacy Policy</b>."},{a:e=>o.default.createElement("a",{href:"/terms",target:"_blank",rel:"noreferrer noopener","data-uxa-log":"google_onetap_signup_dropbox_terms_link"},e),b:e=>o.default.createElement("a",{href:"/privacy",target:"_blank",rel:"noreferrer noopener","data-uxa-log":"google_onetap_signup_privacy_policy_link"},e)}),A=d.intl.formatMessage({id:"yVvDRO",defaultMessage:'By clicking "Sign up" you agree to the <a>Dropbox Terms</a>. Learn about how we use and protect your data in our <b>Privacy Policy</b>.'},{a:e=>o.default.createElement("a",{href:"/terms",target:"_blank",rel:"noreferrer noopener","data-uxa-log":"google_onetap_signup_dropbox_terms_link"},e),b:e=>o.default.createElement("a",{href:"/privacy",target:"_blank",rel:"noreferrer noopener","data-uxa-log":"google_onetap_signup_privacy_policy_link"},e)})}));
//# sourceMappingURL=pkg-google_one_tap.min.js-vflsAjDzw.map