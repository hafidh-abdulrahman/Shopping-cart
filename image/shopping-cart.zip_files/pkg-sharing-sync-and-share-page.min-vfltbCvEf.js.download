define("metaserver/static/js/sharing/ui_notifications_util",["require","exports","tslib","react","metaserver/static/js/clean/em_string","metaserver/static/js/clean/ui/snackbar","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/core/browser_detection","metaserver/static/js/core/i18n","metaserver/static/js/core/browser"],(function(e,a,t,i,n,r,s,o,c,l){"use strict";function d(e,a){return r.Snackbar.sync(e,a,"sharing-notification")}function u(e){return c.intl.formatMessage({id:"Fbyffs",defaultMessage:"Shared <st>{folder_name}</st>."},{st:e=>i.default.createElement("strong",null,e),folder_name:n.Emstring.em_snippet(e,s.SNIPPET_SIZES.FILENAME)})}function g(e,a){const t=f(e);return"editor"===a?c.intl.formatMessage({id:"OlZHQn",defaultMessage:"This link allows editing. Now copy and share it.{br}{copiedUrlDisplay}"},{br:i.default.createElement("br",null),copiedUrlDisplay:t}):c.intl.formatMessage({id:"qkmyRi",defaultMessage:"This link allows viewing. Now copy and share it.{br}{copiedUrlDisplay}"},{br:i.default.createElement("br",null),copiedUrlDisplay:t})}function f(e){const a=e=>{e.preventDefault(),e.currentTarget.select()},t=(0,o.is_supported_mobile_browser)();return i.default.createElement("span",{className:"snackbar-title__link-url"},i.default.createElement("input",{readOnly:!0,autoFocus:!t,type:"text","aria-label":c.intl.formatMessage({id:"ExhGkl",defaultMessage:"Shared link URL"}),value:e,onClick:a,onFocus:a}),t&&i.default.createElement("input",{autoFocus:!0,className:"auto-focus-placeholder",value:e,readOnly:!0,type:"text","aria-label":c.intl.formatMessage({id:"ExhGkl",defaultMessage:"Shared link URL"})}))}Object.defineProperty(a,"__esModule",{value:!0}),a.failSnackbarWithHelpCenter=a.formatSuccessMessageForFolder=a.formatMessageForCopyCTASnackbar=a.showDeleteLinkSuccessSnackbar=a.showCopyLinkProgressUnsupportedBrowserSnackbar=a.showCopyLinkProgressSupportedBrowserSnackbar=a.showCopyLinkCatchallSnackbar=a.showCopyLinkEmailNotVerifiedSnackbar=a.showCopyLinkNotFoundSnackbar=a.showCopyLinkNoPermissionSnackbar=a.showCopyLinkErrorSnackbar=a.showCopyLinkCTASnackbar=a.showCopyLinkSuccessSnackbar=a.showInBandShareSuccessSnackbar=a.sharingNotificationInProgress=a.sharingNotificationSuccess=a.sharingNotificationInfo=a.sharingNotificationError=void 0,i=t.__importDefault(i),l=t.__importStar(l),a.sharingNotificationError=function(e){return r.Snackbar.fail(e,"sharing-notification")},a.sharingNotificationInfo=function(e){return r.Snackbar.generic(e,"sharing-notification")},a.sharingNotificationInProgress=d,a.sharingNotificationSuccess=function(e){return r.Snackbar.complete(e,"sharing-notification")},a.formatSuccessMessageForFolder=u,a.failSnackbarWithHelpCenter=function(e,a,t){let n;n=t||c.intl.formatMessage({id:"sGKSF8",defaultMessage:"Learn more"}),r.Snackbar.show(i.default.createElement(r.Snackbar,{actionButtonText:n,closeButtonText:c.intl.formatMessage({id:"0NA7+K",defaultMessage:"Close"}),onActionClick:()=>{l.open_tab(a)},title:e,variant:"fail",id:"sharing-notification"}))},a.showInBandShareSuccessSnackbar=function(e){r.Snackbar.complete(u(e),"sharing-notification")},a.showCopyLinkSuccessSnackbar=function(e,a){const t=(function(e,a){const t=f(e);if("editor"===a)return c.intl.formatMessage({id:"YJc3aM",defaultMessage:"Link copied. Allows editing.{br}{copiedUrlDisplay}"},{br:i.default.createElement("br",null),copiedUrlDisplay:t});if("viewer"===a)return c.intl.formatMessage({id:"EK/q5b",defaultMessage:"Link copied. Allows viewing.{br}{copiedUrlDisplay}"},{br:i.default.createElement("br",null),copiedUrlDisplay:t});return c.intl.formatMessage({id:"ejeV4I",defaultMessage:"Link copied.{br}{copiedUrlDisplay}"},{br:i.default.createElement("br",null),copiedUrlDisplay:t})})(e,a);r.Snackbar.complete(t,"sharing-notification")},a.showCopyLinkCTASnackbar=function(e,a,t,n){const s=g(e,n);r.Snackbar.show(i.default.createElement(r.Snackbar,{actionButtonText:c.intl.formatMessage({id:"zD9HBn",defaultMessage:"Copy link"}),onActionClick:a,title:s,variant:"complete",timeoutDelayMs:void 0,id:t}))},a.showDeleteLinkSuccessSnackbar=function(e,a,t){r.Snackbar.show(i.default.createElement(r.Snackbar,{actionButtonText:c.intl.formatMessage({id:"eqpbc5",defaultMessage:"Who still has access?"}),closeButtonText:c.intl.formatMessage({id:"u/p3Pl",defaultMessage:"Close"}),onActionClick:a,title:e,variant:"complete",timeoutDelayMs:5e3,id:t}))},a.showCopyLinkErrorSnackbar=function(e,a){const t=(function(e,a){const t=f(e);return c.intl.formatMessage({id:"/a2n+f",defaultMessage:"Couldn't copy the link, but we think it was a fluke. Try copying again.{br}{copiedUrlDisplay}"},{br:i.default.createElement("br",null),copiedUrlDisplay:t})})(e);r.Snackbar.failSticky(t,"sharing-notification")},a.showCopyLinkNoPermissionSnackbar=function(){const e=c.intl.formatMessage({id:"Xxcol+",defaultMessage:"Couldn't copy the link. You don't have permission to create a link to this content."});r.Snackbar.failSticky(e,"sharing-notification")},a.showCopyLinkNotFoundSnackbar=function(){const e=c.intl.formatMessage({id:"edHs1X",defaultMessage:"We can't find this file anymore. Try checking activity or folder history to see what happened."});r.Snackbar.failSticky(e,"sharing-notification")},a.showCopyLinkEmailNotVerifiedSnackbar=function(){const e=c.intl.formatMessage({id:"ymi0Ig",defaultMessage:"You can't share until you verify your email address."});r.Snackbar.failSticky(e,"sharing-notification")},a.showCopyLinkCatchallSnackbar=function(){const e=c.intl.formatMessage({id:"Mxewsd",defaultMessage:"Couldn't copy, but it might be a fluke. Try reloading the page or ask us for help."});r.Snackbar.failSticky(e,"sharing-notification")},a.showCopyLinkProgressSupportedBrowserSnackbar=function(){d(c.intl.formatMessage({id:"T1IRKv",defaultMessage:"Getting the link..."}),!0)},a.showCopyLinkProgressUnsupportedBrowserSnackbar=function(){d(c.intl.formatMessage({id:"RZHCuI",defaultMessage:"Getting the link. Copy and share it once itâ€™s ready."}),!0)},a.formatMessageForCopyCTASnackbar=g})),define("metaserver/static/js/sharing/views/rich_snackbar/api",["require","exports","tslib","metaserver/static/js/api_v2/user_client","metaserver/static/js/core/exception"],(function(e,a,t,i,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.getFileId=void 0;a.getFileId=e=>t.__awaiter(void 0,void 0,void 0,(function*(){const{userId:a,filePath:t}=e,r=new i.UserApiV2Client;try{return(yield r.ns("files").rpc("get_metadata",{path:t},{subjectUserId:a})).id}catch(e){return(0,n.reportException)({err:new Error("Failed to get file id"),severity:n.SEVERITY.CRITICAL,exc_extra:{e:e},tags:["rich_snackbar","product-growth","post-sharing-eisgn-rich-snackbar"]}),Promise.reject(e)}}))})),define("metaserver/static/js/sharing/views/rich_snackbar/exp_esign_snackbar",["require","exports","tslib","react","metaserver/static/js/clean/ui/snackbar","metaserver/static/js/core/i18n","metaserver/static/js/clean/analytics","dig-components/icons/src","metaserver/static/js/sharing/views/rich_snackbar/api","metaserver/static/js/sharing/views/rich_snackbar/exp_record_video_snackbar"],(function(e,a,t,i,n,r,s,o,c,l){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.getInBandShareSuccessEsignSnackbar=a.showInBandShareSuccessEsignSnackbar=a.handleSendForSignatureClick=void 0,i=t.__importDefault(i);var d;(function(e){e.ESIGN_SNACKBAR_SHOWN="pg_snackbar_esign_view",e.ESIGN_SNACKBAR_TRY_CLICK="pg_snackbar_esign_click",e.ESIGN_SNACKBAR_DISMISS_CLICK="pg_snackbar_esign_dismiss"})(d||(d={}));a.handleSendForSignatureClick=a=>Promise.all([new Promise((a,t)=>{e(["metaserver/static/js/integrations/hellosign_deep_integration/launcher"],a,t)}).then(t.__importStar),(0,c.getFileId)(a)]).then(([{getLauncher:e},t])=>{const{userId:i,filePath:n}=a;s.ProEventsLogger.log(d.ESIGN_SNACKBAR_TRY_CLICK,{user_id:i});const r=e();return r.init({entryPoint:"post_sharing_snackbar",file:{file_id:t,fq_path:n},source:"dropbox-file-hover-overflow-menu-send-for-esign"}),r}).then(e=>(e.launch(),e)).finally(()=>{n.Snackbar.close("sharing-notification")});a.showInBandShareSuccessEsignSnackbar=(e,t,i,r,s,o,c,l)=>n.Snackbar.show((0,a.getInBandShareSuccessEsignSnackbar)(e,t,i,r,s,o,c,l));a.getInBandShareSuccessEsignSnackbar=(e,t,c,u,g,f,S,k)=>{n.Snackbar.close("sharing-notification");let h=f?void 0:r.intl.formatMessage({id:"ACOoAR",defaultMessage:"Did you know you can get this file signed, right in Dropbox?"});const p=r.intl.formatMessage({id:"NAMRb1",defaultMessage:"Send for signature"}),_=[{name:"send_for_signature",icon:o.SendLine,text:p,onClick:a.handleSendForSignatureClick,dataUxaLog:"post_share_snackbar_esign_click"}];return S&&(_.push((0,l.getRecordVideoSnackbarAction)()),h=void 0),i.default.createElement(n.Snackbar,{title:t,id:"sharing-notification",variant:"complete",onCloseClick:()=>{k(),s.ProEventsLogger.log(d.ESIGN_SNACKBAR_DISMISS_CLICK,{user_id:u})},onShown:()=>{s.ProEventsLogger.log(d.ESIGN_SNACKBAR_SHOWN,{user_id:u})},richSnackbarProps:{actionBarAlignment:"left",actions:_,helperText:h,clickHandlerArgs:{userId:u,filePath:c||e,ns_id:g}},forceDig:!0})}})),define("metaserver/static/js/sharing/views/rich_snackbar/exp_record_video_snackbar",["require","exports","tslib","react","metaserver/static/js/clean/ui/snackbar","metaserver/static/js/core/i18n","metaserver/static/js/clean/analytics","dig-components/icons/src"],(function(e,a,t,i,n,r,s,o){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.showInBandShareSuccessRecordVideoSnackbar=a.getRecordVideoSnackbarAction=a.shouldShowInBandShareSuccessRecordVideoSnackbar=void 0,i=t.__importDefault(i);var c;(function(e){e.RECORD_VIDEO_SNACKBAR_SHOWN="pg_snackbar_record_video_view",e.RECORD_VIDEO_SNACKBAR_TRY_CLICK="pg_snackbar_record_video_click",e.RECORD_VIDEO_SNACKBAR_DISMISS_CLICK="pg_snackbar_record_video_dismiss"})(c||(c={}));const l=e=>{s.ProEventsLogger.log(c.RECORD_VIDEO_SNACKBAR_TRY_CLICK,{user_id:e.userId});const a=document.getElementById("capture-record-video-menu-button");a&&a.click(),n.Snackbar.close("sharing-notification")};a.shouldShowInBandShareSuccessRecordVideoSnackbar=e=>!!document.getElementById("capture-record-video-menu-button")&&"V2"===e;a.getRecordVideoSnackbarAction=()=>({name:"capture_record_video",icon:o.VideoLine,text:r.intl.formatMessage({id:"rzdYhe",defaultMessage:"Add commentary with video"}),onClick:l,dataUxaLog:"post_share_snackbar_record_video_click"});a.showInBandShareSuccessRecordVideoSnackbar=(e,t,o,l)=>{n.Snackbar.close("sharing-notification");n.Snackbar.show(i.default.createElement(n.Snackbar,{title:t,id:"sharing-notification",variant:"complete",onCloseClick:()=>{s.ProEventsLogger.log(c.RECORD_VIDEO_SNACKBAR_DISMISS_CLICK,{user_id:l})},onShown:()=>{s.ProEventsLogger.log(c.RECORD_VIDEO_SNACKBAR_SHOWN,{user_id:l})},richSnackbarProps:{actionBarAlignment:"left",actions:[(0,a.getRecordVideoSnackbarAction)()],helperText:r.intl.formatMessage({id:"OcVFQv",defaultMessage:"Did you know you can record a voice-over and attach it to your file?"}),clickHandlerArgs:{userId:l,filePath:o||e}},forceDig:!0}))}}));
//# sourceMappingURL=pkg-sharing-sync-and-share-page.min.js-vflNoWYfg.map