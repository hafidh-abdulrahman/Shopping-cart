define("metaserver/static/js/abuse/captcha_helper",["require","exports","tslib","metaserver/static/js/modules/constants/login_and_register","metaserver/static/js/modules/constants/page_load","metaserver/static/js/clean/web_timing_logger","metaserver/static/js/core/assert","metaserver/static/js/core/exception","metaserver/static/js/core/uri"],(function(e,t,s,a,r,i,o,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DUMMY_RESPONSE=t.BuildRecaptchaURI=t.isTest=t.LoadRecaptcha=t.ClearCaptchaPromise=t.HasCaptchaLoaded=t.captchaPromise=void 0,a=s.__importStar(a),n=s.__importStar(n);let c=!1;t.HasCaptchaLoaded=function(){return null!=t.captchaPromise},t.ClearCaptchaPromise=function(){t.captchaPromise=null},t.LoadRecaptcha=function(e,s){return void 0!==s&&(c=s),t.captchaPromise||(t.captchaPromise=e?new Promise((e,t)=>{(0,i.waitForTTI)().then(e),setTimeout(e,2500)}).then(d):d()),t.captchaPromise};function p(){const e={onload:"recaptchaOnloadCallback",render:"explicit",hl:r.USER_LOCALE.replace("_","-")};return new l.URI({scheme:"https",authority:"www.google.com",path:"/recaptcha/api.js",query:e}).toString()}function d(){return new Promise((r,i)=>{if(window.recaptchaOnloadCallback=function(){r(window.grecaptcha)},a.SHOULD_LOAD_FUNCAPTCHA&&c&&new Promise((t,s)=>{e(["metaserver/static/js/abuse/funcaptcha_modal"],t,s)}).then(s.__importStar).then(({loadFuncaptchaModal:e,recordFunCaptchaLoadingStats:t})=>{const s=performance.now();let a,r="",i=!1;try{e(),i=!0}catch(e){r=e.message}finally{a=performance.now()}t("funcaptcha_modal_loading",a-s,i,r)}),(0,t.isTest)())r(f);else{const e=document.createElement("script"),t=p();e.setAttribute("src",t);const s=window.CSP_SCRIPT_NONCE;if(!s)return n.reportException({err:new Error("CSP nonce not set"),severity:n.SEVERITY.CRITICAL,tags:["product-safety-infra","recaptcha"]}),void i();e.setAttribute("nonce",s),document.body.appendChild(e)}})}t.isTest=()=>a.IS_SELENIUM_TEST,t.BuildRecaptchaURI=p;const m={},u={};let g=0;t.DUMMY_RESPONSE="DUMMY-RESPONSE";const h=e=>{e.setAttribute("class","g-recaptcha-response"),e.setAttribute("name","g-recaptcha-response"),e.value=""},f={reset(e){const t=u[e].querySelector(".g-recaptcha-response");return h(t),!0},render(e,s,a){const r=g;g+=1,(0,o.assert)(null==e.querySelector(".g-recaptcha-response"),"can't render multiple recaptcha elements in same div");const i=document.createElement("textarea");return i.id=`g-recaptcha-response-${r}`,h(i),e.appendChild(i),u[r]=e,m[r]=()=>{const e=t.DUMMY_RESPONSE;return i.value=e,s.callback&&s.callback(e),e},r},execute:e=>Promise.resolve(m[e]())}})),define("metaserver/static/js/auth/login/2fa/authenticator_form",["require","exports","tslib","classnames","react","metaserver/static/js/core/i18n","metaserver/static/js/auth/common/inputs/text","metaserver/static/js/auth/common/types","metaserver/static/js/auth/common/utils","metaserver/static/js/auth/login/2fa/trust_checkbox"],(function(e,t,s,a,r,i,o,n,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Authenticator2FAForm=void 0,a=s.__importDefault(a),r=s.__importDefault(r);t.Authenticator2FAForm=e=>{const t=r.default.createElement("button",{className:(0,a.default)("mc-button mc-button-primary",{"inline-submit":e.inlineSubmit,"login-button":!e.inlineSubmit}),type:"submit"},i.intl.formatMessage({id:"K57Ot6",defaultMessage:"Enter"}));return r.default.createElement("form",{className:"two-factor-form clearfix 2fa-phone-form",onSubmit:e.onSubmit},e.displayHeader&&r.default.createElement("div",{className:"login-header"},i.intl.formatMessage({id:"FFqVaU",defaultMessage:"Enter Dropbox 2-step verification code"})),r.default.createElement("div",{className:"login-info two-factor-uses-authenticator"},i.intl.formatMessage({id:"sufs69",defaultMessage:"Enter the code generated by your authenticator app."})),r.default.createElement("div",{className:(0,a.default)({"inline-input-submit-pair":e.inlineSubmit,"backup-verification-code-form":e.inlineSubmit})},r.default.createElement(o.AuthTextField,{className:"login-text-input inline-input",disabled:!1,error:e.error,maestroStyle:e.maestroStyle,name:"code",onChange:e.onInputChange,value:e.value,placeholder:i.intl.formatMessage({id:"DFLqLE",defaultMessage:"6-digit code"}),type:n.AuthTextInputType.NUMBER,variant:e.variant,autoFocus:!0,autoComplete:!1,persistLabel:!0}),e.inlineSubmit&&t),!e.hideTrustCheckbox&&r.default.createElement(c.TwoFactorTrustCheckbox,{checked:e.trusted,maestroStyle:e.maestroStyle,onChange:e.onInputChange,tooltipPosition:e.trustTooltipPosition,variant:e.variant}),!e.inlineSubmit&&t,!e.hideHelp&&r.default.createElement("div",{className:"two-factor-need-help"},r.default.createElement("a",{href:(0,l.twoFactorRecoveryUrl)(e.rememberMe,e.continuationUrl),className:"twofactor_recovery_url"},i.intl.formatMessage({id:"gR0Vz1",defaultMessage:"Having trouble getting a code?"}))))}})),define("metaserver/static/js/auth/login/2fa/email_form",["require","exports","tslib","classnames","react","metaserver/static/js/core/i18n","metaserver/static/js/auth/common/inputs/text","metaserver/static/js/auth/common/types"],(function(e,t,s,a,r,i,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Email2FAForm=void 0,a=s.__importDefault(a),r=s.__importDefault(r);t.Email2FAForm=e=>{const t=r.default.createElement("button",{className:(0,a.default)("mc-button mc-button-primary",{"inline-submit":e.inlineSubmit,"login-button":!e.inlineSubmit}),type:"submit"},i.intl.formatMessage({id:"K57Ot6",defaultMessage:"Enter"}));return r.default.createElement("form",{className:"two-factor-form clearfix 2fa-email-form",onSubmit:e.onSubmit},e.displayHeader&&r.default.createElement("div",{className:"login-header"},i.intl.formatMessage({id:"FFqVaU",defaultMessage:"Enter Dropbox 2-step verification code"})),r.default.createElement("div",{className:"login-info two-factor-uses-email"},i.intl.formatMessage({id:"FuPzY9",defaultMessage:"We sent a code to {email} and any devices you’ve linked to this account. Enter the code to continue."},{span:e=>r.default.createElement("span",{className:"tfa-email"},e),email:e.email})),r.default.createElement("div",{className:(0,a.default)({"inline-input-submit-pair":e.inlineSubmit,"backup-verification-code-form":e.inlineSubmit})},r.default.createElement(o.AuthTextField,{className:"login-text-input inline-input",disabled:!1,error:e.error,maestroStyle:e.maestroStyle,name:"code",onChange:e.onInputChange,value:e.value,placeholder:i.intl.formatMessage({id:"DFLqLE",defaultMessage:"6-digit code"}),type:n.AuthTextInputType.NUMBER,variant:e.variant,autoFocus:!0,autoComplete:!1,persistLabel:!0}),e.inlineSubmit&&t),!e.inlineSubmit&&t,r.default.createElement("div",{className:"two-factor-need-help"},r.default.createElement("a",{href:"#",onClick:e.onResendCodeClick,className:"resend-two-factor-code two-factor-uses-sms"},i.intl.formatMessage({id:"HTy4qW",defaultMessage:"Resend code"}))))}})),define("metaserver/static/js/auth/login/2fa/phone_form",["require","exports","tslib","classnames","react","metaserver/static/js/core/i18n","metaserver/static/js/auth/common/inputs/text","metaserver/static/js/auth/common/types","metaserver/static/js/auth/common/utils","metaserver/static/js/auth/login/2fa/trust_checkbox"],(function(e,t,s,a,r,i,o,n,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Phone2FAForm=void 0,a=s.__importDefault(a),r=s.__importDefault(r);t.Phone2FAForm=e=>{const t=r.default.createElement("button",{className:(0,a.default)("mc-button mc-button-primary",{"inline-submit":e.inlineSubmit,"login-button":!e.inlineSubmit}),type:"submit"},i.intl.formatMessage({id:"K57Ot6",defaultMessage:"Enter"}));return r.default.createElement("form",{className:"two-factor-form clearfix 2fa-phone-form",onSubmit:e.onSubmit},e.displayHeader&&r.default.createElement("div",{className:"login-header"},i.intl.formatMessage({id:"FFqVaU",defaultMessage:"Enter Dropbox 2-step verification code"})),r.default.createElement("div",{className:"login-info two-factor-uses-sms"},i.intl.formatMessage({id:"lWPbUP",defaultMessage:"We sent a code to your phone number ending in <span>{last_two_digits}</span>."},{span:e=>r.default.createElement("span",{className:"last-two-digits"},e),last_two_digits:e.lastTwoDigits})),r.default.createElement("div",{className:(0,a.default)({"inline-input-submit-pair":e.inlineSubmit,"backup-verification-code-form":e.inlineSubmit})},r.default.createElement(o.AuthTextField,{className:"login-text-input inline-input",disabled:!1,error:e.error,maestroStyle:e.maestroStyle,name:"code",onChange:e.onInputChange,value:e.value,placeholder:i.intl.formatMessage({id:"DFLqLE",defaultMessage:"6-digit code"}),type:n.AuthTextInputType.NUMBER,variant:e.variant,autoFocus:!0,autoComplete:!1,persistLabel:!0}),e.inlineSubmit&&t),!e.hideTrustCheckbox&&r.default.createElement(c.TwoFactorTrustCheckbox,{checked:e.trusted,maestroStyle:e.maestroStyle,onChange:e.onInputChange,tooltipPosition:e.trustTooltipPosition,variant:e.variant}),!e.inlineSubmit&&t,!e.hideHelp&&r.default.createElement("div",{className:"two-factor-need-help"},r.default.createElement("a",{href:"#",onClick:e.onResendCodeClick,className:"resend-two-factor-code two-factor-uses-sms"},i.intl.formatMessage({id:"HTy4qW",defaultMessage:"Resend code"})),r.default.createElement("a",{href:(0,l.twoFactorRecoveryUrl)(e.rememberMe,e.continuationUrl),className:"twofactor_recovery_url"},i.intl.formatMessage({id:"gR0Vz1",defaultMessage:"Having trouble getting a code?"}))))}})),define("metaserver/static/js/auth/login/2fa/seckey_form",["require","exports","tslib","react","metaserver/static/js/core/i18n","metaserver/static/js/auth/login/2fa/trust_checkbox","metaserver/static/js/auth/login/types","metaserver/static/js/clean/ui/image","metaserver/static/js/clean/ui/sprite","metaserver/static/js/clean/static_urls"],(function(e,t,s,a,r,i,o,n,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SecKey2FAForm=void 0,a=s.__importDefault(a);const p=()=>a.default.createElement(n.Image,{src:(0,c.static_url)("/static/metaserver/static/images/security_keys/insert-vflkCfC4_.png"),srcHiRes:(0,c.static_url)("/static/metaserver/static/images/security_keys/insert@2x-vflTxG2RJ.png"),className:"seckey-insert"}),d=()=>a.default.createElement(n.Image,{src:(0,c.static_url)("/static/metaserver/static/images/icons/ajax-loading-small-vfl3Wt7C_.gif"),srcHiRes:(0,c.static_url)("/static/metaserver/static/images/icons/ajax-loading-small@2x-vflAxdZTP.gif"),className:"seckey-loading-status"}),m=e=>a.default.createElement("div",{className:"two-factor-seckey-instructions"},a.default.createElement("p",null,a.default.createElement("span",{style:{fontWeight:"bold"}},r.intl.formatMessage({id:"DljPpW",defaultMessage:"Insert your security key to use it"}))," ",e.securityKeyState===o.SecurityKeyState.LOADING&&a.default.createElement(d,null),e.securityKeyState===o.SecurityKeyState.FOUND&&a.default.createElement(u,null)),r.intl.formatMessage({id:"eonxEJ",defaultMessage:"After inserting, tap your key if it has a button or gold disk."})),u=()=>a.default.createElement(l.Sprite,{group:"web",name:"bulletpoint-check",alt:"",className:"seckey-loading-status"});t.SecKey2FAForm=e=>a.default.createElement("form",{className:"two-factor-form clearfix 2fa-seckey-form"},e.displayHeader&&a.default.createElement("div",{className:"login-header"},r.intl.formatMessage({id:"FFqVaU",defaultMessage:"Enter Dropbox 2-step verification code"})),a.default.createElement("div",{className:"login-info two-factor-uses-u2f"},a.default.createElement(p,null),e.securityKeyState!==o.SecurityKeyState.NOT_FOUND&&a.default.createElement(m,{securityKeyState:e.securityKeyState}),a.default.createElement("div",{className:"text-input"},a.default.createElement("div",{className:"text-input-error-wrapper"})),e.securityKeyState===o.SecurityKeyState.NOT_FOUND&&a.default.createElement("div",{className:"two-factor-seckey-instructions"},a.default.createElement("div",{style:{color:"red"}},a.default.createElement("span",{className:"error-msg"},e.error||r.intl.formatMessage({id:"uqQwD8",defaultMessage:"Key not found."}))),a.default.createElement("button",{className:"button-tertiary two-factor-seckey-retry",onClick:e.onRetry},r.intl.formatMessage({id:"n1zYou",defaultMessage:"Retry"}))),!e.hideTrustCheckbox&&a.default.createElement(i.TwoFactorTrustCheckbox,{checked:e.trusted,maestroStyle:e.maestroStyle,onChange:e.onInputChange,tooltipPosition:e.trustTooltipPosition,variant:e.variant}),a.default.createElement("div",{className:"two-factor-use-phone-instead"},a.default.createElement("a",{href:"#",onClick:e.onChange2FA},e.secondaryTwoFactorType===o.TwoFactorType.SMS?r.intl.formatMessage({id:"cDmyI0",defaultMessage:"Send SMS instead"}):r.intl.formatMessage({id:"yzAIpy",defaultMessage:"Use mobile authenticator instead"})))))})),define("metaserver/static/js/auth/login/2fa/trust_checkbox",["require","exports","tslib","react","metaserver/static/js/core/browser_detection","metaserver/static/js/core/i18n","metaserver/static/js/auth/common/inputs/checkbox","metaserver/static/js/clean/ui/sprite_div","metaserver/static/js/clean/ui/tooltip"],(function(e,t,s,a,r,i,o,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestOnlyTrustTooltipContent=t.TwoFactorTrustCheckbox=void 0,a=s.__importDefault(a),r=s.__importStar(r),n=s.__importDefault(n),l=s.__importStar(l);const c=()=>a.default.createElement("div",{className:"two-factor-trusted-info"},r.is_mobile_or_tablet()?i.intl.formatMessage({id:"UkQZnd",defaultMessage:"Trusted devices will never ask you for a security code again. You should only trust this device if you trust everyone who uses it."}):i.intl.formatMessage({id:"UraGyT",defaultMessage:"Trusted computers will never ask you for a security code again. You should only trust this computer if you trust everyone who uses it."}));t.TestOnlyTrustTooltipContent=c;const p=e=>a.default.createElement("div",{className:"tooltip-wrapper info-icon"},a.default.createElement(l.Tooltip,{position:l.TooltipPosition[e.position||"TOP"],tooltip_classname:"twofactor-trust-tooltip",tooltip_contents:a.default.createElement(c,null)},a.default.createElement(n.default,{group:"web",name:"info",alt:i.intl.formatMessage({id:"+SX5vq",defaultMessage:"More information"}),text:r.is_mobile_or_tablet()?i.intl.formatMessage({id:"+79s4f",defaultMessage:"Trust this device"}):i.intl.formatMessage({id:"Ey/8Q8",defaultMessage:"Trust this computer"}),spritePosition:"right"})));t.TwoFactorTrustCheckbox=e=>a.default.createElement(o.AuthCheckbox,{className:"remember-me",name:"trusted",checked:e.checked,inline:!0,disabled:!1,maestroStyle:e.maestroStyle,onChange:e.onChange,variant:e.variant,label:a.default.createElement(p,{position:e.tooltipPosition})})})),define("metaserver/static/js/auth/login/apple_login_button",["require","exports","tslib","react","classnames","metaserver/static/js/core/i18n","metaserver/static/js/auth/login/login_error","typescript/component_libraries/dwg-components/src/components/dwg-sso-button/index"],(function(e,t,s,a,r,i,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppleLoginButton=void 0,a=s.__importDefault(a),r=s.__importDefault(r);t.AppleLoginButton=e=>{const t=e.buttonProps||{},s=t.text||l(!!e.dwgRefreshEnabled);return a.default.createElement("div",{className:"login-form-container__apple-div"},a.default.createElement(n.DWGSSOButton,{onClick:e.onClick,classes:(0,r.default)("auth-apple"),disabled:e.disabled||t.disabled,service:"apple",width:"full",dataUxaLog:"sia_login_start",v2variant:e.dwgRefreshEnabled},s),e.error&&a.default.createElement(o.LoginError,{className:"apple-login-error",message:e.error}))};const l=e=>e?i.intl.formatMessage({id:"9wJ2LP",defaultMessage:"Continue with Apple"}):i.intl.formatMessage({id:"pTMcB4",defaultMessage:"Sign in with Apple"})})),define("metaserver/static/js/auth/login/credentials_form",["require","exports","tslib","classnames","react","metaserver/static/js/core/browser_detection","metaserver/static/js/core/i18n","metaserver/static/js/auth/common/inputs/checkbox","metaserver/static/js/auth/common/inputs/text","typescript/component_libraries/dwg-components/src/components/dwg-button2/index","metaserver/static/js/auth/common/types","metaserver/static/js/auth/common/captcha","metaserver/static/js/auth/login/login_error","metaserver/static/js/auth/login/google_login_button","metaserver/static/js/auth/login/apple_login_button","metaserver/static/js/auth/login/types","metaserver/static/js/clean/ui/image","metaserver/static/js/clean/ui/sprite_div","metaserver/static/js/clean/static_urls","metaserver/static/js/abuse/fingerprintjs_component","typescript/component_libraries/dwg-components/src/components/dwg-lazy-icon/index","typescript/component_libraries/dwg-components/src/atoms/dwg-box/index","typescript/component_libraries/dwg-components/src/atoms/dwg-text/index","metaserver/static/js/google_one_tap/containers"],(function(e,t,s,a,r,i,o,n,l,c,p,d,m,u,g,h,f,_,E,b,S,v,w,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginCredentialsForm=void 0,a=s.__importDefault(a),r=s.__importDefault(r),_=s.__importDefault(_);const R=e=>{let t="/forgot",s=e.target;return e.appendEmail&&(t=`/forgot?email_from_login=${e.email}`,s=void 0),r.default.createElement("a",{className:"forgot-password-link",href:t,target:s,"data-uxa-log":"forgot_your_password_cta","data-trackingid":"forgot_your_password_cta"},e.text||o.intl.formatMessage({id:"ovBgtz",defaultMessage:"Forgot your password?"}))},C=e=>r.default.createElement("div",{id:"navisite"},r.default.createElement("br",null),r.default.createElement("a",{href:"/navi_redirect/login",target:e.openLinkInNewTab?"_blank":void 0},o.intl.formatMessage({id:"vnuqfB",defaultMessage:"Dropbox NAVI"}))),T=e=>e.dwgRefreshEnabled?r.default.createElement(c.DWGTransparentButton,{className:"link--dwg-refresh sso-link-container",disableArrow:!0,label:o.intl.formatMessage({id:"RrPp7u",defaultMessage:"or Sign in with Dropbox credentials"}),onClick:e.onClick,href:"#"}):r.default.createElement("div",{className:"sso-optout"},o.intl.formatMessage({id:"F1g1bb",defaultMessage:"or"})," ",r.default.createElement("a",{href:"#",onClick:e.onClick},o.intl.formatMessage({id:"fRMS5E",defaultMessage:"Log in with Dropbox credentials"}))),L=()=>r.default.createElement("span",{className:"login-loading-indicator ajax-loading"},r.default.createElement(f.Image,{src:(0,E.static_url)("/static/metaserver/static/images/icons/ajax-loading-small-vfl3Wt7C_.gif"),srcHiRes:(0,E.static_url)("/static/metaserver/static/images/icons/ajax-loading-small@2x-vflAxdZTP.gif")})),I=e=>{const t=o.intl.formatMessage({id:"WH73xS",defaultMessage:"Single sign-on enabled"});return e.dwgRefreshEnabled?r.default.createElement(v.DWGBox,{className:"sso-description sso-description--dwg-refresh"},r.default.createElement(S.DWGLazyUIIcon,{src:"LockLine"}),r.default.createElement(w.DWGText,{className:"sso-description-label--dwg-refresh",fontSize:14,lineHeight:18,fontWeight:"regular",fontFamily:"atlas-grotesk"},t)):r.default.createElement("div",{className:"sso-description"},r.default.createElement(_.default,{group:"web",name:"lock",text:t}))},A=e=>r.default.createElement("div",{className:"credentials-form__fields"},r.default.createElement(l.AuthTextField,{value:e.emailValue,className:(0,a.default)("login-text-input","login-email",e.emailProps.className),onChange:e.onInputChange,disabled:e.disabled||e.emailProps.readonly||!1,label:e.emailProps.label||(e.maestroStyle?o.intl.formatMessage({id:"hK3Vsp",defaultMessage:"Email"}):void 0),placeholder:e.emailProps.placeholder||(e.maestroStyle?o.intl.formatMessage({id:"mx5U0y",defaultMessage:"you@mail.com"}):o.intl.formatMessage({id:"hK3Vsp",defaultMessage:"Email"})),error:e.emailError,styledError:e.styledEmailError,maestroStyle:e.maestroStyle,name:"login_email",type:p.AuthTextInputType.EMAIL,autoComplete:p.AuthTextInputAutoComplete.USERNAME,variant:e.variant,persistLabel:e.persistLabel}),e.ssoState===h.SsoState.OFF&&r.default.createElement(l.AuthTextField,{value:e.passwordValue,placeholder:e.passwordProps.placeholder||(e.maestroStyle?o.intl.formatMessage({id:"JtdF1I",defaultMessage:"Your password"}):o.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"})),name:"login_password",className:(0,a.default)("login-text-input","login-password",e.passwordProps.className),error:e.passwordError,inputClassName:"password-input",onChange:e.onInputChange,measureStrength:!1,label:e.passwordProps.label||(e.maestroStyle?o.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"}):void 0),maestroStyle:e.maestroStyle,disabled:e.disabled,variant:e.variant,type:p.AuthTextInputType.PASSWORD,autoComplete:p.AuthTextInputAutoComplete.CURRENT_PASSWORD,persistLabel:e.persistLabel,dwgRefreshEnabled:e.dwgRefreshEnabled}));class M extends r.default.Component{constructor(){super(...arguments),this.setCaptchaComponent=e=>{this.captchaComponent=e},this.setFingerprintJsComponent=e=>{this.fingerprintJsComponent=e},this.getVisitorId=()=>(0,b.get_visitor_id)(this.fingerprintJsComponent),this.getCaptchaResponses=()=>this.props.supportsCaptcha?(0,d.get_captcha_responses)(this.captchaComponent):{},this.handleCaptchaErrors=e=>!!this.props.supportsCaptcha&&(0,d.handle_captcha_errors)(this.captchaComponent,e),this.submitRecaptcha=()=>{this.props.supportsCaptcha?this.captchaComponent.getWrappedComponent().submit():this.props.onSubmit()}}getFingerprintJsComponent(){return this.fingerprintJsComponent}render(){var e;const t=this.props.rememberMeProps||{},s=this.props.googleLoginProps,l=this.props.appleLoginProps,f=(0,a.default)({clearfix:!this.props.hideRememberMe||!this.props.hideHelp&&(0,i.is_supported_mobile_browser)()}),_=this.props.openLinksInNewTab?"_blank":void 0,E=(0,a.default)("clearfix","credentials-form","login-form",{"sso-required":this.props.ssoState!==h.SsoState.OFF,"sso-optional":this.props.ssoState===h.SsoState.OPTIONAL}),S=s&&s.positionBelow,v=s&&!s.positionBelow,w=l&&l.positionBelow,M=l&&!l.positionBelow,N=S||w,O=v||M,P=["V1","V2"].includes(this.props.googleOneTapVariant||"")&&!this.props.fromLegacyMobile,F=P&&!(null===(e=this.props.gsiState)||void 0===e?void 0:e.isMobile),k=P?r.default.createElement("div",{className:(0,a.default)({"login-form-container__google-div":this.props.showOneTapInlineGoogleButton})},r.default.createElement(y.DefaultButtonContainerFC,{context:"signin",gsiState:this.props.gsiState})):s?r.default.createElement(u.GoogleLoginButton,{buttonProps:s.buttonProps,disabled:this.props.disabled||this.props.isSubmitting,error:this.props.googleLoginError,onClick:this.props.onGoogleLoginClick,dwgRefreshEnabled:this.props.dwgRefreshEnabled}):null,x=l?r.default.createElement(g.AppleLoginButton,{buttonProps:l.buttonProps,disabled:this.props.disabled||this.props.isSubmitting,error:this.props.appleLoginError,onClick:this.props.onAppleLoginClick,dwgRefreshEnabled:this.props.dwgRefreshEnabled}):null,D=this.props.hideHelp||this.props.ssoState===h.SsoState.REQUIRED,G=D?null:r.default.createElement(R,{email:this.props.emailValue,target:_,appendEmail:void 0===this.props.forgotPasswordProps.appendEmail||this.props.forgotPasswordProps.appendEmail,text:this.props.forgotPasswordProps.text}),j=!!this.props.dwgRefreshEnabled&&this.props.isSubmitting,U=this.props.loginButtonProps.text||o.intl.formatMessage({id:"LgJiOW",defaultMessage:"Continue"}),B=r.default.createElement(c.DWGPrimaryButton,{className:(0,a.default)("login-button--dwg-refresh",this.props.loginButtonProps.className),type:"submit",disabled:this.props.disabled||this.props.isSubmitting||this.props.loginButtonProps.disabled,label:U,disableArrow:!0,susiRefreshExpIsLoading:this.props.isSubmitting,susiRefreshExpSpinnerValueText:o.intl.formatMessage({id:"TD8ILD",defaultMessage:"Submitting"}),susiRefreshExpPreloadProgressIndicators:!0,"data-uxa-log":"login_form_submit_button"}),H=this.props.dwgRefreshEnabled?B:r.default.createElement("button",{className:(0,a.default)("login-button","signin-button","button-primary",this.props.loginButtonProps.className),type:"submit",disabled:this.props.disabled||this.props.isSubmitting||this.props.loginButtonProps.disabled},this.props.ssoState===h.SsoState.OFF&&r.default.createElement("div",{className:"signin-text"},this.props.loginButtonProps.text||o.intl.formatMessage({id:"raLp6W",defaultMessage:"Sign in"})),this.props.ssoState!==h.SsoState.OFF&&r.default.createElement("div",{className:"sso-text"},o.intl.formatMessage({id:"LgJiOW",defaultMessage:"Continue"}))),W=r.default.createElement("div",{className:"hr-label"},r.default.createElement("span",{className:"hr-label__text"},o.intl.formatMessage({id:"F1g1bb",defaultMessage:"or"}))),V=this.props.variant===p.AuthFormVariant.PAPER_COMPACT,q=this.props.isPaperLogin;let K,J;(function(e){e[e.INLINE_WITH_LOGIN_BUTTON=0]="INLINE_WITH_LOGIN_BUTTON",e[e.ON_NEW_LINE=1]="ON_NEW_LINE",e[e.BELOW_FORM=2]="BELOW_FORM"})(K||(K={})),J=N||V?q&&!V?K.BELOW_FORM:K.INLINE_WITH_LOGIN_BUTTON:K.ON_NEW_LINE;const X=!!this.props.gsiState&&this.props.gsiState.isInline;return r.default.createElement("div",{className:"login-form-container--subcontainer"},v&&k,X&&r.default.createElement(y.DefaultContainerFC,{context:"signin",gsiState:this.props.gsiState}),F&&y.DEFAULT_TOS_INLINE_CONTAINER_LOGIN,M&&x,O&&!this.props.hideCredentialFields&&W,r.default.createElement("form",{className:E,onSubmit:this.props.onLoginClick,method:"POST",noValidate:!0},!this.props.hideCredentialFields&&r.default.createElement(A,{disabled:this.props.disabled||j,emailError:this.props.emailError,styledEmailError:this.props.styledEmailError,emailProps:this.props.emailProps,emailValue:this.props.emailValue,maestroStyle:this.props.maestroStyle,onInputChange:this.props.onInputChange,passwordError:this.props.passwordError,passwordProps:this.props.passwordProps,passwordValue:this.props.passwordValue,ssoState:this.props.ssoState,variant:this.props.variant,persistLabel:this.props.persistLabel,dwgRefreshEnabled:this.props.dwgRefreshEnabled}),this.props.dwgRefreshEnabled&&!D&&r.default.createElement("div",{className:"login-help--dwg-refresh"},G),this.props.loginError&&!this.props.dwgRefreshEnabled&&r.default.createElement(m.LoginError,{message:this.props.loginError}),r.default.createElement("div",{className:this.props.dwgRefreshEnabled?"sso-container--dwg-refresh":f},this.props.ssoState!==h.SsoState.OFF&&r.default.createElement(I,{dwgRefreshEnabled:this.props.dwgRefreshEnabled}),this.props.dwgRefreshEnabled&&this.props.ssoState===h.SsoState.OPTIONAL&&r.default.createElement(T,{onClick:this.props.onSsoChangeClick,dwgRefreshEnabled:this.props.dwgRefreshEnabled}),r.default.createElement("div",{className:(0,a.default)({"login-submit-container--dwg-refresh":this.props.dwgRefreshEnabled})},!this.props.hideRememberMe&&r.default.createElement(n.AuthCheckbox,{checked:this.props.rememberMeValue,className:"remember-me",disabled:t.disabled||this.props.disabled||j,inline:void 0===t.inline||t.inline,label:t.label||o.intl.formatMessage({id:"ztezCK",defaultMessage:"Remember me"}),maestroStyle:this.props.maestroStyle,name:"remember_me",onChange:this.props.onInputChange,variant:this.props.dwgRefreshEnabled?p.AuthFormVariant.DIG20:this.props.variant}),J===K.INLINE_WITH_LOGIN_BUTTON&&G,!V&&!this.props.hideCredentialFields&&H,!this.props.dwgRefreshEnabled&&this.props.isSubmitting&&r.default.createElement(L,null)),!this.props.dwgRefreshEnabled&&this.props.ssoState===h.SsoState.OPTIONAL&&r.default.createElement(T,{onClick:this.props.onSsoChangeClick,dwgRefreshEnabled:!!this.props.dwgRefreshEnabled}),!this.props.dwgRefreshEnabled&&J===K.ON_NEW_LINE&&r.default.createElement("div",{className:"login-need-help"},G),this.props.showNaviSiteLogin&&r.default.createElement(C,{openLinkInNewTab:this.props.openLinksInNewTab}),V&&H)),S&&k,w&&x,!this.props.dwgRefreshEnabled&&J===K.BELOW_FORM&&r.default.createElement("div",{className:"login-need-help"},G),this.props.supportsCaptcha&&r.default.createElement(d.Captcha,{ref:this.setCaptchaComponent,email:this.props.emailValue,onSubmit:this.props.onSubmit,onReady:this.props.onCaptchaReady,source:"LOGIN"}),r.default.createElement(b.FingerprintJs,{ref:this.setFingerprintJsComponent,source:"LOGIN"}))}}t.LoginCredentialsForm=M,M.displayName="LoginCredentialsForm"})),define("metaserver/static/js/auth/login/email_error_banner",["require","exports","tslib","react","metaserver/static/js/components/ui/css","dig-components/banner","dig-components/icons","dig-components/icons/src","dig-components/typography","dig-components/buttons","metaserver/static/js/core/i18n"],(function(e,t,s,a,r,i,o,n,l,c,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginEmailDisabledErrorBanner=t.LoginEmailRecoverableErrorBanner=void 0,a=s.__importDefault(a),t.LoginEmailRecoverableErrorBanner=function(e){return a.default.createElement(d,{descriptionText:e.recoverableErrorMessage,onCreateNewAccount:e.onCreateNewAccount,onRequestClose:e.onRequestClose,bannerId:"login_recoverable_email_error",id:e.id})},t.LoginEmailDisabledErrorBanner=function(e){return a.default.createElement(d,{descriptionText:e.disabledErrorMessage,onCreateNewAccount:e.onCreateNewAccount,onReRegister:e.onReRegister,onRequestClose:e.onRequestClose,bannerId:"login_disabled_email_error",id:e.id})};const d=(0,r.requireCssWithComponent)(e=>{const{learnMoreAriaLabel:t,learnMoreText:s,reRegisterButtonText:r,createANewAccountButtonText:d,titleText:m}={learnMoreText:p.intl.formatMessage({id:"o4l0fJ",defaultMessage:"Learn more"}),learnMoreAriaLabel:p.intl.formatMessage({id:"OfSk0L",defaultMessage:"Learn more about being deleted from a Dropbox team."}),reRegisterButtonText:p.intl.formatMessage({id:"cEOkYU",defaultMessage:"Re-register email"}),createANewAccountButtonText:p.intl.formatMessage({id:"DpXKIj",defaultMessage:"Create a new account"}),titleText:p.intl.formatMessage({id:"XK9XCq",defaultMessage:"This account is deleted"})};return a.default.createElement(i.Banner,{className:"login-form-email-error-banner",id:e.id,onRequestClose:e.onRequestClose,type:"alert",variant:"rich",withCloseButton:"close",withLeftPictogram:a.default.createElement(o.PictogramIcon,{src:n.WarningPictogram})},a.default.createElement(i.Banner.Message,null,a.default.createElement(l.Title,{size:"small"},m),a.default.createElement(l.Text,null,e.descriptionText," ",a.default.createElement(l.Link,{"aria-label":t,"data-trackingid":"email-error-banner-learn-more",href:"/help/508"},s))),a.default.createElement(i.Banner.Actions,null,a.default.createElement(c.Button,{"data-uxa-log":`${e.bannerId}_reregister_click`,disabled:!Boolean(e.onReRegister),onClick:e.onReRegister,type:"button",variant:"outline"},r),a.default.createElement(c.Button,{"data-uxa-log":`${e.bannerId}_create_a_new_account_click`,onClick:e.onCreateNewAccount,variant:"transparent",type:"button"},d)))},["/static/metaserver/static/css/dig-components/index.web-vflD7DS1H.css"])})),define("metaserver/static/js/auth/login/form",["require","exports","tslib","classnames","react","metaserver/static/js/core/assert","metaserver/static/js/core/browser","metaserver/static/js/core/exception","metaserver/static/js/core/html","metaserver/static/js/core/notify","metaserver/static/js/core/uri","metaserver/static/js/auth/common/types","metaserver/static/js/auth/common/utils","metaserver/static/js/auth/login/2fa/authenticator_form","metaserver/static/js/auth/login/2fa/email_form","metaserver/static/js/auth/login/2fa/phone_form","metaserver/static/js/auth/login/2fa/seckey_form","metaserver/static/js/auth/login/api","metaserver/static/js/auth/login/credentials_form","metaserver/static/js/auth/login/sso_utils","metaserver/static/js/auth/login/types","metaserver/static/js/components/ui/css","metaserver/static/js/core/i18n","metaserver/static/js/profile_services/profile_services_constants","metaserver/static/js/profile_services/profile_services_link","metaserver/static/js/auth/authenticator","metaserver/static/js/security/passwords","metaserver/static/js/auth/common/stats","metaserver/static/js/fedramp/fedramp_util","metaserver/static/js/auth/login/email_error_banner","metaserver/static/js/abuse/fingerprintjs_component","metaserver/static/js/google_one_tap/lib","metaserver/static/js/admin/registration_source_constants","metaserver/static/js/google_one_tap/google_one_tap_helpers"],(function(e,t,s,a,r,i,o,n,l,c,p,d,m,u,g,h,f,_,E,b,S,v,w,y,R,C,T,L,I,A,M,N,O,P){"use strict";var F;Object.defineProperty(t,"__esModule",{value:!0}),t.TestOnlyLoginStep=t.TestOnlyLoginFormComponent=t.LoginForm=void 0,a=s.__importDefault(a),r=s.__importDefault(r),o=s.__importStar(o),_=s.__importStar(_),y=s.__importDefault(y),C=s.__importStar(C),M=s.__importStar(M),(function(e){e[e.CREDENTIALS_OR_SSO=0]="CREDENTIALS_OR_SSO",e[e.EMAIL_2FA=1]="EMAIL_2FA",e[e.PHONE_2FA=2]="PHONE_2FA",e[e.AUTHENTICATOR_2FA=3]="AUTHENTICATOR_2FA",e[e.SECKEY_2FA=4]="SECKEY_2FA"})(F||(F={})),t.TestOnlyLoginStep=F;class k extends r.default.Component{constructor(e){var t;super(e),this.testOnlyGetSsoChecker=()=>this.ssoChecker,this.setCredentialsFormComponent=e=>{this.credentialsFormComponent=e},this.testOnlyGetCredentialsFormComponent=()=>this.credentialsFormComponent,this.listenForContextChanges=()=>{this.clearContextChangesListener(),N.GSIEventManager.createGSIEventListener(N.GSIEvent.SSO_REQUIRED,this.handleContextChange)},this.clearContextChangesListener=()=>{N.GSIEventManager.removeGSIEventListener(N.GSIEvent.SSO_REQUIRED,this.handleContextChange)},this.handleContextChange=()=>{const e=N.GSIEventManager.getGSIState().email;this.setState({email:e}),this.setState({ssoState:S.SsoState.REQUIRED})},this.onInputChange=e=>{const t=e.currentTarget,s={},a=Object.assign({},this.state.localErrors);let r=!1;switch(t.name){case"login_email":s.email=t.value,a.email=void 0,a.styledEmailError=void 0,r=!0;break;case"login_password":s.password=t.value,a.password=void 0;break;case"remember_me":s.rememberMe=t.checked;break;case"trusted":s.trusted=t.checked;break;case"code":s.twoFactorCode=t.value,a.twoFactor=void 0}s.localErrors=a,this.setState(s,()=>{r&&this.ssoChecker.checkSsoState(s.email,this.onSsoStateUpdate)})},this.onSsoStateUpdate=(e,t)=>{e===this.state.email&&this.setState({ssoState:t})},this.onSsoChangeClick=()=>{(0,i.assert)(this.state.ssoState===S.SsoState.OPTIONAL,"User can change SSO state only when it is optional",{tags:["react-login-form"]}),this.setState({ssoState:S.SsoState.OFF})},this.generateThirdPartyAuthUrl=(e,t)=>{const s={fname:e.profile.given_name,lname:e.profile.family_name,email:e.profile.email,picture_url:e.profile.picture_url,refresh_token:e.refresh_token,email_sig:e.email_sig,automatic_redirect:t.toString(),cont:this.props.continuationUrl||"/"};return this.props.googleLoginProps&&this.props.googleLoginProps.signupTag&&(s.signup_tag=this.props.googleLoginProps.signupTag),this.props.googleLoginProps&&this.props.googleLoginProps.signupEndpoint&&(s.signup_endpoint=this.props.googleLoginProps.signupEndpoint,"login"==this.props.googleLoginProps.signupEndpoint?s.signup_tag=O.RegistrationSource.LOGIN_PAGE_SIGNUP_WITH_GOOGLE:"register"==this.props.googleLoginProps.signupEndpoint&&(s.signup_tag=O.RegistrationSource.REGISTER_PAGE_SIGN_UP_WITH_GOOGLE)),String(new p.URI({path:"/third_party_signup"}).updateQuery(s))},this.handleGoogleCallback=e=>s.__awaiter(this,void 0,void 0,(function*(){L.AuthAMPLogger.logThirdPartyLoginResponse(L.AuthType.GOOGLE,this.props.type,e.success,e.err_msg),L.GoogleUXAnalyticsLogger.logLoginResponse(e);let t=(0,I.getFedrampRedirectUrlIfApplicable)(e.is_fedramp_user||!1,this.props.continuationUrl||"/");if(e.profile&&!M.isTest()&&(yield this.credentialsFormComponent.getFingerprintJsComponent().getWrappedComponent().invokeFPJSIframeAndLog(e.profile.email)),e.success)this.handleLoginFormEvent(S.LoginFormEvent.GOOGLE_LOGIN_SUCCESS),!1!==this.props.canRedirect?(c.Notify.success(w.intl.formatMessage({id:"Ce9FpX",defaultMessage:"Log in successful! Your browser will be redirected in a few seconds."})),o.redirect(t)):e.is_fedramp_user&&!this.props.forceOnLoginSuccess?(t=(0,I.getFedrampRedirectUrlIfApplicable)(!0,this.props.continuationUrl||o.get_href()),o.redirect(t)):this.props.onLoginSuccess&&this.props.onLoginSuccess({display_name:e.display_name,id:e.user_id,email:e.profile.email,is_fedramp_user:e.is_fedramp_user});else if("emails_do_not_match_redirect"===e.err_msg){const t=this.props.googleLoginProps,s=t&&t.customErrorHandlers;if(s&&s.emailsDoNotMatchRedirect)s.emailsDoNotMatchRedirect(e);else{L.GoogleUXAnalyticsLogger.logSignupStart();const t=this.generateThirdPartyAuthUrl(e,!0);o.redirect(t)}}else if("emails_do_not_match"===e.err_msg)if("pairing"!==this.props.type&&this.props.variant===d.AuthFormVariant.STANDARD){const t=this.generateThirdPartyAuthUrl(e,!1),s=w.intl.formatMessage({id:"6AHSKo",defaultMessage:"Oops! We couldn’t find a Dropbox account matching that email. <a>Click here to create one.</a>"},{a:e=>r.default.createElement("a",{className:"third-party-signup-link",href:t,"data-uxa-log":"google_signup_start"},e)});this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{googleLogin:s})})}else e.localized_error?c.Notify.error(e.localized_error):c.Notify.error(w.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}));else if("tos_required"===e.err_msg){const t=new p.URI({path:"/account/complete_registration_page"}).updateQuery({finish_web_auth:"true",remember_me:e.remember_me.toString(),cont:this.props.continuationUrl||"/"});o.redirect(t.toString())}else if("tfa_required"===e.err_msg){const s=new p.URI({path:"/verify_code"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});o.redirect(s.toString())}else if("enable_twofactor_required"===e.err_msg){const s=new p.URI({path:"/twofactor"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});o.redirect(s.toString())}else if("not_verified"===e.err_msg){const s=new p.URI({path:"/show_password_form"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});o.redirect(s.toString())}else if("email_not_verified"===e.err_msg){const t=w.intl.formatMessage({id:"S6RuBm",defaultMessage:"Before you can sign in, you’ll need to verify your account with Google {email}"},{email:e.profile.email});c.Notify.error(new l.HTML(`<span>${t}</span>`),30)}else e.localized_error?c.Notify.error(e.localized_error):c.Notify.error(w.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."})),"google_login_not_allowed"!==e.err_msg&&"sso_required"!==e.err_msg||(this.setState({email:e.profile.email}),this.ssoChecker.checkSsoState(e.profile.email,this.onSsoStateUpdate))})),this.onGoogleLoginClick=()=>{this.handleLoginFormEvent(S.LoginFormEvent.GOOGLE_LOGIN_CLICK),this.setState({localErrors:{}}),L.AuthAMPLogger.logLoginAttempt(L.AuthType.GOOGLE,this.props.type);const e=!!this.props.googleLoginProps&&!1!==this.props.googleLoginProps.popup;(new R.ProfileServicesLinkingHandler).auth_service_login_web(y.default.GOOGLE,this.handleGoogleCallback,"login_form",e?R.AuthWindowOption.POP_UP:R.AuthWindowOption.REDIRECT,this.state.rememberMe,this.props.continuationUrl||"/","pairing"===this.props.type)},this.handleAppleCallback=e=>s.__awaiter(this,void 0,void 0,(function*(){L.AuthAMPLogger.logThirdPartyLoginResponse(L.AuthType.APPLE,this.props.type,e.success,e.err_msg),L.AppleUXAnalyticsLogger.logLoginResponse(e);let t=(0,I.getFedrampRedirectUrlIfApplicable)(e.is_fedramp_user||!1,this.props.continuationUrl||"/");if(e.profile&&!M.isTest()&&(yield this.credentialsFormComponent.getFingerprintJsComponent().getWrappedComponent().invokeFPJSIframeAndLog(e.profile.email)),e.success)this.handleLoginFormEvent(S.LoginFormEvent.APPLE_LOGIN_SUCCESS),!1!==this.props.canRedirect?(c.Notify.success(w.intl.formatMessage({id:"ZJmJez",defaultMessage:"Sign in successful! Your browser will be redirected in a few seconds."})),o.redirect(t)):e.is_fedramp_user&&!this.props.forceOnLoginSuccess?(t=(0,I.getFedrampRedirectUrlIfApplicable)(!0,this.props.continuationUrl||o.get_href()),o.redirect(t)):this.props.onLoginSuccess&&this.props.onLoginSuccess({display_name:e.display_name,id:e.user_id,email:e.profile.email,is_fedramp_user:e.is_fedramp_user});else if("no_email_in_response"===e.err_msg){const e=w.intl.formatMessage({id:"oFA/9f",defaultMessage:"Sign in failed. If you’d like to sign in with Apple again, <a>see how in our help center</a>. You could also sign in with your Dropbox account email and password."},{a:e=>`<a href="/help/accounts-billing/settings-sign-in/apple-sign-in-error">${e}</a>`});c.Notify.error(new l.HTML(`<span>${e}</span>`),30)}else if("tfa_required"===e.err_msg){const s=new p.URI({path:"/verify_code"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});o.redirect(s.toString())}else if("enable_twofactor_required"===e.err_msg){const s=new p.URI({path:"/twofactor"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});o.redirect(s.toString())}else if("requires_password_on_first_link"===e.err_msg){const s=new p.URI({path:"/show_password_form"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});o.redirect(s.toString())}else if("emails_do_not_match"===e.err_msg){const t=w.intl.formatMessage({id:"8cKJMG",defaultMessage:"We couldn’t find a Dropbox account matching the email {email}. <a1>Sign up for a new account</a1> or <a2>get help signing in</a2> to an existing account."},{a1:e=>`<a href="/individual/plans-comparison?_tk=sia_nomatch_plan_web">${e}</a1>`,a2:e=>`<a href="/help/accounts-billing/settings-sign-in/sign-in-with-apple?_tk=sia_nomatch_help_web">${e}</a2>`,email:e.profile.email});c.Notify.error(new l.HTML(`<span>${t}</span>`),30)}else e.localized_error?c.Notify.error(e.localized_error):c.Notify.error(w.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."})),"apple_login_not_allowed"===e.err_msg&&(this.setState({email:e.profile.email}),this.ssoChecker.checkSsoState(e.profile.email,this.onSsoStateUpdate))})),this.onAppleLoginClick=()=>{this.handleLoginFormEvent(S.LoginFormEvent.APPLE_LOGIN_CLICK),this.setState({localErrors:{}}),L.AuthAMPLogger.logLoginAttempt(L.AuthType.APPLE,this.props.type),L.AppleUXAnalyticsLogger.logLoginStart();const e=!!this.props.appleLoginProps&&!1!==this.props.appleLoginProps.popup;(new R.ProfileServicesLinkingHandler).auth_service_login_web(y.default.APPLE,this.handleAppleCallback,"login_form",e?R.AuthWindowOption.POP_UP:R.AuthWindowOption.REDIRECT,this.state.rememberMe,this.props.continuationUrl||"/","pairing"===this.props.type)},this.credentialsFormData=()=>{const e=Object.assign(Object.assign(Object.assign({login_email:this.state.email,cont:this.props.continuationUrl||"/",remember_me:this.state.rememberMe},this.credentialsFormComponent.getCaptchaResponses()),this.credentialsFormComponent.getVisitorId()),this.props.additionalData);if(void 0===this.props.encryptionOptions)return Promise.reject(new Error("Must provide encryption options"));const t=this.state.ssoState===S.SsoState.OFF?this.state.password:"";return(0,T.wrapPassword)(t,this.props.encryptionOptions).then(t=>(e.encrypted_password=t,Promise.resolve(e)))},this.handleLoginSuccess=e=>s.__awaiter(this,void 0,void 0,(function*(){if(this.handleLoginFormEvent(S.LoginFormEvent.LOGIN_IMMEDIATE_SUCCESS,{userInfo:e}),this.state.didEnterIncorrectPassword&&(yield _.updateDropboxPasswordsEligibility("incorrect_password")),!1!==this.props.canRedirect){const t=(0,I.getFedrampRedirectUrlIfApplicable)(e.is_fedramp_user||!1,e.cont_override||this.props.continuationUrl||"/");return o.redirect(t)}if(e.is_fedramp_user&&!this.props.forceOnLoginSuccess){const e=(0,I.getFedrampRedirectUrlIfApplicable)(!0,this.props.continuationUrl||o.get_href());return o.redirect(e)}return this.props.onLoginSuccess?this.props.onLoginSuccess(e):o.redirect("/")})),this.handleSuccessResponse=e=>{switch(this.setState({isSubmitting:!1}),L.AuthAMPLogger.logCredentialsLoginResponse(this.props.type,e.status),L.EmailAuthUXAnalyticsLogger.logLoginResponse(e),e.status){case S.LoginResponseStatus.ERROR:const t=e.html_response?new l.HTML(e.message):e.message;return c.Notify.error(t);case S.LoginResponseStatus.EXPIRED:return o.redirect(e.cont);case S.LoginResponseStatus.OK:const s={id:e.id,email:e.email,display_name:e.display_name,locale:e.locale,is_fedramp_user:e.is_fedramp_user,cont_override:e.cont_override};this.handleLoginSuccess(s);break;case S.LoginResponseStatus.PASSWORD_EXPIRED:return this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{email:{message_text:w.intl.formatMessage({id:"3EEu7s",defaultMessage:"The password of the account associated with this email has expired. Please login to this account and update its password before pairing."})}})});case S.LoginResponseStatus.RATELIMIT:return this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{email:{message_text:w.intl.formatMessage({id:"7k/CMy",defaultMessage:"You’ve tried to log in too many times. Please try again in a few minutes."})}})});case S.LoginResponseStatus.TWOFACTOR_REQUIRED:case S.LoginResponseStatus.TOS_SIGNATURE_REQUIRED:return o.redirect(e.cont);case S.LoginResponseStatus.TWOFACTOR:e.checkpoint_token&&this.setState({checkpointToken:e.checkpoint_token}),e.use_email_2fa?this.setState({primaryTwoFactorType:S.TwoFactorType.EMAIL,currentStep:F.EMAIL_2FA}):e.u2f_challenge&&C.canUseAuthenticator(this.generateU2fRequest(e.u2f_challenge))?(this.setState({primaryTwoFactorType:S.TwoFactorType.SEC_KEY,currentStep:F.SECKEY_2FA}),e.last_two_digits?this.setState({lastTwoDigits:e.last_two_digits,secondaryTwoFactorType:S.TwoFactorType.SMS}):this.setState({secondaryTwoFactorType:S.TwoFactorType.AUTHENTICATOR}),this.kickOffU2f(e.u2f_challenge)):e.last_two_digits?this.setState({primaryTwoFactorType:S.TwoFactorType.SMS,lastTwoDigits:e.last_two_digits,secondaryTwoFactorType:void 0,currentStep:F.PHONE_2FA}):this.setState({primaryTwoFactorType:S.TwoFactorType.AUTHENTICATOR,lastTwoDigits:void 0,secondaryTwoFactorType:void 0,currentStep:F.AUTHENTICATOR_2FA});break;case S.LoginResponseStatus.SSO:return o.unsafeRedirect(e.sso_url);case S.LoginResponseStatus.PASSWORD_DECRYPTION_ERROR:return o.redirect(e.cont)}},this.handleServerErrors=e=>{if(L.AuthAMPLogger.logCredentialsLoginResponse(this.props.type,e.funcaptcha_response?"funcaptcha_response":"form_error"),this.credentialsFormComponent.handleCaptchaErrors(e))return void setTimeout(()=>{this.isCaptchaReady||(0,m.notifyCaptchaNotLoaded)()},1e4);L.EmailAuthUXAnalyticsLogger.logLoginError();const t={};e.login_email?t.email=e.login_email:t.email=void 0,e.login_password?t.password=e.login_password:t.password=void 0,e["failed-login-invalid-email-password"]?(t.login=w.intl.formatMessage({id:"kfg1Pg",defaultMessage:"Oops! It looks like you may have forgotten your password. <a>Click here to reset it.</a>"},{a:e=>r.default.createElement("a",{href:"/forgot"},e)}),this.setState({didEnterIncorrectPassword:!0})):t.login=void 0,e["account-is-disabled"]&&e.login_email&&e.login_email.message_text&&this.props.onCreateNewAccountClick&&this.props.onReRegisterClick&&(t.styledEmailError=t=>(L.AuthUXAnalyticsLogger.logDisabledErrorDismissed(),r.default.createElement(A.LoginEmailDisabledErrorBanner,{disabledErrorMessage:e.login_email.message_text,onCreateNewAccount:this.props.onCreateNewAccountClick,onReRegister:()=>this.props.onReRegisterClick(this.state.email),onRequestClose:()=>{L.AuthUXAnalyticsLogger.logDisabledErrorDismissed(),this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{styledEmailError:void 0})})},id:t.id})),t.email=void 0),e["account-is-recoverable"]&&e.login_email&&e.login_email.message_text&&this.props.onCreateNewAccountClick&&(t.styledEmailError=t=>(L.AuthUXAnalyticsLogger.logRecoverableErrorDismissed(),r.default.createElement(A.LoginEmailRecoverableErrorBanner,{onCreateNewAccount:this.props.onCreateNewAccountClick,onRequestClose:()=>{L.AuthUXAnalyticsLogger.logRecoverableErrorDismissed(),this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{styledEmailError:void 0})})},recoverableErrorMessage:e.login_email.message_text,id:t.id})),t.email=void 0),this.setState({localErrors:t}),this.setState({isSubmitting:!1})},this.onCredentialsFormSubmit=()=>s.__awaiter(this,void 0,void 0,(function*(){L.EmailAuthUXAnalyticsLogger.logLoginStart(),this.setState({isSubmitting:!0}),this.state.email&&!M.isTest()&&(yield this.credentialsFormComponent.getFingerprintJsComponent().getWrappedComponent().invokeFPJSIframeAndLog(this.state.email)),this.credentialsFormData().then(e=>{_.submitCredentialsForm(this.props.type,e).then(this.handleSuccessResponse).catch(this.handleServerErrors)}).catch(e=>{let t,s;e.isBrowserNotSupported?(t="user-error",s=w.intl.formatMessage({id:"rWb8d2",defaultMessage:"Dropbox doesn’t support your browser. For a better experience, upgrade to the latest version of a modern browser like Chrome, Firefox, Edge, or Safari."})):(t="critical",s=w.intl.formatMessage({id:"dNlIBC",defaultMessage:"There was a problem completing this request."})),(0,n.reportException)({err:e,severity:t,tags:["react-login-form"]}),this.setState({isSubmitting:!1}),c.Notify.error(s)})})),this.onLoginClick=e=>{e.preventDefault(),L.AuthAMPLogger.logLoginAttempt(L.AuthType.CREDENTIALS,this.props.type),this.handleLoginFormEvent(S.LoginFormEvent.LOGIN_CLICK),this.credentialsFormComponent.submitRecaptcha()},this.handleResendCodeSuccess=e=>{let t;switch(e){case S.TwoFactorResendResponse.OK:return c.Notify.success(w.intl.formatMessage({id:"vdqTup",defaultMessage:"We sent you a code. It may take a few minutes to arrive."}));case S.TwoFactorResendResponse.RATELIMIT:t=w.intl.formatMessage({id:"7k/CMy",defaultMessage:"You’ve tried to log in too many times. Please try again in a few minutes."});break;case S.TwoFactorResendResponse.UNREACHABLE:t=w.intl.formatMessage({id:"G6HUee",defaultMessage:"We couldn’t reach your phone number. Are you sure it’s correct?"});break;case S.TwoFactorResendResponse.EXPIRED:t=w.intl.formatMessage({id:"l5AyQn",defaultMessage:"Sorry, your phone code has expired. Please log in again."});break;case S.TwoFactorResendResponse.BADCARRIER:t=w.intl.formatMessage({id:"ffjRA4",defaultMessage:"Unfortunately, your carrier isn’t supported at this time."});break;case S.TwoFactorResendResponse.INVALIDNUMBER:t=w.intl.formatMessage({id:"1P05hM",defaultMessage:"That isn’t a valid phone number."});break;case S.TwoFactorResendResponse.NOTAMOBILE:t=w.intl.formatMessage({id:"aI/ARD",defaultMessage:"That phone number doesn’t appear to be a valid mobile number."});break;default:return c.Notify.error(w.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))}this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{twoFactor:{message_text:t}})})},this.resendCode=()=>{var e,t,s,a;const r=_.resendTwoFactorCode(null!==(t=null===(e=this.props.additionalData)||void 0===e?void 0:e.backup)&&void 0!==t&&t,null!==(a=null===(s=this.props.additionalData)||void 0===s?void 0:s.mobile_push)&&void 0!==a&&a);r.then(this.handleResendCodeSuccess),r.catch(()=>{c.Notify.error(w.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))})},this.handleTwoFactorSuccess=e=>{switch(L.AuthAMPLogger.log2faResponse(this.props.type,e.status),e.status){case S.LoginResponseStatus.OK:this.state.currentStep===F.SECKEY_2FA&&this.setState({securityKeyState:S.SecurityKeyState.FOUND});const t={id:e.id,email:e.email,display_name:e.display_name,locale:e.locale,is_fedramp_user:e.is_fedramp_user,cont_override:e.cont_override};this.handleLoginSuccess(t);break;case S.LoginResponseStatus.ERROR:c.Notify.error(e.message);break;case S.LoginResponseStatus.REQUIRES_ROLE:case S.LoginResponseStatus.EXPIRED:this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{email:{message_text:e.message}}),currentStep:F.CREDENTIALS_OR_SSO});break;case S.LoginResponseStatus.INVALID_CREDENTIALS:this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{password:{message_text:e.message}}),currentStep:F.CREDENTIALS_OR_SSO});break;default:c.Notify.error(w.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))}},this.twoFactorFormData=()=>{const e=Object.assign({remember_me:this.state.rememberMe,cont:this.props.continuationUrl||"/",code:this.state.twoFactorCode,trusted:this.state.trusted},this.props.additionalData);return this.state.checkpointToken?Object.assign({checkpoint_token:this.state.checkpointToken},e):e},this.submitTwoFactor=()=>{this.setState({isSubmitting:!0});const e=_.submitTwoFactorForm(this.props.type,this.twoFactorFormData());e.then(this.handleTwoFactorSuccess),e.catch(e=>{L.AuthAMPLogger.log2faResponse(this.props.type,e.u2f?"u2f_error":e.code?"code_error":"unknown"),this.state.currentStep===F.SECKEY_2FA&&e.u2f?this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{securityKey:e.u2f.message_text}),securityKeyState:S.SecurityKeyState.NOT_FOUND}):e.code?this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{twoFactor:e.code})}):c.Notify.error(w.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))}),e.finally(()=>{this.setState({isSubmitting:!1})})},this.onPhone2FASubmit=e=>{e.preventDefault(),this.submitTwoFactor()},this.onAuthenticator2FASubmit=e=>{e.preventDefault(),this.submitTwoFactor()},this.generateU2fRequest=e=>{const t=JSON.parse(e),s={challenge_id:t.challenge_id};for(const e of Object.keys(C.PROTOCOLS))s[e]=t[e]&&JSON.parse(t[e]);return s},this.kickOffU2f=e=>s.__awaiter(this,void 0,void 0,(function*(){const t=this.generateU2fRequest(e);if(C.canUseAuthenticator(t))try{const e=yield C.sign(t);this.state.currentStep===F.SECKEY_2FA&&this.setState({twoFactorCode:JSON.stringify(e)},()=>this.submitTwoFactor())}catch(e){this.state.currentStep===F.SECKEY_2FA&&this.setState({securityKeyState:S.SecurityKeyState.NOT_FOUND}),(0,i.assert)(!1,`U2F Error - ${e}`,{tags:["react-login-form","u2f"]})}})),this.switch2FA=()=>{let e;(0,i.assert)(this.state.primaryTwoFactorType===S.TwoFactorType.SEC_KEY,"Unexpected two factor choice switch",{tags:["react-login-form"]}),this.state.secondaryTwoFactorType===S.TwoFactorType.SMS?(e=F.PHONE_2FA,this.resendCode()):e=F.AUTHENTICATOR_2FA,this.setState({twoFactorCode:"",primaryTwoFactorType:this.state.secondaryTwoFactorType,secondaryTwoFactorType:void 0,currentStep:e})},this.onRetryU2f=()=>{this.setState({securityKeyState:S.SecurityKeyState.LOADING});const e=_.retryU2fAuthentication();e.then(this.kickOffU2f),e.catch(()=>{this.setState({securityKeyState:S.SecurityKeyState.NOT_FOUND}),c.Notify.error(w.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))})},this.onCaptchaReady=()=>{this.isCaptchaReady=!0},(0,i.assert)(!1!==e.canRedirect||!!e.onLoginSuccess,"Need an on login success handler if we cannot redirect the user",{tags:["react-login-form"]}),this.ssoChecker=new b.SsoStateChecker,this.isCaptchaReady=!1;let a=F.CREDENTIALS_OR_SSO,u=void 0,g=void 0,h=void 0;e.twoFactorOnlyProps&&(e.twoFactorOnlyProps.u2fChallenge&&!(null===(t=e.additionalData)||void 0===t?void 0:t.backup)&&C.canUseAuthenticator(this.generateU2fRequest(e.twoFactorOnlyProps.u2fChallenge))?(a=F.SECKEY_2FA,u=S.TwoFactorType.SEC_KEY,e.twoFactorOnlyProps.lastTwoDigits?(g=S.TwoFactorType.SMS,h=e.twoFactorOnlyProps.lastTwoDigits):g=S.TwoFactorType.AUTHENTICATOR):e.twoFactorOnlyProps.lastTwoDigits?(a=F.PHONE_2FA,u=S.TwoFactorType.SMS,h=e.twoFactorOnlyProps.lastTwoDigits):(a=F.AUTHENTICATOR_2FA,u=S.TwoFactorType.AUTHENTICATOR)),this.state={currentStep:a,email:e.emailProps&&e.emailProps.initialValue||"",isSubmitting:!1,lastTwoDigits:h,localErrors:{},password:"",primaryTwoFactorType:u,secondaryTwoFactorType:g,rememberMe:e.rememberMeCheckboxProps&&e.rememberMeCheckboxProps.checked||!1,securityKeyState:S.SecurityKeyState.LOADING,ssoState:S.SsoState.OFF,trusted:e.twoFactorTrustCheckboxProps&&e.twoFactorTrustCheckboxProps.checked||!1,twoFactorCode:"",checkpointToken:void 0,shouldDisableForm:!0,didEnterIncorrectPassword:!1}}componentDidUpdate(e,t){["V1","V2"].includes(this.props.googleOneTapVariant||"")&&t.isSubmitting!==this.state.isSubmitting&&(0,P.setGoogleOneTapDisabledBodyClass)(this.state.isSubmitting)}handleLoginFormEvent(e,t){(0,m.pushMarketingEvent)(e,this.props.pushConversionDataReadyMarketingEvent),this.props.onLoginFormEvent&&this.props.onLoginFormEvent(e,t)}componentDidMount(){this.setState({shouldDisableForm:!1}),this.listenForContextChanges(),this.props.twoFactorOnlyProps||L.AuthAMPLogger.logLoginIntent(this.props.type),this.props.twoFactorOnlyProps&&this.props.twoFactorOnlyProps.u2fChallenge&&this.state.currentStep===F.SECKEY_2FA&&this.kickOffU2f(this.props.twoFactorOnlyProps.u2fChallenge),this.state.email&&this.ssoChecker.checkSsoState(this.state.email,this.onSsoStateUpdate)}get shouldDisableForm(){return!!this.props.disabled||this.state.shouldDisableForm}get supportsCaptcha(){return!this.props.hideCredentialFields&&!["multi","pairing","cli_link_nonce"].includes(this.props.type)}render(){var e,t,s,i;let o;switch(this.state.currentStep){case F.CREDENTIALS_OR_SSO:o=r.default.createElement(E.LoginCredentialsForm,{ref:this.setCredentialsFormComponent,disabled:this.shouldDisableForm,emailError:this.state.localErrors.email,styledEmailError:this.state.localErrors.styledEmailError,emailProps:this.props.emailProps||{},emailValue:this.state.email,forgotPasswordProps:this.props.forgotPasswordProps||{},googleLoginError:this.state.localErrors.googleLogin,googleLoginProps:this.props.googleLoginProps,appleLoginError:this.state.localErrors.appleLogin,appleLoginProps:this.props.appleLoginProps,hideCredentialFields:this.props.hideCredentialFields||!1,hideHelp:this.props.hideHelp||!1,hideRememberMe:this.props.hideRememberMe||!1,isPaperLogin:this.props.isPaperLogin||!1,isSubmitting:this.state.isSubmitting,loginButtonProps:this.props.loginButtonProps||{},loginError:this.state.localErrors.login,maestroStyle:this.props.maestroStyle||!1,onGoogleLoginClick:this.onGoogleLoginClick,onAppleLoginClick:this.onAppleLoginClick,onInputChange:this.onInputChange,onLoginClick:this.onLoginClick,openLinksInNewTab:!!this.props.openLinksInNewTab,onSsoChangeClick:this.onSsoChangeClick,onSubmit:this.onCredentialsFormSubmit,onCaptchaReady:this.onCaptchaReady,passwordError:this.state.localErrors.password,passwordProps:this.props.passwordProps||{},passwordValue:this.state.password,persistLabel:!!this.props.persistLabel,rememberMeProps:this.props.rememberMeCheckboxProps||{},rememberMeValue:this.state.rememberMe,showNaviSiteLogin:!!this.props.showNaviSiteLogin,ssoState:this.state.ssoState,supportsCaptcha:this.supportsCaptcha,variant:this.props.variant||d.AuthFormVariant.STANDARD,googleOneTapVariant:this.props.googleOneTapVariant,gsiState:this.props.gsiState,showOneTapInlineGoogleButton:this.props.showOneTapInlineGoogleButton,dwgRefreshEnabled:this.props.dwgRefreshEnabled,fromLegacyMobile:this.props.fromLegacyMobile});break;case F.PHONE_2FA:o=r.default.createElement(h.Phone2FAForm,{continuationUrl:this.props.continuationUrl,displayHeader:null!==(e=this.props.twoFactorDisplayHeader)&&void 0!==e&&e,error:this.state.localErrors.twoFactor,hideHelp:this.props.hideHelp||!1,hideTrustCheckbox:this.props.hideRememberMe||!1,inlineSubmit:void 0===this.props.twoFactorSubmitButtonInline||this.props.twoFactorSubmitButtonInline,lastTwoDigits:this.state.lastTwoDigits||"",maestroStyle:this.props.maestroStyle||!1,onInputChange:this.onInputChange,onResendCodeClick:this.resendCode,onSubmit:this.onPhone2FASubmit,rememberMe:this.state.rememberMe,trusted:this.state.trusted,trustTooltipPosition:this.props.twoFactorTrustCheckboxProps&&this.props.twoFactorTrustCheckboxProps.tooltipPosition,value:this.state.twoFactorCode,variant:this.props.variant||d.AuthFormVariant.STANDARD});break;case F.EMAIL_2FA:o=r.default.createElement(g.Email2FAForm,{displayHeader:null!==(t=this.props.twoFactorDisplayHeader)&&void 0!==t&&t,email:this.state.email,error:this.state.localErrors.twoFactor,inlineSubmit:void 0===this.props.twoFactorSubmitButtonInline||this.props.twoFactorSubmitButtonInline,maestroStyle:this.props.maestroStyle||!1,onInputChange:this.onInputChange,onSubmit:this.onPhone2FASubmit,value:this.state.twoFactorCode,variant:this.props.variant||d.AuthFormVariant.STANDARD,onResendCodeClick:this.resendCode});break;case F.AUTHENTICATOR_2FA:o=r.default.createElement(u.Authenticator2FAForm,{continuationUrl:this.props.continuationUrl,displayHeader:null!==(s=this.props.twoFactorDisplayHeader)&&void 0!==s&&s,error:this.state.localErrors.twoFactor,hideHelp:this.props.hideHelp||!1,hideTrustCheckbox:this.props.hideRememberMe||!1,inlineSubmit:void 0===this.props.twoFactorSubmitButtonInline||this.props.twoFactorSubmitButtonInline,maestroStyle:this.props.maestroStyle||!1,onInputChange:this.onInputChange,onSubmit:this.onAuthenticator2FASubmit,rememberMe:this.state.rememberMe,trusted:this.state.trusted,trustTooltipPosition:this.props.twoFactorTrustCheckboxProps&&this.props.twoFactorTrustCheckboxProps.tooltipPosition,value:this.state.twoFactorCode,variant:this.props.variant||d.AuthFormVariant.STANDARD});break;case F.SECKEY_2FA:o=r.default.createElement(f.SecKey2FAForm,{displayHeader:null!==(i=this.props.twoFactorDisplayHeader)&&void 0!==i&&i,error:this.state.localErrors.securityKey,hideTrustCheckbox:this.props.hideRememberMe||!1,maestroStyle:this.props.maestroStyle||!1,onChange2FA:this.switch2FA,onInputChange:this.onInputChange,onRetry:this.onRetryU2f,trusted:this.state.trusted,trustTooltipPosition:this.props.twoFactorTrustCheckboxProps&&this.props.twoFactorTrustCheckboxProps.tooltipPosition,secondaryTwoFactorType:this.state.secondaryTwoFactorType,securityKeyState:this.state.securityKeyState,variant:this.props.variant||d.AuthFormVariant.STANDARD})}const n=(0,a.default)("login-form-container",this.props.variant,this.props.className,{"login-form-container--centered":this.props.centered,"login-form-container--maestro":this.props.maestroStyle});return r.default.createElement("div",{className:n},r.default.createElement("div",{className:"regular-login-forms"},o))}}t.TestOnlyLoginFormComponent=k,k.displayName="LoginFormComponent",t.LoginForm=(0,v.requireCssWithComponent)(k,["/static/metaserver/static/css/components/exp_cards-vfls5BO1G.css","/static/metaserver/static/css/components/login_form-vfl4LrmVK.css","/static/metaserver/static/css/components/button-vfl7d2xHj.css","/static/metaserver/static/css/legacy_packages/components-vfl86pl5V.css","/static/metaserver/static/css/login_or_register-vfl4Cdb1R.css","/static/metaserver/static/css/scooter/scooter-scoped-vflhkBqI_.css","/static/metaserver/static/css/spectrum/index.web-vflJy4G-t.css","/static/metaserver/static/css/dig-components/index.web-vflD7DS1H.css","/static/typescript/component_libraries/dwg-components/src/index.web-vflWvw6lp.css","/static/metaserver/static/css/recaptcha_challenge-vflrcf67y.css","/static/metaserver/static/css/recaptcha_v2_challenge-vflYEW-GO.css"])})),define("metaserver/static/js/auth/login/google_login_button",["require","exports","tslib","react","classnames","metaserver/static/js/core/i18n","metaserver/static/js/auth/login/login_error","typescript/component_libraries/dwg-components/src/components/dwg-sso-button/index"],(function(e,t,s,a,r,i,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoogleLoginButton=void 0,a=s.__importDefault(a),r=s.__importDefault(r);t.GoogleLoginButton=e=>{const t=e.buttonProps||{},s=t.text||l(!!e.dwgRefreshEnabled);return a.default.createElement("div",{className:"login-form-container__google-div"},a.default.createElement(n.DWGSSOButton,{onClick:e.onClick,classes:(0,r.default)("auth-google"),disabled:e.disabled||t.disabled,service:"google",width:"full",dataUxaLog:"google_login_start",v2variant:e.dwgRefreshEnabled},s),e.error&&a.default.createElement(o.LoginError,{className:"google-login-error",message:e.error}))};const l=e=>e?i.intl.formatMessage({id:"ZSNwEY",defaultMessage:"Continue with Google"}):i.intl.formatMessage({id:"SgtygT",defaultMessage:"Sign in with Google"})})),define("metaserver/static/js/auth/login/login_error",["require","exports","tslib","react","classnames"],(function(e,t,s,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginError=void 0,a=s.__importDefault(a),r=s.__importDefault(r);t.LoginError=e=>{const t=(0,r.default)("c-card","c-card--error",e.className);return a.default.createElement("div",{className:t},e.message)}})),define("metaserver/static/js/auth/login_or_register/login_register_container",["require","exports","tslib","react","react-intl","classnames","metaserver/static/js/core/i18n","metaserver/static/js/components/ui/css","metaserver/static/js/auth/login_or_register/logging_util","metaserver/static/js/auth/login_or_register/types","metaserver/static/js/auth/login/form","metaserver/static/js/auth/register/form","typescript/component_libraries/dwg-components/src/components/dwg-button2/index","typescript/component_libraries/dwg-components/src/atoms/dwg-text/index","metaserver/static/js/google_one_tap/lib","metaserver/static/js/google_one_tap/google_one_tap_helpers","dig-components/typography","ts-key-enum","metaserver/static/js/google_one_tap/google_one_tap_platform"],(function(e,t,s,a,r,i,o,n,l,c,p,d,m,u,g,h,f,_,E){"use strict";var b;Object.defineProperty(t,"__esModule",{value:!0}),t.TestOnlyStatelessLoginRegisterContainer=t.LoginRegisterContainer=t.StatelessLoginRegisterContainer=t.SwitchLinkLocationEnum=void 0,a=s.__importStar(a),i=s.__importDefault(i),(function(e){e.TOP="top",e.BOTTOM="bottom"})(b=t.SwitchLinkLocationEnum||(t.SwitchLinkLocationEnum={}));const S=(0,r.defineMessages)({registerHeader:{id:"P09UfX",defaultMessage:"Create an account"},loginHeader:{id:"raLp6W",defaultMessage:"Sign in"},switchToRegisterLinkLabel:{id:"91fajJ",defaultMessage:"create an account"},switchToLoginLinkLabel:{id:"/bdGRh",defaultMessage:"log in"}}),v=({switchLinkLabel:e,onSwitchLinkAction:t,switchLinkUxaId:s,hideSwitchOrText:r=!1,href:i})=>a.default.createElement("div",{className:"login-register-switch"},!r&&a.default.createElement("span",null,`${o.intl.formatMessage({id:"F1g1bb",defaultMessage:"or"})} `),a.default.createElement(f.Link,{className:"login-register-switch-link",onClick:t,onKeyDown:e=>{e.target instanceof HTMLAnchorElement&&[_.Key.Enter," "].includes(e.key)&&(e.preventDefault(),e.target.click())},hasNoUnderline:!0,href:i||"#","data-uxa-log":s,role:"button",tabIndex:0},e));v.displayName="SwitchLink";const w=o.intl.formatMessage({id:"/S+lpO",defaultMessage:"or create an account"}),y=o.intl.formatMessage({id:"NMORe3",defaultMessage:"or sign in"}),R=({label:e,href:t,dataUxaTag:s,tabIndex:r})=>a.default.createElement(m.DWGTransparentButton,{className:"link--dwg-refresh",label:e,href:t,disableArrow:!0,"data-uxa-log":s,tabIndex:r});R.displayName="RefreshLink";const C=({className:e,hideHeader:t,headerText:s,switchLinkLocation:r,switchLinkLabel:o,onSwitchLinkAction:n,switchLinkUxaId:l,children:c,href:p,hideSwitchOrText:d=!1,dwgRefreshEnabled:m=!1})=>{const g=m?a.default.createElement("div",{className:"toggle-link-container--dwg-refresh"},a.default.createElement(R,{href:p||"#",label:o,dataUxaTag:l,tabIndex:0})):a.default.createElement(v,{onSwitchLinkAction:n,switchLinkLabel:o,switchLinkUxaId:l,hideSwitchOrText:d,href:p}),h=m?a.default.createElement("div",{className:"form-header--dwg-refresh"},a.default.createElement(u.DWGText,{fontFamily:"sharp-grotesk-23-book",fontSize:20,fontWeight:"regular",lineHeight:24,textAlign:"left"},s)):a.default.createElement("div",{className:"login-register-header"},s);return a.default.createElement("div",{className:(0,i.default)("login-register-part",e)},a.default.createElement("div",{className:m?"header-and-toggle-container--dwg-refresh":"clearfix"},!t&&h,r===b.TOP&&g),c,r===b.BOTTOM&&g)};C.displayName="AuthFormWithHeader";const T=e=>{var t,{switchLinkProps:r={switchLinkLocation:b.TOP},hideHeaders:n=!1,currentMode:l,setLoginRegisterMode:m,gsiState:u}=e,f=s.__rest(e,["switchLinkProps","hideHeaders","currentMode","setLoginRegisterMode","gsiState"]);const{className:_,loginHeader:E,registerHeader:v,loginFormProps:R,registerFormProps:T,dwgRefreshVariant:L}=f,{switchLinkLocation:I,switchToRegisterLinkLabel:A,switchToLoginLinkLabel:M,switchLinkLoginHref:N,switchLinkLoginUxa:O,switchLinkRegisterHref:P,switchLinkRegisterUxa:F}=r,k=["V1","V2"].includes(L||"OFF"),x=(0,i.default)("login-register-container",{"login-register-container--dwg-refresh":k},{"login-register-container--dwg-refresh-v2":"V2"===L},_,null!==(t=R.variant)&&void 0!==t?t:T.variant,[`login-register-container--link-${I}`]),[D,G]=a.default.useState(void 0),j=!!(null==u?void 0:u.formDisabled),U=(0,h.showOneTapInlineGoogleButton)(u),B=a.default.createElement(C,{className:(0,i.default)("login-register-login-part",{"current-form":l===c.Mode.LOGIN,[g.GOOGLE_ONE_TAP_DISABLED_FORM]:j}),hideHeader:n,headerText:null!=E?E:o.intl.formatMessage(S.loginHeader),switchLinkLocation:I,switchLinkLabel:k?w:null!=A?A:o.intl.formatMessage(S.switchToRegisterLinkLabel),onSwitchLinkAction:()=>{(void 0===N||N.startsWith("#"))&&(m(c.Mode.REGISTER),g.GSIEventManager.sendGSIEvent(g.GSIEvent.CONTEXT_CHANGE_SIGNUP))},switchLinkUxaId:O||"create_an_account_toggle",href:N,dwgRefreshEnabled:k},a.default.createElement(p.LoginForm,Object.assign({},R,{onCreateNewAccountClick:()=>{G(void 0),m(c.Mode.REGISTER),g.GSIEventManager.sendGSIEvent(g.GSIEvent.CONTEXT_CHANGE_SIGNUP)},onReRegisterClick:e=>{G(e),m(c.Mode.REGISTER),g.GSIEventManager.sendGSIEvent(g.GSIEvent.CONTEXT_CHANGE_SIGNUP)},gsiState:u,disabled:j,showOneTapInlineGoogleButton:U,dwgRefreshEnabled:k}))),H=a.default.createElement(C,{className:(0,i.default)("login-register-register-part",{"current-form":l===c.Mode.REGISTER,[g.GOOGLE_ONE_TAP_DISABLED_FORM]:j}),hideHeader:n,headerText:null!=v?v:o.intl.formatMessage(S.registerHeader),switchLinkLocation:I,switchLinkLabel:k?y:null!=M?M:o.intl.formatMessage(S.switchToLoginLinkLabel),onSwitchLinkAction:()=>{(void 0===P||P.startsWith("#"))&&(m(c.Mode.LOGIN),g.GSIEventManager.sendGSIEvent(g.GSIEvent.CONTEXT_CHANGE_SIGNIN))},switchLinkUxaId:F||"log_in_toggle",href:P,dwgRefreshEnabled:k},a.default.createElement(d.RegisterForm,Object.assign({},T,{onEmailChanged:()=>G(void 0),emailPrefill:D,gsiState:u,disabled:j,showOneTapInlineGoogleButton:U,dwgRefreshEnabled:k,googleOneTapInlinePosition:"V2"===L?"TOP":"BOTTOM"})));return a.default.createElement("div",{className:x},B,H)};t.TestOnlyStatelessLoginRegisterContainer=T,T.displayName="StatelessLoginRegisterContainerView",t.StatelessLoginRegisterContainer=(0,n.requireCssWithComponent)(T,["/static/metaserver/static/css/components/login_or_register-vflKrrdVi.css","/static/metaserver/static/css/legacy_packages/components-vfl86pl5V.css","/static/metaserver/static/css/components/button-vfl7d2xHj.css","/static/metaserver/static/css/scooter/scooter-scoped-vflhkBqI_.css","/static/metaserver/static/css/recaptcha_challenge-vflrcf67y.css","/static/metaserver/static/css/recaptcha_v2_challenge-vflYEW-GO.css"]);t.LoginRegisterContainer=e=>{const[s,r]=(0,a.useState)(e.defaultRegister?c.Mode.REGISTER:c.Mode.LOGIN);(0,a.useEffect)(()=>(0,l.logAuthIntent)(s),[s]);const i=e.googleOneTapVariant&&["V2"].includes(e.googleOneTapVariant),o=(0,E.UseGsiState)(i);return a.default.createElement(t.StatelessLoginRegisterContainer,Object.assign({currentMode:s,setLoginRegisterMode:r,gsiState:o},e))},t.LoginRegisterContainer.displayName="LoginRegisterContainer"})),define("metaserver/static/js/auth/login_or_register/logging_util",["require","exports","metaserver/static/js/clean/analytics","metaserver/static/js/clean/auth_event_logger","metaserver/static/js/auth/common/stats","metaserver/static/js/auth/login_or_register/types"],(function(e,t,s,a,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logModalMiscActivity=t.logModalShown=t.logModalDismissed=t.logAuthIntent=void 0;t.logAuthIntent=e=>{e===i.Mode.REGISTER?a.AuthEventLogger.log_web_signup_intent():a.AuthEventLogger.log_web_login_intent()};t.logModalDismissed=(e,t)=>{e===i.Mode.REGISTER?r.AuthUXAnalyticsLogger.logSignupModalDismissed(t):r.AuthUXAnalyticsLogger.logLoginModalDismissed(t)};t.logModalShown=(e,t,s={})=>{e===i.Mode.REGISTER?r.AuthUXAnalyticsLogger.logSignupModalShown(t,s):r.AuthUXAnalyticsLogger.logLoginModalShown(t,s)};t.logModalMiscActivity=(e,t)=>{const a={auth_google:!0};e===i.LoginOrRegisterKind.IMMEDIATE?s.WebMiscActivityLogger.log("signup_modal-show-upfront",a):e===i.LoginOrRegisterKind.DOWNLOAD&&t===i.DownloadAction.DIRECT_DOWNLOAD&&s.WebMiscActivityLogger.log("signup_modal-show-download",a)}})),define("metaserver/static/js/auth/register/form",["require","exports","tslib","react","metaserver/static/js/core/i18n","metaserver/static/js/core/browser","metaserver/static/js/core/assert","metaserver/static/js/deprecated_ajax/ajax_jquery","metaserver/static/js/auth/common/types","metaserver/static/js/auth/common/utils","metaserver/static/js/auth/register/types","metaserver/static/js/auth/register/view","metaserver/static/js/profile_services/auth_callback_handler","metaserver/static/js/profile_services/profile_services_constants","metaserver/static/js/profile_services/profile_services_link","metaserver/static/js/components/ui/css","metaserver/static/js/clean/web_timing_logger","metaserver/static/js/clean/web_register_logging_data","metaserver/static/js/auth/common/stats","metaserver/static/js/api_v2/noauth_client","metaserver/static/js/core/notify","metaserver/static/js/abuse/fingerprintjs_component","metaserver/static/js/admin/registration_source_constants","metaserver/static/js/google_one_tap/google_one_tap_helpers"],(function(e,t,s,a,r,i,o,n,l,c,p,d,m,u,g,h,f,_,E,b,S,v,w,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestOnlyRegisterFormComponent=t.RegisterForm=t.handleInviteResendImpl=void 0,a=s.__importDefault(a),i=s.__importStar(i),n=s.__importStar(n),u=s.__importDefault(u),v=s.__importStar(v);class R extends a.default.Component{constructor(e){super(e),this.testOnlyGetViewComponent=()=>this.viewComponent,this.setViewComponent=e=>{this.viewComponent=e},this.onClickSignUp=e=>{e.preventDefault(),this.handleRegisterFormEvent(p.RegisterFormEvent.REGISTER_CLICK);const t=this.getFormErrors();t.fname||t.email||t.password||t.tos?this.setState({localErrors:t}):this.viewComponent.getCaptchaComponent().getWrappedComponent().submit()},this.onSubmit=()=>s.__awaiter(this,void 0,void 0,(function*(){this.thirdPartySignupInitiated?E.AuthAMPLogger.logSignupAttempt(E.AuthType.GOOGLE):(E.AuthAMPLogger.logSignupAttempt(E.AuthType.CREDENTIALS),E.EmailAuthUXAnalyticsLogger.logSignupStart()),this.setState({isSubmitting:!0}),v.isTest()||(yield this.viewComponent.getFingerprintJsComponent().getWrappedComponent().invokeFPJSIframeAndLog(this.state.email));const e=this.registerData(),t=this.props.signupUrl||(this.thirdPartySignupInitiated?"/ajax_thirdparty_register":"/ajax_register");n.WebRequest({url:t,type:"POST",data:e,success:(e,t,s)=>{this.handleSuccess(e)},error:(e,t,s)=>{"success"===t?this.handleServerErrors(JSON.parse(s)):this.setState({isSubmitting:!1})}})})),this.handleGoogleCallback=e=>s.__awaiter(this,void 0,void 0,(function*(){E.GoogleAmpLogger.logVerificationResult(e.success,e.err_msg);const{additionalParams:t={},marketingOptInProps:a={},canRedirect:r}=this.props,o=this.props.googleRegisterProps||{},n=o.signupContinuationUrl||"/",l=o.optimisticLoginContinuationUrl||n,c=(0,_.getWebRegisterLoggingData)();e.profile&&!v.isTest()&&(yield this.viewComponent.getFingerprintJsComponent().getWrappedComponent().invokeFPJSIframeAndLog(e.profile.email));let d=t.signup_tag;t.signup_tag==w.RegistrationSource.REGISTER_PAGE_EMAIL&&(d=w.RegistrationSource.REGISTER_PAGE_SIGN_UP_WITH_GOOGLE),(0,m.handleRegisterResponse)(e,Object.assign({showMarketingOptIn:!!a.show,registerCont:n,loginCont:l,signupTag:d||w.RegistrationSource.REGISTER_PAGE_SIGN_UP_WITH_GOOGLE,canRedirect:!1!==r,k:t.k,eh:t.eh,signupEndpoint:this.props.signupEndpoint,inlineRedirect:r?void 0:e=>{const{fname:t,lname:a,email:r}=e,i=s.__rest(e,["fname","lname","email"]);this.setState({fname:t,lname:a,email:r,inlineThirdPartySignupState:i})}},c),void 0,()=>{this.handleRegisterFormEvent(p.RegisterFormEvent.GOOGLE_REGISTER_SUCCESS)},e=>{if(this.handleRegisterFormEvent(p.RegisterFormEvent.REGISTER_IMMEDIATE_SUCCESS,{userInfo:e}),!1!==this.props.canRedirect)i.redirect(l);else if(this.props.onRegisterSuccess)return this.props.onRegisterSuccess(e,e)})})),this.onGoogleRegisterClick=()=>{this.handleRegisterFormEvent(p.RegisterFormEvent.GOOGLE_REGISTER_CLICK),E.GoogleAmpLogger.logVerificationAttempt();const e=new g.ProfileServicesLinkingHandler,t=this.props.googleRegisterProps||{};let s;s=void 0===t.popup?g.AuthWindowOption.POP_UP:t.popup?g.AuthWindowOption.POP_UP:g.AuthWindowOption.REDIRECT;const a=t.signupContinuationUrl?{kind:"web",cont:t.signupContinuationUrl,remember_me:!1,pair_user:!1}:null;e.auth_service_create_user_if_needed(u.default.GOOGLE,this.handleGoogleCallback,"register_form",s,a)},this.onInputChange=e=>{var t,s;const a={},r=e.currentTarget,{name:i,value:o,checked:n}=r;"fname"===i?a.fname=o:"lname"===i?a.lname=o:"email"===i?(a.email=o,null===(s=(t=this.props).onEmailChanged)||void 0===s||s.call(t)):"password"===i?a.password=o:"tos_agree"===i?a.tosAgree=n:"marketing_opt_in"===i&&(a.marketingOptIn=n),this.setState(a),this.clearFormErrors(a)},this.handleResendClick=e=>{const t=e.target,{email:s,isSendingInvite:a}=this.state;"login-register-resend-invite"===t.className&&C(e,a,s,()=>this.setState({isSendingInvite:!0}),()=>this.setState({isSendingInvite:!1}))},this.onCaptchaReady=()=>{this.isCaptchaReady=!0},(0,o.assert)(!1!==e.canRedirect||!!e.onRegisterSuccess,"Need an on register success handler if we cannot redirect the user",{tags:["react-register-form"]});const{fnameProps:t={},lnameProps:a={},emailProps:r={},tosCheckboxProps:l={},marketingOptInProps:c={}}=e,d=!c.show||!!c.checked;this.state={localErrors:{},isSubmitting:!1,fname:t.initialValue||"",lname:a.initialValue||"",email:e.emailPrefill||r.initialValue||"",password:"",tosAgree:!!l.checked,isSendingInvite:!1,marketingOptIn:d,shouldDisableForm:!0},this.mounted=!1,this.isCaptchaReady=!1}getCurrentEmail(){var e;return null!==(e=this.props.emailPrefill)&&void 0!==e?e:this.state.email}handleServerErrors(e){if(!this.mounted)return;if(this.thirdPartySignupInitiated?E.AuthAMPLogger.logSignupResponse(E.AuthType.GOOGLE,!1,e.funcaptcha_response?"funcaptcha_response":"form_error"):E.AuthAMPLogger.logSignupResponse(E.AuthType.CREDENTIALS,!1,e.funcaptcha_response?"funcaptcha_response":"form_error"),this.viewComponent.handleCaptchaErrors(e))return void setTimeout(()=>{this.isCaptchaReady||(0,c.notifyCaptchaNotLoaded)()},1e4);this.thirdPartySignupInitiated?E.GoogleUXAnalyticsLogger.logSignupResponse(!1,null):E.EmailAuthUXAnalyticsLogger.logSignupError();const t=Object.assign({},this.state.localErrors),s=Date.now();e.email&&(t.email=e.email,t.email.clientTimestamp=s),e.password&&(t.password=e.password,t.password.clientTimestamp=s),e.lname&&(t.lname=e.lname,t.lname.clientTimestamp=s),e.fname&&(t.fname=e.fname,t.fname.clientTimestamp=s),e.tos_agree&&(t.tos=e.tos_agree,t.tos.clientTimestamp=s),this.setState({localErrors:t}),this.setState({isSubmitting:!1})}handleSuccess(e){if(!this.mounted)return;const t=JSON.parse(e),s={id:t.id,email:t.email,display_name:t.display_name};if(this.thirdPartySignupInitiated?(E.AuthAMPLogger.logSignupResponse(E.AuthType.GOOGLE,!0,null),E.GoogleUXAnalyticsLogger.logSignupResponse(!0,null)):(E.AuthAMPLogger.logSignupResponse(E.AuthType.CREDENTIALS,!0,null),E.EmailAuthUXAnalyticsLogger.logSignupResponse()),this.handleRegisterFormEvent(p.RegisterFormEvent.REGISTER_IMMEDIATE_SUCCESS,{userInfo:s}),!1!==this.props.canRedirect){const e=t.force_redirect_url?t.redirect_url:this.props.continuationUrlForNonGoogleSignup||t.redirect_url||"/";i.redirect(e)}else this.props.onRegisterSuccess&&this.props.onRegisterSuccess(s,t);this.setState({isSubmitting:!1})}handleRegisterFormEvent(e,t){(0,c.pushMarketingEvent)(e,this.props.pushConversionDataReadyMarketingEvent),this.props.onRegisterFormEvent&&this.props.onRegisterFormEvent(e,t)}registerData(){const[e,t]=(0,c.getFormattedName)(this.state.fname,this.state.lname,this.props.combinedName),s=i.get_uri().getQuery(),{email:a,password:r,tosAgree:o,marketingOptIn:n,inlineThirdPartySignupState:l}=this.state,{additionalParams:p,thirdPartyInitiatedSignupData:d}=this.props,m=Object.assign({fname:e,lname:t,email:a,tos_agree:o},this.thirdPartySignupInitiated?{}:{password:r}),u=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({cont:this.props.continuationUrlForNonGoogleSignup,signup_endpoint:this.props.signupEndpoint,demandbase_override:s.demandbase_override,marketing_opt_in:n},m),d||{}),l||{}),this.viewComponent&&this.viewComponent.getCaptchaResponses()||{}),this.viewComponent&&this.viewComponent.getVisitorId()||{}),p);return(0,_.setWebRegisterLoggingData)(u)}componentDidUpdate(e,t){e.emailPrefill!==this.props.emailPrefill&&this.setState({email:this.getCurrentEmail()}),["V1","V2"].includes(this.props.googleOneTapVariant||"")&&t.isSubmitting!==this.state.isSubmitting&&(0,y.setGoogleOneTapDisabledBodyClass)(this.state.isSubmitting)}clearFormErrors(e){const t=this.state.localErrors;e.fname&&(t.fname={}),e.lname&&(t.lname={}),e.email&&(t.email={}),e.password&&(t.password={}),e.tosAgree&&(t.tos={}),this.setState({localErrors:t})}getFormErrors(){const e={};if(!this.props.validateClientSide)return e;const t=Date.now();return this.state.fname?e.fname=void 0:e.fname={message_text:r.intl.formatMessage({id:"GlyhO1",defaultMessage:"Please enter your name"}),clientTimestamp:t},this.getCurrentEmail()?e.email=void 0:e.email={message_text:r.intl.formatMessage({id:"I7g4FQ",defaultMessage:"Please enter an email address"}),clientTimestamp:t},this.state.password||this.thirdPartySignupInitiated?e.password=void 0:e.password={message_text:r.intl.formatMessage({id:"LhlWCW",defaultMessage:"Please enter a password"}),clientTimestamp:t},this.state.tosAgree?e.tos=void 0:e.tos={message_text:r.intl.formatMessage({id:"yw3Lbd",defaultMessage:"Please agree to the terms of service"}),clientTimestamp:t},e}get thirdPartySignupInitiated(){return!!this.props.thirdPartyInitiatedSignupData||!!this.state.inlineThirdPartySignupState}componentDidMount(){this.setState({shouldDisableForm:!1}),this.props.markTti&&(0,f.mark_time_to_interactive)(),this.mounted=!0,E.AuthAMPLogger.logSignupIntent(),document.addEventListener("click",this.handleResendClick)}componentWillUnmount(){this.mounted=!1,document.removeEventListener("click",this.handleResendClick)}get shouldDisableForm(){return!!this.props.disabled||this.state.shouldDisableForm}render(){const{marketingOptInProps:e={},variant:t,emailProps:s,maestroStyle:r,className:i,combinedName:o,fnameProps:n,lnameProps:c,passwordProps:p,persistLabel:m,tosCheckboxProps:u,submitButtonProps:g,googleRegisterProps:h,showSplitSignupFlow:f,googleOneTapVariant:_}=this.props;return a.default.createElement(d.RegisterFormView,{ref:this.setViewComponent,variant:t||l.AuthFormVariant.STANDARD,maestroStyle:!!r,disabled:this.shouldDisableForm,className:i,combinedName:!!o,fnameProps:n||{},fnameValue:this.state.fname,fnameError:this.state.localErrors.fname,lnameProps:c||{},lnameValue:this.state.lname,lnameError:this.state.localErrors.lname,emailProps:s||{},emailValue:this.getCurrentEmail(),emailError:this.state.localErrors.email,passwordProps:p||{},passwordValue:this.state.password,passwordError:this.state.localErrors.password,tosCheckboxProps:u||{},tosChecked:this.state.tosAgree,tosError:this.state.localErrors.tos,submitButtonProps:g||{},googleRegisterProps:h,thirdPartyInitiatedSignup:this.thirdPartySignupInitiated,isSubmitting:this.state.isSubmitting,onClickSignUp:this.onClickSignUp,onInputChange:this.onInputChange,onSubmit:this.onSubmit,onCaptchaReady:this.onCaptchaReady,onGoogleRegisterClick:this.onGoogleRegisterClick,showMarketingOptIn:!!e.show,marketingOptInChecked:this.state.marketingOptIn,splitSignupEnabled:f,persistLabel:!!m,googleOneTapVariant:_,gsiState:this.props.gsiState,showOneTapInlineGoogleButton:this.props.showOneTapInlineGoogleButton,googleOneTapInlinePosition:this.props.googleOneTapInlinePosition,dwgRefreshEnabled:this.props.dwgRefreshEnabled,fromLegacyMobile:this.props.fromLegacyMobile})}}function C(e,t,s,a,i){if(!0===t)return void e.preventDefault();const o=new b.NoAuthApiV2Client;a(),o.ns("team").rpc("logged_out_resend_pending_invite_email",{email:s},{}).then(()=>{S.Notify.success(r.intl.formatMessage({id:"un5VKD",defaultMessage:"Invite resent to {email}"},{email:s})),i()}).catch(e=>{S.Notify.error(r.intl.formatMessage({id:"yqLGvW",defaultMessage:"Failed to resend invite."})),i()}),e.preventDefault()}t.TestOnlyRegisterFormComponent=R,R.displayName="RegisterFormComponent",t.handleInviteResendImpl=C,t.RegisterForm=(0,h.requireCssWithComponent)(R,["/static/metaserver/static/css/login_or_register-vfl4Cdb1R.css","/static/metaserver/static/css/components/login_form-vfl4LrmVK.css","/static/metaserver/static/css/components/button-vfl7d2xHj.css","/static/metaserver/static/css/dig-components/index.web-vflD7DS1H.css","/static/typescript/component_libraries/dwg-components/src/index.web-vflWvw6lp.css"])})),define("metaserver/static/js/auth/register/google_register_button",["require","exports","tslib","classnames","react","metaserver/static/js/core/i18n"],(function(e,t,s,a,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoogleRegisterButton=void 0,a=s.__importDefault(a),r=s.__importDefault(r);t.GoogleRegisterButton=e=>{const t=e.buttonProps||{},s=(0,a.default)("auth-google","button-primary",t.className,{[`button-${t.variant}`]:"standard"!==t.variant}),o=t.text||i.intl.formatMessage({id:"M4SS1n",defaultMessage:"Sign up with Google"});return r.default.createElement("button",{className:s,type:"button",onClick:e.onClick,disabled:e.disabled||t.disabled,"data-uxa-log":"google_signup_start"},r.default.createElement("span",{className:"sign-up-text"},o))}})),define("metaserver/static/js/auth/register/name_fields",["require","exports","tslib","classnames","react","metaserver/static/js/core/i18n","metaserver/static/js/auth/common/inputs/text","metaserver/static/js/auth/common/types","metaserver/static/js/auth/common/utils"],(function(e,t,s,a,r,i,o,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterFormNameFields=void 0,a=s.__importDefault(a),r=s.__importDefault(r);t.RegisterFormNameFields=e=>{const t=e.fnameProps||{};if(e.combinedName){const s=(0,a.default)("exp-input-combined-name","clearfix",t.className);return r.default.createElement("div",{className:"register-form__name-fields"},r.default.createElement(o.AuthTextField,{placeholder:t.placeholder||(e.maestroStyle?i.intl.formatMessage({id:"yse7tr",defaultMessage:"Jane Doe"}):i.intl.formatMessage({id:"7raSCH",defaultMessage:"Full name"})),name:"fname",value:e.fnameValue,onChange:e.onInputChange,disabled:e.disabled||t.readonly||!1,label:t.label||(e.maestroStyle?i.intl.formatMessage({id:"7raSCH",defaultMessage:"Full name"}):void 0),error:e.fnameError,maestroStyle:e.maestroStyle,className:s,variant:e.variant,type:n.AuthTextInputType.TEXT,autoComplete:n.AuthTextInputAutoComplete.FULL_NAME}))}const s=e.lnameProps||{},c=["first","text-input__margin-right"],p=["second"];let d=["input-fname",t.className],m=["input-lname",s.className];(0,l.lastNameGoesFirst)()?(m=[...m,...c],d=[...d,...p]):(d=[...d,...c],m=[...m,...p]);const u=r.default.createElement(o.AuthTextField,{className:(0,a.default)(d),name:"fname",value:e.fnameValue,onChange:e.onInputChange,error:e.fnameError,maestroStyle:e.maestroStyle,disabled:e.disabled||t.readonly||!1,label:t.label||(e.maestroStyle?i.intl.formatMessage({id:"flaKkC",defaultMessage:"First name"}):void 0),placeholder:t.placeholder||(e.maestroStyle?i.intl.formatMessage({id:"G3gJf8",defaultMessage:"Jane"}):i.intl.formatMessage({id:"flaKkC",defaultMessage:"First name"})),variant:e.variant,type:n.AuthTextInputType.TEXT,autoComplete:n.AuthTextInputAutoComplete.FIRST_NAME,persistLabel:e.persistLabel}),g=r.default.createElement(o.AuthTextField,{className:(0,a.default)(m),name:"lname",value:e.lnameValue,onChange:e.onInputChange,error:e.lnameError,disabled:e.disabled||s.readonly||!1,label:s.label||(e.maestroStyle?i.intl.formatMessage({id:"rew2qC",defaultMessage:"Last name"}):void 0),placeholder:s.placeholder||(e.maestroStyle?i.intl.formatMessage({id:"yUetMg",defaultMessage:"Doe"}):i.intl.formatMessage({id:"rew2qC",defaultMessage:"Last name"})),maestroStyle:e.maestroStyle,variant:e.variant,type:n.AuthTextInputType.TEXT,autoComplete:n.AuthTextInputAutoComplete.LAST_NAME,persistLabel:e.persistLabel});return(0,l.lastNameGoesFirst)()?r.default.createElement("div",{className:"register-form__name-fields"},g,u):r.default.createElement("div",{className:"register-form__name-fields"},u,g)}})),define("metaserver/static/js/auth/register/view",["require","exports","tslib","classnames","react","metaserver/static/js/core/i18n","metaserver/static/js/auth/common/inputs/checkbox","metaserver/static/js/auth/common/inputs/text","metaserver/static/js/auth/common/captcha","metaserver/static/js/auth/common/types","metaserver/static/js/auth/register/google_register_button","metaserver/static/js/auth/register/name_fields","metaserver/static/js/auth/common/stats","metaserver/static/js/abuse/fingerprintjs_component","metaserver/static/js/google_one_tap/lib","metaserver/static/js/google_one_tap/containers","typescript/component_libraries/dwg-components/src/components/dwg-button2/index"],(function(e,t,s,a,r,i,o,n,l,c,p,d,m,u,g,h,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterFormView=void 0,a=s.__importDefault(a),r=s.__importDefault(r);class _ extends r.default.Component{constructor(){super(...arguments),this.state={splitSignupStep:0,formCollapsed:!1},this.handleContainerTransitionEnd=()=>{this.setState({formCollapsed:!0})},this.setCaptchaComponent=e=>{this.captchaComponent=e},this.setFingerprintJsComponent=e=>{this.fingerprintJsComponent=e}}componentDidUpdate(){var e;this.state.formCollapsed&&!(null===(e=this.props.gsiState)||void 0===e?void 0:e.formDisabled)&&this.setState({formCollapsed:!1})}handleCaptchaErrors(e){return(0,l.handle_captcha_errors)(this.captchaComponent,e)}getCaptchaComponent(){return this.captchaComponent}getFingerprintJsComponent(){return this.fingerprintJsComponent}getVisitorId(){return(0,u.get_visitor_id)(this.fingerprintJsComponent)}getCaptchaResponses(){return(0,l.get_captcha_responses)(this.captchaComponent)}onContinue(){this.setState({splitSignupStep:1}),m.EmailAuthUXAnalyticsLogger.logSplitSignupContinue()}render(){var e,t,s,m,_,E;const{className:b,variant:S,thirdPartyInitiatedSignup:v,tosCheckboxProps:w,onGoogleRegisterClick:y,disabled:R,isSubmitting:C,maestroStyle:T,onInputChange:L,showMarketingOptIn:I,marketingOptInChecked:A,splitSignupEnabled:M,googleOneTapVariant:N=""}=this.props,O=(null===(e=this.props.gsiState)||void 0===e?void 0:e.isButtonFlow)&&!(null===(t=this.props.gsiState)||void 0===t?void 0:t.isMobile),P=(null===(s=this.props.gsiState)||void 0===s?void 0:s.formDisabled)&&((null===(m=this.props.gsiState)||void 0===m?void 0:m.isInline)||O),F=(0,a.default)("form_shown","login-form-container","register",b,S,{third_party_auth:v,"login-form-container--maestro":T,[g.GOOGLE_ONE_TAP_COLLAPSE_FORM]:P}),k=w||{};let x=void 0;k.unsafeLabelHTML||(x=i.intl.formatMessage({id:"QECDJM",defaultMessage:"I agree to the <a>Dropbox Terms</a>. Learn about how we use and protect your data in our <b>Privacy Policy</b>."},{a:e=>r.default.createElement("a",{href:"/terms",target:"_blank",rel:"noreferrer noopener","data-uxa-log":"registration_dropbox_terms_link"},e),b:e=>r.default.createElement("a",{href:"/privacy",target:"_blank",rel:"noreferrer noopener","data-uxa-log":"registration_privacy_policy_link"},e)}));const D=this.props.submitButtonProps||{},G=(0,a.default)("login-button","button-primary",D.className,{"button-small":D.variant===c.AuthButtonVariant.SMALL,"button-big":D.variant===c.AuthButtonVariant.BIG}),j=(0,a.default)("continue-button","button-primary",D.className,{"button-small":D.variant===c.AuthButtonVariant.SMALL,"button-big":D.variant===c.AuthButtonVariant.BIG}),U=this.props.thirdPartyInitiatedSignup,B=["V1","V2"].includes(N)&&!this.props.fromLegacyMobile,H=!!this.props.googleRegisterProps&&!U&&!B,W=this.props.googleRegisterProps||{},V=r.default.createElement(p.GoogleRegisterButton,{onClick:y,disabled:R||C,buttonProps:W.buttonProps}),q=r.default.createElement("div",{className:"hr-label"},r.default.createElement("span",{className:"hr-label__text"},i.intl.formatMessage({id:"F1g1bb",defaultMessage:"or"}))),K=this.props.emailProps||{},J=(0,a.default)("input-email","text-input__margin-right",K.className),X=this.props.passwordProps||{},z=(0,a.default)("input-password",X.className);let Y=this.props.maestroStyle;"TOP"===W.position?Y=!0:"BOTTOM"===W.position&&(Y=!1);let Q=!1;"TOP"==this.props.googleOneTapInlinePosition&&(Q=!0);const $=k.variant||S,Z=void 0===k.inline||k.inline,ee=U?i.intl.formatMessage({id:"j7O6M6",defaultMessage:"Create and continue"}):D.text||i.intl.formatMessage({id:"P09UfX",defaultMessage:"Create an account"}),te=this.props.tosChecked?"registration_agree_to_tos_uncheck":"registration_agree_to_tos_check",se=i.intl.formatMessage({id:"pV/Btf",defaultMessage:"Continue"}),ae=!!this.props.dwgRefreshEnabled&&this.props.isSubmitting,re=r.default.createElement(n.AuthTextField,{value:this.props.emailValue,className:J,onChange:L,disabled:ae||R||K.readonly||!1,label:K.label||(T?i.intl.formatMessage({id:"ZuKPpH",defaultMessage:"Email"}):void 0),placeholder:K.placeholder||(this.props.maestroStyle?i.intl.formatMessage({id:"87vAZJ",defaultMessage:"you@mail.com"}):i.intl.formatMessage({id:"ZbTBdC",defaultMessage:"Email"})),error:this.props.emailError,maestroStyle:T,name:"email",type:c.AuthTextInputType.EMAIL,variant:S,persistLabel:this.props.persistLabel,autoComplete:c.AuthTextInputAutoComplete.USERNAME});if(M&&0===this.state.splitSignupStep)return r.default.createElement("div",{className:F},r.default.createElement("form",{className:"clearfix credentials-form register-form",onSubmit:this.props.onClickSignUp,method:"post"},r.default.createElement("div",{className:"credentials-form__fields"},r.default.createElement("div",{className:"register-form__credential-fields"}),r.default.createElement("div",{className:"split-signup-fields"},re,r.default.createElement("button",{className:j,type:"submit","data-uxa-log":"register_form_continue_button",onClick:()=>this.onContinue()},r.default.createElement("span",null,se)))),H&&r.default.createElement("div",{className:"hr-split-signup"}),H&&V,H&&r.default.createElement(l.Captcha,{ref:this.setCaptchaComponent,email:this.props.emailValue,onSubmit:this.props.onSubmit,onReady:this.props.onCaptchaReady,source:"REGISTER"})));const ie=(null===(_=this.props.gsiState)||void 0===_?void 0:_.tosPromptDisplayed)&&!(null===(E=this.props.gsiState)||void 0===E?void 0:E.isMobile),oe=!!this.props.gsiState&&this.props.gsiState.isInline,ne=P&&this.state.formCollapsed?{display:"none"}:void 0,le=r.default.createElement(f.DWGPrimaryButton,{className:(0,a.default)("register-button--dwg-refresh",D.className),width:"full",type:"submit",disabled:this.props.disabled||D.disabled||this.props.isSubmitting,label:ee,disableArrow:!0,susiRefreshExpIsLoading:this.props.isSubmitting,susiRefreshExpSpinnerValueText:i.intl.formatMessage({id:"TD8ILD",defaultMessage:"Submitting"}),susiRefreshExpPreloadProgressIndicators:!0,"data-uxa-log":"register_form_submit_button"});return r.default.createElement(r.default.Fragment,null,ie&&h.DEFAULT_TOS_INLINE_CONTAINER_REGISTER,r.default.createElement("div",{className:F,onTransitionEnd:P?this.handleContainerTransitionEnd:void 0,style:ne},r.default.createElement("form",{className:"clearfix credentials-form register-form",onSubmit:this.props.onClickSignUp,method:"post",noValidate:!0},Q&&B&&r.default.createElement("div",{className:(0,a.default)({"sign-in-with-google-button-register":this.props.showOneTapInlineGoogleButton})},r.default.createElement(h.DefaultButtonContainerFC,{context:"signup",gsiState:this.props.gsiState})),Y&&H&&V,Q&&oe&&r.default.createElement(h.DefaultContainerFC,{context:"signup",gsiState:this.props.gsiState}),Y&&H&&q,r.default.createElement("div",{className:"credentials-form__fields"},r.default.createElement(d.RegisterFormNameFields,{maestroStyle:T,onInputChange:L,combinedName:this.props.combinedName,fnameError:this.props.fnameError,fnameProps:this.props.fnameProps,lnameError:this.props.lnameError,lnameProps:this.props.lnameProps,fnameValue:this.props.fnameValue,lnameValue:this.props.lnameValue,disabled:R||ae,variant:S,persistLabel:this.props.persistLabel}),r.default.createElement("div",{className:"register-form__credential-fields"},re,!this.props.thirdPartyInitiatedSignup&&r.default.createElement(n.AuthTextField,{value:this.props.passwordValue,placeholder:X.placeholder||(this.props.maestroStyle?i.intl.formatMessage({id:"klwYHA",defaultMessage:"Minimum 6 characters"}):i.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"})),name:"password",className:z,inputClassName:"password-input",onChange:L,measureStrength:X.measureStrength,label:X.label||(T?i.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"}):void 0),error:this.props.passwordError,maestroStyle:T,disabled:R||ae,variant:S,passwordStrengthProps:X.strengthMeterProps,type:c.AuthTextInputType.PASSWORD,autoComplete:c.AuthTextInputAutoComplete.NEW_PASSWORD,persistLabel:this.props.persistLabel,dwgRefreshEnabled:this.props.dwgRefreshEnabled}))),r.default.createElement(o.AuthCheckbox,{variant:this.props.dwgRefreshEnabled?c.AuthFormVariant.DIG20:$,className:(0,a.default)("agree",{"tos-checkbox--dwg-refresh":this.props.dwgRefreshEnabled}),disabled:k.disabled||R||ae,maestroStyle:T,error:this.props.tosError,inline:Z,onChange:L,name:"tos_agree",checked:this.props.tosChecked,label:k.label||x,unsafeLabelHTML:k.unsafeLabelHTML,uxaEventName:te}),I&&r.default.createElement(o.AuthCheckbox,{variant:this.props.dwgRefreshEnabled?c.AuthFormVariant.DIG20:$,className:(0,a.default)("agree marketing-opt-in-checkbox",{"tos-checkbox--dwg-refresh":this.props.dwgRefreshEnabled}),disabled:R||ae,maestroStyle:T,inline:Z,onChange:L,checked:A,name:"marketing_opt_in",label:i.intl.formatMessage({id:"vRE9NS",defaultMessage:"I’d like to receive direct marketing email updates from Dropbox"})}),this.props.dwgRefreshEnabled?le:r.default.createElement("button",{className:G,type:"submit","data-uxa-log":"register_form_submit_button",disabled:this.props.disabled||D.disabled||this.props.isSubmitting},r.default.createElement("span",null,ee)),!Q&&B&&r.default.createElement("div",{className:(0,a.default)({"sign-in-with-google-button-register":this.props.showOneTapInlineGoogleButton})},r.default.createElement(h.DefaultButtonContainerFC,{context:"signup",gsiState:this.props.gsiState})),!Y&&H&&V,!Q&&oe&&r.default.createElement(h.DefaultContainerFC,{context:"signup",gsiState:this.props.gsiState}),r.default.createElement(l.Captcha,{ref:this.setCaptchaComponent,email:this.props.emailValue,onSubmit:this.props.onSubmit,onReady:this.props.onCaptchaReady,source:"REGISTER"}),r.default.createElement(u.FingerprintJs,{ref:this.setFingerprintJsComponent,source:"REGISTER"}))))}}t.RegisterFormView=_,_.displayName="RegisterFormView"})),define("metaserver/static/js/components/password_strength_meter",["require","exports","tslib","react","classnames","metaserver/static/js/core/i18n","metaserver/static/js/components/ui/css","metaserver/static/js/clean/ui/bubble_dropdown_v2","metaserver/static/js/clean/web_timing_logger","metaserver/static/js/core/cancelable_promise","metaserver/static/js/clean/ui/sticky_position","dig-components/tooltips","typescript/component_libraries/dwg-components/src/components/dwg-tooltip/index","typescript/component_libraries/dwg-components/src/atoms/dwg-box/index","typescript/component_libraries/dwg-components/src/atoms/dwg-text/index","metaserver/static/js/core/browser_detection"],(function(e,t,s,a,r,i,o,n,l,c,p,d,m,u,g,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordStrengthMeter=void 0,a=s.__importDefault(a),r=s.__importDefault(r);class f extends a.default.Component{constructor(t){super(t),this.setZxcvbn=({default:e})=>{this.setState({zxcvbn:e})},this.getPasswordScore=e=>this.state.zxcvbn?this.state.zxcvbn(e).score:0,this.renderPasswordDots=(e,t)=>{const{isDigEnabled:s,bubblePosition:r,bubbleClassName:o,bubbleDescription:l}=this.props,c=l||_,d="password_strength_meter_tooltip";return s?a.default.createElement(v,{score:e,title:t,description:c,className:o}):a.default.createElement(a.default.Fragment,null,a.default.createElement(S,{score:e}),a.default.createElement(n.BubbleDropdown,{position:r||p.StickyPosition.RIGHT,isContentFocusable:!1,targetButton:a.default.createElement("button",{type:"button","aria-label":i.intl.formatMessage({id:"bjXtDK",defaultMessage:"Show more information about password strength."}),"aria-describedby":d,"aria-controls":d,className:"password-bubble__button"}),className:o},a.default.createElement("div",{id:d,role:"tooltip",className:"password-bubble__content"},a.default.createElement("div",{className:"password-bubble__title"},t||""),a.default.createElement("div",{className:"password-bubble__desc"},c))))},this.state={},t.zxcvbnPostTti?(0,l.waitForTTI)().then(()=>{this.zxcvbnPromise=(0,c.makeCancelable)(new Promise((t,s)=>{e(["zxcvbn"],t,s)}).then(s.__importStar)),this.zxcvbnPromise.then(this.setZxcvbn)}):(this.zxcvbnPromise=(0,c.makeCancelable)(new Promise((t,s)=>{e(["zxcvbn"],t,s)}).then(s.__importStar)),this.zxcvbnPromise.then(this.setZxcvbn))}componentWillUnmount(){this.zxcvbnPromise&&this.zxcvbnPromise.cancel()}getTitle(e){return["",i.intl.formatMessage({id:"i/ragh",defaultMessage:"Weak"}),i.intl.formatMessage({id:"GwYES8",defaultMessage:"So-so"}),i.intl.formatMessage({id:"Yd7c8F",defaultMessage:"Good"}),i.intl.formatMessage({id:"kbsmZh",defaultMessage:"Great!"})][e]}render(){const{password:e,className:t}=this.props,s=e.length?Math.max(1,this.getPasswordScore(e)):0,o=this.getTitle(s);if(this.props.dwgRefreshEnabled){const e=(0,h.is_mobile_or_tablet)();return a.default.createElement(u.DWGBox,{className:"password-input-container--dwg-refresh"},a.default.createElement(u.DWGBox,{className:(0,r.default)("password-input-meter",{[`${t}`]:t})},a.default.createElement(m.DWGTooltip,{content:a.default.createElement(b,{headline:o,mobile:e,content:this.props.bubbleDescription||_}),id:"password-strength-meter-tooltip",placement:e?"top-end":"right"},a.default.createElement(E,{score:s},a.default.createElement(S,{score:s})))))}return a.default.createElement("div",{className:(0,r.default)("password-input-meter",{[`${t}`]:t}),"aria-label":i.intl.formatMessage({id:"7h/xn+",defaultMessage:"Password strength"})},a.default.createElement("span",{"aria-live":"assertive",className:"ax-visually-hidden"},o),this.renderPasswordDots(s,o))}}f.displayName="PasswordStrengthMeterComponent";const _=i.intl.formatMessage({id:"6SDr7W",defaultMessage:"Passwords must be 6 characters or more. Good passwords are hard to guess and use uncommon words, numbers, symbols, and uppercase letters."}),E=a.default.forwardRef((e,t)=>{var{children:o,score:n}=e,l=s.__rest(e,["children","score"]);const c=0===n;return a.default.createElement(u.DWGBox,Object.assign({className:(0,r.default)("password-dots-container--dwg-refresh",{"password-dots-container-disabled--dwg-refresh":c}),ref:t,tabIndex:c?-1:0,alignItems:"center",padding:0,color:"standard",role:"button","aria-describedby":"password-strength-meter-tooltip","aria-disabled":c?"true":"false","aria-label":i.intl.formatMessage({id:"yTH4+p",defaultMessage:"Show more information about password strength"})},l),o)});E.displayName="TooltipRefreshButton";const b=e=>a.default.createElement(a.default.Fragment,null,a.default.createElement(u.DWGBox,{className:"tooltip-headline--dwg-refresh","aria-describedby":"password-strength-meter-tooltip"},a.default.createElement(g.DWGText,{fontSize:14,fontWeight:"medium",lineHeight:18,fontFamily:"atlas-grotesk"},e.headline)),!e.mobile&&a.default.createElement(g.DWGText,{fontSize:12,fontWeight:"regular",lineHeight:16,fontFamily:"atlas-grotesk"},e.content)),S=({score:e})=>a.default.createElement(a.default.Fragment,null,[4,3,2,1].map(t=>{const s=(0,r.default)({"password-input-dot":!0,"password-input-dot-selected--weak":e>=t&&e<=2,"password-input-dot-selected":e>=t});return a.default.createElement("div",{key:"password-input-dot-"+t,className:s})})),v=({score:e,description:t,title:s,className:r})=>{const i=s?`(${s}) ${t}`:`${t}`;return a.default.createElement(d.Tooltip,{title:i,placement:"right",className:r},a.default.createElement("span",{tabIndex:0},a.default.createElement(S,{score:e})))};t.PasswordStrengthMeter=(0,o.requireCssWithComponent)(f,["/static/metaserver/static/css/components/password_strength_meter-vfldJoBwE.css"])})),define("metaserver/static/js/abuse/fingerprintjs_component",["require","exports","tslib","react","react-dom","metaserver/static/js/core/uri","metaserver/static/js/modules/constants/fingerprintjs_constants","metaserver/static/js/modules/constants/env","metaserver/static/js/logging/telemetry","metaserver/static/js/logging/hive/schemas/abuse-fingerprintjs_logs","metaserver/static/js/components/ui/css","metaserver/static/js/core/exception","metaserver/static/js/metrics/index","metaserver/static/js/modules/constants/login_and_register"],(function(e,t,s,a,r,i,o,n,l,c,p,d,m,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FingerprintJs=t.FingerprintJsComponent=t.isTest=t.get_visitor_id=void 0,a=s.__importDefault(a),r=s.__importStar(r),l=s.__importStar(l),d=s.__importStar(d);const g=[n.FINGERPRINTJS_SERVER];t.get_visitor_id=function(e){return{"visitor-id":e.getWrappedComponent().visitorId}};t.isTest=()=>u.IS_SELENIUM_TEST;class h extends a.default.Component{constructor(e){super(e),this.invokeFPJSIframeAndLog=e=>s.__awaiter(this,void 0,void 0,(function*(){if(o.SHOULD_INVOKE_FINGERPRINTJS)if(null===this.state.fpResponse){this.getIFrame().contentWindow.postMessage({isSubmitClicked:!0,token:o.FINGERPRINTJS_TOKEN},"https://"+n.FINGERPRINTJS_SERVER),this.recordFingerprintJsInvocationStats(this.props.source);const t=(new Date).getTime();for(;null===this.state.fpResponse&&(new Date).getTime()-t<4e3;)yield new Promise(e=>setTimeout(e,200));const s=(new Date).getTime();null===this.state.fpResponse?(this.logEmptyResponse(e),this.recordFingerprintJsLoadingStats(this.props.source,!1,this.state.err,s-t)):(this.logFPResponse(e),this.recordFingerprintJsLoadingStats(this.props.source,!0,this.state.err,s-t))}else this.logFPResponse(e)})),this.recordFingerprintJsLoadingStats=(e,t,s,a)=>{const r=(0,m.getMetricsReporter)(),i=r.createCounter({ns:"abuse",name:"fingerprintjs/loading_result"},{is_success:String(t),event:e,err:s,region:o.REGION});i.increment(),i.record(),r.createStats({ns:"abuse",name:"fingerprintjs/loading_latency"},{is_success:String(t),event:e,err:s,region:o.REGION}).record(a)},this.recordFingerprintJsInvocationStats=e=>{const t=(0,m.getMetricsReporter)().createCounter({ns:"abuse",name:"fingerprintjs/invocation"},{event:e,region:o.REGION});t.increment(),t.record()},this.logEmptyResponse=e=>{try{this.visitorId="",this.fingerprintJsInfoLogger.log(new c.FingerprintJsLogsRow({email:e,event:this.props.source,request_id:"",visitor_id:"",visitor_found:!1,confidence_score:void 0,confidence_comment:"",browser_name:"",browser_version:void 0,device:"",incognito:void 0,ip:"",latitude:"",longitude:"",timezone:"",city:"",country:"",os:"",os_version:"",confidence_score_double:void 0}))}catch(e){d.reportException({err:e,severity:d.SEVERITY.CRITICAL,tags:["fingerprintjs"]})}},this.logFPResponse=e=>{const t=this.state.fpResponse;try{this.visitorId=t.visitorId,this.fingerprintJsInfoLogger.log(new c.FingerprintJsLogsRow({email:e,event:this.props.source,request_id:t.requestId,visitor_id:t.visitorId,visitor_found:t.visitorFound,confidence_score:void 0,confidence_comment:t.confidence?t.confidence.comment:"",browser_name:t.browserName,browser_version:t.browserVersion,device:t.device,incognito:t.incognito,ip:t.ip,latitude:t.ipLocation?String(t.ipLocation.latitude):"",longitude:t.ipLocation?String(t.ipLocation.longitude):"",timezone:t.ipLocation?String(t.ipLocation.timezone):"",city:t.ipLocation&&t.ipLocation.city?t.ipLocation.city.name:void 0,country:t.ipLocation&&t.ipLocation.country?t.ipLocation.country.name:void 0,os:t.os,os_version:String(t.osVersion),confidence_score_double:t.confidence.score}))}catch(e){d.reportException({err:e,severity:d.SEVERITY.CRITICAL,tags:["fingerprintjs"]})}},this.fingerprintJsInfoLogger=new l.HiveLogger,this.state={fpResponse:null,err:"None"}}getIFrame(){return r.findDOMNode(this.refs.iframe)}componentDidMount(){window.addEventListener("message",e=>{e.data&&g.includes(i.URI.parse(e.origin).getAuthority())&&(e.data.result&&this.setState({fpResponse:e.data.result}),e.data.err&&this.setState({err:e.data.err}))})}render(){const e=new i.URI({scheme:"https",authority:n.FINGERPRINTJS_SERVER,query:{token:o.FINGERPRINTJS_TOKEN}}).toString(),t=a.default.createElement("iframe",{id:"fingerprintjs_iframe",sandbox:"allow-scripts allow-same-origin allow-forms",className:"fingerprintjs-frame",src:e,ref:"iframe",key:"iframe-id",hidden:!0});return a.default.createElement("div",{className:"fingerprintjsDiv"},t)}}t.FingerprintJsComponent=h,h.displayName="FingerprintJsComponent",t.FingerprintJs=(0,p.requireCssWithComponent)(h,["/static/metaserver/static/css/abuse/fingerprintjs_component-vfleQmAgD.css"])})),define("metaserver/static/js/logging/hive/schemas/abuse-fingerprintjs_logs",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FingerprintJsLogsRow=void 0;t.FingerprintJsLogsRow=class{constructor(e){this.category="abuse-fingerprintjs_logs",this.email=e.email,this.event=e.event,this.request_id=e.request_id,this.visitor_id=e.visitor_id,this.visitor_found=e.visitor_found,this.confidence_score=void 0,this.confidence_comment=e.confidence_comment,this.browser_name=e.browser_name,this.browser_version=e.browser_version,this.device=e.device,this.incognito=e.incognito,this.ip=e.ip,this.latitude=e.latitude,this.longitude=e.longitude,this.timezone=e.timezone,this.city=e.city,this.country=e.country,this.os=e.os,this.os_version=e.os_version,this.confidence_score_double=e.confidence_score_double,Object.seal(this)}}})),define("metaserver/static/js/clean/sso_login_checks",["require","exports","tslib","metaserver/static/js/deprecated_ajax/ajax_jquery"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SsoLoginChecks=void 0,a=s.__importStar(a);class r{constructor(e,t,s,a=!0){this._trigger_check_sso_state=this._trigger_check_sso_state.bind(this),this.check_sso_state=this.check_sso_state.bind(this),this.$email_input=e,this.show_sso_fn=t,this.hide_sso_fn=s,this.should_trigger_check=a,this.should_trigger_check&&(this._trigger_check_sso_state(),this.$email_input.on("input keyup change",this._trigger_check_sso_state))}static initClass(){this._sso_check_in_flight={},this._sso_check_cache={}}_trigger_check_sso_state(){const e=this.$email_input.val();return this.check_sso_state(e)}check_sso_state(e){const t=e.trim();if(!t.match(/^[^@\s]+@[^@\s]+\.[A-Za-z]{2,}$/))return this.hide_sso_fn();{const s=t.toLowerCase();if(s in r._sso_check_cache)return this._handle_sso_state(r._sso_check_cache[s]);if(!r._sso_check_in_flight[s])return r._sso_check_in_flight[s]=!0,a.WebRequest({url:"/sso_state",data:{email:t},success:t=>(t=JSON.parse(t),delete r._sso_check_in_flight[s],r._sso_check_cache[s]=t.user_sso_state,this.should_trigger_check&&this.$email_input.val()!==e?this._trigger_check_sso_state():this._handle_sso_state(t.user_sso_state)),error:()=>(delete r._sso_check_in_flight[s],this.hide_sso_fn())})}}_handle_sso_state(e){return"required"===e?this.show_sso_fn(!1):"optional"===e?this.show_sso_fn(!0):this.hide_sso_fn()}}t.SsoLoginChecks=r,r.initClass()})),define("metaserver/static/js/clean/web_register_logging_data",["require","exports","tslib","metaserver/static/js/core/browser","metaserver/static/js/core/transport/query_string_helpers"],(function(e,t,s,a,r){"use strict";function i(){return{signupUrl:a.get_href(),signupReferrer:document.referrer,trackingParams:(0,r.getTrackingParamsAsJSON)()}}Object.defineProperty(t,"__esModule",{value:!0}),t.setWebRegisterLoggingData=t.getWebRegisterLoggingData=void 0,a=s.__importStar(a),t.getWebRegisterLoggingData=i,t.setWebRegisterLoggingData=function(e={}){const{signupUrl:t,signupReferrer:s,trackingParams:a}=i(),r={signup_url:t,signup_referrer:s,tracking_params:a};return Object.assign(Object.assign({},e),r)}})),define("metaserver/static/js/admin/registration_source_constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegistrationSource=void 0,(function(e){e.WEB_REGISTER="web",e.CHOOSER_REGISTER="chooser_generic",e.CLIENT_REGISTER="client",e.SHARE_REGISTER="share",e.FB_SHARE_REGISTER="fb_share",e.REFERRAL_REGISTER="referral",e.API_REGISTER="api",e.IPHONE_REGISTER="iphone",e.TEAM_REGISTER="team",e.TEAM_SSO_REGISTER="team_sso",e.TEAM_CREATION_REGISTER="team_creation",e.TEAM_BILLING_CONTACT_REGISTER="team_billing_contact",e.API_OAUTH_REGISTER="oauth",e.IPAD_REGISTER="ipad",e.ANDROID_REGISTER="android",e.ANDROID_PDFVIEWER_REGISTER="android_pdfviewer",e.BLACKBERRY_REGISTER="blackberry",e.WINDOWS_PHONE_TAB_REGISTER="windows_phone_tablet",e.SHMODEL_MODAL_REGISTER="shmodel_modal_register",e.SHMODEL_DOWNLOAD_REGISTER="shmodel_download_register",e.SHMODEL_SAVE_TO_REGISTER="shmodel_save_to_register",e.SHMODEL_SAVE_AS_REGISTER="shmodel_save_as_register",e.COMMENTS_SHMODEL_MODAL_REGISTER="comments_shmodel_modal_register",e.FILE_TRANSFER_MODAL_REGISTER="file_transfer_modal_register",e.FB_ADS_REGISTER="fb_ads_register",e.IDM_REGISTER="idm",e.PROVISIONING_API_REGISTER="provisioning_api_register",e.INDEX_PAGE_WEB_REGISTER="index_web",e.CAROUSEL_IPHONE_REGISTER="carousel_iphone",e.CAROUSEL_ANDROID_REGISTER="carousel_android",e.CAROUSEL_IPAD_REGISTER="carousel_ipad",e.PHOTOS_WEBAPP_REGISTER="carousel_web",e.MAILBOX_IPHONE_REGISTER="mailbox_iphone",e.MAILBOX_ANDROID_REGISTER="mailbox_android",e.MAILBOX_IPAD_REGISTER="mailbox_ipad",e.PARTNERSHIP_REGISTER="partnership",e.PRO_BUY_REGISTER="pro_buy_register",e.PRO_REDEEM_REGISTER="pro_redeem_register",e.SCRIPT_REGISTER="script_register",e.API_THIRDPARTY_REGISTER="api_thirdparty",e.RESELLER_REGISTER="reseller_register",e.SHARED_CONTENT_LINK_REGISTER="shared_content_link_register",e.OUTLOOK_ADDIN="outlook_addin",e.ZOOM_REGISTER="zoom_register",e.INVITE_LINK="invite_link",e.MOBILEWEB_REGISTER_PAGE="mobileweb_register_page",e.MOBILEWEB_LOGIN_PAGE="mobileweb_login_page",e.LOGIN_PAGE_REGISTER="login_page",e.REGISTER_PAGE_REGISTER="register_page",e.CLI_LINK_REGISTER="cli_link_nonce",e.FAMILY_INVITE="family_invite",e.SPACES_LANDING="spaces_landing",e.BUSINESS_SPACE_HIDDEN_USER="business_space_hidden",e.GOOGLE_ONE_TAP="google_one_tap",e.SIGN_UP_WITH_GOOGLE="sign_up_with_google",e.LOGIN_PAGE_GOOGLE_ONE_TAP="login_page_google_one_tap",e.LOGIN_PAGE_SIGNUP_WITH_GOOGLE="login_page_sign_up_with_google",e.LOGIN_PAGE_EMAIL="login_page_email",e.REGISTER_PAGE_GOOGLE_ONE_TAP="register_page_google_one_tap",e.REGISTER_PAGE_SIGN_UP_WITH_GOOGLE="register_page_sign_up_with_google",e.REGISTER_PAGE_EMAIL="register_page_email",e.HOMEPAGE_GOOGLE_ONE_TAP="homepage_google_one_tap"})(t.RegistrationSource||(t.RegistrationSource={}))}));
//# sourceMappingURL=pkg-login-and-register-pages.min.js-vflXsmdbN.map