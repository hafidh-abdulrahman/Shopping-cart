define("metaserver/static/js/flux/dispatcher",["require","exports","tslib","flux","metaserver/static/js/core/assert","metaserver/static/js/core/exception"],(function(t,e,i,s,r,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DispatcherClass=e.Dispatcher=void 0,s=i.__importStar(s),a=i.__importStar(a);let n=null;class c extends s.Dispatcher{dispatch(t){(0,r.assert)(null!=t.type,"Invariant error: cannot dispatch action without 'type' property."),(0,r.assert)(null===n,`Invariant error: cannot dispatch ${t.type} while also dispatching ${n}.`),n=t.type;try{"function"==typeof this.dispatch_begin&&this.dispatch_begin();try{return super.dispatch({action:t})}catch(t){return a.reportException({err:t}),console.error(t)}finally{"function"==typeof this.dispatch_end&&this.dispatch_end()}}finally{n=null}}}e.DispatcherClass=c;const h=new c;e.Dispatcher=h})),define("metaserver/static/js/flux/base_store",["require","exports","metaserver/static/js/flux/dispatcher","metaserver/static/js/core/assert"],(function(t,e,i,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Store=void 0;const r=(function(){let t=!1;const e=[];return i.Dispatcher.dispatch_begin=()=>t=!0,i.Dispatcher.dispatch_end=function(){t=!1;try{return Array.from(e).map(t=>t())}finally{e.length=0}},function(i){return t?Array.from(e).includes(i)?void 0:e.push(i):i()}})();class a{constructor(t){"function"==typeof this._init&&this._init(),this._change_listeners=[],this._dispatcher=t||i.Dispatcher,this.dispatchToken=this._dispatcher.register(this._new_payload_wrapper.bind(this))}destructor(){this._dispatcher.unregister(this.dispatchToken),this.remove_all_change_listeners()}emit_change(){for(const t of this._change_listeners)r(t)}add_change_listener(t){(0,s.assert)(!this._change_listeners.includes(t),"adding duplicate change listener not allowed"),this._change_listeners.push(t)}remove_change_listener(t){this._change_listeners=this._change_listeners.filter(e=>e!==t)}remove_all_change_listeners(){this._change_listeners.length=0}_new_payload_wrapper(t){var e;(null===(e=null==t?void 0:t.action)||void 0===e?void 0:e.type)===this.constructor.WIPE_TYPE&&"function"==typeof this._init&&this._init(),this._new_payload(t)}_new_payload(t){throw new Error("Abstract method - must be implemented")}}e.Store=a,a.WIPE_TYPE="WIPE_ALL"})),define("metaserver/static/prod_assets_web_modules/flux",["exports"],(function(t){"use strict";var e={},i=function(t,e,i,s,r,a,n,c){if(!t){var h;if(void 0===e)h=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=[i,s,r,a,n,c],p=0;h=new Error("Invariant Violation: "+e.replace(/%s/g,(function(){return o[p++]})))}throw h.framesToPop=1,h}},s=1;function r(){this.$Dispatcher_callbacks={},this.$Dispatcher_isPending={},this.$Dispatcher_isHandled={},this.$Dispatcher_isDispatching=!1,this.$Dispatcher_pendingPayload=null}r.prototype.register=function(t){var e="ID_"+s++;return this.$Dispatcher_callbacks[e]=t,e},r.prototype.unregister=function(t){i(this.$Dispatcher_callbacks[t],"Dispatcher.unregister(...): `%s` does not map to a registered callback.",t),delete this.$Dispatcher_callbacks[t]},r.prototype.waitFor=function(t){i(this.$Dispatcher_isDispatching,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var e=0;e<t.length;e++){var s=t[e];this.$Dispatcher_isPending[s]?i(this.$Dispatcher_isHandled[s],"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",s):(i(this.$Dispatcher_callbacks[s],"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",s),this.$Dispatcher_invokeCallback(s))}},r.prototype.dispatch=function(t){i(!this.$Dispatcher_isDispatching,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),this.$Dispatcher_startDispatching(t);try{for(var e in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[e]||this.$Dispatcher_invokeCallback(e)}finally{this.$Dispatcher_stopDispatching()}},r.prototype.isDispatching=function(){return this.$Dispatcher_isDispatching},r.prototype.$Dispatcher_invokeCallback=function(t){this.$Dispatcher_isPending[t]=!0,this.$Dispatcher_callbacks[t](this.$Dispatcher_pendingPayload),this.$Dispatcher_isHandled[t]=!0},r.prototype.$Dispatcher_startDispatching=function(t){for(var e in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[e]=!1,this.$Dispatcher_isHandled[e]=!1;this.$Dispatcher_pendingPayload=t,this.$Dispatcher_isDispatching=!0},r.prototype.$Dispatcher_stopDispatching=function(){this.$Dispatcher_pendingPayload=null,this.$Dispatcher_isDispatching=!1};var a=r,n=e.Dispatcher=a;t.Dispatcher=n,t.default=e,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=pkg-api_v2-flux.min.js-vflOEke2a.map