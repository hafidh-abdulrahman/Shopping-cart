define(["require","exports","tslib","react","dig-components/typography","metaserver/static/js/core/i18n","metaserver/static/js/components/ui/css","metaserver/static/js/file_viewer/sdk_file_viewer/upsell/upsell_dialog","metaserver/static/js/file_viewer/sdk_file_viewer/replay_prompt/replay_dialog_api","metaserver/static/js/file_store/utils","metaserver/static/js/browse/constants","metaserver/static/js/campaigns/campaign_events_api"],(function(e,t,a,i,s,l,o,n,r,c,m,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReplayDialog=void 0,i=a.__importStar(i);const p=({user:e,file:t})=>{const[o,p]=i.useState(!1),[d,u]=i.useState(void 0);i.useEffect(()=>{a.__awaiter(void 0,void 0,void 0,(function*(){var a,i;if(e&&t&&(0,c.isBrowseFile)(t)){const s=null===(a=m.ExtensionCategories[(0,c.getExtension)(t)])||void 0===a?void 0:a.toLowerCase();if("video"!==s&&"audio"!==s&&"image"!==s)return;const l=yield(0,r.shouldShowReplayDialog)(e,s);p(!!l.show_entrypoint&&l.show_entrypoint),(null===(i=l.campaign_context)||void 0===i?void 0:i.campaign_impression_id)&&u((0,g.createMegaphoneCampaignImpressionContext)(l.campaign_context.campaign_impression_id,l.campaign_context.campaign_id?`${l.campaign_context.campaign_id}`:void 0,l.campaign_context.campaign_variant_id?`${l.campaign_context.campaign_variant_id}`:void 0))}}))},[]),i.useEffect(()=>{e&&o&&((0,r.logReplayDialogAction)(e,"impression",0),d&&(0,g.logCampaignImpression)(d))},[o]);const f=t?`https://replay.dropbox.com/project/creating/${t.file_id}?creationSource=dropbox_previews_prompt`:"https://replay.dropbox.com/?login=true";return o?i.createElement(n.UpsellDialog,{afterAccept:()=>{e&&(0,r.logReplayDialogAction)(e,"acknowledgement",0),d&&(0,g.logCampaignClick)(d)},afterDecline:()=>{e&&(0,r.logReplayDialogAction)(e,"dismissal",0),d&&(0,g.logCampaignDismissed)(d)},uxaPrefix:"replay-fvsdk-prompt",titleText:t&&(0,c.isBrowseFile)(t)&&"IMAGE"===m.ExtensionCategories[(0,c.getExtension)(t)]?l.intl.formatMessage({id:"i7h3zo",defaultMessage:"Fast-track Image reviews with Dropbox Replay, now in Beta"}):t&&(0,c.isBrowseFile)(t)&&"AUDIO"===m.ExtensionCategories[(0,c.getExtension)(t)]?l.intl.formatMessage({id:"7iOXVy",defaultMessage:"Make audio production with remote teams easier"}):l.intl.formatMessage({id:"vL51vF",defaultMessage:"Fast-track video reviews with Dropbox Replay, now in beta"}),bodyContent:(()=>{const e=t&&(0,c.isBrowseFile)(t)&&"IMAGE"===m.ExtensionCategories[(0,c.getExtension)(t)]?i.createElement(s.Text,{className:"replay-dialog-subtext",tagName:"p",isBold:!0},l.intl.formatMessage({id:"S6nX63",defaultMessage:"Get to your final image faster on one platform"})):t&&(0,c.isBrowseFile)(t)&&"AUDIO"===m.ExtensionCategories[(0,c.getExtension)(t)]?i.createElement(s.Text,{className:"replay-dialog-subtext",tagName:"p",isBold:!0},l.intl.formatMessage({id:"o8puBZ",defaultMessage:"Try Dropbox Replay, an easier way to collaborate on audio:"})):i.createElement(s.Text,{className:"replay-dialog-subtext",tagName:"p",isBold:!0},l.intl.formatMessage({id:"abiqtR",defaultMessage:"Streamline your approval process:"}));return i.createElement(i.Fragment,null,e,i.createElement(s.Text,{className:"replay-dialog-subtext",tagName:"div"},i.createElement("ul",{className:"replay-dialog-list",style:{paddingInlineStart:"20px"}},t&&(0,c.isBrowseFile)(t)&&"IMAGE"===m.ExtensionCategories[(0,c.getExtension)(t)]?i.createElement(i.Fragment,null,i.createElement("li",null,l.intl.formatMessage({id:"54U/Hq",defaultMessage:"Manage multiple versions of your images"})),i.createElement("li",null,l.intl.formatMessage({id:"VGKyQp",defaultMessage:"Collect feedback from multiple stakeholders"})),i.createElement("li",null,l.intl.formatMessage({id:"inGOLO",defaultMessage:"Streamline your approval process"}))):t&&(0,c.isBrowseFile)(t)&&"AUDIO"===m.ExtensionCategories[(0,c.getExtension)(t)]?i.createElement(i.Fragment,null,i.createElement("li",null,l.intl.formatMessage({id:"nV0yPL",defaultMessage:"Provide time-code accurate comments on audio tracks"})),i.createElement("li",null,l.intl.formatMessage({id:"FkLJx9",defaultMessage:"Collect feedback from multiple collaborators in one place"})),i.createElement("li",null,l.intl.formatMessage({id:"lWK8l2",defaultMessage:"Streamline the approval process"}))):i.createElement(i.Fragment,null,i.createElement("li",null,l.intl.formatMessage({id:"CNEbQT",defaultMessage:"Share video with HD-quality playback"})),i.createElement("li",null,l.intl.formatMessage({id:"TgIEQQ",defaultMessage:"See frame-accurate comments in one place"})),i.createElement("li",null,l.intl.formatMessage({id:"7NNqco",defaultMessage:"Seamlessly connect tools like Adobe Premiere Pro"}))))))})(),acceptText:l.intl.formatMessage({id:"lwBIQ/",defaultMessage:"Open with Replay"}),declineText:l.intl.formatMessage({id:"t97mKK",defaultMessage:"Not now"}),redirectUrl:f}):null};p.displayName="UnstyledReplayDialog",t.ReplayDialog=(0,o.requireCssWithComponent)(p,["/static/metaserver/static/css/file_viewer/upsell_dialog-vflLk_tpf.css"])}));
//# sourceMappingURL=replay_dialog.min.js-vflmhZqh-.map