define("metaserver/static/js/flux/action_type",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withActionNamespace=void 0;t.withActionNamespace=function(e,t){const r={},s={};for(const a of Object.keys(t||{})){const o=t[a];if(r[a]=`${e}__${o}`,null!=s[o])throw new Error(`Duplicate action value '${o}'!`);s[o]=!0}return r}})),define("metaserver/static/js/sharing/clean/util/guards",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEither=t.isBoth=t.isObjectOf=t.isArrayOf=t.isObject=t.isArray=t.isUndefined=t.isNull=t.isNumber=t.isString=t.isBoolean=t.isExactly=t.isUnknown=void 0;t.isUnknown=e=>!0;t.isExactly=e=>t=>t===e;t.isBoolean=e=>"boolean"==typeof e;t.isString=e=>"string"==typeof e;t.isNumber=e=>"number"==typeof e;t.isNull=e=>null===e;t.isUndefined=e=>void 0===e;t.isArray=e=>Array.isArray(e);t.isObject=e=>!(0,t.isNull)(e)&&!(0,t.isArray)(e)&&"object"==typeof e;t.isArrayOf=e=>r=>(0,t.isArray)(r)&&r.every(e);t.isObjectOf=e=>r=>(0,t.isObject)(r)&&Object.entries(e).every(([e,t])=>t(r[e]));t.isBoth=(e,t)=>r=>e(r)&&t(r);t.isEither=(e,t)=>r=>e(r)||t(r)})),define("metaserver/static/js/sharing/gating_util",["require","exports","metaserver/static/js/modules/constants/sharing"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUserNoCommentEnabled=t.GoldenGate=void 0,t.GoldenGate={hasNewOwnershipModel:e=>Boolean(r.GOLDEN_GATE.HAS_NEW_OWNERSHIP_MODEL[e]),hasContentManagerAndSuperAdmin:e=>Boolean(r.GOLDEN_GATE.HAS_CONTENT_MANAGER_AND_SUPER_ADMIN[e]),hasContentManagerCdm:e=>Boolean(r.GOLDEN_GATE.HAS_CONTENT_MANAGER_CDM[e]),hasContentManagerFolderRestore:e=>Boolean(r.GOLDEN_GATE.CAN_RESTORE_FOLDERS_IN_CM[e]),SHARING_TOTAL_LIMIT:r.GOLDEN_GATE.SHARING_TOTAL_LIMIT},t.isUserNoCommentEnabled=function(e){return r.TRUELINK.NO_COMMENT_ENABLED&&!!(null!=e?r.TRUELINK.NO_COMMENT_ENABLED[e.id]:void 0)}})),define("metaserver/static/js/sharing/share_page/action_types",["require","exports","metaserver/static/js/flux/action_type"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharePageActionTypes=void 0;const s=(0,r.withActionNamespace)("share-page",{INITIALIZE:"initialize-store",EMAIL_UNVERIFIED:"email-unverified",RECENT_TAB_EMAIL_UNVERIFIED:"recent-tab-email-unverified",SWITCH_TAB:"switch-tab",SWITCH_ROLE:"switch-role",SWITCH_USER:"switch-user",LOAD_PRE_FOLDER_DATA_REQUEST:"load-pre-folder-data-request",LOAD_PRE_FOLDER_DATA_SUCCESS:"load-pre-folder-data-success",LOAD_PRE_FOLDER_DATA_ERROR:"load-pre-folder-data-error",LOAD_FOLDER_DATA_REQUEST:"load-folder-data-request",LOAD_FOLDER_DATA_SUCCESS:"load-folder-data-success",LOAD_FOLDER_DATA_ERROR:"load-folder-data-error",LOAD_PRE_FILE_DATA_REQUEST:"load-pre-file-data-request",LOAD_PRE_FILE_DATA_SUCCESS:"load-pre-file-data-success",LOAD_PRE_FILE_DATA_ERROR:"load-pre-file-data-error",LOAD_FILE_DATA_REQUEST:"load-file-data-request",LOAD_FILE_DATA_SUCCESS:"load-file-data-success",LOAD_FILE_DATA_ERROR:"load-file-data-error",MOUNT_FOLDER_REQUEST:"mount-folder-request",MOUNT_FOLDER_SUCCESS:"mount-folder-success",MOUNT_FOLDER_ERROR:"mount-folder-error",UNMOUNT_FOLDER_REQUEST:"unmount-folder-request",UNMOUNT_FOLDER_SUCCESS:"unmount-folder-success",UNMOUNT_FOLDER_ERROR:"unmount-folder-error",UNSHARE_FOLDER_REQUEST:"unshare-folder-request",UNSHARE_FOLDER_SUCCESS:"unshare-folder-success",UNSHARE_FOLDER_ERROR:"unshare-folder-error",FETCH_TEAM_POLICY_REQUEST:"fetch-team-policy-request",FETCH_TEAM_POLICY_SUCCESS:"fetch-team-policy-success",FETCH_TEAM_POLICY_ERROR:"fetch-team-policy-error",FETCH_FOLDER_POLICY_SUCCESS:"fetch-folder-policy-success",FETCH_METADATA_SUCCESS:"fetch-metadata-success",RELINQUISH_FOLDER_MEMBERSHIP_REQUEST:"relinquish-folder-membership-request",RELINQUISH_FOLDER_MEMBERSHIP_SUCCESS:"relinquish-folder-membership-success",RELINQUISH_FOLDER_MEMBERSHIP_ERROR:"relinquish-folder-membership-error",RELINQUISH_FILE_MEMBERSHIP_REQUEST:"relinquish-file-membership-request",RELINQUISH_FILE_MEMBERSHIP_SUCCESS:"relinquish-file-membership-success",RELINQUISH_FILE_MEMBERSHIP_ERROR:"relinquish-file-membership-error"});t.SharePageActionTypes=s})),define("metaserver/static/js/sharing/ui_util",["require","exports","tslib","react","lodash","metaserver/static/js/clean/analytics","metaserver/static/js/api_v2/error","metaserver/static/js/contacts/contact_token_state","js/filepath/filepath","metaserver/static/js/clean/filetypes","metaserver/static/js/icon/icon_helper","metaserver/static/js/sharing/api/types/metadata","metaserver/static/js/sharing/gating_util","metaserver/static/js/modules/constants/trademark","metaserver/static/js/core/i18n","metaserver/static/js/core/format_html","metaserver/static/js/user_survey/user_survey","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/sharing/clean/util/guards","metaserver/static/js/campaigns/emitter","metaserver/static/js/onboarding/logging/events","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/sharing_settings_util"],(function(e,t,r,s,a,o,i,n,l,d,_,c,u,E,m,p,f,g,h,M,S,O){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.publishShopModalEvent=t.getShopModalLoggingParams=t.getShopModalCtx=t.trackSharePageUserLeapEvent=t.trackReceiverUserLeapEvent=t.ReceiverUserLeapEvent=t.trackUserLeapEvent=t.SharingUserLeapEvent=t.validateContacts=t.validateContact=t.namespaceLimitExceededFailCreateSharedFolderSnackbarMsg=t.treeSizeExceededFailSnackbarMsg=t.homeMountsExceededFailSnackbarMsg=t.totalMountsExceededFailSnackbarMsg=t.spectrumFolderIconForMetadata=t.shouldEnforceMemberLimits=t.logTiburonEvent=t.getTreeSizeExceededLinkOnlyMsg=t.getHomeMountsExceededLinkOnlyMsg=t.getTotalMountsExceededLinkOnlyMsg=t.getLinkOnlyTitle=t.getTotalMountsExceededMountFoldersMsg=t.getTreeSizeExceededMountFoldersMsg=t.getHomeMountsExceededMountFoldersMsg=t.getTotalMountsExceededMsg=t.getTreeSizeExceededMsg=t.getNewFolderPathFromContentName=t.getMountLimitInfo=t.getMemberCountForTokens=t.getHomeMountsExceededMsg=t.getExceededCountInfo=t.getContactSupportMessage=t.genAddMemberErrorMessage=t.isTreeSizeExceededError=t.isHomeMountsExceededError=t.isTotalMountsExceededError=t.SHARE_UI_TYPE=t.SharingExperiments=t.makeMemberSortCmp=t.fileIconForMetadata=t.convertIfHTML=t.NSF_HELP_ARTICLE_LINK=t.CONTACT_ERROR_MESSAGES=t.ContactsErrorLevel=void 0,s=r.__importDefault(s),a=r.__importStar(a),h=r.__importStar(h);t.SharingExperiments={};const R={strong:e=>s.default.createElement("strong",null,e),em:e=>s.default.createElement("em",null,e)};t.SHARE_UI_TYPE={SHARED_FILE:"shared-file",SHARED_FOLDER:"shared-folder",SHARED_LINK:"shared-link",PUBLIC:"public",NO_SHARE:"no-share"};const T={SINGLE_INVALID:m.intl.formatMessage({id:"AwwRIX",defaultMessage:"The email address you entered is invalid."}),OUT_OF_TEAM:m.intl.formatMessage({id:"KCd6Mi",defaultMessage:"You can only share with your team and people your admin has approved."}),NOT_DROPBOX_USER:(e,t,r)=>m.intl.formatMessage({id:"vFxlGE",defaultMessage:"{count, plural, one{The person} other{Some people}} you invited will need to create an account to {access_level} the {file_type}. "},{file_type:t?"folder":"file",access_level:"writer"===r?"edit":"view",count:e}),SEND_LINK:m.intl.formatMessage({id:"f8bN8Q",defaultMessage:"Copy and send them a link instead to view without an account."}),SINGLE_TOO_MANY_MEMBERS:m.intl.formatMessage({id:"ZEnulX",defaultMessage:"Can’t share with this many people."}),GENERAL_INVALID:m.intl.formatMessage({id:"85p8vn",defaultMessage:"One or more names or email addresses you entered are invalid."}),GENERAL_OUT_OF_TEAM_MULTIPLE:m.intl.formatMessage({id:"XliECV",defaultMessage:"Some of these emails aren’t on your Dropbox team."}),GENERAL_OUT_OF_TEAM_SINGLE:m.intl.formatMessage({id:"vgnpLP",defaultMessage:"This email isn’t on your Dropbox team."}),GENERAL_TOO_MANY_MEMBERS:m.intl.formatMessage({id:"rTaV0v",defaultMessage:"This will put the folder over its {member_limit}-member limit. <a>Learn more.</a>"},{member_limit:u.GoldenGate.SHARING_TOTAL_LIMIT,a:e=>s.default.createElement("a",{href:"/help/9292",target:"_blank",key:"help_center_article"},e)}),NONGROUP_INVITEE:m.intl.formatMessage({id:"XHbTJ8",defaultMessage:"Only groups can be added to team folders."}),NO_PERMISSION:m.intl.formatMessage({id:"O1327M",defaultMessage:"You don’t have permission to share with this person."}),GENERAL_NO_PERMISSION:m.intl.formatMessage({id:"XDLsmJ",defaultMessage:"You don’t have permission to share with some of these people."})};var A;t.CONTACT_ERROR_MESSAGES=T,(function(e){e.Error="error",e.Warn="warn"})(A||(A={})),t.ContactsErrorLevel=A;t.NSF_HELP_ARTICLE_LINK="https://help.dropbox.com/files-folders/share/shared-folder-faq#cantcreate";const y=(e,t)=>(t.displayName()||"").toLowerCase(),L=Math.pow(2,53)-1;t.makeMemberSortCmp=function(e,t,r){const s=r?(e=>function(t,r){const s=r.memberId()===t,a=r instanceof c.GroupMembershipInfo?"0":"1",o=(r.displayName()||"").toLowerCase(),i=null!=r.account_id&&e.has(r.account_id);return`${a}${i&&s?"a":i?"b":null!=r.time_last_seen?`c${(function(e){let t=String(L-Number(e));const r=String(L).length;return t.length<r&&(t=`${Array(r-t.length+1).join("0")}${t}`),t})(r.time_last_seen)}`:"d"}${o}`})(t):y;return function(t,r){const a=s(e.account_id,t),o=s(e.account_id,r);return a<o?-1:a===o?0:1}};const I=function(e,t,r){return!e.is_cdm_member&&(t||r)};t.shouldEnforceMemberLimits=I;t.validateContact=function(e,t,r,s,a,o,i){let l={state:n.ContactTokenState.ok,msg:null};if(a&&!e.group_id)return{state:n.ContactTokenState.invalid,msg:T.NONGROUP_INVITEE};if(I(t,a,o)&&i>u.GoldenGate.SHARING_TOTAL_LIMIT)return{state:n.ContactTokenState.invalid,msg:T.SINGLE_TOO_MANY_MEMBERS};if(e.invalid)l={state:n.ContactTokenState.invalid,msg:T.SINGLE_INVALID};else{if(e.email===t.email)return l;if(null!=r&&t.is_team&&e.dbx_team_id!==r.id&&!e.group_id){const e=T.OUT_OF_TEAM;let t;t="team"===(null!=s?s.member_policy:void 0)||"team"===(null!=s?s.resolved_member_policy:void 0)?n.ContactTokenState.invalid:n.ContactTokenState.warn,l={msg:e,state:t}}}return l};t.validateContacts=function(e,t,r,s,a,o,i,l,d){let _,c;for(const t of e){const s=r[t.getKey()];if(!s)continue;const a=e.filter(e=>!e.on_team).length,o=e.filter(e=>null==e.dbx_account_id).length,{state:u,msg:E}=s;if(u===n.ContactTokenState.invalid){if(_=A.Error,E===T.SINGLE_INVALID){c=T.GENERAL_INVALID;break}E===T.OUT_OF_TEAM&&(c=a>1?T.GENERAL_OUT_OF_TEAM_MULTIPLE:T.GENERAL_OUT_OF_TEAM_SINGLE),E===T.NONGROUP_INVITEE&&(c=T.NONGROUP_INVITEE),E===T.NO_PERMISSION&&(c=T.GENERAL_NO_PERMISSION)}if(u===n.ContactTokenState.warn)if(_=A.Warn,E===T.OUT_OF_TEAM)c=a>1?T.GENERAL_OUT_OF_TEAM_MULTIPLE:T.GENERAL_OUT_OF_TEAM_SINGLE;else if("NOT_DROPBOX_USER"===E){let e;if(c=T.NOT_DROPBOX_USER(o,l,i),e="writer"===i?d.find(e=>"editor"===e.accessLevel()):d.find(e=>"viewer"===e.accessLevel()||!e.isRighteousLink()),e){"no_one"!==(0,O.getAudienceForLink)(e.link_permissions)&&(c+=T.SEND_LINK)}else c+=T.SEND_LINK}}return I(t,s,a)&&e.length>0&&_!==A.Error&&o>u.GoldenGate.SHARING_TOTAL_LIMIT&&(_=A.Error,c=T.GENERAL_TOO_MANY_MEMBERS),{level:_,message:c}};t.logTiburonEvent=(e,t,r,s={})=>{const i=e.extras.origin;o.ShareTibEventLogger.log(t,r,i,a.assignIn(s,{file_id:e.extras.fileId,fq_path:e.displayPath(),ns_id:e.isSharedFolder()?e.sharedFolderId():void 0,modal_session_id:e.extras.modalSessionId}))};const N={access_error:m.intl.formatMessage({id:"N0ZK+y",defaultMessage:"You don’t have access to this content."}),email_unverified:m.intl.formatMessage({id:"YVPxPt",defaultMessage:"You haven’t verified your email. Check your email and try again."}),bad_member:m.intl.formatMessage({id:"0AMMBX",defaultMessage:"You entered an invalid name or email address."}),cant_share_outside_team:m.intl.formatMessage({id:"JoJWle",defaultMessage:"Your team settings don’t allow sharing outside your team."}),too_many_members:m.intl.formatMessage({id:"Zq3Ehi",defaultMessage:"You’re sharing with too many people."}),too_many_pending_invites:m.intl.formatMessage({id:"Zq3Ehi",defaultMessage:"You’re sharing with too many people."}),rate_limit:m.intl.formatMessage({id:"ZXI9uh",defaultMessage:"You’ve hit the limit of invites for today. Try again later."}),insufficient_plan:m.intl.formatMessage({id:"osl3qq",defaultMessage:"You need a Dropbox {trademark_plus} or Business account to do this."},{trademark_plus:E.TRADEMARK_PLUS}),team_folder:m.intl.formatMessage({id:"ehBhap",defaultMessage:"You can’t add members to a team folder. Contact your team admin."}),no_permission:m.intl.formatMessage({id:"5/am2Y",defaultMessage:"You don’t have permission to do this. Contact the owner."})};t.genAddMemberErrorMessage=function(e){return e.message?e.message:e instanceof i.AppError&&e.error&&e.error[".tag"]&&N[e.error[".tag"]]?N[e.error[".tag"]]:m.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."})};t.spectrumFolderIconForMetadata=function(e){const t=null!=e.parent_shared_folder_id,r=e.isViewOnly();let s=d.FileTypes.FOLDER;return e.isSharedFolder()?s=d.FileTypes.SHARED_FOLDER:e.is_team_folder&&(s=d.FileTypes.TEAM_SHARED_FOLDER),(0,_.spectrumFolderIcon)({fileType:s,isInTeamFolderTree:t,isViewOnly:r})};t.fileIconForMetadata=e=>(0,_.file_icon)(e.name,{size:_.ICON_SIZES.LARGE});t.getNewFolderPathFromContentName=function(e,t){return[(0,l.normalize)(t),e].join("/")};t.getMemberCountForTokens=function(e){return null==e?0:e.map(e=>e.group_size||1).reduce((e,t)=>e+t,0)};var b,v;t.convertIfHTML=function(e){return e.toHTML?(0,p.legacyFormatHtmlAsReact)(e.toHTML(),R):e},(function(e){e.SHARE_SUCCESS="share_success",e.SHARE_MODAL_CLOSE="share_modal_close",e.SHARE_LINK_MEMBER_LIST_ON="share_link_member_list_on",e.SHARE_LINK_MEMBER_LIST_CONTROL="share_link_member_list_control",e.SHARE_LINK_COPY_SUCCESS="share_link_copy_success",e.SHARE_LINK_CREATE_SUCCESS="share_link_create_success"})(b||(b={})),t.SharingUserLeapEvent=b,(function(e){e.VIEWED_SHARED_FOLDER="viewed_shared_folder",e.VIEWED_SHARED_FILE="viewed_shared_file",e.VISIT_SHARE_PAGE="visit_share_page",e.VISIT_SHARE_PAGE_LINKS_TAB="visit_share_page_links_tab",e.VIEWED_SHARED_FOLDER_PROMPT_ON="viewed_shared_folder_prompt_on",e.VIEWED_SHARED_FOLDER_PROMPT_CONTROL="viewed_shared_folder_prompt_control"})(v||(v={})),t.ReceiverUserLeapEvent=v;t.trackUserLeapEvent=(e,t)=>{(e=>void 0!==e&&[g.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ACTIONS,g.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_FACEPILE,g.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ROW,g.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ROW_BUTTON,g.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ROW_OVERFLOW_MENU,g.SHARE_ACTION_ORIGIN_TYPE.MANAGE_ACCESS_CLOSE,g.SHARE_ACTION_ORIGIN_TYPE.SHARE_LINK_MODAL].indexOf(e)>=0)(t)&&(f.UserSurvey.addAttribute("eventName",e),f.UserSurvey.trackEvent(e,"sharing"))};const C=e=>{f.UserSurvey.addAttribute("eventName",e),f.UserSurvey.trackEvent(e,"sharing")};t.trackReceiverUserLeapEvent=C;t.trackSharePageUserLeapEvent=(e,t)=>{f.UserSurvey.addAttribute("contentCount",t),C(e)};t.getTotalMountsExceededMsg=()=>m.intl.formatMessage({id:"CdLxbe",defaultMessage:"Unable to complete this operation because your Dropbox has too many shared folders."});t.getHomeMountsExceededMsg=()=>m.intl.formatMessage({id:"AMJRvM",defaultMessage:"Unable to complete this operation because your Dropbox has too many shared folders."});t.getTreeSizeExceededMsg=()=>m.intl.formatMessage({id:"SfQyoF",defaultMessage:"Unable to complete this operation because the top level folder has too many shared folders."});t.getTotalMountsExceededMountFoldersMsg=e=>{const t=U(e);return m.intl.formatMessage({id:"EjCgHX",defaultMessage:"Couldn’t add folder. Your Dropbox account is {number, plural, one{1 shared folder} other {{number} shared folders}} over the limit."},{number:t})};t.getHomeMountsExceededMountFoldersMsg=e=>{const t=U(e);return m.intl.formatMessage({id:"ufWtvO",defaultMessage:"Couldn’t add folder. Your Dropbox account is {number, plural, one{1 shared folder} other {{number} shared folders}} over the limit."},{number:t})};t.getTreeSizeExceededMountFoldersMsg=e=>{const t=U(e);return m.intl.formatMessage({id:"6mGfdj",defaultMessage:"Couldn’t add folder. Your Dropbox account is {number, plural, one{1 shared folder} other {{number} shared folders}} over the limit."},{number:t})};t.getLinkOnlyTitle=()=>m.intl.formatMessage({id:"Ugz0Dm",defaultMessage:"This folder can only be shared with a link"});t.getTotalMountsExceededLinkOnlyMsg=e=>m.intl.formatMessage({id:"XP7H5x",defaultMessage:"Your Dropbox account is {number, plural, one{1 shared folder} other {{number} shared folders}} over the limit."},{number:e});t.getHomeMountsExceededLinkOnlyMsg=e=>m.intl.formatMessage({id:"wCYUIO",defaultMessage:"Your Dropbox account is {number, plural, one{1 shared folder} other {{number} shared folders}} over the limit."},{number:e});t.getTreeSizeExceededLinkOnlyMsg=e=>m.intl.formatMessage({id:"BY6VL1",defaultMessage:"The parent folder is {number, plural, one{1 shared folder} other {{number} shared folders}} over the limit."},{number:e});const x=e=>h.isObjectOf({error:h.isObjectOf({".tag":h.isExactly("too_many_mounts"),too_many_mounts:h.isObjectOf({".tag":e})})}),w=x(h.isExactly("total_mounts_exceeded"));t.isTotalMountsExceededError=w;const D=x(h.isExactly("home_mounts_exceeded"));t.isHomeMountsExceededError=D;const P=x(h.isExactly("tree_size_exceeded"));t.isTreeSizeExceededError=P;t.getContactSupportMessage=()=>m.intl.formatMessage({id:"Bcojaq",defaultMessage:"Contact support"});const F=e=>new c.MountLimitInfo({limit:e.error.too_many_mounts.limit,current_count:e.error.too_many_mounts.current_count,new_count:e.error.too_many_mounts.new_count});t.getMountLimitInfo=F;t.namespaceLimitExceededFailCreateSharedFolderSnackbarMsg=e=>{const t=U(e);return m.intl.formatMessage({id:"0UrAT5",defaultMessage:"Couldn’t create shared folder. Your Dropbox account is {number, plural, one{1 shared folder} other {{number} shared folders}} over the limit."},{number:t})};t.homeMountsExceededFailSnackbarMsg=e=>{const t=U(e);return m.intl.formatMessage({id:"ZQSxHJ",defaultMessage:"Couldn’t create link. Your Dropbox account is {number, plural, one{1 shared folder} other {{number} shared folders}} over the limit."},{number:t})};t.totalMountsExceededFailSnackbarMsg=e=>{const t=U(e);return m.intl.formatMessage({id:"mV9Yzt",defaultMessage:"Couldn’t create link. Your Dropbox account is {number, plural, one{1 shared folder} other {{number} shared folders}} over the limit."},{number:t})};t.treeSizeExceededFailSnackbarMsg=e=>{const t=U(e);return m.intl.formatMessage({id:"Hhv0z6",defaultMessage:"Couldn’t create link. Your Dropbox account is {number, plural, one{1 shared folder} other {{number} shared folders}} over the limit."},{number:t})};const U=e=>{const t=F(e),r=t.limit;return t.new_count-r};t.getExceededCountInfo=U;const k=(e,t)=>{const r=e.name().split(".").pop();let s="share_modal";return t&&(s=`${t}_${s}`),{fileExts:r?{[r]:1}:{},fileIds:e.fileId(),referrer:s,shouldLogQualifyEvent:!0}};t.getShopModalCtx=k;const H=(e,t)=>{const{referrer:r,fileExts:s}=k(e,t),a={experiment:"core_act_shop_entry_point",location:r,file_exts:s};return{onImpression:{eventName:S.ShopEntryPointEvents.SHOP_ENTRY_POINT_IMPRESSION,extras:a},onConfirm:{eventName:S.ShopEntryPointEvents.SHOP_ENTRY_POINT_CTA_CLICK,extras:a},onDismiss:{eventName:S.ShopEntryPointEvents.SHOP_ENTRY_POINT_DISMISS,extras:a}}};t.getShopModalLoggingParams=H;t.publishShopModalEvent=(e,t,r,s=!1)=>{t.isFile()&&t.name()&&(0,M.publishEvent)(e,{context:k(t,r),loggingParams:s?H(t,r):void 0})}})),define("typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/sharing_settings_util",["require","exports","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/link_metadata_types","typescript/component_libraries/spectrum-sharing/src/utils/datetime_util"],(function(e,t,r,s){"use strict";function a(e){return e.requested_visibility===r.RequestedVisibilityPolicy.password||e.require_password}function o(e){return e.audience_options.filter(e=>"password"===e.audience&&e.allowed).length>0}function i(e){if(e.effective_audience)return e.effective_audience;switch(e.resolved_visibility){case"public":case"password":case"no_one":return e.resolved_visibility;case"team_only":return"team";case"team_and_password":return"password";case"shared_folder_only":case"only_you":return"no_one"}}Object.defineProperty(t,"__esModule",{value:!0}),t.canCreateLink=t.getLinkControlPolicyWarningText=t.isReadOnlyPolicy=t.isExpirationPolicyEnforcedByAdmin=t.isPasswordPolicyEnforcedByAdmin=t.isExpirationPolicySetByAdmin=t.isExternalAudience=t.daysExpirationPolicyToNumber=t.SharingSettingsUtil=t.getAudienceForLink=t.canModifyExpire=t.canToggleExpire=t.canModifyPassword=t.canChangeShmodelPassword=t.canTogglePassword=t.hasLinkPassword=void 0,t.hasLinkPassword=a,t.canTogglePassword=function(e){return Boolean(e&&e.require_password?e.can_remove_password:e.can_set_password)||o(e)},t.canChangeShmodelPassword=o,t.canModifyPassword=function(e){return Boolean(e&&e.can_set_password)||o(e)},t.canToggleExpire=function(e){const t=e.link_permissions;return Boolean(null!=e.expires?t.can_remove_expiry:t.can_set_expiry)},t.canModifyExpire=function(e){const t=e.link_permissions;return Boolean(t.can_set_expiry)},t.getAudienceForLink=i;function n(e){return["public","password"].includes(e)}function l(e){return!!e.days_to_expire_policy&&"none"!==e.days_to_expire_policy}function d(e){return!!e.enforce_shared_link_password_policy&&"required"===e.enforce_shared_link_password_policy}function _(e){return l(e)&&!!e.change_shared_link_expiration_policy&&"not_allowed"===e.change_shared_link_expiration_policy}function c(e,t){return n(e.audience)&&(!e.expires&&_(t)||!a(t)&&d(t))}t.SharingSettingsUtil=e=>({getLinkPolicy:e=>({link_password:a(e.link_permissions)?void 0:"",expires:e.expires,allow_download:e.link_permissions.allow_download,audience:i(e.link_permissions),require_password:e.link_permissions.require_password}),getModifiedSettings:(t,r,a)=>{if(r===a)return;const o={},i=null!=t.expires&&null==r.expires;if(r.audience!==a.audience&&(o.audience=r.audience),r.allow_download!==a.allow_download&&(o.allow_download=r.allow_download),r.expires&&t.link_permissions.can_set_expiry&&(o.expires=(0,s.formatDateToString)(r.expires)),r.require_password!==a.require_password&&(o.require_password=r.require_password),"password"===r.audience||r.require_password)if(r.link_password)o.require_password=!0,o.link_password=r.link_password;else if(""===r.link_password)return{error:e.formatMessage({id:"wFrAfD",defaultMessage:"Password can’t be empty"})};return Object.keys(o).length<=0&&!i?void 0:{url:t.url,settings:o,remove_expiration:i}}}),t.daysExpirationPolicyToNumber={day_1:1,day_3:3,day_7:7,day_30:30,day_90:90,day_180:180,year_1:365},t.isExternalAudience=n,t.isExpirationPolicySetByAdmin=l,t.isPasswordPolicyEnforcedByAdmin=d,t.isExpirationPolicyEnforcedByAdmin=_,t.isReadOnlyPolicy=c,t.getLinkControlPolicyWarningText=function(e,r,s,a){let o="";if(c(e,s)){const e=_(s),t=d(s);o=a.formatMessage({id:"wCF2Es",defaultMessage:"Your admin requires {requirements, select, 0 {an expiration and a password} 1 {a password} 2 {an expiration}} for links shared outside the team. To change the link setting, delete the link and create it again."},{requirements:e&&t?0:t?1:2})}else r.display_expiration_warning?o=a.formatMessage({id:"wKX132",defaultMessage:"Your admin {show_password_text, select, true {requires a password and } false {}}has set an expiration for all links shared outside the team. This link will expire in {days_to_expire, plural, =365 {1 year} one {# day} other {# days}}.{expiration_enforced, select, true { You can change or remove this expiration.} false {}}"},{days_to_expire:t.daysExpirationPolicyToNumber[s.days_to_expire_policy],expiration_enforced:"allowed"===s.change_shared_link_expiration_policy,show_password_text:!!r.display_password_warning}):r.display_password_warning&&(o=a.formatMessage({id:"lcVbzE",defaultMessage:"Your admin requires to set a password for links shared outside the team."}));return o},t.canCreateLink=function(e,t,r,s,a,o,i,n,l,d,_){switch(e){case"editor":return r?o&&!s&&!a:!s&&l;case"viewer":return!("writer"===d&&!_)&&(t?n:!s&&n||i);default:return!1}}})),define("typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/link_metadata_types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkAudienceDisallowedReason=t.ResolvedVisibilityPolicy=t.RequestedVisibilityPolicy=t.DEFAULT_SHARING_LINK_AUDIENCE=t.LINK_AUDIENCE=void 0,t.LINK_AUDIENCE={PUBLIC:"public",TEAM:"team",PASSWORD:"password",NO_ONE:"no_one"},t.DEFAULT_SHARING_LINK_AUDIENCE={0:"unknown",1:"public",2:"no_one"},t.RequestedVisibilityPolicy={policy_name:"requested_visibility",password:"password",public:"public",team_only:"team_only"},t.ResolvedVisibilityPolicy={policy_name:"resolved_visibility",only_you:"only_you",password:"password",public:"public",shared_folder_only:"shared_folder_only",team_and_password:"team_and_password",team_only:"team_only",no_one:"no_one"},(function(e){e.DeleteAndRecreate="delete_and_recreate",e.RestrictedBySharedFolder="restricted_by_shared_folder",e.RestrictedByTeam="restricted_by_team",e.UserAccountType="user_account_type",e.UserNotOnTeam="user_not_on_team",e.PermissionDenied="permission_denied"})(t.LinkAudienceDisallowedReason||(t.LinkAudienceDisallowedReason={}))}));
//# sourceMappingURL=pkg-browse-and-photos.min.js-vflKy_Qe6.map