define("js/browser/css/css_cache",["require","exports","js/browser/css/inject_css"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadCssWithCache=t.getOrCreateCache=void 0,t.getOrCreateCache=function(e){const t=e;return t._cssCache||(t._cssCache={loaded_css:Object.create(null),already_loaded_css_paths:Object.create(null)}),t._cssCache},t.loadCssWithCache=function(e,t,s,i){let c=t.loaded_css[s];return c||(c=new Promise((c,a)=>{const n=e.createElement("link");return n.href=i,n.rel="stylesheet",n.type="text/css",n.crossorigin="anonymous",n.onload=function(){return t.already_loaded_css_paths[s]="loaded",c()},n.onerror=a,(0,r.injectCss)([{elem:n,path:s}],"loadCssWithCache",e),n}),t.loaded_css[s]=c,t.already_loaded_css_paths[s]="downloading"),c}})),define("metaserver/static/js/css/css",["require","exports","metaserver/static/js/clean/static_urls","metaserver/static/js/core/assert","metaserver/static/js/core/uri","js/browser/css/css_cache"],(function(e,t,r,s,i,c){"use strict";function a(e=document){const t=(0,c.getOrCreateCache)(e),r=e.querySelectorAll('link[rel="stylesheet"]');for(let e=0;e<r.length;e++){const s=r[e];let c=i.URI.parse(s.href).getPath();0,null==t.already_loaded_css_paths[c]&&(t.loaded_css[c]=Promise.resolve(),t.already_loaded_css_paths[c]="loaded")}}function n(e,t,s,i=document){const a=(0,c.getOrCreateCache)(i),n=(0,r.static_url)(e);return(0,c.loadCssWithCache)(i,a,e,n).then(t,s)}Object.defineProperty(t,"__esModule",{value:!0}),t.registerCSSForPreload=t.is_loaded=t.require_css_multi=t.require_css=t.css_url=void 0,a(),t.css_url=function(e){return`url("${String(e).replace(/\\/g,"\\\\").replace(/"/g,'\\"')}")`},t.require_css=n,t.require_css_multi=function(e,t,r,s=document){const i=e.map(e=>n(e,void 0,void 0,s));return Promise.all(i).then(t,r)},t.is_loaded=function(e,t=document){const r=(0,c.getOrCreateCache)(t);return!!e.every(e=>((0,s.assert)(e.startsWith("/static/"),`invalid static css path: ${e}`),"loaded"===r.already_loaded_css_paths[e]))||(a(t),e.every(e=>"loaded"===r.already_loaded_css_paths[e]))},t.registerCSSForPreload=function(e){}})),define("metaserver/static/js/core/uri",["require","exports","metaserver/static/js/core/assert"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryComponent=t.URI=void 0;const s=/^(?:([^:\/\\?#]+):)?(?:[\/\\]{2}([^\/\\?#]*))?([^?#]*)(?:\?([^#]*))?(?:[#](.*))?$/,i=/^[a-zA-Z][a-zA-Z0-9+.\-]*$/;class c{constructor(e={}){this.dict={},this.add(e)}static parseString(e){if(!e)return{};const t={};return e.split("&").forEach(e=>{if(""!==e){const r=e.split("="),s=c.decode(r[0]),i=c.decode(r.slice(1).join("="));if(t.hasOwnProperty(s)){const e=t[s];let r;r="string"==typeof e?[e]:void 0===e?[]:e,r.push(i),t[s]=r}else t[s]=i}}),t}add(e,t){if("string"==typeof e)t&&(Array.isArray(t)?this.dict[e]=t.map(String):this.dict[e]=String(t));else for(const t in e)if(e.hasOwnProperty(t)){const r=e[t];null!=r&&(Array.isArray(r)?this.dict[t]=r.map(String):this.dict[t]=String(r))}return this}remove(e){return delete this.dict[e],this}replace(e){return this.dict=e,this}toString(){const e=[],t=Object.keys(this.dict).sort();for(const r of t)if(this.dict.hasOwnProperty(r)){const t=this.dict[r];Array.isArray(t)?t.forEach(t=>{e.push(c.encode(r)+"="+c.encode(t))}):e.push(c.encode(r)+"="+c.encode(t))}return e.length?e.join("&"):""}static decode(e){return null==e?"":a.decode(e.replace(/\+/g,"%20"))}static encode(e){return null==e?"":a.encode(e).replace(/%20/g,"+")}}t.QueryComponent=c;class a{constructor(e={}){this.query=new c,this.initFromObject(e)}initFromObject(e){this.setScheme(e.scheme),this.authority=e.authority||"",this.path=e.path||"",this.setQuery(e.query),this.fragment=e.fragment||""}getScheme(){return this.scheme}getAuthority(){return this.authority}getPath(){return this.path}getQuery(){return this.query.dict}getFragment(){return this.fragment}setScheme(e=""){const t=!e||Boolean(e.match(i));return(0,r.assert)(t,"Invalid scheme",{exc_extra:{scheme_param:e}}),this.scheme=e,this}setAuthority(e=""){return this.authority=e,this}setPath(e=""){return this.path=e,this}setQuery(e={}){return this.query=new c(e),this}setFragment(e=""){return this.fragment=e,this}updateQuery(e,t){return this.query.add(e,t),this}removeQuery(e){return this.query.remove(e),this}clone(){return new a(this.toObject())}toObject(){return{scheme:this.getScheme(),authority:this.getAuthority(),path:this.getPath(),query:this.getQuery(),fragment:this.getFragment()}}toString(){let e="";return this.scheme&&(e+=this.scheme+":"),this.authority&&(e+="//"+a.encode(this.authority,":@[]")),e+this.toRelativeUri()}toRelativeUri(){let e="";this.path&&((0,r.assert)(!this.authority||!this.path.length||"/"===this.path[0],'Path must start with a "/" if URI is not relative'),e+=a.encode(this.path,"/"));const t=this.query.toString();return t&&(e+="?"+t),this.fragment&&(e+="#"+a.encode(this.fragment,":@[]/&=+?#!")),e}static parse(e){const t=String(e).match(s)||[],[,r,i,n,o,h]=t,u=new a;return u.setScheme(r),u.setAuthority(a.decode(i)),u.setPath(a.decode(n)),u.setQuery(c.parseString(o)),u.setFragment(a.decode(h)),u}static decode(e){return e?decodeURIComponent(e):""}static encode(e,t=""){if(!e)return"";e=encodeURIComponent(e),t+="~";for(const r of t){const t=encodeURIComponent(r);e=e.replace(new RegExp(t,"g"),r)}return e}static encode_parts(e,t="/"){return e.split(t).map(e=>a.encode(e)).join(t)}}t.URI=a,a.Query=c})),define("metaserver/static/js/clean/static_urls",["require","exports","metaserver/static/js/core/assert","metaserver/static/js/core/uri"],(function(e,t,r,s){"use strict";function i(e){return e}Object.defineProperty(t,"__esModule",{value:!0}),t.static_url=t.apply_static_url_dev_vfl=void 0,t.apply_static_url_dev_vfl=i,t.static_url=function(e){return(0,r.assert)(e.startsWith("/static/"),`'${e}' is not a /static url`),e=e,new s.URI({scheme:"https",authority:"cfl.dropboxstatic.com",path:e}).toString()}}));
//# sourceMappingURL=pkg-core-url-and-css.min.js-vflUqEiSS.map