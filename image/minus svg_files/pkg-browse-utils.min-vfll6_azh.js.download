define("metaserver/static/js/photos/thumbnail_url_util",["require","exports","tslib","lodash","metaserver/static/js/modules/constants/python","metaserver/static/js/core/assert","metaserver/static/js/core/uri"],(function(e,t,s,i,r,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fullSizeUrl=t.thumbnailUrlForSize=t.ThumbnailSizeMode=void 0,i=s.__importStar(i),r=s.__importStar(r),t.ThumbnailSizeMode=r.THUMBNAIL_SIZE_MODE;const n=r.THUMBNAIL_SIZES;t.thumbnailUrlForSize=function(e,s,r,l){(0,o.assert)(null!=s==(null!=r),"Width and height must both be specified or neither");const d={};if(null==s)(0,o.assert)(l===t.ThumbnailSizeMode.ORIGINAL||null===l,"You must supply width and height");else{const e=`${s}x${r}`;(0,o.assert)(n.indexOf(e)>-1,`Invalid thumbnail size (${e})`),d.size=e}return null!=l&&((0,o.assert)(i.values(t.ThumbnailSizeMode).indexOf(l)>-1,`Invalid thumbnail size mode (${l})`),d.size_mode=l.toString()),a.URI.parse(e).updateQuery(d).toString()},t.fullSizeUrl=function(e){return a.URI.parse(e).updateQuery({size_mode:t.ThumbnailSizeMode.ORIGINAL.toString(),fv_content:"true"}).toString()}})),define("metaserver/static/js/browse/browse_right_rail/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_BROWSE_BLADE=void 0,t.DEFAULT_BROWSE_BLADE="info"})),define("metaserver/static/js/browse/data/helpers",["require","exports","tslib","lodash","js/filepath/filepath","metaserver/static/js/clean/ui/snackbar","metaserver/static/js/core/i18n","metaserver/static/js/sync_everything/constants"],(function(e,t,s,i,r,o,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBackupFolder=t.getPathForNewMountPoint=t.getMountPointUpdateForCurrentPath=t.showUserNotificationForPathChange=void 0,i=s.__importStar(i),r=s.__importStar(r);t.showUserNotificationForPathChange=(e,t)=>{switch(null!=t.change_type?t.change_type.toLowerCase():null){case"moved":o.Snackbar.complete(a.intl.formatMessage({id:"dte+6z",defaultMessage:"This folder has been moved"}),"browse-notification");break;case"renamed":o.Snackbar.complete(a.intl.formatMessage({id:"y/ubfn",defaultMessage:"This folder has been renamed to “{folder_name}”"},{folder_name:s(t.change_to_fq_path)}),"browse-notification");break;case"deleted":o.Snackbar.fail(a.intl.formatMessage({id:"MK7bBv",defaultMessage:"The folder “{folder_name}” has been deleted"},{folder_name:s(t.old_fq_path)}),"browse-notification")}function s(e){return i.escape(r.filename(e))}};t.getMountPointUpdateForCurrentPath=(e,t,s)=>{const r=e=>t===e;let o,a;return s&&s.find(r)?(a=s.find(r)||null,o=e[s.findKey(r)]||null):(a=null,o=i.find(e,r)||null),[a,o]};t.getPathForNewMountPoint=(e,t,s)=>e&&!t?s:e&&t?r.paths_are_equal(e,t)?null:t:!e&&t?s:null;t.isBackupFolder=e=>{var t;return n.BACKUP_ICONS.includes(null!==(t=null==e?void 0:e.icon)&&void 0!==t?t:"")}})),define("metaserver/static/js/browse/data/selectors",["require","exports","tslib","immutable","reselect","js/filepath/filepath","metaserver/static/js/browse/constants","metaserver/static/js/browse/data/types","metaserver/static/js/browse/models","metaserver/static/js/browse/uri_helper","metaserver/static/js/browse/util","metaserver/static/js/files_view/data/selectors/files_view_selectors","metaserver/static/js/files_view/data/selectors/instance_selectors","metaserver/static/js/files_view/types","metaserver/static/js/growth/ui/personalization/util","metaserver/static/js/redux/namespaces","metaserver/static/js/redux/selectors","metaserver/static/js/core/assert","metaserver/static/js/tagging/data/selectors/index","metaserver/static/js/tagging/experiments","metaserver/static/js/tagging/utils","metaserver/static/js/clean/filetypes","metaserver/static/js/browse/data/helpers","metaserver/static/js/sync_everything/constants","metaserver/static/js/growth/user_action/trackers/personalization_tracker"],(function(e,t,s,i,r,o,a,n,l,d,c,_,E,u,S,T,g,p,I,m,f,O,F,L,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canTraverseFile=t.canTraverse=t.canViewMembersOfFile=t.canViewMembers=t.getFileFromSelectedFilesForSidebar=t.isInSelectMode=t.isGgToCdmMigrationExperimentActive=t.ggToCdmMigrationVariant=t.backupNewLocationHintEnabled=t.getIndexOfFile=t.createMenuOpenRequest=t.selectCurrentFolderInfoWithTags=t.selectedFilesWithTags=t.sortedFilesWithFolderSizesAndTags=t.selectIsTagsColumnEnabled=t.selectIsTaggingEnabled=t.autoTaggingAwarenessVariant=t.flowsAutoTagUiVariant=t.flowsAutomatedFolderUiVariant=t.manualTaggingVariant=t.backupFolderTimestampSelector=t.lastBackupTimesSelector=t.currentFolderBackupInfo=t.backupInfoByFile=t.isInsideBackupFolder=t.isInsideBackupFolderByFile=t.backupFolderPath=t.backupFolderPathByFile=t.isSelectedBackupFolder=t.backups=t.isContinuousOnboardingBackgroundActive=t.showBrowseViewToggleInToolbar=t.showShareViewInToolbar=t.expandedBlade=t.fileHasAutomatedRuleMap=t.isFolderOrganizable=t.isInsideFlowsEligibleFolder=t.flowsFolderRule=t.isRightRailCollapsed=t.showSelectionIndicatorInToolbar=t.selectUploadRenamingBarVariant=t.getCurrentFolderInfo=t.selectionMode=t.selectViewTypeScope=t.isEligibleForActivationCardsBolt=t.isEligibleForActivationCards=t.isEligibleForActivationSmeExperiment=t.getIsProTrialUser=t.getUserHasSharedFileOrFolderInfo=t.shouldLogFullFunnelM3FolderTooltipExposure=t.shouldLogFullFunnelM3VideoTooltipExposure=t.shouldShowJtbdCreateButtonTooltip=t.shouldShowJtbdUploadButtonTooltip=t.getUsersJtbdInterestInfo=t.shouldShowAddSharedFolders=t.addSharedFoldersInfo=t.isEligibleForOnboardingChecklist=t.isEligibleForSuggestedItemsToMove=t.shouldShowTeamSpaceEmptyZone=t.selectFileByFullPath=t.canEditFolderOverview=t.shouldShowSidebarFolderOverview=t.unsortedFilesWithFolderSizes=t.sortedFilesWithFolderSizes=t.urlPrefix=t.selectFilesForSelection=t.allFilesSelected=t.selectedFilesForSidebar=t.selectedFiles=t.sortedFiles=t.fileJumpIndex=t.isCurrentPathRoot=t.arePostTTIModulesLoaded=t.unsortedFiles=t.uploaderPostTTIExperiments=t.browsePostTTIExperiments=t.isSpacesEntryPointEnabled=t.folderMemberCounts=t.isRewindButtonEnabled=t.isFileViewerShown=t.clickFolderHistoryTimestamp=t.clickRewindTimestamp=t.isFolderHistoryVisible=t.isRewindVisible=t.viewer=t.user=t.isCreatingSharedLinkForFile=t.shouldHideFilesAndSidebar=t.autoTeamGroupId=t.hasLinkedDesktop=t.hasLinkedMobile=t.browsePostTTIData=t.boltIgnore=t.sortOrder=t.shouldShowDeletedFiles=t.selection=t.path=t.newFolderCreationState=t.mountPoints=t.isBrowseLoadingFirstPage=t.browseLoadingState=t.isQueryingFolderSizes=t.isFileJumping=t.folderSizes=t.filePathsToSelectOnNextUpdate=t.fileJumpFilter=t.selectPostTTIExperimentsOptional=t.postTTIExperiments=t.selectBrowseExperimentsOptional=t.experiments=t.inlineOverflowMenuOpenRequest=t.overflowMenuCoordinates=t.overflowMenuCloseRequest=t.overflowMenuOpenRequest=t.context=t.clipboard=t.canDisplayFolderSizes=t.getBrowseState=void 0,i=s.__importStar(i),o=s.__importStar(o);t.getBrowseState=e=>(0,g.getStateAtNamespace)(e,T.BROWSE_NAMESPACE_KEY)||n.defaultBrowseState;t.canDisplayFolderSizes=e=>(0,t.getBrowseState)(e).canDisplayFolderSizes;t.clipboard=e=>(0,t.getBrowseState)(e).clipboard;t.context=e=>(0,t.getBrowseState)(e).context;t.overflowMenuOpenRequest=e=>(0,t.getBrowseState)(e).overflowMenuOpenRequest;t.overflowMenuCloseRequest=e=>(0,t.getBrowseState)(e).overflowMenuCloseRequest;t.overflowMenuCoordinates=e=>(0,t.getBrowseState)(e).overflowMenuCoordinates;t.inlineOverflowMenuOpenRequest=e=>(0,t.getBrowseState)(e).inlineOverflowMenuOpenRequest;t.experiments=e=>(0,t.getBrowseState)(e).experiments;t.selectBrowseExperimentsOptional=e=>{var t;return null===(t=e[T.BROWSE_NAMESPACE_KEY])||void 0===t?void 0:t.experiments};t.postTTIExperiments=e=>(0,t.getBrowseState)(e).browsePostTTIExperiments;t.selectPostTTIExperimentsOptional=e=>{var t;return null===(t=e[T.BROWSE_NAMESPACE_KEY])||void 0===t?void 0:t.browsePostTTIExperiments};t.fileJumpFilter=e=>(0,t.getBrowseState)(e).fileJumpFilter;t.filePathsToSelectOnNextUpdate=e=>(0,t.getBrowseState)(e).filePathsToSelectOnNextUpdate;t.folderSizes=e=>(0,t.getBrowseState)(e).folderSizes;t.isFileJumping=e=>(0,t.getBrowseState)(e).fileJumpFilter.length>0;t.isQueryingFolderSizes=e=>(0,t.getBrowseState)(e).isQueryingFolderSizes;t.browseLoadingState=e=>(0,t.getBrowseState)(e).loadingState,t.isBrowseLoadingFirstPage=(0,r.createSelector)(t.browseLoadingState,e=>e===u.LoadingState.LOADING_FIRST_PAGE);t.mountPoints=e=>(0,t.getBrowseState)(e).mountPoints;t.newFolderCreationState=e=>(0,t.getBrowseState)(e).newFolderCreationState;t.path=e=>(0,t.getBrowseState)(e).path;t.selection=e=>(0,t.getBrowseState)(e).selection;t.shouldShowDeletedFiles=e=>(0,t.getBrowseState)(e).shouldShowDeletedFiles;t.sortOrder=e=>{const t=(0,E.selectScopedSort)(e,{instanceId:a.BROWSE_FILES_VIEW_ID});return t||a.BROWSE_DEFAULT_SORT_ORDER};t.boltIgnore=e=>(0,t.getBrowseState)(e).boltIgnore;t.browsePostTTIData=e=>(0,t.getBrowseState)(e).browsePostTTIData;t.hasLinkedMobile=e=>(0,t.getBrowseState)(e).hasLinkedMobile;t.hasLinkedDesktop=e=>(0,t.getBrowseState)(e).hasLinkedDesktop;t.autoTeamGroupId=e=>(0,t.getBrowseState)(e).autoTeamGroupId;t.shouldHideFilesAndSidebar=e=>(0,t.getBrowseState)(e).shouldHideFilesAndSidebar;t.isCreatingSharedLinkForFile=(e,s)=>Boolean((0,t.getBrowseState)(e).isCreatingSharedLinkMap.get(s));t.user=e=>{const s=(0,t.getBrowseState)(e).user;return(0,p.assert)(null!=s,"Browse store `user` accessed before APP_INIT action"),s};t.viewer=e=>{const s=(0,t.getBrowseState)(e).viewer;return(0,p.assert)(null!=s,"Browse store `viewer` accessed before APP_INIT action"),s};t.isRewindVisible=e=>(0,t.getBrowseState)(e).isRewindVisible;t.isFolderHistoryVisible=e=>(0,t.getBrowseState)(e).isFolderHistoryVisible;t.clickRewindTimestamp=e=>(0,t.getBrowseState)(e).clickRewindTimestamp;t.clickFolderHistoryTimestamp=e=>(0,t.getBrowseState)(e).clickFolderHistoryTimestamp;t.isFileViewerShown=e=>(0,t.getBrowseState)(e).isFileViewerShown;t.isRewindButtonEnabled=e=>(0,t.getBrowseState)(e).isRewindButtonEnabled;t.folderMemberCounts=e=>(0,t.getBrowseState)(e).folderMemberCounts;t.isSpacesEntryPointEnabled=e=>(0,t.getBrowseState)(e).isSpacesEntryPointEnabled;t.browsePostTTIExperiments=e=>(0,t.getBrowseState)(e).browsePostTTIExperiments||{},t.uploaderPostTTIExperiments=(0,r.createSelector)(t.browsePostTTIData,e=>Object.assign({},e.uploaderPostTTIExperiments));t.unsortedFiles=e=>(0,t.getBrowseState)(e).unsortedFiles;t.arePostTTIModulesLoaded=e=>(0,t.getBrowseState)(e).arePostTTIModulesLoaded;t.isCurrentPathRoot=e=>o.paths_are_equal((0,t.path)(e),"/"),t.fileJumpIndex=(0,r.createSelector)(t.unsortedFiles,e=>e.keySeq().toArray().map(e=>({filename:o.filename(e).toLowerCase(),fqPath:e})).sort((e,t)=>e.filename<t.filename?-1:e.filename>t.filename?1:0)),t.sortedFiles=(0,r.createSelector)(t.unsortedFiles,t.sortOrder,t.folderSizes,t.context,t.experiments,(e,t,s,i,r)=>(0,c.sortFiles)(e.toList(),t,s)),t.selectedFiles=(0,r.createSelector)(t.unsortedFiles,t.selection,(e,t)=>A(e,t)),t.selectedFilesForSidebar=(0,r.createSelector)(t.selectedFiles,_.previewThumbnails,(e,t)=>e.count()>0?e.withMutations(e=>{e.forEach((s,i)=>{var r;if(!s.thumbnail_url_tmpl&&(null===(r=t[s.file_id])||void 0===r?void 0:r.preview_url)){const r=t[s.file_id].preview_url;e.set(i,new l.File(Object.assign(Object.assign({},s),{thumbnail_url_tmpl:r})))}})}):e),t.allFilesSelected=(0,r.createSelector)(t.selectedFiles,t.unsortedFiles,(e,t)=>e.size===t.size);t.selectFilesForSelection=(e,s)=>A((0,t.unsortedFiles)(e),s.selection);const A=(e,t)=>t.selected.isEmpty()||e.isEmpty()?i.OrderedMap():i.OrderedMap(t.selected.map(t=>{const s=e.find(e=>e.fq_path===t);return s?[s.fq_path,s]:void 0}));t.urlPrefix=(0,r.createSelector)(t.user,t.viewer,(e,t)=>(0,d.browse_root)(t,e)),t.sortedFilesWithFolderSizes=(0,r.createSelector)(t.sortedFiles,t.folderSizes,(e,t)=>e.map(e=>{const s=t.get(e.fq_path);return s?e.updateSize(s.size,s.state):e})),t.unsortedFilesWithFolderSizes=(0,r.createSelector)(t.unsortedFiles,t.folderSizes,(e,t)=>e.withMutations(s=>{t.forEach((t,i)=>{const r=e.get(i);if(r&&t){const e=r.updateSize(t.size,t.state);s.set(i,e)}})})),t.shouldShowSidebarFolderOverview=(0,r.createSelector)(t.selectedFiles,e=>e&&1===e.size&&e.first().is_dir&&!l.File.isNoAccessSharedFolder(e.first())),t.canEditFolderOverview=(0,r.createSelector)(t.user,t.context,(e,t)=>e.is_cdm_member&&e.is_team_admin&&t.isCurrentlyInRoot||!!t.isCurrentPathWriteable());t.selectFileByFullPath=(e,s)=>(0,t.sortedFilesWithFolderSizes)(e).find(e=>e.fq_path===s.path),t.shouldShowTeamSpaceEmptyZone=(0,r.createSelector)(t.context,t.experiments,t.browsePostTTIData,t.browsePostTTIExperiments,t.browseLoadingState,(e,t,s,i,r)=>!(s.mobileWebInvites||!i.expPersonalizedFirstPaths&&!s.firstTaskProps.is_eligible_team||!e.isInsideMyTeamFolderTree||!e.isCurrentlyInRoot||!e.isCurrentPathWriteable()||r===u.LoadingState.LOADING_FIRST_PAGE)),t.isEligibleForSuggestedItemsToMove=(0,r.createSelector)(t.context,t.experiments,t.browsePostTTIData,t.browseLoadingState,t.user,(e,t,s,i,r)=>{var o;const a=null===(o=s.suggestedItemsToMoveInfo)||void 0===o?void 0:o.is_dismissed;return Boolean(r.is_team&&!a&&!s.mobileWebInvites&&e.isInsideMyTeamFolderTree&&e.isCurrentPathWriteable()&&e.isCurrentlyInRoot&&i!==u.LoadingState.LOADING_FIRST_PAGE)}),t.isEligibleForOnboardingChecklist=(0,r.createSelector)(t.context,t.experiments,t.browsePostTTIData,t.browseLoadingState,(e,t,s,i)=>Boolean(!s.mobileWebInvites&&e.isCurrentlyInRoot&&e.isInsideMyTeamFolderTree&&i===u.LoadingState.LOADED)),t.addSharedFoldersInfo=(0,r.createSelector)(t.browsePostTTIData,e=>e.addSharedFoldersInfo),t.shouldShowAddSharedFolders=(0,r.createSelector)(t.browseLoadingState,t.sortedFilesWithFolderSizes,t.user,t.addSharedFoldersInfo,t.context,(e,t,s,i,r)=>!!(r.isCurrentPathWriteable()&&e===u.LoadingState.LOADED&&!s.is_team&&t.size>=1&&"OFF"!==(null==i?void 0:i.asf_variant))),t.getUsersJtbdInterestInfo=(0,r.createSelector)(t.browsePostTTIData,e=>e.usersJtbdInterestInfo),t.shouldShowJtbdUploadButtonTooltip=(0,r.createSelector)(t.getUsersJtbdInterestInfo,e=>{const t=null==e?void 0:e.experiments,s=(null==e?void 0:e.onboarding_data_source)||S.OnboardingDataSource.QUERY_PARAM;return"V1"===(null==t?void 0:t.full_funnel_activation_m3_variant)&&s===S.OnboardingDataSource.ONBOARDING_SURVEY&&(0,S.hasApplicableJtbdForUploadButtonTooltip)(e)&&!(0,S.hasPerformedJtbdPersonalizationAction)(b.PersonalizationActions.DISMISS_JTBD_UPLOAD_BUTTON_TOOLTIP,e)}),t.shouldShowJtbdCreateButtonTooltip=(0,r.createSelector)(t.getUsersJtbdInterestInfo,e=>{const t=null==e?void 0:e.experiments,s=(null==e?void 0:e.onboarding_data_source)||S.OnboardingDataSource.QUERY_PARAM;return"V1"===(null==t?void 0:t.full_funnel_activation_m3_variant)&&s===S.OnboardingDataSource.ONBOARDING_SURVEY&&(0,S.hasApplicableJtbdForCreateButtonTooltip)(e)&&!(0,S.hasPerformedJtbdPersonalizationAction)(b.PersonalizationActions.DISMISS_JTBD_CREATE_BUTTON_TOOLTIP,e)}),t.shouldLogFullFunnelM3VideoTooltipExposure=(0,r.createSelector)(t.getUsersJtbdInterestInfo,e=>{var t;return"V1"===((null===(t=null==e?void 0:e.experiments)||void 0===t?void 0:t.full_funnel_activation_m3_variant)||"OFF")&&(null==e?void 0:e.onboarding_data_source)===S.OnboardingDataSource.ONBOARDING_SURVEY&&(0,S.hasApplicableJtbdForUploadButtonTooltip)(e)&&!(0,S.hasPerformedJtbdPersonalizationAction)(b.PersonalizationActions.DISMISS_JTBD_UPLOAD_BUTTON_TOOLTIP,e)}),t.shouldLogFullFunnelM3FolderTooltipExposure=(0,r.createSelector)(t.getUsersJtbdInterestInfo,e=>{var t;return"V1"===((null===(t=null==e?void 0:e.experiments)||void 0===t?void 0:t.full_funnel_activation_m3_variant)||"OFF")&&(null==e?void 0:e.onboarding_data_source)===S.OnboardingDataSource.ONBOARDING_SURVEY&&(0,S.hasApplicableJtbdForCreateButtonTooltip)(e)&&!(0,S.hasPerformedJtbdPersonalizationAction)(b.PersonalizationActions.DISMISS_JTBD_CREATE_BUTTON_TOOLTIP,e)}),t.getUserHasSharedFileOrFolderInfo=(0,r.createSelector)(t.browsePostTTIData,e=>e.userHasSharedFileOrFolderInfo),t.getIsProTrialUser=(0,r.createSelector)(t.browsePostTTIData,e=>e.isProTrialUser),t.isEligibleForActivationSmeExperiment=(0,r.createSelector)(t.context,t.browseLoadingState,t.getIsProTrialUser,(e,t,s)=>Boolean(e.isCurrentlyInRoot&&t===u.LoadingState.LOADED&&s)),t.isEligibleForActivationCards=(0,r.createSelector)(t.isEligibleForActivationSmeExperiment,t.getUserHasSharedFileOrFolderInfo,(e,t)=>Boolean(e&&(null==t?void 0:t.has_shared_file_or_folder))),t.isEligibleForActivationCardsBolt=(0,r.createSelector)(t.isEligibleForActivationSmeExperiment,t.getUserHasSharedFileOrFolderInfo,(e,t)=>Boolean(e&&!1===(null==t?void 0:t.has_shared_file_or_folder)));t.selectViewTypeScope=e=>(0,t.getBrowseState)(e).viewScope||void 0,t.selectionMode=(0,r.createSelector)(t.selectedFiles,e=>e.count()>0?"selected":"unselected");t.getCurrentFolderInfo=e=>(0,t.getBrowseState)(e).currentFolderInfo,t.selectUploadRenamingBarVariant=(0,r.createSelector)(t.selectPostTTIExperimentsOptional,e=>null==e?void 0:e.expNamingConventionsUploadRenamingBar);t.showSelectionIndicatorInToolbar=e=>(0,t.getBrowseState)(e).context.isInsideFamilySharedFolder;t.isRightRailCollapsed=e=>(0,t.getBrowseState)(e).isRightRailCollapsed||!1;t.flowsFolderRule=(e,s)=>(0,t.getBrowseState)(e).fileHasAutomatedRuleMap.get(s);t.isInsideFlowsEligibleFolder=e=>{const s=(0,t.getCurrentFolderInfo)(e),i=(0,t.getBrowseState)(e).context;return s&&i.isInFolderMode&&!i.isCurrentlyInRoot&&!i.isInsideTeamFolderRoot&&!i.isInsideVaultFolder&&s.type!==O.FileTypes.TEAM_MEMBER_FOLDER&&!l.File.isReadOnlySharedFolder(s)};t.isFolderOrganizable=e=>{const s=(0,t.unsortedFiles)(e),i=0===s.count(),r=s.every(e=>e.is_dir);return(0,t.getBrowseState)(e).context.isCurrentPathWriteable()&&!i&&!r&&!!(0,t.getCurrentFolderInfo)(e)};t.fileHasAutomatedRuleMap=e=>(0,t.getBrowseState)(e).fileHasAutomatedRuleMap;t.expandedBlade=e=>(0,t.getBrowseState)(e).expandedBlade;t.showShareViewInToolbar=(e,s)=>{const i=!s.isResponsive||s.isMatchedLarge,r=!i&&s.isMatchedMedium,o=(0,t.getBrowseState)(e).context.isInsideFamilySharedFolder;return((0,t.isRightRailCollapsed)(e)&&i||r)&&!o};t.showBrowseViewToggleInToolbar=e=>(0,t.getBrowseState)(e).context.isInsideFamilySharedFolder,t.isContinuousOnboardingBackgroundActive=(0,r.createSelector)(t.context,t.experiments,t.unsortedFiles,t.selectedFiles,(e,t,s,i)=>{const r=i.size>0,o="V1"===t.coreO21nInFolderActivationM2&&!e.isCurrentlyInRoot&&s.size<=0;return r||o});t.backups=e=>(0,t.getBrowseState)(e).backups,t.isSelectedBackupFolder=(0,r.createSelector)(t.selectedFiles,t.browsePostTTIExperiments,(e,t)=>!!t.expEnableBackupWeb&&(0,F.isBackupFolder)(e.first())),t.backupFolderPathByFile=(0,r.createSelector)(t.backups,e=>t=>{var s;const i=null!==(s=t.fq_path)&&void 0!==s?s:"",r=i.split("/").filter(Boolean);if(r.length>=2&&r[1]===`${r[0]}${L.EDB_EXTENSION}`)return`/${r[0]}/${r[1]}`;const a=r.findIndex(e=>e.endsWith(L.EDB_EXTENSION));if(-1!==a)return["",...r.slice(0,a+1)].join("/");if(null===e)return null;const n=[i,...o.parent_dirs(i)],l=e.map(e=>(0,L.rootRelativePath)(e.browsePath)).filter(e=>n.includes(e));return 0===l.length?null:l[0]}),t.backupFolderPath=(0,r.createSelector)(t.backupFolderPathByFile,t.path,(e,t)=>e({fq_path:t})),t.isInsideBackupFolderByFile=(0,r.createSelector)(t.browsePostTTIExperiments,t.backupFolderPathByFile,(e,t)=>s=>!!e.expEnableBackupWeb&&(!!(0,F.isBackupFolder)(s)||null!==t(s))),t.isInsideBackupFolder=(0,r.createSelector)(t.getCurrentFolderInfo,t.isInsideBackupFolderByFile,(e,t)=>!!(0,L.isBackupBrowse)()||!!e&&t(e)),t.backupInfoByFile=(0,r.createSelector)(t.browsePostTTIExperiments,t.backups,(e,t)=>s=>{if(!e.expEnableBackupWeb||!t)return null;const i=[s.fq_path,...o.parent_dirs(s.fq_path)],r=t.find(e=>i.includes((0,L.rootRelativePath)(e.browsePath)));return r?Object.assign({id:r.id,name:r.name,nestLevel:i.indexOf((0,L.rootRelativePath)(r.browsePath)),rootNsId:r.rootNsId,deviceId:r.deviceId,anchorFolders:r.anchorFolders},"cb"===r.type?{type:"cb",usesAnchors:!!r.usesAnchors,thirdPartyProviders:r.thirdPartyProviders}:"edb"===r.type?{type:"edb",isFission:!!r.rootNsId}:{type:"third_party"}):null}),t.currentFolderBackupInfo=(0,r.createSelector)(t.backupInfoByFile,t.path,(e,t)=>e({fq_path:t}));t.lastBackupTimesSelector=e=>(0,t.getBrowseState)(e).lastBackupTimes;t.backupFolderTimestampSelector=(e,s)=>(0,t.lastBackupTimesSelector)(e).get(s),t.manualTaggingVariant=(0,r.createSelector)(t.selectBrowseExperimentsOptional,e=>{var t;return null!==(t=null==e?void 0:e.manualTagging)&&void 0!==t?t:"OFF"}),t.flowsAutomatedFolderUiVariant=(0,r.createSelector)(t.selectBrowseExperimentsOptional,e=>{var t;return null!==(t=null==e?void 0:e.flowsAutomatedFolderUi)&&void 0!==t&&t}),t.flowsAutoTagUiVariant=(0,r.createSelector)(t.selectBrowseExperimentsOptional,e=>{var t;return null!==(t=null==e?void 0:e.flowsAutoTagUi)&&void 0!==t&&t}),t.autoTaggingAwarenessVariant=(0,r.createSelector)(t.selectBrowseExperimentsOptional,e=>{var t;return null!==(t=null==e?void 0:e.autoTaggingAwarenessVariant)&&void 0!==t?t:"OFF"}),t.selectIsTaggingEnabled=(0,r.createSelector)(t.manualTaggingVariant,m.isTaggingEnabled),t.selectIsTagsColumnEnabled=(0,r.createSelector)(t.manualTaggingVariant,m.isTagsColumnOnBrowseEnabled);const R=(e,t)=>{const s=t[(0,f.getFileMapKey)(e)];let i=e;return void 0!==s&&(i=new l.File(Object.assign(Object.assign({},e),{tags:s.map(e=>({value:e,highlighted:!1}))}))),i};t.sortedFilesWithFolderSizesAndTags=(0,r.createSelector)(t.sortedFilesWithFolderSizes,I.selectTagsByFile,(e,t)=>e.map(e=>R(e,t)));const h=(0,r.createSelector)(t.unsortedFiles,I.selectTagsByFile,(e,t)=>e.withMutations(e=>{e.forEach((s,i)=>{e.set(i,R(s,t))})}));t.selectedFilesWithTags=(0,r.createSelector)(h,t.selection,(e,t)=>A(e,t)),t.selectCurrentFolderInfoWithTags=(0,r.createSelector)(t.getCurrentFolderInfo,I.selectTagsByFile,(e,t)=>{if(void 0!==e)return R(e,t)});t.createMenuOpenRequest=e=>(0,t.getBrowseState)(e).createMenuOpenRequest;t.getIndexOfFile=(e,s)=>(0,t.sortedFiles)(s).findIndex(t=>t.sjid===e.sjid&&t.ns_id===e.ns_id),t.backupNewLocationHintEnabled=(0,r.createSelector)(t.selectPostTTIExperimentsOptional,e=>"ON"===(null==e?void 0:e.expBackupNewLocationHint)),t.ggToCdmMigrationVariant=(0,r.createSelector)(t.selectPostTTIExperimentsOptional,e=>{var t;return null!==(t=null==e?void 0:e.expGgToCdmMigrationVariant)&&void 0!==t?t:"OFF"}),t.isGgToCdmMigrationExperimentActive=(0,r.createSelector)(t.ggToCdmMigrationVariant,e=>["CONTROL","V1"].includes(e)),t.isInSelectMode=(0,r.createSelector)(t.selectedFilesForSidebar,e=>!0==!!(null==e?void 0:e.size)),t.getFileFromSelectedFilesForSidebar=(0,r.createSelector)(t.selectedFilesForSidebar,t.isInSelectMode,(e,t)=>t?e.first():void 0);const v=(e,t)=>t?l.File.canViewFileMembers(t,e):e.canViewContainingNSMembers;t.canViewMembers=(0,r.createSelector)(t.context,t.getFileFromSelectedFilesForSidebar,(e,t)=>v(e,t));t.canViewMembersOfFile=(e,s)=>{const i=(0,t.context)(e);return v(i,s)};const M=(e,t)=>{var s;return!e&&t?null===(s=t._mount_access_perms)||void 0===s?void 0:s.includes("can_view"):e};t.canTraverse=(0,r.createSelector)(t.canViewMembers,t.getFileFromSelectedFilesForSidebar,(e,t)=>M(e,t));t.canTraverseFile=(e,s)=>{const i=(0,t.canViewMembersOfFile)(e,s);return M(i,s)}})),define("metaserver/static/js/browse/data/types",["require","exports","tslib","immutable","typescript/dropbox/proto/js_init_data/browse_web/browse_web_pb","metaserver/static/js/browse/models","metaserver/static/js/files_view/types","metaserver/static/js/clean/ui/selection","metaserver/static/js/browse/browse_right_rail/types","metaserver/static/js/flows/types"],(function(e,t,s,i,r,o,a,n,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultBrowseState=t.ActionTypes=void 0,i=s.__importStar(i),r=s.__importStar(r),(function(e){e.APP_INIT="BROWSE/APP_INIT",e.PUSH_BOLT_IGNORE="BROWSE/PUSH_BOLT_IGNORE",e.POP_BOLT_IGNORE="BROWSE/POP_BOLT_IGNORE",e.SELECT_FILES_BY_FQ_PATH="BROWSE/SELECT_FILES_BY_FQ_PATH",e.SHOW_TIMELINE="BROWSE/SHOW_TIMELINE",e.HIDE_TIMELINE="BROWSE/HIDE_TIMELINE",e.SHOW_FOLDER_HISTORY_PANEL="BROWSE/SHOW_FOLDER_HISTORY_PANEL",e.HIDE_FOLDER_HISTORY_PANEL="BROWSE/HIDE_FOLDER_HISTORY_PANEL",e.SET_IS_REWIND_ENABLED="BROWSE/SET_IS_REWIND_ENABLED",e.SET_BROWSE_POST_TTI_EXPERIMENTS="BROWSE/SET_BROWSE_POST_TTI_EXPERIMENTS",e.SET_BROWSE_POST_TTI_DATA="BROWSE/SET_BROWSE_POST_TTI_DATA",e.SET_CAN_DISPLAY_FOLDER_SIZES="BROWSE/SET_CAN_DISPLAY_FOLDER_SIZES",e.SET_CLIPBOARD_FILES="BROWSE/SET_CLIPBOARD_FILES",e.SET_CONTEXT="BROWSE/SET_CONTEXT",e.SET_CURRENT_FOLDER_INFO="BROWSE/SET_CURRENT_FOLDER_INFO",e.SET_FILE_HAS_AUTOMATED_RULE_MAP="BROWSE/SET_FILE_HAS_AUTOMATED_RULE_MAP",e.SET_FILE_JUMP_FILTER="BROWSE/SET_FILE_JUMP_FILTER",e.SET_FILE_PATHS_TO_SELECT_ON_NEXT_UPDATE="BROWSE/SET_FILE_PATHS_TO_SELECT_ON_NEXT_UPDATE",e.SET_FILE_RENAME="BROWSE/SET_FILE_RENAME",e.SET_FOLDER_SIZES="BROWSE/SET_FOLDER_SIZES",e.SET_LOADING_STATE="BROWSE/SET_LOADING_STATE",e.SET_MOUNT_POINTS="BROWSE/SET_MOUNT_POINTS",e.SET_NEW_FOLDER_CREATION_STATE="BROWSE/SET_NEW_FOLDER_CREATION_STATE",e.SET_PAGINATED_TOTAL_NUM_FILES="BROWSE/SET_PAGINATED_TOTAL_NUM_FILES",e.SET_PATH="BROWSE/SET_PATH",e.SET_SELECTION="BROWSE/SET_SELECTION",e.SET_SHOULD_SHOW_DELETED_FILES="BROWSE/SET_SHOULD_SHOW_DELETED_FILES",e.SET_SORT_ORDER="BROWSE/SET_SORT_ORDER",e.SET_UNSORTED_FILES="BROWSE/SET_UNSORTED_FILES",e.SET_IS_FILE_VIEWER_SHOWN="BROWSE/IS_FILE_VIEWER_SHOWN",e.SET_IS_SEARCH_MODE="BROWSE/SET_IS_SEARCH_MODE",e.REQUEST_FOLDER_SIZES="BROWSE/REQUEST_FOLDER_SIZES",e.SET_FOLDER_SIZES_PENDING="BROWSE/SET_FOLDER_SIZES_PENDING",e.COMPLETE_FOLDER_SIZES="BROWSE/COMPLETE_FOLDER_SIZES",e.SET_ARE_POST_TTI_MODULES_LOADED="BROWSE/SET_ARE_POST_TTI_MODULES_LOADED",e.SET_VIEW_SCOPE="BROWSE/SET_VIEW_SCOPE",e.SET_HIDE_FILES_AND_SIDEBAR="BROWSE/SET_HIDE_FILES_AND_SIDEBAR",e.SET_IS_CREATING_SHARED_LINK="BROWSE/SET_IS_CREATING_SHARED_LINK",e.SET_RIGHTRAIL_IS_COLLAPSED="BROWSE/SET_RIGHTRAIL_COLLAPSED",e.SET_EXPANDED_BLADE="BROWSE/SET_EXPANDED_BLADE",e.SET_HAS_USER_UPLOADED_FILES="BROWSE/SET_HAS_USER_UPLOADED_FILES",e.SET_OVERFLOW_MENU_OPEN_REQUEST="BROWSE/SET_OVERFLOW_MENU_OPEN_REQUEST",e.SET_INLINE_OVERFLOW_MENU_OPEN_REQUEST="BROWSE/SET_INLINE_OVERFLOW_MENU_OPEN_REQUEST",e.SET_OVERFLOW_MENU_COORDINATES="BROWSE/SET_OVERFLOW_MENU_COORDINATES",e.SET_OVERFLOW_MENU_CLOSE_REQUEST="BROWSE/SET_OVERFLOW_MENU_CLOSE_REQUEST",e.SET_FOLDER_MEMBER_COUNTS="BROWSE/SET_FOLDER_MEMBER_COUNTS",e.TOGGLE_SPACES_ENTRY_POINT="BROWSE/TOGGLE_SPACES_ENTRY_POINT",e.SET_CREATE_MENU_OPEN_REQUEST="BROWSE/SET_CREATE_MENU_OPEN_REQUEST",e.SET_BROWSE_TTS_START_TIME="BROWSE/SET_BROWSE_TTS_START_TIME",e.HANDLE_APP_CLEANUP="BROWSE/HANDLE_APP_CLEANUP",e.SET_BACKUPS="BROWSE/SET_BACKUPS",e.SET_FULL_FUNNEL_M2_OVERRIDES="BROWSE/SET_FULL_FUNNEL_M2_OVERRIDES",e.SET_LAST_BACKUP_TIMES="BROWSE/UPDATE_LAST_BACKUP_TIMES"})(t.ActionTypes||(t.ActionTypes={})),t.defaultBrowseState={boltIgnore:{added:new Set,moved:new Set,removed:new Set},canDisplayFolderSizes:!1,clipboard:{files:[]},context:new o.BrowseContext,isRewindButtonEnabled:!1,experiments:new r.BrowseExperiments,browsePostTTIExperiments:{},fileJumpFilter:"",filePathsToSelectOnNextUpdate:i.Set(),folderSizes:i.Map(),isRewindVisible:!1,isFolderHistoryVisible:!1,clickRewindTimestamp:void 0,clickFolderHistoryTimestamp:void 0,loadingState:a.LoadingState.LOADING_FIRST_PAGE,mountPoints:null,newFolderCreationState:a.NewFolderCreationState.CREATE_FOLDER_INACTIVE,paginatedTotalNumFiles:0,path:"",selection:(0,n.createSelection)(),shouldShowDeletedFiles:!1,user:null,unsortedFiles:i.Map(),viewer:null,currentFolderSizesQuery:i.Set(),isQueryingFolderSizes:!1,isSearchMode:!1,hasLinkedMobile:!1,hasLinkedDesktop:!1,autoTeamGroupId:"",browsePostTTIData:{isOverFreeQuota:!1,hasExcludedNsIds:!1,uploaderPostTTIExperiments:{},preferredEditors:{},mobileWebInvites:!1,firstTaskProps:{is_eligible_team:!1,is_subtitle:!1,member_info:{tiered_admin:!1,users:[],evh_max_days:0,team_available_roles:[]},needs_pairing_token:!1,seen_desktop_tooltip:!1},familyMemberCount:0},arePostTTIModulesLoaded:!1,shouldHideFilesAndSidebar:!1,isCreatingSharedLinkMap:i.Map(),isRightRailCollapsed:!1,fileHasAutomatedRuleMap:(0,d.FlowsMap)({}),expandedBlade:l.DEFAULT_BROWSE_BLADE,folderMemberCounts:0,isSpacesEntryPointEnabled:!0,backups:null,lastBackupTimes:i.Map()}})),define("metaserver/static/js/browse/sort_helpers",["require","exports"],(function(e,t){"use strict";function s(e,t,s){const i="=ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(let r=0;r<Math.max(e.length,t.length);r++){const o=e.charAt(r),a=t.charAt(r);if(!o)return-s;if(!a)return s;const n=i.indexOf(o),l=i.indexOf(a);if(n<l)return-s;if(l<n)return s}return 0}Object.defineProperty(t,"__esModule",{value:!0}),t.compare=void 0,t.compare=function(e,t,i,r){if(Array.isArray(e)&&Array.isArray(t)){for(let r=0;r<Math.max(e.length,t.length);r++){const o=e[r],a=t[r];if(null==o)return-i;if(null==a)return i;if("number"==typeof o&&"string"==typeof a)return-i;if("number"==typeof a&&"string"==typeof o)return i;if("string"==typeof o&&"string"==typeof a){const e=s(o,a,i);if(0!==e)return e}else{if(o<a)return-i;if(a<o)return i}}return 0}return e===t?0:r&&"string"==typeof e&&"string"==typeof t?r(e,t)<0?-i:i:e<t?-i:i}})),define("metaserver/static/js/browse/util",["require","exports","metaserver/static/js/browse/action_logger","metaserver/static/js/browse/logger_util","metaserver/static/js/browse/models","metaserver/static/js/browse/sort_helpers","metaserver/static/js/clean/web_user_action_events","metaserver/static/js/files_view/sort_types","metaserver/static/js/core/exception","metaserver/static/js/core/i18n"],(function(e,t,s,i,r,o,a,n,l,d){"use strict";function c(e,t){return{isFolder:e.is_dir,value:t,isAlwaysFirst:_(e)}}function _(e){return r.File.isTeamMemberFolder(e)||r.File.isFamilySharedFolder(e)}function E(e,t){return e&&t?0:e?-1:t?1:0}Object.defineProperty(t,"__esModule",{value:!0}),t.logPDFEditImpression=t.sortFiles=t.getSelectedFilesText=void 0,t.getSelectedFilesText=function(e,t){const s=e.count(),i=d.intl.formatMessage({id:"v+fiz1",defaultMessage:"You only have partial access"});return s>0?1!==s||r.File.canViewFileMembers(e.first(),t)?d.intl.formatMessage({id:"cruh0p",defaultMessage:"{count, plural, one{{count} item selected} other{{count} items selected}}"},{count:s}):r.File.isNoAccessSharedFolder(e.first())?d.intl.formatMessage({id:"5Uq4ka",defaultMessage:"You don’t have access to this folder"}):i:t&&!t.canViewContainingNSMembers?i:""},t.sortFiles=function(e,{sortField:t,sortDirection:s},i){const a=(function(e,t){switch(e){case n.SortField.FILENAME:case n.SortField.SHARED_WITH:return e=>c(e,r.File.getFilename(e));case n.SortField.MODIFIED:return e=>c(e,e.ts);case n.SortField.CATEGORY:return e=>c(e,r.File.getCategoryDescription(e));case n.SortField.EXTENSION:return e=>c(e,r.File.getExtension(e));case n.SortField.SIZE:return e=>c(e,e.is_dir&&(null==t?void 0:t.has(e.fq_path))?t.get(e.fq_path).size:e.bytes);default:return}})(t,i),_=(function(e,t){const s=(0,d.case_insensitive_comparator)(!0),i=t===n.SortDirection.ASCENDING?1:-1;switch(e){case n.SortField.FILENAME:case n.SortField.SHARED_WITH:case n.SortField.SIZE:return(function(e,t){return function({isFolder:s,value:i,isAlwaysFirst:r},{isFolder:a,value:n,isAlwaysFirst:l}){const d=E(r,l);return 0!==d?d:(i||(i=1/0*e),n||(n=1/0*e),s&&a?(0,o.compare)(i,n,e,t):s?-e:a?e:(0,o.compare)(i,n,e,t))}})(i,s);case n.SortField.MODIFIED:case n.SortField.CATEGORY:case n.SortField.EXTENSION:return(function(e,t){return function({isFolder:s,value:i,isAlwaysFirst:r},{isFolder:a,value:n,isAlwaysFirst:l}){const d=E(r,l);return 0!==d?d:s&&a?(0,o.compare)(i,n,e,t):s?1:a?-1:""===i?1:""===n?-1:(0,o.compare)(i,n,e,t)}})(i,s);default:return}})(t,s);return a&&_?e.sortBy(a,_):((0,l.reportException)({err:new Error("sortFiles was called with an unsupported sort field"),tags:["browse_sort_invalid_field"],severity:l.SEVERITY.CRITICAL,exc_extra:{sort_field:t}}),e)};t.logPDFEditImpression=(e,t,r)=>{const{num_files_selected:o,num_folders_selected:n}=(0,i.countFilesAndFolders)(t),l=t.first();(0,s.logBrowseAction)({uid:e,action:a.WebUserActionLogEvent.SHOWN_EDIT_MODE,num_files_selected:o,num_folders_selected:n,action_surface:r,extra:{file_ext:l.ext}})}})),define("metaserver/static/js/files_view/constants",["require","exports","tslib","react","metaserver/static/js/files_view/types","metaserver/static/js/files_view/sort_types","metaserver/static/js/files_view/view_type","metaserver/static/js/core/i18n"],(function(e,t,s,i,r,o,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultViewTypes=t.DOC_THUMBNAIL_EXTENSIONS=t.IMAGE_THUMBNAIL_EXTENSIONS=t.VIEW_TYPE_SCOPE_IMAGE_SEARCH=t.VIEW_TYPE_SCOPE_TEXT_SEARCH=t.VIEW_TYPE_GLOBAL_SCOPE=t.VIEW_TYPE_COOKIE_NAME=t.OverflowMenuConstants=t.CulledListConstants=t.ViewTypeGridSizes=t.ViewTypeThumbnailSizes=t.AllSortDirections=t.AllLoadingStates=t.SortIsFilename=t.AllSortFields=t.AllDropTargetHighlightModes=t.AllViewTypes=t.AllRenameStates=t.AllNewFolderCreationStates=t.FilesViewTileGridConstants=t.SEARCH_LIST_VIEW_COLUMNS_DELETED=t.SEARCH_GRID_VIEW_SORT_ENABLED_COLUMNS=t.SEARCH_LIST_VIEW_TOP_RIGHT_SORT_COLUMNS=t.SEARCH_LIST_VIEW_SORT_ENABLED_COLUMNS=t.SEARCH_LIST_VIEW_COLUMNS=t.GRID_VIEW_COLUMNS=t.LIST_VIEW_COLUMNS=t.ClientPortalClientAccessLabel=t.SharedWithLabel=t.GRID_VIEW_COLUMN_FLEX_RIGHT_RAIL=t.GRID_VIEW_COLUMN_FLEX=t.COLUMN_MAX_WIDTHS=t.COLUMN_MIN_WIDTHS=t.COLUMN_DEFAULT_WIDTHS=t.LIST_VIEW_SEARCH_MODE_COLUMN_FLEX=t.FILE_NAME_CELL_SEARCH_FLEX_BASIS=t.LIST_VIEW_COLUMN_FLEX=t.FILE_NAME_TOOLTIP_MAX_LINE_LENGTH=t.CHECKBOX_CELL_FLEX_RIGHT_RAIL=t.CHECKBOX_CELL_FLEX=t.COMPACT_COLUMN_HEADER_HEIGHT=t.DEFAULT_ROW_HEIGHT_WITH_SNIPPETS=t.MEDIA_INFO_ITEM_HEIGHT=t.TAGS_HEIGHT=t.LISTVIEW_LARGE_ICON_SIZE_PX=t.MEDIA_CELL_ICON_WIDTH=t.SNIPPET_HORIZONTAL_PADDING=t.SNIPPET_HEIGHT_PER_ROW=t.ROW_SNIPPET_VERTICAL_MARGIN=t.ROW_VERTICAL_PADDING=t.ROW_SUBTITLE_HEIGHT=t.ROW_TITLE_HEIGHT=t.DEFAULT_ROW_HEIGHT_CONDENSED_LIST=t.DEFAULT_ROW_HEIGHT_DENSE=t.DEFAULT_ROW_HEIGHT=t.DEFAULT_COLUMN_HEADER_HEIGHT=void 0,i=s.__importDefault(i);const l=n.intl.formatMessage({id:"P+XAua",defaultMessage:"Name"});t.DEFAULT_COLUMN_HEADER_HEIGHT=40,t.DEFAULT_ROW_HEIGHT=72,t.DEFAULT_ROW_HEIGHT_DENSE=60,t.DEFAULT_ROW_HEIGHT_CONDENSED_LIST=40,t.ROW_TITLE_HEIGHT=24,t.ROW_SUBTITLE_HEIGHT=16,t.ROW_VERTICAL_PADDING=16,t.ROW_SNIPPET_VERTICAL_MARGIN=8,t.SNIPPET_HEIGHT_PER_ROW=16,t.SNIPPET_HORIZONTAL_PADDING=16,t.MEDIA_CELL_ICON_WIDTH=64,t.LISTVIEW_LARGE_ICON_SIZE_PX=64,t.TAGS_HEIGHT=22,t.MEDIA_INFO_ITEM_HEIGHT=16,t.DEFAULT_ROW_HEIGHT_WITH_SNIPPETS=t.ROW_VERTICAL_PADDING+t.ROW_TITLE_HEIGHT+t.ROW_SUBTITLE_HEIGHT+t.ROW_SNIPPET_VERTICAL_MARGIN+3*t.SNIPPET_HEIGHT_PER_ROW,t.COMPACT_COLUMN_HEADER_HEIGHT=48,t.CHECKBOX_CELL_FLEX="0 0 36px",t.CHECKBOX_CELL_FLEX_RIGHT_RAIL="0 0 44px",t.FILE_NAME_TOOLTIP_MAX_LINE_LENGTH=65,t.LIST_VIEW_COLUMN_FLEX={3:[t.CHECKBOX_CELL_FLEX,"1 1 50%","0 0 25%","0 0 25%"],2:[t.CHECKBOX_CELL_FLEX,"1 1 60%","0 0 40%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 100%"]},t.FILE_NAME_CELL_SEARCH_FLEX_BASIS={3:50,2:65,1:100},t.LIST_VIEW_SEARCH_MODE_COLUMN_FLEX={3:[t.CHECKBOX_CELL_FLEX,`1 1 ${t.FILE_NAME_CELL_SEARCH_FLEX_BASIS[3]}%`,"0 0 25%","0 0 25%"],2:[t.CHECKBOX_CELL_FLEX,`1 1 ${t.FILE_NAME_CELL_SEARCH_FLEX_BASIS[2]}%`,"0 0 35%"],1:[t.CHECKBOX_CELL_FLEX,`1 1 ${t.FILE_NAME_CELL_SEARCH_FLEX_BASIS[1]}%`]},t.COLUMN_DEFAULT_WIDTHS={FILENAME:300,MODIFIED:160,CATEGORY:160,EXTENSION:160,SIZE:130,SHARED_WITH:160,SYNC_SETTING:160,FILE_COUNTS:160,RELEVANCE:160,LOCKED_FILES:160,POLICY:160,CLIENT_ACCESS:160},t.COLUMN_MIN_WIDTHS={FILENAME:200,MODIFIED:140,CATEGORY:120,EXTENSION:160,SIZE:120,SHARED_WITH:120,SYNC_SETTING:120,FILE_COUNTS:120,RELEVANCE:150,LOCKED_FILES:120,POLICY:120,CLIENT_ACCESS:360},t.COLUMN_MAX_WIDTHS={FILENAME:1200,MODIFIED:200,CATEGORY:300,EXTENSION:300,SIZE:200,SHARED_WITH:300,SYNC_SETTING:300,FILE_COUNTS:300,RELEVANCE:300,LOCKED_FILES:300,POLICY:300,CLIENT_ACCESS:360},t.GRID_VIEW_COLUMN_FLEX=[t.CHECKBOX_CELL_FLEX,"1 1"],t.GRID_VIEW_COLUMN_FLEX_RIGHT_RAIL=[t.CHECKBOX_CELL_FLEX_RIGHT_RAIL,"1 1"];t.SharedWithLabel=()=>i.default.createElement(i.default.Fragment,null,n.intl.formatMessage({id:"kGg5/N",defaultMessage:"Who can access"}));t.ClientPortalClientAccessLabel=()=>i.default.createElement(i.default.Fragment,null,n.intl.formatMessage({id:"oXDivo",defaultMessage:"Privacy"})),t.LIST_VIEW_COLUMNS=[{sortField:o.SortField.FILENAME,label:l,popoverTriggerLabel:l,isLocked:!0},{sortField:o.SortField.MODIFIED,label:n.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),popoverTriggerLabel:n.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),loggingLabel:"Modified"},{sortField:o.SortField.CLIENT_ACCESS,label:i.default.createElement(t.ClientPortalClientAccessLabel,null),popoverTriggerLabel:n.intl.formatMessage({id:"8ICd+C",defaultMessage:"Clients"}),loggingLabel:"Clients",isSortOrderOptionDisabled:!0},{sortField:o.SortField.SHARED_WITH,label:i.default.createElement(t.SharedWithLabel,null),popoverTriggerLabel:n.intl.formatMessage({id:"HLRJwR",defaultMessage:"Members"}),loggingLabel:"Members",isSortOrderOptionDisabled:!0},{sortField:o.SortField.CATEGORY,label:n.intl.formatMessage({id:"Pet0Vl",defaultMessage:"Type"}),popoverTriggerLabel:n.intl.formatMessage({id:"Pet0Vl",defaultMessage:"Type"}),loggingLabel:"Type"},{sortField:o.SortField.EXTENSION,label:n.intl.formatMessage({id:"ZZCH08",defaultMessage:"Extension"}),popoverTriggerLabel:n.intl.formatMessage({id:"ZZCH08",defaultMessage:"Extension"}),loggingLabel:"Extension"},{sortField:o.SortField.SIZE,label:n.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),popoverTriggerLabel:n.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),loggingLabel:"Size"}],t.GRID_VIEW_COLUMNS=[{sortField:o.SortField.FILENAME,label:l,popoverTriggerLabel:l},{sortField:o.SortField.MODIFIED,label:n.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),popoverTriggerLabel:n.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),loggingLabel:"Modified"},{sortField:o.SortField.CATEGORY,label:n.intl.formatMessage({id:"Pet0Vl",defaultMessage:"Type"}),popoverTriggerLabel:n.intl.formatMessage({id:"Pet0Vl",defaultMessage:"Type"}),loggingLabel:"Type"},{sortField:o.SortField.EXTENSION,label:n.intl.formatMessage({id:"ZZCH08",defaultMessage:"Extension"}),popoverTriggerLabel:n.intl.formatMessage({id:"ZZCH08",defaultMessage:"Extension"}),loggingLabel:"Extension"},{sortField:o.SortField.SIZE,label:n.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),popoverTriggerLabel:n.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),loggingLabel:"Size"}],t.SEARCH_LIST_VIEW_COLUMNS=[{sortField:o.SortField.FILENAME,label:l,popoverTriggerLabel:l,isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.MODIFIED,label:n.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),popoverTriggerLabel:n.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),loggingLabel:"Modified",isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.SIZE,label:n.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),popoverTriggerLabel:n.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),loggingLabel:"Size",isLocked:!0,isSortDisabled:!0}],t.SEARCH_LIST_VIEW_SORT_ENABLED_COLUMNS=[{sortField:o.SortField.FILENAME,label:l,popoverTriggerLabel:l,isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.RELEVANCE,label:n.intl.formatMessage({id:"3LcPUk",defaultMessage:"Relevance"}),popoverTriggerLabel:n.intl.formatMessage({id:"3LcPUk",defaultMessage:"Relevance"}),loggingLabel:"Relevance",isLocked:!1,isSortDisabled:!1},{sortField:o.SortField.SIZE,label:n.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),popoverTriggerLabel:n.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),loggingLabel:"Size",isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.MODIFIED,label:n.intl.formatMessage({id:"QqPUpX",defaultMessage:"Last modified"}),popoverTriggerLabel:n.intl.formatMessage({id:"QqPUpX",defaultMessage:"Last modified"}),loggingLabel:"Last modified",isLocked:!1,isSortDisabled:!1}],t.SEARCH_LIST_VIEW_TOP_RIGHT_SORT_COLUMNS=[{sortField:o.SortField.FILENAME,label:l,popoverTriggerLabel:l,isLocked:!1,isSortDisabled:!0},{sortField:o.SortField.MODIFIED,label:n.intl.formatMessage({id:"QqPUpX",defaultMessage:"Last modified"}),popoverTriggerLabel:n.intl.formatMessage({id:"QqPUpX",defaultMessage:"Last modified"}),loggingLabel:"Last modified",isLocked:!1,isSortDisabled:!0},{sortField:o.SortField.SIZE,label:n.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),popoverTriggerLabel:n.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),loggingLabel:"Size",isLocked:!1,isSortDisabled:!0}],t.SEARCH_GRID_VIEW_SORT_ENABLED_COLUMNS=[{sortField:o.SortField.RELEVANCE,label:n.intl.formatMessage({id:"3LcPUk",defaultMessage:"Relevance"}),popoverTriggerLabel:n.intl.formatMessage({id:"3LcPUk",defaultMessage:"Relevance"}),loggingLabel:"Relevance",isLocked:!1,isSortDisabled:!1},{sortField:o.SortField.MODIFIED,label:n.intl.formatMessage({id:"QqPUpX",defaultMessage:"Last modified"}),popoverTriggerLabel:n.intl.formatMessage({id:"QqPUpX",defaultMessage:"Last modified"}),loggingLabel:"Last modified",isLocked:!1,isSortDisabled:!1}],t.SEARCH_LIST_VIEW_COLUMNS_DELETED=[{sortField:o.SortField.FILENAME,label:l,popoverTriggerLabel:l,isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.MODIFIED,label:n.intl.formatMessage({id:"RBvabN",defaultMessage:"Deleted"}),popoverTriggerLabel:n.intl.formatMessage({id:"RBvabN",defaultMessage:"Deleted"}),loggingLabel:"Deleted",isLocked:!0,isSortDisabled:!0}],t.FilesViewTileGridConstants={NUM_THRESHOLD_ROWS:10,SCROLL_DELTA_THRESHOLD:1},t.AllNewFolderCreationStates=[r.NewFolderCreationState.CREATE_FOLDER_INACTIVE,r.NewFolderCreationState.PENDING_INPUT,r.NewFolderCreationState.SAVING_INPUT],t.AllRenameStates=[r.RenameState.PENDING_INPUT,r.RenameState.SAVING_INPUT],t.AllViewTypes=[a.ViewType.Grid,a.ViewType.LargeGrid,a.ViewType.List,a.ViewType.CondensedList,a.ViewType.SmallGrid],t.AllDropTargetHighlightModes=[r.DropTargetHighlightMode.NONE,r.DropTargetHighlightMode.ALL_FOLDERS,r.DropTargetHighlightMode.NONSHARED_FOLDERS,r.DropTargetHighlightMode.NONSHARED_NONTEAM_FOLDERS],t.AllSortFields=[o.SortField.FILENAME,o.SortField.MODIFIED,o.SortField.CATEGORY,o.SortField.EXTENSION,o.SortField.SIZE,o.SortField.SHARED_WITH,o.SortField.SYNC_SETTING,o.SortField.FILE_COUNTS],t.SortIsFilename=[o.SortField.FILENAME,o.SortField.CATEGORY,o.SortField.EXTENSION,o.SortField.SHARED_WITH,o.SortField.SYNC_SETTING],t.AllLoadingStates=[r.LoadingState.LOADED,r.LoadingState.LOADING_FIRST_PAGE,r.LoadingState.LOADING_REMAINING_PAGES,r.LoadingState.LOAD_ERROR],t.AllSortDirections=[o.SortDirection.ASCENDING,o.SortDirection.DESCENDING],t.ViewTypeThumbnailSizes={[a.ViewType.Grid]:256,[a.ViewType.LargeGrid]:512,[a.ViewType.List]:32,[a.ViewType.SmallGrid]:128},t.ViewTypeGridSizes={[a.ViewType.Grid]:160,[a.ViewType.LargeGrid]:480,[a.ViewType.List]:0,[a.ViewType.SmallGrid]:80},t.CulledListConstants={ITEM_ROW_HEIGHT_PX:46,MAESTRO_ITEM_ROW_HEIGHT_PX:57,SEARCH_ROW_HEIGHT_PX:53,MAESTRO_SEARCH_ROW_HEIGHT_PX:66,DEFAULT_HEADER_HEIGHT_PX:142,ITEM_BUFFER_SIZE:5},t.OverflowMenuConstants={MENU_ITEM_HEIGHT_PX:32,MENU_MARGIN_PX:8,MENU_POPOVER_ITEM_GROUP_SEPARATOR_HEIGHT_PX:17},t.VIEW_TYPE_COOKIE_NAME="browse_view_type",t.VIEW_TYPE_GLOBAL_SCOPE="*",t.VIEW_TYPE_SCOPE_TEXT_SEARCH=":search/text",t.VIEW_TYPE_SCOPE_IMAGE_SEARCH=":search/image",t.IMAGE_THUMBNAIL_EXTENSIONS=["3fr","arw","bmp","cr2","crw","dcr","dcs","dng","erf","gif","heic","j2c","j2k","jp2","jpc","jpeg","jpf","jpg","jpg2","jpm","jpx","kdc","mef","mos","mrw","nef","nrw","orf","pef","png","ppm","psd","r3d","raf","rw2","rwl","sr2","svg","svgz","tga","tif","tiff","wbmp","web","webp","x3f","ai","eps","otf","ttf","3gp","3gpp","3gpp2","asf","avi","dv","flv","m2t","m4v","mkv","mov","mp4","mpeg","mpg","mts","mxf","oggtheora","ogv","rm","ts","vob","webm","wmv","indd"],t.DOC_THUMBNAIL_EXTENSIONS=["pdf","doc","docx","ppt","pptx","xls","xlsx"],t.defaultViewTypes={[t.VIEW_TYPE_GLOBAL_SCOPE]:a.ViewType.List,[t.VIEW_TYPE_SCOPE_TEXT_SEARCH]:a.ViewType.List,[t.VIEW_TYPE_SCOPE_IMAGE_SEARCH]:a.ViewType.LargeGrid}})),define("metaserver/static/js/files_view/data/reducer",["require","exports","tslib","immutable","metaserver/static/js/files_view/constants","metaserver/static/js/files_view/data/types","metaserver/static/js/files_view/sort_types","metaserver/static/js/files_view/types","metaserver/static/js/files_view/view_type","metaserver/static/js/flows/types","metaserver/static/js/sync_everything/constants"],(function(e,t,s,i,r,o,a,n,l,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filesViewReducer=t.defaultFilesViewInstance=t.defaultFilesViewState=t.getListViewColumns=void 0,i=s.__importStar(i);t.getListViewColumns=()=>{if((0,c.isBackupBrowse)()){const e=[...r.LIST_VIEW_COLUMNS].filter(e=>e.sortField!==a.SortField.SHARED_WITH),t=e.findIndex(e=>e.sortField===a.SortField.SIZE),s=e.splice(t,1)[0];return e.splice(2,0,s),e}return r.LIST_VIEW_COLUMNS},t.defaultFilesViewState={viewTypes:{[r.VIEW_TYPE_GLOBAL_SCOPE]:l.ViewType.List},scopedColumnsIndex:void 0,scopedSorts:void 0,viewTypeColumns:{[l.ViewType.List]:(0,t.getListViewColumns)(),[l.ViewType.CondensedList]:(0,t.getListViewColumns)(),[l.ViewType.Grid]:r.GRID_VIEW_COLUMNS,[l.ViewType.LargeGrid]:r.GRID_VIEW_COLUMNS},fileRename:null,instances:i.Map(),previewThumbnails:{},activeInstance:void 0};t.defaultFilesViewInstance={dropTargetHighlightMode:n.DropTargetHighlightMode.NONE,enableUnity:!0,loadingState:n.LoadingState.LOADING_FIRST_PAGE,fileRename:null,renderFilenameSubtitleAsLink:!0,eligibleForFirstTaskSubtitle:!1,viewTypeScope:r.VIEW_TYPE_GLOBAL_SCOPE,hideViewFileButton:!1,fileHasAutomatedRuleMap:(0,d.FlowsMap)({})};t.filesViewReducer=function(e=t.defaultFilesViewState,s){switch(s.type){case o.ActionTypes.SET_VIEW_TYPE:return((e,{viewType:t,viewScopes:s})=>{const i=Object.assign({},e.viewTypes);for(const e of s)i[e]=t;return Object.assign(Object.assign({},e),{viewTypes:i})})(e,s.payload);case o.ActionTypes.SET_VIEW_TYPES:return((e,{viewTypes:t})=>Object.assign(Object.assign({},e),{viewTypes:Object.assign(Object.assign({},e.viewTypes),t)}))(e,s.payload);case o.ActionTypes.SET_FILE_RENAME:return(function(e,t){var s;const{file:i,renameState:r}=t.payload;return r===n.RenameState.PENDING_INPUT||r===n.RenameState.SAVING_INPUT&&!1===(null===(s=e.fileRename)||void 0===s?void 0:s.isNamingConventionsApplied)?Object.assign(Object.assign({},e),{fileRename:{file:i,state:r,input:i.fq_path.substring(i.fq_path.lastIndexOf("/")+1),isNamingConventionsApplied:!1}}):Object.assign(Object.assign({},e),{fileRename:null})})(e,s);case o.ActionTypes.SET_COLUMNS_INDEX:return((e,{payload:{columnsIndex:t,viewScopes:s,numVisibleColumns:i}})=>{const r=Object.assign({},e.scopedColumnsIndex),o=Object.assign({},e.scopedNumVisibleColumns);for(const e of s)r[e]=t,void 0!==i&&(o[e]=i);return Object.assign(Object.assign({},e),{scopedColumnsIndex:r,scopedNumVisibleColumns:o})})(e,s);case o.ActionTypes.SET_SCOPED_COLUMNS_INDEX:return((e,{payload:{scopedColumnsIndex:t,scopedNumVisibleColumns:s}})=>Object.assign(Object.assign({},e),{scopedColumnsIndex:t,scopedNumVisibleColumns:s}))(e,s);case o.ActionTypes.SET_SCOPED_SORTS:return((e,{payload:{scopedSorts:t}})=>Object.assign(Object.assign({},e),{scopedSorts:t}))(e,s);case o.ActionTypes.SET_SORT:return((e,{payload:{sort:t,viewScopes:s}})=>{const i=Object.assign({},e.scopedSorts);for(const e of s)i[e]=t;return Object.assign(Object.assign({},e),{scopedSorts:i})})(e,s);case o.ActionTypes.SET_SCROLL:return((e,t)=>Object.assign(Object.assign({},e),{currentScroll:{scrollTop:t.scrollTop}}))(e,s.payload);case o.ActionTypes.UPSERT_INSTANCE:return((e,{payload:{instance:s,id:i}})=>{const r=e.instances.get(i);return Object.assign(Object.assign({},e),{activeInstance:i,instances:e.instances.set(i,Object.assign(Object.assign({},r||t.defaultFilesViewInstance),s))})})(e,s);case o.ActionTypes.DELETE_INSTANCE:return((e,{payload:{id:t}})=>Object.assign(Object.assign({},e),{instances:e.instances.delete(t)}))(e,s);case o.ActionTypes.PREVIEW_THUMBNAILS_LOADING:return((e,{payload:{files:t}})=>{const s=Object.assign({},e.previewThumbnails);return t.forEach(e=>{var t;e.file_id&&!(null===(t=s[e.file_id])||void 0===t?void 0:t.isLoading)&&(s[e.file_id]={isLoading:!0,file_info:e})}),Object.assign(Object.assign({},e),{previewThumbnails:s})})(e,s);case o.ActionTypes.PREVIEW_THUMBNAILS_LOADED:return((e,{payload:{preview_thumbnails:t}})=>{const s=Object.assign({},e.previewThumbnails);return t.forEach(e=>{e.file_id&&(s[e.file_id]={isLoading:!1,preview_url:e.preview_url})}),Object.assign(Object.assign({},e),{previewThumbnails:s})})(e,s);case o.ActionTypes.PREVIEW_THUMBNAILS_REMOVED:return((e,{payload:{files:t}})=>{const s=Object.assign({},e.previewThumbnails);return t.forEach(e=>{e.file_id&&delete s[e.file_id]}),Object.assign(Object.assign({},e),{previewThumbnails:s})})(e,s);case o.ActionTypes.MARK_ACTIVE_INSTANCE:return((e,{payload:{id:t}})=>e.activeInstance!==t?Object.assign(Object.assign({},e),{activeInstance:t}):e)(e,s);case o.ActionTypes.FILTER_OUT_COLUMNS:return((e,s)=>{const i=(0,t.getListViewColumns)().filter(e=>-1===s.payload.indexOf(e.sortField));return Object.assign(Object.assign({},e),{viewTypeColumns:Object.assign(Object.assign({},e.viewTypeColumns),{[l.ViewType.List]:i,[l.ViewType.CondensedList]:i})})})(e,s);case o.ActionTypes.UPDATE_FILE_RENAME_INPUT:return(function(e,t){var s,i,r,o;const{renameInput:a}=t.payload;return(null===(s=e.fileRename)||void 0===s?void 0:s.state)===n.RenameState.PENDING_INPUT?Object.assign(Object.assign({},e),{fileRename:{file:null===(i=e.fileRename)||void 0===i?void 0:i.file,state:null===(r=e.fileRename)||void 0===r?void 0:r.state,input:a,isNamingConventionsApplied:null===(o=e.fileRename)||void 0===o?void 0:o.isNamingConventionsApplied}}):Object.assign({},e)})(e,s);case o.ActionTypes.UPDATE_NAMING_CONVENTION_APPLY_STATUS:return(function(e,t){var s,i,r,o;return!1===(null===(s=e.fileRename)||void 0===s?void 0:s.isNamingConventionsApplied)?Object.assign(Object.assign({},e),{fileRename:{file:null===(i=e.fileRename)||void 0===i?void 0:i.file,state:null===(r=e.fileRename)||void 0===r?void 0:r.state,input:null===(o=e.fileRename)||void 0===o?void 0:o.input,isNamingConventionsApplied:t.payload.isApplyClicked}}):Object.assign({},e)})(e,s)}return e}})),define("metaserver/static/js/files_view/data/selectors/files_view_selectors",["require","exports","metaserver/static/js/files_view/data/reducer","metaserver/static/js/redux/namespaces","metaserver/static/js/redux/selectors"],(function(e,t,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.previewThumbnailsToLoad=t.previewThumbnails=t.selectInstances=t.isActiveFilesView=t.currentScroll=t.fileRename=t.scopedNumVisibleColumns=t.scopedSorts=t.viewTypeColumns=t.scopedColumnsIndex=t.viewTypes=void 0;const o=e=>(0,r.getStateAtNamespace)(e,i.FILES_VIEW_NAMESPACE_KEY)||s.defaultFilesViewState;t.viewTypes=e=>o(e).viewTypes;t.scopedColumnsIndex=e=>o(e).scopedColumnsIndex;t.viewTypeColumns=e=>o(e).viewTypeColumns;t.scopedSorts=e=>o(e).scopedSorts;t.scopedNumVisibleColumns=e=>o(e).scopedNumVisibleColumns;t.fileRename=e=>o(e).fileRename;t.currentScroll=e=>o(e).currentScroll;t.isActiveFilesView=(e,t)=>o(e).activeInstance===t;t.selectInstances=e=>o(e).instances;t.previewThumbnails=e=>o(e).previewThumbnails;t.previewThumbnailsToLoad=e=>{const s=[],i=(0,t.previewThumbnails)(e);for(const e in i)!0===i[e].isLoading&&i[e].file_info&&s.push(i[e].file_info);return s}})),define("metaserver/static/js/files_view/data/selectors/instance_selectors",["require","exports","reselect","metaserver/static/js/browse/models","metaserver/static/js/files_view/constants","metaserver/static/js/files_view/data/selectors/files_view_selectors","metaserver/static/js/files_view/data/store","metaserver/static/js/files_view/file_grouper","metaserver/static/js/files_view/view_type","metaserver/static/js/files_view/util","metaserver/static/js/core/assert","metaserver/static/js/modules/constants/web_experience_constants"],(function(e,t,s,i,r,o,a,n,l,d,c,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectExpManualTagging=t.selectNumVisibleColumns=t.selectScopedSort=t.selectPreferredColumns=t.selectColumnsIndex=t.selectViewType=t.selectViewTypes=t.selectViewTypeScope=t.selectItemsForUnityListener=t.selectItemIds=t.selectSections=t.selectHasItemsSelected=t.selectNumItemsSelected=t.selectShouldShowFileNameLocation=t.selectShouldShowFileNameHighlights=t.selectCutItems=t.selectClipboard=t.selectIsMobileMode=t.selectIsCompactMode=t.selectInlineActionBar=t.selectIsActionBarEnabled=t.selectEligibleForFirstTaskSubtitle=t.selectRenderFilenameSubtitleAsLink=t.selectHighDensity=t.selectFileRename=t.selectResponsive=t.selectSelection=t.selectDisabledMultiselect=t.selectIsSearchMode=t.selectCurrentSort=t.selectIsListView=t.selectIsGridView=t.selectArePostTTIModulesLoaded=t.selectUser=t.selectContext=t.selectFileHasAutomatedRuleMap=t.selectCurrentFolderInfo=t.selectMainItems=t.selectDropTargetHighlightMode=t.selectInstance=void 0;const E=(e,t)=>(0,o.selectInstances)(e).get(t.instanceId);t.selectInstance=(e,t)=>{const s=E(e,t);return(0,c.assert)(!!s,`[FilesView] Instance '${t.instanceId}' must be defined in redux store before mounting`),s};const u=e=>(s,i)=>e((0,t.selectInstance)(s,i)),S=e=>(t,s)=>e(E(t,s));t.selectDropTargetHighlightMode=u(e=>e.dropTargetHighlightMode),t.selectMainItems=u(e=>e.items),t.selectCurrentFolderInfo=u(e=>e.currentFolderInfo),t.selectFileHasAutomatedRuleMap=u(e=>e.fileHasAutomatedRuleMap),t.selectContext=u(e=>e.context),t.selectUser=u(e=>e.user),t.selectArePostTTIModulesLoaded=u(e=>e.arePostTTIModulesLoaded);t.selectIsGridView=(e,s)=>[l.ViewType.Grid,l.ViewType.LargeGrid].includes((0,t.selectViewType)(e,s));t.selectIsListView=(e,s)=>[l.ViewType.List,l.ViewType.CondensedList].includes((0,t.selectViewType)(e,s)),t.selectCurrentSort=u(e=>e.currentSort),t.selectIsSearchMode=u(e=>e.isSearchMode),t.selectDisabledMultiselect=u(e=>!!e.disabledMultiselect),t.selectSelection=u(e=>e.selection),t.selectResponsive=u(e=>e.responsive),t.selectFileRename=u(e=>e.fileRename),t.selectHighDensity=u(e=>e.highDensity),t.selectRenderFilenameSubtitleAsLink=u(e=>e.renderFilenameSubtitleAsLink),t.selectEligibleForFirstTaskSubtitle=u(e=>e.eligibleForFirstTaskSubtitle),t.selectIsActionBarEnabled=u(e=>e.isActionBarEnabled),t.selectInlineActionBar=u(e=>e.inlineActionBar);t.selectIsCompactMode=(e,s)=>!(0,t.selectResponsive)(e,s).isMatchedLarge;t.selectIsMobileMode=(e,s)=>{const i=(0,t.selectResponsive)(e,s);return(0,d.isMobileMode)(i)},t.selectClipboard=u(e=>e.clipboard);t.selectCutItems=(e,s)=>{const i=(0,t.selectClipboard)(e,s);return i&&"cut"===i.action?new Map(i.files.map(e=>[e.fq_path,e])):_.WEBXP_PERF?void 0:new Map};t.selectShouldShowFileNameHighlights=(e,s)=>(0,t.selectIsSearchMode)(e,s);t.selectShouldShowFileNameLocation=(e,s)=>(0,t.selectIsSearchMode)(e,s);t.selectNumItemsSelected=(e,s)=>(0,t.selectSelection)(e,s).selected.size;t.selectHasItemsSelected=(e,s)=>(0,t.selectNumItemsSelected)(e,s)>0,t.selectSections=(0,s.createSelector)(t.selectIsGridView,t.selectCurrentSort,t.selectMainItems,t.selectIsSearchMode,(e,t,s,i)=>e&&t?(0,n.getSections)(s,t.sortField,t.sortDirection,i):n.EMPTY_SECTIONS),t.selectItemIds=(0,s.createSelector)(t.selectMainItems,e=>e.toArray().map(e=>e instanceof i.File?e.fq_path:e instanceof i.FileSharedWithMe?e.file_id:"")),t.selectItemsForUnityListener=(0,s.createSelector)(t.selectMainItems,t.selectCurrentFolderInfo,(e,t)=>t?e.concat(t):e),t.selectViewTypeScope=S(e=>(null==e?void 0:e.viewTypeScope)||r.VIEW_TYPE_GLOBAL_SCOPE),t.selectViewTypes=S(e=>(null==e?void 0:e.viewTypes)||[]),t.selectViewType=(0,s.createSelector)(o.viewTypes,t.selectViewTypes,t.selectViewTypeScope,(e,t,s)=>{let i;return i=s in e?e[s]:s in r.defaultViewTypes?r.defaultViewTypes[s]:e[r.VIEW_TYPE_GLOBAL_SCOPE],t.includes(i)?i:l.ViewType.List}),t.selectColumnsIndex=(0,s.createSelector)(o.scopedColumnsIndex,t.selectViewTypeScope,t.selectIsSearchMode,(e,t,s)=>{if(e&&!s)return t in e?e[t]:e[r.VIEW_TYPE_GLOBAL_SCOPE]||{}}),t.selectPreferredColumns=(0,s.createSelector)(t.selectColumnsIndex,t.selectViewType,o.viewTypeColumns,(e,t,s)=>{if(!e)return;const[i,...r]=s[t],o=Object.keys(e).reduce((t,s)=>{const i=parseInt(s,10);return t[e[i]]=i,t},{}),a=[],n={};for(const e of r){const t=o[e.sortField];void 0===t||0===t?a.push(e):n[t]=e}const l=[i];for(let e=1;e<=r.length;e++){const t=n[e]||a.shift();t&&l.push(t)}return l}),t.selectScopedSort=(0,s.createSelector)(o.scopedSorts,t.selectViewTypeScope,(e,t)=>{if(e)return t in e?e[t]:e[r.VIEW_TYPE_GLOBAL_SCOPE]}),t.selectNumVisibleColumns=(0,s.createSelector)(o.scopedNumVisibleColumns,t.selectViewTypeScope,(e,t)=>{if(e)return t in e?e[t]:e[r.VIEW_TYPE_GLOBAL_SCOPE]}),t.selectExpManualTagging=S(e=>(null==e?void 0:e.expManualTagging)||"OFF"),(0,a.getStoreForFilesView)()})),define("metaserver/static/js/files_view/data/store",["require","exports","metaserver/static/js/files_view/data/reducer","metaserver/static/js/redux/namespaces","metaserver/static/js/redux/store"],(function(e,t,s,i,r){"use strict";let o;Object.defineProperty(t,"__esModule",{value:!0}),t.getStoreForFilesView=void 0;t.getStoreForFilesView=()=>(o||(o=(0,r.getStoreAndRegisterReducers)({[i.FILES_VIEW_NAMESPACE_KEY]:s.filesViewReducer})),o)})),define("metaserver/static/js/files_view/data/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTypes=void 0,(function(e){e.SET_VIEW_TYPE="FILES_VIEW/SET_VIEW_TYPE",e.SET_VIEW_TYPES="FILES_VIEW/SET_VIEW_TYPES",e.SET_VIEW_TYPE_SCOPE="FILES_VIEW/SET_VIEW_TYPE_SCOPE",e.SET_FILE_RENAME="FILES_VIEW/SET_FILE_RENAME",e.SET_COLUMNS_INDEX="FILES_VIEW/SET_COLUMNS_INDEX",e.SET_SCOPED_COLUMNS_INDEX="FILES_VIEW/SET_SCOPED_COLUMNS_INDEX",e.SET_SORT="FILES_VIEW/SET_SORT",e.SET_SCOPED_SORTS="FILES_VIEW/SET_SCOPED_SORTS",e.SET_SCROLL="FILES_VIEW/SET_SCROLL",e.UPDATE_INSTANCE="FILES_VIEW/UPDATE_INSTANCE",e.UPSERT_INSTANCE="FILES_VIEW/UPSERT_INSTANCE",e.DELETE_INSTANCE="FILES_VIEW/DELETE_INSTANCE",e.PREVIEW_THUMBNAILS_LOADING="FILES_VIEW/PREVIEW_THUMBNAILS_LOADING",e.PREVIEW_THUMBNAILS_LOADED="FILES_VIEW/PREVIEW_THUMBNAILS_LOADED",e.PREVIEW_THUMBNAILS_REMOVED="FILES_VIEW/PREVIEW_THUMBNAILS_REMOVED",e.MARK_ACTIVE_INSTANCE="FILES_VIEW/MARK_ACTIVE_INSTANCE",e.FILTER_OUT_COLUMNS="FILES_VIEW/FILTER_OUT_COLUMNS",e.UPDATE_FILE_RENAME_INPUT="UPDATE_FILE_RENAME_INPUT",e.UPDATE_NAMING_CONVENTION_APPLY_STATUS="UPDATE_NAMING_CONVENTION_APPLY_STATUS"})(t.ActionTypes||(t.ActionTypes={}))})),define("metaserver/static/js/files_view/file_actions/snackbars",["require","exports","metaserver/static/js/core/i18n"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteCompleteError=t.deleteInProgress=t.deleteCompleteSuccess=t.deleteError=t.renameError=void 0;t.renameError=(e,t)=>{let i;return i="to"===e[".tag"]&&"malformed_path"===e.to[".tag"]?s.intl.formatMessage({id:"rBgywO",defaultMessage:"Name was invalid."}):"from_write"===e[".tag"]&&"team_folder"===e.from_write[".tag"]?s.intl.formatMessage({id:"zqiuDZ",defaultMessage:"Team folders can’t be renamed."}):"from_lookup"===e[".tag"]&&"not_found"===e.from_lookup[".tag"]?s.intl.formatMessage({id:"kdizeA",defaultMessage:"Couldn’t find the file."}):s.intl.formatMessage({id:"pUBm7w",defaultMessage:"Rename failed."}),i};t.deleteError=(e,t)=>s.intl.formatMessage({id:"pjyJun",defaultMessage:"{count, plural, one{Couldn’t delete {count} item.} other{Couldn’t delete {count} items.}}"},{count:e});t.deleteCompleteSuccess=(e,t)=>t<e?s.intl.formatMessage({id:"QGz6Gm",defaultMessage:"{count, plural, one{Deleted {succesfully_deleted_files} out of {count} item.} other{Deleted {succesfully_deleted_files} out of {count} items.}}"},{count:e,succesfully_deleted_files:t}):s.intl.formatMessage({id:"THAbub",defaultMessage:"{count, plural, one{Deleted {count} item.} other{Deleted {count} items.}}"},{count:t});t.deleteInProgress=e=>s.intl.formatMessage({id:"z7/sbf",defaultMessage:"{count, plural, one{Deleting {count} item...} other{Deleting {count} items...}}"},{count:e});t.deleteCompleteError=e=>{if(1===e.length){const t=e[0].failure;if("too_many_files"===t[".tag"]||"too_many_write_operations"===t[".tag"])return s.intl.formatMessage({id:"ane1pD",defaultMessage:"There are too many files in one request. Please retry with fewer files."});if("path_lookup"===t[".tag"]&&"not_found"===t.path_lookup[".tag"])return s.intl.formatMessage({id:"9suezP",defaultMessage:"File does not exist."})}return s.intl.formatMessage({id:"pjyJun",defaultMessage:"{count, plural, one{Couldn’t delete {count} item.} other{Couldn’t delete {count} items.}}"},{count:e.length})}})),define("metaserver/static/js/files_view/file_grouper",["require","exports","metaserver/static/js/core/i18n","metaserver/static/js/datetime/datetime","metaserver/static/js/browse/constants","metaserver/static/js/files_view/sort_types","metaserver/static/js/browse/models"],(function(e,t,s,i,r,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSections=t.EMPTY_SECTIONS=void 0;const n=s.intl.formatMessage({id:"RzhnRl",defaultMessage:"Extensionless"}),l=s.intl.formatMessage({id:"DcKHEo",defaultMessage:"Missing dates"}),d=s.intl.formatMessage({id:"GYhJ5f",defaultMessage:"Deleted content isn’t sorted by last modified"});t.EMPTY_SECTIONS={sectionLabels:[],sectionStartIndices:[]},t.getSections=function(e,t,c,_=!1){const E=[],u=[];let S=null;if(t===o.SortField.CATEGORY)e.forEach((e,t)=>{if(!e)return;const s=(function(e){return e instanceof a.File?a.File.getCategoryDescription(e,!0):r.ExtensionCategories.DOCUMENT})(e);s!==S&&(E.push(s),u.push(t),S=s)});else if(t===o.SortField.EXTENSION)e.forEach((e,t)=>{if(!e)return;const s=(function(e){return e instanceof a.File?e.is_dir?r.FileTypeCapitalizedCategoryTranslations.FOLDER:a.File.getExtension(e).toUpperCase():n})(e);if(s!==S){let e=s;""===s&&(e=n),E.push(e),u.push(t),S=s}});else if(t===o.SortField.MODIFIED)if(c===o.SortDirection.DESCENDING){const t=(0,i.getTimeBands)(Date.now());e.forEach((e,i)=>{if(!e)return;let r;if(_&&e instanceof a.File&&e.isDeleted)r=d;else{const i=(0,a.itemTimestampInMs)(e);r=i>=t.today?s.intl.formatMessage({id:"JDRaFD",defaultMessage:"Today"}):i>=t.yesterday?s.intl.formatMessage({id:"2iSDDx",defaultMessage:"Yesterday"}):i>=t.thisWeek?s.intl.formatMessage({id:"e3KIPg",defaultMessage:"This week"}):i>=t.lastWeek?s.intl.formatMessage({id:"dsHtkw",defaultMessage:"Last week"}):i>=t.thisMonth?s.intl.formatMessage({id:"G0eFMx",defaultMessage:"This month"}):i>=t.lastMonth?s.intl.formatMessage({id:"nM5Fv4",defaultMessage:"Last month"}):i>=t.lastThreeMonths?s.intl.formatMessage({id:"U7dFRR",defaultMessage:"Three months ago"}):s.intl.formatMessage({id:"Y/NN0h",defaultMessage:"Older"})}r!==S&&(E.push(r),u.push(i),S=r)})}else e.forEach((e,t)=>{if(!e)return;let i;i=_&&e instanceof a.File&&e.isDeleted?d:(0,a.itemTimestampInMs)(e)?s.intl.formatDate((0,a.itemTimestampInMs)(e),{year:"numeric",month:"long"}):l,i!==S&&(E.push(i),u.push(t),S=i)});return{sectionLabels:E,sectionStartIndices:u}}})),define("metaserver/static/js/files_view/types",["require","exports","metaserver/static/js/clean/web_user_action_events"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilesViewActionSource=t.DropTargetHighlightMode=t.LoadingState=t.RenameState=t.NewFolderCreationState=t.NameInputActionSource=void 0,Object.defineProperty(t,"FilesViewActionSource",{enumerable:!0,get:function(){return s.ActionSourceValue}}),(function(e){e.ESC="ESC",e.SUBMIT="SUBMIT",e.BLUR="BLUR"})(t.NameInputActionSource||(t.NameInputActionSource={})),(function(e){e.CREATE_FOLDER_INACTIVE="CREATE_FOLDER_INACTIVE",e.PENDING_INPUT="PENDING_INPUT",e.SAVING_INPUT="SAVING_INPUT"})(t.NewFolderCreationState||(t.NewFolderCreationState={})),(function(e){e.PENDING_INPUT="pending-input",e.SAVING_INPUT="saving-input"})(t.RenameState||(t.RenameState={})),(function(e){e.LOADED="LOADED",e.LOADING_FIRST_PAGE="LOADING_FIRST_PAGE",e.LOADING_REMAINING_PAGES="LOADING_REMAINING_PAGES",e.LOAD_ERROR="LOAD_ERROR"})(t.LoadingState||(t.LoadingState={})),(function(e){e.NONE="NONE",e.ALL_FOLDERS="ALL_FOLDERS",e.NONSHARED_FOLDERS="NONSHARED_FOLDERS",e.NONSHARED_NONTEAM_FOLDERS="NONSHARED_NONTEAM_FOLDERS"})(t.DropTargetHighlightMode||(t.DropTargetHighlightMode={}))})),define("metaserver/static/js/flows/types",["require","exports","immutable","typescript/component_libraries/flows/src/common/types","typescript/component_libraries/flows/src/common/types_v2"],(function(e,t,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlowsMap=t.WorkflowTriggerType=t.WorkflowActionType=t.FolderTriggerType=t.FolderActionType=t.FolderActionData=t.ClientFolderTrigger=t.ClientFolderAction=void 0,Object.defineProperty(t,"ClientFolderAction",{enumerable:!0,get:function(){return i.ClientFolderAction}}),Object.defineProperty(t,"ClientFolderTrigger",{enumerable:!0,get:function(){return i.ClientFolderTrigger}}),Object.defineProperty(t,"FolderActionData",{enumerable:!0,get:function(){return i.FolderActionData}}),Object.defineProperty(t,"FolderActionType",{enumerable:!0,get:function(){return i.FolderActionType}}),Object.defineProperty(t,"FolderTriggerType",{enumerable:!0,get:function(){return i.FolderTriggerType}}),Object.defineProperty(t,"WorkflowActionType",{enumerable:!0,get:function(){return r.WorkflowActionType}}),Object.defineProperty(t,"WorkflowTriggerType",{enumerable:!0,get:function(){return r.WorkflowTriggerType}}),t.FlowsMap=function(e){return(0,s.Map)(e)}})),define("metaserver/static/js/growth/ui/personalization/util",["require","exports"],(function(e,t){"use strict";var s,i,r,o,a,n;Object.defineProperty(t,"__esModule",{value:!0}),t.getSuggestedFoldersType=t.getRole=t.getFirstPath=t.shouldEnableFullFunnelM3VideoSnackbar=t.getCreateSuggestedFolderTooltipVariant=t.CreateSuggestedFolderTooltipVariant=t.hasPerformedJtbdPersonalizationAction=t.hasApplicableJtbdForCreateButtonTooltip=t.hasApplicableJtbdForUploadButtonTooltip=t.OnboardingDataSource=t.OnboardingSignupCTA=t.OnboardingInterest=t.emptyStateType=t.SuggestedFoldersType=t.DesktopCtaType=t.FirstPathId=void 0,(function(e){e.SUGGESTED_FOLDERS_ITERATION="suggested_folders_iteration",e.NONE=""})(s=t.FirstPathId||(t.FirstPathId={})),(function(e){e[e.ShowWithoutText=1]="ShowWithoutText",e[e.ShowWithText=2]="ShowWithText",e[e.ShowWithTextAsPrimary=3]="ShowWithTextAsPrimary"})(t.DesktopCtaType||(t.DesktopCtaType={})),(function(e){e[e.None=0]="None",e[e.SuggestedFolders=1]="SuggestedFolders"})(i=t.SuggestedFoldersType||(t.SuggestedFoldersType={})),(function(e){e.DROP_TARGET_VIEW="drop_target_view",e.SUGGESTED_FOLDERS_VIEW="suggested_folders_view"})(t.emptyStateType||(t.emptyStateType={})),(function(e){e[e.UNSET=0]="UNSET",e[e.VIDEO_SHARE=1]="VIDEO_SHARE",e[e.WORK_WITH_EXTERNAL_CLIENTS=2]="WORK_WITH_EXTERNAL_CLIENTS"})(r=t.OnboardingInterest||(t.OnboardingInterest={})),(function(e){e[e.UNSET=0]="UNSET",e[e.UPLOAD_LARGE_VIDEO_FILES=1]="UPLOAD_LARGE_VIDEO_FILES",e[e.FEEDBACK_ON_VIDEO_PROJECTS=2]="FEEDBACK_ON_VIDEO_PROJECTS",e[e.DELIVER_VIDEO_PROJECTS=3]="DELIVER_VIDEO_PROJECTS",e[e.SHARED_FILE_ACCESS_CONTROL=4]="SHARED_FILE_ACCESS_CONTROL",e[e.MANAGE_CLIENT_REVIEWS=5]="MANAGE_CLIENT_REVIEWS",e[e.BRAND_IDENTITY_WHILE_SHARING=6]="BRAND_IDENTITY_WHILE_SHARING"})(o=t.OnboardingSignupCTA||(t.OnboardingSignupCTA={})),(function(e){e[e.QUERY_PARAM=0]="QUERY_PARAM",e[e.ONBOARDING_SURVEY=1]="ONBOARDING_SURVEY"})(a=t.OnboardingDataSource||(t.OnboardingDataSource={})),t.hasApplicableJtbdForUploadButtonTooltip=function(e){const t=null==e?void 0:e.onboarding_data;return(null==t?void 0:t.onboarding_interest)===r.VIDEO_SHARE||(null==t?void 0:t.onboarding_interest)===r.WORK_WITH_EXTERNAL_CLIENTS&&(null==t?void 0:t.onboarding_signup_cta)===o.MANAGE_CLIENT_REVIEWS},t.hasApplicableJtbdForCreateButtonTooltip=function(e){const t=null==e?void 0:e.onboarding_data;return(null==t?void 0:t.onboarding_interest)===r.WORK_WITH_EXTERNAL_CLIENTS&&(null==t?void 0:t.onboarding_signup_cta)===o.SHARED_FILE_ACCESS_CONTROL},t.hasPerformedJtbdPersonalizationAction=function(e,t){var s;return!!(null===(s=null==t?void 0:t.personalization_action_to_completion_map)||void 0===s?void 0:s[e])},(function(e){e.VIDEO_SHARE_AND_REQUEST="videoShareAndRequest"})(n=t.CreateSuggestedFolderTooltipVariant||(t.CreateSuggestedFolderTooltipVariant={})),t.getCreateSuggestedFolderTooltipVariant=function(e){const t=null==e?void 0:e.onboarding_data;switch(null==t?void 0:t.onboarding_interest){case r.VIDEO_SHARE:return n.VIDEO_SHARE_AND_REQUEST;default:return}},t.shouldEnableFullFunnelM3VideoSnackbar=function(e){var t,s;const i=(null===(t=null==e?void 0:e.onboarding_data)||void 0===t?void 0:t.onboarding_interest)||r.UNSET,o=(null===(s=null==e?void 0:e.experiments)||void 0===s?void 0:s.full_funnel_activation_m3_variant)||"OFF",n=(null==e?void 0:e.onboarding_data_source)||a.QUERY_PARAM;return"V1"===o&&n===a.ONBOARDING_SURVEY&&i===r.VIDEO_SHARE},t.getFirstPath=function(e){return(null==e?void 0:e.firstPath)||s.NONE},t.getRole=function(e){return(null==e?void 0:e.role)||""},t.getSuggestedFoldersType=function(e){return(null==e?void 0:e.suggestedFoldersType)||i.None}})),define("metaserver/static/js/tagging/data/selectors/index",["require","exports","metaserver/static/js/redux/namespaces","metaserver/static/js/redux/selectors"],(function(e,t,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectUserGeneratedTagsSuggestions=t.isTagUserGenerated=t.selectAllTagsSuggestions=t.selectTagsByFile=void 0;const r=e=>(0,i.getStateAtNamespace)(e,s.TAGGING_NAMESPACE_KEY);t.selectTagsByFile=e=>r(e).tagsByFile;t.selectAllTagsSuggestions=e=>r(e).tags;t.isTagUserGenerated=e=>"user_generated_tag"===e[".tag"];t.selectUserGeneratedTagsSuggestions=e=>{var s;return null===(s=(0,t.selectAllTagsSuggestions)(e))||void 0===s?void 0:s.filter(t.isTagUserGenerated)}})),define("metaserver/static/js/tagging/utils",["require","exports","tslib","lodash","metaserver/static/js/core/browser","metaserver/static/js/search/search_helpers","metaserver/static/js/clean/fuzzy","metaserver/static/js/clean/history_helper"],(function(e,t,s,i,r,o,a,n){"use strict";function l(e){for(;e.startsWith("#");)e=e.substr(1);return e}function d(e){return`#${l(e)}`}function c(e){const t=!e.is_unmounted&&e.target_ns;return{nsId:t?e.target_ns:e.ns_id,nsPath:t?"":e.ns_path}}function _(e){return`${e.nsId},${e.nsPath.toLowerCase()}`}Object.defineProperty(t,"__esModule",{value:!0}),t.getTagsInQuery=t.getTagType=t.textTagsToUserGeneratedTags=t.fileHasEditPermissions=t.getTagsSuggestions=t.redirectToSearchByTag=t.queryContainsTag=t.isUserGeneratedTag=t.isSuggestedTag=t.isTextTag=t.tagTextToTagUserGeneratedTag=t.getFileMapKey=t.getFileObjectNsIdAndPathKey=t.getFileObjectNsIdAndPath=t.formatTypedTag=t.formatTag=t.trimHashtags=void 0,r=s.__importStar(r),o=s.__importStar(o),a=s.__importDefault(a),t.trimHashtags=l,t.formatTag=d,t.formatTypedTag=function(e){return(0,t.isUserGeneratedTag)(e)?d(e.tag_text):l(e.tag_text)},t.getFileObjectNsIdAndPath=c,t.getFileObjectNsIdAndPathKey=_,t.getFileMapKey=function(e){return _(c(e))};t.tagTextToTagUserGeneratedTag=e=>({".tag":"user_generated_tag",tag_text:e});t.isTextTag=e=>"user_generated_tag"===e[".tag"]||"suggested_tag"===e[".tag"];t.isSuggestedTag=e=>"suggested_tag"===e[".tag"];function E(){let e="";for(let t=0;t<32;t++){const t=Math.floor(10*Math.random());e+=String(t)}return e}t.isUserGeneratedTag=e=>"user_generated_tag"===e[".tag"],t.queryContainsTag=function(e,t){if(e.toLowerCase().replace(/,/g,"").split(" ").filter(e=>e.startsWith("#")).includes(`#${t}`))return!0;const s=e.toLowerCase().replace(/[.,\/!$%\^&\*;:{}=\-`~()]/g,"").split(" ").filter(e=>!e.startsWith("#")).join(" ").replace("_"," ").split(" "),r=t.split("_");return(0,i.intersection)(s,r).length>0},t.redirectToSearchByTag=function(e,t){r.redirect(o.buildSearchURL({user:e,searchPath:"/",normalizedQuery:`${d(t)}, `,typeaheadSessionId:E(),searchToken:o.getSearchCsrfToken(),qargs:{search_from:(0,n.deconstructUrl)().path}}).toString())},t.getTagsSuggestions=function(e,t){return a.default.filter(e,t,{extract:e=>e.tag_text}).map(e=>e.original).sort((e,t)=>e.tag_text.localeCompare(t.tag_text))};t.fileHasEditPermissions=e=>(!e.is_dir||!e.isDeleted)&&(e.target_ns?!e._mount_access_perms||!(!e._mount_access_perms||!e._mount_access_perms.includes("can_edit")):!e.read_only);function u(e){return(0,t.isUserGeneratedTag)(e)?e[".tag"]:(0,t.isSuggestedTag)(e)?e.classifier[".tag"]:"unknown"}t.textTagsToUserGeneratedTags=e=>e.map(t.tagTextToTagUserGeneratedTag),t.getTagType=u,t.getTagsInQuery=function(e,t){const s={},i=e.toLowerCase().replace(/,/g," ").split(" ").filter(e=>e.startsWith("#")).map(e=>l(e)),r=i.length;return i.forEach(e=>{var i;const r=t&&t.find(t=>e===t.tag_text),o=r?u(r):"unknown";s[o]=(null!==(i=s[o])&&void 0!==i?i:0)+1}),{numOfTags:r,typeOfTagToCount:s}}})),define("metaserver/static/js/clean/ui/selection",["require","exports","tslib","immutable"],(function(e,t,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSelection=t.Selection=void 0,i=s.__importStar(i);class r extends(i.Record({selected:null,anchor:null},"Selection")){}t.Selection=r,t.createSelection=function(e,t){return new r({selected:e?i.OrderedSet(e):i.OrderedSet(),anchor:t||(e?e[0]:null)})}})),define("metaserver/static/js/sharing/content_manager",["require","exports","tslib","metaserver/static/js/core/uri","js/filepath/filepath","metaserver/static/js/core/browser"],(function(e,t,s,i,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.goToContentManagerForPath=t.genContentManagerBridgeUri=void 0,o=s.__importStar(o);t.genContentManagerBridgeUri=function({containingFolder:e,filenameToSelect:t}){let s;return e=(0,r.normalize)(e)||"",t&&(s=[e,t].join("/")),new i.URI({path:`/team/admin/content/home${e}`,query:s?{select:s}:void 0})},t.goToContentManagerForPath=function(e){const s=(0,t.genContentManagerBridgeUri)(e);o.open_tab(s.toString())}})),define("typescript/component_libraries/flows/src/common/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})),define("typescript/dropbox/proto/js_init_data/browse_web/browse_web_pb",["require","exports","@bufbuild/protobuf","../login_form/login_form_pb"],(function(e,t,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowseWebPageProps=t.BrowseExperiments=t.ExperimentData=void 0;class r extends s.Message{constructor(e){super(),this.variant="",this.metadata={},s.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new r).fromBinary(e,t)}static fromJson(e,t){return(new r).fromJson(e,t)}static fromJsonString(e,t){return(new r).fromJsonString(e,t)}static equals(e,t){return s.proto3.util.equals(r,e,t)}}t.ExperimentData=r,r.runtime=s.proto3,r.typeName="browse_web.ExperimentData",r.fields=s.proto3.util.newFieldList(()=>[{no:1,name:"variant",kind:"scalar",T:9},{no:2,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}}]);class o extends s.Message{constructor(e){super(),this.goldenGateRaclsEnabled=!1,this.folderHistoryRollbacks=!1,this.lifeVault=!1,this.plusPlusEnabled=!1,this.browseWebHqlPilot=!1,this.browseColumnHeaderImprovements=!1,this.spacesFssModalVariant="",this.splitTmfTsd=!1,this.browseRowPerformance=!1,this.manualTagging="",this.browseCommitTokenBatch=!1,this.flowsAutomatedFolderUi=!1,this.flowsAutoTagUi=!1,this.browseContentSuggestionsVariant="",this.isTransferEnabled=!1,this.coreO21nInFolderActivationM2="",this.canUserDiscoverTeam=!1,this.teamDiscoveryTeamDbxId="",this.teamDiscoveryTeamName="",this.autoTaggingAwarenessVariant="",this.canUserInviteAfterReceivingShare=!1,this.inviteAfterReceivingShareSharingUserEmail="",this.inviteAfterReceivingShareSharingUserDisplayName="",this.inviteAfterReceivingShareSharingUserAccountPhotoUrl="",this.browseBoltClientLimitScope="",this.shouldShowGddMigrationBanners=!1,s.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new o).fromBinary(e,t)}static fromJson(e,t){return(new o).fromJson(e,t)}static fromJsonString(e,t){return(new o).fromJsonString(e,t)}static equals(e,t){return s.proto3.util.equals(o,e,t)}}t.BrowseExperiments=o,o.runtime=s.proto3,o.typeName="browse_web.BrowseExperiments",o.fields=s.proto3.util.newFieldList(()=>[{no:1,name:"golden_gate_racls_enabled",kind:"scalar",T:8},{no:3,name:"folder_history_rollbacks",kind:"scalar",T:8},{no:9,name:"life_vault",kind:"scalar",T:8},{no:14,name:"plus_plus_enabled",kind:"scalar",T:8},{no:15,name:"browse_web_hql_pilot",kind:"scalar",T:8},{no:22,name:"browse_column_header_improvements",kind:"scalar",T:8},{no:28,name:"spaces_fss_modal_variant",kind:"scalar",T:9},{no:30,name:"split_tmf_tsd",kind:"scalar",T:8},{no:36,name:"browse_row_performance",kind:"scalar",T:8},{no:41,name:"manual_tagging",kind:"scalar",T:9},{no:45,name:"browse_commit_token_batch",kind:"scalar",T:8},{no:46,name:"flows_automated_folder_ui",kind:"scalar",T:8},{no:47,name:"flows_auto_tag_ui",kind:"scalar",T:8},{no:48,name:"browse_content_suggestions_variant",kind:"scalar",T:9},{no:52,name:"is_transfer_enabled",kind:"scalar",T:8},{no:54,name:"core_o21n_in_folder_activation_m2",kind:"scalar",T:9},{no:55,name:"can_user_discover_team",kind:"scalar",T:8},{no:56,name:"team_discovery_team_dbx_id",kind:"scalar",T:9},{no:57,name:"team_discovery_team_name",kind:"scalar",T:9},{no:58,name:"auto_tagging_awareness_variant",kind:"scalar",T:9},{no:59,name:"can_user_invite_after_receiving_share",kind:"scalar",T:8},{no:60,name:"invite_after_receiving_share_sharing_user_email",kind:"scalar",T:9},{no:61,name:"invite_after_receiving_share_sharing_user_display_name",kind:"scalar",T:9},{no:62,name:"invite_after_receiving_share_sharing_user_account_photo_url",kind:"scalar",T:9},{no:67,name:"core_act_les_m2",kind:"message",T:r},{no:68,name:"browse_bolt_client_limit_scope",kind:"scalar",T:9},{no:69,name:"core_act_sf_pro_m2",kind:"message",T:r},{no:70,name:"should_show_gdd_migration_banners",kind:"scalar",T:8}]);class a extends s.Message{constructor(e){super(),this.autoTeamGroupId="",this.emailJustVerified=!1,this.emailJustVerifiedAndChanged=!1,this.fromSclSyncModal=!1,this.initFqPath="",this.nsId=s.protoInt64.zero,this.nsPath="",this.openPreview=!1,this.selectFqPaths=[],this.sendVerificationEmail=!1,this.shareLink=!1,this.sharePrefillEmail="",this.shouldShowDeletedFiles=!1,this.shouldShowUnsyncNotification=!1,this.shouldOpenExtensionsEduModal="",this.shouldOpenAppRecommendationsModal=!1,this.shouldOpenUploadModal=!1,this.showShareModal=!1,this.showShareSuccessSnackbar=!1,this.userId=s.protoInt64.zero,this.userVersionHistoryLength=0,this.webTimingLoggerServerContext="",this.showPlusPlusSetupModal=!1,this.isSmbPersonalization=!1,this.hasLinkedMobile=!1,this.fromCtl=!1,this.rootNsId=s.protoInt64.zero,this.hasLinkedDesktop=!1,s.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new a).fromBinary(e,t)}static fromJson(e,t){return(new a).fromJson(e,t)}static fromJsonString(e,t){return(new a).fromJsonString(e,t)}static equals(e,t){return s.proto3.util.equals(a,e,t)}}t.BrowseWebPageProps=a,a.runtime=s.proto3,a.typeName="browse_web.BrowseWebPageProps",a.fields=s.proto3.util.newFieldList(()=>[{no:1,name:"auto_team_group_id",kind:"scalar",T:9},{no:2,name:"email_just_verified",kind:"scalar",T:8},{no:3,name:"email_just_verified_and_changed",kind:"scalar",T:8},{no:4,name:"from_scl_sync_modal",kind:"scalar",T:8},{no:5,name:"init_fq_path",kind:"scalar",T:9},{no:6,name:"ns_id",kind:"scalar",T:3},{no:7,name:"ns_path",kind:"scalar",T:9},{no:8,name:"open_preview",kind:"scalar",T:8},{no:9,name:"select_fq_paths",kind:"scalar",T:9,repeated:!0},{no:10,name:"send_verification_email",kind:"scalar",T:8},{no:11,name:"share_link",kind:"scalar",T:8},{no:12,name:"share_prefill_email",kind:"scalar",T:9},{no:13,name:"should_show_deleted_files",kind:"scalar",T:8},{no:14,name:"should_show_unsync_notification",kind:"scalar",T:8},{no:15,name:"should_open_extensions_edu_modal",kind:"scalar",T:9},{no:16,name:"should_open_app_recommendations_modal",kind:"scalar",T:8},{no:17,name:"should_open_upload_modal",kind:"scalar",T:8},{no:18,name:"show_share_modal",kind:"scalar",T:8},{no:19,name:"show_share_success_snackbar",kind:"scalar",T:8},{no:22,name:"user_id",kind:"scalar",T:3},{no:23,name:"user_version_history_length",kind:"scalar",T:5},{no:24,name:"browse_experiments",kind:"message",T:o},{no:26,name:"web_timing_logger_server_context",kind:"scalar",T:9},{no:27,name:"show_plus_plus_setup_modal",kind:"scalar",T:8},{no:28,name:"is_smb_personalization",kind:"scalar",T:8},{no:29,name:"has_linked_mobile",kind:"scalar",T:8},{no:30,name:"encryption_options",kind:"message",T:i.EncryptionOptions},{no:31,name:"from_ctl",kind:"scalar",T:8},{no:32,name:"root_ns_id",kind:"scalar",T:3},{no:33,name:"has_linked_desktop",kind:"scalar",T:8}])})),define("metaserver/static/js/capture/redux/reducer",["require","exports","metaserver/static/js/capture/redux/types"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.captureReducer=t.defaultState=void 0,t.defaultState={recorderState:{active:!1},fileCaptureVoiceover:{}},t.captureReducer=function(e=t.defaultState,i){switch(i.type){case s.Actions.CloseRecorder:return e.recorderState.active?Object.assign(Object.assign({},e),{recorderState:{active:!1}}):e;case s.Actions.OpenRecorder:return e.recorderState.active?e:Object.assign(Object.assign({},e),{recorderState:Object.assign({active:!0},i.payload)});case s.Actions.SetCaptureAccess:return Object.assign(Object.assign({},e),{canAccessCapture:i.payload});case s.Actions.UploadResult:return Object.assign(Object.assign({},e),{uploadResult:i.payload});case s.Actions.SetCaptureFileVoiceover:return Object.assign(Object.assign({},e),{fileCaptureVoiceover:Object.assign(Object.assign({},e.fileCaptureVoiceover),i.payload)});default:return e}}})),define("metaserver/static/js/capture/redux/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Actions=void 0,(function(e){e.CloseRecorder="Capture/CloseRecorder",e.OpenRecorder="Capture/OpenRecorder",e.SetCaptureAccess="Capture/SetCaptureAccess",e.UploadResult="Capture/UploadResult",e.SetCaptureFileVoiceover="Capture/SetFileCaptureVoiceover"})(t.Actions||(t.Actions={}))})),define("typescript/component_libraries/flows/src/common/types_v2",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=pkg-browse-utils.min.js-vfl1cXpfS.map