define("metaserver/static/prod_assets_web_modules/dig-components/breadcrumb",["exports","../common/index","react","../common/index.esm5","../common/index.esm2","../common/index.esm7","../common/index.esm4","../common/index.esm8","../common/index.esm3","focus-visible","../resize-observer-polyfill","../common/index.esm6","../react-transition-group/CSSTransition","../common/extends","../common/Transition","react-dom","../common/index.esm9","../common/index.esm10","../@popperjs/core","../common/index.esm11","./click_outside"],(function(e,r,n,a,t,i,o,l,s,c,d,m,u,g,v,f,b,h,p,E,w){"use strict";var D=(function(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}})),r.default=e,Object.freeze(r)})(n),k=D.createContext({size:"standard",inverse:!1,updateSegment:()=>{}}),C=D.createContext(0),B={small:24,standard:32},N={small:18.875,standard:20.016},O="digBreadcrumbLink--hidden",y=e=>e.every(e=>!e.linkProps.children||0!==e.width),I=e=>e.current?e.current.getBoundingClientRect().width:0,x=(e,r,n)=>{let a=0;return y(e)?(e.forEach(e=>{a+=e.width}),0===a?0:(a+=(e.length-1)*N[n],r.length>0&&(a+=B[n]+N[n]),a)):0},L=e=>{const r=[];return D.Children.forEach(e,e=>{D.isValidElement(e)&&r.push({item:e,width:0,linkProps:{}})}),r},R=({availableWidth:e,breadcrumbSegments:r,size:n,isRootOverflow:a,alwaysShowRoot:t})=>{let i=r,o=[],l=x(i,o,n);if(0===l)return{inline:[],overflow:[]};if(i.length>4){const e=a?0:1,r=[...i.slice(e,i.length-4+e)];i=[...i.slice(0,e),...i.slice(i.length-4+e)],o=o.concat(r),l=x(i,o,n)}for(;;)if(e>l){if(4===i.length||0===o.length)break;let r=o.length-1;1!==i.length||a||(r=0);const t=o[r];if(1===o.length){if(t.width>e-(l-B[n]))break}else if(t.width+N[n]>e-l)break;i=1===i.length||a?[t,...i]:[...i.slice(0,1),t,...i.slice(1)],o=[...o.slice(0,r),...o.slice(r+1)],l=x(i,o,n)}else{const e=!a&&t?2:1;if(i.length<=e)break;let r=1;(2===i.length||a)&&(r=0);const s=i[r];i=[...i.slice(0,r),...i.slice(r+1)],o=0!==r||a?o.concat(s):[s].concat(o),l=x(i,o,n)}return{inline:i,overflow:o}},z=D.forwardRef(({id:e,className:n,children:i,withLeftIcon:o,withMenuItemIcon:l,isCurrentPath:s=!1,href:c,onClick:d,onDrop:m,onDragEnter:u,onDragOver:g,onDragLeave:v,_originalId:f="",...b},h)=>{const{size:p,updateSegment:E,inverse:w}=D.useContext(k),B=D.useContext(C),N=s?"span":"a",y=s?void 0:0,x="standard"===p?t.Title:t.Text,L=D.useRef(null),R=b["aria-label"],[z,S]=D.useState(!1),M=r.classNames106("dig-Breadcrumb-link",{"dig-Breadcrumb-link--current":s},{"dig-Breadcrumb-link--dragged-over":z&&!s},{"dig-Breadcrumb-link--inverse":w},n);D.useEffect(()=>{e&&e.startsWith(O)&&E(B,{id:e,children:i,withLeftIcon:o,withMenuItemIcon:l,href:c,onClick:d,onDrop:m,onDragEnter:u,onDragOver:g,onDragLeave:v,"aria-label":R,_originalId:f},I(L))},[e,i,o,l,c,d,m,u,g,v,B,E,L,R,f]);const P={onClick:d};if(!s)switch(typeof c){case"string":P.href=c;break;case"function":P.href="#",P.onClick=e=>{e.preventDefault(),c(e),d&&d(e)}}const T=D.useCallback(e=>{S(!0),g&&g(e)},[g]),_=D.useCallback(e=>{S(!0),u&&u(e)},[u]),j=D.useCallback(e=>{S(!1),v&&v(e)},[v]),H=D.useCallback(e=>{S(!1),m&&m(e)},[m]);return D.createElement(N,{id:e,className:M,tabIndex:y,ref:h,"aria-current":s?"page":void 0,...P,onDrop:H,onDragEnter:_,onDragOver:T,onDragLeave:j,...b},D.createElement(x,{size:"small",className:"dig-Breadcrumb-link-content",color:s?"standard":"faint",inverse:w},D.createElement("span",{ref:L,className:"dig-Breadcrumb-link-inner"},o&&D.createElement(a.UIIcon,{className:"dig-Breadcrumb-link-icon",src:o,size:p}),D.createElement("span",{className:"dig-Breadcrumb-link-text"},i))))});z.displayName="Link";var S=({className:e})=>{const{size:n,inverse:a}=D.useContext(k),i=r.classNames106("dig-Breadcrumb-divider",e);return D.createElement(t.Text,{className:i,size:n,inverse:a,color:"faint","aria-hidden":"true"},"/")};S.displayName="BreadcrumbDivider";var M=({className:e,onDragOver:n,onDragEnter:a,onDragLeave:t,onDrop:i,...o})=>{const[s,c]=D.useState(!1),d=r.classNames106({"dig-Breadcrumb-overlfow-item--dragged-over":s},e),m=D.useCallback(e=>{c(!0),n&&n(e)},[n]),u=D.useCallback(e=>{c(!0),a&&a(e)},[a]),g=D.useCallback(e=>{c(!1),t&&t(e)},[t]),v=D.useCallback(e=>{c(!1),i&&i(e)},[i]);return D.createElement(l.Menu.ActionItem,{tagName:"a",className:d,"aria-label":o["aria-label"],onDrop:v,onDragOver:m,onDragEnter:u,onDragLeave:g,role:"menuitem",...o})};M.displayName="BreadcrumbOverflowMenuItem";var P=({className:e,overflowItemsProps:n,overflowEventHandlers:t,...i})=>{const{size:c,inverse:d}=D.useContext(k),m=r.classNames106("dig-Breadcrumb-overflow",{"dig-Breadcrumb-overflow--inverse":d},e),u=D.useCallback((e,r)=>t?{onDragOver:t.onDragOverTrigger?t.onDragOverTrigger(e):void 0,onDragEnter:t.onDragEnterTrigger?t.onDragEnterTrigger(e):void 0,onDragLeave:t.onDragLeaveTrigger?t.onDragLeaveTrigger(r):void 0}:{},[t]),g=D.useCallback((e,r)=>t?{onDragOver:t.onDragOverContent?t.onDragOverContent(e):void 0,onDragEnter:t.onDragEnterContent?t.onDragEnterContent(e):void 0,onDragLeave:t.onDragLeaveContent?t.onDragLeaveContent(r):void 0}:{},[t]);return D.createElement(l.Menu.Wrapper,{className:m,onSelection:(e,r)=>{"function"==typeof e&&e(r)},inverse:d,shouldPropagateClickOutsideMouseEvents:!0},({getContentProps:e,getTriggerProps:r,openMenu:t,closeMenu:m})=>D.createElement(D.Fragment,null,D.createElement(o.IconButton,{variant:"transparent",className:"dig-Breadcrumb-overflow-button","data-testid":"digBreadcrumbOverflowButton",size:"small",inverse:d,...r(),...u(t,m),...i},D.createElement(a.UIIcon,{src:s.MoreHorizontalLine,size:c})),D.createElement(l.Menu.Content,{...e(),...g(t,m)},D.createElement(l.Menu.Segment,null,n.map((e,r)=>{const{id:n,children:t,withMenuItemIcon:i,href:o,onClick:l,onDragOver:s,onDragEnter:c,onDragLeave:d,onDrop:m}=e;return e&&D.createElement(M,{id:n,"aria-label":e["aria-label"],value:o,href:"string"==typeof o?o:void 0,onClick:l,onDragOver:s,onDragEnter:c,onDragLeave:d,onDrop:m,children:t,withLeftAccessory:i?D.createElement(a.UIIcon,{src:i}):void 0,key:`overflow-item-${r}`})})))))};P.displayName="BreadcrumbOverflow";var T=({segments:e,isRootOverflow:r,overflowEventHandlers:n})=>{const a=[];if(e.inline.forEach((n,t)=>{a.push(n.item),t!==e.inline.length-1&&(e.overflow.length>0&&!r&&0===t?a.push(D.createElement(S,{key:`divider-${t}`,className:"dig-Breadcrumb-divider--overflowLeft"})):a.push(D.createElement(S,{key:`divider-${t}`})))}),e.overflow.length>0){let t=2;(1===e.inline.length||r)&&(t=0),a.splice(t,0,D.createElement(S,{key:"divider--1",className:"dig-Breadcrumb-divider--overflowRight"})),a.splice(t,0,D.createElement(P,{overflowItemsProps:e.overflow.map(e=>e.linkProps),overflowEventHandlers:n,key:"overflow"}))}return D.createElement(D.Fragment,null,a)};T.displayName="BreadcrumbRenderer";var _=D.forwardRef(({className:e,children:n,size:a="standard",overflowEventHandlers:o,isRootOverflow:l=!1,alwaysShowRoot:s=!1,inverse:c=!1,...d},m)=>{const{nodeRef:u,observerEntry:g}=i.useResizeObserver(),[v,f]=D.useState(!0),[b,h]=D.useState(!0),[p,E]=D.useState([]),w=D.useRef(null),B=r.classNames106("dig-Breadcrumb",{"dig-Breadcrumb--small":"small"===a},{"dig-Breadcrumb--inverse":c},e),N={size:a,inverse:c,updateSegment:D.useCallback((e,r,n)=>{E(a=>a.map((a,t)=>t===e?{...a,width:Math.ceil(n),linkProps:{...r,id:r._originalId,_originalId:void 0}}:a))},[])},y="standard"===a?t.Title:t.Text;return D.useImperativeHandle(m,()=>{return e=w,{getBoundingClientRect:()=>e.current?e.current.getBoundingClientRect():new DOMRect};var e}),D.useEffect(()=>{document.fonts?document.fonts.ready.then(()=>{h(!1)}):h(!1)},[]),D.useEffect(()=>{f(!0)},[n]),D.useEffect(()=>{v&&(E(L(n)),f(!1))},[n,v]),D.createElement(k.Provider,{value:N},!v&&D.createElement(y,{size:"small",className:"dig-Breadcrumb--widthCalcUtil","aria-hidden":"true"},D.Children.map(n,(e,r)=>{if(D.isValidElement(e))return D.createElement(C.Provider,{value:r,key:`hidden-link-${r}`},D.cloneElement(e,{id:`${O}-${r}`,_originalId:e.props.id}))})),D.createElement("nav",{className:B,...d,ref:u},D.createElement("div",{className:"dig-Breadcrumb-inner",ref:w},!b&&D.createElement(T,{segments:R({availableWidth:g?g.contentRect.width:0,breadcrumbSegments:p,size:a,isRootOverflow:l,alwaysShowRoot:s}),isRootOverflow:l,overflowEventHandlers:o}))))});_.Link=z,_.displayName="Breadcrumb",e.Breadcrumb=_,e.Link=z,e.buildBreadcrumb=R,e.calcBreadcrumbWidth=x,e.calcItemWidth=I,e.initSegments=L,e.isAllUpdated=y,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=pkg-dig-l.min.js-vflfAf_T3.map