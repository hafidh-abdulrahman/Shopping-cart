define("typescript/libraries/file-viewer/src/ui/close_button",["require","exports","tslib","react","react-intl","dig-components/buttons","dig-components/icons","dig-components/icons/src","typescript/libraries/file-viewer/src/ui/ui.module.css"],(function(e,t,i,r,a,n,s,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CloseButton=void 0,r=i.__importStar(r);t.CloseButton=({className:e,onClick:t,isInverse:i=!0})=>{const c=(0,a.useIntl)();return r.createElement("span",{className:null!=e?e:l.close},r.createElement(n.IconButton,{onClick:t,variant:"transparent",inverse:i},r.createElement(s.UIIcon,{"aria-label":c.formatMessage({id:"R/Hjn0",defaultMessage:"Close"}),src:o.CloseLine})))},t.CloseButton.displayName="CloseButton",t.CloseButton.displayName="CloseButton"})),define("typescript/libraries/file-viewer/src/plugins/layers",["require","exports","tslib","react","react-dom"],(function(e,t,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PortalWrapper=t.PortalTargetProvider=void 0,r=i.__importStar(r),a=i.__importDefault(a);class n extends r.Component{constructor(){super(...arguments),this.portalContainer=document.createElement("div"),this.attachPortalContainer=e=>{null!=e?(e.childNodes.forEach(t=>e.removeChild(t)),e.appendChild(this.portalContainer)):null!=this.portalContainer.parentElement&&this.portalContainer.parentElement.removeChild(this.portalContainer)}}render(){const{children:e}=this.props;return r.createElement(r.Fragment,null,r.createElement("div",{ref:this.attachPortalContainer}),e(this.portalContainer))}}t.PortalTargetProvider=n,n.displayName="PortalTargetProvider";class s extends r.PureComponent{render(){const{children:e,element:t}=this.props;return a.default.createPortal(e,t)}}t.PortalWrapper=s,s.displayName="PortalWrapper"})),define("metaserver/static/js/dropbox/proto/pap_events/previews/cancel_edit_mode",["require","exports","tslib","protobufjs/minimal","metaserver/static/js/dropbox/proto/pap_events/predefined_event","metaserver/static/js/dropbox/proto/pap_events/event_enums"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;(r=i.__importStar(r)).Reader,r.Writer,r.util;const a=r.roots.default||(r.roots.default={});var n,s;t.default=a,t.pap_events=a.pap_events=((n=a.pap_events||{}).previews=((s=n.previews||{}).Cancel_EditMode=(function(e){function e(e){if(e)for(let t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.prototype.eventState=0,e.prototype.actionScreen="",e.prototype.fileType=0,e.prototype.fileSize=0,e.create=function(t){return new e(t)},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.previews.Cancel_EditMode"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PREVIEWS"]=0,t})(),e.FileType=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_FILE_TYPE"]=0,t[e[1]="DOCX_FILE_TYPE"]=1,t[e[2]="PDF_FILE_TYPE"]=2,t[e[3]="XLS_FILE_TYPE"]=3,t[e[4]="JPG_FILE_TYPE"]=4,t[e[5]="PNG_FILE_TYPE"]=5,t[e[6]="HEIC_FILE_TYPE"]=6,t[e[7]="MP4_FILE_TYPE"]=7,t[e[8]="MOV_FILE_TYPE"]=8,t[e[9]="TXT_FILE_TYPE"]=9,t[e[10]="MP3_FILE_TYPE"]=10,t[e[11]="M4A_FILE_TYPE"]=11,t[e[12]="WEBP_FILE_TYPE"]=12,t[e[13]="XLSX_FILE_TYPE"]=13,t[e[14]="PAGES_FILE_TYPE"]=14,t[e[15]="ZIP_FILE_TYPE"]=15,t[e[16]="GIF_FILE_TYPE"]=16,t[e[17]="URL_FILE_TYPE"]=17,t[e[18]="NUMBERS_FILE_TYPE"]=18,t[e[19]="WAV_FILE_TYPE"]=19,t[e[20]="EPUB_FILE_TYPE"]=20,t[e[21]="DNG_FILE_TYPE"]=21,t[e[22]="OPUS_FILE_TYPE"]=22,t[e[23]="CR2_FILE_TYPE"]=23,t[e[24]="ARW_FILE_TYPE"]=24,t[e[25]="PPTX_FILE_TYPE"]=25,t[e[26]="PSD_FILE_TYPE"]=26,t[e[27]="DOC_FILE_TYPE"]=27,t[e[28]="AMR_FILE_TYPE"]=28,t[e[29]="CSV_FILE_TYPE"]=29,t[e[30]="CLIP_FILE_TYPE"]=30,t[e[31]="NEF_FILE_TYPE"]=31,t[e[32]="KDBX_FILE_TYPE"]=32,t[e[33]="TIFF_FILE_TYPE"]=33,t[e[34]="SVG_FILE_TYPE"]=34,t[e[35]="APK_FILE_TYPE"]=35,t[e[36]="KEY_FILE_TYPE"]=36,t[e[37]="GPX_FILE_TYPE"]=37,t[e[38]="AAC_FILE_TYPE"]=38,t[e[39]="PROCREATE_FILE_TYPE"]=39,t[e[40]="WEBM_FILE_TYPE"]=40,t[e[41]="TORRENT_FILE_TYPE"]=41,t[e[42]="IPV_FILE_TYPE"]=42,t[e[43]="CR3_FILE_TYPE"]=43,t[e[44]="HTML_FILE_TYPE"]=44,t[e[45]="XML_FILE_TYPE"]=45,t[e[46]="VCF_FILE_TYPE"]=46,t[e[47]="RAR_FILE_TYPE"]=47,t[e[48]="PVT_FILE_TYPE"]=48,t[e[49]="ODT_FILE_TYPE"]=49,t[e[50]="MD_FILE_TYPE"]=50,t[e[51]="WEB_FILE_TYPE"]=51,t[e[52]="GSLIDES_FILE_TYPE"]=52,t[e[53]="GDOC_FILE_TYPE"]=53,t[e[54]="GSHEET_FILE_TYPE"]=54,t[e[55]="BINDER_FILE_TYPE"]=55,t[e[56]="PAPERT_FILE_TYPE"]=56,t[e[57]="PAPER_FILE_TYPE"]=57,t[e[58]="WEBSITE_FILE_TYPE"]=58,t[e[59]="JPEG_FILE_TYPE"]=59,t[e[60]="JSON_FILE_TYPE"]=60,t})(),e})(s.Cancel_EditMode||{}),s),n.EventState=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_EVENT_STATE"]=0,t[e[1]="START"]=1,t[e[2]="SUCCESS"]=2,t[e[3]="FAILED"]=3,t[e[4]="CANCELED"]=4,t})(),n)})),define("metaserver/static/js/dropbox/proto/pap_events/previews/create_folder",["require","exports","tslib","protobufjs/minimal","metaserver/static/js/dropbox/proto/pap_events/predefined_event","metaserver/static/js/dropbox/proto/pap_events/event_enums"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;(r=i.__importStar(r)).Reader,r.Writer,r.util;const a=r.roots.default||(r.roots.default={});var n,s;t.default=a,t.pap_events=a.pap_events=((n=a.pap_events||{}).previews=((s=n.previews||{}).Create_Folder=(function(e){function e(e){if(e)for(let t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.prototype.eventState=0,e.prototype.actionScreen="",e.prototype.fileType=0,e.prototype.fileSize=0,e.create=function(t){return new e(t)},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.previews.Create_Folder"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PREVIEWS"]=0,t})(),e.FileType=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_FILE_TYPE"]=0,t[e[1]="DOCX_FILE_TYPE"]=1,t[e[2]="PDF_FILE_TYPE"]=2,t[e[3]="XLS_FILE_TYPE"]=3,t[e[4]="JPG_FILE_TYPE"]=4,t[e[5]="PNG_FILE_TYPE"]=5,t[e[6]="HEIC_FILE_TYPE"]=6,t[e[7]="MP4_FILE_TYPE"]=7,t[e[8]="MOV_FILE_TYPE"]=8,t[e[9]="TXT_FILE_TYPE"]=9,t[e[10]="MP3_FILE_TYPE"]=10,t[e[11]="M4A_FILE_TYPE"]=11,t[e[12]="WEBP_FILE_TYPE"]=12,t[e[13]="XLSX_FILE_TYPE"]=13,t[e[14]="PAGES_FILE_TYPE"]=14,t[e[15]="ZIP_FILE_TYPE"]=15,t[e[16]="GIF_FILE_TYPE"]=16,t[e[17]="URL_FILE_TYPE"]=17,t[e[18]="NUMBERS_FILE_TYPE"]=18,t[e[19]="WAV_FILE_TYPE"]=19,t[e[20]="EPUB_FILE_TYPE"]=20,t[e[21]="DNG_FILE_TYPE"]=21,t[e[22]="OPUS_FILE_TYPE"]=22,t[e[23]="CR2_FILE_TYPE"]=23,t[e[24]="ARW_FILE_TYPE"]=24,t[e[25]="PPTX_FILE_TYPE"]=25,t[e[26]="PSD_FILE_TYPE"]=26,t[e[27]="DOC_FILE_TYPE"]=27,t[e[28]="AMR_FILE_TYPE"]=28,t[e[29]="CSV_FILE_TYPE"]=29,t[e[30]="CLIP_FILE_TYPE"]=30,t[e[31]="NEF_FILE_TYPE"]=31,t[e[32]="KDBX_FILE_TYPE"]=32,t[e[33]="TIFF_FILE_TYPE"]=33,t[e[34]="SVG_FILE_TYPE"]=34,t[e[35]="APK_FILE_TYPE"]=35,t[e[36]="KEY_FILE_TYPE"]=36,t[e[37]="GPX_FILE_TYPE"]=37,t[e[38]="AAC_FILE_TYPE"]=38,t[e[39]="PROCREATE_FILE_TYPE"]=39,t[e[40]="WEBM_FILE_TYPE"]=40,t[e[41]="TORRENT_FILE_TYPE"]=41,t[e[42]="IPV_FILE_TYPE"]=42,t[e[43]="CR3_FILE_TYPE"]=43,t[e[44]="HTML_FILE_TYPE"]=44,t[e[45]="XML_FILE_TYPE"]=45,t[e[46]="VCF_FILE_TYPE"]=46,t[e[47]="RAR_FILE_TYPE"]=47,t[e[48]="PVT_FILE_TYPE"]=48,t[e[49]="ODT_FILE_TYPE"]=49,t[e[50]="MD_FILE_TYPE"]=50,t[e[51]="WEB_FILE_TYPE"]=51,t[e[52]="GSLIDES_FILE_TYPE"]=52,t[e[53]="GDOC_FILE_TYPE"]=53,t[e[54]="GSHEET_FILE_TYPE"]=54,t[e[55]="BINDER_FILE_TYPE"]=55,t[e[56]="PAPERT_FILE_TYPE"]=56,t[e[57]="PAPER_FILE_TYPE"]=57,t[e[58]="WEBSITE_FILE_TYPE"]=58,t[e[59]="JPEG_FILE_TYPE"]=59,t[e[60]="JSON_FILE_TYPE"]=60,t})(),e})(s.Create_Folder||{}),s),n.EventState=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_EVENT_STATE"]=0,t[e[1]="START"]=1,t[e[2]="SUCCESS"]=2,t[e[3]="FAILED"]=3,t[e[4]="CANCELED"]=4,t})(),n)})),define("metaserver/static/js/dropbox/proto/pap_events/previews/save_edit_mode",["require","exports","tslib","protobufjs/minimal","metaserver/static/js/dropbox/proto/pap_events/predefined_event","metaserver/static/js/dropbox/proto/pap_events/event_enums"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;(r=i.__importStar(r)).Reader,r.Writer,r.util;const a=r.roots.default||(r.roots.default={});var n,s;t.default=a,t.pap_events=a.pap_events=((n=a.pap_events||{}).previews=((s=n.previews||{}).Save_EditMode=(function(e){function e(e){if(e)for(let t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.prototype.eventState=0,e.prototype.actionScreen="",e.prototype.fileType=0,e.prototype.fileSize=0,e.prototype.actionElement="",e.create=function(t){return new e(t)},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.previews.Save_EditMode"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PREVIEWS"]=0,t})(),e.FileType=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_FILE_TYPE"]=0,t[e[1]="DOCX_FILE_TYPE"]=1,t[e[2]="PDF_FILE_TYPE"]=2,t[e[3]="XLS_FILE_TYPE"]=3,t[e[4]="JPG_FILE_TYPE"]=4,t[e[5]="PNG_FILE_TYPE"]=5,t[e[6]="HEIC_FILE_TYPE"]=6,t[e[7]="MP4_FILE_TYPE"]=7,t[e[8]="MOV_FILE_TYPE"]=8,t[e[9]="TXT_FILE_TYPE"]=9,t[e[10]="MP3_FILE_TYPE"]=10,t[e[11]="M4A_FILE_TYPE"]=11,t[e[12]="WEBP_FILE_TYPE"]=12,t[e[13]="XLSX_FILE_TYPE"]=13,t[e[14]="PAGES_FILE_TYPE"]=14,t[e[15]="ZIP_FILE_TYPE"]=15,t[e[16]="GIF_FILE_TYPE"]=16,t[e[17]="URL_FILE_TYPE"]=17,t[e[18]="NUMBERS_FILE_TYPE"]=18,t[e[19]="WAV_FILE_TYPE"]=19,t[e[20]="EPUB_FILE_TYPE"]=20,t[e[21]="DNG_FILE_TYPE"]=21,t[e[22]="OPUS_FILE_TYPE"]=22,t[e[23]="CR2_FILE_TYPE"]=23,t[e[24]="ARW_FILE_TYPE"]=24,t[e[25]="PPTX_FILE_TYPE"]=25,t[e[26]="PSD_FILE_TYPE"]=26,t[e[27]="DOC_FILE_TYPE"]=27,t[e[28]="AMR_FILE_TYPE"]=28,t[e[29]="CSV_FILE_TYPE"]=29,t[e[30]="CLIP_FILE_TYPE"]=30,t[e[31]="NEF_FILE_TYPE"]=31,t[e[32]="KDBX_FILE_TYPE"]=32,t[e[33]="TIFF_FILE_TYPE"]=33,t[e[34]="SVG_FILE_TYPE"]=34,t[e[35]="APK_FILE_TYPE"]=35,t[e[36]="KEY_FILE_TYPE"]=36,t[e[37]="GPX_FILE_TYPE"]=37,t[e[38]="AAC_FILE_TYPE"]=38,t[e[39]="PROCREATE_FILE_TYPE"]=39,t[e[40]="WEBM_FILE_TYPE"]=40,t[e[41]="TORRENT_FILE_TYPE"]=41,t[e[42]="IPV_FILE_TYPE"]=42,t[e[43]="CR3_FILE_TYPE"]=43,t[e[44]="HTML_FILE_TYPE"]=44,t[e[45]="XML_FILE_TYPE"]=45,t[e[46]="VCF_FILE_TYPE"]=46,t[e[47]="RAR_FILE_TYPE"]=47,t[e[48]="PVT_FILE_TYPE"]=48,t[e[49]="ODT_FILE_TYPE"]=49,t[e[50]="MD_FILE_TYPE"]=50,t[e[51]="WEB_FILE_TYPE"]=51,t[e[52]="GSLIDES_FILE_TYPE"]=52,t[e[53]="GDOC_FILE_TYPE"]=53,t[e[54]="GSHEET_FILE_TYPE"]=54,t[e[55]="BINDER_FILE_TYPE"]=55,t[e[56]="PAPERT_FILE_TYPE"]=56,t[e[57]="PAPER_FILE_TYPE"]=57,t[e[58]="WEBSITE_FILE_TYPE"]=58,t[e[59]="JPEG_FILE_TYPE"]=59,t[e[60]="JSON_FILE_TYPE"]=60,t})(),e})(s.Save_EditMode||{}),s),n.EventState=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_EVENT_STATE"]=0,t[e[1]="START"]=1,t[e[2]="SUCCESS"]=2,t[e[3]="FAILED"]=3,t[e[4]="CANCELED"]=4,t})(),n)})),define("metaserver/static/js/dropbox/proto/pap_events/previews/undo_change",["require","exports","tslib","protobufjs/minimal","metaserver/static/js/dropbox/proto/pap_events/predefined_event"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;(r=i.__importStar(r)).Reader,r.Writer,r.util;const a=r.roots.default||(r.roots.default={});var n,s;t.default=a,t.pap_events=a.pap_events=((n=a.pap_events||{}).previews=((s=n.previews||{}).Undo_Change=(function(e){function e(e){if(e)for(let t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.prototype.actionScreen="",e.prototype.fileType=0,e.prototype.fileSize=0,e.create=function(t){return new e(t)},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.previews.Undo_Change"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PREVIEWS"]=0,t})(),e.FileType=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_FILE_TYPE"]=0,t[e[1]="DOCX_FILE_TYPE"]=1,t[e[2]="PDF_FILE_TYPE"]=2,t[e[3]="XLS_FILE_TYPE"]=3,t[e[4]="JPG_FILE_TYPE"]=4,t[e[5]="PNG_FILE_TYPE"]=5,t[e[6]="HEIC_FILE_TYPE"]=6,t[e[7]="MP4_FILE_TYPE"]=7,t[e[8]="MOV_FILE_TYPE"]=8,t[e[9]="TXT_FILE_TYPE"]=9,t[e[10]="MP3_FILE_TYPE"]=10,t[e[11]="M4A_FILE_TYPE"]=11,t[e[12]="WEBP_FILE_TYPE"]=12,t[e[13]="XLSX_FILE_TYPE"]=13,t[e[14]="PAGES_FILE_TYPE"]=14,t[e[15]="ZIP_FILE_TYPE"]=15,t[e[16]="GIF_FILE_TYPE"]=16,t[e[17]="URL_FILE_TYPE"]=17,t[e[18]="NUMBERS_FILE_TYPE"]=18,t[e[19]="WAV_FILE_TYPE"]=19,t[e[20]="EPUB_FILE_TYPE"]=20,t[e[21]="DNG_FILE_TYPE"]=21,t[e[22]="OPUS_FILE_TYPE"]=22,t[e[23]="CR2_FILE_TYPE"]=23,t[e[24]="ARW_FILE_TYPE"]=24,t[e[25]="PPTX_FILE_TYPE"]=25,t[e[26]="PSD_FILE_TYPE"]=26,t[e[27]="DOC_FILE_TYPE"]=27,t[e[28]="AMR_FILE_TYPE"]=28,t[e[29]="CSV_FILE_TYPE"]=29,t[e[30]="CLIP_FILE_TYPE"]=30,t[e[31]="NEF_FILE_TYPE"]=31,t[e[32]="KDBX_FILE_TYPE"]=32,t[e[33]="TIFF_FILE_TYPE"]=33,t[e[34]="SVG_FILE_TYPE"]=34,t[e[35]="APK_FILE_TYPE"]=35,t[e[36]="KEY_FILE_TYPE"]=36,t[e[37]="GPX_FILE_TYPE"]=37,t[e[38]="AAC_FILE_TYPE"]=38,t[e[39]="PROCREATE_FILE_TYPE"]=39,t[e[40]="WEBM_FILE_TYPE"]=40,t[e[41]="TORRENT_FILE_TYPE"]=41,t[e[42]="IPV_FILE_TYPE"]=42,t[e[43]="CR3_FILE_TYPE"]=43,t[e[44]="HTML_FILE_TYPE"]=44,t[e[45]="XML_FILE_TYPE"]=45,t[e[46]="VCF_FILE_TYPE"]=46,t[e[47]="RAR_FILE_TYPE"]=47,t[e[48]="PVT_FILE_TYPE"]=48,t[e[49]="ODT_FILE_TYPE"]=49,t[e[50]="MD_FILE_TYPE"]=50,t[e[51]="WEB_FILE_TYPE"]=51,t[e[52]="GSLIDES_FILE_TYPE"]=52,t[e[53]="GDOC_FILE_TYPE"]=53,t[e[54]="GSHEET_FILE_TYPE"]=54,t[e[55]="BINDER_FILE_TYPE"]=55,t[e[56]="PAPERT_FILE_TYPE"]=56,t[e[57]="PAPER_FILE_TYPE"]=57,t[e[58]="WEBSITE_FILE_TYPE"]=58,t[e[59]="JPEG_FILE_TYPE"]=59,t[e[60]="JSON_FILE_TYPE"]=60,t})(),e})(s.Undo_Change||{}),s),n)})),define("metaserver/static/js/dropbox/proto/pap_events/previews/close_fullscreen",["require","exports","tslib","protobufjs/minimal","metaserver/static/js/dropbox/proto/pap_events/predefined_event"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;(r=i.__importStar(r)).Reader,r.Writer,r.util;const a=r.roots.default||(r.roots.default={});var n,s;t.default=a,t.pap_events=a.pap_events=((n=a.pap_events||{}).previews=((s=n.previews||{}).Close_Fullscreen=(function(e){function e(e){if(e)for(let t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.prototype.actionScreen="",e.prototype.fileType=0,e.prototype.fileSize=0,e.create=function(t){return new e(t)},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.previews.Close_Fullscreen"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PREVIEWS"]=0,t})(),e.FileType=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_FILE_TYPE"]=0,t[e[1]="DOCX_FILE_TYPE"]=1,t[e[2]="PDF_FILE_TYPE"]=2,t[e[3]="XLS_FILE_TYPE"]=3,t[e[4]="JPG_FILE_TYPE"]=4,t[e[5]="PNG_FILE_TYPE"]=5,t[e[6]="HEIC_FILE_TYPE"]=6,t[e[7]="MP4_FILE_TYPE"]=7,t[e[8]="MOV_FILE_TYPE"]=8,t[e[9]="TXT_FILE_TYPE"]=9,t[e[10]="MP3_FILE_TYPE"]=10,t[e[11]="M4A_FILE_TYPE"]=11,t[e[12]="WEBP_FILE_TYPE"]=12,t[e[13]="XLSX_FILE_TYPE"]=13,t[e[14]="PAGES_FILE_TYPE"]=14,t[e[15]="ZIP_FILE_TYPE"]=15,t[e[16]="GIF_FILE_TYPE"]=16,t[e[17]="URL_FILE_TYPE"]=17,t[e[18]="NUMBERS_FILE_TYPE"]=18,t[e[19]="WAV_FILE_TYPE"]=19,t[e[20]="EPUB_FILE_TYPE"]=20,t[e[21]="DNG_FILE_TYPE"]=21,t[e[22]="OPUS_FILE_TYPE"]=22,t[e[23]="CR2_FILE_TYPE"]=23,t[e[24]="ARW_FILE_TYPE"]=24,t[e[25]="PPTX_FILE_TYPE"]=25,t[e[26]="PSD_FILE_TYPE"]=26,t[e[27]="DOC_FILE_TYPE"]=27,t[e[28]="AMR_FILE_TYPE"]=28,t[e[29]="CSV_FILE_TYPE"]=29,t[e[30]="CLIP_FILE_TYPE"]=30,t[e[31]="NEF_FILE_TYPE"]=31,t[e[32]="KDBX_FILE_TYPE"]=32,t[e[33]="TIFF_FILE_TYPE"]=33,t[e[34]="SVG_FILE_TYPE"]=34,t[e[35]="APK_FILE_TYPE"]=35,t[e[36]="KEY_FILE_TYPE"]=36,t[e[37]="GPX_FILE_TYPE"]=37,t[e[38]="AAC_FILE_TYPE"]=38,t[e[39]="PROCREATE_FILE_TYPE"]=39,t[e[40]="WEBM_FILE_TYPE"]=40,t[e[41]="TORRENT_FILE_TYPE"]=41,t[e[42]="IPV_FILE_TYPE"]=42,t[e[43]="CR3_FILE_TYPE"]=43,t[e[44]="HTML_FILE_TYPE"]=44,t[e[45]="XML_FILE_TYPE"]=45,t[e[46]="VCF_FILE_TYPE"]=46,t[e[47]="RAR_FILE_TYPE"]=47,t[e[48]="PVT_FILE_TYPE"]=48,t[e[49]="ODT_FILE_TYPE"]=49,t[e[50]="MD_FILE_TYPE"]=50,t[e[51]="WEB_FILE_TYPE"]=51,t[e[52]="GSLIDES_FILE_TYPE"]=52,t[e[53]="GDOC_FILE_TYPE"]=53,t[e[54]="GSHEET_FILE_TYPE"]=54,t[e[55]="BINDER_FILE_TYPE"]=55,t[e[56]="PAPERT_FILE_TYPE"]=56,t[e[57]="PAPER_FILE_TYPE"]=57,t[e[58]="WEBSITE_FILE_TYPE"]=58,t[e[59]="JPEG_FILE_TYPE"]=59,t[e[60]="JSON_FILE_TYPE"]=60,t})(),e})(s.Close_Fullscreen||{}),s),n)})),define("metaserver/static/js/dropbox/proto/pap_events/previews/close_sidebar",["require","exports","tslib","protobufjs/minimal","metaserver/static/js/dropbox/proto/pap_events/predefined_event","metaserver/static/js/dropbox/proto/pap_events/event_enums"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;(r=i.__importStar(r)).Reader,r.Writer,r.util;const a=r.roots.default||(r.roots.default={});var n,s;t.default=a,t.pap_events=a.pap_events=((n=a.pap_events||{}).previews=((s=n.previews||{}).Close_Sidebar=(function(e){function e(e){if(e)for(let t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.prototype.eventState=0,e.prototype.actionScreen="",e.prototype.fileType=0,e.prototype.fileSize=0,e.create=function(t){return new e(t)},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.previews.Close_Sidebar"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PREVIEWS"]=0,t})(),e.FileType=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_FILE_TYPE"]=0,t[e[1]="DOCX_FILE_TYPE"]=1,t[e[2]="PDF_FILE_TYPE"]=2,t[e[3]="XLS_FILE_TYPE"]=3,t[e[4]="JPG_FILE_TYPE"]=4,t[e[5]="PNG_FILE_TYPE"]=5,t[e[6]="HEIC_FILE_TYPE"]=6,t[e[7]="MP4_FILE_TYPE"]=7,t[e[8]="MOV_FILE_TYPE"]=8,t[e[9]="TXT_FILE_TYPE"]=9,t[e[10]="MP3_FILE_TYPE"]=10,t[e[11]="M4A_FILE_TYPE"]=11,t[e[12]="WEBP_FILE_TYPE"]=12,t[e[13]="XLSX_FILE_TYPE"]=13,t[e[14]="PAGES_FILE_TYPE"]=14,t[e[15]="ZIP_FILE_TYPE"]=15,t[e[16]="GIF_FILE_TYPE"]=16,t[e[17]="URL_FILE_TYPE"]=17,t[e[18]="NUMBERS_FILE_TYPE"]=18,t[e[19]="WAV_FILE_TYPE"]=19,t[e[20]="EPUB_FILE_TYPE"]=20,t[e[21]="DNG_FILE_TYPE"]=21,t[e[22]="OPUS_FILE_TYPE"]=22,t[e[23]="CR2_FILE_TYPE"]=23,t[e[24]="ARW_FILE_TYPE"]=24,t[e[25]="PPTX_FILE_TYPE"]=25,t[e[26]="PSD_FILE_TYPE"]=26,t[e[27]="DOC_FILE_TYPE"]=27,t[e[28]="AMR_FILE_TYPE"]=28,t[e[29]="CSV_FILE_TYPE"]=29,t[e[30]="CLIP_FILE_TYPE"]=30,t[e[31]="NEF_FILE_TYPE"]=31,t[e[32]="KDBX_FILE_TYPE"]=32,t[e[33]="TIFF_FILE_TYPE"]=33,t[e[34]="SVG_FILE_TYPE"]=34,t[e[35]="APK_FILE_TYPE"]=35,t[e[36]="KEY_FILE_TYPE"]=36,t[e[37]="GPX_FILE_TYPE"]=37,t[e[38]="AAC_FILE_TYPE"]=38,t[e[39]="PROCREATE_FILE_TYPE"]=39,t[e[40]="WEBM_FILE_TYPE"]=40,t[e[41]="TORRENT_FILE_TYPE"]=41,t[e[42]="IPV_FILE_TYPE"]=42,t[e[43]="CR3_FILE_TYPE"]=43,t[e[44]="HTML_FILE_TYPE"]=44,t[e[45]="XML_FILE_TYPE"]=45,t[e[46]="VCF_FILE_TYPE"]=46,t[e[47]="RAR_FILE_TYPE"]=47,t[e[48]="PVT_FILE_TYPE"]=48,t[e[49]="ODT_FILE_TYPE"]=49,t[e[50]="MD_FILE_TYPE"]=50,t[e[51]="WEB_FILE_TYPE"]=51,t[e[52]="GSLIDES_FILE_TYPE"]=52,t[e[53]="GDOC_FILE_TYPE"]=53,t[e[54]="GSHEET_FILE_TYPE"]=54,t[e[55]="BINDER_FILE_TYPE"]=55,t[e[56]="PAPERT_FILE_TYPE"]=56,t[e[57]="PAPER_FILE_TYPE"]=57,t[e[58]="WEBSITE_FILE_TYPE"]=58,t[e[59]="JPEG_FILE_TYPE"]=59,t[e[60]="JSON_FILE_TYPE"]=60,t})(),e})(s.Close_Sidebar||{}),s),n.EventState=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_EVENT_STATE"]=0,t[e[1]="START"]=1,t[e[2]="SUCCESS"]=2,t[e[3]="FAILED"]=3,t[e[4]="CANCELED"]=4,t})(),n)})),define("metaserver/static/js/dropbox/proto/pap_events/previews/open_fullscreen",["require","exports","tslib","protobufjs/minimal","metaserver/static/js/dropbox/proto/pap_events/predefined_event"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;(r=i.__importStar(r)).Reader,r.Writer,r.util;const a=r.roots.default||(r.roots.default={});var n,s;t.default=a,t.pap_events=a.pap_events=((n=a.pap_events||{}).previews=((s=n.previews||{}).Open_Fullscreen=(function(e){function e(e){if(e)for(let t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.prototype.actionScreen="",e.prototype.fileType=0,e.prototype.fileSize=0,e.create=function(t){return new e(t)},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.previews.Open_Fullscreen"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PREVIEWS"]=0,t})(),e.FileType=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_FILE_TYPE"]=0,t[e[1]="DOCX_FILE_TYPE"]=1,t[e[2]="PDF_FILE_TYPE"]=2,t[e[3]="XLS_FILE_TYPE"]=3,t[e[4]="JPG_FILE_TYPE"]=4,t[e[5]="PNG_FILE_TYPE"]=5,t[e[6]="HEIC_FILE_TYPE"]=6,t[e[7]="MP4_FILE_TYPE"]=7,t[e[8]="MOV_FILE_TYPE"]=8,t[e[9]="TXT_FILE_TYPE"]=9,t[e[10]="MP3_FILE_TYPE"]=10,t[e[11]="M4A_FILE_TYPE"]=11,t[e[12]="WEBP_FILE_TYPE"]=12,t[e[13]="XLSX_FILE_TYPE"]=13,t[e[14]="PAGES_FILE_TYPE"]=14,t[e[15]="ZIP_FILE_TYPE"]=15,t[e[16]="GIF_FILE_TYPE"]=16,t[e[17]="URL_FILE_TYPE"]=17,t[e[18]="NUMBERS_FILE_TYPE"]=18,t[e[19]="WAV_FILE_TYPE"]=19,t[e[20]="EPUB_FILE_TYPE"]=20,t[e[21]="DNG_FILE_TYPE"]=21,t[e[22]="OPUS_FILE_TYPE"]=22,t[e[23]="CR2_FILE_TYPE"]=23,t[e[24]="ARW_FILE_TYPE"]=24,t[e[25]="PPTX_FILE_TYPE"]=25,t[e[26]="PSD_FILE_TYPE"]=26,t[e[27]="DOC_FILE_TYPE"]=27,t[e[28]="AMR_FILE_TYPE"]=28,t[e[29]="CSV_FILE_TYPE"]=29,t[e[30]="CLIP_FILE_TYPE"]=30,t[e[31]="NEF_FILE_TYPE"]=31,t[e[32]="KDBX_FILE_TYPE"]=32,t[e[33]="TIFF_FILE_TYPE"]=33,t[e[34]="SVG_FILE_TYPE"]=34,t[e[35]="APK_FILE_TYPE"]=35,t[e[36]="KEY_FILE_TYPE"]=36,t[e[37]="GPX_FILE_TYPE"]=37,t[e[38]="AAC_FILE_TYPE"]=38,t[e[39]="PROCREATE_FILE_TYPE"]=39,t[e[40]="WEBM_FILE_TYPE"]=40,t[e[41]="TORRENT_FILE_TYPE"]=41,t[e[42]="IPV_FILE_TYPE"]=42,t[e[43]="CR3_FILE_TYPE"]=43,t[e[44]="HTML_FILE_TYPE"]=44,t[e[45]="XML_FILE_TYPE"]=45,t[e[46]="VCF_FILE_TYPE"]=46,t[e[47]="RAR_FILE_TYPE"]=47,t[e[48]="PVT_FILE_TYPE"]=48,t[e[49]="ODT_FILE_TYPE"]=49,t[e[50]="MD_FILE_TYPE"]=50,t[e[51]="WEB_FILE_TYPE"]=51,t[e[52]="GSLIDES_FILE_TYPE"]=52,t[e[53]="GDOC_FILE_TYPE"]=53,t[e[54]="GSHEET_FILE_TYPE"]=54,t[e[55]="BINDER_FILE_TYPE"]=55,t[e[56]="PAPERT_FILE_TYPE"]=56,t[e[57]="PAPER_FILE_TYPE"]=57,t[e[58]="WEBSITE_FILE_TYPE"]=58,t[e[59]="JPEG_FILE_TYPE"]=59,t[e[60]="JSON_FILE_TYPE"]=60,t})(),e})(s.Open_Fullscreen||{}),s),n)})),define("metaserver/static/js/dropbox/proto/pap_events/previews/open_search_box",["require","exports","tslib","protobufjs/minimal","metaserver/static/js/dropbox/proto/pap_events/predefined_event","metaserver/static/js/dropbox/proto/pap_events/event_enums"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;(r=i.__importStar(r)).Reader,r.Writer,r.util;const a=r.roots.default||(r.roots.default={});var n,s;t.default=a,t.pap_events=a.pap_events=((n=a.pap_events||{}).previews=((s=n.previews||{}).Open_SearchBox=(function(e){function e(e){if(e)for(let t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.prototype.eventState=0,e.prototype.actionScreen="",e.prototype.fileType=0,e.prototype.fileSize=0,e.create=function(t){return new e(t)},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.previews.Open_SearchBox"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PREVIEWS"]=0,t})(),e.FileType=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_FILE_TYPE"]=0,t[e[1]="DOCX_FILE_TYPE"]=1,t[e[2]="PDF_FILE_TYPE"]=2,t[e[3]="XLS_FILE_TYPE"]=3,t[e[4]="JPG_FILE_TYPE"]=4,t[e[5]="PNG_FILE_TYPE"]=5,t[e[6]="HEIC_FILE_TYPE"]=6,t[e[7]="MP4_FILE_TYPE"]=7,t[e[8]="MOV_FILE_TYPE"]=8,t[e[9]="TXT_FILE_TYPE"]=9,t[e[10]="MP3_FILE_TYPE"]=10,t[e[11]="M4A_FILE_TYPE"]=11,t[e[12]="WEBP_FILE_TYPE"]=12,t[e[13]="XLSX_FILE_TYPE"]=13,t[e[14]="PAGES_FILE_TYPE"]=14,t[e[15]="ZIP_FILE_TYPE"]=15,t[e[16]="GIF_FILE_TYPE"]=16,t[e[17]="URL_FILE_TYPE"]=17,t[e[18]="NUMBERS_FILE_TYPE"]=18,t[e[19]="WAV_FILE_TYPE"]=19,t[e[20]="EPUB_FILE_TYPE"]=20,t[e[21]="DNG_FILE_TYPE"]=21,t[e[22]="OPUS_FILE_TYPE"]=22,t[e[23]="CR2_FILE_TYPE"]=23,t[e[24]="ARW_FILE_TYPE"]=24,t[e[25]="PPTX_FILE_TYPE"]=25,t[e[26]="PSD_FILE_TYPE"]=26,t[e[27]="DOC_FILE_TYPE"]=27,t[e[28]="AMR_FILE_TYPE"]=28,t[e[29]="CSV_FILE_TYPE"]=29,t[e[30]="CLIP_FILE_TYPE"]=30,t[e[31]="NEF_FILE_TYPE"]=31,t[e[32]="KDBX_FILE_TYPE"]=32,t[e[33]="TIFF_FILE_TYPE"]=33,t[e[34]="SVG_FILE_TYPE"]=34,t[e[35]="APK_FILE_TYPE"]=35,t[e[36]="KEY_FILE_TYPE"]=36,t[e[37]="GPX_FILE_TYPE"]=37,t[e[38]="AAC_FILE_TYPE"]=38,t[e[39]="PROCREATE_FILE_TYPE"]=39,t[e[40]="WEBM_FILE_TYPE"]=40,t[e[41]="TORRENT_FILE_TYPE"]=41,t[e[42]="IPV_FILE_TYPE"]=42,t[e[43]="CR3_FILE_TYPE"]=43,t[e[44]="HTML_FILE_TYPE"]=44,t[e[45]="XML_FILE_TYPE"]=45,t[e[46]="VCF_FILE_TYPE"]=46,t[e[47]="RAR_FILE_TYPE"]=47,t[e[48]="PVT_FILE_TYPE"]=48,t[e[49]="ODT_FILE_TYPE"]=49,t[e[50]="MD_FILE_TYPE"]=50,t[e[51]="WEB_FILE_TYPE"]=51,t[e[52]="GSLIDES_FILE_TYPE"]=52,t[e[53]="GDOC_FILE_TYPE"]=53,t[e[54]="GSHEET_FILE_TYPE"]=54,t[e[55]="BINDER_FILE_TYPE"]=55,t[e[56]="PAPERT_FILE_TYPE"]=56,t[e[57]="PAPER_FILE_TYPE"]=57,t[e[58]="WEBSITE_FILE_TYPE"]=58,t[e[59]="JPEG_FILE_TYPE"]=59,t[e[60]="JSON_FILE_TYPE"]=60,t})(),e})(s.Open_SearchBox||{}),s),n.EventState=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_EVENT_STATE"]=0,t[e[1]="START"]=1,t[e[2]="SUCCESS"]=2,t[e[3]="FAILED"]=3,t[e[4]="CANCELED"]=4,t})(),n)})),define("metaserver/static/js/dropbox/proto/pap_events/previews/open_sidebar",["require","exports","tslib","protobufjs/minimal","metaserver/static/js/dropbox/proto/pap_events/predefined_event","metaserver/static/js/dropbox/proto/pap_events/event_enums"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;(r=i.__importStar(r)).Reader,r.Writer,r.util;const a=r.roots.default||(r.roots.default={});var n,s;t.default=a,t.pap_events=a.pap_events=((n=a.pap_events||{}).previews=((s=n.previews||{}).Open_Sidebar=(function(e){function e(e){if(e)for(let t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.prototype.eventState=0,e.prototype.actionScreen="",e.prototype.fileType=0,e.prototype.fileSize=0,e.create=function(t){return new e(t)},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.previews.Open_Sidebar"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PREVIEWS"]=0,t})(),e.FileType=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_FILE_TYPE"]=0,t[e[1]="DOCX_FILE_TYPE"]=1,t[e[2]="PDF_FILE_TYPE"]=2,t[e[3]="XLS_FILE_TYPE"]=3,t[e[4]="JPG_FILE_TYPE"]=4,t[e[5]="PNG_FILE_TYPE"]=5,t[e[6]="HEIC_FILE_TYPE"]=6,t[e[7]="MP4_FILE_TYPE"]=7,t[e[8]="MOV_FILE_TYPE"]=8,t[e[9]="TXT_FILE_TYPE"]=9,t[e[10]="MP3_FILE_TYPE"]=10,t[e[11]="M4A_FILE_TYPE"]=11,t[e[12]="WEBP_FILE_TYPE"]=12,t[e[13]="XLSX_FILE_TYPE"]=13,t[e[14]="PAGES_FILE_TYPE"]=14,t[e[15]="ZIP_FILE_TYPE"]=15,t[e[16]="GIF_FILE_TYPE"]=16,t[e[17]="URL_FILE_TYPE"]=17,t[e[18]="NUMBERS_FILE_TYPE"]=18,t[e[19]="WAV_FILE_TYPE"]=19,t[e[20]="EPUB_FILE_TYPE"]=20,t[e[21]="DNG_FILE_TYPE"]=21,t[e[22]="OPUS_FILE_TYPE"]=22,t[e[23]="CR2_FILE_TYPE"]=23,t[e[24]="ARW_FILE_TYPE"]=24,t[e[25]="PPTX_FILE_TYPE"]=25,t[e[26]="PSD_FILE_TYPE"]=26,t[e[27]="DOC_FILE_TYPE"]=27,t[e[28]="AMR_FILE_TYPE"]=28,t[e[29]="CSV_FILE_TYPE"]=29,t[e[30]="CLIP_FILE_TYPE"]=30,t[e[31]="NEF_FILE_TYPE"]=31,t[e[32]="KDBX_FILE_TYPE"]=32,t[e[33]="TIFF_FILE_TYPE"]=33,t[e[34]="SVG_FILE_TYPE"]=34,t[e[35]="APK_FILE_TYPE"]=35,t[e[36]="KEY_FILE_TYPE"]=36,t[e[37]="GPX_FILE_TYPE"]=37,t[e[38]="AAC_FILE_TYPE"]=38,t[e[39]="PROCREATE_FILE_TYPE"]=39,t[e[40]="WEBM_FILE_TYPE"]=40,t[e[41]="TORRENT_FILE_TYPE"]=41,t[e[42]="IPV_FILE_TYPE"]=42,t[e[43]="CR3_FILE_TYPE"]=43,t[e[44]="HTML_FILE_TYPE"]=44,t[e[45]="XML_FILE_TYPE"]=45,t[e[46]="VCF_FILE_TYPE"]=46,t[e[47]="RAR_FILE_TYPE"]=47,t[e[48]="PVT_FILE_TYPE"]=48,t[e[49]="ODT_FILE_TYPE"]=49,t[e[50]="MD_FILE_TYPE"]=50,t[e[51]="WEB_FILE_TYPE"]=51,t[e[52]="GSLIDES_FILE_TYPE"]=52,t[e[53]="GDOC_FILE_TYPE"]=53,t[e[54]="GSHEET_FILE_TYPE"]=54,t[e[55]="BINDER_FILE_TYPE"]=55,t[e[56]="PAPERT_FILE_TYPE"]=56,t[e[57]="PAPER_FILE_TYPE"]=57,t[e[58]="WEBSITE_FILE_TYPE"]=58,t[e[59]="JPEG_FILE_TYPE"]=59,t[e[60]="JSON_FILE_TYPE"]=60,t})(),e})(s.Open_Sidebar||{}),s),n.EventState=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_EVENT_STATE"]=0,t[e[1]="START"]=1,t[e[2]="SUCCESS"]=2,t[e[3]="FAILED"]=3,t[e[4]="CANCELED"]=4,t})(),n)})),define("metaserver/static/js/dropbox/proto/pap_events/previews/print_file",["require","exports","tslib","protobufjs/minimal","metaserver/static/js/dropbox/proto/pap_events/predefined_event","metaserver/static/js/dropbox/proto/pap_events/event_enums"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;(r=i.__importStar(r)).Reader,r.Writer,r.util;const a=r.roots.default||(r.roots.default={});var n,s;t.default=a,t.pap_events=a.pap_events=((n=a.pap_events||{}).previews=((s=n.previews||{}).Print_File=(function(e){function e(e){if(e)for(let t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.prototype.eventState=0,e.prototype.actionScreen="",e.prototype.fileType=0,e.prototype.fileSize=0,e.create=function(t){return new e(t)},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.previews.Print_File"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PREVIEWS"]=0,t})(),e.FileType=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_FILE_TYPE"]=0,t[e[1]="DOCX_FILE_TYPE"]=1,t[e[2]="PDF_FILE_TYPE"]=2,t[e[3]="XLS_FILE_TYPE"]=3,t[e[4]="JPG_FILE_TYPE"]=4,t[e[5]="PNG_FILE_TYPE"]=5,t[e[6]="HEIC_FILE_TYPE"]=6,t[e[7]="MP4_FILE_TYPE"]=7,t[e[8]="MOV_FILE_TYPE"]=8,t[e[9]="TXT_FILE_TYPE"]=9,t[e[10]="MP3_FILE_TYPE"]=10,t[e[11]="M4A_FILE_TYPE"]=11,t[e[12]="WEBP_FILE_TYPE"]=12,t[e[13]="XLSX_FILE_TYPE"]=13,t[e[14]="PAGES_FILE_TYPE"]=14,t[e[15]="ZIP_FILE_TYPE"]=15,t[e[16]="GIF_FILE_TYPE"]=16,t[e[17]="URL_FILE_TYPE"]=17,t[e[18]="NUMBERS_FILE_TYPE"]=18,t[e[19]="WAV_FILE_TYPE"]=19,t[e[20]="EPUB_FILE_TYPE"]=20,t[e[21]="DNG_FILE_TYPE"]=21,t[e[22]="OPUS_FILE_TYPE"]=22,t[e[23]="CR2_FILE_TYPE"]=23,t[e[24]="ARW_FILE_TYPE"]=24,t[e[25]="PPTX_FILE_TYPE"]=25,t[e[26]="PSD_FILE_TYPE"]=26,t[e[27]="DOC_FILE_TYPE"]=27,t[e[28]="AMR_FILE_TYPE"]=28,t[e[29]="CSV_FILE_TYPE"]=29,t[e[30]="CLIP_FILE_TYPE"]=30,t[e[31]="NEF_FILE_TYPE"]=31,t[e[32]="KDBX_FILE_TYPE"]=32,t[e[33]="TIFF_FILE_TYPE"]=33,t[e[34]="SVG_FILE_TYPE"]=34,t[e[35]="APK_FILE_TYPE"]=35,t[e[36]="KEY_FILE_TYPE"]=36,t[e[37]="GPX_FILE_TYPE"]=37,t[e[38]="AAC_FILE_TYPE"]=38,t[e[39]="PROCREATE_FILE_TYPE"]=39,t[e[40]="WEBM_FILE_TYPE"]=40,t[e[41]="TORRENT_FILE_TYPE"]=41,t[e[42]="IPV_FILE_TYPE"]=42,t[e[43]="CR3_FILE_TYPE"]=43,t[e[44]="HTML_FILE_TYPE"]=44,t[e[45]="XML_FILE_TYPE"]=45,t[e[46]="VCF_FILE_TYPE"]=46,t[e[47]="RAR_FILE_TYPE"]=47,t[e[48]="PVT_FILE_TYPE"]=48,t[e[49]="ODT_FILE_TYPE"]=49,t[e[50]="MD_FILE_TYPE"]=50,t[e[51]="WEB_FILE_TYPE"]=51,t[e[52]="GSLIDES_FILE_TYPE"]=52,t[e[53]="GDOC_FILE_TYPE"]=53,t[e[54]="GSHEET_FILE_TYPE"]=54,t[e[55]="BINDER_FILE_TYPE"]=55,t[e[56]="PAPERT_FILE_TYPE"]=56,t[e[57]="PAPER_FILE_TYPE"]=57,t[e[58]="WEBSITE_FILE_TYPE"]=58,t[e[59]="JPEG_FILE_TYPE"]=59,t[e[60]="JSON_FILE_TYPE"]=60,t})(),e})(s.Print_File||{}),s),n.EventState=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_EVENT_STATE"]=0,t[e[1]="START"]=1,t[e[2]="SUCCESS"]=2,t[e[3]="FAILED"]=3,t[e[4]="CANCELED"]=4,t})(),n)})),define("metaserver/static/js/dropbox/proto/pap_events/previews/redo_change",["require","exports","tslib","protobufjs/minimal","metaserver/static/js/dropbox/proto/pap_events/predefined_event"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;(r=i.__importStar(r)).Reader,r.Writer,r.util;const a=r.roots.default||(r.roots.default={});var n,s;t.default=a,t.pap_events=a.pap_events=((n=a.pap_events||{}).previews=((s=n.previews||{}).Redo_Change=(function(e){function e(e){if(e)for(let t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.prototype.actionScreen="",e.prototype.actionElement="",e.prototype.fileType=0,e.prototype.fileSize=0,e.create=function(t){return new e(t)},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.previews.Redo_Change"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PREVIEWS"]=0,t})(),e.FileType=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_FILE_TYPE"]=0,t[e[1]="DOCX_FILE_TYPE"]=1,t[e[2]="PDF_FILE_TYPE"]=2,t[e[3]="XLS_FILE_TYPE"]=3,t[e[4]="JPG_FILE_TYPE"]=4,t[e[5]="PNG_FILE_TYPE"]=5,t[e[6]="HEIC_FILE_TYPE"]=6,t[e[7]="MP4_FILE_TYPE"]=7,t[e[8]="MOV_FILE_TYPE"]=8,t[e[9]="TXT_FILE_TYPE"]=9,t[e[10]="MP3_FILE_TYPE"]=10,t[e[11]="M4A_FILE_TYPE"]=11,t[e[12]="WEBP_FILE_TYPE"]=12,t[e[13]="XLSX_FILE_TYPE"]=13,t[e[14]="PAGES_FILE_TYPE"]=14,t[e[15]="ZIP_FILE_TYPE"]=15,t[e[16]="GIF_FILE_TYPE"]=16,t[e[17]="URL_FILE_TYPE"]=17,t[e[18]="NUMBERS_FILE_TYPE"]=18,t[e[19]="WAV_FILE_TYPE"]=19,t[e[20]="EPUB_FILE_TYPE"]=20,t[e[21]="DNG_FILE_TYPE"]=21,t[e[22]="OPUS_FILE_TYPE"]=22,t[e[23]="CR2_FILE_TYPE"]=23,t[e[24]="ARW_FILE_TYPE"]=24,t[e[25]="PPTX_FILE_TYPE"]=25,t[e[26]="PSD_FILE_TYPE"]=26,t[e[27]="DOC_FILE_TYPE"]=27,t[e[28]="AMR_FILE_TYPE"]=28,t[e[29]="CSV_FILE_TYPE"]=29,t[e[30]="CLIP_FILE_TYPE"]=30,t[e[31]="NEF_FILE_TYPE"]=31,t[e[32]="KDBX_FILE_TYPE"]=32,t[e[33]="TIFF_FILE_TYPE"]=33,t[e[34]="SVG_FILE_TYPE"]=34,t[e[35]="APK_FILE_TYPE"]=35,t[e[36]="KEY_FILE_TYPE"]=36,t[e[37]="GPX_FILE_TYPE"]=37,t[e[38]="AAC_FILE_TYPE"]=38,t[e[39]="PROCREATE_FILE_TYPE"]=39,t[e[40]="WEBM_FILE_TYPE"]=40,t[e[41]="TORRENT_FILE_TYPE"]=41,t[e[42]="IPV_FILE_TYPE"]=42,t[e[43]="CR3_FILE_TYPE"]=43,t[e[44]="HTML_FILE_TYPE"]=44,t[e[45]="XML_FILE_TYPE"]=45,t[e[46]="VCF_FILE_TYPE"]=46,t[e[47]="RAR_FILE_TYPE"]=47,t[e[48]="PVT_FILE_TYPE"]=48,t[e[49]="ODT_FILE_TYPE"]=49,t[e[50]="MD_FILE_TYPE"]=50,t[e[51]="WEB_FILE_TYPE"]=51,t[e[52]="GSLIDES_FILE_TYPE"]=52,t[e[53]="GDOC_FILE_TYPE"]=53,t[e[54]="GSHEET_FILE_TYPE"]=54,t[e[55]="BINDER_FILE_TYPE"]=55,t[e[56]="PAPERT_FILE_TYPE"]=56,t[e[57]="PAPER_FILE_TYPE"]=57,t[e[58]="WEBSITE_FILE_TYPE"]=58,t[e[59]="JPEG_FILE_TYPE"]=59,t[e[60]="JSON_FILE_TYPE"]=60,t})(),e})(s.Redo_Change||{}),s),n)})),define("metaserver/static/js/dropbox/proto/pap_events/previews/zoom_file",["require","exports","tslib","protobufjs/minimal","metaserver/static/js/dropbox/proto/pap_events/predefined_event","metaserver/static/js/dropbox/proto/pap_events/event_enums"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;(r=i.__importStar(r)).Reader,r.Writer,r.util;const a=r.roots.default||(r.roots.default={});var n,s;t.default=a,t.pap_events=a.pap_events=((n=a.pap_events||{}).previews=((s=n.previews||{}).Zoom_File=(function(e){function e(e){if(e)for(let t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.prototype.eventState=0,e.prototype.actionScreen="",e.prototype.actionElement="",e.prototype.fileType=0,e.prototype.fileSize=0,e.create=function(t){return new e(t)},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.previews.Zoom_File"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PREVIEWS"]=0,t})(),e.FileType=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_FILE_TYPE"]=0,t[e[1]="DOCX_FILE_TYPE"]=1,t[e[2]="PDF_FILE_TYPE"]=2,t[e[3]="XLS_FILE_TYPE"]=3,t[e[4]="JPG_FILE_TYPE"]=4,t[e[5]="PNG_FILE_TYPE"]=5,t[e[6]="HEIC_FILE_TYPE"]=6,t[e[7]="MP4_FILE_TYPE"]=7,t[e[8]="MOV_FILE_TYPE"]=8,t[e[9]="TXT_FILE_TYPE"]=9,t[e[10]="MP3_FILE_TYPE"]=10,t[e[11]="M4A_FILE_TYPE"]=11,t[e[12]="WEBP_FILE_TYPE"]=12,t[e[13]="XLSX_FILE_TYPE"]=13,t[e[14]="PAGES_FILE_TYPE"]=14,t[e[15]="ZIP_FILE_TYPE"]=15,t[e[16]="GIF_FILE_TYPE"]=16,t[e[17]="URL_FILE_TYPE"]=17,t[e[18]="NUMBERS_FILE_TYPE"]=18,t[e[19]="WAV_FILE_TYPE"]=19,t[e[20]="EPUB_FILE_TYPE"]=20,t[e[21]="DNG_FILE_TYPE"]=21,t[e[22]="OPUS_FILE_TYPE"]=22,t[e[23]="CR2_FILE_TYPE"]=23,t[e[24]="ARW_FILE_TYPE"]=24,t[e[25]="PPTX_FILE_TYPE"]=25,t[e[26]="PSD_FILE_TYPE"]=26,t[e[27]="DOC_FILE_TYPE"]=27,t[e[28]="AMR_FILE_TYPE"]=28,t[e[29]="CSV_FILE_TYPE"]=29,t[e[30]="CLIP_FILE_TYPE"]=30,t[e[31]="NEF_FILE_TYPE"]=31,t[e[32]="KDBX_FILE_TYPE"]=32,t[e[33]="TIFF_FILE_TYPE"]=33,t[e[34]="SVG_FILE_TYPE"]=34,t[e[35]="APK_FILE_TYPE"]=35,t[e[36]="KEY_FILE_TYPE"]=36,t[e[37]="GPX_FILE_TYPE"]=37,t[e[38]="AAC_FILE_TYPE"]=38,t[e[39]="PROCREATE_FILE_TYPE"]=39,t[e[40]="WEBM_FILE_TYPE"]=40,t[e[41]="TORRENT_FILE_TYPE"]=41,t[e[42]="IPV_FILE_TYPE"]=42,t[e[43]="CR3_FILE_TYPE"]=43,t[e[44]="HTML_FILE_TYPE"]=44,t[e[45]="XML_FILE_TYPE"]=45,t[e[46]="VCF_FILE_TYPE"]=46,t[e[47]="RAR_FILE_TYPE"]=47,t[e[48]="PVT_FILE_TYPE"]=48,t[e[49]="ODT_FILE_TYPE"]=49,t[e[50]="MD_FILE_TYPE"]=50,t[e[51]="WEB_FILE_TYPE"]=51,t[e[52]="GSLIDES_FILE_TYPE"]=52,t[e[53]="GDOC_FILE_TYPE"]=53,t[e[54]="GSHEET_FILE_TYPE"]=54,t[e[55]="BINDER_FILE_TYPE"]=55,t[e[56]="PAPERT_FILE_TYPE"]=56,t[e[57]="PAPER_FILE_TYPE"]=57,t[e[58]="WEBSITE_FILE_TYPE"]=58,t[e[59]="JPEG_FILE_TYPE"]=59,t[e[60]="JSON_FILE_TYPE"]=60,t})(),e})(s.Zoom_File||{}),s),n.EventState=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_EVENT_STATE"]=0,t[e[1]="START"]=1,t[e[2]="SUCCESS"]=2,t[e[3]="FAILED"]=3,t[e[4]="CANCELED"]=4,t})(),n)})),define("metaserver/static/js/file_viewer/sdk_file_viewer/upsell/upsell_dialog",["require","exports","tslib","react","dig-components/typography","dig-components/buttons","metaserver/static/js/components/ui/css","react"],(function(e,t,i,r,a,n,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpsellDialog=void 0,r=i.__importStar(r);const l=({acceptText:e,declineText:t,titleText:i,bodyContent:s,afterAccept:l,afterDecline:c,uxaPrefix:d,redirectUrl:p,acceptLinkProps:u={},"data-testid":_})=>{const[v,f]=(0,o.useState)(!1),g=(0,o.useRef)(!0);r.useEffect(()=>(g.current=!0,()=>{g.current=!1}));return v?null:r.createElement("div",{className:"upsell-dialog-container","data-testid":_},r.createElement("div",{className:"upsell-dialog"},r.createElement(a.Title,{size:"standard",isBold:!0},i),s,r.createElement("div",{className:"upsell-footer"},r.createElement(n.Button,Object.assign({variant:"outline",href:p,onClick:()=>l(f),"data-uxa-log":`${d}-upsell-dialog-continue`},u),e),r.createElement("div",{className:"upsell-secondary-button"},r.createElement(n.Button,{variant:"transparent",onClick:()=>{f(!0),c&&c()},"data-uxa-log":`${d}-upsell-dialog-dismiss`},t)))))};l.displayName="UnstyledUpsellDialog",t.UpsellDialog=(0,s.requireCssWithComponent)(l,["/static/metaserver/static/css/file_viewer/upsell_dialog-vflLk_tpf.css"])})),define("metaserver/static/js/file_viewer/sdk_file_viewer/replay_prompt/replay_dialog_api",["require","exports","tslib","metaserver/static/js/api_v2/default_user_client","metaserver/static/js/clean/analytics"],(function(e,t,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logReplayDialogAction=t.shouldShowReplayDialog=void 0;const n=e=>new r.DefaultUserApiV2Client(e);t.shouldShowReplayDialog=function(e,t){return i.__awaiter(this,void 0,void 0,(function*(){return yield n(e).ns("reel").rpc("get_replay_preview_entry_point_eligibility",{media_type:{".tag":t}},{})}))},t.logReplayDialogAction=function(e,t,r){return i.__awaiter(this,void 0,void 0,(function*(){e&&(yield n(e).ns("reel").rpc("log_replay_preview_entry_point_action",{entrypoint_action:{".tag":t}},{})),a.UserActivityLogger.log("web","replay-fvsdk-dialog-"+t,{variant:r})}))}})),define("typescript/libraries/file-viewer/src/core/riviera/types",["require","exports"],(function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.TranscriptRivieraError=t.RivieraError=t.RivieraStatus=void 0,(function(e){e[e.Unknown=0]="Unknown",e[e.OK=1]="OK",e[e.ConversionFailure=2]="ConversionFailure",e[e.TemporaryFailure=3]="TemporaryFailure",e[e.InternalFailure=4]="InternalFailure",e[e.UnsupportedFormat=5]="UnsupportedFormat",e[e.Timeout=6]="Timeout",e[e.TooBig=7]="TooBig",e[e.InvalidMetadata=8]="InvalidMetadata",e[e.SourceCorrupt=9]="SourceCorrupt",e[e.TimeBudgetExceeded=10]="TimeBudgetExceeded",e[e.NotFound=11]="NotFound",e[e.PasswordProtected=12]="PasswordProtected",e[e.InvalidRequest=13]="InvalidRequest",e[e.VirusDetected=14]="VirusDetected",e[e.BlockMissing=15]="BlockMissing",e[e.FeatureDisabled=16]="FeatureDisabled"})(i=t.RivieraStatus||(t.RivieraStatus={}));class r extends Error{constructor(e,t=i.Unknown){super(e),this.statusCode=t}}t.RivieraError=r;t.TranscriptRivieraError=class extends r{constructor(e="error_unknown",t=i.Unknown){super(e),this.statusCode=t,this.transcriptError=e}}})),define("typescript/libraries/file-viewer/src/skeleton/preview_skeleton_viewport",["require","exports","tslib","react","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/skeleton/preview_skeleton_viewport_doc","typescript/libraries/file-viewer/src/skeleton/preview_skeleton_viewport_image"],(function(e,t,i,r,a,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SkeletonViewport=t.isEligibleToShowSkeletonPreview=void 0,r=i.__importDefault(r),t.isEligibleToShowSkeletonPreview=function(e){if(!e)return!1;const t=e[".tag"];return t===a.PreviewType.Image||t===a.PreviewType.SsrDoc||t===a.PreviewType.CloudDoc};const o=({width:e,height:t,docSidebarCollapsed:i,fileContent:o,docMetadata:l,fileName:c,logPerformanceMark:d,metricsReporter:p,partialPrewarmAllowed:u,imgSizeOptimizationEnabled:_})=>{const v=null==o?void 0:o.content,f=null==v?void 0:v[".tag"],g={width:e,height:t};return r.default.createElement("div",{className:"skeleton-viewport",style:g},f===a.PreviewType.Image&&r.default.createElement(s.SkeletonViewportImage,{viewport:g,imageContent:v,dimensions:null==o?void 0:o.dimensions,logPerformanceMark:d}),f===a.PreviewType.SsrDoc&&r.default.createElement(n.SkeletonViewportDoc,{viewportWidth:e,viewportHeight:t,docSidebarCollapsed:i,docContent:v,docMetadata:l,fileName:c,logPerformanceMark:d,metricsReporter:p,partialPrewarmAllowed:u,imgSizeOptimizationEnabled:_}),f===a.PreviewType.CloudDoc&&r.default.createElement(n.SkeletonViewportDoc,{viewportWidth:e,viewportHeight:t,docSidebarCollapsed:i,docContent:v,docMetadata:l,fileName:c,logPerformanceMark:d,metricsReporter:p,partialPrewarmAllowed:u,imgSizeOptimizationEnabled:_}))};o.displayName="SkeletonViewportComponent",t.SkeletonViewport=r.default.memo(o),t.SkeletonViewport.displayName="SkeletonViewport"})),define("typescript/libraries/file-viewer/src/skeleton/preview_skeleton_viewport_image",["require","exports","tslib","react","typescript/libraries/file-viewer/src/logging/performance","typescript/libraries/file-viewer/src/core/utils/sizing_const"],(function(e,t,i,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SkeletonViewportImage=void 0,r=i.__importDefault(r);t.SkeletonViewportImage=({viewport:e,imageContent:t,logPerformanceMark:i,dimensions:s})=>{const{thumbnailUrl:o,srcSet:l}={thumbnailUrl:(c=t).default_src,srcSet:c.src_set};var c;const[d,p]=r.default.useState(),[u,_]=r.default.useState(!!s),v=r.default.useMemo(()=>{const t=(null==s?void 0:s.width)||(null==d?void 0:d.width)||0,i=(null==s?void 0:s.height)||(null==d?void 0:d.height)||0;return t&&i&&_(!0),t>e.width||i>e.height},[null==s?void 0:s.height,null==s?void 0:s.width,null==d?void 0:d.height,null==d?void 0:d.width,e.height,e.width]),f=r.default.useCallback(({currentTarget:{naturalWidth:e,naturalHeight:t}})=>{e&&t&&p({height:t,width:e}),i&&a.PreviewsEventLogger.mark(a.PreviewsTimingEvents.SKELETON_IMAGE_LOAD)},[i]);return r.default.createElement("div",{style:u?{height:"100%",width:"100%"}:{height:0,width:0,overflow:"hidden"}},r.default.createElement("img",{src:o,srcSet:l,onLoad:f,style:{height:"100%",width:"100%",boxSizing:"border-box",objectFit:v?"contain":"scale-down",paddingTop:n.IMAGE_PADDING.top,paddingBottom:n.IMAGE_PADDING.bottom,paddingLeft:n.IMAGE_PADDING.horizontal/2,paddingRight:n.IMAGE_PADDING.horizontal/2},alt:""}))},t.SkeletonViewportImage.displayName="SkeletonViewportImage"})),define("typescript/libraries/file-viewer/src/skeleton/preview_skeleton_viewport_doc",["require","exports","tslib","react","typescript/libraries/file-viewer/src/preview_doc/utils/sizing","typescript/libraries/file-viewer/src/core/riviera/api","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/skeleton/constants","typescript/libraries/file-viewer/src/logging/performance","typescript/libraries/file-viewer/src/core/utils/functions","typescript/libraries/file-viewer/src/core/urls","typescript/libraries/file-viewer/src/core/utils/sizing_const"],(function(e,t,i,r,a,n,s,o,l,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SkeletonViewportDoc=void 0,r=i.__importDefault(r);const u=({url:e,width:t,height:i,onImgLoad:a,sizeScale:n,srcSet:s})=>r.default.createElement("div",{className:"skeleton-page-container",style:{margin:"auto",width:`${t}px`,height:`${i}px`}},r.default.createElement("img",{className:"skeleton-image",src:e,style:{width:`${t}px`,height:`${i}px`,opacity:"60%"},alt:"",onLoad:a,sizes:n?`${n}vw`:void 0,srcSet:s}));u.displayName="SkeletonPage";t.SkeletonViewportDoc=({viewportWidth:e,viewportHeight:t,docSidebarCollapsed:i,docContent:_,docMetadata:v,fileName:f,metricsReporter:g,logPerformanceMark:E,partialPrewarmAllowed:w,imgSizeOptimizationEnabled:b})=>{const m=(function(e){if(e.image_url_tmpl)return(0,d.getDocPrewarmUrl)(e)})(_),[h,y]=r.default.useState(0),[P,T]=r.default.useState(0),[I,F]=r.default.useState(0),S=b&&"ssr_doc"===_[".tag"]?(0,d.generateSrcset)(_.image_url_tmpl,0,_.supported_widths):void 0,L=!i&&(0,a.shouldShowDocSidebar)(e,s.PreviewType.SsrDoc)?a.DOC_SIDEBAR_WIDTH:0,C=(0,a.isPpt)(f),A=r.default.useCallback(()=>{E&&l.PreviewsEventLogger.mark(l.PreviewsTimingEvents.SKELETON_DOC_IMAGE_LOAD)},[E]);return r.default.useEffect(()=>{const r=r=>{const n=(0,a.calculateDocumentScaleFactor)({width:e,height:t,dimensions:r.dimensions,isDocSidebarVisible:!i,fileName:f,scaleToFit:"width_and_height",toolbarShown:!0}),s=r.dimensions[0][0],o=r.dimensions[0][1],l=(0,a.getDocPageViewportWidth)(s*n);y(s*n),T(o*n),F(2*l)};if(v)r(v);else if(null==_?void 0:_.text_url_tmpl){const[e,t]=(0,c.calculatePageRange)(0,w);(new n.RivieraClientBase).fetchDocMetadata(_.text_url_tmpl,!0,e,t).then(e=>{const t=e.metadata;if(!t)return;r(t),l.PreviewsEventLogger.mark(l.PreviewsTimingEvents.SKELETON_DOC_RIVIERA_CALL_END);const i=document.getElementById("fvsdk-container");null==g||g.createStats({ns:"web_previews",name:"skeleton_doc_fetch_success"}).record(i?0:1)})}},[f,_,v,i,t,e,g]),r.default.createElement("div",{className:"skeleton-doc-viewport-wrapper",style:{width:`${e}px`,height:"100%",display:"flex",overflow:"hidden"}},L>0&&r.default.createElement("div",{className:"skeleton-doc-sidebar",style:{width:`${L}px`,height:"100%",boxSizing:"border-box",borderRight:o.STANDARD_BORDER,flexShrink:0}}),r.default.createElement("div",{className:"skeleton-doc-viewport",style:{display:"flex",width:"100%"}},C?r.default.createElement("div",{className:"skeleton-ppt-viewport",style:{width:"100%"}},r.default.createElement("div",{className:"skeleton-ppt-sizer",style:{height:`calc(100% - ${a.DOC_PAGE_PPT_MARGIN_BOTTOM}px)`,width:"100%",display:"flex"}},r.default.createElement(u,{width:h,height:P,url:m,onImgLoad:A,sizeScale:I,srcSet:S}))):r.default.createElement("ol",{style:{width:`${e-L}px`,height:`${P}px`,padding:0,listStyle:"none",display:"flex",flexDirection:"column",alignItems:"center",overflow:"hidden"}},r.default.createElement("li",{style:{transform:`translateY(${p.DOC_LI_MARGIN}px)`,margin:`${p.DOC_LI_MARGIN}px 0`}},r.default.createElement(u,{width:h,height:P,url:m,onImgLoad:A,sizeScale:I,srcSet:S})))))},t.SkeletonViewportDoc.displayName="SkeletonViewportDoc"})),define("typescript/libraries/file-viewer/src/skeleton/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STANDARD_BACKGROUND=t.FAINT_BACKGROUND=t.STANDARD_BORDER=void 0,t.STANDARD_BORDER="1px solid rgba(166,158,146,0.6)",t.FAINT_BACKGROUND="#f7f5f2",t.STANDARD_BACKGROUND="#FFFFFF"})),define("typescript/libraries/file-viewer/src/preview_doc/doc_sidebar.module.css",["require","exports","css!typescript/libraries/file-viewer/src/preview_doc/doc_sidebar.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUnfocusedInEditMode=t.focused=t.selected=t.loader=t.thumbnail=t.isEditMode=t.containerBorder=t.open=t.container=t.border=t.sidebarWidth=t.thumbnailWidth=void 0,t.thumbnailWidth="112px",t.sidebarWidth="168px",t.border="4px",t.container="_container_4llxd_13",t.open="_open_4llxd_24",t.containerBorder="_containerBorder_4llxd_28",t.isEditMode="_isEditMode_4llxd_70",t.thumbnail="_thumbnail_4llxd_74",t.loader="_loader_4llxd_91",t.selected="_selected_4llxd_100",t.focused="_focused_4llxd_104",t.isUnfocusedInEditMode="_isUnfocusedInEditMode_4llxd_108";t.default={thumbnailWidth:"112px",sidebarWidth:"168px",border:"4px",container:"_container_4llxd_13",open:"_open_4llxd_24",containerBorder:"_containerBorder_4llxd_28",isEditMode:"_isEditMode_4llxd_70",thumbnail:"_thumbnail_4llxd_74",loader:"_loader_4llxd_91",selected:"_selected_4llxd_100",focused:"_focused_4llxd_104",isUnfocusedInEditMode:"_isUnfocusedInEditMode_4llxd_108"}})),define("typescript/libraries/file-viewer/src/preview_doc/preview_doc.module.css",["require","exports","css!typescript/libraries/file-viewer/src/preview_doc/preview_doc.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.close=t.container=t.pptFullSizer=t.pptSizer=t.pptViewport=t.pdfViewport=t.page=t.snackbar=t.imgLayer=t.internalLink=t.linksLayer=t.textLayer=t.textbox=t.findInDocHighlightSecondary=t.findInDocHighlightPrimary=t.pagePptMarginBottom=t.pageMarginTop=t.pageMarginLeft=t.pageMargin=void 0,t.pageMargin="16px",t.pageMarginLeft="24px",t.pageMarginTop="24px",t.pagePptMarginBottom="100px",t.findInDocHighlightPrimary="var(--color__accent__lime)",t.findInDocHighlightSecondary="var(--color__accent__banana)",t.textbox="_textbox_1gl8y_17",t.textLayer="_textLayer_1gl8y_22",t.linksLayer="_linksLayer_1gl8y_42",t.internalLink="_internalLink_1gl8y_52",t.imgLayer="_imgLayer_1gl8y_63",t.snackbar="_snackbar_1gl8y_90",t.page="_page_1gl8y_100",t.pdfViewport="_pdfViewport_1gl8y_104",t.pptViewport="_pptViewport_1gl8y_110",t.pptSizer="_pptSizer_1gl8y_128",t.pptFullSizer="_pptFullSizer_1gl8y_134",t.container="_container_1gl8y_144",t.close="_close_1gl8y_175";t.default={pageMargin:"16px",pageMarginLeft:"24px",pageMarginTop:"24px",pagePptMarginBottom:"100px",findInDocHighlightPrimary:"var(--color__accent__lime)",findInDocHighlightSecondary:"var(--color__accent__banana)",textbox:"_textbox_1gl8y_17",textLayer:"_textLayer_1gl8y_22",linksLayer:"_linksLayer_1gl8y_42",internalLink:"_internalLink_1gl8y_52",imgLayer:"_imgLayer_1gl8y_63",snackbar:"_snackbar_1gl8y_90",page:"_page_1gl8y_100",pdfViewport:"_pdfViewport_1gl8y_104",pptViewport:"_pptViewport_1gl8y_110",pptSizer:"_pptSizer_1gl8y_128",pptFullSizer:"_pptFullSizer_1gl8y_134",container:"_container_1gl8y_144",close:"_close_1gl8y_175"}})),define("typescript/libraries/file-viewer/src/core/utils/sizing_const",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IMAGE_PADDING=t.DOC_LI_MARGIN=t.DOC_EXTRA_HORIZONTAL_MARGIN=void 0,t.DOC_EXTRA_HORIZONTAL_MARGIN=30,t.DOC_LI_MARGIN=16,t.IMAGE_PADDING={top:20,bottom:120,bottomNoToolbar:20,horizontal:72}})),define("typescript/libraries/file-viewer/src/core/utils/sizing_utils",["require","exports","typescript/libraries/file-viewer/src/core/utils/sizing_const"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getApproximateImageDisplaySize=t.getImageSizeScale=t.calculateImageSizerDimensions=t.calcImageFitScaleFactor=t.calcContentHeight=t.calcContentWidth=t.calculateFitBox=void 0;function r(e,t,i){return Math.min((t.width-i.horizontal)/e.width,(t.height-i.top-i.bottom)/e.height)}function a(e,t,i,r=1){const a=e.width*r,n=e.height*r;let s=0,o=0;return a<t.width&&(s=(t.width-a)/2),n<t.height&&(o=(t.height-n-i.bottom+i.top)/2),{width:a,height:n,translateX:s,translateY:o}}function n(e){return e/window.innerWidth*100/window.devicePixelRatio}t.calculateFitBox=function(e,t,i){const r=e/t;return isNaN(i)||isNaN(r)||!isFinite(r)||!isFinite(i)?[0,0]:r>i?[t*i,t]:[e,e/i]},t.calcContentWidth=function(e,t,i=!0,r=!1){return!i||r?e:e<=833?e:e-(t?329:57)},t.calcContentHeight=function(e,t){return e-(t?64:0)},t.calcImageFitScaleFactor=r,t.calculateImageSizerDimensions=a,t.getImageSizeScale=n,t.getApproximateImageDisplaySize=function(e,t){const s=r(e,t,i.IMAGE_PADDING),{width:o,height:l,translateX:c,translateY:d}=a(e,t,i.IMAGE_PADDING,s);return{width:o,height:l,translateX:c,translateY:d,sizeScale:n(o)}}})),define("typescript/libraries/file-viewer/src/core/urls",["require","exports"],(function(e,t){"use strict";function i(e,t,i,r){const a=new URL(e);return a.searchParams.set("page",t.toString()),a.searchParams.set("scale_percent",i.toString()),null!=r&&a.searchParams.set("width",r.toString()),a.toString()}Object.defineProperty(t,"__esModule",{value:!0}),t.getDocPrewarmUrl=t.getXlsImgUrl=t.generateSrcset=t.imageUrl=t.updateQueryParam=void 0,t.updateQueryParam=function(e,t){Object.keys(t).forEach(i=>{e.searchParams.set(i,t[i])})},t.imageUrl=i,t.generateSrcset=function(e,t,r){return r&&r.map(r=>`${i(e,t,0,r)} ${r}w`).join(",")},t.getXlsImgUrl=function(e,t,i){const r=new URL(e,"https://www.dropbox.com");if("/previews_asset/"===r.pathname){return(r.pathname+r.search).replace(/SHEET_PLACEHOLDER/,t.toString()).replace(/TILE_PLACEHOLDER/,i.toString())}return r.searchParams.set("sheet",t.toString()),r.searchParams.set("tile",i.toString()),r.toString()},t.getDocPrewarmUrl=function(e){return e.image_url_tmpl?i(e.image_url_tmpl,0,0):""}})),define("typescript/libraries/file-viewer/src/core/riviera/api",["require","exports","tslib","typescript/libraries/file-viewer/src/core/riviera/types","typescript/libraries/file-viewer/src/core/riviera/transform","typescript/libraries/file-viewer/src/core/types/errors","typescript/libraries/file-viewer/src/core/utils/invariant"],(function(e,t,i,r,a,n,s){"use strict";function o(e,t,i){return 401===e&&i?new r.RivieraError("Password required",r.RivieraStatus.PasswordProtected):new r.RivieraError("Load Error",t.rivieraStatusCode)}Object.defineProperty(t,"__esModule",{value:!0}),t.rivieraClient=t.RivieraClientBase=t.WebRivieraIOClient=t.excelUrl=t.textUrl=void 0;const l=e=>{let t={};try{e&&(t=JSON.parse(e))}catch(e){}return t};function c(e,t,i=0,r=50,a=!1){const n=new URL(e);return t&&n.searchParams.set("metadata","1"),void 0!==i&&(n.searchParams.set("text","1"),n.searchParams.set("page_start",i.toString()),n.searchParams.set("page_end",r.toString())),a&&n.searchParams.set("canned_file_name","spdf/audi.pdf.json"),n.toString()}function d(e,t){if(void 0===t)return e;{const i=new URL(e);return i.searchParams.set("sheet",t+""),i.toString()}}t.textUrl=c,t.excelUrl=d;class p{refreshDocBlob(e,t){return i.__awaiter(this,void 0,void 0,(function*(){const i=yield fetch(e,{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:new URLSearchParams({password:t||""}),credentials:"include",method:"POST"}),r=yield i.json();return{ok:i.ok,status:i.status,data:r,headers:{"x-dropbox-metadata":i.headers.get("x-dropbox-metadata"),"x-dropbox-pdf-password-needed":i.headers.get("x-dropbox-pdf-password-needed")}}}))}fetchDocMetadata(e,t,r,a,n){return i.__awaiter(this,void 0,void 0,(function*(){const i=yield fetch(c(e,t,r,a,n),{headers:{"content-type":"application/json"},credentials:"include"});try{const e=yield i.json();return{ok:i.ok,status:i.status,data:e,headers:{"x-dropbox-metadata":i.headers.get("x-dropbox-metadata"),"x-dropbox-pdf-password-needed":i.headers.get("x-dropbox-pdf-password-needed")}}}catch(e){return{ok:!1,status:i.status,data:null,headers:{"x-dropbox-metadata":i.headers.get("x-dropbox-metadata"),"x-dropbox-pdf-password-needed":i.headers.get("x-dropbox-pdf-password-needed")}}}}))}fetchMediaMetadata(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=yield fetch(e,{credentials:"include"}),i=t.headers.get("x-dropbox-metadata")||"",r=yield t.json();return{ok:t.ok,status:t.status,data:r,headers:{"x-dropbox-metadata":i}}}))}fetchWaveformData(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=yield fetch(e,{credentials:"include"}),i=t.headers.get("x-dropbox-metadata")||"",r=yield t.json();return{ok:t.ok,status:t.status,data:r,headers:{"x-dropbox-metadata":i}}}))}fetchTranscriptData(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=yield fetch(e,{credentials:"include",cache:"no-cache"}),i=t.headers.get("x-dropbox-metadata")||"";try{const e=yield t.json();return{ok:t.ok,status:t.status,data:e,headers:{"x-dropbox-metadata":i}}}catch(e){return{ok:!1,status:t.status,data:null,headers:{"x-dropbox-metadata":i}}}}))}fetchLinkfileData(e,t){return i.__awaiter(this,void 0,void 0,(function*(){const i=yield fetch(e,{credentials:t?"include":"omit",headers:{"content-type":"application/json"},method:"POST"}),r=i.headers.get("x-dropbox-metadata")||"",a={uri:(yield i.json()).uri};return{ok:i.ok,status:i.status,data:a,headers:{"x-dropbox-metadata":r}}}))}fetchExcelWorkbookLayoutData(e,t){return i.__awaiter(this,void 0,void 0,(function*(){const i=yield fetch(d(e,t),{headers:{"content-type":"application/json"},credentials:"include",method:"POST"}),r=yield i.json(),a=i.headers.get("x-dropbox-metadata")||"";return{ok:i.ok,status:i.status,data:r,headers:{"x-dropbox-metadata":a}}}))}fetchArchiveTopLevelData(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=yield fetch(e,{headers:{"content-type":"application/json"},credentials:"include",method:"POST"}),i=yield t.json(),r=t.headers.get("x-dropbox-metadata")||"";return{ok:t.ok,status:t.status,data:i,headers:{"x-dropbox-metadata":r}}}))}}t.WebRivieraIOClient=p;class u{constructor(){this.ioClient=new p}refreshDocBlob(e,t){return i.__awaiter(this,void 0,void 0,(function*(){const{data:i,status:r,ok:a,headers:n}=yield this.ioClient.refreshDocBlob(e,t);if(!a){const e="1"===n["x-dropbox-pdf-password-needed"];throw o(r,l(n["x-dropbox-metadata"]),e)}const{text:s,image:c,refresh:d}=i;return{text_url_tmpl:s,image_url_tmpl:c,refresh_url:d}}))}fetchDocMetadata(e,t=!1,r=0,a=50,n=!1){return i.__awaiter(this,void 0,void 0,(function*(){const{ok:i,data:s,status:c,headers:d}=yield this.ioClient.fetchDocMetadata(e,t,r,a,n);if(i)return s;const p="1"===d["x-dropbox-pdf-password-needed"];throw o(c,l(d["x-dropbox-metadata"]),p)}))}fetchExcelWorkbookLayoutData(e,t){return i.__awaiter(this,void 0,void 0,(function*(){const{ok:i,data:r,status:a,headers:n}=yield this.ioClient.fetchExcelWorkbookLayoutData(e,t);if(i)return{data:r,error:void 0};return{data:void 0,error:o(a,l(n["x-dropbox-metadata"]),!1)}}))}fetchMediaMetadata(e){return i.__awaiter(this,void 0,void 0,(function*(){const{ok:t,data:i,status:r,headers:a}=yield this.ioClient.fetchMediaMetadata(e);if(t)return{data:i,error:void 0};return{data:void 0,error:o(r,l(a["x-dropbox-metadata"]),!1)}}))}fetchWaveformData(e){return i.__awaiter(this,void 0,void 0,(function*(){const{ok:t,data:i,status:r,headers:a}=yield this.ioClient.fetchWaveformData(e);if(t)return{data:i,error:void 0};return{data:void 0,error:o(r,l(a["x-dropbox-metadata"]),!1)}}))}fetchTranscriptData(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=new URL(e);e=t.toString();const{ok:i,data:r,status:a,headers:n}=yield this.ioClient.fetchTranscriptData(e);if(i)return{data:r,error:void 0};return{data:void 0,error:o(a,l(n["x-dropbox-metadata"]),!1)}}))}fetchLinkfileData(e,t){return i.__awaiter(this,void 0,void 0,(function*(){const{ok:i,data:r,status:a,headers:n}=yield this.ioClient.fetchLinkfileData(e,t);if(i)return{data:r,error:void 0};return{data:void 0,error:o(a,l(n["x-dropbox-metadata"]),!1)}}))}fetchArchiveTopLevelData(e){return i.__awaiter(this,void 0,void 0,(function*(){const{ok:t,data:i,status:r,headers:a}=yield this.ioClient.fetchArchiveTopLevelData(e);if(t)return{data:i,error:void 0};return{data:void 0,error:o(r,l(a["x-dropbox-metadata"]),!1)}}))}fetchPageDataWithMetadata(e,r,o,l,c){return i.__awaiter(this,void 0,void 0,(function*(){const i=c&&"metadata"in c&&!c.error?c.metadata:void 0;try{const d=yield t.rivieraClient.fetchDocMetadata(e,!i,r,o);(0,s.invariant)(!!l,n.FVErrorCode.InvalidFileInfo,"Preview Data should have been available");const{image_url_tmpl:p,supported_widths:u}=l.content,_=null!=i?i:d.metadata;(0,s.invariant)(!!_,n.FVErrorCode.MalformedRivieraData,"Response from riviera ssr_doc has no metadata and we also have no existing metadata");const v=c&&"pages"in c&&!c.error?c.pages:void 0,f=_.page_count;return{data:{metadata:_,pages:(0,a.processTextAndUrl)(p,_.dimensions,f,d,v,u)},error:void 0}}catch(e){return{data:void 0,error:e}}}))}}t.RivieraClientBase=u,t.rivieraClient=new u})),define("typescript/libraries/file-viewer/src/core/types/constants",["require","exports","typescript/libraries/file-viewer/src/core/types/preview_type"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.THRESHOLD_TEXT_SECOND_BATCH=t.TEXT_FIRST_BATCH_SIZE=t.DEFAULT_SUPPORTED_PREVIEW_TYPES=t.DEFAULT_EXCEL_SCALE_FACTOR=t.ZOOM_PERCENT_DELTA=t.DOC_ZOOM_MULTIPLIER=t.MIN_DOC_SCALE_FACTOR=t.MAX_DOC_SCALE_FACTOR=t.IMG_ZOOM_MULTIPLIER=t.MIN_IMG_SCALE_FACTOR=t.MAX_IMG_SCALE_FACTOR=void 0,t.MAX_IMG_SCALE_FACTOR=16,t.MIN_IMG_SCALE_FACTOR=.01,t.IMG_ZOOM_MULTIPLIER=1.25,t.MAX_DOC_SCALE_FACTOR=10,t.MIN_DOC_SCALE_FACTOR=.1,t.DOC_ZOOM_MULTIPLIER=1.1,t.ZOOM_PERCENT_DELTA=.05,t.DEFAULT_EXCEL_SCALE_FACTOR=.5,t.DEFAULT_SUPPORTED_PREVIEW_TYPES=[i.PreviewType.CloudDoc,i.PreviewType.Image,i.PreviewType.SsrDoc,i.PreviewType.Video,i.PreviewType.Audio,i.PreviewType.Archive,i.PreviewType.Excel,i.PreviewType.HTML,i.PreviewType.RawHTML,i.PreviewType.Linkfile],t.TEXT_FIRST_BATCH_SIZE=10,t.THRESHOLD_TEXT_SECOND_BATCH=7})),define("typescript/libraries/file-viewer/src/core/utils/functions",["require","exports","tslib","react","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/core/utils/support","typescript/libraries/file-viewer/src/core/utils/paths","typescript/libraries/file-viewer/src/core/types/constants"],(function(e,t,i,r,a,n,s,o){"use strict";function l(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}Object.defineProperty(t,"__esModule",{value:!0}),t.useDebugRerender=t.calculatePageRange=t.mapMetadataToFile=t.canPreviewInPreviewDoc=t.memoizeOne=t.shallowEqual=void 0,r=i.__importStar(r),t.shallowEqual=function(e,t){if(l(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(let r=0;r<i.length;r++)if(!Object.prototype.hasOwnProperty.call(t,i[r])||!l(e[i[r]],t[i[r]]))return!1;return!0},t.memoizeOne=function(e){let t,i,r=!1;return a=>r&&t===a?i:(i=e(a),t=a,r=!0,i)},t.canPreviewInPreviewDoc=function(e){return[a.PreviewType.CloudDoc,a.PreviewType.SsrDoc].includes((0,n.resolvePreviewType)(e))};t.mapMetadataToFile=function(e,t=!1){if(e)return{uniqueKey:e.file_id,title:e.file_name,isFolder:t,extension:(0,s.getFileExtension)(e.file_name).replace(/\./,"")}},t.calculatePageRange=function(e,t=!1){let i,r;if(!t||e>35){i=50*Math.floor(e/50),i+50-e<15&&(i+=50),r=i+50}else e<=o.TEXT_FIRST_BATCH_SIZE-o.THRESHOLD_TEXT_SECOND_BATCH?(i=0,r=o.TEXT_FIRST_BATCH_SIZE):(i=o.TEXT_FIRST_BATCH_SIZE,r=50);return[i,r]};t.useDebugRerender=(e,t)=>{const i=r.useRef(null),a=r.useRef(0),n=e=>{const t=[];return JSON.stringify(e,(e,i)=>{if(null!=i&&"object"==typeof i){if(i.$$typeof)return"[React element]";if(t.indexOf(i)>=0)return"[cyclic object]";t.push(i)}return i})};if(i.current){const r=i.current,s=a.current,o=Object.keys(e),l=Object.keys(r),c=[...new Set([...o,...l])];for(const i of c){const a=e[i],o=r[i];a!==o&&console.log(`${t} rerender ${s}: key: ${i} old: ${n(o)}, new: ${n(a)}`)}}i.current=e,a.current++}})),define("typescript/libraries/file-viewer/src/core/utils/support",["require","exports","typescript/libraries/file-viewer/src/core/types/preview_type"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolvePreviewType=void 0,t.resolvePreviewType=function(e){if(!e||!e.content)return i.PreviewType.Error;switch(e.content[".tag"]){case"archive":return i.PreviewType.Archive;case"audio":return i.PreviewType.Audio;case"cloud_doc":return i.PreviewType.CloudDoc;case"excel":return i.PreviewType.Excel;case"html":return i.PreviewType.HTML;case"image":return i.PreviewType.Image;case"linkfile":return i.PreviewType.Linkfile;case"raw_html":return i.PreviewType.RawHTML;case"restricted":return i.PreviewType.Restricted;case"ssr_doc":return i.PreviewType.SsrDoc;case"video":return i.PreviewType.Video;default:return i.PreviewType.Other}}})),define("typescript/libraries/file-viewer/src/preview_doc/utils/sizing",["require","exports","typescript/libraries/file-viewer/src/preview_doc/preview_doc.module.css","typescript/libraries/file-viewer/src/preview_doc/doc_sidebar.module.css","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/core/utils/sizing_const","typescript/libraries/file-viewer/src/file_extension/extension_constants","typescript/libraries/file-viewer/src/core/utils/paths"],(function(e,t,i,r,a,n,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDocPageViewportWidth=t.calculateDocumentScaleFactor=t.shouldShowDocSidebar=t.isPpt=t.READABLE_DOC_FILE_TYPES=t.DOC_SIDEBAR_WIDTH=t.DOC_PAGE_MARGIN_LEFT=t.DOC_PAGE_PPT_MARGIN_BOTTOM=t.DOC_PAGE_MARGIN_TOP=t.DOC_PAGE_MARGIN=void 0,t.DOC_PAGE_MARGIN=parseInt(i.pageMargin,10),t.DOC_PAGE_MARGIN_TOP=parseInt(i.pageMarginTop,10),t.DOC_PAGE_PPT_MARGIN_BOTTOM=parseInt(i.pagePptMarginBottom,10),t.DOC_PAGE_MARGIN_LEFT=parseInt(i.pageMarginLeft,10),t.DOC_SIDEBAR_WIDTH=parseInt(r.sidebarWidth,10);const l=t.DOC_SIDEBAR_WIDTH+600;function c(e){return s.PRESENTATION_EXTS.includes((0,o.getFileExtension)(e))}t.READABLE_DOC_FILE_TYPES=[...s.PDF_EXTS,...s.WORDPROC_EXTS],t.isPpt=c,t.shouldShowDocSidebar=function(e,t){return e>=l&&(t===a.PreviewType.SsrDoc||t===a.PreviewType.CloudDoc)},t.calculateDocumentScaleFactor=function(e){const{width:i,height:r,dimensions:a,isDocSidebarVisible:s,scaleToFit:l,toolbarShown:d,fileName:p,maxWidth:u}=e;if(0===a.length)return 1;const _=Math.max(0,i-t.DOC_PAGE_MARGIN-t.DOC_PAGE_MARGIN_LEFT-(s?t.DOC_SIDEBAR_WIDTH:0)-n.DOC_EXTRA_HORIZONTAL_MARGIN),v=c(p)&&!d?Math.max(0,r-t.DOC_PAGE_MARGIN_TOP-t.DOC_PAGE_PPT_MARGIN_BOTTOM):Math.max(0,r-t.DOC_PAGE_MARGIN_TOP),f=null!=u?Math.min(_,u):_,g=v,E=t.READABLE_DOC_FILE_TYPES.includes((0,o.getFileExtension)(p)),w="width_and_height"===l&&!E,b=a.reduce((e,[t,i])=>Math.min(e,f/t,w?g/i:Number.POSITIVE_INFINITY),Number.POSITIVE_INFINITY);return Math.min(b,w?Number.POSITIVE_INFINITY:1.75)},t.getDocPageViewportWidth=function(e){return 100*e/window.innerWidth/window.devicePixelRatio}})),define("typescript/libraries/file-viewer/src/core/data/actions",["require","exports"],(function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.setHasShownTranscriptSettingModal=t.setIsTranscriptShowing=t.setIsClosedCaptionShowing=t.unsubscribePresence=t.subscribePresence=t.saveVideoEdit=t.cancelEditingVideo=t.editVideoAction=t.setFileViewerErrorAction=t.setPreviewLoadingAction=t.reportException=t.setMuted=t.setVolume=t.overrideFloatingToolbar=t.setupGetPlayDurationSeconds=t.toggleVideoFrameSteppers=t.clearVideoRequests=t.requestVideoPause=t.requestVideoSeekRelative=t.requestVideoSeek=t.updateFiles=t.downloadFile=t.copyToDropbox=t.fetchLinkfileDataResult=t.fetchLinkfileData=t.setTranscriptError=t.setOptInToVideoTranscript=t.startTranscriptGenerating=t.fetchTranscriptDataResult=t.fetchTranscriptData=t.fetchWaveformDataResult=t.fetchWaveformData=t.fetchMediaMetadataResult=t.fetchMediaMetadata=t.switchWorkbookTab=t.updateAudioVideoPlaybackState=t.redirect=t.openFileURL=t.triggerDynamicRoutingModalCheck=t.updateArchiveExtractAllSnackbarState=t.setupArchiveFileCurrentPath=t.updateArchiveFileCurrentPath=t.fetchArchiveTopLevelDataResult=t.fetchArchiveTopLevelData=t.fetchExcelSheetLayoutDataResult=t.fetchExcelSheetLayoutData=t.hideContentPane=t.setActiveEditPlugin=t.setActiveRightRailPlugin=t.setErroredFile=t.setBootstrappedFile=t.closeViewer=t.openFullscreenPreview=t.setBrandingInfo=t.setSharedLinkInfo=t.setPreviewMetadata=t.setFileMetadata=t.flipToPreviousFile=t.flipToNextFile=t.openUrl=t.openVersionHistory=t.openWebPreview=t.initializeFileViewer=t.openWith=t.restoreAction=t.shareAction=t.closeRightRail=t.openRightRail=t.showAuthModal=t.clickDropboxLogo=t.exitFullScreen=t.enterFullScreen=t.print=t.pageUp=t.pageDown=t.setCurrentFilePreview=t.closeDocSidebar=t.openDocSidebar=t.initializeFilePreviewSession=t.initializeNestedArchiveFilePreview=t.initializeFilePreview=t.zoomToggleOriginalOrFit=t.updateDimensions=t.updateFitScaleFactor=t.zoomOut=t.zoomIn=t.resolvePageNavigation=t.pageNavigation=t.updateDocCurrentPageIndex=t.refreshBlobSuccessAction=t.refreshBlobAction=t.fetchPageDataWithMetadataResult=t.fetchPageDataWithMetadata=t.fetchRivieraData=t.excelSheetRenderSucceeded=t.excelSheetRenderFailed=t.setDeleteFileModalOpen=t.setToolbarRenameActive=t.renameFile=t.deleteFile=t.Action=void 0,(function(e){e.CloseDocSidebar="@@previews/fileViewerUi/closeDocSidebar",e.CopyToDropbox="@@previews/fileSystem/copyToDropbox",e.DownloadFile="@@previews/fileSystem/downloadFile",e.FetchRivieraData="@@previews/fetchRivieraData",e.FetchPageDataWithMetadata="@@previews/fetchPageDataWithMetadata",e.FetchPageDataWithMetadataResult="@@previews/fetchPageDataWithMetadataResult",e.FetchPhotoMetadataResult="@@previews/fetchPhotoMetadataResult",e.FlipToNextFile="@@previews/navigation/flipToNextFile",e.FlipToPreviousFile="@@previews/navigation/flipToPreviousFile",e.InitializeFilePreview="@@previews/initializeFilePreview",e.InitializeNestedArchiveFilePreview="@@previews/initializeNestedArchiveFilePreview",e.OpenDocSidebar="@@previews/fileViewerUi/openDocSidebar",e.PageDown="@@previews/pageDown",e.PageUp="@@previews/pageUp",e.Print="@@previews/print",e.RefreshBlob="@@previews/refreshBlob",e.RefreshBlobSuccess="@@previews/refreshBlobSuccess",e.SetCurrentFilePreview="@@previews/setCurrentFilePreview",e.UpdateDocCurrentPageIndex="@@previews/updateDocCurrentPageIndex",e.PageNavigation="@@previews/pageNavigation",e.ResolvePageNavigation="@@previews/resolvePageNavigation",e.UpdateFitScaleFactor="@@previews/updateFitScaleFactor",e.ZoomIn="@@previews/zoomIn",e.ZoomToggleOriginalOrFit="@@previews/zoomToggleOriginalOrFit",e.ZoomOut="@@previews/zoomOut",e.UpdateDimensions="@@previews/updateDimensions",e.OpenRightRail="@@previews/openRightRail",e.CloseRightRail="@@previews/closeRightRail",e.Restore="@@previews/restore",e.Share="@@previews/share",e.OpenWith="@@previews/openWith",e.OpenWebPreview="@@previews/openWebPreview",e.OpenVersionHistory="@@previews/openVersionHistory",e.OpenUrl="@@previews/openUrl",e.FetchNativeApps="@@previews/fetchNativeApps",e.InitializeFilePreviewSession="@@previews/initializeFilePreviewSession",e.InitializeFileViewer="@@previews/initializeFileViewer",e.SetFileMetadata="@@previews/setFileMetadata",e.SetPreviewMetadata="@@previews/setPreviewMetadata",e.CloseViewer="@@previews/closeViewer",e.OpenFullscreenPreview="@@previews/openFullscreenPreview",e.SetBootstrappedFile="@@previews/setBootstrappedFile",e.SetErroredFile="@@previews/setErroredFile",e.SetActiveRightRailPlugin="@@previews/plugins/setActiveRightRailPlugin",e.SetActiveEditPlugin="@@previews/plugins/setActiveEditPlugin",e.HideContentPane="@@previews/plugins/hideContentPane",e.FetchExcelSheetLayoutData="@@previews/fetchExcelSheetLayoutData",e.FetchExcelSheetLayoutDataResult="@@previews/fetchExcelSheetLayoutDataResult",e.SwitchWorkbookTab="@@previews/switchWorkbookTab",e.SetSharedLinkInfo="@@previews/setSharedLinkInfo",e.ExcelSheetRenderFailed="@@previews/excelSheetRenderFailed",e.ExcelSheetRenderSucceeded="@@previews/excelSheetRenderSucceeded",e.EnterFullScreen="@@previews/enterFullscreen",e.ExitFullScreen="@@previews/exitFullscreen",e.ClickDropboxLogo="@@previews/clickDropboxLogo",e.FetchArchiveTopLevelData="@@previews/fetchArchiveTopLevelData",e.FetchArchiveTopLevelDataResult="@@previews/fetchArchiveTopLevelDataResult",e.UpdateArchiveFileCurrentPath="@@previews/updateArchiveFileCurrentPath",e.SetupArchiveFileCurrentPath="@@previews/setupArchiveFileCurrentPath",e.UpdateAudioVideoPlaybackState="@@previews/updateAudioVideoPlaybackState",e.UpdateFiles="@@previews/updateFiles",e.RequestVideoSeek="@@previews/requestVideoSeek",e.RequestVideoSeekRelative="@@previews/requestVideoSeekRelative",e.RequestVideoPause="@@previews/requestVideoPause",e.ClearVideoRequests="@@previews/clearVideoRequests",e.ToggleVideoFrameSteppers="@@previews/toggleVideoFrameSteppers",e.SetupGetPlayDurationSeconds="@@previews/setupGetPlayDurationSeconds",e.UpdateArchiveExtractAllSnackbarState="@@previews/updateArchiveExtractAllSnackbarState",e.ShowAuthModal="@@previews/showAuthModal",e.OpenFileURL="@@previews/openFileURL",e.Redirect="@@previews/redirect",e.FetchMediaMetadata="@@previews/fetchMediaMetadata",e.FetchMediaMetadataResult="@@previews/fetchMediaMetadataResult",e.FetchWaveformData="@@previews/fetchWaveformData",e.FetchWaveformDataResult="@@previews/fetchWaveformDataResult",e.FetchTranscriptData="@@previews/fetchTranscriptData",e.FetchTranscriptDataResult="@@previews/fetchTranscriptDataResult",e.StartTranscriptGenerating="@@previews/startTranscriptGenerating",e.SetOptInToVideoTranscript="@@previews/setOptInToVideoTranscript",e.SetTranscriptError="@@previews/setTranscriptError",e.FetchLinkfileData="@@previews/fetchLinkfileData",e.FetchLinkfileDataResult="@@previews/fetchLinkfileDataResult",e.OverrideFloatingToolbar="@@previews/overrideFloatingToolbar",e.TriggerDynamicRoutingModalCheck="@@previews/triggerDynamicRoutingModalCheck",e.SetVolume="@@previews/setVolume",e.SetMuted="@@previews/setMuted",e.ReportException="@@previews/reportException",e.SetPreviewLoadingAction="@@previews/setPreviewLoadedAction",e.SetBrandingInfo="@@previews/setBrandingInfo",e.Rename="@@previews/rename",e.Delete="@@previews/delete",e.SetFileViewerError="@@previews/setFileViewerError",e.SetDeleteFileModalOpen="@@previews/setDeleteFileModalOpen",e.EditVideo="@@previews/editVideo",e.CancelEditingVideo="@@previews/cancelEditingVideo",e.SaveVideoEdit="@@previews/saveVideoEdit",e.SetToolbarRenameActive="@@previews/toolbarRenameActive",e.SubscribePresence="@@presence/subscribe",e.UnsubscribePresence="@@presence/unsubscribe",e.SetIsClosedCaptionShowing="@@previews/setIsClosedCaptionShowing",e.SetIsTranscriptShowing="@@previews/setIsTranscriptShowing",e.SetHasShownTranscriptSettingModal="@@previews/setHasShownTranscriptSettingModal"})(i=t.Action||(t.Action={})),t.deleteFile=function(e){return{payload:e,type:i.Delete}},t.renameFile=function(e){return{payload:e,type:i.Rename}},t.setToolbarRenameActive=function(e){return{payload:e,type:i.SetToolbarRenameActive}},t.setDeleteFileModalOpen=function(e){return{payload:e,type:i.SetDeleteFileModalOpen}},t.excelSheetRenderFailed=function(e){return{payload:e,type:i.ExcelSheetRenderFailed}},t.excelSheetRenderSucceeded=function(e){return{payload:e,type:i.ExcelSheetRenderSucceeded}},t.fetchRivieraData=function(e){return{payload:e,type:i.FetchRivieraData}},t.fetchPageDataWithMetadata=function(e){return{payload:e,type:i.FetchPageDataWithMetadata}},t.fetchPageDataWithMetadataResult=function(e,t){return{type:i.FetchPageDataWithMetadataResult,payload:e,error:t}},t.refreshBlobAction=function(e){return{payload:e,type:i.RefreshBlob}},t.refreshBlobSuccessAction=function(e){return{payload:e,type:i.RefreshBlobSuccess}},t.updateDocCurrentPageIndex=function(e){return{type:i.UpdateDocCurrentPageIndex,payload:e}},t.pageNavigation=function(e){return{type:i.PageNavigation,payload:e}},t.resolvePageNavigation=function(e){return{type:i.ResolvePageNavigation,payload:e}},t.zoomIn=function(e){return{type:i.ZoomIn,payload:e}},t.zoomOut=function(e){return{type:i.ZoomOut,payload:e}},t.updateFitScaleFactor=function(e){return{type:i.UpdateFitScaleFactor,payload:e}},t.updateDimensions=function(e){return{type:i.UpdateDimensions,payload:e}},t.zoomToggleOriginalOrFit=function(e){return{type:i.ZoomToggleOriginalOrFit,payload:e}},t.initializeFilePreview=function(e){return{type:i.InitializeFilePreview,payload:e}},t.initializeNestedArchiveFilePreview=function(e){return{type:i.InitializeNestedArchiveFilePreview,payload:e}},t.initializeFilePreviewSession=function(e){return{type:i.InitializeFilePreviewSession,payload:e}},t.openDocSidebar=function(e){return{type:i.OpenDocSidebar,payload:e}},t.closeDocSidebar=function(e){return{type:i.CloseDocSidebar,payload:e}},t.setCurrentFilePreview=function(e){return{type:i.SetCurrentFilePreview,payload:e}},t.pageDown=function(e){return{type:i.PageDown,payload:e}},t.pageUp=function(e){return{type:i.PageUp,payload:e}},t.print=function(e){return{type:i.Print,payload:e}},t.enterFullScreen=function(e){return{type:i.EnterFullScreen,payload:e}},t.exitFullScreen=function(e){return{type:i.ExitFullScreen,payload:e}},t.clickDropboxLogo=function(e){return{type:i.ClickDropboxLogo,payload:e}},t.showAuthModal=function(e){return{type:i.ShowAuthModal,payload:e}},t.openRightRail=function(e){return{type:i.OpenRightRail,payload:e}},t.closeRightRail=function(e){return{type:i.CloseRightRail,payload:e}},t.shareAction=function(e){return{type:i.Share,payload:e}},t.restoreAction=function(e){return{type:i.Restore,payload:e}},t.openWith=function(e){return{type:i.OpenWith,payload:e}},t.initializeFileViewer=function(e){return{type:i.InitializeFileViewer,payload:e}},t.openWebPreview=function(e){return{type:i.OpenWebPreview,payload:e}},t.openVersionHistory=function(e){return{type:i.OpenVersionHistory,payload:e}},t.openUrl=function(e){return{type:i.OpenUrl,payload:e}},t.flipToNextFile=function(e){return{type:i.FlipToNextFile,payload:e}},t.flipToPreviousFile=function(e){return{type:i.FlipToPreviousFile,payload:e}},t.setFileMetadata=function(e){return{type:i.SetFileMetadata,payload:e}},t.setPreviewMetadata=function(e){return{type:i.SetPreviewMetadata,payload:e}},t.setSharedLinkInfo=function(e){return{type:i.SetSharedLinkInfo,payload:e}},t.setBrandingInfo=function(e){return{type:i.SetBrandingInfo,payload:e}},t.openFullscreenPreview=function(e){return{type:i.OpenFullscreenPreview,payload:e}},t.closeViewer=function(e){return{type:i.CloseViewer,payload:e}},t.setBootstrappedFile=function(e){return{type:i.SetBootstrappedFile,payload:e}},t.setErroredFile=function(e){return{type:i.SetErroredFile,payload:e}},t.setActiveRightRailPlugin=function(e){return{type:i.SetActiveRightRailPlugin,payload:e}},t.setActiveEditPlugin=function(e){return{type:i.SetActiveEditPlugin,payload:e}},t.hideContentPane=function(e){return{type:i.HideContentPane,payload:e}},t.fetchExcelSheetLayoutData=function(e){return{type:i.FetchExcelSheetLayoutData,payload:e}},t.fetchExcelSheetLayoutDataResult=function(e,t){return{type:i.FetchExcelSheetLayoutDataResult,payload:e,error:t}},t.fetchArchiveTopLevelData=function(e){return{payload:e,type:i.FetchArchiveTopLevelData}},t.fetchArchiveTopLevelDataResult=function(e,t){return{type:i.FetchArchiveTopLevelDataResult,payload:e,error:t}},t.updateArchiveFileCurrentPath=function(e){return{payload:e,type:i.UpdateArchiveFileCurrentPath}},t.setupArchiveFileCurrentPath=function(e){return{payload:e,type:i.SetupArchiveFileCurrentPath}},t.updateArchiveExtractAllSnackbarState=function(e){return{payload:e,type:i.UpdateArchiveExtractAllSnackbarState}},t.triggerDynamicRoutingModalCheck=function(){return{type:i.TriggerDynamicRoutingModalCheck,payload:{}}},t.openFileURL=function(e){return{payload:e,type:i.OpenFileURL}},t.redirect=function(e){return{payload:e,type:i.Redirect}},t.updateAudioVideoPlaybackState=function(e){return{payload:e,type:i.UpdateAudioVideoPlaybackState}},t.switchWorkbookTab=function(e){return{type:i.SwitchWorkbookTab,payload:e}},t.fetchMediaMetadata=function(e){return{payload:e,type:i.FetchMediaMetadata}},t.fetchMediaMetadataResult=function(e,t){return{type:i.FetchMediaMetadataResult,payload:e,error:t}},t.fetchWaveformData=function(e){return{payload:e,type:i.FetchWaveformData}},t.fetchWaveformDataResult=function(e,t){return{type:i.FetchWaveformDataResult,payload:e,error:t}},t.fetchTranscriptData=function(e){return{payload:e,type:i.FetchTranscriptData}},t.fetchTranscriptDataResult=function(e,t){return{type:i.FetchTranscriptDataResult,payload:e,error:t}},t.startTranscriptGenerating=function(e){return{type:i.StartTranscriptGenerating,payload:e}},t.setOptInToVideoTranscript=function(e){return{type:i.SetOptInToVideoTranscript,payload:e}},t.setTranscriptError=function(e,t){return{type:i.SetTranscriptError,payload:e,error:t}},t.fetchLinkfileData=function(e){return{payload:e,type:i.FetchLinkfileData}},t.fetchLinkfileDataResult=function(e,t){return{type:i.FetchLinkfileDataResult,payload:e,error:t}},t.copyToDropbox=function(e){return{type:i.CopyToDropbox,payload:e}},t.downloadFile=function(e){return{type:i.DownloadFile,payload:e}},t.updateFiles=function(e){return{type:i.UpdateFiles,payload:e}},t.requestVideoSeek=function(e){return{type:i.RequestVideoSeek,payload:e}},t.requestVideoSeekRelative=function(e){return{type:i.RequestVideoSeekRelative,payload:e}},t.requestVideoPause=function(){return{type:i.RequestVideoPause,payload:{}}},t.clearVideoRequests=function(){return{type:i.ClearVideoRequests,payload:{}}},t.toggleVideoFrameSteppers=function(e){return{type:i.ToggleVideoFrameSteppers,payload:e}},t.setupGetPlayDurationSeconds=function(e){return{type:i.SetupGetPlayDurationSeconds,payload:e}},t.overrideFloatingToolbar=function(e){return{type:i.OverrideFloatingToolbar,payload:e}},t.setVolume=function(e){return{type:i.SetVolume,payload:e}},t.setMuted=function(e){return{type:i.SetMuted,payload:e}},t.reportException=function(e){return{type:i.ReportException,payload:e}},t.setPreviewLoadingAction=function(e){return{type:i.SetPreviewLoadingAction,payload:e}},t.setFileViewerErrorAction=function(e){return{type:i.SetFileViewerError,payload:e}},t.editVideoAction=function(e){return{type:i.EditVideo,payload:e}},t.cancelEditingVideo=function(e){return{type:i.CancelEditingVideo,payload:e}},t.saveVideoEdit=function(e){return{type:i.SaveVideoEdit,payload:e}},t.subscribePresence=function(e){return{type:i.SubscribePresence,payload:e}},t.unsubscribePresence=function(e){return{type:i.UnsubscribePresence,payload:e}},t.setIsClosedCaptionShowing=function(e){return{type:i.SetIsClosedCaptionShowing,payload:e}},t.setIsTranscriptShowing=function(e){return{type:i.SetIsTranscriptShowing,payload:e}},t.setHasShownTranscriptSettingModal=function(e){return{type:i.SetHasShownTranscriptSettingModal,payload:e}}})),define("typescript/libraries/file-viewer/src/titlebar/titlebar_logo",["require","exports","tslib","react","dig-components/icons","dig-components/icons/src","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/titlebar/title_bar.module.css"],(function(e,t,i,r,a,n,s,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Logo=void 0,r=i.__importDefault(r),l=i.__importStar(l);t.Logo=({baseUrl:e,dispatch:t,previewKey:i,fileViewerId:c})=>r.default.createElement("a",{href:`//${e}?src=shmodel`,onClick:()=>{t((0,s.clickDropboxLogo)({previewKey:i,fileViewerId:c,sourceContext:o.UserActionContext.TitleBarMain}))},className:`${l.dropboxLogo}`},r.default.createElement(a.UIIcon,{size:"large",src:n.DropboxLine,"aria-label":"Dropbox"})),t.Logo.displayName="Logo",t.Logo.displayName="Logo"})),define("typescript/libraries/file-viewer/src/core/data/preview_key",["require","exports"],(function(e,t){"use strict";function i(e,t,i,r){return{type:"File",_fileId:e,_nsId:t,_sjId:i,_url:r,serialized:(e?`fileId:[${e}]`:"")+(t?`nsId:[${t}]`:"")+(i?`sjId:[${i}]`:"")+(r?`url:[${r}]`:"")}}Object.defineProperty(t,"__esModule",{value:!0}),t.getPreviewKeyFromFileInfo=t.getSubpath=t.getPreviewKeyForNestedArchiveFile=t.getPreviewKey=t.isNestedArchiveFilePreviewKey=void 0,t.isNestedArchiveFilePreviewKey=function(e){const t="NestedArchiveFile"===e.type?e:null;return Boolean(t)},t.getPreviewKey=i,t.getPreviewKeyForNestedArchiveFile=function(e,t){return{type:"NestedArchiveFile",rootFileId:e,subpath:t,serialized:`rootFileId:[${e}]subpath:[${t}]`}},t.getSubpath=function(e){let t="";return e.length&&(t+=`/${e.join("/")}`),`${t}`},t.getPreviewKeyFromFileInfo=function(e){return i(e.file_id,e.ns_id,e.sj_id)}})),define("typescript/libraries/file-viewer/src/core/data/selectors",["require","exports","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/core/data/preview_key","typescript/libraries/file-viewer/src/core/utils/functions","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/core/utils/support","typescript/libraries/file-viewer/src/core/utils/loadable"],(function(e,t,i,r,a,n,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIsPreviewLoading=t.getSharedLinkInfo=t.getBrandingInfo=t.getIsEditingVideo=t.getFileViewerState=t.getVolumeState=t.getFetchingUser=t.getCurrentUser=t.getFilePreviewSession=t.getFilePreviewSessionId=t.getVideoClosedCaptionsData=t.getVideoTranscriptData=t.getVideoDimensions=t.getFileContentMetadata=t.getVideoRequests=t.getHasBeenFlipped=t.getIsFullScreen=t.getPrintUrl=t.isRightRailOpen=t.isPreviewZoomed=t.getCurrentScaleFactorFromFilePreviewUi=t.getFileViewerUi=t.getCurrentFileMetadata=t.getCurrentFilePreviewUI=t.getFilePreviewUi=t.getFileMetadata=t.getCloudDocEditorUrl=t.getCurrentRivieraData=t.getRivieraDataFromSlice=t.getRivieraData=t.getArchiveFilesFetchedPreviewMetadata=t.getArchiveFilesPreviewMetadata=t.getPreviewMetadata=t.getCurrentFilePreviewUiData=t.getFilePreviewUiData=t.getCurrentPreviewKey=t.getCurrentFileArchiveAware=t.getCurrentFile=t.getLoadableCurrentUser=void 0;const l={state:"pending"},c=(0,a.memoizeOne)(o.makeFulfilledLoadableData);function d(e,t){return e.currentFileInfo[t]}function p(e,t){var r;const a=d(e,t);if(!a)return;const o=a.previewKey,l=E(e,t,o),c=_(e,o);if((0,s.resolvePreviewType)(c)===n.PreviewType.Archive){const a=f(e,o);if("loaded"===(null===(r=null==a?void 0:a.rootEntry)||void 0===r?void 0:r.state)&&l&&l.currentPath){const{entry:e}=(0,i.getArchiveEntryAtPath)(a.rootEntry.data,l.currentPath,t,o);return e}}}t.getLoadableCurrentUser=function(e){return e.fetchingUser?l:c(e.currentUser)},t.getCurrentFile=d;function u(e,t){var i;return null===(i=d(e,t))||void 0===i?void 0:i.previewKey}function _(e,t){return t?(0,r.isNestedArchiveFilePreviewKey)(t)?v(e.archiveFiles,t):e.previewData[t.serialized]:void 0}function v(e,t){const i=e[t.rootFileId];if(i)return i[t.subpath]}function f(e,t){return t&&e.rivieraData[t.serialized]}function g(e,t){return t&&e.fileMetadata[t.serialized]}function E(e,t,i){var r;return i&&(null===(r=e.filePreviewUi[t])||void 0===r?void 0:r[i.serialized])}function w(e,t){const i=d(e,t);if(!i)return;const a=E(e,t,i.previewKey),n=p(e,t);if(n&&!n.isDir&&(null==a?void 0:a.currentPath)){return E(e,t,(0,r.getPreviewKeyForNestedArchiveFile)(i.file_id,(0,r.getSubpath)(a.currentPath)))}return a}function b(e,t){return e.fileViewerUi[t]}function m(e,t){return t&&e.fileContentMetadata[t.serialized]}t.getCurrentFileArchiveAware=(e,t)=>{const i=d(e,t),r=p(e,t);return!r||r.isDir?i:void 0},t.getCurrentPreviewKey=u,t.getFilePreviewUiData=function(e,t){return e[t.serialized]},t.getCurrentFilePreviewUiData=function(e,t,i){var r;return null===(r=e.filePreviewUi[t])||void 0===r?void 0:r[i.serialized]},t.getPreviewMetadata=_,t.getArchiveFilesPreviewMetadata=v,t.getArchiveFilesFetchedPreviewMetadata=function(e,t){return!!e[t]},t.getRivieraData=f,t.getRivieraDataFromSlice=function(e,t){return e[t.serialized]},t.getCurrentRivieraData=function(e,t){const i=u(e,t);return i&&e.rivieraData[i.serialized]},t.getCloudDocEditorUrl=function(e,t){return e.cloudDocsData[t]},t.getFileMetadata=g,t.getFilePreviewUi=E,t.getCurrentFilePreviewUI=w,t.getCurrentFileMetadata=function(e,t){var i;const r=d(e,t),a=g(e,null==r?void 0:r.previewKey),n=p(e,t);return a&&n&&!n.isDir?{file_name:n.name,file_collection_context:a.file_collection_context,size:null!==(i=n.size)&&void 0!==i?i:0}:a},t.getFileViewerUi=b,t.getCurrentScaleFactorFromFilePreviewUi=function(e){return e.zoomScaleFactor||e.fitScaleFactor},t.isPreviewZoomed=function(e,t){const r=w(e,t);if(!r)return!1;const a=(0,i.filterZoomableFilePreviewUi)(r);if(null==a)return!1;const{zoomScaleFactor:n,fitScaleFactor:s}=a;return!!n&&n>s},t.isRightRailOpen=function(e,t){var i;return null===(i=e.fileViewerUi[t])||void 0===i?void 0:i.isRightRailOpen},t.getPrintUrl=function(e,t){var i,r;const a=u(e,t),n=a&&_(e,a);if(!n)return"";const{content:s}=n;return"image"===(null==s?void 0:s[".tag"])?null!==(i=null==s?void 0:s.full_size_src)&&void 0!==i?i:"":"ssr_doc"===(null==s?void 0:s[".tag"])&&null!==(r=null==s?void 0:s.autoprint_url)&&void 0!==r?r:""},t.getIsFullScreen=function(e,t){var i;const r=b(e,t);return null!==(i=null==r?void 0:r.isFullScreen)&&void 0!==i&&i},t.getHasBeenFlipped=function(e,t){var i;const r=b(e,t);return null!==(i=null==r?void 0:r.hasBeenFlipped)&&void 0!==i&&i},t.getVideoRequests=function(e){return e.videoRequests},t.getFileContentMetadata=m,t.getVideoDimensions=function(e,t){const i=m(e,t);if(i&&"video"==i.metadata[".tag"]){const e=i.metadata;if(e.resolution_height&&e.resolution_width)return{width:e.resolution_width,height:e.resolution_height}}return null},t.getVideoTranscriptData=function(e,t){const i=_(e,t);if(!i)return;const{content:r}=i;if("video"===(null==r?void 0:r[".tag"])){const i=e.rivieraData[t.serialized];return null==i?void 0:i.transcript}},t.getVideoClosedCaptionsData=function(e,t){const i=_(e,t);if(!i)return;const{content:r}=i;if("video"===(null==r?void 0:r[".tag"])){const i=e.rivieraData[t.serialized];return null==i?void 0:i.closedCaptions}},t.getFilePreviewSessionId=function(e,t){var i;return t?null===(i=e.loggingSession[t])||void 0===i?void 0:i.file_preview_session_id:void 0},t.getFilePreviewSession=function(e,t){return e.loggingSession[t]},t.getCurrentUser=function(e){return e.currentUser},t.getFetchingUser=function(e){return e.fetchingUser},t.getVolumeState=function(e){return e.volume},t.getFileViewerState=function(e,t){return e.fileViewerState[t]},t.getIsEditingVideo=function(e,t){const i=b(e,t);return!!(null==i?void 0:i.isEditingVideo)},t.getBrandingInfo=function(e,t){const i=u(e,t);return i&&e.brandingInfo[i.serialized]},t.getSharedLinkInfo=function(e,t){const i=u(e,t);return i&&e.sharedLinkInfo[i.serialized]},t.getIsPreviewLoading=function(e){return e.isPreviewLoading}})),define("typescript/libraries/file-viewer/src/core/data/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TRANSCRIPT_BLADE_PLUGIN_ID=t.INFO_BLADE_PLUGIN_ID=void 0,t.INFO_BLADE_PLUGIN_ID="info_blade",t.TRANSCRIPT_BLADE_PLUGIN_ID="transcript_blade"})),define("typescript/libraries/file-viewer/src/core/data/utils",["require","exports","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getArchiveEntryAtPath=t.filterExcelPreviewUiState=t.filterDimensionsFilePreviewUiState=t.filterArchiveFilePreviewUiState=t.filterZoomableFilePreviewUi=t.filterAudioVideoFilePreviewUiState=t.filterDocFilePreviewUiState=t.isExcelApiV2MetadataContent=t.isAudioVideoPreviewRivieraData=t.filterLinkfileRivieraData=t.filterExcelRivieraData=t.filterAudioVideoRivieraData=t.filterDocPreviewRivieraData=t.filterArchivePreviewRivieraData=t.isExcelPreviewRivieraData=void 0,t.isExcelPreviewRivieraData=function(e){return null!=e&&"sheets"in e},t.filterArchivePreviewRivieraData=function(e){return null!=e&&"rootEntry"in e?e:void 0},t.filterDocPreviewRivieraData=function(e){return null!=e&&"metadata"in e&&"pages"in e?e:void 0},t.filterAudioVideoRivieraData=function(e){if(e&&!("metadata"in e||"originalWidth"in e||"sheets"in e||"rootEntry"in e||"linkfileData"in e))return e},t.filterExcelRivieraData=function(e){return e&&"sheets"in e?e:void 0},t.filterLinkfileRivieraData=function(e){return e&&"linkfileData"in e?e:void 0},t.isAudioVideoPreviewRivieraData=function(e){return Boolean(null!=e&&"transcript"in e?e:null)},t.isExcelApiV2MetadataContent=function(e){return void 0!==e&&"excel"===e[".tag"]},t.filterDocFilePreviewUiState=function(e){return e&&"currentPageIndex"in e?e:void 0},t.filterAudioVideoFilePreviewUiState=function(e){return e&&"currentTimestamp"in e?e:void 0},t.filterZoomableFilePreviewUi=function(e){return"fitScaleFactor"in e?e:void 0},t.filterArchiveFilePreviewUiState=function(e){return e&&"extractAllSnackbarState"in e?e:void 0},t.filterDimensionsFilePreviewUiState=function(e){return e&&"dimensions"in e&&e.dimensions?e:null},t.filterExcelPreviewUiState=function(e){return e&&"currentTabIndex"in e?e:void 0},t.getArchiveEntryAtPath=function(e,t,r,a,n){var s;let o=null,l=e;const c=[];for(const e of t){const t=null===(s=l.children)||void 0===s?void 0:s.find(t=>t.name===e);if(!t)return n&&n((0,i.updateArchiveFileCurrentPath)({currentPath:c,fileViewerId:r,previewKey:a})),{entry:l,parent:o};o=l,l=t,c.push(e)}return{entry:l,parent:o}}})),define("typescript/libraries/file-viewer/src/core/utils/loadable",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makePendingLoadableData=t.makeFulfilledLoadableData=t.makeRejectedLoadableData=void 0;t.makeRejectedLoadableData=e=>({state:"errored",error:e});t.makeFulfilledLoadableData=e=>({state:"loaded",data:e});t.makePendingLoadableData=()=>({state:"pending"})})),define("typescript/libraries/file-viewer/src/ui/header",["require","exports","tslib","react","react-redux","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/file_viewer/context_provider","typescript/libraries/file-viewer/src/plugins/types"],(function(e,t,i,r,a,n,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PluginHeader=void 0,r=i.__importStar(r),t.PluginHeader=r.memo(({pluginProps:e,activePluginInstance:t,header:i})=>{var l;const[c,d]=r.useState(!1),{featureConfig:p,fileViewerId:u}=(0,s.useFileViewerContext)(),_="errored"===(null===(l=(0,a.useSelector)(e=>(0,n.getCurrentFile)(e,u)))||void 0===l?void 0:l.bootstrap.state);if(p.preview_content_only)return null;if(!_&&t&&(0,o.isRightRailPlugin)(t)&&t.rightRailUI){const{rightRailUI:{Header:i}}=t;if(i)return c||d(!0),r.createElement(i,Object.assign({},e))}if(i&&!c){const e=i;return r.createElement(e,{onHide:()=>d(!0)})}return null}),t.PluginHeader.displayName="PluginHeader"})),define("typescript/libraries/file-viewer/src/core/utils/paths",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromPath=t.splitFilename=t.getParentFolderFromPath=t.getFileExtension=void 0;const i=/\.\w+$/;t.getFileExtension=function(e){if(!e)return"";const t=e.toLowerCase().match(i);return t?t[0]:""},t.getParentFolderFromPath=function(e){if(!e)return null;const t=e.split("/");return t.length<2?null:t[t.length-2]},t.splitFilename=function(e){if(""===e)return{name:"",ext:""};const t=e.split("."),i=e.length>0&&"."===e[0];let r=e.indexOf(".")<0;i&&(r=t.length<=2);const a=t.pop();return a&&!r?{name:t.join("."),ext:a}:{name:e,ext:""}},t.getFilenameFromPath=function(e){return e.split("/").pop()}})),define("typescript/libraries/file-viewer/src/right_rail/right_rail.module.css",["require","exports","css!typescript/libraries/file-viewer/src/right_rail/right_rail.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.overlay=t.editPluginContainer=t.previewRightRailWrapper=t.skeletonExpanded=t.skeletonCollapsed=t.rightRailContainer=void 0,t.rightRailContainer="_rightRailContainer_p2i5i_1",t.skeletonCollapsed="_skeletonCollapsed_p2i5i_7",t.skeletonExpanded="_skeletonExpanded_p2i5i_8",t.previewRightRailWrapper="_previewRightRailWrapper_p2i5i_23",t.editPluginContainer="_editPluginContainer_p2i5i_27",t.overlay="_overlay_p2i5i_40";t.default={rightRailContainer:"_rightRailContainer_p2i5i_1",skeletonCollapsed:"_skeletonCollapsed_p2i5i_7",skeletonExpanded:"_skeletonExpanded_p2i5i_8",previewRightRailWrapper:"_previewRightRailWrapper_p2i5i_23",editPluginContainer:"_editPluginContainer_p2i5i_27",overlay:"_overlay_p2i5i_40"}})),define("typescript/libraries/file-viewer/src/ui/error_boundary",["require","exports","tslib","react","react-redux","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,t,i,r,a,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorBoundary=void 0,r=i.__importDefault(r);class o extends r.default.PureComponent{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){this.props.onException(e)}render(){const{fallback:e,children:t}=this.props;return this.state.hasError?e:t}}o.displayName="_ErrorBoundary";t.ErrorBoundary=({children:e,fallback:t,previewKey:i,onError:l})=>{const c=(0,a.useDispatch)(),d=(0,a.useSelector)(e=>i?(0,s.getPreviewMetadata)(e,i):void 0),p=r.default.useCallback(e=>{var t;null==l||l(e),c((0,n.reportException)({error:e,fileType:(null===(t=null==d?void 0:d.content)||void 0===t?void 0:t[".tag"])||"unknown",isCritical:!0}))},[d]);return r.default.createElement(o,{fallback:t,children:e,onException:p})},t.ErrorBoundary.displayName="ErrorBoundary"})),define("typescript/libraries/file-viewer/src/plugins/types",["require","exports","typescript/libraries/file-viewer/src/core/types/plugins/lifecycle"],(function(e,t,i){"use strict";function r(e){return"editUI"in e?e:null}function a(e){return"fullscreenLayer"in e?e:null}Object.defineProperty(t,"__esModule",{value:!0}),t.PluginInitialParams=t.isSnackbarManagerPlugin=t.isToolbarPlugin=t.isEditPluginFullscreenInstance=t.parseFullscreenEditPlugin=t.isEditPluginOverlayInstance=t.parseEditOverlayPlugin=t.isActionBarPlugin=t.parseActionBarPlugin=t.isRightRailPlugin=t.parseRightRailPlugin=void 0,t.parseRightRailPlugin=function(e){return"rightRailUI"in e?e:null},t.isRightRailPlugin=function(e){return!!e&&"rightRailUI"in e},t.parseActionBarPlugin=function(e){return"actionDefinitions"in e?e:null},t.isActionBarPlugin=function(e){return"actionDefinitions"in e},t.parseEditOverlayPlugin=r,t.isEditPluginOverlayInstance=function(e){return!!e&&!!r(e)},t.parseFullscreenEditPlugin=a,t.isEditPluginFullscreenInstance=function(e){return!!e&&!!a(e)},t.isToolbarPlugin=function(e){return"toolbarUI"in e},t.isSnackbarManagerPlugin=function(e){return"isSnackbarVisible"in e},Object.defineProperty(t,"PluginInitialParams",{enumerable:!0,get:function(){return i.PluginInitialParams}})})),define("typescript/libraries/file-viewer/src/plugins/selectors/active_plugin",["require","exports","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,t,i){"use strict";function r(e,t){const i=e.plugins[t];if(null==i)return;const{activeRightRailPluginId:r}=i;return r}function a(e,t){const i=e.plugins[t];if(null==i)return;const{activeEditPluginId:r}=i;return r}function n(e,t){const n=a(e,t);return n||((0,i.isRightRailOpen)(e,t)?r(e,t):void 0)}Object.defineProperty(t,"__esModule",{value:!0}),t.isToolbarRenameActive=t.getToolBarOverride=t.getSelectedHideContentPanePluginId=t.isPluginEditMode=t.getActivePluginId=t.getSelectedEditPluginId=t.getSelectedRightRailPluginId=void 0,t.getSelectedRightRailPluginId=r,t.getSelectedEditPluginId=a,t.getActivePluginId=n,t.isPluginEditMode=function(e,t){return!!a(e,t)},t.getSelectedHideContentPanePluginId=function(e,t){const i=e.plugins[t];if(null==i)return;const{hideContentPanePluginId:r}=i;return r},t.getToolBarOverride=function(e,t){if(e.toolbar.override){if("fvsdk"===e.toolbar.overridePluginId)return e.toolbar.override;const i=n(e,t);if(e.toolbar.overridePluginId===i)return e.toolbar.override}},t.isToolbarRenameActive=function(e){return e.isToolbarRenameActive}})),define("typescript/libraries/file-viewer/src/plugins/utils",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPluginEditMode=void 0;t.isPluginEditMode=e=>null!=e&&"edit"===e.type})),define("typescript/libraries/file-viewer/src/core/utils/browser_detection",["require","exports"],(function(e,t){"use strict";function i(e=navigator.userAgent){const t=(function(e){const t=e.toLowerCase(),i=/(ipad)/.exec(t)||/(edge)[ \/]([\w.]+)/.exec(t)||/(edg)[ \/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||/(trident).*? rv:([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[],r=t.match(/version\/([\d.]+)/i);let a=null!=r?i[1]:null;return"webkit"===a&&(a=null!=r?r[1]:null),{browser:i[1]||"",version:a||i[2]||"0",userAgent:e}})(e);return"trident"===t.browser&&(t.browser="msie"),t}Object.defineProperty(t,"__esModule",{value:!0}),t.mac=t.is_mobile_or_tablet=t.is_tablet=t.is_android=t.is_supported_mobile_browser=t.windows=t.iphone=t.mozilla=t.edge=t.safari=t.ipad=t.ipod=t.get_browser_info=void 0,t.get_browser_info=i;const r=i();function a(e=navigator.userAgent){const i=(e||"").toLowerCase();return t.ipod||t.iphone||-1!==i.indexOf("tizen")||-1!==i.indexOf("android")&&-1!==i.indexOf("mobile")||-1!==i.indexOf("bb10")||-1!==i.indexOf("netfront")||/windows phone|opera mini|blackberry|nokia/.test(i)||-1!==i.indexOf("firefox")&&-1!==i.indexOf("mobile")||-1!==i.indexOf("googlebot-mobile")||-1!==i.indexOf("iemobile")||-1!==i.indexOf("opera mobi")||/ucweb|ucbrowser/.test(i)||-1!==i.indexOf("microsoft office mobile")}function n(e=navigator.userAgent){const t=(e||"").toLowerCase();return-1!==t.indexOf("android")||-1!==t.indexOf("silk")}function s(e=navigator.userAgent){return t.ipad||n(e)&&!a(e)}t.ipod=Boolean(/(ipod)/.exec(navigator.userAgent.toLowerCase())),t.ipad="ipad"===r.browser||void 0,t.safari=!("webkit"!==r.browser&&!Boolean(t.ipad))||void 0,t.edge="edge"===r.browser||"edg"===r.browser,t.mozilla="mozilla"===r.browser||void 0,t.iphone=Boolean(/(iphone)/.exec(navigator.userAgent.toLowerCase())),t.windows=/win(16|nt|dows)/.test(navigator.userAgent.toLowerCase()),t.is_supported_mobile_browser=a,t.is_android=n,t.is_tablet=s,t.is_mobile_or_tablet=function(e=navigator.userAgent){return a(e)||s(e)},t.mac=Boolean(/(macintosh)/.exec(navigator.userAgent.toLowerCase()))})),define("typescript/libraries/file-viewer/src/hooks/selectors",["require","exports","react-redux","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.usePreviewState=t.useParameterizedSelector=t.usePreviewKeySelector=t.useFileViewerSelector=t.useCurrentFileMetadata=t.useCurrentPreviewKey=t.useCurrentFileInfo=void 0;t.useCurrentFileInfo=e=>a(e,r.getCurrentFile);t.useCurrentPreviewKey=e=>{var t;return null===(t=a(e,r.getCurrentFile))||void 0===t?void 0:t.previewKey};function a(e,t){return(0,i.useSelector)(i=>t(i,e))}function n(e,t){return(0,i.useSelector)(i=>t(i,e))}t.useCurrentFileMetadata=e=>(0,i.useSelector)(t=>(0,r.getFileMetadata)(t,e)),t.useFileViewerSelector=a,t.usePreviewKeySelector=n,t.useParameterizedSelector=function(e,...t){return(0,i.useSelector)(i=>e(i,...t))},t.usePreviewState=function(e,t,i,s){const o=n(t,r.getRivieraData),l=a(e,r.getCurrentFileMetadata),c=a(e,r.getCurrentFilePreviewUI),d=n(t,r.getPreviewMetadata),p=a(e,r.getFileViewerUi),u=a(e,r.getCurrentFileArchiveAware),_=i(o),v=c&&s(c);if(v&&_&&p)return{fileViewerUiData:p,rivieraData:_,fileMetadata:l,filePreviewUiData:v,previewMetadata:d,fileInfo:u}}})),define("typescript/libraries/file-viewer/src/hooks/useFlipOnSwipe",["require","exports","react","react-redux","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/constants"],(function(e,t,i,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useFlipOnSwipe=void 0;t.useFlipOnSwipe=(e,t)=>{const s=(0,r.useDispatch)(),o=(0,i.useRef)(0),l=(0,i.useRef)(0),c=(0,i.useRef)(0),d=(0,i.useRef)(!1);return{handleTouchStart:(0,i.useCallback)(e=>{const t=e.changedTouches[0];o.current=Date.now(),l.current=t.pageX,c.current=t.pageY,e.touches.length>1&&(d.current=!0)},[o,l,c,d]),handleTouchEnd:(0,i.useCallback)(i=>{const r=i.changedTouches[0];if(d.current)return void(0===i.touches.length&&(d.current=!1));if(Math.abs(r.pageY-c.current)>200)return;if(Date.now()-o.current>500)return;const p=r.pageX-l.current;p<=-100?s((0,a.flipToNextFile)({fileViewerId:e,previewKey:t,sourceContext:n.UserActionContext.SurfaceGesture})):p>=100&&s((0,a.flipToPreviousFile)({fileViewerId:e,previewKey:t,sourceContext:n.UserActionContext.SurfaceGesture}))},[e,t,o,l,c,d,s])}}})),define("typescript/libraries/file-viewer/src/hooks/useStabilizedCallback",["require","exports","react"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useStabilizedCallback=void 0;t.useStabilizedCallback=e=>{const t=(0,i.useRef)(e);return t.current=e,(0,i.useRef)((...e)=>(0,t.current)(...e)).current}})),define("typescript/libraries/file-viewer/src/toolbar/useShowAndStayOnHover",["require","exports","react","lodash","typescript/libraries/file-viewer/src/hooks/useStabilizedCallback"],(function(e,t,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useShowAndStayOnHover=void 0;t.useShowAndStayOnHover=function(e){const[t,n]=(0,i.useState)(!1),[s,o]=(0,i.useState)(!0),l=(0,i.useRef)(),c=(0,a.useStabilizedCallback)(e=>{const t=e.currentTarget.getBoundingClientRect();0===t.left&&0===t.top||n(!0)}),d=(0,a.useStabilizedCallback)(()=>{n(!1)}),p=(0,a.useStabilizedCallback)(()=>{t?u():(l.current=void 0,o(!1))}),u=(0,a.useStabilizedCallback)(()=>{l.current&&window.clearTimeout(l.current),l.current=window.setTimeout(p,3e3)});return(0,i.useEffect)(()=>{const e=(0,r.throttle)(()=>{o(!0),u()},1e3,{leading:!0,trailing:!1});return u(),window.addEventListener("mousemove",e),window.addEventListener("focusin",e),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("focusin",e)}},[u]),(0,i.useEffect)(()=>{o(!0),u()},[e]),(0,i.useEffect)(()=>()=>{l.current&&(window.clearTimeout(l.current),l.current=void 0)},[]),{elementProps:{onMouseEnter:c,onMouseLeave:d,onFocus:c,onBlur:d},isShown:s}}})),define("typescript/libraries/file-viewer/src/ui/header.module.css",["require","exports","css!typescript/libraries/file-viewer/src/ui/header.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authButtons=t.floatingHeader=t.headerContainer=void 0,t.headerContainer="_headerContainer_q32w0_1",t.floatingHeader="_floatingHeader_q32w0_9",t.authButtons="_authButtons_q32w0_21";t.default={headerContainer:"_headerContainer_q32w0_1",floatingHeader:"_floatingHeader_q32w0_9",authButtons:"_authButtons_q32w0_21"}})),define("typescript/libraries/file-viewer/src/preview_error/preview_error",["require","exports","tslib","react","typescript/libraries/file-viewer/src/preview_error/preview_error.module.css","typescript/libraries/file-viewer/src/ui/header.module.css","dig-components/buttons","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/open_with_native/open_with_button","react-intl","typescript/libraries/file-viewer/src/right_rail/download_dropdown","typescript/libraries/file-viewer/src/preview_archive/archive_snack_bar","typescript/libraries/file-viewer/src/core/config","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/types/errors","typescript/libraries/file-viewer/src/core/i18n","typescript/libraries/file-viewer/src/core/utils/support","typescript/libraries/file-viewer/src/core/utils/paths","typescript/libraries/file-viewer/src/ui/header","react-redux","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/hooks/selectors"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f,g,E,w,b,m,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewBootstrapError=t.PreviewRenderError=t.PreviewErrorBase=t.TestOnlyErrorPage=t.UserOffline=t.FileUploading=t.FileTooLarge=t.NoExtension=t.DataFetchFailure=t.Unavailable=t.ArchiveFilePasswordProtected=t.PasswordProtected=t.ArchiveFileUnavailable=t.ArchiveNestedFiletypeNotSupported=t.FiletypeNotSupported=t.ErrorContent=void 0,r=i.__importStar(r),a=i.__importStar(a);const y=(e,t)=>{const a=r.lazy(()=>i.__awaiter(void 0,void 0,void 0,(function*(){const{[t]:i}=yield e();return{default:i}}))),n=()=>r.createElement(r.Suspense,{fallback:null},r.createElement(a,null));return n.displayName=`Async${t}`,n},P=y(()=>new Promise((t,i)=>{e(["metaserver/static/js/dig-illustrations/spot/look-view"],t,i)}).then(i.__importStar),"LookViewSpot"),T=y(()=>new Promise((t,i)=>{e(["metaserver/static/js/dig-illustrations/spot/traffic-duck-crossing"],t,i)}).then(i.__importStar),"TrafficDuckCrossingSpot"),I=y(()=>new Promise((t,i)=>{e(["metaserver/static/js/dig-illustrations/spot/team-ants"],t,i)}).then(i.__importStar),"TeamAntsSpot"),F=y(()=>new Promise((t,i)=>{e(["metaserver/static/js/dig-illustrations/spot/passcode-lock"],t,i)}).then(i.__importStar),"PasscodeLockSpot"),S=(0,c.defineMessage)({id:"f0donV",defaultMessage:"Couldn't preview this file"});t.ErrorContent=({title:e,message:t,illustration:i,children:n})=>r.createElement("article",{className:a.container},r.createElement("div",{className:a.illustrationContainer},i),r.createElement("header",{className:a.header},r.createElement("h1",null,e)),t?r.createElement("p",{className:a.message},t):null,n),t.ErrorContent.displayName="ErrorContent",t.ErrorContent.displayName="ErrorContent";const L=({fileConfig:e,fileViewerId:t,previewKey:i,extractConfig:n={canExtract:!1}})=>{var s,o,c,p,u,_;const v=(0,b.useSelector)(e=>(0,m.getCurrentFile)(e,t)),f=null==v?void 0:v.file_id;return(null===(s=e.download_button)||void 0===s?void 0:s.enable_download_button)&&f&&i?r.createElement(d.DownloadDropdown,{fileViewerId:t,fileId:f,previewKey:i,copyTargets:null!==(c=null===(o=e.download_button)||void 0===o?void 0:o.copy_targets)&&void 0!==c?c:[],canDownload:null!==(u=null===(p=e.download_button)||void 0===p?void 0:p.can_download)&&void 0!==u&&u,useTextButton:!0,useOutlineButton:!0,extractConfig:n}):(null===(_=e.download_button)||void 0===_?void 0:_.enable_open_with_button)&&i?r.createElement(l.OpenWithButton,{fileViewerId:t,className:a.ctaSecondary}):null};L.displayName="DownloadOrOpenWithButton",L.displayName="DownloadOrOpenWithButton";t.FiletypeNotSupported=({fileViewerId:e,fileMetadata:i,previewKey:n,extractConfig:l,fileConfig:d})=>{const p=(0,c.useIntl)(),u=(0,b.useDispatch)();return r.createElement(t.ErrorContent,{illustration:r.createElement(P,null),title:p.formatMessage({id:"73IpwD",defaultMessage:"{extension} files cant currently be previewed."},{extension:(0,E.getFileExtension)(i?i.file_name:"")})},r.createElement(L,{previewKey:n,fileViewerId:e,extractConfig:l,fileConfig:d}),d.enable_view_on_dropbox_button&&n?r.createElement("div",{className:a.ctaLink},r.createElement(s.Button,{variant:"transparent",onClick:()=>u((0,_.openWebPreview)({fileViewerId:e,previewKey:n,sourceContext:o.UserActionContext.PreviewError}))},p.formatMessage({id:"qLPMn5",defaultMessage:"View on dropbox.com"}))):null)},t.FiletypeNotSupported.displayName="FiletypeNotSupported",t.FiletypeNotSupported.displayName="FiletypeNotSupported";t.ArchiveNestedFiletypeNotSupported=({fileName:e,fileSize:i})=>{const a=(0,c.useIntl)(),n=(0,E.getFileExtension)(e),s=n?a.formatMessage({id:"x+ecOm",defaultMessage:"{extension} files cant be previewed from an archive file."},{extension:n}):a.formatMessage({id:"SQjtty",defaultMessage:"This file cannot be previewed. Please check to see if your file extension is correct."});return r.createElement(t.ErrorContent,{illustration:r.createElement(P,null),title:s,message:a.formatMessage({id:"WF66bN",defaultMessage:"{filename}  {filesize}"},{filename:e,filesize:(0,f.formatBytes)(i,a)})})},t.ArchiveNestedFiletypeNotSupported.displayName="ArchiveNestedFiletypeNotSupported",t.ArchiveNestedFiletypeNotSupported.displayName="ArchiveNestedFiletypeNotSupported";t.ArchiveFileUnavailable=({fileName:e,fileSize:i})=>{const a=(0,c.useIntl)(),n=a.formatMessage(S);return r.createElement(t.ErrorContent,{illustration:r.createElement(P,null),title:n,message:a.formatMessage({id:"WF66bN",defaultMessage:"{filename}  {filesize}"},{filename:e,filesize:(0,f.formatBytes)(i,a)})})},t.ArchiveFileUnavailable.displayName="ArchiveFileUnavailable",t.ArchiveFileUnavailable.displayName="ArchiveFileUnavailable";t.PasswordProtected=({fileName:e})=>{const i=(0,c.useIntl)();return r.createElement(t.ErrorContent,{illustration:r.createElement(F,null),title:i.formatMessage({id:"tzyBCT",defaultMessage:"This {extension} file is password-protected"},{extension:(0,E.getFileExtension)(e)})})},t.PasswordProtected.displayName="PasswordProtected",t.PasswordProtected.displayName="PasswordProtected";t.ArchiveFilePasswordProtected=({fileName:e})=>{const i=(0,c.useIntl)();return r.createElement(t.ErrorContent,{illustration:r.createElement(F,null),title:i.formatMessage({id:"eO6mPw",defaultMessage:"Can't preview items inside password protected {extension} files."},{extension:(0,E.getFileExtension)(e)})})},t.ArchiveFilePasswordProtected.displayName="ArchiveFilePasswordProtected",t.ArchiveFilePasswordProtected.displayName="ArchiveFilePasswordProtected";t.Unavailable=({previewKey:e,fileConfig:i,fileViewerId:a,extractConfig:n})=>{const s=(0,c.useIntl)().formatMessage(S);return r.createElement(t.ErrorContent,{illustration:r.createElement(P,null),title:s},r.createElement(L,{previewKey:e,fileViewerId:a,extractConfig:n,fileConfig:i}))},t.Unavailable.displayName="Unavailable",t.Unavailable.displayName="Unavailable";t.DataFetchFailure=({fileMetadata:e})=>{const i=(0,c.useIntl)(),a=e?i.formatMessage({id:"ejp+g5",defaultMessage:"{extension} files are supported but something went wrong."},{extension:(0,E.getFileExtension)(e.file_name)}):i.formatMessage({id:"0ljH1z",defaultMessage:"This file cannot be previewed"});return r.createElement(t.ErrorContent,{illustration:r.createElement(P,null),title:a})},t.DataFetchFailure.displayName="DataFetchFailure",t.DataFetchFailure.displayName="DataFetchFailure";t.NoExtension=({fileViewerId:e,previewKey:i,extractConfig:a,fileConfig:n})=>{const s=(0,c.useIntl)();return r.createElement(t.ErrorContent,{illustration:r.createElement(P,null),title:s.formatMessage({id:"vbytsy",defaultMessage:"Files without extensions cannot be previewed"})},r.createElement(L,{previewKey:i,fileViewerId:e,extractConfig:a,fileConfig:n}))},t.NoExtension.displayName="NoExtension",t.NoExtension.displayName="NoExtension";t.FileTooLarge=({fileMetadata:e,previewKey:i,previewMetadata:a,fileViewerId:n,config:s,fileConfig:o,extractConfig:l={canExtract:!1}})=>{const d=(0,c.useIntl)();return r.createElement(t.ErrorContent,{illustration:r.createElement(I,null),title:d.formatMessage({id:"Jap7oN",defaultMessage:"This file is too big to preview"}),message:d.formatMessage({id:"CaboZW",defaultMessage:"The maximum size for {extension} files is {size}"},{extension:e?(0,E.getFileExtension)(e.file_name):"",size:(0,f.formatBytes)((0,u.getFileSizeLimit)(e?e.file_name:"",(0,g.resolvePreviewType)(a),s),d)})},r.createElement(L,{previewKey:i,fileViewerId:n,extractConfig:l,fileConfig:o}))},t.FileTooLarge.displayName="FileTooLarge",t.FileTooLarge.displayName="FileTooLarge";t.FileUploading=({fileViewerId:e,previewKey:i,extractConfig:a,fileConfig:n})=>{const s=(0,c.useIntl)();return r.createElement(t.ErrorContent,{illustration:r.createElement(T,null),title:s.formatMessage({id:"fz7GLr",defaultMessage:"File is uploading"})},r.createElement(L,{previewKey:i,fileViewerId:e,extractConfig:a,fileConfig:n}))},t.FileUploading.displayName="FileUploading",t.FileUploading.displayName="FileUploading";t.UserOffline=({fileViewerId:e,previewKey:i,extractConfig:a,fileConfig:n})=>{const s=(0,c.useIntl)();return r.createElement(t.ErrorContent,{illustration:r.createElement(P,null),title:s.formatMessage({id:"jZUA7r",defaultMessage:"This file cannot be previewed because you are offline"})},r.createElement(L,{previewKey:i,fileViewerId:e,extractConfig:a,fileConfig:n}))},t.UserOffline.displayName="UserOffline",t.UserOffline.displayName="UserOffline";const C=e=>{switch(e.error.type){case v.FVErrorCode.UnsupportedPreviewType:return r.createElement(t.FiletypeNotSupported,Object.assign({},e));case v.FVErrorCode.NoExtension:return r.createElement(t.NoExtension,Object.assign({},e));case v.FVErrorCode.FileTooLarge:return r.createElement(t.FileTooLarge,Object.assign({},e));case v.FVErrorCode.PasswordProtected:return r.createElement(t.PasswordProtected,{fileName:e.fileMetadata?e.fileMetadata.file_name:""});case v.FVErrorCode.FileUploading:return r.createElement(t.FileUploading,Object.assign({},e));case v.FVErrorCode.UserOffline:return r.createElement(t.UserOffline,Object.assign({},e));case v.FVErrorCode.RivieraDataFetchFailure:case v.FVErrorCode.PreviewsDataApiFailure:case v.FVErrorCode.MalformedPreviewsDataApiResponse:case v.FVErrorCode.MalformedRivieraData:return r.createElement(t.DataFetchFailure,Object.assign({},e));case v.FVErrorCode.Unknown:case v.FVErrorCode.FileSwitched:case v.FVErrorCode.InvalidFileInfo:case v.FVErrorCode.InvalidLoggingOrder:case v.FVErrorCode.InvalidLoggingSession:case v.FVErrorCode.MissingContentMetadata:return r.createElement(t.Unavailable,Object.assign({},e))}};t.TestOnlyErrorPage=C,C.displayName="ErrorPage",C.displayName="ErrorPage";t.PreviewErrorBase=e=>{var t;const{extractConfig:i,previewKey:a,fileViewerId:s,pluginProps:o,activePluginInstance:l,header:c,onComponentRendered:d,onInteractive:u,error:v}=e,f=(0,b.useDispatch)(),{fileMetadata:g,previewMetadata:E}=null!==(t=(0,h.usePreviewState)(s,a,()=>({}),e=>e))&&void 0!==t?t:{};r.useEffect(()=>{d(),u()},[u,d]),r.useEffect(()=>(v&&f((0,_.setFileViewerErrorAction)({fileViewerId:s,error:v})),()=>{v&&f((0,_.setFileViewerErrorAction)({fileViewerId:s,error:void 0}))}),[s,a]);const m=(null==i?void 0:i.canExtract)&&g?r.createElement(p.ArchiveSnackBar,{filePreviewUiData:i.filePreviewUiData,previewKey:a,fileViewerId:s}):null;return r.createElement("div",{className:n.headerContainer},o&&r.createElement(w.PluginHeader,{pluginProps:o,activePluginInstance:l||void 0,header:c}),m,r.createElement(C,Object.assign({},e,{fileMetadata:g,previewMetadata:E})))},t.PreviewErrorBase.displayName="PreviewErrorBase";t.PreviewRenderError=e=>r.createElement(t.PreviewErrorBase,Object.assign({onComponentRendered:e.onRenderFailed},e)),t.PreviewRenderError.displayName="PreviewRenderError";t.PreviewBootstrapError=e=>r.createElement(t.PreviewErrorBase,Object.assign({onComponentRendered:e.onSetPreviewLoaded},e)),t.PreviewBootstrapError.displayName="PreviewBootstrapError",t.PreviewRenderError.displayName="PreviewRenderError",t.PreviewBootstrapError.displayName="PreviewBootstrapError",t.PreviewErrorBase.displayName="PreviewErrorBase"})),define("typescript/libraries/file-viewer/src/preview_doc/sidebar",["require","exports","tslib","react","classnames","typescript/libraries/file-viewer/src/preview_doc/doc_sidebar.module.css","lodash","typescript/libraries/file-viewer/src/core/utils/functions","dig-components/progress_indicators"],(function(e,t,i,r,a,n,s,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sidebar=t.InternalSidebarItem=t.SIDEBAR_WIDTH=void 0,r=i.__importStar(r),a=i.__importDefault(a),n=i.__importStar(n),t.SIDEBAR_WIDTH=parseInt(n.sidebarWidth,10);const c=parseInt(n.thumbnailWidth,10),d=parseInt(n.border,10),p=c-2*d;class u extends r.Component{constructor(){super(...arguments),this.state={error:!1,loaded:!1},this.handleLoad=e=>{this.setState({loaded:!0})},this.handleError=e=>{this.setState({error:!0})}}componentDidUpdate(e){!0===this.props.isSidebarFocused&&!0===this.props.isSelected&&!0!==e.isSelected&&this.ref&&this.ref.focus()}render(){const{isSelected:e,onClick:t,index:i,css:n,intl:s,thumbnailUrl:o,aspectRatio:c,isVisible:u,isEditMode:_,isSidebarFocused:v,top:f}=this.props,{error:g,loaded:E}=this.state,w=i+1,b=s.formatMessage({id:"HL27OJ",defaultMessage:"Page {index}"},{index:w});return r.createElement("li",{"data-index":i,style:{transform:`translateY(${f}px`}},r.createElement("a",{href:"#",onClick:e=>{e.preventDefault(),t(i)},tabIndex:-1,"aria-current":e?"page":void 0,"aria-label":b,ref:e=>null!=e&&(this.ref=e)},r.createElement("div",{className:(0,a.default)(n.thumbnail,{[n.selected]:e,[n.isUnfocusedInEditMode]:_&&!v}),style:{height:p*c+2*d}},!u||(g||E)&&o?void 0:r.createElement(l.Spinner,{className:n.loader,size:"xsmall"}),u&&o&&!g?r.createElement("img",{src:o,onLoad:this.handleLoad,onError:this.handleError,alt:""}):void 0),r.createElement("span",{"aria-hidden":!0},w)))}}t.InternalSidebarItem=u,u.displayName="InternalSidebarItem";class _ extends r.Component{constructor(){super(...arguments),this.containerHeight=0,this.state={startPage:0,endPage:0,startPageNoBuffer:0,endPageNoBuffer:0,pagesScrollTop:[],totalPagesHeight:0},this.handleScrollTo=(0,s.throttle)(e=>{this.nav&&(this.nav.scrollTop=this.state.pagesScrollTop[e])},50,{leading:!1,trailing:!0}),this.handleScrollTopChange=()=>{this.ol&&this.setStateForStartAndEndPage(this.state.pagesScrollTop)},this.throttledHandleScrollTopChange=(0,s.throttle)(()=>this.handleScrollTopChange(),50,{leading:!0})}computeScrollTops(){const{pages:e}=this.props;if(0==e.length)return[];const t=[16];let i=16;for(let r=0;r<e.length-1;++r){const a=e[r].dimension,n=p*a[1]/a[0]+2*d+16+20;t.push(i+n),i+=n}const r=e[e.length-1].dimension,a=i+(p*r[1]/r[0]+2*d)+32;return this.state.totalPagesHeight=a,this.setState({pagesScrollTop:t,totalPagesHeight:a}),t}scrollToItemIfNeeded(e){const{startPageNoBuffer:t,endPageNoBuffer:i}=this.state,{pages:r}=this.props;e<0||e>=r.length||!this.nav||(e<t||e>=i)&&this.handleScrollTo(e)}setStateForStartAndEndPage(e){const[t,i]=[(0,s.sortedIndex)(e,this.nav.scrollTop),(0,s.sortedIndex)(e,this.nav.scrollTop+this.nav.offsetHeight)];this.setState({startPageNoBuffer:t,endPageNoBuffer:i,startPage:Math.max(0,t-10),endPage:Math.min(this.props.pages.length-1,i+10)})}shouldComponentUpdate(e,t){const r=this.props,{pages:a}=r,n=i.__rest(r,["pages"]),{pages:s}=e,l=i.__rest(e,["pages"]);return!(0,o.shallowEqual)(n,l)||!(0,o.shallowEqual)(this.state,t)||!(function(e,t){return e.length===t.length&&!e.find((e,i)=>e.thumbnailUrl!==t[i].thumbnailUrl)})(a,s)}componentDidMount(){const e=this.computeScrollTops();this.setStateForStartAndEndPage(e),this.containerHeight=this.nav.offsetHeight}componentDidUpdate(e){this.nav&&this.nav.offsetHeight!==this.containerHeight&&(this.setStateForStartAndEndPage(this.state.pagesScrollTop),this.containerHeight=this.nav.offsetHeight),(this.props.currentPageIndex!==e.currentPageIndex||this.props.isOpened&&!e.isOpened)&&this.scrollToItemIfNeeded(this.props.currentPageIndex)}render(){const{currentPageIndex:e,isFocused:t,onBlur:i,onFocus:s,pages:o,intl:l,style:c,isOpened:d,isEditMode:p}=this.props,{startPage:_,endPage:v,totalPagesHeight:f}=this.state,g=o.slice(_,v+1).map((i,a)=>{const s=a+_;return r.createElement(u,{key:s,isSelected:e===s,onClick:this.props.onPageChange,index:s,intl:l,thumbnailUrl:i.thumbnailUrl,css:n,isVisible:!0,aspectRatio:i.dimension[1]/i.dimension[0],isSidebarFocused:!0===t,isEditMode:p,top:this.state.pagesScrollTop[s]})}),E={height:f,display:d?void 0:"none"};return r.createElement("div",{className:(0,a.default)(n.container,n.containerBorder,{[n.focused]:t,[n.open]:d,[n.isEditMode]:p}),"aria-label":l.formatMessage({id:"HzLiwF",defaultMessage:"Document Sidebar"}),style:c,ref:e=>{this.nav=e},onScroll:this.throttledHandleScrollTopChange},r.createElement("ol",{"aria-label":l.formatMessage({id:"J/2gSB",defaultMessage:"Page list"}),ref:e=>this.ol=e,tabIndex:d?0:-1,onFocus:s,onBlur:i,style:E},g))}}t.Sidebar=_,_.defaultProps={currentPageIndex:0,pages:[],onPageChange:function(){}},_.displayName="Sidebar"})),define("typescript/libraries/file-viewer/src/preview_doc/renderer/preview_doc",["require","exports","tslib","react","typescript/libraries/file-viewer/src/preview_doc/renderer/ppt","typescript/libraries/file-viewer/src/preview_doc/renderer/pdf","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/preview_doc/data_transform","typescript/libraries/file-viewer/src/preview_core.module.css","typescript/libraries/file-viewer/src/preview_doc/password_modal","typescript/libraries/file-viewer/src/preview_error/preview_error","typescript/libraries/file-viewer/src/preview_doc/layers","typescript/libraries/file-viewer/src/core/utils/functions","typescript/libraries/file-viewer/src/plugins/utils","typescript/libraries/file-viewer/src/core/types/constants","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/riviera/types","typescript/libraries/file-viewer/src/core/types/errors","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/core/utils/invariant","typescript/libraries/file-viewer/src/toolbar/configuration","typescript/libraries/file-viewer/src/preview_doc/renderer/find_in_doc/find_in_doc_controller","typescript/libraries/file-viewer/src/preview_doc/renderer/find_in_doc/find_in_doc_searchbar","typescript/libraries/file-viewer/src/preview_doc/utils/sizing","typescript/libraries/file-viewer/src/core/utils/paths","typescript/libraries/file-viewer/src/logging/performance","typescript/libraries/file-viewer/src/keyboard/bindings","typescript/libraries/file-viewer/src/keyboard/keyboard_connector","typescript/libraries/file-viewer/src/toolbar/toolbar_actions","typescript/libraries/file-viewer/src/hooks/selectors","typescript/libraries/file-viewer/src/core/data/utils","react-intl","react-redux","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f,g,E,w,b,m,h,y,P,T,I,F,S,L,C,A,O,x,D,R){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewDoc=t.UnconnectedPreviewDoc=void 0,r=i.__importStar(r);const M=[".docx",".pptx"];class N extends r.PureComponent{constructor(e){super(e),this.state={failedPasswordAttempt:0,passwordDismissed:!1,transformedData:this.props.rivieraData&&(0,l.transformData)(this.props.rivieraData)},this.pageRefs={},this.capturePageRef=(e,t)=>{null==t?delete this.pageRefs[e]:this.pageRefs[e]={el:t,pageIndex:e}},this.handlePageChange=(e,t)=>{this.props.dispatch((0,g.updateDocCurrentPageIndex)({fileViewerId:this.props.fileViewerId,previewKey:this.props.previewKey,pageIndex:e,sourceContext:t}))},this.handlePdfPageChange=e=>{this.handlePageChange(e,o.UserActionContext.MouseWheel)},this.getPageForSelection=e=>{if(null!=e)for(const{pageIndex:t,el:i}of Object.values(this.pageRefs))if(null!=i&&null!=e.anchorNode&&e.anchorNode.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINS&&null!=e.focusNode&&e.focusNode.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINS)return t},this.handlePasswordSubmit=e=>{const{fileViewerId:t,previewKey:i,previewMetadata:r}=this.props;if(!r||!r.content)return;const{refresh_url:a,text_url_tmpl:n,image_url_tmpl:s}=r.content;(0,m.invariant)(!!a,w.FVErrorCode.MalformedRivieraData,"Cannot send password! Missing refresh_url from preview metadata"),this.props.dispatch((0,g.refreshBlobAction)({fileViewerId:t,previewKey:i,refreshUrl:a,oldPreview:{text_url_tmpl:n,image_url_tmpl:s},password:e}))},this.handlePasswordDismiss=()=>{this.setState({passwordDismissed:!0})},this.fetchPageDataWithMetadata=(e,t,i)=>{const r=(0,_.calculatePageRange)(e,this.props.config.partial_prewarm_allowed);if(t&&(r[0]!==this.metadataBatchPageRange[0]||r[1]!==this.metadataBatchPageRange[1])){const[e,a]=this.metadataBatchPageRange=r;this.props.dispatch((0,g.fetchPageDataWithMetadata)({fileViewerId:this.props.fileViewerId,previewKey:i,textUrlTmpl:t.content.text_url_tmpl,startPage:e,endPage:a}))}},this.onRenderSucceeded=()=>{this.props.onRenderSucceeded(),this.fetchPageDataWithMetadata(this.props.filePreviewUiData.currentPageIndex,this.props.previewMetadata,this.props.previewKey)},this.zoomIn=()=>{const{dispatch:e,fileViewerId:t,previewKey:i}=this.props;e((0,g.zoomIn)({fileViewerId:t,previewKey:i,sourceContext:o.UserActionContext.Keyboard}))},this.zoomOut=()=>{const{dispatch:e,fileViewerId:t,previewKey:i}=this.props;e((0,g.zoomOut)({fileViewerId:t,previewKey:i,sourceContext:o.UserActionContext.Keyboard}))},this.logFindAction=(e,t,i)=>{this.props.dispatch((0,s.logUserActionEvent)({userAction:e,fileViewerId:this.props.fileViewerId,actionContext:t,extra:{find_method:i}}))},this.findInDoc=e=>{this.state.findInDoc&&(this.logFindAction(o.UserAction.FindInDocStart,"keyboard"===e?o.UserActionContext.Keyboard:o.UserActionContext.Toolbar,e),this.state.findInDoc.controller.initializeSearch(),this.setState({findInDoc:Object.assign(Object.assign({},this.state.findInDoc),{searchbarShown:!0})}))},this.closeFindInDoc=e=>{this.state.findInDoc&&(this.logFindAction(o.UserAction.FindInDocEnd,"keyboard"===e?o.UserActionContext.Keyboard:o.UserActionContext.FindInDocSearchbar,e),this.state.findInDoc.controller.onReset(),this.setState({findInDoc:Object.assign(Object.assign({},this.state.findInDoc),{searchbarShown:!1,searchResult:void 0})}))},this.keyboardBindings=[...(0,S.getZoomInOutBindings)({zoomIn:this.zoomIn,zoomOut:this.zoomOut}),(0,S.getBrowserFindBinding)(()=>this.logFindAction(o.UserAction.FindInDocStart,o.UserActionContext.Keyboard,"keyboard")),(0,S.getFindInDocBinding)(()=>this.findInDoc("keyboard"))],e.config.partial_prewarm_allowed?this.metadataBatchPageRange=[0,f.TEXT_FIRST_BATCH_SIZE]:this.metadataBatchPageRange=[0,50],F.PreviewsEventLogger.mark(F.PreviewsTimingEvents.FVSDK_DOC_CONTAINER_START),this.state.findInDoc={searchbarShown:!1,controller:new y.FindInDocController({fileViewerId:e.fileViewerId,previewKey:e.previewKey,dispatch:e.dispatch,retrievePages:()=>{var e,t;return null!==(t=null===(e=this.props.rivieraData)||void 0===e?void 0:e.pages)&&void 0!==t?t:[]},previewMetadata:e.previewMetadata,rivieraData:e.rivieraData,onSearchResult:e=>{this.state.findInDoc&&this.setState({findInDoc:Object.assign(Object.assign({},this.state.findInDoc),{searchResult:e})})}})}}recalculateFitScaleFactor(e=this.props){var t;const{rivieraData:i,fileViewerId:r,previewKey:a,width:n,height:s,dispatch:o,responsiveSize:l,config:c}=e;if(!i||!i.metadata)return;const d=(0,T.shouldShowDocSidebar)(n,b.PreviewType.SsrDoc)&&e.fileViewerUiData.isDocSidebarOpen,p=null===(t=this.props.fileMetadata)||void 0===t?void 0:t.file_name,u=!(0,h.noToolbarShown)(l,c),{scaleToFit:_,maxWidth:v}=this.props.config.preview_types[b.PreviewType.SsrDoc],f=(0,T.calculateDocumentScaleFactor)({width:n,height:s,dimensions:i.metadata.dimensions,isDocSidebarVisible:d,scaleToFit:_,toolbarShown:u,fileName:p,maxWidth:v});o((0,g.updateFitScaleFactor)({fileViewerId:r,previewKey:a,fitScaleFactor:f}))}componentDidMount(){this.props.fileMetadata&&M.includes((0,I.getFileExtension)(this.props.fileMetadata.file_name))&&this.props.dispatch((0,g.triggerDynamicRoutingModalCheck)()),this.recalculateFitScaleFactor(),F.PreviewsEventLogger.mark(F.PreviewsTimingEvents.FVSDK_DOC_CONTAINER_MOUNT),null!=this.props.pluginQueryBus&&this.props.pluginQueryBus.handleQuery("getPageForSelection",this.getPageForSelection)}UNSAFE_componentWillReceiveProps(e){const{rivieraData:t,previewMetadata:i}=e;e.previewKey.serialized!==this.props.previewKey.serialized?this.setState({failedPasswordAttempt:0,passwordDismissed:!1}):t&&t!==this.props.rivieraData&&t.error&&t.error.statusCode===E.RivieraStatus.PasswordProtected&&this.setState({failedPasswordAttempt:this.state.failedPasswordAttempt+1}),t!==this.props.rivieraData&&this.setState({transformedData:t&&(0,l.transformData)(t)});const{currentPageIndex:r}=e.filePreviewUiData,[a,n]=this.metadataBatchPageRange;!(r>=a&&r<n)&&t&&i&&(0,_.canPreviewInPreviewDoc)(i)&&this.fetchPageDataWithMetadata(r,i,e.previewKey),this.recalculateFitScaleFactor(e)}render(){var e,t;const{fileMetadata:i,filePreviewUiData:s,height:o,width:l,brandingInfo:_,sharedLinkInfo:f}=this.props,{failedPasswordAttempt:g,transformedData:b,passwordDismissed:m,findInDoc:h}=this.state,y=i?i.file_name:"";if(null===(e=this.props.rivieraData)||void 0===e?void 0:e.error){const e=this.props.rivieraData.error.statusCode!==E.RivieraStatus.PasswordProtected?new w.FVError(w.FVErrorCode.RivieraDataFetchFailure,this.props.rivieraData.error.message):m||g>3?new w.FVError(w.FVErrorCode.PasswordProtected):void 0;return e?r.createElement(p.PreviewRenderError,Object.assign({},this.props,{error:e})):r.createElement(d.PasswordModal,{passwordAttempt:g,onSubmit:this.handlePasswordSubmit,onDismiss:this.handlePasswordDismiss,fileName:y})}const I=T.DOC_PAGE_MARGIN+T.DOC_PAGE_MARGIN_LEFT,F=Math.round(100*(l-I-T.DOC_SIDEBAR_WIDTH)/window.innerWidth/window.devicePixelRatio),S=Object.assign(Object.assign({},s),{viewportWidth:F}),A=Object.assign(Object.assign({},this.props),{onRenderSucceeded:this.onRenderSucceeded,filePreviewUiData:S,data:(b||[]).filter(e=>e),onPageChange:this.handlePdfPageChange,layerRenderFn:u.defaultLayerRenderFn,pageNavigation:s.pageNavigation,onFindInDoc:()=>this.findInDoc("click"),findInDocData:null==h?void 0:h.searchResult,findInDocController:null==h?void 0:h.controller,brandingInfo:_,sharedLinkInfo:f});return r.createElement("div",{className:c.app,style:{width:l,height:o}},r.createElement(C.ToolbarActionWrapper,{onFindInDoc:()=>this.findInDoc("click")},(0,T.isPpt)(y)?r.createElement(a.PreviewPPT,Object.assign({},A,{onPageChange:this.handlePageChange,onPageRef:this.capturePageRef})):r.createElement(n.PreviewPDF,Object.assign({},A,{isEditMode:(0,v.isPluginEditMode)(null===(t=this.props.activePluginInstance)||void 0===t?void 0:t.mode),onPageRef:this.capturePageRef}))),h&&h.searchbarShown&&r.createElement(P.FindInDocSearchbar,{onClose:this.closeFindInDoc,controller:h.controller}),r.createElement(L.KeyboardBindingConnector,{name:"preview_doc",keyboardBindings:this.keyboardBindings}))}}t.UnconnectedPreviewDoc=N,N.displayName="UnconnectedPreviewDoc";t.PreviewDoc=e=>{const{fileViewerId:t,previewKey:i}=e,a=(0,x.useIntl)(),n=(0,D.useDispatch)(),s=(0,A.useFileViewerSelector)(t,R.getSharedLinkInfo),o=(0,A.useFileViewerSelector)(t,R.getBrandingInfo),l=(0,A.usePreviewState)(t,i,O.filterDocPreviewRivieraData,O.filterDocFilePreviewUiState);return l?r.createElement(N,Object.assign({},e,l,{intl:a,dispatch:n,sharedLinkInfo:s,brandingInfo:o})):null},t.PreviewDoc.displayName="PreviewDoc"})),define("typescript/libraries/file-viewer/src/open_with_native/open_with_button",["require","exports","tslib","classnames","react","dig-components/buttons","typescript/libraries/file-viewer/src/core/logging/constants","react-redux","react-intl","typescript/libraries/file-viewer/src/core/data/selectors","dig-components/icons/src","dig-components/icons","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpenWithButton=t.UnconnectedOpenWithButton=void 0,r=i.__importDefault(r),a=i.__importStar(a);t.UnconnectedOpenWithButton=({previewKey:e,fileViewerId:t,className:i="",sourceContext:c=s.UserActionContext.RightRail})=>{const _=(0,l.useIntl)(),v=(0,o.useDispatch)();if(!e)return null;const f=a.createElement(p.UIIcon,{src:d.OpenLine});return a.createElement(n.Button,{size:"standard",onClick:()=>v((0,u.openWith)({fileViewerId:t,previewKey:e,sourceContext:c})),variant:"outline",className:(0,r.default)(i),withIconLeft:f},_.formatMessage({id:"tB7wey",defaultMessage:"Open"}))},t.UnconnectedOpenWithButton.displayName="UnconnectedOpenWithButton",t.OpenWithButton=(0,o.connect)((function(e,t){const{fileViewerId:i}=t;return{previewKey:(0,c.getCurrentPreviewKey)(e,i)}}))(t.UnconnectedOpenWithButton)})),define("typescript/libraries/file-viewer/src/toolbar/configuration",["require","exports","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","typescript/libraries/file-viewer/src/core/types/preview_type"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noToolbarShown=t.getToolbarConfigByPreviewType=t.getToolbarConfigForEditMode=t.baseToolbarConfig=void 0,t.baseToolbarConfig={docSidebar:!1,fileFlipping:!1,fullscreen:!1,pageNavigation:!1,print:!1,zooming:!1,findInDocument:!1};t.getToolbarConfigForEditMode=e=>{switch(e){case r.PreviewType.SsrDoc:case r.PreviewType.CloudDoc:return{docSidebar:!0,fullscreen:!1,pageNavigation:!0,print:!1,zooming:!0,fileFlipping:!1,findInDocument:!1};case r.PreviewType.Image:return{docSidebar:!1,fullscreen:!1,pageNavigation:!1,print:!1,zooming:!0,fileFlipping:!1,findInDocument:!1};default:return{docSidebar:!1,fullscreen:!1,pageNavigation:!1,print:!1,zooming:!1,fileFlipping:!1,findInDocument:!1}}};t.getToolbarConfigByPreviewType=(e,i,a)=>{const n=((e,t)=>({docSidebar:!e.preview_content_only,fileFlipping:e.file_flipping,fullscreen:e.enable_fullscreen,print:t.enable_print||!1}))(i,a),s=(e=>{switch(e){case r.PreviewType.SsrDoc:return{docSidebar:!0,fullscreen:!0,pageNavigation:!0,print:!0,zooming:!0,findInDocument:!0};case r.PreviewType.CloudDoc:return{docSidebar:!0,fullscreen:!0,pageNavigation:!0,print:!0,zooming:!0,findInDocument:!1};case r.PreviewType.Image:return{docSidebar:!1,fullscreen:!0,pageNavigation:!1,print:!0,zooming:!0,findInDocument:!1};case r.PreviewType.HTML:return{docSidebar:!1,fullscreen:!0,print:!0,findInDocument:!1};case r.PreviewType.RawHTML:return{docSidebar:!1,fullscreen:!0,print:!1,findInDocument:!1};case r.PreviewType.Excel:return{docSidebar:!1,fullscreen:!0,print:!0,zooming:!0,pageNavigation:!1,findInDocument:!1};default:return{docSidebar:!1,fullscreen:!1,pageNavigation:!1,print:!1,findInDocument:!1}}})(e);let o=t.baseToolbarConfig;for(const e in t.baseToolbarConfig){const t=e;t in n&&t in s?o=Object.assign(Object.assign({},o),{[t]:n[t]&&s[t]}):t in n&&!(t in s)?o=Object.assign(Object.assign({},o),{[t]:n[t]}):t in s&&!(t in n)&&(o=Object.assign(Object.assign({},o),{[t]:s[t]}))}return o};t.noToolbarShown=(e,t)=>e===i.ResponsiveSize.MOBILE||t.mobile_web||t.force_no_toolbar})),define("typescript/libraries/file-viewer/src/toolbar/file_name_display",["require","exports","tslib","react","react-redux","ts-key-enum","dig-components/click_outside","dig-components/text_fields","dig-components/truncate","dig-components/typography","typescript/libraries/file-viewer/src/toolbar/toolbar.module.css","typescript/libraries/file-viewer/src/preview_archive/preview_archive.module.css","typescript/libraries/file-viewer/src/preview_archive/breadcrumbs","typescript/libraries/file-viewer/src/core/utils/browser_detection","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/logging/constants","classnames"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f,g,E,w){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileNameDisplay=void 0,r=i.__importDefault(r),d=i.__importStar(d),p=i.__importStar(p),_=i.__importStar(_),w=i.__importDefault(w);t.FileNameDisplay=({intl:e,allowRename:t,fileViewerId:i,previewKey:b,filename:m,rootArchiveFileInformation:h,currentPath:y,showInverse:P,isEditingFilename:T})=>{const I=(0,a.useDispatch)(),F=r.default.useRef(null),[S,L]=r.default.useState(null!=m?m:"");r.default.useEffect(()=>{window.requestAnimationFrame(()=>{if(!F.current)return;F.current.focus();const e=null!=m?m:"";let t=e.lastIndexOf(".");t<0&&(t=e.length),F.current.setSelectionRange(0,t)})},[m,T]),r.default.useEffect(()=>()=>{I((0,f.setToolbarRenameActive)({isActive:!1}))},[I]);const C=e=>{m!==(null!=e?e:S)?I((0,f.renameFile)({fileViewerId:i,previewKey:b,sourceContext:v.UserActionContext.Toolbar,newFilename:null!=e?e:S})):L(null!=m?m:""),I((0,f.setToolbarRenameActive)({isActive:!1}))},A=r.default.useRef(null),[O,x]=r.default.useState();return m?h&&Array.isArray(y)?r.default.createElement("div",{className:p.titlebarV2Breadcrumbs},r.default.createElement(c.Text,{color:P?"standard":"faint",isBold:!0,inverse:P},r.default.createElement(u.ArchiveFileBreadcrumbs,{archiveName:m,currentPath:y,fileViewerId:i,previewKey:h.previewKey,dispatch:I,showInverse:P}))):T?r.default.createElement(s.ClickOutside,{isClickThroughPortaled:!1,shouldPropagateMouseEvents:!0,isActive:!0,onClickOutside:()=>{var e;return C(null===(e=null==F?void 0:F.current)||void 0===e?void 0:e.value)}},r.default.createElement("div",{style:O},r.default.createElement(o.TextInput,{className:d.toolbarFilename,ref:F,"aria-label":e.formatMessage({id:"XlFxo+",defaultMessage:"filename"}),isTransparent:!0,value:S,onChange:e=>L(e.currentTarget.value),inverse:P,onKeyDown:e=>{e.key===n.Key.Enter?C():e.key===n.Key.Escape&&(L(m),I((0,f.setToolbarRenameActive)({isActive:!1})))}}))):r.default.createElement("div",{ref:A,className:d.toolbarFilenameSectionTitle},r.default.createElement(l.Truncate,{className:(0,w.default)("fvsdk__toolbar-filename",d.toolbarFilename),location:_.safari?1:.5,tooltipControlProps:{placement:"top"},onDoubleClick:t?()=>{A.current&&x({minWidth:A.current.offsetWidth}),L(m),I((0,f.setToolbarRenameActive)({isActive:!0})),I((0,g.logUserActionEvent)({userAction:E.UserAction.Rename,fileViewerId:i,actionContext:v.UserActionContext.Toolbar}))}:void 0,title:m},m)):r.default.createElement(r.default.Fragment,null)},t.FileNameDisplay.displayName="FileNameDisplay"})),define("typescript/libraries/file-viewer/src/toolbar/snackbar_listener",["require","exports","tslib","react"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useIsSnackbarOpen=void 0,r=i.__importStar(r);t.useIsSnackbarOpen=e=>{const[t,i]=r.useState(e);return r.useEffect(()=>{const e=()=>{i(!0)},t=()=>{i(!1)};return document.addEventListener("snackbar_shown",e),document.addEventListener("snackbar_hidden",t),()=>{document.removeEventListener("snackbar_shown",e),document.removeEventListener("snackbar_hidden",t)}},[]),t}})),define("typescript/libraries/file-viewer/src/toolbar/toolbar",["require","exports","tslib","react","react-intl","react-redux","classnames","typescript/libraries/file-viewer/src/toolbar/toolbar.module.css","typescript/libraries/file-viewer/src/toolbar/configuration","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/toolbar/toolbar_flip_buttons","typescript/libraries/file-viewer/src/toolbar/toolbar_buttons","typescript/libraries/file-viewer/src/toolbar/useShowAndStayOnHover","typescript/libraries/file-viewer/src/toolbar/snackbar_listener","typescript/libraries/file-viewer/src/plugins/types","typescript/libraries/file-viewer/src/plugins/selectors/active_plugin","typescript/libraries/file-viewer/src/toolbar/toolbar_file_counter","typescript/libraries/file-viewer/src/preview_doc/utils/sizing","typescript/libraries/file-viewer/src/render_context","typescript/libraries/file-viewer/src/hooks/selectors","typescript/libraries/file-viewer/src/file_viewer/context_provider","typescript/libraries/file-viewer/src/toolbar/utils","typescript/libraries/file-viewer/src/toolbar/file_name_display","typescript/libraries/file-viewer/src/toolbar/toolbar_actions","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/ui/animations","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f,g,E,w,b,m,h,y,P,T,I,F){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurableToolbar=void 0,r=i.__importDefault(r),s=i.__importDefault(s),o=i.__importStar(o);const S=r.default.lazy(()=>i.__awaiter(void 0,void 0,void 0,(function*(){const{VideoControlRow:t}=yield new Promise((t,i)=>{e(["typescript/libraries/file-viewer/src/toolbar/toolbar_video_controls"],t,i)}).then(i.__importStar);return{default:t}}))),L=e=>r.default.createElement(r.default.Suspense,{fallback:r.default.createElement(A,null)},r.default.createElement(S,Object.assign({},e)));L.displayName="VideoControlRow";const C=({className:e,children:t})=>r.default.createElement("div",{className:(0,s.default)(o.toolbarSection,e)},t);C.displayName="ToolbarSection";const A=({className:e,children:t})=>r.default.createElement("div",{className:(0,s.default)(o.toolbarRow,e)},t);A.displayName="ToolbarRow";const O=({intl:e,allowRename:t,rootArchiveFileInformation:i,fileMetadata:a,filePreviewUi:n,showInverse:l,fileViewerId:c,previewKey:d,hasFileCounter:p,plugins:u,isEditingFilename:_})=>{let v=null;const f=null==u?void 0:u.star;v=r.default.createElement(y.FileNameDisplay,{intl:e,allowRename:t,fileViewerId:c,previewKey:d,filename:(null==i?void 0:i.fileName)||(null==a?void 0:a.file_name),rootArchiveFileInformation:i,currentPath:null==n?void 0:n.currentPath,showInverse:l,isEditingFilename:_});const E=r.default.createElement(r.default.Fragment,null,v,f&&r.default.createElement(f,{className:o.toolbarStar}));return r.default.createElement(A,{className:o.toolbarFilenameRow},p?r.default.createElement(r.default.Fragment,null,r.default.createElement(C,{className:(0,s.default)(o.toolbarFilenameSection,{[o.toolbarFilenameSectionTitle]:!_})},E),r.default.createElement(C,{className:o.toolbarCounterSection},r.default.createElement(g.ToolbarFileCounter,{fileCollectionContext:null==a?void 0:a.file_collection_context}))):E)};O.displayName="FileInfoRow";const x=({intl:e,toolbarConfig:t,filePreviewUi:i,fileRivieraData:a,scaleFactor:s,rendererWidth:o,previewType:l,useOverflowMenu:c,isDocSidebarOpen:d,plugins:u,fittedScaleFactor:_,isSidebarEnable:v})=>{const f=t.zooming,g=t.fullscreen,w=t.pageNavigation,b=t.findInDocument,m=t.print,h=!!o&&!(0,E.shouldShowDocSidebar)(o,l),y=(0,n.useSelector)(F.getIsPreviewLoading),P=null==u?void 0:u.imageCropRotate,T=v?r.default.createElement(p.SidebarToggleButton,{isSidebarOpen:d,disabled:h,isInMenu:c}):null,I=r.default.createElement(r.default.Fragment,null,b&&r.default.createElement(p.FindInDocumentButton,{isMenuItem:c}),m&&r.default.createElement(p.PrintButton,{isMenuItem:c}));return y?r.default.createElement(A,null):r.default.createElement(A,null,r.default.createElement(C,null,f&&null!=s&&r.default.createElement(r.default.Fragment,null,r.default.createElement(p.ZoomOutButton,{scaleFactor:s}),r.default.createElement(p.ZoomToFitButton,{scaleFactor:s,fittedScaleFactor:_}),r.default.createElement(p.ZoomInButton,{scaleFactor:s})),g&&r.default.createElement(p.FullScreenButton,null)),P&&r.default.createElement(C,null,r.default.createElement(P,null)),r.default.createElement(C,null,w&&r.default.createElement(p.PageNavigationControls,{filePreviewUi:i,fileRivieraData:a}),c?r.default.createElement(p.OverflowMenu,{intl:e},T,I):T),!c&&r.default.createElement(C,null,I))};x.displayName="ControlsRow";t.ConfigurableToolbar=({previewType:e,fileRivieraData:t,filePreviewUi:i,fileViewerUi:p,fileConfig:g,rootArchiveFileInformation:E,showDocSidebar:y,previewMetadata:S,activePluginInstance:C,plugins:A,snackbarManagerPluginInstance:D,forceHideControlRow:R=!1})=>{var M,N,k,V;const j=(0,a.useIntl)(),{featureConfig:Y,fileViewerId:U}=(0,m.useFileViewerContext)(),{rendererWidth:B}=(0,w.useFileViewerRenderContext)(),K=null===(M=(0,b.useCurrentFileInfo)(U))||void 0===M?void 0:M.previewKey,z=(0,b.useCurrentFileMetadata)(K),{videoPlayer:W}=(0,P.useToolbarAction)(),{isShown:H,elementProps:G}=(0,u.useShowAndStayOnHover)(K),q=(0,n.useSelector)(e=>(0,f.isPluginEditMode)(e,U)),X=(0,_.useIsSnackbarOpen)(!!(null==D?void 0:D.isSnackbarVisible())),Z=(0,n.useSelector)(e=>(0,f.isToolbarRenameActive)(e)),$=(0,n.useSelector)(e=>(0,f.getToolBarOverride)(e,U)),J=(0,n.useSelector)(F.getIsPreviewLoading),Q=e===T.PreviewType.Video||e===T.PreviewType.Audio,ee=!!(null==p?void 0:p.isFullScreen),te="hidden"===$,ie=(H||"shown"===$||Z||Q&&!ee)&&!X,re=!!(null==p?void 0:p.isDocSidebarOpen),ae=i&&((null===(N=(0,c.filterZoomableFilePreviewUi)(i))||void 0===N?void 0:N.zoomScaleFactor)||(null===(k=(0,c.filterZoomableFilePreviewUi)(i))||void 0===k?void 0:k.fitScaleFactor))||void 0,ne=i&&(null===(V=(0,c.filterZoomableFilePreviewUi)(i))||void 0===V?void 0:V.fitScaleFactor)||void 0,se=q?(0,l.getToolbarConfigForEditMode)(e):(0,l.getToolbarConfigByPreviewType)(e,Y,g),oe=!ee&&se.docSidebar,le=oe||se.fullscreen||se.pageNavigation||se.print||se.zooming&&null!=ae,ce=B<=450&&oe&&se.fullscreen&&se.pageNavigation&&se.print&&se.zooming&&null!=ae,de=(0,h.isToolbarInverse)(ee,e),pe=re&&oe&&!!y,ue=(le||J)&&!R;return r.default.createElement(r.default.Fragment,null,se.fileFlipping&&r.default.createElement(d.FlipButtons,{isShown:!te&&H,fileCollectionContext:null==z?void 0:z.file_collection_context,flipperCallbacks:G}),r.default.createElement("div",{className:(0,s.default)(o.toolbarHolder,{[o.withSidebar]:pe}),"data-testid":"fvsdk_floating_toolbar"},r.default.createElement(I.SlideAnimation,{active:te,direction:"bottom",distance:400,initial:"in"},r.default.createElement("div",Object.assign({className:(0,s.default)(o.toolbar,{[o.hidden]:!ie,[o.toolbarAudioVideo]:Q,[o.normal]:!de}),role:"toolbar","aria-hidden":te},G),r.default.createElement(O,{intl:j,allowRename:!!(null==z?void 0:z.file_path),rootArchiveFileInformation:E,fileMetadata:z,filePreviewUi:i,showInverse:de,fileViewerId:U,previewKey:K,hasFileCounter:se.fileFlipping,plugins:A,isEditingFilename:Z}),Q&&W?r.default.createElement(L,{player:W,previewKey:K,previewType:e,fileViewerUi:p,fileViewerId:U,previewMetadata:S,fileRivieraData:t,activePluginInstance:(0,v.isRightRailPlugin)(C)?C:void 0,showInverse:de,isShown:ie,featureConfig:Y}):ue&&r.default.createElement(x,{filePreviewUi:i,previewType:e,isDocSidebarOpen:re,fileRivieraData:t,toolbarConfig:se,scaleFactor:ae,fittedScaleFactor:ne,plugins:A,useOverflowMenu:ce,rendererWidth:B,isFullScreen:ee,isSidebarEnable:oe,intl:j})))))},t.ConfigurableToolbar.displayName="ConfigurableToolbar"})),define("typescript/libraries/file-viewer/src/toolbar/toolbar_actions",["require","exports","tslib","react"],(function(e,t,i,r){"use strict";var a,n;Object.defineProperty(t,"__esModule",{value:!0}),t.ToolbarActionWrapper=t.useToolbarAction=t.ToolbarActionProvider=t.ToolbarActionContext=t.DEFAULT_TOOLBAR_ACTION_CONTEXT_VALUE=void 0,r=i.__importDefault(r),(function(e){e.FIND_IN_DOC="onFindInDoc",e.PRINT="onPrint",e.SELECT_VIDEO_QUALITY="onSelectVideoQuality"})(a||(a={})),(function(e){e.VIDEO_PLAYER="videoPlayer"})(n||(n={})),t.DEFAULT_TOOLBAR_ACTION_CONTEXT_VALUE={setters:{},clients:{},callbacks:{}},t.ToolbarActionContext=r.default.createContext(t.DEFAULT_TOOLBAR_ACTION_CONTEXT_VALUE);t.ToolbarActionProvider=e=>{const[i,s]=r.default.useState({}),[o,l]=r.default.useState({}),c=e=>{s(t=>Object.assign(Object.assign({},t),{[a.FIND_IN_DOC]:e}))},d=e=>{s(t=>Object.assign(Object.assign({},t),{[a.PRINT]:e}))},p=e=>{s(t=>Object.assign(Object.assign({},t),{[a.SELECT_VIDEO_QUALITY]:e}))},u=e=>{l(t=>Object.assign(Object.assign({},t),{[n.VIDEO_PLAYER]:e}))},_=r.default.useMemo(()=>({setters:{setFindInDocCallback:c,setPrintCallback:d,setSelectVideoQualityCallback:p,setVideoPlayerClient:u},clients:o,callbacks:i}),[i,o]);return r.default.createElement(t.ToolbarActionContext.Provider,{value:_},e.children)},t.ToolbarActionProvider.displayName="ToolbarActionProvider";t.useToolbarAction=()=>{const{setters:e,clients:i,callbacks:a}=r.default.useContext(t.ToolbarActionContext);return r.default.useMemo(()=>Object.assign(Object.assign(Object.assign({},e),i),a),[e,i,a])};t.ToolbarActionWrapper=e=>{const{onFindInDoc:i,onPrint:a,onSelectVideoQuality:n,videoPlayer:s}=e,{setFindInDocCallback:o,setPrintCallback:l,setSelectVideoQualityCallback:c,setVideoPlayerClient:d}=(0,t.useToolbarAction)();return r.default.useEffect(()=>(i&&(null==o||o(i)),a&&(null==l||l(a)),n&&(null==c||c(n)),s&&(null==d||d(s)),()=>{i&&(null==o||o(void 0)),a&&(null==l||l(void 0)),n&&(null==c||c(void 0)),s&&(null==d||d(void 0))}),[i,a,n,s]),r.default.createElement(r.default.Fragment,null,e.children)},t.ToolbarActionWrapper.displayName="ToolbarActionWrapper"})),define("typescript/libraries/file-viewer/src/toolbar/utils",["require","exports","typescript/libraries/file-viewer/src/core/types/preview_type"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isToolbarInverse=void 0;t.isToolbarInverse=(e,t)=>!e||t===i.PreviewType.Excel})),define("typescript/libraries/file-viewer/src/toolbar/toolbar_buttons",["require","exports","tslib","react","react-intl","react-redux","dig-components/tooltips","dig-components/typography","dig-components/buttons","dig-components/icons","dig-components/icons/src","dig-components/menu","typescript/libraries/file-viewer/src/toolbar/toolbar.module.css","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/hooks/useStabilizedCallback","typescript/libraries/file-viewer/src/hooks/selectors","typescript/libraries/file-viewer/src/core/utils/support","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/file_viewer/context_provider","typescript/libraries/file-viewer/src/toolbar/utils","typescript/libraries/file-viewer/src/toolbar/toolbar_actions"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f,g,E,w,b,m,h,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OverflowMenu=t.FindInDocumentButton=t.PrintButton=t.SidebarToggleButton=t.PageNavigationControls=t.FullScreenButton=t.ZoomToFitButton=t.ZoomInButton=t.ZoomOutButton=t.ToolbarButton=t.useToolbarButtonConfig=void 0,r=i.__importStar(r),u=i.__importStar(u);function P(){var e;const{fileViewerId:t}=(0,m.useFileViewerContext)(),i=null===(e=(0,E.useCurrentFileInfo)(t))||void 0===e?void 0:e.previewKey,r=(0,n.useSelector)(e=>(0,b.getPreviewMetadata)(e,i)),a=(0,w.resolvePreviewType)(r),s=(0,n.useSelector)(e=>(0,b.getIsFullScreen)(e,t)),o=(0,h.isToolbarInverse)(s,a);return{fileViewerId:t,previewKey:i,previewType:a,showInverse:o,isFullScreen:s}}t.useToolbarButtonConfig=P;t.ToolbarButton=({tooltipText:e,className:t,onClick:i,icon:a,disabled:n,inverseTooltip:o,closeTooltipOnClick:d=!1})=>e?r.createElement(s.Tooltip,{placement:"top",title:e,inverse:o,shouldCloseOnClick:d},r.createElement(l.IconButton,{className:t,variant:"transparent","aria-label":e,disabled:n,onClick:i,style:n?{pointerEvents:"all"}:{},inverse:!0},r.createElement(c.UIIcon,{src:a}))):r.createElement(l.IconButton,{className:t,variant:"transparent","aria-label":e,disabled:n,onClick:i,inverse:!0},r.createElement(c.UIIcon,{src:a})),t.ToolbarButton.displayName="ToolbarButton",t.ToolbarButton.displayName="ToolbarButton";t.ZoomOutButton=({scaleFactor:e})=>{const i=(0,n.useDispatch)(),s=(0,a.useIntl)(),{fileViewerId:o,previewKey:l,showInverse:c}=P(),p=r.useCallback(()=>i((0,v.zoomOut)({fileViewerId:o,previewKey:l,sourceContext:_.UserActionContext.Toolbar})),[o,l,i]);return r.createElement(t.ToolbarButton,{tooltipText:s.formatMessage({id:"QCtVKy",defaultMessage:"Zoom out"}),disabled:e<=.1,onClick:p,icon:d.ZoomOutLine,inverseTooltip:!c})},t.ZoomOutButton.displayName="ZoomOutButton",t.ZoomOutButton.displayName="ZoomOutButton";t.ZoomInButton=({scaleFactor:e})=>{const i=(0,n.useDispatch)(),s=(0,a.useIntl)(),{fileViewerId:o,previewKey:l,showInverse:c}=P(),p=(0,g.useStabilizedCallback)(()=>{i((0,v.zoomIn)({fileViewerId:o,previewKey:l,sourceContext:_.UserActionContext.Toolbar}))});return r.createElement(t.ToolbarButton,{tooltipText:s.formatMessage({id:"sMy5PN",defaultMessage:"Zoom in"}),disabled:e>=10,onClick:p,icon:d.ZoomInLine,inverseTooltip:!c})},t.ZoomInButton.displayName="ZoomInButton",t.ZoomInButton.displayName="ZoomInButton";t.ZoomToFitButton=({scaleFactor:e,fittedScaleFactor:t})=>{const i=(0,n.useDispatch)(),c=(0,a.useIntl)(),{fileViewerId:d,previewKey:p,showInverse:f}=P(),E=(0,g.useStabilizedCallback)(()=>{i((0,v.zoomToggleOriginalOrFit)({fileViewerId:d,previewKey:p,sourceContext:_.UserActionContext.Toolbar}))}),w=t&&e===t?c.formatMessage({id:"0AbCS6",defaultMessage:"View actual size"}):c.formatMessage({id:"OgNBqT",defaultMessage:"Zoom to fit"});return r.createElement(s.Tooltip,{placement:"top",title:w,inverse:!f},r.createElement(l.Button,{variant:"transparent","aria-label":w,className:u.toolbarZoomToFit,onClick:E,hasNoUnderline:!0,inverse:f},r.createElement(o.Text,{color:f?"faint":"standard",inverse:f},e?c.formatNumber(e,{style:"percent",maximumFractionDigits:0}):"")))},t.ZoomToFitButton.displayName="ZoomToFitButton",t.ZoomToFitButton.displayName="ZoomToFitButton";t.FullScreenButton=()=>{const e=(0,n.useDispatch)(),i=(0,a.useIntl)(),{fileViewerId:s,previewKey:o,showInverse:l,isFullScreen:c}=P(),p=(0,g.useStabilizedCallback)(()=>{const t={fileViewerId:s,previewKey:o,sourceContext:_.UserActionContext.Toolbar};e(c?(0,v.exitFullScreen)(t):(0,v.enterFullScreen)(t))});return r.createElement(t.ToolbarButton,{tooltipText:c?i.formatMessage({id:"1pq/ot",defaultMessage:"Exit fullscreen"}):i.formatMessage({id:"lQfB6H",defaultMessage:"Fullscreen"}),closeTooltipOnClick:!0,onClick:p,icon:c?d.FullscreenExitLine:d.FullscreenLine,disabled:!1,inverseTooltip:!l})},t.FullScreenButton.displayName="FullScreenButton",t.FullScreenButton.displayName="FullScreenButton";t.PageNavigationControls=({fileRivieraData:e,filePreviewUi:i})=>{var s,l,c,p;const E=(0,n.useDispatch)(),w=(0,a.useIntl)(),{fileViewerId:b,previewKey:m,showInverse:h}=P(),y={fileViewerId:b,previewKey:m,sourceContext:_.UserActionContext.Toolbar},T=null!==(l=null===(s=(0,f.filterDocFilePreviewUiState)(i))||void 0===s?void 0:s.currentPageIndex)&&void 0!==l?l:0,I=(0,g.useStabilizedCallback)(()=>{E((0,v.pageNavigation)(Object.assign({pageIndex:T-1},y)))}),F=(0,g.useStabilizedCallback)(()=>{E((0,v.pageNavigation)(Object.assign({pageIndex:T+1},y)))}),S=null===(p=null===(c=(0,f.filterDocPreviewRivieraData)(e))||void 0===c?void 0:c.metadata)||void 0===p?void 0:p.page_count;if(null==T||null==S)return null;const L=T+1,C="".padEnd((""+S).length-(""+L).length,"0");return r.createElement(r.Fragment,null,r.createElement(t.ToolbarButton,{disabled:T<1,onClick:I,tooltipText:w.formatMessage({id:"sago3n",defaultMessage:"Page up"}),icon:d.ChevronUpLine,inverseTooltip:!h}),r.createElement(o.Text,{color:h?"faint":"standard",className:u.pageDisplay,inverse:h},r.createElement("span",{className:u.pageDisplayPadding},C),w.formatMessage({id:"t6aTtx",defaultMessage:"{currentPage, number} of {totalPages, number}"},{currentPage:L,totalPages:S})),r.createElement(t.ToolbarButton,{disabled:T>=S-1,onClick:F,tooltipText:w.formatMessage({id:"5Nekbe",defaultMessage:"Page down"}),icon:d.ChevronDownLine,inverseTooltip:!h}))},t.PageNavigationControls.displayName="PageNavigationControls",t.PageNavigationControls.displayName="PageNavigationControls";t.SidebarToggleButton=({isSidebarOpen:e,disabled:i,isInMenu:s})=>{const o=(0,n.useDispatch)(),l=(0,a.useIntl)(),{fileViewerId:u,showInverse:f}=P(),E=(0,g.useStabilizedCallback)(()=>{o(e?(0,v.closeDocSidebar)({fileViewerId:u,sourceContext:_.UserActionContext.Toolbar}):(0,v.openDocSidebar)({fileViewerId:u,sourceContext:_.UserActionContext.Toolbar}))}),w=e?l.formatMessage({id:"ttmV3r",defaultMessage:"Hide sidebar"}):l.formatMessage({id:"NIm51y",defaultMessage:"Show sidebar"}),b=e?d.SidebarHideLine:d.SidebarShowLine;return s?r.createElement(p.Menu.ActionItem,{onClick:E,disabled:i,preferComposition:!0},r.createElement(p.Menu.RowAccessory,null,r.createElement(c.UIIcon,{src:b})),r.createElement(p.Menu.RowTitle,null,w)):r.createElement(t.ToolbarButton,{key:`sidebar-${e}`,tooltipText:w,onClick:E,icon:b,disabled:i,inverseTooltip:!f})},t.SidebarToggleButton.displayName="SidebarToggleButton",t.SidebarToggleButton.displayName="SidebarToggleButton";t.PrintButton=({isMenuItem:e})=>{const i=(0,n.useDispatch)(),s=(0,a.useIntl)(),{showInverse:o,fileViewerId:l,previewKey:u,previewType:f}=P(),{onPrint:E}=(0,y.useToolbarAction)(),w=(0,g.useStabilizedCallback)(()=>{null==E||E(),i((0,v.print)({fileViewerId:l,previewKey:u,previewType:f,sourceContext:_.UserActionContext.Toolbar}))}),b=s.formatMessage({id:"tBZioS",defaultMessage:"Print"});return e?r.createElement(p.Menu.ActionItem,{onClick:w,preferComposition:!0},r.createElement(p.Menu.RowAccessory,null,r.createElement(c.UIIcon,{src:d.PrintLine})),r.createElement(p.Menu.RowTitle,null,b)):r.createElement(t.ToolbarButton,{tooltipText:b,onClick:w,disabled:!1,icon:d.PrintLine,inverseTooltip:!o})},t.PrintButton.displayName="PrintButton",t.PrintButton.displayName="PrintButton";t.FindInDocumentButton=({isMenuItem:e})=>{const i=(0,a.useIntl)(),{showInverse:n}=P(),{onFindInDoc:s}=(0,y.useToolbarAction)(),o=(0,g.useStabilizedCallback)(()=>{null==s||s()}),l=i.formatMessage({id:"M/F/hG",defaultMessage:"Find in document"});return e?r.createElement(p.Menu.ActionItem,{onClick:o,preferComposition:!0},r.createElement(p.Menu.RowAccessory,null,r.createElement(c.UIIcon,{src:d.SearchLine})),r.createElement(p.Menu.RowTitle,null,l)):r.createElement(t.ToolbarButton,{tooltipText:l,onClick:o,disabled:!1,icon:d.SearchLine,inverseTooltip:!n,closeTooltipOnClick:!0})},t.FindInDocumentButton.displayName="FindInDocumentButton",t.FindInDocumentButton.displayName="FindInDocument";t.OverflowMenu=({intl:e,children:t})=>r.createElement(p.Menu.Wrapper,{closeOnSelection:!1},({getContentProps:i,getTriggerProps:a})=>{const n=e.formatMessage({id:"En+hlM",defaultMessage:"More actions"});return r.createElement("div",null,r.createElement(s.Tooltip,{placement:"top",title:n},r.createElement("span",null,r.createElement(l.IconButton,Object.assign({variant:"transparent"},a(),{inverse:!0}),r.createElement(c.UIIcon,{src:d.MoreHorizontalLine})))),r.createElement(p.Menu.Content,Object.assign({},i()),r.createElement(p.Menu.Segment,null,t)))}),t.OverflowMenu.displayName="OverflowMenu"})),define("typescript/libraries/file-viewer/src/toolbar/toolbar_flip_buttons",["require","exports","tslib","react","react-redux","react-intl","classnames","dig-components/icons","dig-components/icons/src","dig-components/tooltips","dig-components/buttons","typescript/libraries/file-viewer/src/toolbar/toolbar.module.css","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/hooks/useStabilizedCallback","typescript/libraries/file-viewer/src/toolbar/toolbar_buttons"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlipButtons=t.filterValidFileFlippingContext=void 0,r=i.__importDefault(r),s=i.__importDefault(s),p=i.__importStar(p);t.filterValidFileFlippingContext=e=>void 0!==e&&e.parent_files_count>=0?e:void 0;t.FlipButtons=({isShown:e,fileCollectionContext:i,flipperCallbacks:o})=>{const c=(0,a.useDispatch)(),d=(0,n.useIntl)(),{fileViewerId:E,previewKey:w,showInverse:b}=(0,f.useToolbarButtonConfig)(),m={fileViewerId:E,previewKey:w,sourceContext:_.UserActionContext.Toolbar},h=(0,v.useStabilizedCallback)(()=>{c((0,u.flipToNextFile)(m))}),y=(0,v.useStabilizedCallback)(()=>{c((0,u.flipToPreviousFile)(m))}),P=d.formatMessage({id:"5h/4QP",defaultMessage:"Next"}),T=d.formatMessage({id:"XlDsZ8",defaultMessage:"Previous"}),I=(0,t.filterValidFileFlippingContext)(i);if(void 0===I)return null;const F=0===I.file_index,S=I.file_index===I.parent_files_count-1;return r.default.createElement(r.default.Fragment,null,r.default.createElement(g,{tooltip:T,onClick:y,className:(0,s.default)(p.toolbarFlipperLeft,{[p.hidden]:!e,[p.isFullScreen]:!b}),icon:l.ChevronLeftLine,isDisabled:F,showInverse:!b,isShown:e,flipperCallbacks:o}),r.default.createElement(g,{tooltip:P,onClick:h,className:(0,s.default)(p.toolbarFlipperRight,{[p.hidden]:!e,[p.isFullScreen]:!b,[p.windowsScrollBar]:window.navigator.platform.match(/win/gi)}),icon:l.ChevronRightLine,isDisabled:S,showInverse:!b,isShown:e,flipperCallbacks:o}))},t.FlipButtons.displayName="FlipButtons",t.FlipButtons.displayName="FlipButtons";const g=({className:e,tooltip:t,onClick:i,icon:a,isDisabled:n,showInverse:l,isShown:u,flipperCallbacks:_})=>r.default.createElement("div",{className:(0,s.default)(p.toolbarFlipper,e,{[p.hidden]:!u})},r.default.createElement(c.Tooltip,{title:t,openDelay:500,shouldCloseOnClick:!0,inverse:!l},r.default.createElement(d.IconButton,Object.assign({variant:"filled",size:"large",onClick:i,"aria-label":t,disabled:n},_),r.default.createElement(o.UIIcon,{src:a}))));g.displayName="FlipButton",g.displayName="FlipButton"})),define("typescript/libraries/file-viewer/src/toolbar/toolbar_file_counter",["require","exports","tslib","react","react-intl","typescript/libraries/file-viewer/src/toolbar/toolbar_flip_buttons"],(function(e,t,i,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToolbarFileCounter=void 0,r=i.__importStar(r);const s=(0,a.defineMessage)({id:"nomoau",defaultMessage:"{file_number} of {file_count}"}),o=(0,a.defineMessage)({id:"LI56s4",defaultMessage:"{file_number} of many"});t.ToolbarFileCounter=({fileCollectionContext:e})=>{const t=(0,a.useIntl)(),i=(0,n.filterValidFileFlippingContext)(e);if(void 0===i||i.parent_files_count>99999)return null;const l=i.file_index+1,c=i.parent_files_count,d=i.parent_files_count<1e3?t.formatMessage(s,{file_number:l,file_count:c}):t.formatMessage(o,{file_number:l});return r.createElement("span",null,d)},t.ToolbarFileCounter.displayName="ToolbarFileCounter"})),define("typescript/libraries/file-viewer/src/preview_content/preview_content",["require","exports","tslib","react","react-intl","react-redux","classnames","typescript/libraries/file-viewer/src/preview_core.module.css","typescript/libraries/file-viewer/src/preview_content/preview_content.module.css","typescript/libraries/file-viewer/src/toolbar/toolbar","typescript/libraries/file-viewer/src/skeleton/preview_skeleton_viewport","dig-components/progress_indicators","typescript/libraries/file-viewer/src/render_context","typescript/libraries/file-viewer/src/file_viewer/context_provider","typescript/libraries/file-viewer/src/plugins/selectors/active_plugin","typescript/libraries/file-viewer/src/core/utils/browser_detection","typescript/libraries/file-viewer/src/preview_doc/utils/sizing","typescript/libraries/file-viewer/src/core/utils/support","typescript/libraries/file-viewer/src/preview_content/utils","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/hooks/useFlipOnSwipe","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/utils","typescript/libraries/file-viewer/src/toolbar/configuration","typescript/libraries/file-viewer/src/hooks/selectors"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f,g,E,w,b,m,h,y,P,T){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewContent=void 0,r=i.__importDefault(r),s=i.__importDefault(s),o=i.__importStar(o),l=i.__importStar(l);t.PreviewContent=({activePluginInstance:e,plugins:t,snackbarManagerPluginInstance:i,archiveFiles:I,fileConfig:F,fullFilePreviewUi:S,fullRivieraData:L,children:C})=>{var A;const O=(0,a.useIntl)(),{width:x,rendererWidth:D,rendererHeight:R,responsiveSize:M}=(0,u.useFileViewerRenderContext)(),{fileViewerId:N,featureConfig:k}=(0,_.useFileViewerContext)(),V=(0,T.useFileViewerSelector)(N,b.getFileViewerUi),j=(0,T.useFileViewerSelector)(N,b.getIsFullScreen),Y=(0,T.useFileViewerSelector)(N,b.getHasBeenFlipped),U=(0,n.useSelector)(b.getIsPreviewLoading),B=(0,T.useFileViewerSelector)(N,b.getCurrentFile),K=null==B?void 0:B.previewKey,z=(0,T.usePreviewKeySelector)(K,b.getPreviewMetadata),W=(0,n.useSelector)(e=>(0,b.getFilePreviewUi)(e,N,K)),H=(0,T.usePreviewKeySelector)(K,b.getFileMetadata),G=(0,T.usePreviewKeySelector)(K,b.getRivieraData),q=(0,T.useFileViewerSelector)(N,v.isPluginEditMode),X=null!==(A=null==H?void 0:H.file_name)&&void 0!==A?A:"",Z=(0,w.resolveToolbarPreviewType)((0,E.resolvePreviewType)(z),k,H),$=(0,w.getArchivedFileToolbarConfig)(Z,B,W,I,S,L),J=!!(0,n.useSelector)(e=>(0,v.getSelectedHideContentPanePluginId)(e,N)),Q=(0,n.useSelector)(e=>(0,b.getFileViewerState)(e,N)),ee=k.preview_content_only,te=(0,g.shouldShowDocSidebar)(x,Z)&&(null==V?void 0:V.isDocSidebarOpen),ie=Z===h.PreviewType.SsrDoc||Z===h.PreviewType.CloudDoc,re=Z===h.PreviewType.Audio||Z===h.PreviewType.Video,ae=!!(null==Q?void 0:Q.error),ne=Z===h.PreviewType.Archive,se=!!(0,y.getCloudDocExitUrl)(z),oe=Z===h.PreviewType.Linkfile,le=!q&&!(0,f.is_supported_mobile_browser)()&&(0,d.isEligibleToShowSkeletonPreview)(null==z?void 0:z.content)&&!Y,ce=!(ee&&re||(0,P.noToolbarShown)(M,k)),de=se||oe||ae,pe=r.default.createElement(p.Spinner,{"aria-valuetext":O.formatMessage({id:"zqXonC",defaultMessage:"Your preview is loading"}),"aria-label":"preview-loading-spinner",inverse:j||q}),ue=le&&G&&r.default.createElement(d.SkeletonViewport,{width:D,height:R,docSidebarCollapsed:!te,docMetadata:ie?G.metadata:void 0,fileContent:z,fileName:X,imgSizeOptimizationEnabled:k.img_size_optimization}),{handleTouchStart:_e,handleTouchEnd:ve}=(0,m.useFlipOnSwipe)(N,K);return r.default.createElement("div",{className:(0,s.default)(l.previewContentWrapper,{[l.editMode]:q}),style:{width:D},onTouchStart:_e,onTouchEnd:ve},r.default.createElement("div",{className:(0,s.default)(l.loadingContent,{[l.hidden]:!U&&!J,[o.isFullScreen]:j})},U?le?ue:pe:null),r.default.createElement("div",{className:(0,s.default)(l.previewContent,{[l.hidden]:U||J})},C),r.default.createElement("div",{className:(0,s.default)({[l.hidden]:J})},ce&&r.default.createElement(c.ConfigurableToolbar,Object.assign({previewType:Z,fileRivieraData:G,filePreviewUi:W,fileViewerUi:V,rootArchiveFileInformation:ne&&K?{fileName:X,previewKey:K}:void 0,activePluginInstance:e,previewMetadata:z,plugins:t,snackbarManagerPluginInstance:i,forceHideControlRow:de,fileConfig:F},$))))},t.PreviewContent.displayName="PreviewContent"})),define("typescript/libraries/file-viewer/src/preview_content/utils",["require","exports","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/core/utils/support","typescript/libraries/file-viewer/src/core/data/preview_key","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,t,i,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveToolbarPreviewType=t.getArchivedFileToolbarConfig=void 0,t.getArchivedFileToolbarConfig=function(e,t,s,o,l,c){if(!(e===i.PreviewType.Archive)||!t)return{};const d=(0,a.getPreviewKeyForNestedArchiveFile)(t.file_id,(0,a.getSubpath)((null==s?void 0:s.currentPath)||[])),p=(0,n.getArchiveFilesPreviewMetadata)(o,d),u=(0,r.resolvePreviewType)(p),_=(0,n.getFilePreviewUiData)(l,d),v=(0,n.getRivieraDataFromSlice)(c,d);return p&&p.content&&_?{previewType:u,previewMetadata:p,filePreviewUi:_,fileRivieraData:v}:{}};t.resolveToolbarPreviewType=(e,t,r)=>{var a;switch(e){case i.PreviewType.SsrDoc:case i.PreviewType.CloudDoc:return(null===(a=null==r?void 0:r.file_name)||void 0===a?void 0:a.endsWith(".gsheet"))?i.PreviewType.RawHTML:e;case i.PreviewType.Excel:return"excel1"===t.excel_support.support?i.PreviewType.HTML:"ms_view_embed"===t.excel_support.embed_support?i.PreviewType.RawHTML:e;default:return e}}})),define("typescript/libraries/file-viewer/src/preview_content/preview_content.module.css",["require","exports","css!typescript/libraries/file-viewer/src/preview_content/preview_content.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hidden=t.previewContentWrapper=t.editMode=t.previewContent=t.loadingContent=void 0,t.loadingContent="_loadingContent_axfrr_1",t.previewContent="_previewContent_axfrr_8",t.editMode="_editMode_axfrr_18",t.previewContentWrapper="_previewContentWrapper_axfrr_22",t.hidden="_hidden_axfrr_27";t.default={loadingContent:"_loadingContent_axfrr_1",previewContent:"_previewContent_axfrr_8",editMode:"_editMode_axfrr_18",previewContentWrapper:"_previewContentWrapper_axfrr_22",hidden:"_hidden_axfrr_27"}})),define("typescript/libraries/file-viewer/src/toolbar/toolbar.module.css",["require","exports","css!typescript/libraries/file-viewer/src/toolbar/toolbar.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.qualityBadgeEmbed=t.qualityBadge=t.transcriptLoadingSpinner=t.rightButtonContainer=t.leftButtonContainer=t.timeLine=t.thumbnailImage=t.thumbnailLoadError=t.thumbnailTime=t.commentIconHolder=t.thumbnailHolderComment=t.thumbnailWrapper=t.thumbnailHolder=t.rangeMarker=t.rangeMarkersContainer=t.commentMarker=t.commentMarkersContainer=t.videoQualityLevel=t.toolbarVolumeMenu=t.toolbarVolumeRow=t.toolbarVolumeInput=t.toolbarTimeDisplay=t.disabled=t.hidden=t.pageDisplayPadding=t.pageDisplay=t.toolbarStar=t.toolbarFilename=t.toolbarCounterSection=t.toolbarFilenameSectionTitle=t.toolbarFilenameSection=t.toolbarFilenameRow=t.toolbarZoomToFit=t.windowsScrollBar=t.toolbarFlipperRight=t.toolbarFlipperLeft=t.isFullScreen=t.regularButton=t.toolbarFlipper=t.toolbarSection=t.toolbarVideoControlsRow=t.toolbarAudioVideo=t.toolbarRow=t.normal=t.playbackSpeedMenu=t.toolbar=t.withSidebar=t.toolbarHolder=t.toolbarVerticalPadding=t.toolbarRowHeight=void 0,t.toolbarRowHeight="40px",t.toolbarVerticalPadding="24px",t.toolbarHolder="_toolbar-holder_1c1zh_11",t.withSidebar="_withSidebar_1c1zh_23",t.toolbar="_toolbar_1c1zh_11",t.playbackSpeedMenu="_playbackSpeedMenu_1c1zh_42",t.normal="_normal_1c1zh_46",t.toolbarRow="_toolbar-row_1c1zh_53",t.toolbarAudioVideo="_toolbar-audio-video_1c1zh_62",t.toolbarVideoControlsRow="_toolbar-video-controls-row_1c1zh_65",t.toolbarSection="_toolbar-section_1c1zh_74",t.toolbarFlipper="_toolbar-flipper_1c1zh_96",t.regularButton="_regular-button_1c1zh_111",t.isFullScreen="_isFullScreen_1c1zh_116",t.toolbarFlipperLeft="_toolbar-flipper-left_1c1zh_121",t.toolbarFlipperRight="_toolbar-flipper-right_1c1zh_125",t.windowsScrollBar="_windowsScrollBar_1c1zh_129",t.toolbarZoomToFit="_toolbar-zoom-to-fit_1c1zh_133",t.toolbarFilenameRow="_toolbar-filename-row_1c1zh_172",t.toolbarFilenameSection="_toolbar-filename-section_1c1zh_176",t.toolbarFilenameSectionTitle="_toolbar-filename-section-title_1c1zh_180",t.toolbarCounterSection="_toolbar-counter-section_1c1zh_184",t.toolbarFilename="_toolbar-filename_1c1zh_172",t.toolbarStar="_toolbar-star_1c1zh_198",t.pageDisplay="_page-display_1c1zh_204",t.pageDisplayPadding="_page-display-padding_1c1zh_208",t.hidden="_hidden_1c1zh_213",t.disabled="_disabled_1c1zh_218",t.toolbarTimeDisplay="_toolbar-time-display_1c1zh_227",t.toolbarVolumeInput="_toolbar-volume-input_1c1zh_232",t.toolbarVolumeRow="_toolbar-volume-row_1c1zh_310",t.toolbarVolumeMenu="_toolbar-volume-menu_1c1zh_319",t.videoQualityLevel="_video-quality-level_1c1zh_326",t.commentMarkersContainer="_comment-markers-container_1c1zh_330",t.commentMarker="_comment-marker_1c1zh_330",t.rangeMarkersContainer="_range-markers-container_1c1zh_345",t.rangeMarker="_range-marker_1c1zh_345",t.thumbnailHolder="_thumbnail-holder_1c1zh_361",t.thumbnailWrapper="_thumbnail-wrapper_1c1zh_369",t.thumbnailHolderComment="_thumbnail-holder-comment_1c1zh_369",t.commentIconHolder="_comment-icon-holder_1c1zh_375",t.thumbnailTime="_thumbnail-time_1c1zh_386",t.thumbnailLoadError="_thumbnail-load-error_1c1zh_496",t.thumbnailImage="_thumbnail-image_1c1zh_505",t.timeLine="_time-line_1c1zh_528",t.leftButtonContainer="_left-button-container_1c1zh_564",t.rightButtonContainer="_right-button-container_1c1zh_565",t.transcriptLoadingSpinner="_transcriptLoadingSpinner_1c1zh_578",t.qualityBadge="_quality-badge_1c1zh_584",t.qualityBadgeEmbed="_quality-badge-embed_1c1zh_602";t.default={toolbarRowHeight:"40px",toolbarVerticalPadding:"24px",toolbarHolder:"_toolbar-holder_1c1zh_11",withSidebar:"_withSidebar_1c1zh_23",toolbar:"_toolbar_1c1zh_11",playbackSpeedMenu:"_playbackSpeedMenu_1c1zh_42",normal:"_normal_1c1zh_46",toolbarRow:"_toolbar-row_1c1zh_53",toolbarAudioVideo:"_toolbar-audio-video_1c1zh_62",toolbarVideoControlsRow:"_toolbar-video-controls-row_1c1zh_65",toolbarSection:"_toolbar-section_1c1zh_74",toolbarFlipper:"_toolbar-flipper_1c1zh_96",regularButton:"_regular-button_1c1zh_111",isFullScreen:"_isFullScreen_1c1zh_116",toolbarFlipperLeft:"_toolbar-flipper-left_1c1zh_121",toolbarFlipperRight:"_toolbar-flipper-right_1c1zh_125",windowsScrollBar:"_windowsScrollBar_1c1zh_129",toolbarZoomToFit:"_toolbar-zoom-to-fit_1c1zh_133",toolbarFilenameRow:"_toolbar-filename-row_1c1zh_172",toolbarFilenameSection:"_toolbar-filename-section_1c1zh_176",toolbarFilenameSectionTitle:"_toolbar-filename-section-title_1c1zh_180",toolbarCounterSection:"_toolbar-counter-section_1c1zh_184",toolbarFilename:"_toolbar-filename_1c1zh_172",toolbarStar:"_toolbar-star_1c1zh_198",pageDisplay:"_page-display_1c1zh_204",pageDisplayPadding:"_page-display-padding_1c1zh_208",hidden:"_hidden_1c1zh_213",disabled:"_disabled_1c1zh_218",toolbarTimeDisplay:"_toolbar-time-display_1c1zh_227",toolbarVolumeInput:"_toolbar-volume-input_1c1zh_232",toolbarVolumeRow:"_toolbar-volume-row_1c1zh_310",toolbarVolumeMenu:"_toolbar-volume-menu_1c1zh_319",videoQualityLevel:"_video-quality-level_1c1zh_326",commentMarkersContainer:"_comment-markers-container_1c1zh_330",commentMarker:"_comment-marker_1c1zh_330",rangeMarkersContainer:"_range-markers-container_1c1zh_345",rangeMarker:"_range-marker_1c1zh_345",thumbnailHolder:"_thumbnail-holder_1c1zh_361",thumbnailWrapper:"_thumbnail-wrapper_1c1zh_369",thumbnailHolderComment:"_thumbnail-holder-comment_1c1zh_369",commentIconHolder:"_comment-icon-holder_1c1zh_375",thumbnailTime:"_thumbnail-time_1c1zh_386",thumbnailLoadError:"_thumbnail-load-error_1c1zh_496",thumbnailImage:"_thumbnail-image_1c1zh_505",timeLine:"_time-line_1c1zh_528",leftButtonContainer:"_left-button-container_1c1zh_564",rightButtonContainer:"_right-button-container_1c1zh_565",transcriptLoadingSpinner:"_transcriptLoadingSpinner_1c1zh_578",qualityBadge:"_quality-badge_1c1zh_584",qualityBadgeEmbed:"_quality-badge-embed_1c1zh_602"}})),define("typescript/libraries/file-viewer/src/preview_archive/breadcrumbs",["require","exports","tslib","dig-components/breadcrumb","react","typescript/libraries/file-viewer/src/preview_archive/preview_archive.module.css","typescript/libraries/file-viewer/src/core/data/actions","classnames"],(function(e,t,i,r,a,n,s,o){"use strict";function l(e,t,i,r){return()=>{i&&r((0,s.updateArchiveFileCurrentPath)({currentPath:e,fileViewerId:t,previewKey:i,isDir:!0}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.ArchiveFileBreadcrumbs=void 0,a=i.__importStar(a),n=i.__importStar(n),o=i.__importDefault(o),t.ArchiveFileBreadcrumbs=a.memo(e=>{const{archiveName:t,currentPath:i,fileViewerId:s,previewKey:c,dispatch:d,isMobile:p,showInverse:u=!1}=e,_=a.useCallback(l([],s,c,d),[s,null==c?void 0:c.serialized]),v=(0,o.default)(n.truncateText,{[n.breadCrumbText]:!p,[n.normal]:!u,[n.inverse]:u});return a.createElement(r.Breadcrumb,{isRootOverflow:!1,alwaysShowRoot:!0,size:p?"small":"standard",className:n.archiveFileBreadcrumb},a.createElement(r.Breadcrumb.Link,{href:_,isCurrentPath:0===i.length},a.createElement("div",{className:v},t)),i.map((e,t)=>{const n=l(i.slice(0,t+1),s,c,d);return a.createElement(r.Breadcrumb.Link,{href:n,isCurrentPath:t===i.length-1,key:`${t}-${e}`},a.createElement("div",{className:v},e))}))}),t.ArchiveFileBreadcrumbs.displayName="ArchiveFileBreadcrumbs"})),define("typescript/libraries/file-viewer/src/preview_archive/preview_archive.module.css",["require","exports","css!typescript/libraries/file-viewer/src/preview_archive/preview_archive.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.truncateText=t.normal=t.inverse=t.breadCrumbText=t.titlebarV2Breadcrumbs=t.snackBar=t.extractAllButtonBar=t.archiveFileBreadcrumb=t.folderTable=t.emptyFolder=void 0,t.emptyFolder="_emptyFolder_5ra0u_1",t.folderTable="_folderTable_5ra0u_9",t.archiveFileBreadcrumb="_archiveFileBreadcrumb_5ra0u_20",t.extractAllButtonBar="_extractAllButtonBar_5ra0u_26",t.snackBar="_snackBar_5ra0u_30",t.titlebarV2Breadcrumbs="_titlebarV2Breadcrumbs_5ra0u_49",t.breadCrumbText="_breadCrumbText_5ra0u_49",t.inverse="_inverse_5ra0u_54",t.normal="_normal_5ra0u_58",t.truncateText="_truncateText_5ra0u_67";t.default={emptyFolder:"_emptyFolder_5ra0u_1",folderTable:"_folderTable_5ra0u_9",archiveFileBreadcrumb:"_archiveFileBreadcrumb_5ra0u_20",extractAllButtonBar:"_extractAllButtonBar_5ra0u_26",snackBar:"_snackBar_5ra0u_30",titlebarV2Breadcrumbs:"_titlebarV2Breadcrumbs_5ra0u_49",breadCrumbText:"_breadCrumbText_5ra0u_49",inverse:"_inverse_5ra0u_54",normal:"_normal_5ra0u_58",truncateText:"_truncateText_5ra0u_67"}})),define("typescript/libraries/file-viewer/src/mobile_web/mobile_web.module.css",["require","exports","css!typescript/libraries/file-viewer/src/mobile_web/mobile_web.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.metadataText=t.meatballSeparator=t.imageContainer=t.fileIconContainer=t.footer=t.actionRow=t.actions=t.fileName=t.metadata=t.meatballMenuDismiss=t.signInButton=t.meatballMenuContainer=t.meatballMenuOverlay=t.rightButtonsContainer=t.saveToDropboxLogo=t.abTestButton=t.footerContainer=t.mobileFooterHeight=void 0,t.mobileFooterHeight="72px",t.footerContainer="_footerContainer_1wx3r_9",t.abTestButton="_abTestButton_1wx3r_20",t.saveToDropboxLogo="_saveToDropboxLogo_1wx3r_24",t.rightButtonsContainer="_rightButtonsContainer_1wx3r_28",t.meatballMenuOverlay="_meatballMenuOverlay_1wx3r_33",t.meatballMenuContainer="_meatballMenuContainer_1wx3r_42",t.signInButton="_signInButton_1wx3r_53",t.meatballMenuDismiss="_meatballMenuDismiss_1wx3r_67",t.metadata="_metadata_1wx3r_74",t.fileName="_fileName_1wx3r_80",t.actions="_actions_1wx3r_84",t.actionRow="_actionRow_1wx3r_87",t.footer="_footer_1wx3r_9",t.fileIconContainer="_fileIconContainer_1wx3r_121",t.imageContainer="_imageContainer_1wx3r_128",t.meatballSeparator="_meatballSeparator_1wx3r_143",t.metadataText="_metadataText_1wx3r_151";t.default={mobileFooterHeight:"72px",footerContainer:"_footerContainer_1wx3r_9",abTestButton:"_abTestButton_1wx3r_20",saveToDropboxLogo:"_saveToDropboxLogo_1wx3r_24",rightButtonsContainer:"_rightButtonsContainer_1wx3r_28",meatballMenuOverlay:"_meatballMenuOverlay_1wx3r_33",meatballMenuContainer:"_meatballMenuContainer_1wx3r_42",signInButton:"_signInButton_1wx3r_53",meatballMenuDismiss:"_meatballMenuDismiss_1wx3r_67",metadata:"_metadata_1wx3r_74",fileName:"_fileName_1wx3r_80",actions:"_actions_1wx3r_84",actionRow:"_actionRow_1wx3r_87",footer:"_footer_1wx3r_9",fileIconContainer:"_fileIconContainer_1wx3r_121",imageContainer:"_imageContainer_1wx3r_128",meatballSeparator:"_meatballSeparator_1wx3r_143",metadataText:"_metadataText_1wx3r_151"}})),define("typescript/libraries/file-viewer/src/loading_helpers",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.preloadImage=void 0,t.preloadImage=function(e,t){return new Promise((i,r)=>{const a=Date.now(),n=new Image;n.onload=()=>{i({started:a,completed:Date.now()})},n.onerror=()=>{r({started:a,failed:Date.now()})},t&&(t.srcset&&(n.srcset=t.srcset),t.sizes&&(n.sizes=t.sizes)),n.src=e})}})),define("metaserver/static/js/file_viewer/collection_viewer",["require","exports","tslib","lodash","react","react-redux","metaserver/static/js/file_store/utils","metaserver/static/js/previews/data/selectors","metaserver/static/js/file_viewer/data/actions","metaserver/static/js/file_viewer/data/store","metaserver/static/js/integrations/zoom_share_dialog/async_modal","metaserver/static/js/core/uri","metaserver/static/js/clean/history","metaserver/static/js/file_viewer/sdk_file_viewer/file_viewer","metaserver/static/js/file_viewer/sdk_file_viewer/utils","metaserver/static/js/file_viewer/constants","metaserver/static/js/sync_everything/constants","metaserver/static/js/metrics/index","metaserver/static/js/edison/ui/spa_product_name","typescript/libraries/file-viewer/src/logging/performance","metaserver/static/js/previews/ui/constants"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f,g,E,w,b,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileCollectionViewer=t._FileCollectionViewer=void 0,r=i.__importStar(r),a=i.__importDefault(a),u=i.__importDefault(u);const h=(0,c.getStoreForFileViewer)();function y(e,t,i){const a=(0,s.getFileRevisionOrHrefId)(e);let n=r.find(t,e=>(0,s.getFileRevisionOrHrefId)(e)===a);if(!n){const i=e.file_id;n=r.find(t,e=>e.file_id===i)}if(!n&&t.length>0&&void 0!==i){let e=i;return i>=t.length&&(e=t.length>1?t.length-1:0),{newFile:t[e],files:t,newIndex:e}}n||(n=e);const o=t.indexOf(n);return-1===o?{newFile:n,files:[n],newIndex:0}:{newFile:n,files:t,newIndex:o}}function P({file:e,files:t,sharedLinkInfos:i,sharePermissions:r,shareTokens:a,oldIndex:n}){const s=t.filter(e=>!e.is_dir),{newFile:o,newIndex:l}=y(e,s,n);return{collection:{file:o,files:s,sharedLinkInfos:i,sharePermissions:r,shareTokens:a},currentIndex:l}}class T extends a.default.Component{constructor(e){super(e),this.hasFlipped=!1,this.updateFileViewer=()=>{const{file:e}=this.props;this.openFile(e)},this.onFileChanged=(e,t)=>{const i=this.state.collection.files[this.state.currentIndex];if(e.revision_id===i.revision_id&&(0,s.isBrowseFile)(i))if(t){const e=Object.assign(Object.assign({},i),{file_id:t.file_id,revision_id:t.revision_id,fq_path:t.fq_path}),r=this.state.collection.files.map((t,i)=>i===this.state.currentIndex?e:t);this.setState({collection:Object.assign(Object.assign({},this.state.collection),{files:r})})}else{const{newFile:e,newIndex:t}=y(i,this.state.collection.files,this.state.currentIndex);t<this.state.collection.files.length-1?this.setState({collection:Object.assign(Object.assign({},this.state.collection),{file:e}),currentIndex:t}):this.closeViewer()}},this.handleFlipNext=r.throttle(()=>{const{collection:e,currentIndex:t}=this.state;this.props.onFlipNext&&this.props.onFlipNext();const i=t+1===e.files.length?0:t+1;this.hasFlipped=!0,this.switchFile(i)},100),this.handleFlipPrevious=r.throttle(()=>{const{collection:e,currentIndex:t}=this.state;this.props.onFlipPrevious&&this.props.onFlipPrevious();const i=0===t?e.files.length-1:t-1;this.hasFlipped=!0,this.switchFile(i)},100),this.switchFile=e=>{const{collection:t}=this.state,i=t.files[e];this.updatePreviewUrl(i),this.setState({currentIndex:e},()=>{this.openFile(i)})},this.closeViewer=()=>{const{onCloseViewer:e}=this.props;e&&e(),(0,l.closeFile)()},this.state=P(e),b.PreviewsEventLogger.mark(b.PreviewsTimingEvents.COLLECTION_VIEWER_CODE_START),this.setupPreviewUrl(this.props.file),this.updateFileViewer()}componentDidMount(){const{shouldPresentInZoom:e,user:t,file:i}=this.props;t&&e&&(0,d.asyncShowModal)(t.id,i.file_id,"file-viewer-modal-overlay"),b.PreviewsEventLogger.mark(b.PreviewsTimingEvents.COLLECTION_VIEWER_MOUNT)}componentDidUpdate(e){if((function(e,t){const{file:i,files:r,sharedLinkInfos:a,sharePermissions:n,shareTokens:s}=e;return i!==t.file||r!==t.files||a!==t.sharedLinkInfos||n!==t.sharePermissions||s!==t.shareTokens})(e,this.props)){const e=this.state.currentIndex,t=this.hasFlipped?this.state.collection.files[e]:this.props.file,i=P(Object.assign(Object.assign({},this.props),{file:t,oldIndex:e})),r=i.collection.file,a=e!==i.currentIndex,n=t.file_id!==r.file_id,s="fq_path"in t&&"fq_path"in r&&t.fq_path!==r.fq_path;this.setState(i,()=>{(a||n||s)&&(this.updatePreviewUrl(r),this.openFile(r))})}}componentWillUnmount(){const{closeFile:e,onClose:t}=this.props;e(),t&&t(),this.teardownPreviewUrl()}openFile(e){this.props.openFile(e)}setupPreviewUrl(e){this.props.skipOuterRouting||this.setPreviewUrl(e)}updatePreviewUrl(e){this.setPreviewUrl(e,!1),(0,w.setSpaProductName)("preview_file_flip")}teardownPreviewUrl(){this.props.skipOuterRouting||this.setPreviewUrl(null)}setPreviewUrl(e,t=!0){if(this.props.disableRouting)return;const i=p.URI.parse(u.default.get_url()),r=p.URI.encode_parts(i.getPath());let a=i.removeQuery("select").removeQuery("page");if(null==e)a=a.removeQuery("preview"),a=a.removeQuery("t"),a=a.removeQuery("e");else{const t=(0,s.getFilename)(e),i=p.URI.parse(e.href).getQuery();a=a.updateQuery({preview:t,t:null==i?void 0:i.t,e:null==i?void 0:i.e})}const n=a.getQuery();t?u.default.push_state(r,n,{immediatelyRestoreState:!1}):u.default.replace_state(r,n)}renderSDKSurface(){const{fileViewOrigin:e,hidePageChrome:t,transparentBackground:i,forceNoToolbar:n,user:o,browseContext:l,browseExceptions:c,canRestoreRevision:d,onRestoreRevision:p,onFullscreenChange:u,brandingInfo:w,initialPreviewSourceContext:b,shouldFocusApproval:h,shouldFocusComment:y,activeCommentThreadId:P,appDownloadInterstitialDismissed:T,containerId:I,isInsideBackup:F,previewApiDataMap:S,ajaxTimerName:L,updateFiles:C}=this.props,{collection:A,currentIndex:O}=this.state,x=r.get(A.sharedLinkInfos,O),D=r.get(A.sharePermissions,O),R=r.get(A.shareTokens,O),M=r.get(A.files,O),N=A.files.map(e=>{var t;const i=(0,s.getFileRevisionId)(e);return null===(t=S[i])||void 0===t?void 0:t.data}),k=C?()=>C(A.files,M,!0):void 0;let V=null!=b?b:m.PreviewSourceContext.Unknown;switch(e){case f.FileViewOriginType.BROWSE:case f.FileViewOriginType.VERSION_HISTORY:case f.FileViewOriginType.HOME:case f.FileViewOriginType.HELLOSIGN:case f.FileViewOriginType.PHOTOS:case f.FileViewOriginType.STARRED:case f.FileViewOriginType.RECENTS:case f.FileViewOriginType.SEARCH:case f.FileViewOriginType.COLLECTIONS:case f.FileViewOriginType.VIDEO_SYNTHESIS:if(!o)throw new Error("User is required to browse files");let r;switch(e){case f.FileViewOriginType.VERSION_HISTORY:r=v.SDKPreviewSurface.VERSION_HISTORY;break;case f.FileViewOriginType.HOME:r=v.SDKPreviewSurface.HOME;break;case f.FileViewOriginType.HELLOSIGN:r=v.SDKPreviewSurface.HELLOSIGN;break;case f.FileViewOriginType.STARRED:r=v.SDKPreviewSurface.STARRED;break;case f.FileViewOriginType.RECENTS:r=v.SDKPreviewSurface.RECENTS;break;case f.FileViewOriginType.SEARCH:r=v.SDKPreviewSurface.SEARCH;break;case f.FileViewOriginType.PHOTOS:r=v.SDKPreviewSurface.PHOTOS;break;case f.FileViewOriginType.COLLECTIONS:r=v.SDKPreviewSurface.COLLECTIONS;break;case f.FileViewOriginType.VIDEO_SYNTHESIS:r=v.SDKPreviewSurface.VIDEO_SYNTHESIS;break;default:r=v.SDKPreviewSurface.BROWSE}return(F||(0,g.isBackupBrowse)())&&(r=v.SDKPreviewSurface.BACKUP,V=m.PreviewSourceContext.Backup),a.default.createElement(a.default.Fragment,null,a.default.createElement(_.FileViewer,{file:M,fileIndex:O,previewCollection:N,updateFiles:k,fileCount:A.files.length,flipToNextFile:this.handleFlipNext,flipToPreviousFile:this.handleFlipPrevious,sharedLinkInfo:x,sharePermission:D,shareToken:R,brandingInfo:w,user:o,onFileChanged:this.onFileChanged,closeFile:this.closeViewer,previewSurface:r,canRestoreRevision:d,onRestoreRevision:p,onFullscreenChange:u,browseContext:l,browseExceptions:c,previewContentOnly:t,canShowFileFlippers:r===v.SDKPreviewSurface.SEARCH||r===v.SDKPreviewSurface.BROWSE||r===v.SDKPreviewSurface.COLLECTIONS||r===v.SDKPreviewSurface.PHOTOS||r===v.SDKPreviewSurface.VIDEO_SYNTHESIS,shouldFocusApproval:h,shouldFocusComment:y,activeCommentThreadId:P,hideOpenInAppInterstitial:!!T,fileViewOrigin:e,sourceContext:V,ajaxTimerName:L}));case f.FileViewOriginType.SHARED_LINK_PAGE:if(!x||!D||!R)throw new Error("Missing required data to view");return a.default.createElement(a.default.Fragment,null,a.default.createElement(_.FileViewer,{file:M,fileIndex:O,fileCount:A.files.length,flipToNextFile:this.handleFlipNext,flipToPreviousFile:this.handleFlipPrevious,sharedLinkInfo:x,sharePermission:D,shareToken:R,brandingInfo:w,closeFile:this.closeViewer,previewSurface:v.SDKPreviewSurface.SHARED_LINK,user:o,canShowFileFlippers:b===m.PreviewSourceContext.SharedLinkFolder||b===m.PreviewSourceContext.SharedLinkCollection,previewContentOnly:t,hideOpenInAppInterstitial:!!T,initialSourceAction:this.props.initialPreviewSourceAction,onFullscreenChange:u,fileViewOrigin:e,sourceContext:V,ajaxTimerName:L}));case f.FileViewOriginType.SHARED_CONTENT_LINK_PAGE:if(!x||!D||!R)throw new Error("Missing required data to view");return a.default.createElement(a.default.Fragment,null,a.default.createElement(_.FileViewer,{file:M,fileIndex:O,fileCount:A.files.length,flipToNextFile:this.handleFlipNext,flipToPreviousFile:this.handleFlipPrevious,sharedLinkInfo:x,sharePermission:D,shareToken:R,brandingInfo:w,closeFile:this.closeViewer,previewSurface:v.SDKPreviewSurface.SHARED_CONTENT_LINK,user:o,canShowFileFlippers:!0,previewContentOnly:t,hideOpenInAppInterstitial:!!T,initialSourceAction:this.props.initialPreviewSourceAction,onFullscreenChange:u,fileViewOrigin:e,sourceContext:V,ajaxTimerName:L}));case f.FileViewOriginType.COMMERCE:case f.FileViewOriginType.TRANSFER:case f.FileViewOriginType.CLIENT_PORTAL:let s;switch(e){case f.FileViewOriginType.TRANSFER:s=v.SDKPreviewSurface.TRANSFER;break;case f.FileViewOriginType.CLIENT_PORTAL:s=v.SDKPreviewSurface.CLIENT_PORTAL;break;default:s=v.SDKPreviewSurface.COMMERCE}return a.default.createElement(_.FileViewer,{file:M,fileIndex:O,fileCount:A.files.length,flipToNextFile:this.handleFlipNext,flipToPreviousFile:this.handleFlipPrevious,sharedLinkInfo:x,sharePermission:D,shareToken:R,brandingInfo:w,closeFile:this.closeViewer,previewSurface:s,user:o,canShowFileFlippers:!1,previewContentOnly:t,transparentBackground:i,forceNoToolbar:n,hideOpenInAppInterstitial:!!T,containerId:I,initialSourceAction:this.props.initialPreviewSourceAction,onPreviewSessionInitialized:this.props.onPreviewSessionInitialized,onFullscreenChange:u,fileViewOrigin:e,sourceContext:V,ajaxTimerName:L});case f.FileViewOriginType.SHARED_COLLECTION:return a.default.createElement(_.FileViewer,{file:M,fileIndex:O,previewCollection:N,fileCount:A.files.length,flipToNextFile:this.handleFlipNext,flipToPreviousFile:this.handleFlipPrevious,user:o,onFileChanged:this.onFileChanged,closeFile:this.closeViewer,previewSurface:v.SDKPreviewSurface.SHARED_COLLECTION,canRestoreRevision:d,onRestoreRevision:p,onFullscreenChange:u,previewContentOnly:t,canShowFileFlippers:!0,hideOpenInAppInterstitial:!!T,fileViewOrigin:e,sourceContext:V,ajaxTimerName:L});default:return(0,E.getMetricsReporter)().createStats({ns:"web_previews",name:"unkown_preview_origin"},{origin:`${e}`}),a.default.createElement(_.FileViewer,{file:M,fileIndex:O,fileCount:A.files.length,flipToNextFile:this.handleFlipNext,flipToPreviousFile:this.handleFlipPrevious,sharedLinkInfo:x,sharePermission:D,shareToken:R,brandingInfo:w,user:o,closeFile:this.closeViewer,previewSurface:v.SDKPreviewSurface.UNKNOWN,canRestoreRevision:d,onRestoreRevision:p,onFullscreenChange:u,previewContentOnly:t,canShowFileFlippers:!1,hideOpenInAppInterstitial:!!T,fileViewOrigin:e,sourceContext:V,ajaxTimerName:L})}}render(){return a.default.createElement("div",null,this.renderSDKSurface())}}t._FileCollectionViewer=T,T.displayName="_FileCollectionViewer";const I=(0,n.connect)((e,t)=>({previewApiDataMap:(0,o.getApiDataForFiles)(e,t.files)}),{closeFile:l.closeFile,openFile:l.openFile})(T);class F extends a.default.Component{render(){return a.default.createElement(n.Provider,{store:h},a.default.createElement(I,Object.assign({},this.props)))}}t.FileCollectionViewer=F,F.displayName="FileCollectionViewerWithProvider"})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/restore_plugin",["require","exports","tslib","react","dig-components/icons/src","dig-components/icons","metaserver/static/js/core/i18n","metaserver/static/js/action_bar/file_actions/portable/utils","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/file_viewer/sdk_file_viewer/utils"],(function(e,t,i,r,a,n,s,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeRestoreActionLoader=void 0,r=i.__importDefault(r);t.makeRestoreActionLoader=(e,t,i)=>({actionDefinitions:()=>{if(!t||!i)return{};const d=(0,o.makePluginActionDefinition)({label:s.intl.formatMessage(l.RESTORE_ACTION_STRING),icon:r.default.createElement(n.UIIcon,{src:a.RewindLine}),id:c.RESTORE_ACTION_PLUGIN_ID,action:()=>{t&&i&&(e.logUserAction("restore","overflow_menu"),t())},primary:!0});return{atTopLevelIfSpace:[d],alwaysInOverflow:[[d]]}}})})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/starred_plugin",["require","exports","tslib","react","react-redux","dig-components/menu","dig-components/icons","metaserver/static/js/file_viewer/sdk_file_viewer/hooks","metaserver/static/js/starred/redux/store","metaserver/static/js/file_viewer/sdk_file_viewer/utils"],(function(e,t,i,r,a,n,s,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeStarredActionLoader=void 0,r=i.__importDefault(r);const d=e=>{const{message:t,iconSrc:i,handleClick:a,handleKeyPress:l}=(0,o.useStarControl)(e);return r.default.createElement(n.Menu.ActionItem,{onClick:a,onKeyPress:l,withLeftAccessory:r.default.createElement(s.UIIcon,{src:i})},t)};d.displayName="StarOverflowItem",d.displayName="StarOverflowItem";const p=e=>{const t=(0,l.getStoreForStarred)();return r.default.createElement(a.Provider,{store:t},r.default.createElement(d,Object.assign({},e)))};p.displayName="StarOverflowItemWithProvider";t.makeStarredActionLoader=(e,t,i)=>({actionDefinitions:()=>{const{file:a}=e();if(!(0,o.isStarringEnabled)(a))return{};return{alwaysInOverflow:[[{overflowItem:r.default.createElement(p,{getActiveFile:e,user:t,onToggle:()=>{i.logUserAction("star","overflow_menu")}}),id:c.STARRED_ACTION_PLUGIN_ID}]]}}})})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/unzip_plugin",["require","exports","tslib","react","dig-components/icons","metaserver/static/js/action_bar/file_actions/portable/utils","metaserver/static/js/flows/conversions/actions/unzip","metaserver/static/js/flows/conversions/utils","metaserver/static/js/file_viewer/sdk_file_viewer/utils"],(function(e,t,i,r,a,n,s,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeUnzipActionLoader=void 0,r=i.__importDefault(r);t.makeUnzipActionLoader=(e,t,i)=>({actionDefinitions:()=>{const{file:c,sharePermission:d,shareToken:p}=e();return t&&(0,o.canConvertFile)(c,d)&&s.UnzipAction.selector([c])?{atTopLevelIfSpace:[(0,n.makePluginActionDefinition)({label:s.UnzipAction.actionText,icon:r.default.createElement(a.UIIcon,{src:s.UnzipAction.actionIcon}),id:l.UNZIP_ACTION_PLUGIN_ID,action:()=>{i.logUserAction("decompress_file","title_bar_button"),s.UnzipAction.convert([c],t,{shareToken:p,source:"preview"})}})]}:{}}})})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/signatures_dropdown_plugin",["require","exports","tslib","react","metaserver/static/js/stormcrow/gating_factory","dig-components/icons","dig-components/menu","dig-components/buttons","dig-components/icons/src","metaserver/static/js/clean/analytics","metaserver/static/js/core/i18n","metaserver/static/js/integrations/hellosign_deep_integration/self_sign_plugin","metaserver/static/js/integrations/hellosign_deep_integration/send_file_viewer_plugin","metaserver/static/js/file_store/utils","metaserver/static/js/file_viewer/sdk_file_viewer/utils","metaserver/static/js/integrations/hellosign_deep_integration/add_signatures_util"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logExposure=t.makeSignaturesDropdown=t.SignaturesMenu=void 0,r=i.__importDefault(r);let g=!1;function E({file:e,user:t,logUserAction:i,hideIcons:a}){g||(c.ProEventsLogger.log(`${v.SIGNATURES_ACTIONBAR_DROPDOWN_PLUGIN_ID.toLowerCase()}_shown`),g=!0);const f="pdf"===(0,_.getExtension)(e),E=r.default.createElement(n.UIIcon,{src:l.SignatureLine,role:"presentation"}),w=r.default.useCallback(e=>{null==e||e.handler()},[]);return r.default.createElement(s.Menu.Wrapper,{shouldPropagateClickOutsideMouseEvents:!0,onSelection:w},({getContentProps:n,getTriggerProps:l,triggerRef:c})=>r.default.createElement(r.default.Fragment,null,r.default.createElement(o.Button,Object.assign({},l(),{variant:"opacity",withDropdownIcon:!0,withIconLeft:a?null:E,"data-uxa-log":"signatures_actionbar_button","data-testid":"add-signatures-menu-button","data-campaigns-element-id":"add-signatures-on-preview"}),d.intl.formatMessage({id:"sKlWAb",defaultMessage:"Add signatures"})),r.default.createElement(s.Menu.Content,Object.assign({},n()),r.default.createElement(s.Menu.Segment,null,(0,u.getOverflowItem)(e,t,i,"file_preview_actionbar_dropdown","file_preview_actionbar_dropdown","send_signatures_on_actionbar_dropdown"),!f&&(0,p.getOverflowItem)(e,t,i,"file_preview_actionbar_dropdown_self_sign","file_preview_actionbar_dropdown_self_sign","self_sign_on_actionbar_dropdown")))))}t.SignaturesMenu=E;t.makeSignaturesDropdown=(e,t,i,a,n)=>({actionDefinitions:()=>(e=>{const s=(0,_.getExtension)(e.file);return{atTopLevelIfSpace:(0,f.isAddSignatureDropdownEnabled)(a,s,n)?[{renderButton:a=>{const n=e.file;return r.default.createElement(E,{file:n,user:t,logUserAction:i.logUserAction,hideIcons:a})},id:v.SIGNATURES_ACTIONBAR_DROPDOWN_PLUGIN_ID}]:[]}})(e())}),t.logExposure=function(e){(0,a.getGatingClientSingleton)().logExposure({stormcrowVariantInfo:{feature:"bt_signatures_actionbar_dropdown",variant:e}})}})),define("metaserver/static/js/dropbox/proto/pap_events/previews/preview_file",["require","exports","tslib","protobufjs/minimal","metaserver/static/js/dropbox/proto/pap_events/predefined_event","metaserver/static/js/dropbox/proto/pap_events/event_enums"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;(r=i.__importStar(r)).Reader,r.Writer,r.util;const a=r.roots.default||(r.roots.default={});var n,s;t.default=a,t.pap_events=a.pap_events=((n=a.pap_events||{}).previews=((s=n.previews||{}).Preview_File=(function(e){function e(e){if(e)for(let t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.prototype.eventState=0,e.prototype.actionScreen="",e.prototype.fileType=0,e.prototype.previewType=0,e.prototype.fileSize=0,e.prototype.errorMessage="",e.prototype.errorCode=0,e.create=function(t){return new e(t)},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.previews.Preview_File"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PREVIEWS"]=0,t})(),e.FileType=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_FILE_TYPE"]=0,t[e[1]="DOCX_FILE_TYPE"]=1,t[e[2]="PDF_FILE_TYPE"]=2,t[e[3]="XLS_FILE_TYPE"]=3,t[e[4]="JPG_FILE_TYPE"]=4,t[e[5]="PNG_FILE_TYPE"]=5,t[e[6]="HEIC_FILE_TYPE"]=6,t[e[7]="MP4_FILE_TYPE"]=7,t[e[8]="MOV_FILE_TYPE"]=8,t[e[9]="TXT_FILE_TYPE"]=9,t[e[10]="MP3_FILE_TYPE"]=10,t[e[11]="M4A_FILE_TYPE"]=11,t[e[12]="WEBP_FILE_TYPE"]=12,t[e[13]="XLSX_FILE_TYPE"]=13,t[e[14]="PAGES_FILE_TYPE"]=14,t[e[15]="ZIP_FILE_TYPE"]=15,t[e[16]="GIF_FILE_TYPE"]=16,t[e[17]="URL_FILE_TYPE"]=17,t[e[18]="NUMBERS_FILE_TYPE"]=18,t[e[19]="WAV_FILE_TYPE"]=19,t[e[20]="EPUB_FILE_TYPE"]=20,t[e[21]="DNG_FILE_TYPE"]=21,t[e[22]="OPUS_FILE_TYPE"]=22,t[e[23]="CR2_FILE_TYPE"]=23,t[e[24]="ARW_FILE_TYPE"]=24,t[e[25]="PPTX_FILE_TYPE"]=25,t[e[26]="PSD_FILE_TYPE"]=26,t[e[27]="DOC_FILE_TYPE"]=27,t[e[28]="AMR_FILE_TYPE"]=28,t[e[29]="CSV_FILE_TYPE"]=29,t[e[30]="CLIP_FILE_TYPE"]=30,t[e[31]="NEF_FILE_TYPE"]=31,t[e[32]="KDBX_FILE_TYPE"]=32,t[e[33]="TIFF_FILE_TYPE"]=33,t[e[34]="SVG_FILE_TYPE"]=34,t[e[35]="APK_FILE_TYPE"]=35,t[e[36]="KEY_FILE_TYPE"]=36,t[e[37]="GPX_FILE_TYPE"]=37,t[e[38]="AAC_FILE_TYPE"]=38,t[e[39]="PROCREATE_FILE_TYPE"]=39,t[e[40]="WEBM_FILE_TYPE"]=40,t[e[41]="TORRENT_FILE_TYPE"]=41,t[e[42]="IPV_FILE_TYPE"]=42,t[e[43]="CR3_FILE_TYPE"]=43,t[e[44]="HTML_FILE_TYPE"]=44,t[e[45]="XML_FILE_TYPE"]=45,t[e[46]="VCF_FILE_TYPE"]=46,t[e[47]="RAR_FILE_TYPE"]=47,t[e[48]="PVT_FILE_TYPE"]=48,t[e[49]="ODT_FILE_TYPE"]=49,t[e[50]="MD_FILE_TYPE"]=50,t[e[51]="WEB_FILE_TYPE"]=51,t[e[52]="GSLIDES_FILE_TYPE"]=52,t[e[53]="GDOC_FILE_TYPE"]=53,t[e[54]="GSHEET_FILE_TYPE"]=54,t[e[55]="BINDER_FILE_TYPE"]=55,t[e[56]="PAPERT_FILE_TYPE"]=56,t[e[57]="PAPER_FILE_TYPE"]=57,t[e[58]="WEBSITE_FILE_TYPE"]=58,t[e[59]="JPEG_FILE_TYPE"]=59,t[e[60]="JSON_FILE_TYPE"]=60,t})(),e.PreviewType=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_PREVIEW_TYPE"]=0,t[e[1]="IMAGE_PREVIEW_TYPE"]=1,t[e[2]="LINK_FILE_PREVIEW_TYPE"]=2,t[e[3]="DOC_PREVIEW_TYPE"]=3,t[e[4]="VIDEO_PREVIEW_TYPE"]=4,t[e[5]="AUDIO_PREVIEW_TYPE"]=5,t[e[6]="EXTERNAL_DOC_PREVIEW_TYPE"]=6,t[e[7]="EXTERNAL_PREVIEW_PREVIEW_TYPE"]=7,t[e[8]="NO_PREVIEW_PREVIEW_TYPE"]=8,t[e[9]="FOLDER_PREVIEW_TYPE"]=9,t[e[10]="ARCHIVE_PREVIEW_TYPE"]=10,t[e[11]="CLOUD_DOC_PREVIEW_TYPE"]=11,t[e[12]="ERROR_PREVIEW_TYPE"]=12,t[e[13]="LINKFILE_PREVIEW_TYPE"]=13,t[e[14]="EXCEL_PREVIEW_TYPE"]=14,t[e[15]="HTML_PREVIEW_TYPE"]=15,t})(),e})(s.Preview_File||{}),s),n.EventState=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_EVENT_STATE"]=0,t[e[1]="START"]=1,t[e[2]="SUCCESS"]=2,t[e[3]="FAILED"]=3,t[e[4]="CANCELED"]=4,t})(),n)})),define("metaserver/static/js/dropbox/proto/pap_events/previews/next_file",["require","exports","tslib","protobufjs/minimal","metaserver/static/js/dropbox/proto/pap_events/predefined_event","metaserver/static/js/dropbox/proto/pap_events/event_enums"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;(r=i.__importStar(r)).Reader,r.Writer,r.util;const a=r.roots.default||(r.roots.default={});var n,s;t.default=a,t.pap_events=a.pap_events=((n=a.pap_events||{}).previews=((s=n.previews||{}).Next_File=(function(e){function e(e){if(e)for(let t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.prototype.eventState=0,e.prototype.actionScreen="",e.prototype.actionElement="",e.prototype.fileType=0,e.prototype.fileSize=0,e.prototype.errorMessage="",e.prototype.errorCode=0,e.create=function(t){return new e(t)},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.previews.Next_File"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PREVIEWS"]=0,t})(),e.FileType=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_FILE_TYPE"]=0,t[e[1]="DOCX_FILE_TYPE"]=1,t[e[2]="PDF_FILE_TYPE"]=2,t[e[3]="XLS_FILE_TYPE"]=3,t[e[4]="JPG_FILE_TYPE"]=4,t[e[5]="PNG_FILE_TYPE"]=5,t[e[6]="HEIC_FILE_TYPE"]=6,t[e[7]="MP4_FILE_TYPE"]=7,t[e[8]="MOV_FILE_TYPE"]=8,t[e[9]="TXT_FILE_TYPE"]=9,t[e[10]="MP3_FILE_TYPE"]=10,t[e[11]="M4A_FILE_TYPE"]=11,t[e[12]="WEBP_FILE_TYPE"]=12,t[e[13]="XLSX_FILE_TYPE"]=13,t[e[14]="PAGES_FILE_TYPE"]=14,t[e[15]="ZIP_FILE_TYPE"]=15,t[e[16]="GIF_FILE_TYPE"]=16,t[e[17]="URL_FILE_TYPE"]=17,t[e[18]="NUMBERS_FILE_TYPE"]=18,t[e[19]="WAV_FILE_TYPE"]=19,t[e[20]="EPUB_FILE_TYPE"]=20,t[e[21]="DNG_FILE_TYPE"]=21,t[e[22]="OPUS_FILE_TYPE"]=22,t[e[23]="CR2_FILE_TYPE"]=23,t[e[24]="ARW_FILE_TYPE"]=24,t[e[25]="PPTX_FILE_TYPE"]=25,t[e[26]="PSD_FILE_TYPE"]=26,t[e[27]="DOC_FILE_TYPE"]=27,t[e[28]="AMR_FILE_TYPE"]=28,t[e[29]="CSV_FILE_TYPE"]=29,t[e[30]="CLIP_FILE_TYPE"]=30,t[e[31]="NEF_FILE_TYPE"]=31,t[e[32]="KDBX_FILE_TYPE"]=32,t[e[33]="TIFF_FILE_TYPE"]=33,t[e[34]="SVG_FILE_TYPE"]=34,t[e[35]="APK_FILE_TYPE"]=35,t[e[36]="KEY_FILE_TYPE"]=36,t[e[37]="GPX_FILE_TYPE"]=37,t[e[38]="AAC_FILE_TYPE"]=38,t[e[39]="PROCREATE_FILE_TYPE"]=39,t[e[40]="WEBM_FILE_TYPE"]=40,t[e[41]="TORRENT_FILE_TYPE"]=41,t[e[42]="IPV_FILE_TYPE"]=42,t[e[43]="CR3_FILE_TYPE"]=43,t[e[44]="HTML_FILE_TYPE"]=44,t[e[45]="XML_FILE_TYPE"]=45,t[e[46]="VCF_FILE_TYPE"]=46,t[e[47]="RAR_FILE_TYPE"]=47,t[e[48]="PVT_FILE_TYPE"]=48,t[e[49]="ODT_FILE_TYPE"]=49,t[e[50]="MD_FILE_TYPE"]=50,t[e[51]="WEB_FILE_TYPE"]=51,t[e[52]="GSLIDES_FILE_TYPE"]=52,t[e[53]="GDOC_FILE_TYPE"]=53,t[e[54]="GSHEET_FILE_TYPE"]=54,t[e[55]="BINDER_FILE_TYPE"]=55,t[e[56]="PAPERT_FILE_TYPE"]=56,t[e[57]="PAPER_FILE_TYPE"]=57,t[e[58]="WEBSITE_FILE_TYPE"]=58,t[e[59]="JPEG_FILE_TYPE"]=59,t[e[60]="JSON_FILE_TYPE"]=60,t})(),e})(s.Next_File||{}),s),n.EventState=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_EVENT_STATE"]=0,t[e[1]="START"]=1,t[e[2]="SUCCESS"]=2,t[e[3]="FAILED"]=3,t[e[4]="CANCELED"]=4,t})(),n)})),define("metaserver/static/js/dropbox/proto/pap_events/previews/previous_file",["require","exports","tslib","protobufjs/minimal","metaserver/static/js/dropbox/proto/pap_events/predefined_event","metaserver/static/js/dropbox/proto/pap_events/event_enums"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;(r=i.__importStar(r)).Reader,r.Writer,r.util;const a=r.roots.default||(r.roots.default={});var n,s;t.default=a,t.pap_events=a.pap_events=((n=a.pap_events||{}).previews=((s=n.previews||{}).Previous_File=(function(e){function e(e){if(e)for(let t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.prototype.eventState=0,e.prototype.actionScreen="",e.prototype.actionElement="",e.prototype.fileType=0,e.prototype.fileSize=0,e.prototype.errorCode=0,e.prototype.errorMessage="",e.create=function(t){return new e(t)},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.previews.Previous_File"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PREVIEWS"]=0,t})(),e.FileType=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_FILE_TYPE"]=0,t[e[1]="DOCX_FILE_TYPE"]=1,t[e[2]="PDF_FILE_TYPE"]=2,t[e[3]="XLS_FILE_TYPE"]=3,t[e[4]="JPG_FILE_TYPE"]=4,t[e[5]="PNG_FILE_TYPE"]=5,t[e[6]="HEIC_FILE_TYPE"]=6,t[e[7]="MP4_FILE_TYPE"]=7,t[e[8]="MOV_FILE_TYPE"]=8,t[e[9]="TXT_FILE_TYPE"]=9,t[e[10]="MP3_FILE_TYPE"]=10,t[e[11]="M4A_FILE_TYPE"]=11,t[e[12]="WEBP_FILE_TYPE"]=12,t[e[13]="XLSX_FILE_TYPE"]=13,t[e[14]="PAGES_FILE_TYPE"]=14,t[e[15]="ZIP_FILE_TYPE"]=15,t[e[16]="GIF_FILE_TYPE"]=16,t[e[17]="URL_FILE_TYPE"]=17,t[e[18]="NUMBERS_FILE_TYPE"]=18,t[e[19]="WAV_FILE_TYPE"]=19,t[e[20]="EPUB_FILE_TYPE"]=20,t[e[21]="DNG_FILE_TYPE"]=21,t[e[22]="OPUS_FILE_TYPE"]=22,t[e[23]="CR2_FILE_TYPE"]=23,t[e[24]="ARW_FILE_TYPE"]=24,t[e[25]="PPTX_FILE_TYPE"]=25,t[e[26]="PSD_FILE_TYPE"]=26,t[e[27]="DOC_FILE_TYPE"]=27,t[e[28]="AMR_FILE_TYPE"]=28,t[e[29]="CSV_FILE_TYPE"]=29,t[e[30]="CLIP_FILE_TYPE"]=30,t[e[31]="NEF_FILE_TYPE"]=31,t[e[32]="KDBX_FILE_TYPE"]=32,t[e[33]="TIFF_FILE_TYPE"]=33,t[e[34]="SVG_FILE_TYPE"]=34,t[e[35]="APK_FILE_TYPE"]=35,t[e[36]="KEY_FILE_TYPE"]=36,t[e[37]="GPX_FILE_TYPE"]=37,t[e[38]="AAC_FILE_TYPE"]=38,t[e[39]="PROCREATE_FILE_TYPE"]=39,t[e[40]="WEBM_FILE_TYPE"]=40,t[e[41]="TORRENT_FILE_TYPE"]=41,t[e[42]="IPV_FILE_TYPE"]=42,t[e[43]="CR3_FILE_TYPE"]=43,t[e[44]="HTML_FILE_TYPE"]=44,t[e[45]="XML_FILE_TYPE"]=45,t[e[46]="VCF_FILE_TYPE"]=46,t[e[47]="RAR_FILE_TYPE"]=47,t[e[48]="PVT_FILE_TYPE"]=48,t[e[49]="ODT_FILE_TYPE"]=49,t[e[50]="MD_FILE_TYPE"]=50,t[e[51]="WEB_FILE_TYPE"]=51,t[e[52]="GSLIDES_FILE_TYPE"]=52,t[e[53]="GDOC_FILE_TYPE"]=53,t[e[54]="GSHEET_FILE_TYPE"]=54,t[e[55]="BINDER_FILE_TYPE"]=55,t[e[56]="PAPERT_FILE_TYPE"]=56,t[e[57]="PAPER_FILE_TYPE"]=57,t[e[58]="WEBSITE_FILE_TYPE"]=58,t[e[59]="JPEG_FILE_TYPE"]=59,t[e[60]="JSON_FILE_TYPE"]=60,t})(),e})(s.Previous_File||{}),s),n.EventState=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_EVENT_STATE"]=0,t[e[1]="START"]=1,t[e[2]="SUCCESS"]=2,t[e[3]="FAILED"]=3,t[e[4]="CANCELED"]=4,t})(),n)})),define("metaserver/static/js/dropbox/proto/pap_events/previews_audio/play_audio",["require","exports","tslib","protobufjs/minimal","metaserver/static/js/dropbox/proto/pap_events/predefined_event","metaserver/static/js/dropbox/proto/pap_events/event_enums"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;(r=i.__importStar(r)).Reader,r.Writer,r.util;const a=r.roots.default||(r.roots.default={});var n,s;t.default=a,t.pap_events=a.pap_events=((n=a.pap_events||{}).previews_audio=((s=n.previews_audio||{}).Play_Audio=(function(e){function e(e){if(e)for(let t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.prototype.eventState=0,e.prototype.fileType=0,e.prototype.fileSize=0,e.prototype.errorMessage="",e.prototype.errorCode=0,e.prototype.actionScreen="",e.prototype.previewType=0,e.prototype.playTime=0,e.create=function(t){return new e(t)},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.previews_audio.Play_Audio"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PREVIEWS_AUDIO"]=0,t})(),e.FileType=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_FILE_TYPE"]=0,t[e[1]="DOCX_FILE_TYPE"]=1,t[e[2]="PDF_FILE_TYPE"]=2,t[e[3]="XLS_FILE_TYPE"]=3,t[e[4]="JPG_FILE_TYPE"]=4,t[e[5]="PNG_FILE_TYPE"]=5,t[e[6]="HEIC_FILE_TYPE"]=6,t[e[7]="MP4_FILE_TYPE"]=7,t[e[8]="MOV_FILE_TYPE"]=8,t[e[9]="TXT_FILE_TYPE"]=9,t[e[10]="MP3_FILE_TYPE"]=10,t[e[11]="M4A_FILE_TYPE"]=11,t[e[12]="WEBP_FILE_TYPE"]=12,t[e[13]="XLSX_FILE_TYPE"]=13,t[e[14]="PAGES_FILE_TYPE"]=14,t[e[15]="ZIP_FILE_TYPE"]=15,t[e[16]="GIF_FILE_TYPE"]=16,t[e[17]="URL_FILE_TYPE"]=17,t[e[18]="NUMBERS_FILE_TYPE"]=18,t[e[19]="WAV_FILE_TYPE"]=19,t[e[20]="EPUB_FILE_TYPE"]=20,t[e[21]="DNG_FILE_TYPE"]=21,t[e[22]="OPUS_FILE_TYPE"]=22,t[e[23]="CR2_FILE_TYPE"]=23,t[e[24]="ARW_FILE_TYPE"]=24,t[e[25]="PPTX_FILE_TYPE"]=25,t[e[26]="PSD_FILE_TYPE"]=26,t[e[27]="DOC_FILE_TYPE"]=27,t[e[28]="AMR_FILE_TYPE"]=28,t[e[29]="CSV_FILE_TYPE"]=29,t[e[30]="CLIP_FILE_TYPE"]=30,t[e[31]="NEF_FILE_TYPE"]=31,t[e[32]="KDBX_FILE_TYPE"]=32,t[e[33]="TIFF_FILE_TYPE"]=33,t[e[34]="SVG_FILE_TYPE"]=34,t[e[35]="APK_FILE_TYPE"]=35,t[e[36]="KEY_FILE_TYPE"]=36,t[e[37]="GPX_FILE_TYPE"]=37,t[e[38]="AAC_FILE_TYPE"]=38,t[e[39]="PROCREATE_FILE_TYPE"]=39,t[e[40]="WEBM_FILE_TYPE"]=40,t[e[41]="TORRENT_FILE_TYPE"]=41,t[e[42]="IPV_FILE_TYPE"]=42,t[e[43]="CR3_FILE_TYPE"]=43,t[e[44]="HTML_FILE_TYPE"]=44,t[e[45]="XML_FILE_TYPE"]=45,t[e[46]="VCF_FILE_TYPE"]=46,t[e[47]="RAR_FILE_TYPE"]=47,t[e[48]="PVT_FILE_TYPE"]=48,t[e[49]="ODT_FILE_TYPE"]=49,t[e[50]="MD_FILE_TYPE"]=50,t[e[51]="WEB_FILE_TYPE"]=51,t[e[52]="GSLIDES_FILE_TYPE"]=52,t[e[53]="GDOC_FILE_TYPE"]=53,t[e[54]="GSHEET_FILE_TYPE"]=54,t[e[55]="BINDER_FILE_TYPE"]=55,t[e[56]="PAPERT_FILE_TYPE"]=56,t[e[57]="PAPER_FILE_TYPE"]=57,t[e[58]="WEBSITE_FILE_TYPE"]=58,t[e[59]="JPEG_FILE_TYPE"]=59,t[e[60]="JSON_FILE_TYPE"]=60,t})(),e.PreviewType=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_PREVIEW_TYPE"]=0,t[e[1]="IMAGE_PREVIEW_TYPE"]=1,t[e[2]="LINK_FILE_PREVIEW_TYPE"]=2,t[e[3]="DOC_PREVIEW_TYPE"]=3,t[e[4]="VIDEO_PREVIEW_TYPE"]=4,t[e[5]="AUDIO_PREVIEW_TYPE"]=5,t[e[6]="EXTERNAL_DOC_PREVIEW_TYPE"]=6,t[e[7]="EXTERNAL_PREVIEW_PREVIEW_TYPE"]=7,t[e[8]="NO_PREVIEW_PREVIEW_TYPE"]=8,t[e[9]="FOLDER_PREVIEW_TYPE"]=9,t[e[10]="ARCHIVE_PREVIEW_TYPE"]=10,t[e[11]="CLOUD_DOC_PREVIEW_TYPE"]=11,t[e[12]="ERROR_PREVIEW_TYPE"]=12,t[e[13]="LINKFILE_PREVIEW_TYPE"]=13,t[e[14]="EXCEL_PREVIEW_TYPE"]=14,t[e[15]="HTML_PREVIEW_TYPE"]=15,t})(),e})(s.Play_Audio||{}),s),n.EventState=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_EVENT_STATE"]=0,t[e[1]="START"]=1,t[e[2]="SUCCESS"]=2,t[e[3]="FAILED"]=3,t[e[4]="CANCELED"]=4,t})(),n)})),define("metaserver/static/js/dropbox/proto/pap_events/previews_video/play_video",["require","exports","tslib","protobufjs/minimal","metaserver/static/js/dropbox/proto/pap_events/predefined_event","metaserver/static/js/dropbox/proto/pap_events/event_enums"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;(r=i.__importStar(r)).Reader,r.Writer,r.util;const a=r.roots.default||(r.roots.default={});var n,s;t.default=a,t.pap_events=a.pap_events=((n=a.pap_events||{}).previews_video=((s=n.previews_video||{}).Play_Video=(function(e){function e(e){if(e)for(let t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.prototype.eventState=0,e.prototype.fileSize=0,e.prototype.fileType=0,e.prototype.errorMessage="",e.prototype.errorCode=0,e.prototype.actionScreen="",e.prototype.playTime=0,e.prototype.previewType=0,e.create=function(t){return new e(t)},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.previews_video.Play_Video"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PREVIEWS_VIDEO"]=0,t})(),e.FileType=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_FILE_TYPE"]=0,t[e[1]="DOCX_FILE_TYPE"]=1,t[e[2]="PDF_FILE_TYPE"]=2,t[e[3]="XLS_FILE_TYPE"]=3,t[e[4]="JPG_FILE_TYPE"]=4,t[e[5]="PNG_FILE_TYPE"]=5,t[e[6]="HEIC_FILE_TYPE"]=6,t[e[7]="MP4_FILE_TYPE"]=7,t[e[8]="MOV_FILE_TYPE"]=8,t[e[9]="TXT_FILE_TYPE"]=9,t[e[10]="MP3_FILE_TYPE"]=10,t[e[11]="M4A_FILE_TYPE"]=11,t[e[12]="WEBP_FILE_TYPE"]=12,t[e[13]="XLSX_FILE_TYPE"]=13,t[e[14]="PAGES_FILE_TYPE"]=14,t[e[15]="ZIP_FILE_TYPE"]=15,t[e[16]="GIF_FILE_TYPE"]=16,t[e[17]="URL_FILE_TYPE"]=17,t[e[18]="NUMBERS_FILE_TYPE"]=18,t[e[19]="WAV_FILE_TYPE"]=19,t[e[20]="EPUB_FILE_TYPE"]=20,t[e[21]="DNG_FILE_TYPE"]=21,t[e[22]="OPUS_FILE_TYPE"]=22,t[e[23]="CR2_FILE_TYPE"]=23,t[e[24]="ARW_FILE_TYPE"]=24,t[e[25]="PPTX_FILE_TYPE"]=25,t[e[26]="PSD_FILE_TYPE"]=26,t[e[27]="DOC_FILE_TYPE"]=27,t[e[28]="AMR_FILE_TYPE"]=28,t[e[29]="CSV_FILE_TYPE"]=29,t[e[30]="CLIP_FILE_TYPE"]=30,t[e[31]="NEF_FILE_TYPE"]=31,t[e[32]="KDBX_FILE_TYPE"]=32,t[e[33]="TIFF_FILE_TYPE"]=33,t[e[34]="SVG_FILE_TYPE"]=34,t[e[35]="APK_FILE_TYPE"]=35,t[e[36]="KEY_FILE_TYPE"]=36,t[e[37]="GPX_FILE_TYPE"]=37,t[e[38]="AAC_FILE_TYPE"]=38,t[e[39]="PROCREATE_FILE_TYPE"]=39,t[e[40]="WEBM_FILE_TYPE"]=40,t[e[41]="TORRENT_FILE_TYPE"]=41,t[e[42]="IPV_FILE_TYPE"]=42,t[e[43]="CR3_FILE_TYPE"]=43,t[e[44]="HTML_FILE_TYPE"]=44,t[e[45]="XML_FILE_TYPE"]=45,t[e[46]="VCF_FILE_TYPE"]=46,t[e[47]="RAR_FILE_TYPE"]=47,t[e[48]="PVT_FILE_TYPE"]=48,t[e[49]="ODT_FILE_TYPE"]=49,t[e[50]="MD_FILE_TYPE"]=50,t[e[51]="WEB_FILE_TYPE"]=51,t[e[52]="GSLIDES_FILE_TYPE"]=52,t[e[53]="GDOC_FILE_TYPE"]=53,t[e[54]="GSHEET_FILE_TYPE"]=54,t[e[55]="BINDER_FILE_TYPE"]=55,t[e[56]="PAPERT_FILE_TYPE"]=56,t[e[57]="PAPER_FILE_TYPE"]=57,t[e[58]="WEBSITE_FILE_TYPE"]=58,t[e[59]="JPEG_FILE_TYPE"]=59,t[e[60]="JSON_FILE_TYPE"]=60,t})(),e.PreviewType=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_PREVIEW_TYPE"]=0,t[e[1]="IMAGE_PREVIEW_TYPE"]=1,t[e[2]="LINK_FILE_PREVIEW_TYPE"]=2,t[e[3]="DOC_PREVIEW_TYPE"]=3,t[e[4]="VIDEO_PREVIEW_TYPE"]=4,t[e[5]="AUDIO_PREVIEW_TYPE"]=5,t[e[6]="EXTERNAL_DOC_PREVIEW_TYPE"]=6,t[e[7]="EXTERNAL_PREVIEW_PREVIEW_TYPE"]=7,t[e[8]="NO_PREVIEW_PREVIEW_TYPE"]=8,t[e[9]="FOLDER_PREVIEW_TYPE"]=9,t[e[10]="ARCHIVE_PREVIEW_TYPE"]=10,t[e[11]="CLOUD_DOC_PREVIEW_TYPE"]=11,t[e[12]="ERROR_PREVIEW_TYPE"]=12,t[e[13]="LINKFILE_PREVIEW_TYPE"]=13,t[e[14]="EXCEL_PREVIEW_TYPE"]=14,t[e[15]="HTML_PREVIEW_TYPE"]=15,t})(),e})(s.Play_Video||{}),s),n.EventState=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_EVENT_STATE"]=0,t[e[1]="START"]=1,t[e[2]="SUCCESS"]=2,t[e[3]="FAILED"]=3,t[e[4]="CANCELED"]=4,t})(),n)})),define("metaserver/static/js/file_viewer/sdk_file_viewer/pap_logger/utils",["require","exports","metaserver/static/js/pap/util","typescript/libraries/file-viewer/src/core/types/preview_type"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPapPreviewType=t.getPapFileType=void 0,t.getPapFileType=function(e,t){let r,a;switch(e){case"cr2":case"cr3":case"mp3":case"mp4":case"m4a":a=e.toUpperCase()+"_FILE_TYPE",r=t[a];break;default:a=e+"_FILE_TYPE",r=(0,i.getEnumValueForString)(a,t)}return r||(a="UNKNOWN_FILE_TYPE",t[a])},t.getPapPreviewType=function(e,t){let a;switch(e){case r.PreviewType.Image:case r.PreviewType.Doc:case r.PreviewType.Video:case r.PreviewType.Audio:case r.PreviewType.Archive:case r.PreviewType.CloudDoc:case r.PreviewType.Linkfile:case r.PreviewType.Error:case r.PreviewType.Excel:case r.PreviewType.HTML:a=e;break;case r.PreviewType.SsrDoc:a="doc";break;case r.PreviewType.RawHTML:a="html";break;default:a="unknown"}return a+="_PREVIEW_TYPE",(0,i.getEnumValueForString)(a,t)}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/pap_logger/pap_background_event_logger",["require","exports","tslib","metaserver/static/js/file_viewer/sdk_file_viewer/pap_logger/utils","typescript/libraries/file-viewer/src/core/logging/constants","metaserver/static/js/pap/analytics_client","metaserver/static/js/dropbox/proto/pap_events/previews/save_edit_mode","metaserver/static/js/file_store/utils"],(function(e,t,i,r,a,n,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logBackgroundEventToPap=void 0;t.logBackgroundEventToPap=(e,t)=>i.__awaiter(void 0,void 0,void 0,(function*(){const{previewSurface:i,file:l}=t,c=l?(0,o.getExtension)(l):void 0;let d;switch(e){case a.BackgroundEvent.EditVideoSaveSucceeded:d=s.pap_events.previews.Save_EditMode.FileType,(0,n.logEvent)(s.pap_events.previews.Save_EditMode.create({eventState:s.pap_events.EventState.SUCCESS,actionScreen:i,fileSize:null==l?void 0:l.bytes,fileType:c?(0,r.getPapFileType)(c,d):void 0}));break;case a.BackgroundEvent.EditVideoSaveFailed:d=s.pap_events.previews.Save_EditMode.FileType,(0,n.logEvent)(s.pap_events.previews.Save_EditMode.create({eventState:s.pap_events.EventState.FAILED,actionScreen:i,fileSize:null==l?void 0:l.bytes,fileType:c?(0,r.getPapFileType)(c,d):void 0}))}}))})),define("metaserver/static/js/file_viewer/sdk_file_viewer/pap_logger/pap_preview_logger",["require","exports","tslib","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/logging/video","metaserver/static/js/file_store/utils","metaserver/static/js/file_viewer/sdk_file_viewer/pap_logger/utils","metaserver/static/js/file_viewer/sdk_file_viewer/pap_logger/pap_background_event_logger","metaserver/static/js/file_viewer/sdk_file_viewer/pap_logger/pap_user_action_logger","metaserver/static/js/pap/analytics_client","metaserver/static/js/dropbox/proto/pap_events/previews/preview_file","metaserver/static/js/dropbox/proto/pap_events/previews_video/play_video","metaserver/static/js/dropbox/proto/pap_events/previews_audio/play_audio"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logAudioToPap=t.logVideoToPap=t.logPreviewToPap=t.logToPap=void 0;t.logToPap=(e,r,a)=>i.__awaiter(void 0,void 0,void 0,(function*(){a.previewType=r.extra.preview_type,"background"===e?(0,o.logBackgroundEventToPap)(r.extra.event,a):"user_action"===e?(0,l.logUserActionToPap)(r.extra,a):(0,t.logPreviewToPap)(e,a)}));t.logPreviewToPap=(e,t)=>i.__awaiter(void 0,void 0,void 0,(function*(){const{previewSurface:i,previewType:a,file:o}=t,l=d.pap_events.previews.Preview_File.FileType,p=d.pap_events.previews.Preview_File.PreviewType,u=o?(0,n.getExtension)(o):void 0;switch(e){case r.SessionEventType.FilePreviewAttemptStarted:(0,c.logEvent)(d.pap_events.previews.Preview_File.create({eventState:d.pap_events.EventState.START,actionScreen:i,fileType:u?(0,s.getPapFileType)(u,l):void 0,fileSize:null==o?void 0:o.bytes,previewType:a?(0,s.getPapPreviewType)(a,p):void 0}));break;case r.SessionEventType.FilePreviewRenderSucceeded:(0,c.logEvent)(d.pap_events.previews.Preview_File.create({eventState:d.pap_events.EventState.SUCCESS,actionScreen:i,fileType:u?(0,s.getPapFileType)(u,l):void 0,fileSize:null==o?void 0:o.bytes,previewType:a?(0,s.getPapPreviewType)(a,p):void 0}));break;case r.SessionEventType.FilePreviewRenderFailed:(0,c.logEvent)(d.pap_events.previews.Preview_File.create({eventState:d.pap_events.EventState.FAILED,actionScreen:i,fileType:u?(0,s.getPapFileType)(u,l):void 0,fileSize:null==o?void 0:o.bytes,previewType:a?(0,s.getPapPreviewType)(a,p):void 0}))}}));t.logVideoToPap=(e,t)=>i.__awaiter(void 0,void 0,void 0,(function*(){const{previewSurface:i,previewType:r,file:o}=t,l=p.pap_events.previews_video.Play_Video.FileType,d=p.pap_events.previews_video.Play_Video.PreviewType,u=o?(0,n.getExtension)(o):void 0;switch(e){case a.VideoPreviewEvent.VideoStartsPlaying:(0,c.logEvent)(p.pap_events.previews_video.Play_Video.create({eventState:p.pap_events.EventState.SUCCESS,actionScreen:i,fileType:u?(0,s.getPapFileType)(u,l):void 0,fileSize:null==o?void 0:o.bytes,previewType:r?(0,s.getPapPreviewType)(r,d):void 0}));break;case a.VideoPreviewEvent.MediaError:(0,c.logEvent)(p.pap_events.previews_video.Play_Video.create({eventState:p.pap_events.EventState.FAILED,actionScreen:i,fileType:u?(0,s.getPapFileType)(u,l):void 0,fileSize:null==o?void 0:o.bytes,previewType:r?(0,s.getPapPreviewType)(r,d):void 0}))}}));t.logAudioToPap=(e,t)=>i.__awaiter(void 0,void 0,void 0,(function*(){const{previewSurface:i,previewType:r,file:o}=t,l=u.pap_events.previews_audio.Play_Audio.FileType,d=u.pap_events.previews_audio.Play_Audio.PreviewType,p=o?(0,n.getExtension)(o):void 0;switch(e){case a.VideoPreviewEvent.VideoStartsPlaying:(0,c.logEvent)(u.pap_events.previews_audio.Play_Audio.create({eventState:u.pap_events.EventState.SUCCESS,actionScreen:i,fileType:p?(0,s.getPapFileType)(p,l):void 0,fileSize:null==o?void 0:o.bytes,previewType:r?(0,s.getPapPreviewType)(r,d):void 0}));break;case a.VideoPreviewEvent.MediaError:(0,c.logEvent)(u.pap_events.previews_audio.Play_Audio.create({eventState:u.pap_events.EventState.FAILED,actionScreen:i,fileType:p?(0,s.getPapFileType)(p,l):void 0,fileSize:null==o?void 0:o.bytes,previewType:r?(0,s.getPapPreviewType)(r,d):void 0}))}}))})),define("metaserver/static/js/file_viewer/sdk_file_viewer/pap_logger/pap_user_action_logger",["require","exports","tslib","typescript/libraries/file-viewer/src/core/logging/constants","metaserver/static/js/file_store/utils","metaserver/static/js/pap/analytics_client","metaserver/static/js/dropbox/proto/pap_events/previews/cancel_edit_mode","metaserver/static/js/dropbox/proto/pap_events/previews/undo_change","metaserver/static/js/dropbox/proto/pap_events/previews/redo_change","metaserver/static/js/dropbox/proto/pap_events/previews/save_edit_mode","metaserver/static/js/dropbox/proto/pap_events/previews/create_folder","metaserver/static/js/dropbox/proto/pap_events/previews/next_file","metaserver/static/js/dropbox/proto/pap_events/previews/previous_file","metaserver/static/js/dropbox/proto/pap_events/previews/zoom_file","metaserver/static/js/dropbox/proto/pap_events/previews/open_fullscreen","metaserver/static/js/dropbox/proto/pap_events/previews/close_fullscreen","metaserver/static/js/dropbox/proto/pap_events/previews/print_file","metaserver/static/js/dropbox/proto/pap_events/previews/open_sidebar","metaserver/static/js/dropbox/proto/pap_events/previews/close_sidebar","metaserver/static/js/dropbox/proto/pap_events/previews/open_search_box","metaserver/static/js/file_viewer/sdk_file_viewer/pap_logger/utils"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f,g,E,w,b,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logUserActionToPap=void 0;t.logUserActionToPap=(e,t)=>i.__awaiter(void 0,void 0,void 0,(function*(){const{previewSurface:i,file:h}=t,y=e.action,P=h?(0,a.getExtension)(h):void 0;let T;switch(y){case r.UserAction.EditVideoCancel:case r.UserAction.EditVideoDiscardChangesClicked:T=s.pap_events.previews.Cancel_EditMode.FileType,(0,n.logEvent)(s.pap_events.previews.Cancel_EditMode.create({eventState:s.pap_events.EventState.START,actionScreen:i,fileSize:null==h?void 0:h.bytes,fileType:P?(0,m.getPapFileType)(P,T):void 0}));break;case r.UserAction.EditVideoDiscardChangesCancel:T=s.pap_events.previews.Cancel_EditMode.FileType,(0,n.logEvent)(s.pap_events.previews.Cancel_EditMode.create({eventState:s.pap_events.EventState.CANCELED,actionScreen:i,fileSize:null==h?void 0:h.bytes,fileType:P?(0,m.getPapFileType)(P,T):void 0}));break;case r.UserAction.EditVideoDiscardChangesConfirmed:T=s.pap_events.previews.Cancel_EditMode.FileType,(0,n.logEvent)(s.pap_events.previews.Cancel_EditMode.create({eventState:s.pap_events.EventState.SUCCESS,actionScreen:i,fileSize:null==h?void 0:h.bytes,fileType:P?(0,m.getPapFileType)(P,T):void 0}));break;case r.UserAction.EditVideoRedo:T=l.pap_events.previews.Redo_Change.FileType,(0,n.logEvent)(l.pap_events.previews.Redo_Change.create({actionScreen:i,fileSize:null==h?void 0:h.bytes,fileType:P?(0,m.getPapFileType)(P,T):void 0}));break;case r.UserAction.EditVideoUndo:T=o.pap_events.previews.Undo_Change.FileType,(0,n.logEvent)(o.pap_events.previews.Undo_Change.create({actionScreen:i,fileSize:null==h?void 0:h.bytes,fileType:P?(0,m.getPapFileType)(P,T):void 0}));break;case r.UserAction.EditVideoReplaceOriginalClicked:T=c.pap_events.previews.Save_EditMode.FileType,(0,n.logEvent)(c.pap_events.previews.Save_EditMode.create({eventState:c.pap_events.EventState.START,actionScreen:i,fileSize:null==h?void 0:h.bytes,fileType:P?(0,m.getPapFileType)(P,T):void 0,actionElement:"replace_original"}));break;case r.UserAction.EditVideoReplaceOriginalCancel:T=c.pap_events.previews.Save_EditMode.FileType,(0,n.logEvent)(c.pap_events.previews.Save_EditMode.create({eventState:c.pap_events.EventState.CANCELED,actionScreen:i,fileSize:null==h?void 0:h.bytes,fileType:P?(0,m.getPapFileType)(P,T):void 0,actionElement:"replace_original"}));break;case r.UserAction.EditVideoSaveCopyClicked:T=c.pap_events.previews.Save_EditMode.FileType,(0,n.logEvent)(c.pap_events.previews.Save_EditMode.create({eventState:c.pap_events.EventState.START,actionScreen:i,fileSize:null==h?void 0:h.bytes,fileType:P?(0,m.getPapFileType)(P,T):void 0,actionElement:"save_a_copy"}));break;case r.UserAction.EditVideoSaveCopyCancel:T=c.pap_events.previews.Save_EditMode.FileType,(0,n.logEvent)(c.pap_events.previews.Save_EditMode.create({eventState:c.pap_events.EventState.CANCELED,actionScreen:i,fileSize:null==h?void 0:h.bytes,fileType:P?(0,m.getPapFileType)(P,T):void 0,actionElement:"save_a_copy"}));break;case r.UserAction.EditVideoNewFolderAttempt:T=d.pap_events.previews.Create_Folder.FileType,(0,n.logEvent)(d.pap_events.previews.Create_Folder.create({eventState:d.pap_events.EventState.START,actionScreen:i,fileSize:null==h?void 0:h.bytes,fileType:P?(0,m.getPapFileType)(P,T):void 0}));break;case r.UserAction.EditVideoNewFolderCancel:T=d.pap_events.previews.Create_Folder.FileType,(0,n.logEvent)(d.pap_events.previews.Create_Folder.create({eventState:d.pap_events.EventState.CANCELED,actionScreen:i,fileSize:null==h?void 0:h.bytes,fileType:P?(0,m.getPapFileType)(P,T):void 0}));break;case r.UserAction.EditVideoNewFolderSuccess:T=d.pap_events.previews.Create_Folder.FileType,(0,n.logEvent)(d.pap_events.previews.Create_Folder.create({eventState:d.pap_events.EventState.SUCCESS,actionScreen:i,fileSize:null==h?void 0:h.bytes,fileType:P?(0,m.getPapFileType)(P,T):void 0}));break;case r.UserAction.EditVideoNewFolderFailure:T=d.pap_events.previews.Create_Folder.FileType,(0,n.logEvent)(d.pap_events.previews.Create_Folder.create({eventState:d.pap_events.EventState.FAILED,actionScreen:i,fileSize:null==h?void 0:h.bytes,fileType:P?(0,m.getPapFileType)(P,T):void 0}));break;case r.UserAction.FlipNext:T=p.pap_events.previews.Next_File.FileType,(0,n.logEvent)(p.pap_events.previews.Next_File.create({eventState:p.pap_events.EventState.START,actionScreen:"keyboard"===e.context?e.context:i,fileSize:null==h?void 0:h.bytes,fileType:P?(0,m.getPapFileType)(P,T):void 0}));break;case r.UserAction.FlipPrevious:T=u.pap_events.previews.Previous_File.FileType,(0,n.logEvent)(u.pap_events.previews.Previous_File.create({eventState:u.pap_events.EventState.START,actionScreen:"keyboard"===e.context?e.context:i,fileSize:null==h?void 0:h.bytes,fileType:P?(0,m.getPapFileType)(P,T):void 0}));break;case r.UserAction.ZoomIn:case r.UserAction.ZoomOut:T=_.pap_events.previews.Zoom_File.FileType,(0,n.logEvent)(_.pap_events.previews.Zoom_File.create({eventState:_.pap_events.EventState.SUCCESS,actionScreen:e.context,actionElement:e.action,fileSize:null==h?void 0:h.bytes,fileType:P?(0,m.getPapFileType)(P,T):void 0}));break;case r.UserAction.ToggleFullscreenOn:T=v.pap_events.previews.Open_Fullscreen.FileType,(0,n.logEvent)(v.pap_events.previews.Open_Fullscreen.create({actionScreen:e.context,fileSize:null==h?void 0:h.bytes,fileType:P?(0,m.getPapFileType)(P,T):void 0}));break;case r.UserAction.ToggleFullscreenOff:T=f.pap_events.previews.Close_Fullscreen.FileType,(0,n.logEvent)(f.pap_events.previews.Close_Fullscreen.create({actionScreen:e.context,fileSize:null==h?void 0:h.bytes,fileType:P?(0,m.getPapFileType)(P,T):void 0}));break;case r.UserAction.Print:T=g.pap_events.previews.Print_File.FileType,(0,n.logEvent)(g.pap_events.previews.Print_File.create({eventState:g.pap_events.EventState.SUCCESS,actionScreen:e.context,fileSize:null==h?void 0:h.bytes,fileType:P?(0,m.getPapFileType)(P,T):void 0}));break;case r.UserAction.OpenDocSidebar:T=E.pap_events.previews.Open_Sidebar.FileType,(0,n.logEvent)(E.pap_events.previews.Open_Sidebar.create({eventState:E.pap_events.EventState.SUCCESS,actionScreen:e.context,fileSize:null==h?void 0:h.bytes,fileType:P?(0,m.getPapFileType)(P,T):void 0}));break;case r.UserAction.CloseDocSidebar:T=w.pap_events.previews.Close_Sidebar.FileType,(0,n.logEvent)(w.pap_events.previews.Close_Sidebar.create({eventState:w.pap_events.EventState.SUCCESS,actionScreen:e.context,fileSize:null==h?void 0:h.bytes,fileType:P?(0,m.getPapFileType)(P,T):void 0}));break;case r.UserAction.FindInDocStart:T=b.pap_events.previews.Open_SearchBox.FileType,(0,n.logEvent)(b.pap_events.previews.Open_SearchBox.create({eventState:b.pap_events.EventState.START,actionScreen:e.context,fileSize:null==h?void 0:h.bytes,fileType:P?(0,m.getPapFileType)(P,T):void 0}))}}))})),define("metaserver/static/js/file_viewer/sdk_file_viewer/preview_logger",["require","exports","tslib","metaserver/static/js/deprecated_ajax/ajax_jquery","metaserver/static/js/perf_tools/web_timing_utils","metaserver/static/js/metrics/index","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/shared/apex-metrics/src/index","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","metaserver/static/js/edison/edison","metaserver/static/js/user_survey/user_survey","metaserver/static/js/file_viewer/sdk_file_viewer/pap_logger/pap_preview_logger"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logInterstitialEventToAmp=t.logDuration=t.logVideo=t.makeLogger=t.logEvent=void 0,r=i.__importStar(r),l=i.__importStar(l);const _=[s.SessionEventType.FilePreviewSupportConfirmed,s.SessionEventType.FilePreviewSupportDenied,s.SessionEventType.FilePreviewDownloadAttempted,s.SessionEventType.FilePreviewDownloadSucceeded,s.SessionEventType.FilePreviewDownloadFailed,s.SessionEventType.FilePreviewRenderSucceeded,s.SessionEventType.FilePreviewRenderFailed,s.SessionEventType.FilePreviewSessionEnded],v=e=>i.__awaiter(void 0,void 0,void 0,(function*(){r.SilentBackgroundBeaconRequest(e)})),f=e=>Object.assign(Object.assign(Object.assign({device_type:e.device_type},e.extra.source_context&&{source_context:e.extra.source_context}),e.extra.preview_type&&{preview_type:e.extra.preview_type}),e.extra.action&&{action:e.extra.action}),g=(e,i)=>{(0,n.getMetricsReporter)().createStats({ns:"web_previews",name:e},Object.assign(Object.assign({},f(i)),{deployment:l.YAPS_DEPLOYMENT,is_edison:d.Edison.initialized().toString()})).record(1),_.includes(e)&&((e,t)=>{const i=t.extra.file_preview_timeline?JSON.parse(t.extra.file_preview_timeline):{};if(s.SessionEventType.FilePreviewAttemptStarted in i&&e in i){const r=i[e]-i[s.SessionEventType.FilePreviewAttemptStarted];r>0&&(0,n.getMetricsReporter)().createStats({ns:"web_previews",name:"time_from_attempt_ms"},Object.assign(Object.assign({},f(t)),{event_name:e,deployment:l.YAPS_DEPLOYMENT,is_edison:d.Edison.initialized().toString()})).recordDuration(r,o.TimeUnit.MILLISECONDS)}})(e,i),((e,i)=>{if(e===s.SessionEventType.FilePreviewAttemptStarted&&i.extra.source_action===s.SourceAction.Visit&&window.performance){const e=Date.now()-window.performance.timing.navigationStart;e>0&&(0,t.logDuration)({eventName:"time_to_preview_attempt_from_load_ms",durationInMs:e,session:i})}})(e,i)};t.logEvent=(e,t)=>{const i=t.extra.file_preview_timeline?JSON.stringify(Object.assign({},...Object.entries(JSON.parse(t.extra.file_preview_timeline)).map(([e,t])=>({[e+"_ts"]:t})))):void 0,r={is_edison:d.Edison.initialized().toString()},a={device_type:t.device_type,event_name:e,extra:JSON.stringify(Object.assign(Object.assign(Object.assign({},r),t.extra),{request_id:c.REQUEST_ID})),file_viewer_session_id:t.file_viewer_session_id,file_preview_session_id:t.file_preview_session_id,file_ns_id:t.ns_id,file_sjid:t.sj_id,file_preview_timeline:i,file_preview_size:t.file_preview_size};v({url:"/log/file_preview",data:a}),g(e,t),(e=>{e.event===s.BackgroundEvent.EditVideoSaveSucceeded?p.UserSurvey.trackEvent("save_video_edit","previews"):(e.action===s.UserAction.EditVideoCancel&&"false"===e.have_changes||e.action===s.UserAction.EditVideoDiscardChangesConfirmed)&&p.UserSurvey.trackEvent("quit_video_edit","previews")})(t.extra)};t.makeLogger=(e,i)=>(r,a)=>{const n=i().file;(0,t.logEvent)(r,a),(0,u.logToPap)(r,a,{previewSurface:e,file:n})};t.logVideo=(e,t)=>{const{file_preview_session_id:i,video_format:r,video_duration_seconds:n,video_truncated:s,ns_id:o,sj_id:l,extra:c}=t,d={event_name:e,client_timestamp_ms:a.WebTimingUtil.getNow(),file_preview_session_id:i,video_format:r,video_duration_seconds:n,video_truncated:s,ns_id:o,sj_id:l,extra:JSON.stringify(c)};v({url:"/log/video_preview",data:d})};t.logDuration=({eventName:e,durationInMs:t,session:i,tags:r={},shouldLogToHive:s})=>{const l=d.Edison.initialized();if((0,n.getMetricsReporter)().createStats({ns:"web_previews",name:e},Object.assign(Object.assign(Object.assign({},r),i&&f(i)),{is_edison:l.toString()})).recordDuration(t,o.TimeUnit.MILLISECONDS),s){const r={event_name:e,duration:t.toString(),is_edison:l.toString()};if(i){const e={event_name:"user_timing",device_type:i.device_type,client_timestamp_ms:a.WebTimingUtil.getNow(),file_preview_session_id:i.file_preview_session_id,file_viewer_session_id:i.file_viewer_session_id,file_preview_size:i.file_preview_size,file_ns_id:i.ns_id,file_sjid:i.sj_id,extra:JSON.stringify(Object.assign(Object.assign({},i.extra),r))};v({url:"/log/file_preview",data:e})}}};t.logInterstitialEventToAmp=(e,t)=>{(0,n.getMetricsReporter)().createStats({ns:"web_previews",name:e},{source:t,is_edison:d.Edison.initialized().toString()}).record(1)}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/report_exception",["require","exports","tslib","metaserver/static/js/core/exception"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeReportExceptionClient=void 0,r=i.__importStar(r),t.makeReportExceptionClient=function(){return{reportException:(e,t,i)=>r.reportException({err:e,severity:i?"critical":"non-critical",tags:["file-viewer",t]})}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/toolbar_plugins/star_plugin",["require","exports","tslib","react","react-redux","dig-components/buttons","dig-components/tooltips","dig-components/icons","metaserver/static/js/file_viewer/sdk_file_viewer/hooks","metaserver/static/js/starred/redux/store"],(function(e,t,i,r,a,n,s,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeStarToolbarButtonLoader=void 0,r=i.__importDefault(r);const d=e=>{var{className:t}=e,a=i.__rest(e,["className"]);const{message:c,iconSrc:d,handleClick:p}=(0,l.useStarControl)(a),{file:u}=a.getActiveFile();return(0,l.isStarringEnabled)(u)?r.default.createElement(s.Tooltip,{title:c,shouldCloseOnClick:!0},r.default.createElement(n.IconButton,{variant:"transparent",onClick:p,className:t,"aria-label":c,inverse:!0},r.default.createElement(o.UIIcon,{src:d}))):null};d.displayName="_StarButton";const p=e=>{const t=(0,c.getStoreForStarred)();return r.default.createElement(a.Provider,{store:t},r.default.createElement(d,Object.assign({},e)))};p.displayName="StarButton",p.displayName="StarButton";t.makeStarToolbarButtonLoader=(e,t)=>class{constructor(){this.identifier="star",this.lifecycle={},this.toolbarUI=({className:i})=>r.default.createElement(p,{getActiveFile:e,user:t,className:i})}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/add_to_collection_plugin",["require","exports","tslib","react","metaserver/static/js/core/i18n","dig-components/icons","metaserver/static/js/action_bar/file_actions/portable/utils","dig-components/icons/src","metaserver/static/js/file_viewer/sdk_file_viewer/experiments","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/file_viewer/sdk_file_viewer/utils"],(function(e,t,i,r,a,n,s,o,l,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeAddToCollectionActionLoader=void 0,r=i.__importDefault(r);t.makeAddToCollectionActionLoader=(t,u,_)=>({actionDefinitions:()=>{const{file:u}=t();return(0,c.isLiveFile)(u)&&l.fileViewerFeatureExperiments.enableAddToCollection?{alwaysInOverflow:[[(0,s.makePluginActionDefinition)({label:a.intl.formatMessage(d.ADD_TO_COLLECTION_STRING),icon:r.default.createElement(n.UIIcon,{src:o.AddToCollectionLine}),id:p.ADD_TO_COLLECTION_ACTION_PLUGIN_ID,action:()=>i.__awaiter(void 0,void 0,void 0,(function*(){const{showCollectionSaverModal:t}=yield new Promise((t,i)=>{e(["metaserver/static/js/collections/components/saver_modal/index"],t,i)}).then(i.__importStar);_.logUserAction("add_to_collection","title_bar_button"),t({fileIds:[u.file_id],surface:"preview"})}))})]]}:{}}})})),define("typescript/libraries/file-viewer/src/app",["require","exports","tslib","react","classnames","react-redux","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/app.module.css","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/renderer","react-intl","typescript/libraries/file-viewer/src/plugins/types","typescript/libraries/file-viewer/src/plugins/selectors/active_plugin","dig-components/layer","typescript/libraries/file-viewer/src/plugins/props","typescript/libraries/file-viewer/src/plugins/data","typescript/libraries/file-viewer/src/titlebar/title_bar","typescript/libraries/file-viewer/src/right_rail/right_rail","typescript/libraries/file-viewer/src/utils","typescript/libraries/file-viewer/src/preview_content/preview_content","typescript/libraries/file-viewer/src/right_rail/edit_plugin_sidebar","typescript/libraries/file-viewer/src/preview_error/error_boundary","typescript/libraries/file-viewer/src/plugins/edit_fullscreen_plugin_action","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/utils/support","typescript/libraries/file-viewer/src/core/utils/sizing_utils","react-redux","typescript/libraries/file-viewer/src/plugins/selectors/active_plugin","typescript/libraries/file-viewer/src/logging/timing","typescript/libraries/file-viewer/src/logging/performance","typescript/libraries/file-viewer/src/file_viewer/context_provider","typescript/libraries/file-viewer/src/render_context","typescript/libraries/file-viewer/src/keyboard/bindings","typescript/libraries/file-viewer/src/keyboard/keyboard_connector","ts-key-enum","typescript/libraries/file-viewer/src/keyboard/keyboard_provider","typescript/libraries/file-viewer/src/preview_error/preview_error","typescript/libraries/file-viewer/src/toolbar/toolbar_actions","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/hooks/selectors","typescript/libraries/file-viewer/src/hooks/useStabilizedCallback"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f,g,E,w,b,m,h,y,P,T,I,F,S,L,C,A,O,x,D,R,M,N,k,V,j,Y,U){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppWithProvider=t.App=void 0,r=i.__importStar(r),a=i.__importDefault(a),l=i.__importStar(l);const B=r.memo(e=>{const{id:t,previewKey:i,isDeleteEnabled:a,isFileFlippingEnabled:n,isPreviewZoomed:o,enableFullscreen:l,dispatch:d,fileIndex:p,collectionFileCount:u}=e,_=(0,S.useSelector)(e=>e.isDeleteFileModalOpen),v=l?(0,D.getKeyboardBinding)({callback:()=>d((0,s.enterFullScreen)({previewKey:i,fileViewerId:t,sourceContext:c.UserActionContext.Keyboard})),key:"f"}):null,f=(0,D.getKeyboardBinding)({key:M.Key.Escape,callback:()=>{d((0,s.closeViewer)({previewKey:i,fileViewerId:t,sourceContext:c.UserActionContext.Keyboard}))}}),g=i&&(0,D.getDeleteFileBindings)(e=>{d((0,s.deleteFile)({previewKey:i,fileViewerId:t,sourceContext:c.UserActionContext.Keyboard,key:e===M.Key.Delete?"delete":"backspace"}))}),E=(0,D.getFileFlippingBindings)({dispatch:d,previewKey:i,fileViewerId:t,requireCommandKey:o,fileIndex:p,collectionFileCount:u}),w=[];return v&&w.push(v),n&&!_&&(w.push(...E),w.push(f)),a&&!_&&g&&w.push(...g),r.createElement(R.KeyboardBindingConnector,{name:"app",keyboardBindings:w})});B.displayName="AppKeyboardBindings";t.App=e=>{var t;const{activePluginInstance:i,config:n,fileViewerUiData:p,dispatch:_,fileInfo:v,fileMetadata:f,fileConfig:g,filePreviewUiData:P,id:O,previewMetadata:D,pluginQueryBus:R,shouldShowRightRail:M,shouldShowTitlebar:N,viewport:V,pluginProps:K,rightRailPluginInstances:z,pluginNavigation:W,archiveFiles:H,fullFilePreviewUi:G,fullRivieraData:q,isFullScreen:X,isPreviewZoomed:Z,pluginInstances:$,onMount:J,onDestroy:Q,onTtiMarked:ee,callbacks:te,rootInfo:ie,enabledEditPluginFullscreenActionDefinitions:re,header:ae,mobileFooter:ne,mobileHeader:se,folderPicker:oe,titlebar:le,isEditingVideo:ce}=e,de=(0,Y.useFileViewerSelector)(O,o.getFilePreviewSessionId),pe=!!(0,S.useSelector)(e=>(0,L.getSelectedHideContentPanePluginId)(e,O)),ue=r.useCallback(()=>_((0,s.setPreviewLoadingAction)({isPreviewLoading:!1})),[_]),_e=(0,U.useStabilizedCallback)(()=>{de&&_((0,T.logSessionEvent)({event:c.SessionEventType.FilePreviewRenderSucceeded,fileViewerId:O,previewSessionId:de})),ue(),(null==te?void 0:te.onRenderSucceeded)&&te.onRenderSucceeded()}),ve=(0,U.useStabilizedCallback)(()=>{de&&_((0,T.logSessionEvent)({event:c.SessionEventType.FilePreviewRenderFailed,fileViewerId:O,previewSessionId:de})),ue()}),{onLogTTI:fe}=(0,C.useTimingLogging)(O),ge=r.useCallback(()=>{fe(),null==ee||ee()},[fe,ee]);r.useEffect(()=>{A.PreviewsEventLogger.mark(A.PreviewsTimingEvents.FVSDK_APP_MOUNT)},[]),r.useEffect(()=>{J&&J();const e=document.getSelection();return e&&e.removeAllRanges(),()=>{Q&&Q()}},[Q,J]);const Ee=X||ce,we=n.mobile_web,be=null!==(t=null==f?void 0:f.file_name)&&void 0!==t?t:"",me=n.transparent_background,he=n.preview_content_only,ye=$&&Object.values($),Pe=ye&&(0,b.extractToolbarComponents)(ye),Te=$&&(0,b.extractSnackbarManagerFromPlugins)($),Ie=r.useMemo(()=>ye&&(0,b.extractActionDefinitionsFromPlugins)(ye),[null==v?void 0:v.previewKey,ye]),Fe=Ie&&(0,b.extractActionsFromPlugins)(Ie,re),Se=i&&(0,u.isEditPluginOverlayInstance)(i);if(i&&(0,u.isEditPluginFullscreenInstance)(i)){if(K){const e=i.fullscreenLayer;return r.createElement("div",{className:l.editPluginFullscreenContainer},r.createElement(e,Object.assign({},K)))}return null}return r.createElement(r.Fragment,null,r.createElement(d.Preview,{className:(0,a.default)(l.containerV2,{[l.transparentBackground]:me}),viewport:V},({width:t,height:a})=>{var s,o;const c=(0,b.calcResponsiveSize)(t),T=i&&(0,u.isEditPluginOverlayInstance)(i)&&i.editUI.Sidebar,S=(0,F.calcContentWidth)(t,!!T||!!(null==p?void 0:p.isRightRailOpen),M&&!Ee,we),L=(0,F.calcContentHeight)(a,!X&&N),C=(0,I.resolvePreviewType)(D)===j.PreviewType.Archive?{canExtract:!0,rootInfo:ie,filePreviewUiData:P}:{canExtract:!1},A=N&&(we?se:r.createElement(E.TitleBar,Object.assign({actions:Fe},le))),V={fileViewerId:O,width:S,height:L,onRenderSucceeded:_e,onRenderFailed:ve,onInteractive:ge,config:n,activePluginInstance:i,pluginProps:K,pluginQueryBus:R,extractConfig:C,fileConfig:g,toolbarPlugins:Pe,snackbarManagerPluginInstance:Te,responsiveSize:c,header:ae,folderPicker:oe,onSetPreviewLoaded:ue},Y=(()=>{switch(null==v?void 0:v.bootstrap.state){default:case"initializing":return null;case"ready":return r.createElement(d.PreviewRenderer,Object.assign({},V,{previewKey:v.previewKey}));case"errored":return r.createElement(k.PreviewBootstrapError,Object.assign({error:v.bootstrap.error},V,{previewKey:v.previewKey}))}})();let U;return M&&(U=T?r.createElement(h.EditPluginSidebar,{fileViewerId:O,pluginNavigation:W,pluginQueryBus:R,Sidebar:T}):r.createElement(w.PreviewRightRail,{fileName:be,fileViewerId:O,pluginInstances:z,pluginNavigation:W,pluginQueryBus:R,height:L})),r.createElement(x.FileViewerRenderContextProvider,{value:{width:t,height:a,rendererWidth:S,rendererHeight:L,responsiveSize:c}},r.createElement("div",{style:X?{display:"none"}:{}},A),r.createElement("div",{className:l.contentContainer},r.createElement(m.PreviewContent,{activePluginInstance:i,plugins:Pe,snackbarManagerPluginInstance:Te,archiveFiles:H,fullFilePreviewUi:G,fullRivieraData:q,fileConfig:g},r.createElement(y.ErrorBoundary,Object.assign({},e,{activePluginInstance:i,previewKey:null==v?void 0:v.previewKey,key:null==v?void 0:v.previewKey.serialized,fileViewerId:O,onRenderSucceeded:_e,fileConfig:g,onRenderFailed:ve,width:S,height:L,onInteractive:ge,onSetPreviewLoaded:ue}),Y)),r.createElement("div",{style:Ee?{display:"none"}:{}},U),r.createElement(B,{id:O,previewKey:null==v?void 0:v.previewKey,enableFullscreen:n.enable_fullscreen,isDeleteEnabled:!Se&&!pe,isFileFlippingEnabled:null!=f&&!!f.file_collection_context&&!Se&&!pe,isPreviewZoomed:Z,dispatch:_,fileIndex:(null===(s=null==f?void 0:f.file_collection_context)||void 0===s?void 0:s.file_index)||0,collectionFileCount:(null===(o=null==f?void 0:f.file_collection_context)||void 0===o?void 0:o.parent_files_count)||0})),!he&&we?r.createElement("div",{style:X?{display:"none"}:{}},ne):null)}))},t.App.displayName="App";const K=(0,n.connect)((function(e,t){const{config:i,id:r,pluginNavigation:a,pluginQueryBus:n}=t,s=(0,o.getCurrentFile)(e,r),l=null==s?void 0:s.previewKey,c=(0,o.getPreviewMetadata)(e,l),d=(0,_.getActivePluginId)(e,r);let p;if(null!=d&&t.pluginInstances){const e=t.pluginInstances[d];p=e&&((0,u.parseEditOverlayPlugin)(e)||(0,u.parseFullscreenEditPlugin)(e)||(0,u.parseRightRailPlugin)(e))}else p=null;const v=(0,f.makePluginProps)(e,r,(0,g.getPluginData)(e,{fileViewerId:r,navigation:a}),n),E=(0,o.getIsFullScreen)(e,r),w=(0,o.getIsEditingVideo)(e,r),b=!i.preview_content_only&&!i.mobile_web,m=i.show_titlebar&&!(p&&(0,u.isEditPluginOverlayInstance)(p))&&!i.preview_content_only,h=t.pluginInstances?(0,P.getEditPluginFullscreenActionDefinitions)(t.pluginInstances,r):[];return{activePluginInstance:p,fileViewerUiData:e.fileViewerUi[r],fileInfo:s,fileMetadata:(0,o.getFileMetadata)(e,l),filePreviewUiData:(0,o.getFilePreviewUi)(e,r,l),isPreviewZoomed:(0,o.isPreviewZoomed)(e,r),pluginProps:v,previewMetadata:c,shouldShowRightRail:b,shouldShowTitlebar:m,rootInfo:e.rootInfo,archiveFiles:e.archiveFiles,fullFilePreviewUi:e.filePreviewUi[r]||{},fullRivieraData:e.rivieraData||{},isFullScreen:E,enabledEditPluginFullscreenActionDefinitions:h,isEditingVideo:w}}),(function(e){return{dispatch:e}}))(t.App);t.AppWithProvider=e=>{const{store:t,intl:a,batteries:s,platformConfig:o,pluginContext:l,isLoggedIn:c}=e,d=i.__rest(e,["store","intl","batteries","platformConfig","pluginContext","isLoggedIn"]),{id:u,config:_,canCloseViewer:f,pluginNavigation:g}=e,E=r.useMemo(()=>({batteries:s,fileViewerId:u,featureConfig:_,platformConfig:o,pluginContext:l,canCloseViewer:f,pluginNavigation:g,isLoggedIn:c}),[s,u,_,o,l,f,g,c]);return r.createElement(n.Provider,{store:t},r.createElement(p.RawIntlProvider,{value:a},r.createElement(O.FileViewerContextProvider,{value:E},r.createElement(V.ToolbarActionProvider,null,r.createElement(N.KeyboardBindingProvider,{disableBindings:!_.keyboard_shortcuts||_.preview_content_only,osModifierKey:o.osModifierKey},r.createElement(v.LayerContext.Provider,{value:{zIndex:501}},r.createElement(K,Object.assign({intl:a},d))))))))},t.AppWithProvider.displayName="AppWithProvider"})),define("typescript/libraries/file-viewer/src/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TITLE_BAR_TEST_ID=void 0,t.TITLE_BAR_TEST_ID="fv-sdk-title-bar"})),define("typescript/libraries/file-viewer/src/core/data/store_utils",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observeStore=void 0,t.observeStore=function(e,t,i,r){let a=r;const n=()=>{const r=t(e.getState());r!==a&&(i(a,r),a=r)},s=e.subscribe(n);return n(),s}})),define("typescript/libraries/file-viewer/src/core/middlewares/cloud_docs",["require","exports","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.middleware=void 0,t.middleware=function(e){return()=>t=>r=>(r.type===i.Action.TriggerDynamicRoutingModalCheck&&e.triggerDynamicRoutingModalCheck(),t(r))}})),define("typescript/libraries/file-viewer/src/core/middlewares/file_actions",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/logging/constants"],(function(e,t,i,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.middleware=void 0,t.middleware=function(e){return({dispatch:t})=>s=>o=>i.__awaiter(this,void 0,void 0,(function*(){const i=s(o);if(o.type===r.Action.Rename&&e.rename){const{newFilename:i}=o.payload,r=()=>{t((0,a.logUserActionEvent)({userAction:n.UserAction.RenameSuccess,fileViewerId:o.payload.fileViewerId,actionContext:o.payload.sourceContext}))},s=()=>{t((0,a.logUserActionEvent)({userAction:n.UserAction.RenameFailed,fileViewerId:o.payload.fileViewerId,actionContext:o.payload.sourceContext}))};e.rename({newFilename:i,onRenameSuccess:r,onRenameFailed:s})}else if(o.type===r.Action.Delete&&e.delete){const i=()=>{t((0,a.logUserActionEvent)({userAction:n.UserAction.Delete,fileViewerId:o.payload.fileViewerId,actionContext:o.payload.sourceContext,extra:{key:o.payload.key}}))},s=()=>{t((0,a.logUserActionEvent)({userAction:n.UserAction.DeleteSuccess,fileViewerId:o.payload.fileViewerId,actionContext:o.payload.sourceContext}))},l=()=>{t((0,a.logUserActionEvent)({userAction:n.UserAction.DeleteFailed,fileViewerId:o.payload.fileViewerId,actionContext:o.payload.sourceContext}))},c=()=>{t((0,a.logUserActionEvent)({userAction:n.UserAction.DeleteFailedNoPermission,fileViewerId:o.payload.fileViewerId,actionContext:o.payload.sourceContext}))},d=()=>{t((0,a.logUserActionEvent)({userAction:n.UserAction.DeleteCancel,fileViewerId:o.payload.fileViewerId,actionContext:o.payload.sourceContext}))},p=e=>{t((0,r.setDeleteFileModalOpen)({isOpen:e}))};e.delete({onDelete:i,onDeleteSuccess:s,onDeleteFailed:l,onDeleteFailedNoPermission:c,onDeleteCancel:d,setDeleteFileModalOpen:p})}return i}))}})),define("typescript/libraries/file-viewer/src/core/middlewares/file_system",["require","exports","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/logging/constants"],(function(e,t,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.middleware=void 0,t.middleware=function(e){return({dispatch:t})=>n=>s=>(s.type===i.Action.DownloadFile?e.downloadFile():s.type===i.Action.CopyToDropbox&&e.copyToDropbox({role:s.payload.role,logModalConfirm:()=>{t((0,r.logUserActionEvent)({userAction:a.UserAction.SaveToDropboxApprove,fileViewerId:s.payload.fileViewerId,actionContext:a.UserActionContext.RightRail}))},logModalCancel:()=>{t((0,r.logUserActionEvent)({userAction:a.UserAction.SaveToDropboxCancel,fileViewerId:s.payload.fileViewerId,actionContext:a.UserActionContext.RightRail}))}}),n(s))}})),define("typescript/libraries/file-viewer/src/core/middlewares/full_screen",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/constants"],(function(e,t,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.middleware=void 0,t.middleware=function(e){return({dispatch:t})=>n=>s=>i.__awaiter(this,void 0,void 0,(function*(){const i=n(s);if(s.type===r.Action.EnterFullScreen){const{fileViewerId:i,previewKey:n}=s.payload,o=()=>{t((0,r.exitFullScreen)(Object.assign(Object.assign({},s.payload),{skipAction:!0})))};e.enterFullScreen(o,!!s.payload.skipAction),t((0,r.zoomToggleOriginalOrFit)({fileViewerId:i,previewKey:n,sourceContext:a.UserActionContext.Toolbar,fitOnly:!0,skipLogging:!0}))}else s.type===r.Action.ExitFullScreen&&e.exitFullScreen(!!s.payload.skipAction);return i}))}})),define("typescript/libraries/file-viewer/src/core/middlewares/preferences",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/data/types"],(function(e,t,i,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.preferencesMiddleware=void 0,t.preferencesMiddleware=function(e){return({dispatch:t})=>s=>o=>i.__awaiter(this,void 0,void 0,(function*(){var i,l,c,d,p,u,_,v;switch(o.type){case r.Action.InitializeFileViewer:{s(o);const i=!!o.payload.pluginParams.shouldFocusApproval,l={fileViewerId:o.payload.fileViewerId,sourceContext:a.UserActionContext.Initialization,previewKey:void 0};if(e.rightRail&&!i){const i=e.rightRail.getCollapsedState(),a=e.rightRail.getBladeState();a&&a!==n.TRANSCRIPT_BLADE_PLUGIN_ID&&t((0,r.setActiveRightRailPlugin)(Object.assign(Object.assign({},l),{pluginId:a,skipLogging:!0}))),t(i?(0,r.closeRightRail)(Object.assign(Object.assign({},l),{skipLogging:!0})):(0,r.openRightRail)(Object.assign(Object.assign({},l),{skipLogging:!0})))}else t((0,r.openRightRail)(Object.assign(Object.assign({},l),{skipLogging:!0})));if(e.docSidebar){const i=e.docSidebar.getCollapsedState()?r.closeDocSidebar:r.openDocSidebar;t(i(Object.assign(Object.assign({},l),{skipLogging:!0})))}else t((0,r.closeDocSidebar)(Object.assign(Object.assign({},l),{skipLogging:!0})));return void(e.video&&(t((0,r.setVolume)(Object.assign(Object.assign({},l),{volume:e.video.getVolumeState(),skipLogging:!0}))),t((0,r.setMuted)(Object.assign(Object.assign({},l),{muted:e.video.getMutedState(),skipLogging:!0})))))}case r.Action.OpenRightRail:null===(i=e.rightRail)||void 0===i||i.setCollapsedState({isCollapsed:!1});break;case r.Action.CloseRightRail:null===(l=e.rightRail)||void 0===l||l.setCollapsedState({isCollapsed:!0});break;case r.Action.SetActiveRightRailPlugin:o.payload.pluginId&&o.payload.sourceContext===a.UserActionContext.RightRail&&(null===(c=e.rightRail)||void 0===c||c.setBladeState({bladeId:o.payload.pluginId}));break;case r.Action.OpenDocSidebar:null===(d=e.docSidebar)||void 0===d||d.setCollapsedState({isCollapsed:!1});break;case r.Action.CloseDocSidebar:null===(p=e.docSidebar)||void 0===p||p.setCollapsedState({isCollapsed:!0});break;case r.Action.SetVolume:null===(u=e.video)||void 0===u||u.setVolumeState(o.payload.volume);break;case r.Action.SetMuted:null===(_=e.video)||void 0===_||_.setMuteState(o.payload.muted);break;case r.Action.SetOptInToVideoTranscript:try{yield null===(v=e.accountPageUserRelatedPreference)||void 0===v?void 0:v.setOptInToVideoTranscript(),o.payload.onSuccess()}catch(e){}}return s(o)}))}})),define("typescript/libraries/file-viewer/src/core/middlewares/print",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,t,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.middleware=void 0,t.middleware=function(e){return({getState:t})=>n=>s=>i.__awaiter(this,void 0,void 0,(function*(){const i=n(s);if(s.type===r.Action.Print){const{fileViewerId:i,previewType:r}=s.payload,n=(0,a.getPrintUrl)(t(),i);e.print(n,r)}return i}))}})),define("typescript/libraries/file-viewer/src/core/middlewares/report_exception",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportExceptionMiddleware=void 0,t.reportExceptionMiddleware=function(e){return()=>t=>a=>i.__awaiter(this,void 0,void 0,(function*(){if(a.type===r.Action.ReportException){const t=a.payload.fileType||"unknown";e.reportException(a.payload.error,t,a.payload.isCritical)}return t(a)}))}})),define("typescript/libraries/file-viewer/src/core/middlewares/url",["require","exports","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.middleware=void 0;function r(e){return null===e?[]:e.split("/").slice(1)}t.middleware=function(e){return({dispatch:t})=>a=>n=>{switch(n.type){case i.Action.UpdateArchiveFileCurrentPath:n.payload.fromUrlChanged||e.setQueryStringParameter("file_subpath",0===(s=n.payload.currentPath).length?null:`/${s.join("/")}`);break;case i.Action.SetupArchiveFileCurrentPath:const o=(function(e,t,a){return(n,s)=>{"file_subpath"===n&&a((0,i.updateArchiveFileCurrentPath)({currentPath:r(s),fileViewerId:e,previewKey:t,fromUrlChanged:!0}))}})(n.payload.fileViewerId,n.payload.previewKey,t);e.onQueryStringParameterChange("file_subpath",o);const l=e.getQueryStringParameter("file_subpath");return a((0,i.updateArchiveFileCurrentPath)({currentPath:r(l),fileViewerId:n.payload.fileViewerId,previewKey:n.payload.previewKey}));case i.Action.OpenFileURL:e.openFile(n.payload.fqPath);break;case i.Action.CloseViewer:e.setQueryStringParameter("file_subpath",null);break;case i.Action.Redirect:e.redirect(n.payload.href,n.payload.newTab);break;case i.Action.InitializeFileViewer:null!==e.getQueryStringParameter("unfurl")&&e.setQueryStringParameter("unfurl",null)}var s;return a(n)}}})),define("typescript/libraries/file-viewer/src/transcript_blade/utils",["require","exports","typescript/libraries/file-viewer/src/core/riviera/types","lodash"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldShowOptInModal=t.shouldGenerateTranscript=t.shouldEnableClosedCaptionsButton=t.getTranscriptPermission=t.shouldShowTranscriptUi=t.getIsTranscriptNonempty=t.writeTranscriptToClipboard=void 0;t.writeTranscriptToClipboard=(e,t=!1)=>{if(!e||0===e.length)return void console.error("Failed to copy transcript");const i=(0,r.flatten)(e.map(({text:e,startTime:i})=>t?[i,e]:[e])).join("\r\n");navigator.clipboard.writeText(i)};t.getIsTranscriptNonempty=e=>{var t;return"loaded"===(null==e?void 0:e.state)&&!!(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.segments)&&e.data.segments.length>0},t.shouldShowTranscriptUi=function(e,t,i){var r,a;return!!t&&(!!("loaded"===(null==e?void 0:e.state)&&(null==e?void 0:e.data)&&(null===(a=null===(r=e.data)||void 0===r?void 0:r.segments)||void 0===a?void 0:a.length)>0)||("ineligible"===t[".tag"]||"V1"===i)&&!("ineligible"===t[".tag"]&&!e))};t.getTranscriptPermission=e=>{var t;return"video"===(null===(t=null==e?void 0:e.content)||void 0===t?void 0:t[".tag"])?e.content.transcript_permission:{".tag":"ineligible"}};t.shouldEnableClosedCaptionsButton=(e,r,a)=>{var n,s;return!!e&&(!!(0,t.shouldShowOptInModal)(e,r,a)||!!r&&(("errored"!==r.state||r.error.statusCode===i.RivieraStatus.NotFound)&&("loaded"!==r.state||0!==(null===(s=null===(n=r.data)||void 0===n?void 0:n.segments)||void 0===s?void 0:s.length))))};const a=e=>!!e&&("pending"!==e.state&&"loaded"!==e.state&&("errored"!==e.state||e.error.statusCode===i.RivieraStatus.NotFound));t.shouldGenerateTranscript=(e,t)=>"opted_in"===(null==e?void 0:e[".tag"])&&a(t);t.shouldShowOptInModal=(e,t,i)=>"opted_out"===(null==e?void 0:e[".tag"])&&(!i&&(!t||a(t)))})),define("typescript/libraries/file-viewer/src/transcript_blade/components/transcript_blade_content",["require","exports","tslib","react","react-intl","dig-components/typography","typescript/libraries/file-viewer/src/transcript_blade/components/transcript_segment","typescript/libraries/file-viewer/src/transcript_blade/components/transcript_segment_list","typescript/libraries/file-viewer/src/core/resizer","typescript/libraries/file-viewer/src/transcript_blade/components/transcript_search","typescript/libraries/file-viewer/src/transcript_blade/constants","typescript/libraries/file-viewer/src/core/riviera/types","typescript/libraries/file-viewer/src/transcript_blade/transcript_blade.module.css","typescript/libraries/file-viewer/src/transcript_blade/components/transcript_progress_bar"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranscriptBladeContent=void 0,r=i.__importDefault(r),u=i.__importDefault(u);const v=r.default.memo(({error:e,logUserAction:t})=>{const i=(0,a.useIntl)();let s;switch(r.default.useEffect(()=>{t("transcript_load_failure","right_sidebar",{transcript_error:e.transcriptError,riviera_code:String(e.statusCode)})},[e,t]),e.transcriptError){case"too_long":s=i.formatMessage({id:"On86TV",defaultMessage:"Transcript is unavailable because the video is longer than eight minutes."});break;case"no_speech":s=i.formatMessage({id:"AYFmtq",defaultMessage:"Transcript is unavailable because no speech was detected."});break;case"insufficient_permissions":s=i.formatMessage({id:"XwB1fY",defaultMessage:"Ask the person who uploaded this file to transcribe it."});break;default:s=i.formatMessage({id:"x6EnGY",defaultMessage:"There was an error loading the transcript."})}return r.default.createElement("div",{className:u.default.transcriptErrorInfo,"data-testid":"transcript-blade-error"},r.default.createElement(n.Text,{variant:"label",size:"standard",color:"standard"},s))});v.displayName="TranscriptErrorInfo";t.TranscriptBladeContent=({transcript:e,permission:t,showTranscriptionDetails:i,logUserAction:a,setIsTranscriptShowing:n})=>{var f;const[g,E]=r.default.useState(),[w,b]=r.default.useState(),[m,h]=r.default.useState(),y=r.default.useRef(null),P=r.default.useCallback(({height:e})=>{h(e)},[]),T=r.default.useRef(!1),I=r.default.useCallback(e=>{T.current||(a("transcript_search_attempt","right_sidebar"),T.current=!0),E(e),b(null!=e?0:void 0)},[T,a]),F=r.default.useCallback((e,t)=>b(i=>{if(null==i||null==t)return 0;const r=i+e;return r>=t?0:r<0?t-1:r}),[]);r.default.useEffect(()=>{y.current&&h(y.current.getBoundingClientRect().height||d.DEFAULT_VIRTUAL_LIST_HEIGHT)},[]);let S=null;return S="pending"!==(null==e?void 0:e.state)&&m?"errored"===(null==e?void 0:e.state)&&e.error.statusCode!==p.RivieraStatus.NotFound?r.default.createElement(v,{error:e.error,logUserAction:a}):"loaded"===(null==e?void 0:e.state)&&(null===(f=e.data)||void 0===f?void 0:f.segments)&&e.data.segments.length>0?r.default.createElement(r.default.Fragment,null,r.default.createElement(c.TranscriptSearch,{onSearch:I,transcript:e,currentMatch:w,updateCurrentMatch:F}),r.default.createElement(o.TranscriptSegmentList,{segments:e.data.segments,showTranscriptionDetails:i,permission:t,logUserAction:a,listHeight:m-Number(u.default.transcriptSearchHeight),searchResult:g,currentMatch:w,setIsTranscriptShowing:n})):r.default.createElement(s.TranscriptSettingInfo,{logUserAction:a}):r.default.createElement(_.TranscriptProgressBar,null),r.default.createElement(l.Resizer,{elementRef:y,onResize:P},r.default.createElement("div",{className:u.default.transcriptBladeContentWrapper,ref:y},S))},t.TranscriptBladeContent.displayName="TranscriptBladeContent"})),define("typescript/libraries/file-viewer/src/transcript_blade/components/transcript_segment_list",["require","exports","tslib","react","react-intl","dig-components/buttons","classnames","typescript/libraries/file-viewer/src/transcript_blade/components/transcript_segment","typescript/libraries/file-viewer/src/keyboard/keyboard_connector","react-window","typescript/libraries/file-viewer/src/hooks/useStabilizedCallback","typescript/libraries/file-viewer/src/toolbar/toolbar_actions","typescript/libraries/file-viewer/src/transcript_blade/constants","lodash","typescript/libraries/file-viewer/src/preview_audio_video/helper/utils","typescript/libraries/file-viewer/src/keyboard/bindings","ts-key-enum","typescript/libraries/file-viewer/src/transcript_blade/transcript_blade.module.css"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f,g,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranscriptSegmentList=void 0,r=i.__importDefault(r),s=i.__importDefault(s),E=i.__importDefault(E);t.TranscriptSegmentList=({segments:e,listHeight:t,showTranscriptionDetails:i,permission:w,logUserAction:b,searchResult:m,currentMatch:h,setIsTranscriptShowing:y})=>{const{videoPlayer:P}=(0,p.useToolbarAction)(),[T,I]=r.default.useState(0),[F,S]=r.default.useState(null),[L,C]=r.default.useState(!0),A=r.default.useRef(),O=r.default.useRef(!1),x=r.default.useRef(null),D=r.default.useRef(null),R=r.default.useRef({}),M="ineligible"!==w[".tag"],N=r.default.useMemo(()=>{if(null==m)return null;const e=new Map;return m.forEach((t,i)=>{t.forEach(({hitNumber:t})=>{e.set(t,i)})}),e},[m]),k=r.default.useCallback((e,t)=>{var i;R.current=Object.assign(Object.assign({},R.current),{[e]:t}),null===(i=D.current)||void 0===i||i.resetAfterIndex(e,!0)},[]),V=r.default.useCallback(e=>R.current[e]||Number(E.default.minSegmentHeight),[]),j=r.default.useCallback(()=>{C(!1),null!=A.current&&window.clearTimeout(A.current),A.current=window.setTimeout(()=>{C(!0),A.current=void 0},u.AUTO_SCROLL_PAUSE_THRESHOLD)},[T]),Y=r.default.useCallback(()=>{var t;if(!P||m)return;const i=P.currentTime(),r=(0,_.findLastIndex)(e,({startTime:e})=>Math.floor(i)>=Math.floor(e)),a=Math.max(0,r);T!==a&&(I(a),L&&(null===(t=D.current)||void 0===t||t.scrollToItem(a,"start")))},[e,P,T,L,m]),U=r.default.useCallback(t=>{P&&T!==t&&(P.currentTime(e[t].startTime),I(t),b("transcript_click_position","right_sidebar"))},[P,e,T,b]),B=(0,d.useStabilizedCallback)(()=>{null!=P&&Y()}),K=r.default.useCallback(({scrollUpdateWasRequested:e})=>{O.current?e||j():O.current=!0},[]),z=r.default.useCallback(t=>{if(j(),t.key===g.Key.ArrowUp){if(0===F)return;S(e=>{var t;const i=(null==e?T:e)-1;return null===(t=D.current)||void 0===t||t.scrollToItem(i),i})}else if(t.key===g.Key.ArrowDown){if(null!=F&&F>=e.length-1)return;S(e=>{var t;const i=(null==e?T:e)+1;return null===(t=D.current)||void 0===t||t.scrollToItem(i),i})}},[F,e,T]),W=r.default.useCallback(({visibleStartIndex:e,visibleStopIndex:t})=>{null!=F&&(F<e||F>t)&&S(null)},[F]);r.default.useEffect(()=>{P&&P.paused()||Y()},[P,e,Y]),r.default.useEffect(()=>{var e;if(null==h||null==N)return;const t=N.get(h);null!=t&&(null===(e=D.current)||void 0===e||e.scrollToItem(t))},[h,N]),r.default.useEffect(()=>{x.current&&x.current.focus()},[]),r.default.useEffect(()=>(y(!0),b("transcript_load_success","right_sidebar",{transcript_opt_in:"opted_in"===w[".tag"]?"true":"false"}),()=>{y(!1)}),[y,b,w]),r.default.useEffect(()=>{if(P)return(0,v.setupVideoJsEvents)(P,{timeupdate:B,seeked:B})},[B,P]),r.default.useEffect(()=>()=>{null!=A.current&&window.clearTimeout(A.current)},[]);const H=r.default.useMemo(()=>e=>r.default.createElement("div",Object.assign({},e,{role:"list"})),[]),G=r.default.useMemo(()=>({activeSegmentIndex:T,showTranscriptionDetails:i,shouldShowSettingsInfo:M,segments:e,onSegmentClick:U,setSegmentHeight:k,logUserAction:b,cursor:F,searchResult:m,currentMatch:h}),[e,T,i,M,U,k,b,F,m,h]),q=r.default.useMemo(()=>[(0,f.getKeyboardBinding)({key:g.Key.ArrowUp,callback:z}),(0,f.getKeyboardBinding)({key:g.Key.ArrowDown,callback:z})],[z]),X=(0,a.useIntl)(),Z=r.default.useCallback(()=>{var e;null===(e=D.current)||void 0===e||e.scrollToItem(T,"start"),C(!0)},[T]);return r.default.createElement(r.default.Fragment,null,r.default.createElement(l.KeyboardBindingConnector,{keyboardBindings:q,name:"video_transcription",scope:!0}),r.default.createElement("div",{className:E.default.transcriptSegmentListContentWrapper,ref:x,tabIndex:-1},r.default.createElement(c.VariableSizeList,{ref:D,height:t,width:"100%",itemCount:e.length,itemSize:V,innerElementType:H,onScroll:K,itemData:G,estimatedItemSize:u.ESTIMATE_SEGMENT_ITEM_HEIGHT,onItemsRendered:W},o.TranscriptSegment),r.default.createElement(n.Button,{variant:"primary",className:(0,s.default)(E.default.resumeAutoScrollButton,{[E.default.showing]:!L}),onClick:Z},X.formatMessage({id:"5KYEh4",defaultMessage:"Resume auto-scroll"}))))},t.TranscriptSegmentList.displayName="TranscriptSegmentList"})),define("typescript/libraries/file-viewer/src/transcript_blade/components/transcript_segment",["require","exports","tslib","react","react-intl","dig-components/buttons","dig-components/tooltips","dig-components/icons","dig-components/icons/src","dig-components/typography","typescript/libraries/file-viewer/src/transcript_blade/components/transcript_search","typescript/libraries/file-viewer/src/core/utils/time_utils","classnames","typescript/libraries/file-viewer/src/transcript_blade/utils","ts-key-enum","typescript/libraries/file-viewer/src/transcript_blade/constants","react-window","typescript/libraries/file-viewer/src/transcript_blade/transcript_segment.module.css"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f,g,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranscriptSegment=t.TranscriptSettingInfo=void 0,r=i.__importDefault(r),u=i.__importDefault(u),E=i.__importDefault(E),t.TranscriptSettingInfo=r.default.memo(({logUserAction:e})=>{const t=(0,a.useIntl)(),i=r.default.useCallback(()=>{e("transcript_settings_click","right_sidebar")},[e]);return r.default.createElement("div",{className:E.default.transcriptSettingInfoWrapper},r.default.createElement(c.Text,{variant:"label",size:"small",color:"faint",className:E.default.transcriptSettingInfoText,"data-testid":"transcript-settings-text"},t.formatMessage({id:"Qu3LbO",defaultMessage:"To edit Transcript preferences, go to <a>Settings</a>"},{a:e=>r.default.createElement(c.Link,{onClick:i,href:"/account/general"},e)})))}),t.TranscriptSettingInfo.displayName="TranscriptSettingInfo",t.TranscriptSegment=r.default.memo(({index:e,style:i,data:g})=>{var w;const b=(0,a.useIntl)(),{activeSegmentIndex:m,showTranscriptionDetails:h,shouldShowSettingsInfo:y,segments:P,onSegmentClick:T,setSegmentHeight:I,logUserAction:F,cursor:S,searchResult:L,currentMatch:C}=g,A=P[e],{text:O,startTime:x}=A,D=e===m,R=null!==(w=null==L?void 0:L.get(e))&&void 0!==w?w:null,[M,N]=r.default.useState(!1),k=r.default.useRef(),V=r.default.useRef(null);r.default.useEffect(()=>{var t;S===e&&(null===(t=V.current)||void 0===t||t.focus())},[S,e]),r.default.useEffect(()=>{if(V.current){const t=null!=P&&e===P.length-1,i=V.current.getBoundingClientRect().height;let r=0;t&&(r+=y?Number(E.default.settingInfoSectionHeight):0,r+=f.RESUME_AUTO_SCROLL_BUTTON_PLACEHOLDER_HEIGHT),I(e,i+r)}},[e,P,I,y,h]),r.default.useEffect(()=>()=>{null!=k.current&&window.clearTimeout(k.current)},[]);const j=r.default.useCallback(e=>{var t;null==e||e.stopPropagation(),(0,_.writeTranscriptToClipboard)([A]),N(!0),F("transcript_copy_text_click","right_sidebar"),k.current=window.setTimeout(()=>{N(!1)},f.COPIED_BUTTON_DISPLAY_THRESHOLD),null===(t=V.current)||void 0===t||t.focus()},[A,F]),Y=r.default.useCallback(e=>{e.stopPropagation(),e.key===v.Key.Enter&&j()},[]),U=r.default.useCallback(()=>T(e),[e,T]),B=r.default.useCallback(t=>{t.key===v.Key.Enter&&T(e)},[e,T]),K=b.formatMessage({id:"asLrlY",defaultMessage:"Copy text"}),z=M?r.default.createElement(n.Button,{className:E.default.copyButton,variant:"opacity",size:"small",withIconLeft:r.default.createElement(o.UIIcon,{src:l.CheckmarkLine,role:"presentation"})},b.formatMessage({id:"yarRfu",defaultMessage:"Copied"})):r.default.createElement(s.Tooltip,{placement:"left",title:K},r.default.createElement(n.IconButton,{variant:"transparent",onClick:j,onKeyPress:Y,className:E.default.copyButton,"aria-label":K},r.default.createElement(o.UIIcon,{src:l.CopyLine,size:"small"})));return r.default.createElement("div",{key:e,style:i,role:"listitem"},r.default.createElement("div",{className:(0,u.default)(E.default.transcriptSegment,{[E.default.activeSegment]:D}),ref:V,onClick:U,onKeyPress:B,"aria-current":!!D&&"time",tabIndex:-1},h&&r.default.createElement("div",{className:E.default.transcriptSegmentHeader},r.default.createElement(c.Text,{className:E.default.transcriptSegmentTimestamp,size:"small",color:D?"inherit":"faint",role:"button"},(0,p.formatTime)(x,null)),z),r.default.createElement(d.HighlightableText,{isActive:D,highlights:R,currentMatch:C},O)),e===P.length-1&&r.default.createElement(t.TranscriptSettingInfo,{logUserAction:F}))},g.areEqual),t.TranscriptSegment.displayName="TranscriptSegment"})),define("typescript/libraries/file-viewer/src/assigned_tasks_blade/assigned_tasks_blade_plugin",["require","exports","tslib","react","react-redux","@reduxjs/toolkit","typescript/component_libraries/files_components/src/blades/assigned_tasks_blade/collapsed_assigned_tasks_blade","typescript/component_libraries/files_components/src/blades/assigned_tasks_blade/types","typescript/libraries/file-viewer/src/assigned_tasks_blade/types","dig-components/progress_indicators","typescript/component_libraries/files_components/src/blades/assigned_tasks_blade/data/types","typescript/libraries/file-viewer/src/core/data/types","typescript/libraries/file-viewer/src/core/logging/constants","typescript/component_libraries/files_components/src/blades/assigned_tasks_blade/data/slices"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AssignedTasksBladePlugin=void 0;const v=(r=i.__importStar(r)).default.lazy(()=>i.__awaiter(void 0,void 0,void 0,(function*(){const{AssignedTasksBlade:t}=yield new Promise((t,i)=>{e(["typescript/component_libraries/files_components/src/blades/assigned_tasks_blade/assigned_tasks_blade"],t,i)}).then(i.__importStar);return{default:t}})));v.displayName="LazyAssignedTasksBlade";const f=()=>r.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}},r.default.createElement(c.Spinner,{size:"standard"}));f.displayName="LoadingIndicator";const g=e=>r.default.createElement(r.default.Suspense,{fallback:r.default.createElement(f,null)},r.default.createElement(v,Object.assign({},e)));g.displayName="AsyncAssignedTasksBlade";t.AssignedTasksBladePlugin=class{constructor({platform:e,store:t,context:c,log:d,reportException:reportException,userId:v,userEmail:f}){var E;this.layerUI={},this.rightRailUI={Sidebar:e=>{const t=e.navigation,i=(0,r.useCallback)(()=>t.openRightRailPlugin(u.UserActionContext.RightRail,l.ASSIGNED_TASKS_BLADE_PLUGIN_ID),[t]),n=(0,r.useCallback)(()=>t.openRightRailPlugin(u.UserActionContext.RightRail,p.INFO_BLADE_PLUGIN_ID),[t]);return w(this.store)?r.default.createElement(a.Provider,{store:this.store},r.default.createElement(g,{id:l.ASSIGNED_TASKS_BLADE_PLUGIN_ID,intl:this.platform.intl,openAssignedTasksBladePlugin:i,openInfoBladePlugin:n,updateSharingTask:this.updateSharingTask,trackTooltipTourView:this.trackTooltipTourView,isLQA:this.isLQA,log:this.log,reportException:this.reportException})):null},Control:e=>{const t=e.navigation,i=(0,r.useCallback)(()=>t.openRightRail(u.UserActionContext.Toolbar),[t]);return w(this.store)?r.default.createElement(a.Provider,{store:this.store},r.default.createElement(s.CollapsedAssignedTasksBladeButton,{id:l.ASSIGNED_TASKS_BLADE_PLUGIN_ID,intl:this.platform.intl,openRightRail:i,log:this.log})):null}},this.getAssignedTasksState=()=>i.__awaiter(this,void 0,void 0,(function*(){var e,t;try{const i=this.platform.apiv2ClientBase,r=yield this.store.dispatch((0,_.getSharingTasks)({apiv2ClientBase:i,fileId:this.fileId,userId:this.userId})),a=(0,n.unwrapResult)(r),s=a.variant;s&&"OFF"!==s&&this.log(o.AssignedTasksBladeEvent.GetSharingTasksSuccess,{variant:s,tasks:null===(e=a.sharing_tasks)||void 0===e?void 0:e.map(({task:e})=>e?e[".tag"]:"other").join(),note_length:null===(t=a.note)||void 0===t?void 0:t.length,has_seen_tooltip_tour:a.has_seen_previews_tooltip_tour})}catch(e){this.log(o.AssignedTasksBladeEvent.GetSharingTasksError,{error:String(e),error_message:null==e?void 0:e.message,error_tag:(null==e?void 0:e.error)&&e.error[".tag"]||"undefined_error"}),this.reportException(e,"")}})),this.updateSharingTask=(e,t)=>i.__awaiter(this,void 0,void 0,(function*(){try{const i=this.platform.apiv2ClientBase,r=yield this.store.dispatch((0,_.updateSharingTask)({apiv2ClientBase:i,fileId:this.fileId,task:e,isCompleted:t,userId:this.userId}));(0,n.unwrapResult)(r)}catch(e){this.log(o.AssignedTasksBladeEvent.UpdateSharingTaskError,{error_message:null==e?void 0:e.message,error_tag:(null==e?void 0:e.error)&&e.error[".tag"]||"undefined_error"})}})),this.trackTooltipTourView=()=>{const e=this.platform.apiv2ClientBase,t={project:"sharing_activation",action:"seen_previews_tooltip_tour"},i={subjectUserId:this.userId};e.ns("growth").rpc("track_user_action",t,i).catch(e=>{this.log(o.AssignedTasksBladeEvent.TrackUserActionError,{error_message:null==e?void 0:e.message,error_tag:(null==e?void 0:e.error)&&e.error[".tag"]||"undefined_error"})})},this.lifecycle={previewDidInitialize:()=>{this.getAssignedTasksState()},previewDidError:()=>{this.getAssignedTasksState()}},this.platform=e,this.store=t,this.fileId=null===(E=c.getPluginData().file)||void 0===E?void 0:E.fileId,this.log=d,this.reportException=reportException,this.userId=v,this.isLQA=!!f&&(f.startsWith("lqa")&&f.endsWith("@dbx51.com"))}};const E=e=>{const t=e.getState()[d.ASSIGNED_TASKS_BLADE_NAMESPACE_KEY];return["V1","V2"].includes(t.variant)},w=e=>{const[t,i]=(0,r.useState)(E(e));return(0,r.useEffect)(()=>e.subscribe(()=>{i(E(e))}),[]),t}})),define("typescript/libraries/file-viewer/src/mobile_web/footer",["require","exports","tslib","react","typescript/libraries/file-viewer/src/mobile_web/mobile_web.module.css"],(function(e,t,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Footer=void 0,r=i.__importDefault(r),a=i.__importStar(a);t.Footer=({leftButton:e,middleButton:t,rightButton:i})=>r.default.createElement("div",{className:a.footerContainer},e,r.default.createElement("div",{className:a.rightButtonsContainer},r.default.createElement("div",{className:a.abTestButton},t),i)),t.Footer.displayName="Footer"})),define("typescript/libraries/file-viewer/src/mobile_web/meatball_menu",["require","exports","tslib","dig-components/icons/src","dig-components/icons","react","react-intl","typescript/libraries/file-viewer/src/mobile_web/mobile_web.module.css","classnames","dig-components/buttons","dig-components/typography","typescript/libraries/file-viewer/src/core/i18n","typescript/component_libraries/files_components/src/icons/file_icon","typescript/libraries/file-viewer/src/core/utils/functions","dig-components/truncate"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeatballMenu=void 0,n=i.__importDefault(n),o=i.__importStar(o),l=i.__importDefault(l);t.MeatballMenu=e=>{const{sharedLinkInfo:t,fileMetadata:i,isVisible:f,onDismiss:g,menuActions:E,onSignUp:w,onManageCookies:b}=e,m=(0,s.useIntl)(),h=(null==i?void 0:i.size)?(0,p.formatBytes)(i.size,m):0,y=(null==t?void 0:t.ownerName)||m.formatMessage({id:"BgdVC1",defaultMessage:"you"});return f?n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{onClick:g,className:o.meatballMenuOverlay}),n.default.createElement("div",{className:o.meatballMenuContainer},n.default.createElement("div",null,n.default.createElement(c.IconButton,{onClick:g,className:o.meatballMenuDismiss,variant:"transparent"},n.default.createElement(a.UIIcon,{src:r.CloseLine})),n.default.createElement("div",{className:o.metadata},n.default.createElement("div",{className:o.fileIconContainer},n.default.createElement(u.FileIcon,{file:(0,_.mapMetadataToFile)(i)||{uniqueKey:"",title:"",isFolder:!1}})),n.default.createElement("div",{className:o.metadataText},n.default.createElement(d.Text,{className:o.fileName,variant:"label",size:"standard",tagName:"p",isBold:!0},n.default.createElement(v.Truncate,{maxWidth:188},null==i?void 0:i.file_name)),n.default.createElement(d.Text,{color:"faint"},m.formatMessage({id:"lFMuH3",defaultMessage:"{formatted_size}, file owner: {owner}"},{formatted_size:h,owner:y})))),n.default.createElement("div",{className:o.actions},E.map(e=>n.default.createElement("div",{key:null==e?void 0:e.type.displayName,className:(0,l.default)({[o.actionRow]:!(null==e?void 0:e.props.placeholder)})},e))),w&&n.default.createElement("div",{className:o.signInButton},n.default.createElement(c.Button,{onClick:w,variant:"opacity"},n.default.createElement(a.UIIcon,{src:r.PersonCircleLine}),n.default.createElement("span",null,m.formatMessage({id:"FFqlH9",defaultMessage:"Sign up"})))),n.default.createElement("div",{className:o.footer},n.default.createElement("span",{onClick:b},m.formatMessage({id:"FqzxYC",defaultMessage:"Cookie preferences"})),n.default.createElement(a.UIIcon,{className:o.meatballSeparator,size:"small",src:r.CircleSmallFilledFill}),n.default.createElement("a",{href:"https://dropbox.com/privacy"},m.formatMessage({id:"4gi6Mt",defaultMessage:"Privacy and legal"})))))):null},t.MeatballMenu.displayName="MeatballMenu"})),define("typescript/libraries/file-viewer/src/mobile_web/mobile_title_bar",["require","exports","tslib","react","react-intl","typescript/libraries/file-viewer/src/titlebar/title_bar.module.css","classnames","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","dig-components/icons","dig-components/buttons","dig-components/icons/src","react-redux","typescript/libraries/file-viewer/src/titlebar/close_button","typescript/libraries/file-viewer/src/titlebar/title","typescript/libraries/file-viewer/src/mobile_web/meatball_menu","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/constants","typescript/libraries/file-viewer/src/logging/performance","typescript/libraries/file-viewer/src/file_viewer/context_provider","typescript/libraries/file-viewer/src/hooks/selectors","typescript/libraries/file-viewer/src/render_context"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f,g,E,w,b,m,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MobileTitleBar=void 0,r=i.__importStar(r),n=i.__importStar(n),s=i.__importDefault(s),t.MobileTitleBar=r.memo(e=>{var t;const{sharedLinkInfo:i,menuActions:y,onSignUp:P,onManageCookies:T}=e;(0,w.useMarkTimingEventOnMount)(w.PreviewsTimingEvents.FVSDK_TITLE_BAR_MOUNT);const{responsiveSize:I}=(0,h.useFileViewerRenderContext)(),F=(0,p.useDispatch)(),S=(0,a.useIntl)(),{fileViewerId:L,canCloseViewer:C,featureConfig:A}=(0,b.useFileViewerContext)(),O=A.titlebar_logo_config.base_url,x=null===(t=(0,m.useCurrentFileInfo)(L))||void 0===t?void 0:t.previewKey,D=(0,m.useCurrentFileMetadata)(x),[R,M]=r.useState(!1),N=r.useCallback(()=>{M(!0),F((0,f.logUserActionEvent)({userAction:g.UserAction.OpenMobileMenu,actionContext:g.UserActionContext.MobileWebMeatball,fileViewerId:L}))},[]),k=r.useCallback(()=>{M(!1),F((0,f.logUserActionEvent)({userAction:g.UserAction.CloseMobileMenu,actionContext:g.UserActionContext.MobileWebMeatball,fileViewerId:L}))},[]),V=I===o.ResponsiveSize.MOBILE;return r.createElement(r.Fragment,null,r.createElement("header",{className:(0,s.default)(n.titleBar,n.mobileTitleBar),"data-testid":E.TITLE_BAR_TEST_ID},r.createElement(u.CloseButton,{previewKey:x,fileViewerId:L,baseUrl:O,canCloseViewer:C}),r.createElement(_.Title,{previewKey:x,fileViewerId:L,isMobileSize:V}),r.createElement("span",{className:n.mobileMeatball},r.createElement(c.IconButton,{variant:"transparent",onClick:N,"aria-label":S.formatMessage({id:"pExfXj",defaultMessage:"Actions"})},r.createElement(l.UIIcon,{src:d.MoreHorizontalLine})))),r.createElement(v.MeatballMenu,{isVisible:R,menuActions:y,onSignUp:P,fileViewerId:L,fileMetadata:D,onDismiss:k,sharedLinkInfo:i,onManageCookies:T}))}),t.MobileTitleBar.displayName="MobileTitleBar",t.MobileTitleBar.displayName="MobileTitleBar"})),define("typescript/libraries/file-viewer/src/core/middlewares/beacon_middleware",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.beaconMiddleware=void 0,t.beaconMiddleware=function(e){return({})=>t=>a=>i.__awaiter(this,void 0,void 0,(function*(){const i=t(a);return a.type===r.Action.SubscribePresence?e.subscribe(a.payload.fileId):a.type===r.Action.UnsubscribePresence&&e.unsubscribe(a.payload),i}))}})),define("typescript/libraries/file-viewer/src/pass/lifecycle",["require","exports","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.teardownPASSPresence=t.initializePASSPresence=void 0,t.initializePASSPresence=function(e,t){e.dispatch((0,i.subscribePresence)({fileId:t}))},t.teardownPASSPresence=function(e,t){e.dispatch((0,i.unsubscribePresence)(t))}})),define("typescript/libraries/file-viewer/src/plugins/context",["require","exports","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/plugins/data","typescript/libraries/file-viewer/src/plugins/navigation","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,t,i,r,a,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makePluginContext=void 0,t.makePluginContext=function({store:e,sdkConfig:t,fileViewerId:o,reinitializeFileViewer:l,exitPluginEditMode:c,hideContentPane:d,updatePreviewMetadata:p,setPluginActivationParams:u}){const _=(0,n.makeNavigation)({store:e,fileViewerId:o,reinitializeFileViewer:l,exitPluginEditMode:c,hideContentPane:d,updatePreviewMetadata:p,setPluginActivationParams:u});return{fileViewerId:o,getFilePreviewSessionId:()=>(0,s.getFilePreviewSessionId)(e.getState(),o),getFileViewerSessionId:()=>{var t;return null===(t=e.getState().loggingSession[o])||void 0===t?void 0:t.file_viewer_session_id},logUserAction:(t,a,n)=>{e.dispatch((0,i.logPreviewEvent)({event:r.EventType.UserAction,fileViewerId:o,extra:Object.assign(Object.assign({action:t},a?{context:a}:{}),n||{})}))},sdkConfig:t,getPluginData:()=>{const t=e.getState();return(0,a.getPluginData)(t,{fileViewerId:o,navigation:_})}}}})),define("typescript/libraries/file-viewer/src/plugins/data",["require","exports","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/utils/support","typescript/libraries/file-viewer/src/plugins/selectors/file","typescript/libraries/file-viewer/src/core/types/preview_type"],(function(e,t,i,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPluginData=void 0,t.getPluginData=function(e,t){const{fileViewerId:s,navigation:o}=t,l=(0,i.getCurrentFile)(e,s),c=l?e.previewData[l.previewKey.serialized]:void 0,d=(0,i.getLoadableCurrentUser)(e),p={navigation:o,sharedLinkInfo:(0,i.getSharedLinkInfo)(e,s),account:d,previewData:c},u=(0,a.getCurrentBaseFile)(e,s);if(!u)return Object.assign({previewType:n.PreviewType.Loading,file:null},p);const _=(0,a.getCurrentCommonFile)(e,u);if("errored"===(null==l?void 0:l.bootstrap.state))return Object.assign({previewType:n.PreviewType.Error,file:_},p);if(!c)return Object.assign({previewType:n.PreviewType.Loading,file:_},p);const v=(0,r.resolvePreviewType)(c);switch(v){case n.PreviewType.Image:const t=(0,a.getCurrentImageFile)(e,u,s);if(t)return Object.assign({previewType:v,file:t},p);break;case n.PreviewType.SsrDoc:case n.PreviewType.CloudDoc:const i=(0,a.getCurrentDocFile)(e,u,s);if(i)return Object.assign({previewType:v,file:i},p);break;case n.PreviewType.Audio:case n.PreviewType.Video:const r=(0,a.getCurrentAudioVideoFile)(e,u);if(r)return Object.assign({previewType:v,file:r},p);break;case n.PreviewType.Archive:const o=(0,a.getCurrentArchiveFile)(e,u);if(o)return Object.assign({previewType:v,file:o},p);break;case n.PreviewType.Error:case n.PreviewType.Loading:return Object.assign({previewType:v,file:null},p);default:return Object.assign({previewType:v,file:_},p)}return Object.assign({previewType:n.PreviewType.Other,file:_},p)}})),define("typescript/libraries/file-viewer/src/plugins/edit_fullscreen_plugin_action",["require","exports","tslib","reselect","typescript/libraries/file-viewer/src/plugins/types","react","react-redux","typescript/libraries/file-viewer/src/core/data/actions","dig-components/menu","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","dig-components/icons","dig-components/buttons","typescript/libraries/file-viewer/src/core/logging/constants"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEditPluginFullscreenActionDefinitions=void 0,n=i.__importStar(n);const _=(e,t)=>(0,o.setActiveEditPlugin)({fileViewerId:e,pluginId:t,sourceContext:u.UserActionContext.Toolbar}),v=n.default.memo(({icon:e,label:t,pluginId:i,fileViewerId:r,callback:a})=>{const o=(0,s.useDispatch)(),d=(0,n.useCallback)(()=>{o(_(r,i)),null==a||a()},[r,i,o]);return n.default.createElement(l.Menu.ActionItem,{value:{nodeType:"dropdown",actionType:c.ActionBarActionTypes.CUSTOM_ACTION,id:i,menuItem:{handler:d}},withLeftAccessory:e,disabled:!1},t)});v.displayName="EditFullscreenOverflowItem";const f=n.default.memo(({icon:e,label:t,pluginId:i,fileViewerId:r,hideIcons:a,callback:o})=>{const l=(0,s.useDispatch)(),c=(0,n.useCallback)(()=>{l(_(r,i)),null==o||o()},[r,i,l]);return n.default.createElement(p.Button,{variant:"opacity",onClick:c,withIconLeft:a?null:e,disabled:!1,"data-campaigns-element-id":"action-bar-edit-button","data-tooltip":"action-bar-edit-button"},t)});f.displayName="EditFullscreenRenderButton";t.getEditPluginFullscreenActionDefinitions=(0,r.defaultMemoize)((e,t)=>(({editFullscreenPlugins:e,fileViewerId:t})=>Object.entries(e).map(([e,i])=>{const r=n.default.createElement(d.UIIcon,{src:i.buttonIcon});return{overflowItem:n.default.createElement(v,{icon:r,label:i.buttonText,pluginId:e,fileViewerId:t,callback:i.onActivate}),renderButton:a=>n.default.createElement(f,{hideIcons:a,icon:r,label:i.buttonText,pluginId:e,fileViewerId:t,callback:i.onActivate}),id:"FULLSCREEN_ACTION"}}))({editFullscreenPlugins:Object.entries(e).reduce((e,[t,i])=>(0,a.isEditPluginFullscreenInstance)(i)?Object.assign(Object.assign({},e),{[t]:i}):e,{}),fileViewerId:t}))})),define("typescript/libraries/file-viewer/src/plugins/navigation",["require","exports","tslib","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/plugins/selectors/file","typescript/libraries/file-viewer/src/plugins/selectors/active_plugin","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/transcript_blade/utils","typescript/libraries/file-viewer/src/core/riviera/types"],(function(e,t,i,r,a,n,s,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeNavigation=void 0;t.makeNavigation=({store:t,fileViewerId:d,reinitializeFileViewer:p,exitPluginEditMode:u,hideContentPane:_,updatePreviewMetadata:v,setPluginActivationParams:f,showAuthModal:g,canCloseViewer:E})=>({fileFlipping:{flipToNextFile(e){const i=(0,n.getCurrentPreviewKey)(t.getState(),d);null!=i&&t.dispatch((0,a.flipToNextFile)({fileViewerId:d,previewKey:i,sourceContext:e}))},flipToPreviousFile(e){const i=(0,n.getCurrentPreviewKey)(t.getState(),d);null!=i&&t.dispatch((0,a.flipToNextFile)({fileViewerId:d,previewKey:i,sourceContext:e}))}},navigateToPage(e,i){const s=(0,n.getCurrentPreviewKey)(t.getState(),d);null!=s&&(t.dispatch((0,a.updateDocCurrentPageIndex)({fileViewerId:d,previewKey:s,pageIndex:e,sourceContext:i})),t.dispatch((0,a.pageNavigation)({fileViewerId:d,previewKey:s,sourceContext:r.UserActionContext.RightRail,pageIndex:e})))},closeRightRail(e){t.dispatch((0,a.closeRightRail)({fileViewerId:d,sourceContext:e}))},openRightRail(e){t.dispatch((0,a.openRightRail)({fileViewerId:d,sourceContext:e}))},getActiveRightRailPluginId:()=>(0,s.getSelectedRightRailPluginId)(t.getState(),d),openUrl({url:e,fallbackUrl:i}){t.dispatch((0,a.openUrl)({url:e,fallbackUrl:i}))},reinitializeFileViewer(e){p(e)},exitEditMode(){u()},setActiveEditPlugin(e,i,r){r&&f(r),t.dispatch((0,a.setActiveEditPlugin)({fileViewerId:d,pluginId:e,sourceContext:i}))},hideContentPane(e){_(e)},updatePreviewMetadata(e,t){v(e,t)},startToolbarRename(){t.dispatch((0,a.setToolbarRenameActive)({isActive:!0}))},setDeleteFileModalOpen(e){t.dispatch((0,a.setDeleteFileModalOpen)({isOpen:e}))},seek(e){t.dispatch((0,a.requestVideoSeek)({time:e}))},seekRelative(e){t.dispatch((0,a.requestVideoSeekRelative)({delta:e}))},pause(){t.dispatch((0,a.requestVideoPause)())},generateTranscript(r,s){return i.__awaiter(this,void 0,void 0,(function*(){const c=(0,n.getCurrentPreviewKey)(t.getState(),d);if(!c)return!1;const p=(0,o.getPreviewMetadata)(t.getState(),c),u=(0,l.getTranscriptPermission)(p),_=(0,o.getVideoTranscriptData)(t.getState(),c);if(!(0,l.shouldGenerateTranscript)(u,_))return!1;t.dispatch((0,a.startTranscriptGenerating)({previewKey:c}));const{submitFileWorkflowAction:v}=yield new Promise((t,i)=>{e(["typescript/libraries/api_v2/redux/flows"],t,i)}).then(i.__importStar);return t.dispatch(v({arg:{template:{sequence:[{workflow_action:{".tag":"transcribe_media"}}]},file_ids:[s]}},{subjectUserId:r})),!0}))},fetchCachedTranscript(){var e;const i=(0,n.getCurrentPreviewKey)(t.getState(),d);if(!i)return;const r=(0,o.getPreviewMetadata)(t.getState(),i);"video"===(null===(e=null==r?void 0:r.content)||void 0===e?void 0:e[".tag"])&&r.content.transcript_url&&t.dispatch((0,a.fetchTranscriptData)({url:r.content.transcript_url,previewKey:i}))},setOptInToVideoTranscript(){return i.__awaiter(this,void 0,void 0,(function*(){t.dispatch((0,a.setOptInToVideoTranscript)({fileViewerId:d,onSuccess:p}))}))},setTranscriptError(e){const i=(0,n.getCurrentPreviewKey)(t.getState(),d);if(!i)return;const r=new c.TranscriptRivieraError(e);t.dispatch((0,a.setTranscriptError)({previewKey:i},r))},openVideoEditor(){t.dispatch((0,a.editVideoAction)({fileViewerId:d,sourceContext:r.UserActionContext.TitleBarMain}))},toggleVideoFrameSteppers(e){t.dispatch((0,a.toggleVideoFrameSteppers)({fileViewerId:d,enabled:e}))},overrideFloatingToolbar(e,i){t.dispatch((0,a.overrideFloatingToolbar)({fileViewerId:d,state:i,pluginId:e}))},navigateToPath(e){t.dispatch((0,a.openFileURL)({fqPath:e}))},showAuthModal:g,canCloseViewer:E,openRightRailPlugin(e,i){null!=(0,n.getCurrentPreviewKey)(t.getState(),d)&&(t.dispatch((0,a.openRightRail)({fileViewerId:d,sourceContext:e})),t.dispatch((0,a.setActiveRightRailPlugin)({fileViewerId:d,sourceContext:e,pluginId:i})))},setHasShownTranscriptSettingModal(){const e=(0,n.getCurrentPreviewKey)(t.getState(),d);e&&t.dispatch((0,a.setHasShownTranscriptSettingModal)({fileViewerId:d,previewKey:e}))},setIsTranscriptShowing(e){const i=(0,n.getCurrentPreviewKey)(t.getState(),d);i&&t.dispatch((0,a.setIsTranscriptShowing)({fileViewerId:d,previewKey:i,showing:e}))}})})),define("typescript/libraries/file-viewer/src/plugins/props",["require","exports","typescript/libraries/file-viewer/src/plugins/selectors/ui","typescript/libraries/file-viewer/src/core/types/preview_type"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makePluginControlProps=t.makePluginProps=void 0,t.makePluginProps=function(e,t,a,n){if(!a||!n)return null;switch(a.previewType){case r.PreviewType.CloudDoc:case r.PreviewType.SsrDoc:return(function(e,t,r,a){const n=(0,i.getDocUiProps)(t,e);return null!=r.file&&null!=n?Object.assign(Object.assign({},r),{file:r.file,ui:n,queries:a.getHandlers()}):null})(t,e,a,n);case r.PreviewType.Image:return(function(e,t,r){const a=(0,i.getImageUiProps)(t,e);return null!=r.file&&null!=a?Object.assign(Object.assign({},r),{file:r.file,ui:a,queries:{}}):null})(t,e,a);case r.PreviewType.Audio:case r.PreviewType.Video:return(function(e,t,r,a){const n=(0,i.getAudioVideoUiProps)(t,e);return null!=r.file&&null!=n?Object.assign(Object.assign({},r),{file:r.file,ui:n,queries:a.getHandlers()}):null})(t,e,a,n);case r.PreviewType.Archive:return(function(e,t,r){const a=(0,i.getArchiveUiProps)(t,e);return null!=r.file&&null!=a?Object.assign(Object.assign({},r),{file:r.file,ui:a,queries:{}}):null})(t,e,a);case r.PreviewType.Loading:case r.PreviewType.Error:return(function(e,t,r){const a=(0,i.getUnsupportedFileUiProps)(t,e);return null!=r.file?Object.assign(Object.assign({},r),{file:r.file,ui:a,queries:{}}):null})(t,e,a);default:return(function(e,t,r){const a=(0,i.getUnsupportedFileUiProps)(t,e);return null!=r.file&&null!=a?Object.assign(Object.assign({},r),{file:r.file,ui:a,queries:{}}):null})(t,e,a)}},t.makePluginControlProps=function(e,t,r,a){if(!r||!a)return;const n=(0,i.getControlUiProps)(e,t,r.previewType);return Object.assign(Object.assign({},r),{ui:n,queries:a.getHandlers()})}})),define("typescript/libraries/file-viewer/src/plugins/queries",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PluginQueryBus=void 0;t.PluginQueryBus=class{constructor(e){this.handlerChain=[],this.defaultHandlers=e,this.resolvedHandlers=this.resolveHandlers()}getHandlers(){return this.resolvedHandlers}handleQuery(e,t){this.handlerChain.push([e,t]),this.resolvedHandlers=this.resolveHandlers()}unhandleQuery(e,t){const i=this.handlerChain.findIndex(([i,r])=>i===e&&r===t);if(null==i)throw new Error("Attempted to unregister query handlers that are not registered");this.handlerChain.splice(i),this.resolvedHandlers=this.resolveHandlers()}resolveHandlers(){return this.handlerChain.reduce((e,[t,i])=>Object.assign(Object.assign({},e),{[t]:i}),this.defaultHandlers)}}})),define("typescript/libraries/file-viewer/src/plugins/selectors/file",["require","exports","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/data/utils"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentPreviewKey=t.getCurrentFileId=t.getCurrentCommonFile=t.getCurrentArchiveFile=t.getCurrentAudioVideoFile=t.getCurrentDocFile=t.getCurrentImageFile=t.getCurrentBaseFile=void 0;class a extends Error{constructor(e,t){super(`Expected ${e} to be of type ${t}, but it is not`)}}t.getCurrentBaseFile=(e,t)=>{const{currentFileInfo:i,fileMetadata:r}=e,a=i[t];if(null==a)return null;const{file_id:n,ns_id:s,sj_id:o,url:l}=a;if(null==n||null==s||null==o)return null;const c=r[a.previewKey.serialized];if(null==c)return null;const{file_name:d,file_path:p,file_last_modified_date:u,size:_}=c;return{fileId:n,lastModifiedDate:u,name:d,nsId:s,fqPath:p,sjId:o,url:l,size:_,previewKey:a.previewKey}};t.getCurrentImageFile=(e,t,a)=>{var n;const s=e.previewData[t.previewKey.serialized],o=null===(n=(0,i.getFileContentMetadata)(e,t.previewKey))||void 0===n?void 0:n.metadata,l="image"===(null==o?void 0:o[".tag"])?o:null,c=(0,r.filterDimensionsFilePreviewUiState)((0,i.getFilePreviewUi)(e,a,t.previewKey));return Object.assign(Object.assign({},t),{dimensions:(null==s?void 0:s.dimensions)||(null==c?void 0:c.dimensions),contentMetadata:l})};t.getCurrentDocFile=(e,t,n)=>{var s;const o=e.rivieraData[t.previewKey.serialized];if(null==o||0===Object.getOwnPropertyNames(o).length)return null;if(!("pages"in o))throw new a("rivieraData","DocPreviewMetadata");const l=null===(s=(0,i.getFileContentMetadata)(e,t.previewKey))||void 0===s?void 0:s.metadata,c="ms_office"===(null==l?void 0:l[".tag"])||"pdf"===(null==l?void 0:l[".tag"])?l:null,d=(0,i.getFilePreviewUi)(e,n,t.previewKey),p=(0,r.filterDocFilePreviewUiState)(d);return Object.assign(Object.assign({},t),{pages:o.pages.map(({dimension:[e,t],pageIndex:i})=>({pageIndex:i,dimensions:{width:e,height:t}})),contentMetadata:c,isPasswordProtected:!!(null==p?void 0:p.isPasswordProtected)})};t.getCurrentAudioVideoFile=(e,t)=>{var r;const a=null===(r=(0,i.getFileContentMetadata)(e,t.previewKey))||void 0===r?void 0:r.metadata,n="audio"===(null==a?void 0:a[".tag"])||"video"===(null==a?void 0:a[".tag"])?a:null,s=(0,i.getVideoTranscriptData)(e,t.previewKey),o=(0,i.getVideoClosedCaptionsData)(e,t.previewKey);return Object.assign(Object.assign({},t),{contentMetadata:n,transcript:s,closedCaptions:o})};t.getCurrentArchiveFile=(e,t)=>Object.assign(Object.assign({},t),{contentMetadata:null});t.getCurrentCommonFile=(e,t)=>Object.assign(Object.assign({},t),{contentMetadata:null});t.getCurrentFileId=(e,t)=>{const r=(0,i.getCurrentFile)(e,t);if(null!=r)return r.file_id};t.getCurrentPreviewKey=(e,t)=>{const r=(0,i.getCurrentFile)(e,t);if(null!=r)return r.previewKey}})),define("typescript/libraries/file-viewer/src/plugins/selectors/ui",["require","exports","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/types/preview_type"],(function(e,t,i,r,a){"use strict";function n(e,t){var i,a;const n=null===(i=(function(e,t){return(0,r.getCurrentFile)(e,t)||null})(e,t))||void 0===i?void 0:i.previewKey;return e.filePreviewUi[t]&&n?null===(a=e.filePreviewUi[t])||void 0===a?void 0:a[n.serialized]:void 0}function s(e,t){return{isRightRailVisible:!!(0,r.isRightRailOpen)(e,t)}}function o(e,t){const a=n(e,t);if(null==a)return null;const s=(0,i.filterZoomableFilePreviewUi)(a);return null==s?null:{scaleFactor:(0,r.getCurrentScaleFactorFromFilePreviewUi)(s)}}function l(e,t){var r,a;const l=s(e,t);if(null==l)return null;const c=o(e,t);if(null==c)return null;const d=n(e,t);if(null==d)return null;const p=null!==(a=null===(r=(0,i.filterDocFilePreviewUiState)(d))||void 0===r?void 0:r.currentPageIndex)&&void 0!==a?a:null;if(null==p)return null;const u=e.fileViewerUi[t],_=!!u&&u.isDocSidebarOpen;return Object.assign(Object.assign(Object.assign({},l),c),{currentPageIndex:p,isNavBarVisible:_})}function c(e,t){const i=s(e,t);if(null==i)return null;const r=o(e,t);return null==r?null:Object.assign(Object.assign({},i),r)}function d(e,t){return s(e,t)}function p(e,t){return{isRightRailVisible:!!(0,r.isRightRailOpen)(e,t)}}Object.defineProperty(t,"__esModule",{value:!0}),t.getControlUiProps=t.getUnsupportedFileUiProps=t.getArchiveUiProps=t.getAudioVideoUiProps=t.getImageUiProps=t.getDocUiProps=void 0,t.getDocUiProps=l,t.getImageUiProps=c,t.getAudioVideoUiProps=function(e,t){const r=s(e,t);if(null==r)return null;const a=n(e,t);if(null==a)return null;const o=(0,i.filterAudioVideoFilePreviewUiState)(a);if(null==o)return null;const{currentTimestamp:l,isPlaying:c,hasShownTranscriptSettingModal:d}=o;return Object.assign(Object.assign({},r),{currentTimestamp:l,isPlaying:c,hasShownTranscriptSettingModal:d})},t.getArchiveUiProps=function(e,t){return s(e,t)},t.getUnsupportedFileUiProps=d,t.getControlUiProps=function(e,t,i){switch(i){case a.PreviewType.SsrDoc:case a.PreviewType.CloudDoc:{const i=l(e,t);return null!=i?i:p(e,t)}case a.PreviewType.Image:{const i=c(e,t);return null!=i?i:p(e,t)}default:{const i=d(e,t);return null!=i?i:p(e,t)}}}})),define("typescript/libraries/file-viewer/src/preview_archive/utils",["require","exports","typescript/libraries/file-viewer/src/core/data/preview_key","typescript/libraries/api_v2/redux/previews","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,t,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getArchiveFiles=t.getFiles=t.transformArchiveEntriesToFiles=t.queryStringValueToArchiveCurrentPath=t.archiveCurrentPathToQueryStringValue=void 0,t.archiveCurrentPathToQueryStringValue=function(e){return 0===e.length?null:`/${e.join("/")}`},t.queryStringValueToArchiveCurrentPath=function(e){return null===e?[]:e.split("/").slice(1)},t.transformArchiveEntriesToFiles=function(e,t,i,r,n){return e.map(e=>({uniqueKey:e.name,title:e.name,isFolder:!!e.isDir,extension:e.name.split(".").pop(),sizeInBytes:e.size,performOpenAction:()=>{t((0,a.updateArchiveFileCurrentPath)({currentPath:[...i,e.name],fileViewerId:r,previewKey:n,isDir:!!e.isDir}))}}))},t.getFiles=function(e){return e.filter(e=>!e.isDir)},t.getArchiveFiles=function(e,t,a,n,s){if(!t.length)return;const o={file_id:a.file_id,ns_id:a.ns_id,sj_id:a.sj_id,url:a.url},l=a.file_id,c=t.map(t=>(0,i.getSubpath)([...e,t.name]));n(s?(0,r.getArchiveFilesAction)({arg:{root_file_info:o,subpaths:c}},{rootFileId:l}):(0,r.loggedOutGetArchiveFilesAction)({arg:{root_file_info:o,subpaths:c}},{rootFileId:l}))}})),define("typescript/libraries/file-viewer/src/preview_error/error_boundary",["require","exports","tslib","react","react-redux","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/types/errors","typescript/libraries/file-viewer/src/preview_error/preview_error"],(function(e,t,i,r,a,n,s,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorBoundary=void 0,r=i.__importDefault(r);class c extends r.default.PureComponent{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){var t,i;this.props.reportException({error:e,fileType:(null===(i=null===(t=this.props.previewMetadata)||void 0===t?void 0:t.content)||void 0===i?void 0:i[".tag"])||"other",isCritical:!0})}render(){return this.state.hasError?r.default.createElement(l.PreviewRenderError,Object.assign({},this.props,{error:new o.FVError(o.FVErrorCode.Unknown)})):this.props.children}}c.displayName="UnconnectedErrorBoundary";const d={reportException:n.reportException};t.ErrorBoundary=(0,a.connect)((e,t)=>({previewMetadata:(0,s.getPreviewMetadata)(e,t.previewKey)}),d)(c)})),define("typescript/libraries/file-viewer/src/core/middlewares/tab_selection_handler",["require","exports","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/core/data/preview_key","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,t,i,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tabSelectionHandler=void 0;t.tabSelectionHandler=({dispatch:e,getState:t})=>s=>o=>{if(s(o),o.type!==i.Action.SwitchWorkbookTab)return;const{previewKey:l,fileViewerId:c,tabIndex:d}=o.payload;if((0,a.isNestedArchiveFilePreviewKey)(l))return;const p=t(),u=(0,n.getPreviewMetadata)(p,l),_=(0,n.getRivieraData)(p,l);if(null==u||!(0,r.isExcelApiV2MetadataContent)(u.content))return;if(null==_||!(0,r.isExcelPreviewRivieraData)(_))return;const{workbook_data_url_tmpl:v}=u.content;if(null!=_.sheets){const t=_.sheets[d];null!=t&&"errored"!==t.state||e((0,i.fetchExcelSheetLayoutData)({previewKey:l,fileViewerId:c,sheetIndex:d,workbookDataUrlTmpl:v}))}}})),define("typescript/libraries/file-viewer/src/renderer",["require","exports","tslib","react","classnames","typescript/libraries/file-viewer/src/app.module.css","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/core/types/errors","typescript/libraries/file-viewer/src/core/utils/support","typescript/libraries/file-viewer/src/utils","typescript/libraries/file-viewer/src/hooks/selectors","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,t,i,r,a,n,s,o,l,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewRenderer=t.LoadingPlaceholder=t.PreviewError=t.Preview=void 0,r=i.__importStar(r),a=i.__importDefault(a),n=i.__importStar(n);t.Preview=e=>{var t,i;const{children:s,className:o}=e,l=e.__window||"undefined"!=typeof window?window:void 0,c=e.viewport||("undefined"!=typeof document?document.documentElement:void 0),[d,p]=r.useState({width:null!==(t=null==c?void 0:c.clientWidth)&&void 0!==t?t:0,height:null!==(i=null==c?void 0:c.clientHeight)&&void 0!==i?i:0}),u=r.useCallback(()=>{c&&p({width:c.clientWidth,height:c.clientHeight})},[]);return r.useEffect(()=>{u()},[]),r.useEffect(()=>{if(l)return l.addEventListener("resize",u),()=>l.removeEventListener("resize",u)},[u]),r.createElement("div",{className:(0,a.default)(n.container,o),style:d,id:"fvsdk-container"},null==s?void 0:s(d))},t.Preview.displayName="Preview",t.PreviewError=r.lazy(()=>i.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewRenderError:t}=yield new Promise((t,i)=>{e(["typescript/libraries/file-viewer/src/preview_error/preview_error"],t,i)}).then(i.__importStar);return{default:t}})));t.LoadingPlaceholder=()=>null,t.LoadingPlaceholder.displayName="LoadingPlaceholder";const u=r.lazy(()=>i.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewImage:t}=yield new Promise((t,i)=>{e(["typescript/libraries/file-viewer/src/preview_image/preview_image"],t,i)}).then(i.__importStar);return{default:t}}))),_=r.lazy(()=>i.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewAudioVideo:t}=yield new Promise((t,i)=>{e(["typescript/libraries/file-viewer/src/preview_audio_video/preview_video"],t,i)}).then(i.__importStar);return{default:t}}))),v=r.lazy(()=>i.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewDoc:t}=yield new Promise((t,i)=>{e(["typescript/libraries/file-viewer/src/preview_doc/renderer/preview_doc"],t,i)}).then(i.__importStar);return{default:t}}))),f=r.lazy(()=>i.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewCloudDoc:t}=yield new Promise((t,i)=>{e(["typescript/libraries/file-viewer/src/preview_cloud_doc/preview_cloud_doc"],t,i)}).then(i.__importStar);return{default:t}}))),g=r.lazy(()=>i.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewExcelViewOnlyEmbed:t}=yield new Promise((t,i)=>{e(["typescript/libraries/file-viewer/src/preview_excel/ms_embed/view_only_embed"],t,i)}).then(i.__importStar);return{default:t}}))),E=r.lazy(()=>i.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewExcel:t}=yield new Promise((t,i)=>{e(["typescript/libraries/file-viewer/src/preview_excel/renderer"],t,i)}).then(i.__importStar);return{default:t}}))),w=r.lazy(()=>i.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewHTML:t}=yield new Promise((t,i)=>{e(["typescript/libraries/file-viewer/src/preview_html/preview_html"],t,i)}).then(i.__importStar);return{default:t}}))),b=r.lazy(()=>i.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewArchive:t}=yield new Promise((t,i)=>{e(["typescript/libraries/file-viewer/src/preview_archive/preview_archive"],t,i)}).then(i.__importStar);return{default:t}}))),m=r.lazy(()=>i.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewLinkfile:t}=yield new Promise((t,i)=>{e(["typescript/libraries/file-viewer/src/preview_linkfile/preview_linkfile"],t,i)}).then(i.__importStar);return{default:t}})));t.PreviewRenderer=e=>{var{pluginProps:a}=e,n=i.__rest(e,["pluginProps"]);const h=(0,d.usePreviewKeySelector)(n.previewKey,p.getFileMetadata),y=(0,d.usePreviewKeySelector)(n.previewKey,p.getPreviewMetadata),P=(0,l.resolvePreviewType)(y),T=n.previewKey;return r.createElement(r.Suspense,{fallback:r.createElement(t.LoadingPlaceholder,null)},(()=>{var e;switch(P){case s.PreviewType.Image:return r.createElement(u,Object.assign({},n,{pluginProps:a,key:T.serialized}));case s.PreviewType.SsrDoc:case s.PreviewType.CloudDoc:return(0,c.getCloudDocExitUrl)(y)?r.createElement(f,Object.assign({},n,{pluginProps:a,key:T.serialized})):(null===(e=null==h?void 0:h.file_name)||void 0===e?void 0:e.endsWith(".gsheet"))?r.createElement(w,Object.assign({},n,{pluginProps:a,isRawHtml:!0,key:T.serialized})):r.createElement(v,Object.assign({},n,{pluginProps:a,key:T.serialized}));case s.PreviewType.Video:case s.PreviewType.Audio:return r.createElement(_,Object.assign({},n,{isAudio:P===s.PreviewType.Audio,pluginProps:a,key:T.serialized}));case s.PreviewType.Excel:if("ms_view_embed"===n.config.excel_support.embed_support)return r.createElement(g,Object.assign({},n,{pluginProps:a,key:T.serialized}));if("excel1"===n.config.excel_support.support)return r.createElement(w,Object.assign({},n,{pluginProps:a,isRawHtml:!1,key:T.serialized}));if("excel2"===n.config.excel_support.support)return r.createElement(E,Object.assign({},n,{pluginProps:a,key:T.serialized}));break;case s.PreviewType.HTML:case s.PreviewType.RawHTML:return r.createElement(w,Object.assign({},n,{pluginProps:a,isRawHtml:P===s.PreviewType.RawHTML,key:T.serialized}));case s.PreviewType.Archive:return r.createElement(b,Object.assign({},n,{pluginProps:a,key:T.serialized}));case s.PreviewType.Linkfile:return r.createElement(m,Object.assign({},n,{pluginProps:a,key:T.serialized}))}return r.createElement(t.PreviewError,Object.assign({error:new o.FVError(o.FVErrorCode.UnsupportedPreviewType)},n))})())},t.PreviewRenderer.displayName="PreviewRenderer",t.PreviewRenderer.displayName="PreviewRenderer"})),define("typescript/libraries/file-viewer/src/render_context",["require","exports","tslib","react"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileViewerRenderContextProvider=t.useFileViewerRenderContext=void 0;const a=(r=i.__importStar(r)).createContext(null);a.displayName="FileViewerRenderContext";t.useFileViewerRenderContext=()=>r.useContext(a),t.FileViewerRenderContextProvider=a.Provider})),define("typescript/libraries/file-viewer/src/right_rail/edit_plugin_sidebar",["require","exports","tslib","react","react-redux","typescript/libraries/file-viewer/src/plugins/data","typescript/libraries/file-viewer/src/plugins/props","typescript/libraries/file-viewer/src/right_rail/right_rail.module.css"],(function(e,t,i,r,a,n,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditPluginSidebar=void 0,r=i.__importDefault(r),o=i.__importStar(o);t.EditPluginSidebar=({Sidebar:e,fileViewerId:t,pluginNavigation:i,pluginQueryBus:l})=>{const c=(0,a.useSelector)(e=>(0,n.getPluginData)(e,{fileViewerId:t,navigation:i})),d=(0,a.useSelector)(e=>(0,s.makePluginProps)(e,t,c,l));return d?r.default.createElement("div",{className:o.editPluginContainer},r.default.createElement(e,Object.assign({},d))):null},t.EditPluginSidebar.displayName="EditPluginSidebar"})),define("typescript/libraries/file-viewer/src/titlebar/help_menu",["require","exports","tslib","dig-components/buttons","dig-components/icons/src","dig-components/icons","dig-components/menu","react","react-intl"],(function(e,t,i,r,a,n,s,o,l){"use strict";var c;Object.defineProperty(t,"__esModule",{value:!0}),t.HelpMenu=void 0,o=i.__importDefault(o),(function(e){e[e.HELP=0]="HELP",e[e.REPORT=1]="REPORT",e[e.PRIVACY=2]="PRIVACY",e[e.COOKIES=3]="COOKIES"})(c||(c={})),t.HelpMenu=o.default.memo(()=>{const e=(0,l.useIntl)(),t=document.getElementById("consent-iframe"),i=e.formatMessage({id:"yXlaNs",defaultMessage:"Help"});return o.default.createElement(s.Menu.Wrapper,{onSelection:e=>{var i;const r=window.location&&encodeURIComponent(window.location.href),a={[c.HELP]:"https://help.dropbox.com/",[c.REPORT]:`/report_abuse?ssu=${r}`,[c.PRIVACY]:"/privacy"};if(e===c.COOKIES)return null===(i=t.contentWindow)||void 0===i?void 0:i.postMessage({message_type:"OPEN_OPTIONS_DIALOG"},"https://consent.dropbox.com/");const n=a[e];window.open(n)}},({getTriggerProps:l,getContentProps:d})=>o.default.createElement(o.default.Fragment,null,o.default.createElement(r.IconButton,Object.assign({},l(),{variant:"transparent","aria-label":i}),o.default.createElement(n.UIIcon,{src:a.HelpLine})),o.default.createElement(s.Menu.Content,Object.assign({},d()),o.default.createElement(s.Menu.Segment,null,o.default.createElement(s.Menu.ActionItem,{value:c.HELP,key:c.HELP},e.formatMessage({id:"AIqtl8",defaultMessage:"Help center"})),o.default.createElement(s.Menu.ActionItem,{value:c.PRIVACY,key:c.PRIVACY},e.formatMessage({id:"dCY8w0",defaultMessage:"Privacy and legal"})),t&&o.default.createElement(s.Menu.ActionItem,{value:c.COOKIES,key:c.COOKIES},e.formatMessage({id:"jnuJZG",defaultMessage:"Cookie & CCPA preferences"})),o.default.createElement(s.Menu.ActionItem,{value:c.REPORT,key:c.REPORT},e.formatMessage({id:"ivV9/Z",defaultMessage:"Report an issue"}))))))}),t.HelpMenu.displayName="HelpMenu",t.HelpMenu.displayName="HelpMenu"})),define("typescript/libraries/file-viewer/src/utils",["require","exports","tslib","react-intl","react","dig-components/menu","dig-components/buttons","dig-components/icons","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","typescript/libraries/file-viewer/src/plugins/types","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","typescript/libraries/file-viewer/src/core/utils/browser_detection","typescript/libraries/file-viewer/src/core/utils/support","typescript/libraries/file-viewer/src/loading_helpers","typescript/libraries/file-viewer/src/core/utils/sizing_utils","typescript/libraries/file-viewer/src/core/types/preview_type"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCloudDocExitUrl=t.maybePreloadFile=t.maybePreloadFiles=t.calcResponsiveSize=t.getRootName=t.extractSnackbarManagerFromPlugins=t.extractToolbarComponents=t.extractActionDefinitionsFromPlugins=t.extractActionsFromPlugins=t.CategoryButton=t.GENERIC_CATEGORY_PLUGIN_ID=void 0,a=i.__importStar(a),t.GENERIC_CATEGORY_PLUGIN_ID="GENERIC_CATEGORY_PLUGIN_ID";const E=e=>({actionType:c.ActionBarActionTypes.CUSTOM_ACTION,id:e.id,text:(0,r.defineMessage)({id:"C2s323",defaultMessage:"Blank"}),icon:a.default.createElement("div",null),isEnabled:!0,renderButton:e.renderButton,overflowItem:e.overflowItem,placement:e.placement}),w=(e,t)=>{const{alwaysAtTopLevel:i,atTopLevelIfSpace:r,alwaysInOverflow:a}=t,n=(e=[],t=[])=>[...e,...t];return{alwaysAtTopLevel:n(e.alwaysAtTopLevel,null==i?void 0:i.map(E)),atTopLevelIfSpace:n(e.atTopLevelIfSpace,null==r?void 0:r.map(E)),alwaysInOverflow:((e=[],t=[])=>{var i,r;const a=[];for(let n=0;n<e.length||n<t.length;n++)a[n]=[...null!==(i=e[n])&&void 0!==i?i:[],...null!==(r=t[n])&&void 0!==r?r:[]];return a})(e.alwaysInOverflow,null==a?void 0:a.map(e=>e.map(E)))}},b=(e,t)=>Object.assign(Object.assign({},e),{[t.identifier]:t.toolbarUI}),m={workflows:(0,r.defineMessage)({id:"6BWuNX",defaultMessage:"Workflows"})},h={workflows:l.MemberTransferLine};t.CategoryButton=({category:e,children:t,hideIcons:i})=>{const l=(0,r.useIntl)(),c=m[e],d=h[e],p=(0,a.useCallback)(e=>{null==e||e.handler()},[]);return a.default.createElement(n.Menu.Wrapper,{onSelection:p},({getTriggerProps:r,getContentProps:p})=>a.default.createElement(a.default.Fragment,null,a.default.createElement(s.Button,Object.assign({},r(),{variant:"opacity",withIconLeft:i?null:a.default.createElement(o.UIIcon,{src:d}),withDropdownIcon:!0,className:e+"-menu-button","data-testid":e+"-menu-button"}),l.formatMessage(c)),a.default.createElement(n.Menu.Content,Object.assign({},p()),a.default.createElement(n.Menu.Segment,null,t))))},t.CategoryButton.displayName="CategoryButton";const y=({category:e,children:t})=>{const i=(0,r.useIntl)(),s=m[e],l=h[e];return a.default.createElement(n.Menu.Submenu,{withTriggerContent:i.formatMessage(s),withLeftAccessory:a.default.createElement(o.UIIcon,{src:l})},a.default.createElement(n.Menu.Segment,null,t))};y.displayName="CategorySubmenu";const P=(e,i,r)=>{var n,s,o,l;const d=[];if(e.workflows&&e.workflows.length>0){const i=((e,i)=>{const r=i.map(e=>e.overflowItem?a.default.createElement(a.default.Fragment,{key:e.id},e.overflowItem):null).filter(e=>null!==e);if(0===r.length)return;const n=a.default.createElement(y,{category:e},r);return E({id:t.GENERIC_CATEGORY_PLUGIN_ID,renderButton:i=>a.default.createElement(t.CategoryButton,{category:e,hideIcons:i},r),overflowItem:n})})("workflows",e.workflows);void 0!==i&&d.push(i)}const p=i.map(E),u=null!==(n=r.atTopLevelIfSpace)&&void 0!==n?n:[],_=new Set(u.map(e=>e.actionType===c.ActionBarActionTypes.CUSTOM_ACTION&&e.id?e.id:void 0).filter(Boolean)),v=null!==(l=null===(o=null!==(s=r.alwaysInOverflow)&&void 0!==s?s:[])||void 0===o?void 0:o[0])&&void 0!==l?l:[],f=v.filter(e=>e.actionType===c.ActionBarActionTypes.CUSTOM_ACTION&&_.has(e.id)),g=v.filter(e=>e.actionType!==c.ActionBarActionTypes.CUSTOM_ACTION||!_.has(e.id)),w=[...f,...p,...d,...g],b=[],m=[],h=[...r.atTopLevelIfSpace||[],...p];for(const e of h)"RightOfCategoryButtons"===e.placement?b.push(e):m.push(e);const P=[...m,...d,...b];return Object.assign(Object.assign({},r),{atTopLevelIfSpace:P,alwaysInOverflow:[w]})};t.extractActionsFromPlugins=function(e,t){const i=e.reduce(w,{}),r=e.reduce((e,t)=>((e,t)=>{var i,r;const a=e;let n;for(n in t){const s=null!==(i=e[n])&&void 0!==i?i:[],o=null!==(r=t[n])&&void 0!==r?r:[];a[n]=[...s,...o]}return a})(e,t.categories||{}),{});return P(r,t,i)},t.extractActionDefinitionsFromPlugins=function(e){return e.filter(e=>(0,d.isActionBarPlugin)(e)).map(e=>e.actionDefinitions())},t.extractToolbarComponents=function(e){return e.filter(e=>(0,d.isToolbarPlugin)(e)).reduce(b,{})},t.extractSnackbarManagerFromPlugins=function(e){return Object.values(e).find(d.isSnackbarManagerPlugin)};t.getRootName=function(e){return"work"===e.role&&e.team?e.team.name:e.is_paired?"Personal":"Dropbox"};function T(e,t){const i=(0,_.resolvePreviewType)(e),r=e.content;if(!r)return Promise.resolve();if(i===g.PreviewType.Image&&"image"===r[".tag"]){if(!r.default_src)return Promise.resolve();if(r.src_set&&e.dimensions&&t){const{sizeScale:i}=(0,f.getApproximateImageDisplaySize)(e.dimensions,t);return(0,v.preloadImage)(r.default_src,{srcset:r.src_set,sizes:`${i}vw`})}return(0,v.preloadImage)(r.default_src,{srcset:r.src_set})}return Promise.resolve()}t.calcResponsiveSize=function(e){return(0,u.is_mobile_or_tablet)()?e>1026?p.ResponsiveSize.DESKTOP:e<=736?p.ResponsiveSize.MOBILE:p.ResponsiveSize.TABLET:e>736?p.ResponsiveSize.DESKTOP:e<=428?p.ResponsiveSize.MOBILE:p.ResponsiveSize.TABLET},t.maybePreloadFiles=function(e,t,i){const r=[];if(0===e.length)return Promise.all(r);const a=[];return[1,2,3,4,5,6,-1,-2].forEach((function(i){const r=(t+i+e.length)%e.length;-1===a.indexOf(r)&&a.push(r)})),a.forEach((function(t){if(e.length>t&&t>0){const a=e[t];a&&r.push(T(a,i))}})),Promise.all(r)},t.maybePreloadFile=T;t.getCloudDocExitUrl=e=>{var t,i;const r=(0,_.resolvePreviewType)(e);if((r===g.PreviewType.SsrDoc||r===g.PreviewType.CloudDoc)&&"cloud_doc"===(null===(t=null==e?void 0:e.content)||void 0===t?void 0:t[".tag"])&&(null===(i=null==e?void 0:e.content)||void 0===i?void 0:i.exit_url))return e.content.exit_url}})),define("typescript/libraries/file-viewer/src/titlebar/title_bar",["require","exports","tslib","react","react-intl","typescript/libraries/file-viewer/src/titlebar/title_bar.module.css","classnames","typescript/component_libraries/retrieval-components/src/simple-action-bar/index","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","typescript/libraries/file-viewer/src/titlebar/help_menu","typescript/libraries/file-viewer/src/logging/performance","typescript/libraries/file-viewer/src/titlebar/close_button","typescript/libraries/file-viewer/src/titlebar/title","typescript/libraries/file-viewer/src/constants","typescript/libraries/file-viewer/src/hooks/selectors","typescript/libraries/file-viewer/src/file_viewer/context_provider","typescript/libraries/file-viewer/src/render_context","typescript/libraries/file-viewer/src/ui/animations","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f,g,E,w){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TitleBar=void 0,r=i.__importStar(r),n=i.__importStar(n),s=i.__importDefault(s);const b={handleAction:e=>{var t,i;e.type!==l.ActionBarActionTypes.OPEN&&e.type!==l.ActionBarActionTypes.CUSTOM_ACTION||null===(i=null===(t=e.menuItem)||void 0===t?void 0:t.handler)||void 0===i||i.call(t)}};t.TitleBar=r.memo(e=>{(0,d.useMarkTimingEventOnMount)(d.PreviewsTimingEvents.FVSDK_TITLE_BAR_MOUNT);const{actions:t,waffle:i,actionBar:m,rightSection:h}=e,y=(0,a.useIntl)(),{fileViewerId:P,canCloseViewer:T,featureConfig:I}=(0,f.useFileViewerContext)(),{responsiveSize:F}=(0,g.useFileViewerRenderContext)(),S=I.titlebar_logo_config.base_url,L=(0,v.useCurrentPreviewKey)(P),C=F===l.ResponsiveSize.MOBILE,A=r.useRef(null),O=(0,v.useFileViewerSelector)(P,w.getIsEditingVideo),x=r.createElement(p.CloseButton,{previewKey:L,fileViewerId:P,baseUrl:S,canCloseViewer:T});let D;D=i?T?[x,i]:[i]:[x];const R=!C&&h?[r.createElement("div",{className:n.spacer,key:"spacer"}),h]:[];return void 0===t&&void 0===m?r.createElement("header",{className:n.titleBar}):r.createElement(r.Fragment,null,r.createElement("header",{className:(0,s.default)(n.titleBar),"data-testid":_.TITLE_BAR_TEST_ID},...D,null!=C?C:r.createElement(u.Title,{previewKey:L,fileViewerId:P,isMobileSize:C}),m||t&&r.createElement(o.ActionBar,{intl:y,actionHandler:b,actions:t,responsive:!0,responsiveSize:F,className:C?n.actionBarMobile:n.actionBar,fixedWidth:C?40:void 0}),...R,r.createElement("div",{className:n.helpButton},r.createElement(c.HelpMenu,null))),r.createElement(E.OverlayAnimation,{nodeRef:A,active:O,mount:!0},r.createElement("div",{ref:A,className:(0,s.default)(n.overlay)})))}),t.TitleBar.displayName="TitleBar",t.TitleBar.displayName="TitleBar"})),define("typescript/libraries/file-viewer/src/titlebar/close_button",["require","exports","tslib","react","react-redux","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/titlebar/title_bar.module.css","dig-components/icons","dig-components/buttons","dig-components/icons/src","react-intl","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/titlebar/titlebar_logo"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CloseButton=void 0,r=i.__importStar(r),s=i.__importStar(s),t.CloseButton=r.memo(e=>{const{fileViewerId:t,previewKey:i,canCloseViewer:_,baseUrl:v}=e,f=(0,a.useDispatch)(),g=(0,d.useIntl)(),E=()=>{f((0,n.closeViewer)({fileViewerId:t,previewKey:i,sourceContext:p.UserActionContext.TitleBarMain}))};return _?r.createElement("span",{className:s.closeButton},r.createElement(l.IconButton,{onClick:E,variant:"transparent"},r.createElement(o.UIIcon,{"aria-label":g.formatMessage({id:"IDlWPW",defaultMessage:"Back"}),src:c.ChevronLeftLine}))):r.createElement(u.Logo,{previewKey:i,fileViewerId:t,dispatch:f,baseUrl:v})}),t.CloseButton.displayName="CloseButton",t.CloseButton.displayName="CloseButton"})),define("typescript/libraries/file-viewer/src/titlebar/title",["require","exports","tslib","react","react-redux","typescript/libraries/file-viewer/src/titlebar/title_bar.module.css","dig-components/truncate","typescript/libraries/file-viewer/src/preview_archive/breadcrumbs","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,t,i,r,a,n,s,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Title=void 0,r=i.__importStar(r),n=i.__importStar(n),t.Title=r.memo(e=>{const{fileViewerId:t,previewKey:i,isMobileSize:c}=e,d=(0,a.useDispatch)(),p=(0,a.useSelector)(e=>(0,l.getFileMetadata)(e,i)),u=(0,a.useSelector)(e=>(0,l.getFilePreviewUi)(e,t,i));if(!p)return null;const _=null==u?void 0:u.currentPath,v=p.file_name||"";return r.createElement("div",{className:n.title},_&&_.length>0?r.createElement(o.ArchiveFileBreadcrumbs,{archiveName:v,currentPath:_,fileViewerId:t,previewKey:i,dispatch:d,isMobile:c}):r.createElement(s.Truncate,{observeParent:!0,location:.5},v))}),t.Title.displayName="Title",t.Title.displayName="Title"})),define("typescript/libraries/file-viewer/src/file_viewer/bootstrap",["require","exports","redux","typescript/libraries/file-viewer/src/core/data/reducer","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/api_v2/redux/previews","typescript/libraries/file-viewer/src/core/middlewares/riviera_data","typescript/libraries/file-viewer/src/core/config","typescript/libraries/file-viewer/src/core/middlewares/analytics","typescript/libraries/file-viewer/src/core/middlewares/ui_action_redispatcher","typescript/libraries/api_v2/redux/files","typescript/libraries/api_v2/redux/users","typescript/libraries/file-viewer/src/core/middlewares/file_system","typescript/libraries/file-viewer/src/core/middlewares/file_actions","typescript/libraries/file-viewer/src/core/middlewares/full_screen","typescript/libraries/file-viewer/src/core/middlewares/navigation","typescript/libraries/file-viewer/src/core/middlewares/print","typescript/libraries/file-viewer/src/core/middlewares/url","typescript/libraries/file-viewer/src/core/middlewares/cloud_docs","typescript/libraries/api_v2/redux/cloud_docs","typescript/libraries/api_v2/redux/seen_state","typescript/libraries/api_v2/redux/flows","typescript/libraries/api_v2/redux/sharing","typescript/libraries/file-viewer/src/file_viewer/file_viewer","typescript/libraries/file-viewer/src/file_viewer/types","typescript/libraries/file-viewer/src/core/middlewares/beacon_middleware","typescript/libraries/file-viewer/src/core/middlewares/tab_selection_handler","typescript/libraries/file-viewer/src/core/middlewares/preferences","typescript/libraries/file-viewer/src/core/middlewares/report_exception"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f,g,E,w,b,m,h,y,P,T,I,F,S,L){"use strict";function C(e){const t="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__?(0,i.compose)((0,i.applyMiddleware)(...e),window.__REDUX_DEVTOOLS_EXTENSION__({name:"File Viewer SDK"})):(0,i.applyMiddleware)(...e);return(0,i.createStore)((0,i.combineReducers)(r.reducers),{},t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createFileViewerFactory=t.createSDKStore=void 0,t.createSDKStore=C,t.createFileViewerFactory=function(e){var t,i;const{batteries:r,callbacks:A,featureConfig:O,initData:x,platformConfig:D,pluginLoaders:R}=e,{accountId:M,deviceType:N}=x||{},{optionalIOClients:k,coreIOClients:V,logger:j,intl:Y}=r,{apiv2ClientBase:U}=V,{fileSystemClient:B,fileActionsClient:K,fullScreenClient:z,navigationClient:W,presenceBeaconIOClient:H,printClient:G,urlClient:q,preferencesClient:X,cloudDocsClient:Z,reportExceptionClient:$}=k,J=C([...W?[(0,f.middleware)(W)]:[],s.rivieraDataMiddleware,(0,n.middleware)(U.ns("previews")),(0,d.middleware)(U.ns("files")),(0,p.middleware)(U.ns("users")),c.uiActionRedispatcher,...q?[(0,E.middleware)(q)]:[],...H?[(0,I.beaconMiddleware)(H)]:[],(0,y.middleware)(U.ns("sharing")),...(null==O?void 0:O.excel_support)?[F.tabSelectionHandler]:[],...B?[(0,u.middleware)(B)]:[],...K?[(0,_.middleware)(K)]:[],...z?[(0,v.middleware)(z)]:[],...G?[(0,g.middleware)(G)]:[],(0,m.middleware)(U.ns("seen_state")),(0,h.middleware)(U.ns("flows")),...X?[(0,S.preferencesMiddleware)(X)]:[],...Z?[(0,w.middleware)(Z)]:[],..."ms_view_embed"===(null===(t=null==O?void 0:O.excel_support)||void 0===t?void 0:t.embed_support)?[(0,b.middleware)(U.ns("cloud_docs"))]:[],...$?[(0,L.reportExceptionMiddleware)($)]:[],...j?[(0,l.analyticsMiddleware)(j)]:[]]);let Q=o.DEFAULT_CONFIG;O&&(Q=Object.assign(Object.assign({},Q),O));const ee={callbacks:A,intl:Y,store:J,accountId:M,showAuthModal:r.optionalIOClients.showAuthModal,canCloseViewer:!!(null===(i=r.optionalIOClients.navigationClient)||void 0===i?void 0:i.closeViewer),deviceType:N||a.DeviceType.desktop,config:Q,platformConfig:Object.assign(Object.assign({},T.defaultPlatformConfig),D)},te=null==R?void 0:R.filter(e=>null!=e);return{createFileViewer:()=>new P.SDKFileViewer(ee,U,te,r)}}})),define("typescript/libraries/file-viewer/src/file_viewer/components",["require","exports","tslib","react","typescript/libraries/file-viewer/src/file_viewer/bootstrap","typescript/libraries/file-viewer/src/app"],(function(e,t,i,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileViewer=t.FileViewerInstance=t.FileViewerSDKContextProvider=t.FileViewerSDKContext=void 0,r=i.__importStar(r);t.FileViewerSDKContext=r.createContext(null);t.FileViewerSDKContextProvider=e=>{const{initData:i,featureConfig:n,children:s}=e,o=null==i?void 0:i.accountId,l=r.useMemo(()=>(0,a.createFileViewerFactory)(e),[n,o]);return r.createElement(t.FileViewerSDKContext.Provider,{value:l},s)},t.FileViewerSDKContextProvider.displayName="FileViewerSDKContextProvider";t.FileViewerInstance=e=>{const{initializeOpts:a,className:s,id:o,viewport:l,header:c,mobileFooter:d,mobileHeader:p,titlebar:u,folderPicker:_}=e,v=r.useContext(t.FileViewerSDKContext);if(!v)throw new Error("File Viewer SDK Context must be provided");const f=r.useMemo(()=>v.createFileViewer(),[v]);r.useEffect(()=>()=>{f.cleanup()},[f]);const[g,E]=r.useState(),w=r.useRef(null),b=r.useMemo(()=>f.getStaticProps(a),[a]);r.useEffect(()=>{i.__awaiter(void 0,void 0,void 0,(function*(){yield f.initialize(a),E(f.getAppProps())}))},[a]);const m={header:c,mobileFooter:d,mobileHeader:p,titlebar:u,folderPicker:_};return r.createElement("div",{className:s||"fvsdk-mount-point",id:o||"fvsdk-mount-point",ref:w},r.createElement(n.AppWithProvider,Object.assign({},b,g,m,{viewport:l})))},t.FileViewerInstance.displayName="FileViewerInstance",t.FileViewerInstance.displayName="FileViewerInstance";t.FileViewer=e=>{const{initializeOpts:a,className:n,id:s,viewport:o,header:l,mobileFooter:c,mobileHeader:d,titlebar:p,folderPicker:u}=e,_=i.__rest(e,["initializeOpts","className","id","viewport","header","mobileFooter","mobileHeader","titlebar","folderPicker"]),v={initializeOpts:a,className:n,id:s,viewport:o,header:l,mobileFooter:c,mobileHeader:d,titlebar:p,folderPicker:u};return r.createElement(t.FileViewerSDKContextProvider,Object.assign({},_),r.createElement(t.FileViewerInstance,Object.assign({},v)))},t.FileViewer.displayName="FileViewer",t.FileViewer.displayName="FileViewer"})),define("typescript/libraries/file-viewer/src/core/middlewares/analytics",["require","exports","tslib","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/logging/session","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/utils/extension_constants","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/utils/paths","lodash","typescript/libraries/file-viewer/src/core/utils/errors","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/core/types/errors"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_){"use strict";function v(e){return Object.keys(e).reduce((t,i)=>{const r=e[i];return"string"==typeof r||"number"==typeof r?t[i]=String(r):"boolean"==typeof r?t[i]=String(+r):"object"==typeof r&&r&&(t[i]=JSON.stringify(r)),t},{})}function f(e){return Object.assign(Object.assign({},e),{file_extension:(0,o.getWhitelistedFileExtension)(e.file_extension||""),extra:v(e.extra)})}Object.defineProperty(t,"__esModule",{value:!0}),t.analyticsMiddleware=t.MAPPED_USER_ACTIONS=t.serializeSession=void 0,d=i.__importDefault(d),t.serializeSession=f;const g={[s.Action.ZoomIn]:a.UserAction.ZoomIn,[s.Action.ZoomOut]:a.UserAction.ZoomOut,[s.Action.CloseDocSidebar]:a.UserAction.CloseDocSidebar,[s.Action.OpenDocSidebar]:a.UserAction.OpenDocSidebar,[s.Action.ZoomToggleOriginalOrFit]:a.UserAction.ZoomToggleOriginalOrFit,[s.Action.UpdateDocCurrentPageIndex]:a.UserAction.PageJump,[s.Action.PageDown]:a.UserAction.PageDown,[s.Action.PageUp]:a.UserAction.PageUp,[s.Action.Share]:a.UserAction.Share,[s.Action.Restore]:a.UserAction.Restore,[s.Action.OpenWith]:a.UserAction.OpenWith,[s.Action.OpenWebPreview]:a.UserAction.OpenWebPreview,[s.Action.FlipToNextFile]:a.UserAction.FlipNext,[s.Action.FlipToPreviousFile]:a.UserAction.FlipPrevious,[s.Action.CloseViewer]:a.UserAction.CloseViewer,[s.Action.OpenFullscreenPreview]:a.UserAction.OpenFullscreenPreview,[s.Action.OpenVersionHistory]:a.UserAction.OpenVersionHistory,[s.Action.OpenRightRail]:a.UserAction.ToggleSidebarOn,[s.Action.CloseRightRail]:a.UserAction.ToggleSidebarOff,[s.Action.SwitchWorkbookTab]:a.UserAction.SwitchWorkbookTab,[s.Action.CopyToDropbox]:a.UserAction.SaveToDropbox,[s.Action.DownloadFile]:a.UserAction.Download,[s.Action.Print]:a.UserAction.Print,[s.Action.EnterFullScreen]:a.UserAction.ToggleFullscreenOn,[s.Action.ExitFullScreen]:a.UserAction.ToggleFullscreenOff,[s.Action.ClickDropboxLogo]:a.UserAction.ClickDropboxLogo,[s.Action.SetActiveRightRailPlugin]:a.UserAction.SidebarPaneSelected};let E;t.MAPPED_USER_ACTIONS=(0,d.default)(g);t.analyticsMiddleware=function(e){return({getState:i,dispatch:d})=>w=>b=>{var m;switch(b.type){case r.Action.LogSessionEvent:try{return w(((e,t,i)=>{const{payload:{event:a,fileViewerId:s,previewSessionId:o,extra:l}}=i;let c=t.loggingSession[s];if(!c)return i;return o===c.file_preview_session_id&&(c=(0,n.recordEvent)(c,a,l),e.log(a,f(c)),c=(0,n.updateSessionLastEvent)(c,a)),(0,r.updateSession)(c)})(e,i(),b))}catch(e){return e instanceof Error&&(d((0,s.reportException)({error:e,fileType:(null===(m=i().loggingSession[b.payload.fileViewerId])||void 0===m?void 0:m.extra.preview_type)||"other",isCritical:!(0,p.isFVError)(e)||e.type!==_.FVErrorCode.InvalidLoggingOrder})),console.warn(e.message)),w(b)}case r.Action.Log:return w(((e,t,i)=>{const{payload:a}=i,{event:n,fileViewerId:s}=a,o=t.loggingSession[s];return o?(e.log(n,f(Object.assign(Object.assign({},o),{extra:Object.assign(Object.assign({},(null==o?void 0:o.extra.source_context)&&{source_context:o.extra.source_context}),a.extra)}))),(0,r.updateSession)(o)):i})(e,i(),b));case r.Action.LogVideo:return void 0!==e.logVideo?w(((e,t,i)=>{const{payload:a}=i,{eventName:n,fileViewerId:s,previewSessionId:o}=a,l=t.loggingSession[s];if(!l)return i;const c=l.file_preview_session_id;return void 0!==e.logVideo&&o===c&&e.logVideo(n,((e,t,i)=>{const{previewSessionId:r,videoFormat:a,videoDuration:n,videoTruncated:s,extra:o}=e;return{file_preview_session_id:r,video_format:a,video_duration_seconds:n,video_truncated:s,ns_id:t,sj_id:i,extra:o}})(a,l.ns_id,l.sj_id)),(0,r.updateSession)(l)})(e,i(),b)):w(b);case r.Action.LogUserAction:return w(((e,i,r)=>{const{payload:n}=r,{userAction:s,actionContext:o,fileViewerId:l}=n,c=i.loggingSession[l];return s in t.MAPPED_USER_ACTIONS?console.warn(`WARNING: ${s} is automatically logged when it's in USER_ACTION_MAP. No need to call logUserAction for it.`):c&&e.log(a.EventType.UserAction,f(Object.assign(Object.assign({},c),{extra:Object.assign(Object.assign(Object.assign({},(null==c?void 0:c.extra.source_context)&&{source_context:c.extra.source_context}),n.extra),{action:s,context:o})}))),r})(e,i(),b));case r.Action.LogBackgroundEvent:return w(((e,t,i)=>{const{payload:r}=i,{event:n,fileViewerId:s}=r,o=t.loggingSession[s];return o&&e.log(a.EventType.Background,f(Object.assign(Object.assign({},o),{extra:Object.assign(Object.assign(Object.assign({},(null==o?void 0:o.extra.source_context)&&{source_context:o.extra.source_context}),r.extra),{event:n})}))),i})(e,i(),b));case r.Action.LogTTI:return w(((e,t,i)=>{let a=t.loggingSession[i.payload];return a?(a=(0,n.markTTI)(a),e.logTTI(),(0,r.updateSession)(a)):i})(e,i(),b));case s.Action.ExcelSheetRenderFailed:case s.Action.ExcelSheetRenderSucceeded:case s.Action.FetchExcelSheetLayoutData:case s.Action.FetchExcelSheetLayoutDataResult:return w(((e,t,i)=>{const{fileViewerId:r,sheetIndex:n}=i.payload,o=t.loggingSession[r];if(!o)return i;const l=f(Object.assign(Object.assign({},o),{extra:v({tab_index:n,ts:Date.now()})}));switch(i.type){case s.Action.FetchExcelSheetLayoutData:e.log(a.EventType.ExcelSheetDownloadAttempted,l);break;case s.Action.FetchExcelSheetLayoutDataResult:null!=i.error?e.log(a.EventType.ExcelSheetDownloadFailed,l):e.log(a.EventType.ExcelSheetDownloadSucceeded,l);break;case s.Action.ExcelSheetRenderFailed:e.log(a.EventType.ExcelSheetRenderFailed,l);break;case s.Action.ExcelSheetRenderSucceeded:e.log(a.EventType.ExcelSheetRenderSucceeded,l)}return i})(e,i(),b));case s.Action.UpdateArchiveFileCurrentPath:return w(((e,t,i)=>{const{fileViewerId:r,currentPath:n,isDir:s}=i.payload,l=t.loggingSession[r];if(void 0!==s&&l){const t=f(Object.assign(Object.assign({},l),{extra:v({action:a.UserAction.ArchiveNavigation,context:a.UserActionContext.PreviewContentMain,isDir:String(s),extension:s?"":(0,o.getWhitelistedFileExtension)((0,c.getFileExtension)(n[n.length-1]))})}));e.log(a.EventType.UserAction,t)}return i})(e,i(),b));case r.Action.LogDuration:return w(((e,t,i)=>{var r;const{eventName:a,duration:n,fileViewerId:s,tags:o,shouldLogToHive:l}=i.payload,c=t.loggingSession[s];return c&&(null===(r=e.logDuration)||void 0===r||r.call(e,{eventName:a,durationInMs:n,session:c?f(c):void 0,tags:o,shouldLogToHive:l})),i})(e,i(),b));case s.Action.SetupGetPlayDurationSeconds:return void(E=b.payload.getPlayDurationSeconds)}return b.type in g&&!b.payload.skipLogging?w(((e,t,i)=>{const{fileViewerId:r,sourceContext:n}=i.payload,{loggingSession:o}=t,c=o[r],d=(0,l.isRightRailOpen)(t,r);let p={context:n,action:g[i.type],right_sidebar_state:d?"opened":"collapsed"};if(i.type===s.Action.SwitchWorkbookTab)p.tab_index=i.payload.tabIndex;else if(i.type===s.Action.SetActiveRightRailPlugin)p.selected_pane=i.payload.pluginId;else if(i.type===s.Action.CloseViewer){const e=(0,l.getCurrentFilePreviewUI)(t,r);if(e&&(0,u.filterAudioVideoFilePreviewUiState)(e)&&E){const e=E();p=Object.assign(Object.assign({},p),e)}const i=(0,l.getCurrentRivieraData)(t,r);(0,u.isAudioVideoPreviewRivieraData)(i)&&"loaded"===i.transcriptLocale.state&&(p.transcript_locale=i.transcriptLocale.data)}return e.log(a.EventType.UserAction,f(Object.assign(Object.assign({},c),{extra:v(p)}))),i})(e,i(),b)):w(b)}}})),define("typescript/libraries/file-viewer/src/core/middlewares/riviera_data",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/riviera/api","typescript/libraries/file-viewer/src/core/utils/invariant","typescript/libraries/file-viewer/src/core/types/errors","typescript/libraries/file-viewer/src/core/utils/functions","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/data/preview_key","typescript/libraries/file-viewer/src/core/riviera/transcript"],(function(e,t,i,r,a,n,s,o,l,c,d,p){"use strict";function u(e){const{previewKey:t,fileViewerId:i}=e.payload;return{previewKey:t,fileViewerId:i}}Object.defineProperty(t,"__esModule",{value:!0}),t.rivieraDataMiddleware=void 0;t.rivieraDataMiddleware=({getState:e,dispatch:t})=>_=>v=>i.__awaiter(void 0,void 0,void 0,(function*(){var i,f,g,E,w,b,m;const h=e();switch(v.type){case r.Action.FetchRivieraData:{const{fileViewerId:e,previewKey:i,config:a}=v.payload,l=(0,c.getRivieraData)(h,i);if(l&&Object.keys(l).length)return;const d=(0,c.getPreviewMetadata)(h,i);if(!d||!d.content)throw new s.FVError(s.FVErrorCode.MalformedPreviewsDataApiResponse,"Missing `content` from preview data api payload");const p=[];switch(d.content[".tag"]){case"ssr_doc":case"cloud_doc":const{text_url_tmpl:l,image_url_tmpl:c}=d.content,u="cloud_doc"===d.content[".tag"]?d.content.exit_url:void 0;if((0,n.invariant)(!("cloud_doc"!==d.content[".tag"]&&!l&&!c),s.FVErrorCode.MissingContentMetadata,"Content metadata is not present"),!u&&null!=l&&null!=c){const[n,s]=(0,o.calculatePageRange)(0,a.partial_prewarm_allowed),c=t((0,r.fetchPageDataWithMetadata)({fileViewerId:e,previewKey:i,textUrlTmpl:l,startPage:n,endPage:s}));p.push(c)}break;case"video":{const{metadata_url:e}=d.content;e&&t((0,r.fetchMediaMetadata)({metadataUrl:e,previewKey:i}));const{transcript_url:a}=d.content;a&&t((0,r.fetchTranscriptData)({url:a,previewKey:i}));break}case"audio":{const e=d.content.waveform_url;e&&t((0,r.fetchWaveformData)({url:e,previewKey:i}));break}case"linkfile":{const e=d.content.url,a=d.content.authenticated;e&&t((0,r.fetchLinkfileData)({url:e,authenticated:!!a,previewKey:i}));break}case"excel":{if("excel2"!==a.excel_support.support)break;const{content:{workbook_data_url_tmpl:o}}=d;(0,n.invariant)(!!o,s.FVErrorCode.MissingContentMetadata,"Content metadata is not present"),null!=o&&p.push(t((0,r.fetchExcelSheetLayoutData)({fileViewerId:e,previewKey:i,sheetIndex:0,workbookDataUrlTmpl:o})));break}case"archive":(0,n.invariant)(!!d.preview_url,s.FVErrorCode.MissingContentMetadata,"Content metadata is not present"),d.preview_url&&(t((0,r.fetchArchiveTopLevelData)({fileViewerId:e,previewKey:i,contentUrl:d.preview_url})),p.push(t((0,r.setupArchiveFileCurrentPath)({fileViewerId:e,previewKey:i}))))}return yield Promise.all(p)}case r.Action.FetchPageDataWithMetadata:{const{textUrlTmpl:e,startPage:t,endPage:i}=v.payload,{previewKey:n,fileViewerId:s}=u(v),o=(0,c.getPreviewMetadata)(h,n),l=(0,c.getRivieraData)(h,n),d=yield a.rivieraClient.fetchPageDataWithMetadata(e,t,i,o,l);return _((0,r.fetchPageDataWithMetadataResult)({fileViewerId:s,previewKey:n,data:d.data},d.error))}case r.Action.FetchMediaMetadata:{const e=v.payload.previewKey;if((0,d.isNestedArchiveFilePreviewKey)(e))return _(v);const t=yield a.rivieraClient.fetchMediaMetadata(v.payload.metadataUrl);return _((0,r.fetchMediaMetadataResult)({data:{is_truncated:null===(i=t.data)||void 0===i?void 0:i.is_truncated},previewKey:e},t.error))}case r.Action.FetchWaveformData:{const e=v.payload.previewKey;if((0,d.isNestedArchiveFilePreviewKey)(e))return _(v);const t=yield a.rivieraClient.fetchWaveformData(v.payload.url);return _((0,r.fetchWaveformDataResult)({data:{waveformHeights:null===(f=t.data)||void 0===f?void 0:f.waveformHeights},previewKey:e},t.error))}case r.Action.FetchTranscriptData:{const e=v.payload.previewKey;if((0,d.isNestedArchiveFilePreviewKey)(e))return _(v);const t=yield a.rivieraClient.fetchTranscriptData(v.payload.url);(0,n.invariant)(!!h.previewData[e.serialized],s.FVErrorCode.InvalidFileInfo,`Preview Data for ${e.serialized} should have been available`);const i=t.data?(0,p.chunkTranscript)(t.data,p.CHUNK_TRANSCRIPT_OPTIONS_VERBOSE):{transcript:void 0,segments:[]},o=t.data?(0,p.chunkTranscript)(t.data,p.CHUNK_TRANSCRIPT_OPTIONS_CHOPPY):{transcript:void 0,segments:[]};return _((0,r.fetchTranscriptDataResult)({chunkedTranscript:i,chunkedClosedCaptioning:o,previewKey:e,transcriptLocale:null!==(E=null===(g=t.data)||void 0===g?void 0:g.transcriptLocale)&&void 0!==E?E:""},t.error))}case r.Action.FetchLinkfileData:{const e=v.payload.previewKey,t=yield a.rivieraClient.fetchLinkfileData(v.payload.url,v.payload.authenticated);return _((0,r.fetchLinkfileDataResult)({data:{uri:null===(w=t.data)||void 0===w?void 0:w.uri},previewKey:e},t.error))}case r.Action.RefreshBlob:{const{previewKey:e,fileViewerId:i}=u(v),d=(0,c.getPreviewMetadata)(h,e);try{const p=yield a.rivieraClient.refreshDocBlob(v.payload.refreshUrl,v.payload.password);if(_((0,r.refreshBlobSuccessAction)({previewKey:e,preview:p})),(0,n.invariant)(!!d,s.FVErrorCode.InvalidFileInfo,`Preview Data for ${e.serialized} should have been available`),v.payload.password)return t((0,r.fetchPageDataWithMetadata)({fileViewerId:i,previewKey:e,textUrlTmpl:p.text_url_tmpl}));const u=(0,c.getFilePreviewUi)(h,v.payload.fileViewerId,e),f=null!==(m=null===(b=(0,l.filterDocFilePreviewUiState)(u))||void 0===b?void 0:b.currentPageIndex)&&void 0!==m?m:0,g=(0,o.calculatePageRange)(f);return t((0,r.fetchPageDataWithMetadata)({fileViewerId:i,previewKey:e,textUrlTmpl:p.text_url_tmpl,startPage:g[0],endPage:g[1]}))}catch(t){return _((0,r.fetchPageDataWithMetadataResult)({fileViewerId:i,previewKey:e,data:void 0},t))}}case r.Action.FetchExcelSheetLayoutData:{const{previewKey:e,fileViewerId:i}=u(v);_(v);const{sheetIndex:n,workbookDataUrlTmpl:s}=v.payload,o=yield a.rivieraClient.fetchExcelWorkbookLayoutData(s,n);return t((0,r.fetchExcelSheetLayoutDataResult)({fileViewerId:i,previewKey:e,sheetIndex:n,data:o.data},o.error))}case r.Action.FetchArchiveTopLevelData:{const{previewKey:e,fileViewerId:i}=u(v);_(v);const{contentUrl:o}=v.payload,l=yield a.rivieraClient.fetchArchiveTopLevelData(o);return(0,n.invariant)(!!l,s.FVErrorCode.MalformedRivieraData,"Response from riviera archive has no data"),t((0,r.fetchArchiveTopLevelDataResult)({fileViewerId:i,previewKey:e,data:l.data},l.error))}}return _(v)}))})),define("typescript/libraries/file-viewer/src/core/riviera/transcript",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chunkTranscript=t.CHUNK_TRANSCRIPT_OPTIONS_CHOPPY=t.CHUNK_TRANSCRIPT_OPTIONS_VERBOSE=void 0,t.CHUNK_TRANSCRIPT_OPTIONS_VERBOSE={maxDuration:10,maxCharacters:500,minCharacters:0},t.CHUNK_TRANSCRIPT_OPTIONS_CHOPPY={silenceLength:.25,maxCharacters:50,minCharacters:0};const i=[".",",","?","!",";",":"],r=[".",",","?","!",";",":"];t.chunkTranscript=function(e,t){let a=0,n=0,s="",o=[],l=0;const c=(function(e){const t=[],i={transcript:e.transcript,segments:t};if(!(null==e?void 0:e.segments))return i;const r=e.segments[0];t.push({startTime:r.startTime||0,endTime:r.endTime||0,text:r.text});for(let i=1;i<e.segments.length;i++){const r=e.segments[i],a=e.segments[i-1];r.startTime=Math.max(r.startTime||0,a.endTime||0),r.endTime=Math.max(r.endTime||0,r.startTime),t.push({startTime:r.startTime,endTime:r.endTime,text:r.text})}return i})(e),d={transcript:c.transcript,segments:[]},p=()=>{o.length>0&&(s=o.reduce((e,t)=>e.length<=0||r.includes(t.text)?`${e}${t.text}`:`${e} ${t.text}`,""),s.length>0&&d.segments.push({startTime:a,endTime:n,text:s}),o=[],l=0)};return c.segments.forEach((e,r,s)=>{const c=()=>{p(),a=e.startTime,n=e.endTime,l=e.text.length+1,o.push(e)};if(0===o.length)return void c();const d=o[o.length-1],u=i.includes(d.text[d.text.length-1]),_=!t.maxDuration||n-a>=t.maxDuration;(t.silenceLength&&e.startTime-n>=t.silenceLength||l+e.text.length>=t.maxCharacters||_&&u&&l>=t.minCharacters)&&!i.includes(s[r].text)?c():(o.push(e),n=e.endTime,l+=e.text.length+1)}),o.length>0&&p(),d}})),define("typescript/libraries/file-viewer/src/core/middlewares/ui_action_redispatcher",["require","exports","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,t,i,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uiActionRedispatcher=void 0;t.uiActionRedispatcher=({getState:e})=>t=>s=>{var o;const l=e(),{filePreviewUi:c,rivieraData:d}=l,{previewKey:p,fileViewerId:u}=s.payload;if(!p)return t(s);const _=(0,n.getPreviewMetadata)(l,p),v=d[p.serialized];if(!c[u]||!_||!_.content)return t(s);if(!(null===(o=c[u])||void 0===o?void 0:o[p.serialized]))return t(s);switch(s.type){case i.Action.ZoomIn:return t((0,i.zoomIn)(Object.assign(Object.assign({},s.payload),{previewType:"ssr_doc"===_.content[".tag"]?r.PreviewType.SsrDoc:r.PreviewType.Image})));case i.Action.ZoomOut:return t((0,i.zoomOut)(Object.assign(Object.assign({},s.payload),{previewType:"ssr_doc"===_.content[".tag"]?r.PreviewType.SsrDoc:r.PreviewType.Image})));case i.Action.UpdateDocCurrentPageIndex:{const e=(0,a.filterDocPreviewRivieraData)(v);if((_.content[".tag"]===r.PreviewType.SsrDoc||_.content[".tag"]===r.PreviewType.CloudDoc)&&(null==e?void 0:e.metadata))return t((0,i.updateDocCurrentPageIndex)(Object.assign(Object.assign({},s.payload),{pageCount:e.metadata.page_count})));break}case i.Action.PageDown:{const e=(0,a.filterDocPreviewRivieraData)(v);if((_.content[".tag"]===r.PreviewType.SsrDoc||_.content[".tag"]===r.PreviewType.CloudDoc)&&(null==e?void 0:e.metadata))return t((0,i.pageDown)(Object.assign(Object.assign({},s.payload),{pageCount:e.metadata.page_count})));break}}return t(s)}})),define("typescript/libraries/file-viewer/src/core/data/reducer",["require","exports","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/api_v2/redux/users","typescript/libraries/api_v2/redux/files","typescript/libraries/api_v2/redux/previews","typescript/libraries/api_v2/redux/flows","typescript/libraries/file-viewer/src/core/data/types","typescript/libraries/file-viewer/src/core/riviera/types","typescript/libraries/api_v2/redux/cloud_docs","typescript/libraries/file-viewer/src/core/logging/session","typescript/libraries/file-viewer/src/core/utils/uuid","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/core/types/constants","typescript/libraries/file-viewer/src/core/utils/extension_constants","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/core/riviera/transform","lodash","typescript/libraries/file-viewer/src/core/data/preview_key","typescript/libraries/file-viewer/src/core/utils/errors","typescript/libraries/file-viewer/src/core/types/errors","typescript/libraries/file-viewer/src/core/utils/loadable","typescript/libraries/file-viewer/src/core/data/reducer_constants"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f,g,E,w,b,m,h,y,P){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducers=t.usersReducer=t.currentFileInfoReducer=t.loggingSessionReducer=void 0;function T(e,t){if(1===t||!e)return 1;let i=Math.round(e*t/v.ZOOM_PERCENT_DELTA)*v.ZOOM_PERCENT_DELTA;return Math.abs(i-e)<v.ZOOM_PERCENT_DELTA&&(i+=t>1?v.ZOOM_PERCENT_DELTA:-v.ZOOM_PERCENT_DELTA),Math.min(Math.max(i,v.MIN_IMG_SCALE_FACTOR),v.MAX_IMG_SCALE_FACTOR)}function I(e,t){return Math.max(Math.min(e*t,v.MAX_DOC_SCALE_FACTOR),v.MIN_DOC_SCALE_FACTOR)}const F=(e,t)=>{switch(e){case _.PreviewType.Image:return P.DEFAULT_IMAGE_PREVIEW_UI;case _.PreviewType.SsrDoc:return P.DEFAULT_DOC_PREVIEW_UI;case _.PreviewType.Excel:return P.DEFAULT_EXCEL_PREVIEW_UI;case _.PreviewType.Archive:return P.DEFAULT_ARCHIVE_PREVIEW_UI;case _.PreviewType.Audio:case _.PreviewType.Video:return P.DEFAULT_AUDIO_VIDEO_PREVIEW_UI;case _.PreviewType.CloudDoc:return t&&P.CLOUD_DOC_PREVIEWABLE_AS_PDF_EXTS.includes(t)?P.DEFAULT_DOC_PREVIEW_UI:P.DEFAULT_FILE_PREVIEW_UI;default:return P.DEFAULT_FILE_PREVIEW_UI}};t.loggingSessionReducer=(e=P.DEFAULT_STATE.loggingSession,t)=>{if(t.type===i.Action.InitializeFilePreviewSession){const{fileViewerId:i,sourceSession:r}=t.payload;return Object.assign(Object.assign({},e),{[i]:(0,d.createFilePreviewSession)({file_viewer_session_id:t.payload.fileViewerId,file_preview_session_id:(0,p.v4)(),file_id:t.payload.fileId,sj_id:t.payload.sjId,ns_id:t.payload.nsId,device_type:t.payload.deviceType,file_extension:(0,f.getWhitelistedFileExtension)(t.payload.fileExtension),extra:r})})}if(t.type===u.Action.UpdateSession)return Object.assign(Object.assign({},e),{[t.payload.file_viewer_session_id]:t.payload});if(t.type===i.Action.InitializeFilePreview){const{payload:{fileViewerId:i,fileInfo:r,previewType:a}}=t,n=e[i];return n?Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},n),{file_id:r.file_id,ns_id:r.ns_id,extra:Object.assign(Object.assign({},n.extra),{preview_type:a})})}):e}return e};t.currentFileInfoReducer=(e=P.DEFAULT_STATE.currentFileInfo,t)=>{var r;switch(t.type){case i.Action.SetCurrentFilePreview:const{previewKey:a,fileInfo:s}=t.payload,o=null!==(r=s.file_id)&&void 0!==r?r:"fakeFileId";return Object.assign(Object.assign({},e),{[t.payload.fileViewerId]:Object.assign(Object.assign({fileId:o,previewKey:a},t.payload.fileInfo),{bootstrap:{state:"initializing"}})});case n.Action.GetPreviewDataBatchResult:if(t.payload.result){const i={},r=t.meta.previewKey;for(const a of Object.keys(e)){const n=e[a];for(const e of t.payload.result.results)if((null==n?void 0:n.previewKey)===r){const t=e.file;i[a]=Object.assign(Object.assign({},t),{bootstrap:{state:"initializing"},previewKey:r})}}if(Object.keys(i).length>0)return Object.assign(Object.assign({},e),i)}return e;case i.Action.SetBootstrappedFile:{const i=e[t.payload.fileViewerId];if((null==i?void 0:i.previewKey.serialized)===t.payload.previewKey.serialized)return Object.assign(Object.assign({},e),{[t.payload.fileViewerId]:Object.assign(Object.assign({},i),{bootstrap:{state:"ready"}})});break}case i.Action.SetErroredFile:{const i=e[t.payload.fileViewerId];if((null==i?void 0:i.previewKey.serialized)===t.payload.previewKey.serialized)return Object.assign(Object.assign({},e),{[t.payload.fileViewerId]:Object.assign(Object.assign({},i),{bootstrap:{state:"errored",error:t.payload.error}})});break}}return e};t.usersReducer=(e=P.DEFAULT_STATE.users,t)=>t.type===r.Action.GetAccountBatchResult&&t.payload.result?Object.assign(Object.assign({},e),t.payload.result.reduce((e,t)=>(e[t.account_id]=t,e),{})):e;t.reducers={previewData:(e=P.DEFAULT_STATE.previewData,t)=>{var r,a;let s;switch(t.type){case i.Action.InitializeFilePreview:return s=t.payload.fileInfo.previewKey.serialized,e[s]?e:Object.assign(Object.assign({},e),{[s]:{}});case i.Action.SetPreviewMetadata:return s=t.payload.previewKey.serialized,Object.assign(Object.assign({},e),{[s]:Object.assign(Object.assign({},e[s]),t.payload)});case n.Action.GetPreviewDataBatchResult:{if(!t.payload||!t.payload.result)return e;const i=t.payload.result.results,r=t.meta.previewKey;return Object.assign(Object.assign({},e),i.reduce((e,i)=>{var a;if(null==i.file.file_id){if(null===(a=t.payload.arg)||void 0===a||!a.files||1!==t.payload.arg.files.length)throw Error("Invalid response: file_id must be present in FileInfo for get_preview_data_batch");i.file.file_id=t.payload.arg.files[0].file_id}return i.preview&&(e[r.serialized]=i.preview),null!=i.err&&(null==e[r.serialized]&&(e[r.serialized]={}),e[r.serialized]=Object.assign(Object.assign({},e[r.serialized]),{error:new h.FVError((0,m.getFvErrorCodeFromPreviewDataApi)(i.err),`Got error from preview api: ${i.err[".tag"]}`)})),e},{}))}case i.Action.RefreshBlobSuccess:{if(!t.payload)return e;const{previewKey:i,preview:n}=t.payload;if((0,b.isNestedArchiveFilePreviewKey)(i))return e;const s=i.serialized,o=null!==(a=null===(r=e[s])||void 0===r?void 0:r.content)&&void 0!==a?a:{};return Object.assign(Object.assign({},e),{[s]:Object.assign(Object.assign({},e[s]),{content:Object.assign(Object.assign({},o),n)})})}}return e},archiveFiles:(e=P.DEFAULT_STATE.archiveFiles,t)=>{switch(t.type){case n.Action.GetArchiveFilesResult:case n.Action.LoggedOutGetArchiveFilesResult:{const i=t.meta.rootFileId,r=(0,w.cloneDeep)(e);if(null==r[i]&&(r[i]={}),!t.payload||!t.payload.result)return r;for(const e of t.payload.result.archive_files)e.preview&&(r[i]=Object.assign(Object.assign({},r[i]),{[e.subpath]:e.preview}));return r}}return e},fileMetadata:(e=P.DEFAULT_STATE.fileMetadata,t)=>{const{payload:r}=t;if(!r)return e;if(t.type===i.Action.InitializeFilePreview){const i=t.payload.fileInfo.file_id,r=t.payload.fileInfo.previewKey.serialized;return Object.assign(Object.assign({},e),{[r]:Object.assign(Object.assign({},e[r]),{file_id:i,file_name:t.payload.fileName,size:t.payload.fileInfo.size,timeRange:t.payload.timeRange})})}if(t.type===i.Action.SetFileMetadata){const i=t.payload.previewKey.serialized;return Object.assign(Object.assign({},e),{[i]:t.payload})}return e},rivieraData:(e=P.DEFAULT_STATE.rivieraData,t)=>{const{payload:r,error:a}=t;if(!r)return e;switch(t.type){case i.Action.InitializeFilePreview:{const i=t.payload.fileInfo.previewKey.serialized;return e[i]?e:Object.assign(Object.assign({},e),{[i]:{}})}case i.Action.FetchPhotoMetadataResult:return Object.assign(Object.assign({},e),{[t.payload.previewKey.serialized]:{originalWidth:t.payload.originalWidth,originalHeight:t.payload.originalHeight}});case i.Action.FetchPageDataWithMetadataResult:{const i=t.payload.previewKey.serialized,{pages:r}=e[i]||P.DEFAULT_DOC_PREVIEW_METADATA;if(a)return r&&r.length?e:Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},P.DEFAULT_DOC_PREVIEW_METADATA),{error:a})});if(t.payload&&t.payload.data){const{data:{metadata:a,pages:n}}=t.payload;if(!a)return e;let s=r||new Array(a.page_count);return Array.isArray(n)&&n.length&&(s=[...s],n.forEach(e=>s[e.pageIndex]=Object.assign(Object.assign({},s[e.pageIndex]),e))),Object.assign(Object.assign({},e),{[i]:{metadata:a,pages:s}})}break}case i.Action.FetchExcelSheetLayoutData:{const i=t.payload.previewKey.serialized,r=e[i];if(null!=r&&"workbook"in r){if(!(0,g.isExcelPreviewRivieraData)(r))break;return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},r),{sheets:Object.assign(Object.assign({},r.sheets),{[t.payload.sheetIndex]:(0,y.makePendingLoadableData)()})})})}return Object.assign(Object.assign({},e),{[i]:{sheets:{[t.payload.sheetIndex]:(0,y.makePendingLoadableData)()},workbook:(0,y.makePendingLoadableData)()}})}case i.Action.FetchExcelSheetLayoutDataResult:{const i=t.payload.previewKey.serialized,{sheetIndex:r,data:a}=t.payload,n=e[i],s=(0,g.isExcelPreviewRivieraData)(n)?n.sheets:{};if(a)return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},n),{sheets:Object.assign(Object.assign({},s),{[r]:(0,y.makeFulfilledLoadableData)(a.sheets[r])}),workbook:(0,E.transformExcelResponseToWorkbookMetadata)(a)})});if(t.error){const a=(0,g.isExcelPreviewRivieraData)(n)&&"loaded"===n.workbook.state?n.workbook:(0,y.makeRejectedLoadableData)(t.error);return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},n),{sheets:Object.assign(Object.assign({},s),{[r]:(0,y.makeRejectedLoadableData)(t.error)}),workbook:a})})}break}case i.Action.FetchArchiveTopLevelData:{const i=t.payload.previewKey.serialized,r=e[i];if(null!=r&&"rootEntry"in r){const t=(0,g.filterArchivePreviewRivieraData)(r);if(!t)throw Error(`fetching archive top level data but ${i} has non archive data already: ${r}`);return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},t),{rootEntry:(0,y.makePendingLoadableData)()})})}return Object.assign(Object.assign({},e),{[i]:{rootEntry:(0,y.makePendingLoadableData)()}})}case i.Action.FetchArchiveTopLevelDataResult:{const i=t.payload.previewKey.serialized,{data:r}=t.payload,a=e[i];if(r)return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},a),{rootEntry:(0,E.transformArchiveTreeResponseToArchiveRootEntry)(r)})});if(t.error){const r=(0,g.filterArchivePreviewRivieraData)(a),n="loaded"===(null==r?void 0:r.rootEntry.state)?r.rootEntry:(0,y.makeRejectedLoadableData)(t.error);return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},a),{rootEntry:n})})}break}case i.Action.FetchMediaMetadata:{const i=t.payload.previewKey.serialized,r=e[i];return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},r),{isTruncated:(0,y.makePendingLoadableData)()})})}case i.Action.FetchMediaMetadataResult:{const i=t.payload.previewKey.serialized,r=e[i],{is_truncated:a}=t.payload.data;if("boolean"==typeof a)return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},r),{isTruncated:(0,y.makeFulfilledLoadableData)(a)})});if(t.error)return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},r),{isTruncated:(0,y.makeRejectedLoadableData)(t.error)})});break}case i.Action.FetchWaveformData:{const i=t.payload.previewKey.serialized,r=e[i];return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},r),{waveformData:(0,y.makePendingLoadableData)()})})}case i.Action.FetchWaveformDataResult:{const i=t.payload.previewKey.serialized,r=e[i],a=t.payload.data.waveformHeights;if(a)return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},r),{waveformData:(0,y.makeFulfilledLoadableData)(a)})});if(t.error)return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},r),{waveformData:(0,y.makeRejectedLoadableData)(t.error)})});break}case i.Action.FetchTranscriptData:{const i=t.payload.previewKey.serialized,r=e[i];return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},r),{transcript:(0,y.makePendingLoadableData)(),closedCaptions:(0,y.makePendingLoadableData)(),transcriptLocale:(0,y.makePendingLoadableData)()})})}case i.Action.FetchTranscriptDataResult:{const i=t.payload.previewKey.serialized,r=e[i],a=t.payload.chunkedTranscript,n=t.payload.chunkedClosedCaptioning;if(a.transcript||n.transcript)return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},r),{transcript:(0,y.makeFulfilledLoadableData)(a),closedCaptions:(0,y.makeFulfilledLoadableData)(n),transcriptLocale:(0,y.makeFulfilledLoadableData)(t.payload.transcriptLocale)})});if(t.error)return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},r),{transcript:(0,y.makeRejectedLoadableData)(t.error),closedCaptions:(0,y.makeRejectedLoadableData)(t.error),transcriptLocale:(0,y.makeRejectedLoadableData)(t.error)})});break}case i.Action.StartTranscriptGenerating:{const i=t.payload.previewKey.serialized,r=e[i];return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},r),{transcript:(0,y.makePendingLoadableData)(),closedCaptions:(0,y.makePendingLoadableData)(),transcriptLocale:(0,y.makePendingLoadableData)()})})}case i.Action.SetTranscriptError:{const i=t.payload.previewKey.serialized,r=e[i],a=t.error;if(a)return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},r),{transcript:(0,y.makeRejectedLoadableData)(a),closedCaptions:(0,y.makeRejectedLoadableData)(a),transcriptLocale:(0,y.makeRejectedLoadableData)(a)})});break}case i.Action.FetchLinkfileData:{const i=t.payload.previewKey.serialized,r=e[i];return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},r),{linkfileData:(0,y.makePendingLoadableData)()})})}case i.Action.FetchLinkfileDataResult:{const i=t.payload.previewKey.serialized,r=e[i],a=t.payload.data.uri;if(a)return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},r),{linkfileData:(0,y.makeFulfilledLoadableData)(a)})});if(t.error)return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},r),{linkfileData:(0,y.makeRejectedLoadableData)(t.error)})})}}return e},cloudDocsData:(e=P.DEFAULT_STATE.cloudDocsData,t)=>{const{payload:i,type:r,error:a}=t;if(r===c.Action.GetCloudEditorUrlResult){if(a)return Object.assign(Object.assign({},e),{[t.payload.arg.file_id]:(0,y.makeRejectedLoadableData)(a)});if(null==i?void 0:i.result)return Object.assign(Object.assign({},e),{[t.payload.arg.file_id]:(0,y.makeFulfilledLoadableData)(i.result)})}return e},filePreviewUi:(e=P.DEFAULT_STATE.filePreviewUi,t)=>{var r,a,n,o,c,d,p,u,f;if(!t.payload)return e;if(t.type===i.Action.InitializeFileViewer)return Object.assign(Object.assign({},e),{[t.payload.fileViewerId]:{}});let E;if(t.type===i.Action.InitializeFilePreview)E=t.payload.fileInfo.previewKey.serialized;else if(t.type===s.Action.UnzipResult){E=t.meta.previewKey.serialized}else{if(!t.payload.previewKey)return e;E=t.payload.previewKey.serialized}const b=t.type===s.Action.UnzipResult?t.meta.fileViewerId:t.payload.fileViewerId,m=e[b]||{},h=m[E]||{},S=(0,g.filterZoomableFilePreviewUi)(h);switch(t.type){case i.Action.InitializeFilePreview:{const{previewType:i,fileExtension:r}=t.payload,a=F(i,r);return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},m),{[E]:Object.assign(Object.assign({},a),h)})})}case i.Action.InitializeNestedArchiveFilePreview:{const{previewType:i,currentPath:r}=t.payload,a=F(i);return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},m),{[E]:Object.assign(Object.assign(Object.assign({},a),{currentPath:r}),h)})})}case i.Action.FetchPageDataWithMetadataResult:if(t.payload.data&&t.payload.data.metadata)return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},m),{[E]:Object.assign(Object.assign({},h),{isDocSidebarOpen:!1})})});if((null===(r=t.error)||void 0===r?void 0:r.statusCode)===l.RivieraStatus.PasswordProtected)return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},m),{[E]:Object.assign(Object.assign({},h),{isPasswordProtected:!0})})});break;case i.Action.PageNavigation:{const{sourceContext:i,pageIndex:r,centerOnYOffset:a}=t.payload;return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},m),{[E]:Object.assign(Object.assign({},h),{pageNavigation:{sourceContext:i,pageIndex:r,centerOnYOffset:a}})})})}case i.Action.ResolvePageNavigation:return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},m),{[E]:Object.assign(Object.assign({},h),{pageNavigation:void 0})})});case i.Action.UpdateDocCurrentPageIndex:const{pageCount:P}=t.payload;let{pageIndex:L}=t.payload;return L<0?L=0:P&&L>=P-1&&(L=P-1),Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},m),{[E]:Object.assign(Object.assign({},h),{currentPageIndex:L})})});case i.Action.PageUp:{const t=null!==(n=null===(a=(0,g.filterDocFilePreviewUiState)(h))||void 0===a?void 0:a.currentPageIndex)&&void 0!==n?n:null;if(t)return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},m),{[E]:Object.assign(Object.assign({},h),{currentPageIndex:Math.max(t-1,0)})})});break}case i.Action.PageDown:{const i=null!==(c=null===(o=(0,g.filterDocFilePreviewUiState)(h))||void 0===o?void 0:o.currentPageIndex)&&void 0!==c?c:null;if(i)return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},m),{[E]:Object.assign(Object.assign({},h),{currentPageIndex:Math.min(i+1,t.payload.pageCount||1)})})});break}case i.Action.ZoomIn:{if(null==S)return e;const i=null!==(d=S.zoomScaleFactor)&&void 0!==d?d:S.fitScaleFactor;return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},m),{[E]:Object.assign(Object.assign({},h),{zoomScaleFactor:t.payload.previewType===_.PreviewType.SsrDoc?I(i,v.DOC_ZOOM_MULTIPLIER):T(i,v.IMG_ZOOM_MULTIPLIER)})})})}case i.Action.ZoomOut:{if(null==S)return e;const i=null!==(p=S.zoomScaleFactor)&&void 0!==p?p:S.fitScaleFactor;return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},m),{[E]:Object.assign(Object.assign({},h),{zoomScaleFactor:t.payload.previewType===_.PreviewType.SsrDoc?I(i,1/v.DOC_ZOOM_MULTIPLIER):T(i,1/v.IMG_ZOOM_MULTIPLIER)})})})}case i.Action.ZoomToggleOriginalOrFit:{if(null==S)return e;const i=null!==(u=S.zoomScaleFactor)&&void 0!==u?u:S.fitScaleFactor,r=i===S.fitScaleFactor?1:void 0,a=(null==S?void 0:S.storedFitScaleFactor)&&1===i?null==S?void 0:S.storedFitScaleFactor:void 0,n=t.payload.fitOnly?void 0:a||r;return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},m),{[E]:Object.assign(Object.assign({},h),{zoomScaleFactor:n})})})}case i.Action.UpdateFitScaleFactor:{if(null==S)return e;const{fitScaleFactor:i}=S;return i===t.payload.fitScaleFactor?e:Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},m),{[E]:Object.assign(Object.assign({},h),{storedFitScaleFactor:t.payload.storedFitScaleFactor,fitScaleFactor:t.payload.fitScaleFactor})})})}case i.Action.UpdateDimensions:return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},m),{[E]:Object.assign(Object.assign({},h),{dimensions:t.payload.dimensions})})});case i.Action.SwitchWorkbookTab:return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},m),{[E]:Object.assign(Object.assign({},h),{currentTabIndex:t.payload.tabIndex})})});case i.Action.UpdateArchiveFileCurrentPath:return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},m),{[E]:Object.assign(Object.assign({},h),{currentPath:t.payload.currentPath})})});case i.Action.UpdateArchiveExtractAllSnackbarState:return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},m),{[E]:Object.assign(Object.assign({},h),{extractAllSnackbarState:t.payload.extractAllSnackbarState})})});case s.Action.UnzipResult:let C;return C=(null===(f=t.payload.result)||void 0===f?void 0:f.path)?(0,y.makeFulfilledLoadableData)(t.payload.result.path):(0,y.makeRejectedLoadableData)(t.error||new Error),Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},m),{[E]:Object.assign(Object.assign({},h),{extractAllSnackbarState:C})})});case i.Action.UpdateAudioVideoPlaybackState:const A=(0,w.pick)(t.payload,"currentTimestamp","isPlaying");return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},m),{[E]:Object.assign(Object.assign({},h),A)})});case i.Action.SetHasShownTranscriptSettingModal:return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},m),{[E]:Object.assign(Object.assign({},h),{hasShownTranscriptSettingModal:!0})})});case i.Action.SetIsClosedCaptionShowing:return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},m),{[E]:Object.assign(Object.assign({},h),{isClosedCaptionShowing:t.payload.showing})})});case i.Action.SetIsTranscriptShowing:return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},m),{[E]:Object.assign(Object.assign({},h),{isTranscriptShowing:t.payload.showing})})})}return e},fileViewerUi:(e=P.DEFAULT_STATE.fileViewerUi,t)=>{if(!t.payload)return e;const{fileViewerId:r}=t.payload;if(t.type===i.Action.InitializeFileViewer)return Object.assign(Object.assign({},e),{[r]:P.DEFAULT_FILE_VIEWER_UI});const a=e[r];if(!a)return e;switch(t.type){case i.Action.OpenRightRail:return Object.assign(Object.assign({},e),{[r]:Object.assign(Object.assign({},a),{isRightRailOpen:!0})});case i.Action.CloseRightRail:return Object.assign(Object.assign({},e),{[r]:Object.assign(Object.assign({},a),{isRightRailOpen:!1})});case i.Action.OpenDocSidebar:return Object.assign(Object.assign({},e),{[r]:Object.assign(Object.assign({},a),{isDocSidebarOpen:!0})});case i.Action.CloseDocSidebar:return Object.assign(Object.assign({},e),{[r]:Object.assign(Object.assign({},a),{isDocSidebarOpen:!1})});case i.Action.EnterFullScreen:return Object.assign(Object.assign({},e),{[r]:Object.assign(Object.assign({},a),{isFullScreen:!0})});case i.Action.ExitFullScreen:return Object.assign(Object.assign({},e),{[r]:Object.assign(Object.assign({},a),{isFullScreen:!1})});case i.Action.ToggleVideoFrameSteppers:return Object.assign(Object.assign({},e),{[r]:Object.assign(Object.assign({},a),{showVideoFrameSteppers:t.payload.enabled})});case i.Action.FlipToNextFile:case i.Action.FlipToPreviousFile:return Object.assign(Object.assign({},e),{[r]:Object.assign(Object.assign({},a),{hasBeenFlipped:!0})});case i.Action.SetActiveRightRailPlugin:{const{fileViewerId:i,pluginId:r}=t.payload;return null==r?e:Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},a),{isRightRailOpen:!0})})}case i.Action.EditVideo:{const{fileViewerId:i}=t.payload;return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},a),{isEditingVideo:!0})})}case i.Action.CancelEditingVideo:{const{fileViewerId:i}=t.payload;return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},a),{isEditingVideo:!1})})}default:return e}},loggingSession:t.loggingSessionReducer,currentFileInfo:t.currentFileInfoReducer,users:t.usersReducer,fetchingUser:(e=P.DEFAULT_STATE.fetchingUser,t)=>t.type!==r.Action.GetCurrentAccountResult&&e,currentUser:(e=P.DEFAULT_STATE.currentUser,t)=>t.type===r.Action.GetCurrentAccountResult&&t.payload.result?t.payload.result:e,fileContentMetadata:(e=P.DEFAULT_STATE.fileContentMetadata,t)=>{if(t.type===a.Action.GetFileContentMetadataResult&&t.payload.result){const i=(e=>{if(!e.meta)throw new Error(`missing meta argument to action ${e.type}`);return e.meta})(t).previewKey;return Object.assign(Object.assign({},e),{[i.serialized]:t.payload.result})}return e},plugins:(e=P.DEFAULT_STATE.plugins,t)=>{var r;if(t.type===i.Action.InitializeFileViewer){const{fileViewerId:i}=t.payload;return Object.assign(Object.assign({},e),{[i]:{activeRightRailPluginId:void 0,activeEditPluginId:void 0,hideContentPanePluginId:void 0}})}if(t.type===i.Action.SetActiveRightRailPlugin){const{fileViewerId:i,pluginId:r}=t.payload;return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},e[i]),{activeRightRailPluginId:r})})}if(t.type===i.Action.FlipToNextFile||t.type===i.Action.FlipToPreviousFile){const{fileViewerId:i}=t.payload;if((null===(r=e[i])||void 0===r?void 0:r.activeRightRailPluginId)===o.TRANSCRIPT_BLADE_PLUGIN_ID)return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},e[i]),{activeRightRailPluginId:o.INFO_BLADE_PLUGIN_ID})})}if(t.type===i.Action.SetActiveEditPlugin){const{fileViewerId:i,pluginId:r}=t.payload;return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},e[i]),{activeEditPluginId:r})})}if(t.type===i.Action.HideContentPane){const{fileViewerId:i,pluginId:r}=t.payload;return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},e[i]),{hideContentPanePluginId:r})})}return e},sharedLinkInfo:(e=P.DEFAULT_STATE.sharedLinkInfo,t)=>{const{payload:r,type:a}=t;if(a===i.Action.SetSharedLinkInfo){const t=r.previewKey.serialized;return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},e[t]),r)})}return e},videoRequests:(e=P.DEFAULT_STATE.videoRequests,t)=>{switch(t.type){case i.Action.RequestVideoSeek:return[...e,{videoRequestType:"seek",time:t.payload.time}];case i.Action.RequestVideoSeekRelative:return[...e,{videoRequestType:"seekRelative",delta:t.payload.delta}];case i.Action.RequestVideoPause:return[...e,{videoRequestType:"pause"}];case i.Action.ClearVideoRequests:return[];default:return e}},rootInfo:(e=P.DEFAULT_STATE.rootInfo,t)=>{var i;switch(t.type){case r.Action.GetRootInfoResult:return null!==(i=t.payload.result)&&void 0!==i?i:null;default:return e}},toolbar:(e=P.DEFAULT_STATE.toolbar,t)=>{switch(t.type){case i.Action.OverrideFloatingToolbar:{const{state:i,internal:r,pluginId:a}=t.payload;return Object.assign(Object.assign({},e),{override:i,overridePluginId:r?"fvsdk":a})}default:return e}},volume:(e=P.DEFAULT_STATE.volume,t)=>{switch(t.type){case i.Action.SetVolume:return Object.assign(Object.assign({},e),{volume:t.payload.volume});case i.Action.SetMuted:return Object.assign(Object.assign({},e),{muted:t.payload.muted});default:return e}},isPreviewLoading:(e=P.DEFAULT_STATE.isPreviewLoading,t)=>{switch(t.type){case i.Action.SetPreviewLoadingAction:return t.payload.isPreviewLoading;default:return e}},brandingInfo:(e=P.DEFAULT_STATE.brandingInfo,t)=>{const{payload:r,type:a}=t;if(a===i.Action.SetBrandingInfo){const t=r.previewKey.serialized;return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},e),r)})}return e},fileViewerState:(e=P.DEFAULT_STATE.fileViewerState,t)=>{const{payload:r,type:a}=t;switch(a){case i.Action.SetFileViewerError:const{error:t,fileViewerId:a}=r;return Object.assign(Object.assign({},e),{[a]:Object.assign(Object.assign({},e[a]),{error:t})});default:return e}},isDeleteFileModalOpen:(e=P.DEFAULT_STATE.isDeleteFileModalOpen,t)=>{switch(t.type){case i.Action.SetDeleteFileModalOpen:return t.payload.isOpen;default:return e}},isToolbarRenameActive:(e=P.DEFAULT_STATE.isToolbarRenameActive,t)=>{switch(t.type){case i.Action.SetToolbarRenameActive:return t.payload.isActive;default:return e}}}})),define("typescript/libraries/file-viewer/src/core/data/reducer_constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_DOC_PREVIEW_METADATA=t.CLOUD_DOC_PREVIEWABLE_AS_PDF_EXTS=t.DEFAULT_FILE_VIEWER_UI=t.DEFAULT_AUDIO_VIDEO_PREVIEW_UI=t.DEFAULT_ARCHIVE_PREVIEW_UI=t.DEFAULT_EXCEL_PREVIEW_UI=t.DEFAULT_DOC_PREVIEW_UI=t.DEFAULT_IMAGE_PREVIEW_UI=t.DEFAULT_FILE_PREVIEW_UI=t.DEFAULT_STATE=void 0,t.DEFAULT_STATE={previewData:{},archiveFiles:{},fileMetadata:{},rivieraData:{},cloudDocsData:{},filePreviewUi:{},fileViewerUi:{},currentFileInfo:{},loggingSession:{},users:{},currentUser:null,fetchingUser:!0,fileContentMetadata:{},plugins:{},sharedLinkInfo:{},videoRequests:[],rootInfo:null,toolbar:{override:void 0,overridePluginId:void 0},volume:{volume:1,muted:!1},isPreviewLoading:!1,brandingInfo:{},fileViewerState:{},isDeleteFileModalOpen:!1,isToolbarRenameActive:!1},t.DEFAULT_FILE_PREVIEW_UI={currentPath:void 0},t.DEFAULT_IMAGE_PREVIEW_UI=Object.assign(Object.assign({},t.DEFAULT_FILE_PREVIEW_UI),{fitScaleFactor:0}),t.DEFAULT_DOC_PREVIEW_UI=Object.assign(Object.assign({},t.DEFAULT_FILE_PREVIEW_UI),{currentPageIndex:0,fitScaleFactor:0,isPasswordProtected:!1}),t.DEFAULT_EXCEL_PREVIEW_UI=Object.assign(Object.assign({},t.DEFAULT_FILE_PREVIEW_UI),{currentTabIndex:0,fitScaleFactor:0}),t.DEFAULT_ARCHIVE_PREVIEW_UI=Object.assign(Object.assign({},t.DEFAULT_FILE_PREVIEW_UI),{currentPath:[],extractAllSnackbarState:null}),t.DEFAULT_AUDIO_VIDEO_PREVIEW_UI=Object.assign(Object.assign({},t.DEFAULT_FILE_PREVIEW_UI),{currentTimestamp:0,isPlaying:!1,hasShownTranscriptSettingModal:!1,isTranscriptShowing:!1,isClosedCaptionShowing:!1}),t.DEFAULT_FILE_VIEWER_UI={isDocSidebarOpen:!1,showVideoFrameSteppers:!1,isFullScreen:!1,hasBeenFlipped:!1,isRightRailOpen:!1,isEditingVideo:!1},t.CLOUD_DOC_PREVIEWABLE_AS_PDF_EXTS=[".gdoc",".gslides",".paper",".papert",".binder"],t.DEFAULT_DOC_PREVIEW_METADATA={metadata:{page_count:0,dimensions:[[0,0,0]]},pages:[]}})),define("typescript/libraries/file-viewer/src/core/riviera/transform",["require","exports","typescript/libraries/file-viewer/src/core/utils/loadable","typescript/libraries/file-viewer/src/core/urls"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformArchiveTreeResponseToArchiveRootEntry=t.transformExcelResponseToSheetMetadata=t.transformExcelResponseToWorkbookMetadata=t.processTextAndUrl=void 0;function a(e,t,i){return i&&i[0]?(0,r.imageUrl)(e,t,0,i[0]):(0,r.imageUrl)(e,t,0)}function n(e){var t;return{name:e.name,size:void 0!==e.size?Number(e.size):void 0,isDir:e.isDir,children:null===(t=e.children)||void 0===t?void 0:t.map(n)}}t.processTextAndUrl=function(e,t=[],i,n,s,o){const l=(function(e,t=[],i,n,s){const o=t.reduce((e,[t,i,r])=>{for(let a=0;a<r;a++)e.push([t,i]);return e},[]);return[...Array(i)].map((t,i)=>({pageIndex:i,dimension:o[i],thumbnailUrl:a(e,i,s),imgUrls:{"1x":(0,r.imageUrl)(e,i,0),"4x":(0,r.imageUrl)(e,i,400),srcset:(0,r.generateSrcset)(e,i,s)},textboxes:n?n[i].textboxes:[],links:[]}))})(e,t,i,s,o);return(function(e){const{text:t}=e;if(!t||!t.pages)return[];const{links:i,pages:r}=t,a=(t.fonts||[]).reduce((e,t)=>(e[t.f]=(function(e){const t=e.n.lastIndexOf(",");return{fontFamily:`"${t>-1?e.n.substr(0,t):e.n}", ${1&e.f?"monospace":"serif"}`,isBold:(e.f&1<<18)>0,isItalic:(64&e.f)>0}})(t),e),{});return Object.keys(r).map(e=>({pageIndex:+e,textboxes:(r[e]||[]).map(e=>Object.assign(Object.assign({},e),{font:a[e.f]})),links:i&&i[e]||[]}))})(n).forEach(e=>{const{pageIndex:t}=e;t<l.length&&(l[t]=Object.assign(Object.assign({},l[t]),e))}),l},t.transformExcelResponseToWorkbookMetadata=function(e){return(0,i.makeFulfilledLoadableData)({name:e.workbook_name,sheetOverview:e.sheets.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.idx]:{hidden:t.hidden,name:t.name}}),{})})},t.transformExcelResponseToSheetMetadata=function(e){return e.sheets.reduce((e,t)=>"dimensions"in t?Object.assign(Object.assign({},e),{[t.idx]:(0,i.makeFulfilledLoadableData)(t)}):e,{})},t.transformArchiveTreeResponseToArchiveRootEntry=function(e){return(0,i.makeFulfilledLoadableData)(Object.assign(Object.assign({},n(e)),{isPasswordProtected:!!e.isEncrypted}))}})),define("typescript/libraries/file-viewer/src/core/utils/errors",["require","exports","typescript/libraries/file-viewer/src/core/types/errors"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFvErrorCodeFromPreviewDataApi=t.isFVError=void 0,t.isFVError=function(e){return e instanceof i.FVError},t.getFvErrorCodeFromPreviewDataApi=function(e){switch(e[".tag"]){case"unsupported_file_error":return i.FVErrorCode.UnsupportedPreviewType;case"content_not_uploaded":return i.FVErrorCode.FileUploading;default:return i.FVErrorCode.PreviewsDataApiFailure}}})),define("typescript/libraries/file-viewer/src/core/types/errors",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FVError=t.FVErrorCode=void 0,(function(e){e[e.PreviewsDataApiFailure=0]="PreviewsDataApiFailure",e[e.MalformedPreviewsDataApiResponse=1]="MalformedPreviewsDataApiResponse",e[e.RivieraDataFetchFailure=2]="RivieraDataFetchFailure",e[e.MalformedRivieraData=3]="MalformedRivieraData",e[e.FileTooLarge=4]="FileTooLarge",e[e.UnsupportedPreviewType=5]="UnsupportedPreviewType",e[e.NoExtension=6]="NoExtension",e[e.PasswordProtected=7]="PasswordProtected",e[e.FileUploading=8]="FileUploading",e[e.Unknown=9]="Unknown",e[e.FileSwitched=10]="FileSwitched",e[e.InvalidFileInfo=11]="InvalidFileInfo",e[e.InvalidLoggingOrder=12]="InvalidLoggingOrder",e[e.InvalidLoggingSession=13]="InvalidLoggingSession",e[e.UserOffline=14]="UserOffline",e[e.MissingContentMetadata=15]="MissingContentMetadata"})(t.FVErrorCode||(t.FVErrorCode={}));class i extends Error{constructor(e,t){super(t),Object.setPrototypeOf(this,i.prototype),this.type=e}}t.FVError=i})),define("typescript/libraries/file-viewer/src/core/types/plugins/lifecycle",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})),define("typescript/libraries/file-viewer/src/core/utils/extension_constants",["require","exports","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/file_extension/extension_constants"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWhitelistedFileExtension=t.brandWhitelistedFileExtension=t.resolvePreviewTypeFromExtension=t.LOGGING_ALLOWED_EXTS_SET=t.DOC_EXTS=t.IMAGE_EXTS=void 0;function a(e){return e}t.IMAGE_EXTS=r.PHOTO_EXTS.concat([".xd"]),t.DOC_EXTS=r.PDF_EXTS.concat(r.DOCUMENT_EXTS,r.PRESENTATION_EXTS,r.WORDPROC_EXTS),t.LOGGING_ALLOWED_EXTS_SET=new Set(r.LOGGING_ALLOWED_EXTS),t.resolvePreviewTypeFromExtension=function(e){return e=e.toLowerCase(),r.MSOFFICE_EXCEL_EXTS.includes(e)?i.PreviewType.Excel:t.DOC_EXTS.includes(e)?i.PreviewType.SsrDoc:t.IMAGE_EXTS.includes(e)?i.PreviewType.Image:r.TRANSCODE_VIDEO_EXTS.includes(e)?i.PreviewType.Video:r.AUDIO_EXTS.includes(e)?i.PreviewType.Audio:r.LINK_FILE_EXTS.includes(e)?i.PreviewType.Linkfile:r.HTMLIFIED_PREVIEW_EXTS.includes(e)?i.PreviewType.HTML:r.CLOUD_DOC_EXTS.includes(e)?i.PreviewType.CloudDoc:i.PreviewType.Other},t.brandWhitelistedFileExtension=a,t.getWhitelistedFileExtension=function(e){return t.LOGGING_ALLOWED_EXTS_SET.has(e)?e:r.LOGGING_UNALLOWED_EXT_PLACEHOLDER}})),define("typescript/libraries/file-viewer/src/core/i18n",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatBytes=void 0,t.formatBytes=function(e,t){const i={minimumFractionDigits:0,maximumFractionDigits:2};return e<1024?t.formatMessage({id:"JPwjIB",defaultMessage:"{value, plural, one {# byte} other {# bytes}}"},{value:t.formatNumber(e,i)}):e<921600?t.formatMessage({id:"rNMBTS",defaultMessage:"{value} KB"},{value:t.formatNumber(e/1024,i)}):e<943718400?t.formatMessage({id:"mDrYnG",defaultMessage:"{value} MB"},{value:t.formatNumber(e/1048576,i)}):e<900*1024**3?t.formatMessage({id:"g+xqHV",defaultMessage:"{value} GB"},{value:t.formatNumber(e/1024**3,i)}):t.formatMessage({id:"7XWgdi",defaultMessage:"{value} TB"},{value:t.formatNumber(e/1024**4,i)})}})),define("typescript/libraries/file-viewer/src/core/utils/invariant",["require","exports","typescript/libraries/file-viewer/src/core/types/errors"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.invariant=void 0,t.invariant=function(e,t=i.FVErrorCode.Unknown,r){if(!e){let e;throw e=void 0===r?new i.FVError(t,"An error occurred for unknown reason"):new i.FVError(t,r),e.framesToPop=1,e}return e}})),define("typescript/libraries/file-viewer/src/core/logging/actions",["require","exports"],(function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.logDuration=t.updateSession=t.logTTI=t.logVideoEvent=t.logBackgroundEvent=t.logUserActionEvent=t.logPreviewEvent=t.logSessionEvent=t.Action=void 0,(function(e){e.UpdateSession="@@previews/updateSession",e.Log="@@previews/log",e.LogUserAction="@@previews/LogUserAction",e.LogBackgroundEvent="@@previews/LogBackgroundEvent",e.LogSessionEvent="@@previews/logSessionEvent",e.LogTTI="@@previews/logTTI",e.LogVideo="@@previews/logVideo",e.LogDuration="@@previews/logDuration",e.UpdateFitScaleFactor="UpdateFitScaleFactor"})(i=t.Action||(t.Action={})),t.logSessionEvent=function(e){return{type:i.LogSessionEvent,payload:e}},t.logPreviewEvent=function(e){return{type:i.Log,payload:e}},t.logUserActionEvent=function(e){return{type:i.LogUserAction,payload:e}},t.logBackgroundEvent=function(e){return{type:i.LogBackgroundEvent,payload:e}},t.logVideoEvent=function(e){return{type:i.LogVideo,payload:e}},t.logTTI=function(e){return{type:i.LogTTI,payload:e}},t.updateSession=function(e){return{type:i.UpdateSession,payload:e}},t.logDuration=function(e){return{type:i.LogDuration,payload:e}}})),define("typescript/libraries/file-viewer/src/core/logging/session",["require","exports","typescript/libraries/file-viewer/src/core/utils/uuid","typescript/libraries/file-viewer/src/core/utils/invariant","typescript/libraries/file-viewer/src/core/types/errors","typescript/libraries/file-viewer/src/core/utils/extension_constants","typescript/libraries/file-viewer/src/core/logging/constants"],(function(e,t,i,r,a,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.markTTI=t.recordExtra=t.updateSessionLastEvent=t.recordEvent=t.createFilePreviewSession=void 0,t.createFilePreviewSession=function(e){const{file_viewer_session_id:t=(0,i.v4)(),file_preview_session_id:r=(0,i.v4)(),file_id:a="",sj_id:o,ns_id:l,file_extension:c=(0,n.getWhitelistedFileExtension)(""),device_type:d=s.DeviceType.desktop,extra:p={}}=e||{};return{file_viewer_session_id:t,file_preview_session_id:r,file_id:a,sj_id:o,ns_id:l,file_extension:c,device_type:d,extra:Object.assign(Object.assign({},p),{source_action:p.source_action||s.SourceAction.Visit,source_context:p.source_context||s.SourceContext.FileViewer,was_flipped:p.was_flipped||!1,file_preview_timeline:{}})}},t.recordEvent=function(e,t,i){const{extra:{last_event:n}}=e;switch((0,r.invariant)(n!==t,a.FVErrorCode.InvalidLoggingOrder,`Cannot log duplicate event ${t}`),t){case s.SessionEventType.FilePreviewSupportConfirmed:case s.SessionEventType.FilePreviewSupportDenied:(0,r.invariant)(n===s.SessionEventType.FilePreviewAttemptStarted,a.FVErrorCode.InvalidLoggingOrder,`Event ${t} out of order, expect \`last_event\` to be '${s.SessionEventType.FilePreviewAttemptStarted}' but was '${n}'`);break;case s.SessionEventType.FilePreviewDownloadAttempted:(0,r.invariant)(n===s.SessionEventType.FilePreviewSupportConfirmed,a.FVErrorCode.InvalidLoggingOrder,`Event ${t} out of order, expect \`last_event\` to be '${s.SessionEventType.FilePreviewSupportConfirmed}' but was '${n}'`);break;case s.SessionEventType.FilePreviewDownloadFailed:case s.SessionEventType.FilePreviewDownloadSucceeded:(0,r.invariant)(n===s.SessionEventType.FilePreviewDownloadAttempted,a.FVErrorCode.InvalidLoggingOrder,`Event ${t} out of order, expect \`last_event\` to be '${s.SessionEventType.FilePreviewDownloadAttempted}' but was '${n}'`);break;case s.SessionEventType.FilePreviewRenderSucceeded:case s.SessionEventType.FilePreviewRenderFailed:(0,r.invariant)(n===s.SessionEventType.FilePreviewDownloadSucceeded||n===s.SessionEventType.FilePreviewDownloadAttempted,a.FVErrorCode.InvalidLoggingOrder,`Event ${t} out of order, expect \`last_event\` to be '${s.SessionEventType.FilePreviewDownloadSucceeded}' but was '${n}'`);break;case s.SessionEventType.FilePreviewGetApp:(0,r.invariant)(n!==s.SessionEventType.FilePreviewSessionEnded,a.FVErrorCode.InvalidLoggingOrder,`Event ${t} out of order. Preview session has already ended`)}return Object.assign(Object.assign({},e),{extra:Object.assign(Object.assign(Object.assign({},e.extra),{file_preview_timeline:Object.assign(Object.assign({},e.extra.file_preview_timeline),{[t]:Date.now()})}),i||{})})},t.updateSessionLastEvent=function(e,t){return Object.assign(Object.assign({},e),{extra:Object.assign(Object.assign({},e.extra),{last_event:t})})},t.recordExtra=function(e,t){return Object.assign(Object.assign({},e),{extra:Object.assign(Object.assign({},e.extra),t)})},t.markTTI=function(e){const t=Object.assign({},e.extra);if(t.time_to_primary_mark)return e;switch(t.primary_mark_ts||(t.primary_mark_ts=Date.now()),t.source_action){case s.SourceAction.Visit:(0,r.invariant)(!!t.page_start_ts,a.FVErrorCode.InvalidLoggingSession,"Cannot calculate 1st page TTI without page_start_ts"),t.time_to_primary_mark=t.primary_mark_ts-t.page_start_ts;break;case s.SourceAction.Click:(0,r.invariant)(t.file_preview_timeline&&!!t.file_preview_timeline.preview_attempted,a.FVErrorCode.InvalidLoggingSession,"Cannot calculate subsequent page TTI without preview_attempted timestamp"),t.time_to_primary_mark=t.primary_mark_ts-t.file_preview_timeline.preview_attempted}return Object.assign(Object.assign({},e),{extra:t})}})),define("typescript/libraries/file-viewer/src/core/logging/video",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoPreviewEvent=void 0,(function(e){e.PlayerRendered="player_rendered",e.FirstClickPlay="first_click_play",e.MediaError="media_error",e.ChangePlaybackRate="change_playback_rate",e.ChangeVideoQuality="change_video_quality",e.ClosePreview="close_preview",e.TimeToBuffer="time_to_buffer",e.TimeToLoad="time_to_load",e.SeekVideo="seek_video",e.VideoStartsPlaying="video_starts_playing",e.VideoResumesPlaying="video_resumes_playing",e.VideoStalled="video_stalled",e.VideoPaused="video_paused",e.ScrubberThumbnailsLoaded="scrubber_thumbnails_loaded",e.ScrubberThumbnailsFailed="scrubber_thumbnails_failed",e.AudioWaveformLoaded="audio_waveform_loaded",e.AudioWaveformFailed="audio_waveform_failed",e.MediaEnded="media_ended",e.VideoPlaybackSmoothness="video_playback_smoothness",e.SlowConnectionBannerShown="slow_connection_banner_shown"})(t.VideoPreviewEvent||(t.VideoPreviewEvent={}))})),define("typescript/libraries/file-viewer/src/core/middlewares/navigation",["require","exports","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.middleware=void 0,t.middleware=function(e){return({getState:t})=>a=>n=>{var s,o,l,c,d,p;switch(n.type){case i.Action.Share:return null===(s=e.openShareModal)||void 0===s||s.call(e),a(n);case i.Action.OpenWith:return null===(o=e.openDefaultNativeApp)||void 0===o||o.call(e),a(n);case i.Action.OpenWebPreview:return null===(l=e.openWebPreview)||void 0===l||l.call(e),a(n);case i.Action.OpenVersionHistory:return e.openVersionHistory(),a(n);case i.Action.Restore:return e.restorePreviousVersion(),a(n);case i.Action.OpenFullscreenPreview:return e.openFullScreenPreview&&e.openFullScreenPreview(),a(n);case i.Action.OpenUrl:const{url:u,fallbackUrl:_}=n.payload;return e.openUrl&&e.openUrl(u,_),a(n);case i.Action.CloseViewer:const v=(0,r.getCurrentFilePreviewUI)(t(),n.payload.fileViewerId),f=n.payload.previewKey;if(f&&(null===(c=null==v?void 0:v.currentPath)||void 0===c?void 0:c.length)){const e=v.currentPath.slice(0,-1);return a((0,i.updateArchiveFileCurrentPath)(Object.assign(Object.assign({},n.payload),{previewKey:f,currentPath:e,fromUrlChanged:!1,isDir:!0})))}return e.closeViewer&&e.closeViewer(),a(n);case i.Action.ShowAuthModal:const{encryptionOptions:g,sharedLinkUrl:E,kind:w,mode:b,loggingExtra:m}=n.payload;return e.showAuthModal&&e.showAuthModal({encryptionOptions:g,sharedLinkUrl:E,kind:w,mode:b,loggingExtra:m}),a(n);case i.Action.FlipToNextFile:return null===(d=e.flipToNextFile)||void 0===d||d.call(e),a(n);case i.Action.FlipToPreviousFile:return null===(p=e.flipToPreviousFile)||void 0===p||p.call(e),a(n);case i.Action.UpdateFiles:return e.updateFiles&&e.updateFiles(),a(n);default:return a(n)}}}})),define("typescript/libraries/file-viewer/src/core/utils/uuid",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.v4=void 0;const i=(()=>{let e,t;const i=[];for(e=0,t=e;e<=255;e++,t=e)i.push((t+256).toString(16).substr(1));return i})();function r(e){return e.map(e=>i[e]).join("")}t.v4=function(){const e=(function(){const e=new Uint8Array(16);return window.crypto.getRandomValues(e),e})();e[6]=15&e[6]|64,e[8]=63&e[8]|128;const t=Array.prototype.slice.call(e);return[t.slice(0,4),t.slice(4,6),t.slice(6,8),t.slice(8,10),t.slice(10,16)].map(r).join("-")}})),define("typescript/libraries/file-viewer/src/file_viewer/file_viewer",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/utils/uuid","typescript/libraries/file-viewer/src/core/config","typescript/libraries/api_v2/redux/previews","typescript/libraries/api_v2/redux/users","typescript/libraries/file-viewer/src/core/utils/invariant","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/core/utils/support","typescript/libraries/file-viewer/src/core/utils/paths","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/utils/errors","typescript/libraries/file-viewer/src/core/riviera/types","typescript/libraries/file-viewer/src/core/types/constants","typescript/libraries/api_v2/redux/seen_state","typescript/libraries/file-viewer/src/pass/lifecycle","typescript/libraries/api_v2/redux/files","typescript/libraries/file-viewer/src/core/data/preview_key","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/utils/browser_detection","typescript/libraries/file-viewer/src/file_viewer/plugin_manager","typescript/libraries/file-viewer/src/logging/performance","typescript/libraries/file-viewer/src/core/types/errors"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f,g,E,w,b,m,h,y,P,T,I){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SDKFileViewer=void 0;t.SDKFileViewer=class{constructor(e,t,F=[],S){this.mounted=!1,this.sessionActive=!1,this.initializeOpts=void 0,this.loadPreviewMetadata=e=>i.__awaiter(this,void 0,void 0,(function*(){const e=this.store,t=this.fileViewerId,i=(0,h.getCurrentFile)(e.getState(),t);if(!i)return;const{file_id:a,url:n,previewKey:s}=i,{config:o}=this.platformProps;e.dispatch((0,b.getFileContentMetadataAction)({arg:{file_path_or_id:a,url:n}},{previewKey:s})),yield Promise.all([e.dispatch((0,r.fetchRivieraData)({fileViewerId:this.fileViewerId,previewKey:s,config:o}))])})),this.resolveFilePreview=(e,t,r)=>i.__awaiter(this,void 0,void 0,(function*(){var i;let a;(0,l.invariant)(!(!e.url&&!e.file_id),I.FVErrorCode.InvalidFileInfo,"You have to either provide a file ID or shared link url to fetch the preview data");const n=null!==(i=e.url)&&void 0!==i?i:r;a=n?{url:n,file_id:e.file_id}:e.ns_id&&e.sj_id?{ns_id:e.ns_id,sj_id:e.sj_id}:{file_id:e.file_id},yield this.store.dispatch((0,s.getPreviewDataBatchAction)({arg:{files:[a],include_dimensions:!0},params:{}},{previewKey:t}))})),this.hasFileFlipped=e=>{const t=(0,h.getCurrentFile)(this.store.getState(),this.fileViewerId);return(null==t?void 0:t.previewKey.serialized)!==e.serialized},this.reinitialize=e=>i.__awaiter(this,void 0,void 0,(function*(){if(!this.initializeOpts)throw new Error("Reinitialize called before initialization");let t;this.store.dispatch((0,r.updateFiles)({})),t=(null==e?void 0:e.fileInfo)?e.fileInfo:this.initializeOpts.fileInfo.file_id?{file_id:this.initializeOpts.fileInfo.file_id}:this.initializeOpts.fileInfo;const i=Object.assign(Object.assign(Object.assign({},this.initializeOpts),e),{fileInfo:t,forceReloadPreviewMetadata:!0});return this.initialize(i)})),this.initialize=e=>i.__awaiter(this,void 0,void 0,(function*(){var t,i;const{fileMetadata:a,fileSize:s,fileInfo:o,previewMetadata:b,sourceSession:P,defaultRightRailPlugin:F,activeEditPlugin:S,pluginParams:L={},supportedPreviewTypes:C=g.DEFAULT_SUPPORTED_PREVIEW_TYPES,sharedLinkInfo:A,brandingInfo:O,timeRange:x,forceReloadPreviewMetadata:D}=e,R=!this.initializeOpts;this.initializeOpts=e,T.PreviewsEventLogger.mark(T.PreviewsTimingEvents.FVSDK_INITIALIZE_START);const{file_name:M}=a,N=o.file_id,k=o.sj_id,V=o.ns_id,j=o.url,Y=(0,m.getPreviewKey)(N,V,k,j),{store:U,config:B,deviceType:K,accountId:z,callbacks:W}=this.platformProps,H=this.fileViewerId,G=(0,p.getFileExtension)(M);(0,h.getCurrentFile)(U.getState(),H)&&this.mounted&&(yield this.doTeardown(),P.was_flipped=!0),R&&U.dispatch((0,r.initializeFileViewer)({fileViewerId:H,deviceType:K,pluginParams:L})),this.store.dispatch((0,r.setCurrentFilePreview)({fileViewerId:this.fileViewerId,fileInfo:o,previewKey:Y})),U.dispatch((0,r.setFileMetadata)(Object.assign(Object.assign({},a),{size:s,previewKey:Y,timeRange:x}))),b&&U.dispatch((0,r.setPreviewMetadata)(Object.assign(Object.assign({},b),{previewKey:Y}))),this.sessionActive=!0,U.dispatch((0,r.initializeFilePreviewSession)({fileViewerId:H,fileId:N,sjId:k,nsId:V,deviceType:K,fileExtension:G,sourceSession:P})),U.dispatch((0,r.setPreviewLoadingAction)({isPreviewLoading:!0}));const q=null===(t=U.getState().loggingSession[this.fileViewerId])||void 0===t?void 0:t.file_preview_session_id;if(!q)return;W&&W.onPreviewSessionInitialized&&W.onPreviewSessionInitialized(q),U.dispatch((0,u.logSessionEvent)({event:_.SessionEventType.FilePreviewAttemptStarted,fileViewerId:H,previewSessionId:q}));const X=performance.now();try{(0,l.invariant)(!!G,I.FVErrorCode.NoExtension,"Missing file extension"),(0,l.invariant)(!!o.url||!!o.file_id,I.FVErrorCode.InvalidFileInfo,"You have to either provide a file ID or shared link url to fetch the preview data");try{const e=(0,h.getPreviewMetadata)(U.getState(),Y);if(!D&&e&&o.file_id||(yield this.resolveFilePreview(o,Y,null==A?void 0:A.url)),!navigator.onLine)throw new I.FVError(I.FVErrorCode.UserOffline,"There is a network connectivity issue")}catch(e){throw(0,v.isFVError)(e)?e:new I.FVError(I.FVErrorCode.PreviewsDataApiFailure,e.message)}if(this.hasFileFlipped(Y))return;const e=(0,h.getCurrentFile)(U.getState(),H);if(!e)return;const{file_id:t,ns_id:i,sj_id:a}=e;A&&U.dispatch((0,r.setSharedLinkInfo)(Object.assign(Object.assign({},A),{previewKey:Y}))),O&&U.dispatch((0,r.setBrandingInfo)(Object.assign(Object.assign({},O),{previewKey:Y})));const p=performance.now();U.dispatch((0,u.logDuration)({eventName:"fetch_preview_data_ms",duration:p-X,fileViewerId:H})),T.PreviewsEventLogger.mark(T.PreviewsTimingEvents.FVSDK_GET_PREVIEW_METADATA),(0,l.invariant)(!!t,I.FVErrorCode.MalformedPreviewsDataApiResponse,"Missing `file_id` in `file_info`");const g=(0,h.getPreviewMetadata)(U.getState(),Y);if(!g)throw new Error("PreviewMetadata must be defined during initialization.");const b=(0,d.resolvePreviewType)(g);if(U.dispatch((0,r.initializeFilePreview)({fileViewerId:H,fileInfo:{file_id:t,size:s,ns_id:i,sj_id:a,previewKey:Y},fileExtension:G,fileName:M,previewType:b,timeRange:x})),null==g?void 0:g.error)throw g.error;if((0,l.invariant)(b!==c.PreviewType.Error,I.FVErrorCode.MalformedPreviewsDataApiResponse,"Preview Type got resolved to PreviewType.Error, possibly because of missing `content`"),(0,l.invariant)(C.includes(b),I.FVErrorCode.UnsupportedPreviewType,"Unsupported preview type"),(0,l.invariant)((0,n.fileSizeSupported)(M,s,b,B),I.FVErrorCode.FileTooLarge,"Unsupported file size"),U.dispatch((0,u.logSessionEvent)({event:_.SessionEventType.FilePreviewSupportConfirmed,fileViewerId:H,previewSessionId:q,extra:{preview_type:b}})),U.dispatch((0,u.logSessionEvent)({event:_.SessionEventType.FilePreviewDownloadAttempted,fileViewerId:H,previewSessionId:q,extra:{preview_type:b}})),T.PreviewsEventLogger.mark(T.PreviewsTimingEvents.FVSDK_GET_RIVIERA_DATA_START_START),yield this.loadPreviewMetadata(o).catch(e=>{throw(0,v.isFVError)(e)?e:new I.FVError(I.FVErrorCode.RivieraDataFetchFailure,e.message)}),T.PreviewsEventLogger.mark(T.PreviewsTimingEvents.FVSDK_GET_RIVIERA_DATA),this.hasFileFlipped(Y))return;const m=U.getState().rivieraData[Y.serialized];let P;if(m&&(P=m.error,P&&(null==P?void 0:P.statusCode)!==f.RivieraStatus.PasswordProtected)){if(null==(null==P?void 0:P.statusCode)||!navigator.onLine)throw new I.FVError(I.FVErrorCode.UserOffline,"There is a network connectivity issue");throw new I.FVError(I.FVErrorCode.RivieraDataFetchFailure,`Riviera Failure, status code "${P.statusCode}"`)}if(U.dispatch((0,u.logSessionEvent)({event:_.SessionEventType.FilePreviewDownloadSucceeded,fileViewerId:H,previewSessionId:q,extra:{preview_type:b}})),U.dispatch((0,r.setBootstrappedFile)({fileViewerId:H,previewKey:Y})),B.log_views_to_pass){const e={file_views:[{file_info:{file_identifier:t,shared_link_details:A?{url:A.url}:void 0},platform_type:{".tag":(0,y.is_android)()&&(0,y.is_supported_mobile_browser)()?"mobile_android":y.iphone?"mobile_ios":"web"}}]};z?U.dispatch((0,E.logFileViewAction)({arg:e})):U.dispatch((0,E.loggedOutLogFileViewAction)({arg:e}))}try{(0,w.initializePASSPresence)(U,t),yield this.pluginManager.loadPlugins(),this.pluginManager.setActiveEditPlugin(Y,S),this.pluginManager.triggerPluginsPreviewDidInitialize(L),T.PreviewsEventLogger.mark(T.PreviewsTimingEvents.FVSDK_PLUGINS_INITIALIZED)}catch(e){U.dispatch((0,u.logSessionEvent)({event:_.SessionEventType.LifecycleFailure,fileViewerId:this.fileViewerId,previewSessionId:q,extra:{e:e}}))}this.pluginManager.subscribeToPluginActivation(q)}catch(e){switch((0,v.isFVError)(e)||(e=new I.FVError(I.FVErrorCode.Unknown)),e.type){case I.FVErrorCode.PreviewsDataApiFailure:case I.FVErrorCode.NoExtension:case I.FVErrorCode.InvalidFileInfo:case I.FVErrorCode.UnsupportedPreviewType:case I.FVErrorCode.MalformedPreviewsDataApiResponse:case I.FVErrorCode.FileTooLarge:U.dispatch((0,u.logSessionEvent)({event:_.SessionEventType.FilePreviewSupportDenied,fileViewerId:this.fileViewerId,previewSessionId:q,extra:{error_code:I.FVErrorCode[e.type]}}));break;default:U.dispatch((0,u.logSessionEvent)({event:_.SessionEventType.FilePreviewDownloadFailed,fileViewerId:this.fileViewerId,previewSessionId:q,extra:{error_code:I.FVErrorCode[e.type]}}))}const t=null===(i=(0,h.getCurrentFile)(U.getState(),H))||void 0===i?void 0:i.previewKey;if(!t)return;U.dispatch((0,r.setErroredFile)({fileViewerId:H,previewKey:t,error:e})),U.dispatch((0,r.setPreviewLoadingAction)({isPreviewLoading:!1})),yield this.pluginManager.loadPlugins(),this.pluginManager.setActiveEditPlugin(t,void 0),this.pluginManager.triggerPluginsPreviewDidError(e)}this.pluginManager.setDefaultRightRailPlugin(Y,F),T.PreviewsEventLogger.mark(T.PreviewsTimingEvents.FVSDK_INITIALIZE_COMPLETE)})),this.getStaticProps=e=>{const{store:t,intl:i,config:r,platformConfig:a,callbacks:s,canCloseViewer:o}=this.platformProps,l=this.pluginManager.queryBus,c=this.pluginManager.navigation,d=this.pluginManager.context,p=this.pluginManager.triggerPluginsPreviewDidMarkTti,u=this.handleAppDestroy,_=this.handleAppMount,v=this.sdkBatteries;return{store:t,intl:i,id:this.fileViewerId,callbacks:s,config:r,canCloseViewer:o,pluginQueryBus:l,pluginNavigation:c,pluginContext:d,onTtiMarked:p,onDestroy:u,onMount:_,batteries:v,platformConfig:a,fileConfig:Object.assign(Object.assign({},n.DEFAULT_FILE_CONFIG),e.fileConfig),isLoggedIn:e.isLoggedIn}},this.getAppProps=()=>{if(!this.initializeOpts)throw new Error("File Viewer not initialized");const{pluginInstances:e,rightRailPluginInstances:t}=this.pluginManager.getPluginInstances();return{pluginInstances:e,rightRailPluginInstances:t}},this.doTeardown=()=>i.__awaiter(this,void 0,void 0,(function*(){this.endSession(),yield this.pluginManager.doTeardown()})),this.endSession=()=>{var e;if(this.sessionActive){this.sessionActive=!1;const{store:t}=this.platformProps,i=null===(e=t.getState().loggingSession[this.fileViewerId])||void 0===e?void 0:e.file_preview_session_id,r=(0,h.getCurrentFile)(t.getState(),this.fileViewerId),a=T.PreviewsEventLogger.getEventTimelineWithStartTime();i&&t.dispatch((0,u.logSessionEvent)({event:_.SessionEventType.FilePreviewSessionEnded,fileViewerId:this.fileViewerId,previewSessionId:i,extra:Object.keys(a).length?{timeline:JSON.stringify(a)}:void 0})),(null==r?void 0:r.file_id)&&(0,w.teardownPASSPresence)(t,r.file_id)}T.PreviewsEventLogger.endCurrentSession()},this.handleAppDestroy=()=>i.__awaiter(this,void 0,void 0,(function*(){this.mounted=!1,yield this.doTeardown()})),this.handleAppMount=()=>{this.mounted=!0},this.cleanup=()=>{window.removeEventListener("beforeunload",this.endSession)};const L=(0,a.v4)();this.fileViewerId=L,this.platformProps=e,this.apiv2ClientBase=t,this.sdkBatteries=S;const{store:C}=e;this.store=C,this.pluginManager=new P.PluginManager(e,t,F,L,this.reinitialize),this.pluginManager.loadPlugins(),C.dispatch((0,o.getCurrentAccountAction)({arg:void 0,params:{}})),C.dispatch((0,o.getRootInfoAction)({arg:void 0})),window.addEventListener("beforeunload",this.endSession,{once:!0}),T.PreviewsEventLogger.mark(T.PreviewsTimingEvents.FVSDK_CONSTRUCTOR)}}})),define("typescript/libraries/file-viewer/src/file_viewer/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultPlatformConfig=void 0,t.defaultPlatformConfig={osModifierKey:"ctrlKey"}})),define("typescript/libraries/file-viewer/src/file_viewer/plugin_manager",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/plugins/types","typescript/libraries/file-viewer/src/plugins/queries","typescript/libraries/file-viewer/src/plugins/context","typescript/libraries/file-viewer/src/plugins/navigation","typescript/libraries/file-viewer/src/core/data/preview_key","typescript/libraries/file-viewer/src/core/data/store_utils","typescript/libraries/file-viewer/src/plugins/selectors/active_plugin","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PluginManager=void 0;t.PluginManager=class{constructor(e,t,p,u,_){this.instances={},this.rightRailInstances={},this.loadPlugins=()=>i.__awaiter(this,void 0,void 0,(function*(){const e={},t={};this.instances=e,this.rightRailInstances=t,(yield Promise.all(this.wrappedPluginLoaders.map(e=>e.load()))).forEach(i=>{if(i){const[r,a]=i;e[r]=a,(0,s.isRightRailPlugin)(a)&&(t[r]=a)}})})),this.wrapPluginLoader=e=>{const t=e.pluginId,{intl:r}=this.platformProps,n={intl:r,apiv2ClientBase:this.apiv2ClientBase};let s=null,o=null;const l=()=>i.__awaiter(this,void 0,void 0,(function*(){if(s)return[t,s];const i=performance.now();return s=yield e.load(n,this.context),this.store.dispatch((0,a.logDuration)({eventName:"plugin_load_ms",duration:performance.now()-i,fileViewerId:this.fileViewerId,tags:{pluginName:t}})),[t,s]}));return{load:()=>e.isEnabled&&!e.isEnabled(this.context)?Promise.resolve(null):(o||(o=l()),o)}},this.exitPluginEditMode=()=>i.__awaiter(this,void 0,void 0,(function*(){this.store.dispatch((0,r.setActiveEditPlugin)({fileViewerId:this.fileViewerId,sourceContext:n.UserActionContext.RightRail,pluginId:void 0}))})),this.hideContentPane=e=>{this.store.dispatch((0,r.hideContentPane)({fileViewerId:this.fileViewerId,sourceContext:n.UserActionContext.Toolbar,pluginId:e}))},this.updatePreviewMetadata=(e,t)=>{const i=e.file_id,a=e.sj_id,n=e.ns_id,s=e.url,o=(0,d.getPreviewKey)(i,n,a,s);t&&o&&this.store.dispatch((0,r.setPreviewMetadata)(Object.assign(Object.assign({},t),{previewKey:o})))},this.setPluginActivationParams=e=>{this.pluginActivationParams=e},this.clearPluginActivationParams=()=>{this.pluginActivationParams=void 0},this.triggerPluginsPreviewDidRender=()=>i.__awaiter(this,void 0,void 0,(function*(){var e,t;for(const i of Object.values(this.instances))null===(t=null===(e=i.lifecycle)||void 0===e?void 0:e.previewDidRender)||void 0===t||t.call(e)})),this.triggerPluginsPreviewDidMarkTti=()=>i.__awaiter(this,void 0,void 0,(function*(){var e,t;for(const i of Object.values(this.instances))null===(t=null===(e=null==i?void 0:i.lifecycle)||void 0===e?void 0:e.previewDidMarkTTI)||void 0===t||t.call(e)})),this.reinitializeFileViewer=e=>i.__awaiter(this,void 0,void 0,(function*(){this.reinitialize(e)})),this.getPluginInstances=()=>({pluginInstances:this.instances,rightRailPluginInstances:this.rightRailInstances}),this.doTeardown=()=>i.__awaiter(this,void 0,void 0,(function*(){var e;const t=null===(e=this.store.getState().loggingSession[this.fileViewerId])||void 0===e?void 0:e.file_preview_session_id;try{this.triggerPluginDidDeactivateForCurrent()}catch(e){t&&this.store.dispatch((0,a.logSessionEvent)({event:n.SessionEventType.LifecycleFailure,fileViewerId:this.fileViewerId,previewSessionId:t,extra:{e:e}}))}this.unsubscribeFromPluginActivation&&this.unsubscribeFromPluginActivation();try{yield this.triggerPluginsPreviewWillTeardown()}catch(e){t&&this.store.dispatch((0,a.logSessionEvent)({event:n.SessionEventType.LifecycleFailure,fileViewerId:this.fileViewerId,previewSessionId:t,extra:{e:e}}))}})),this.fileViewerId=u,this.platformProps=e,this.apiv2ClientBase=t,this.reinitialize=_;const{store:v,config:f,showAuthModal:g,canCloseViewer:E}=e;this.store=v,this.navigation=(0,c.makeNavigation)({store:v,fileViewerId:u,reinitializeFileViewer:this.reinitializeFileViewer,exitPluginEditMode:this.exitPluginEditMode,hideContentPane:this.hideContentPane,updatePreviewMetadata:this.updatePreviewMetadata,setPluginActivationParams:this.setPluginActivationParams,showAuthModal:g,canCloseViewer:E}),this.context=(0,l.makePluginContext)({store:this.store,sdkConfig:f,fileViewerId:this.fileViewerId,reinitializeFileViewer:this.reinitializeFileViewer,exitPluginEditMode:this.exitPluginEditMode,hideContentPane:this.hideContentPane,updatePreviewMetadata:this.updatePreviewMetadata,setPluginActivationParams:this.setPluginActivationParams}),this.wrappedPluginLoaders=p.map(this.wrapPluginLoader),this.queryBus=new o.PluginQueryBus({getPageForSelection:()=>{}})}getPluginByName(e){return e&&this.instances&&this.instances[e]?this.instances[e]:null}getActivePluginInstance(){const e=(0,u.getActivePluginId)(this.store.getState(),this.fileViewerId);return this.getPluginByName(e)}setDefaultRightRailPlugin(e,t){var a;return i.__awaiter(this,void 0,void 0,(function*(){if(this.defaultPlugin=t,!(0,_.isRightRailOpen)(this.store.getState(),this.fileViewerId))return;if((0,u.getSelectedRightRailPluginId)(this.store.getState(),this.fileViewerId))return;const e=this.rightRailInstances?Object.keys(this.rightRailInstances)[0]:void 0;this.store.dispatch((0,r.setActiveRightRailPlugin)({fileViewerId:this.fileViewerId,sourceContext:n.UserActionContext.Initialization,pluginId:null!==(a=this.defaultPlugin)&&void 0!==a?a:e,skipLogging:!0}))}))}setActiveEditPlugin(e,t){return i.__awaiter(this,void 0,void 0,(function*(){this.store.dispatch((0,r.setActiveEditPlugin)({fileViewerId:this.fileViewerId,sourceContext:n.UserActionContext.Initialization,pluginId:t}))}))}triggerPluginDidDeactivateForCurrent(){const e=this.getActivePluginInstance();e&&e.lifecycle&&e.lifecycle.pluginDidDeactivate&&e.lifecycle.pluginDidDeactivate()}subscribeToPluginActivation(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=this.fileViewerId;this.unsubscribeFromPluginActivation=(0,p.observeStore)(this.store,e=>(0,u.getActivePluginId)(e,t),(t,i)=>{const r=this.getPluginByName(t);if(r&&r.lifecycle&&r.lifecycle.pluginDidDeactivate)try{r.lifecycle.pluginDidDeactivate()}catch(t){this.store.dispatch((0,a.logSessionEvent)({event:n.SessionEventType.LifecycleFailure,fileViewerId:this.fileViewerId,previewSessionId:e,extra:{e:t}}))}const s=this.getPluginByName(i);if(s&&r!==s&&s.lifecycle&&s.lifecycle.pluginDidActivate){try{s.lifecycle.pluginDidActivate(this.pluginActivationParams)}catch(t){this.store.dispatch((0,a.logSessionEvent)({event:n.SessionEventType.LifecycleFailure,fileViewerId:this.fileViewerId,previewSessionId:e,extra:{e:t}}))}this.clearPluginActivationParams()}})}))}triggerPluginsPreviewDidInitialize(e){var t,i;for(const r of Object.values(this.instances))null===(i=null===(t=r.lifecycle)||void 0===t?void 0:t.previewDidInitialize)||void 0===i||i.call(t,e)}triggerPluginsPreviewWillTeardown(){var e,t;for(const i of Object.values(this.instances))null===(t=null===(e=i.lifecycle)||void 0===e?void 0:e.previewWillTeardown)||void 0===t||t.call(e)}triggerPluginsPreviewDidError(e){var t,i;for(const r of Object.values(this.instances))null===(i=null===(t=r.lifecycle)||void 0===t?void 0:t.previewDidError)||void 0===i||i.call(t,e)}}})),define("typescript/libraries/file-viewer/src/preview_archive/archive_snack_bar",["require","exports","tslib","react","react-intl","dig-components/snackbar","dig-components/progress_indicators","dig-components/icons","dig-components/icons/src","dig-components/buttons","typescript/libraries/file-viewer/src/preview_archive/preview_archive.module.css","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/hooks/use_toolbar_override","react-redux"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArchiveSnackBar=void 0,r=i.__importStar(r),d=i.__importStar(d);t.ArchiveSnackBar=e=>{const t=e.filePreviewUiData.extractAllSnackbarState,i=(0,a.useIntl)(),v=(0,_.useDispatch)(),{fileViewerId:f,previewKey:g}=e,E=r.useCallback(()=>v((0,p.updateArchiveExtractAllSnackbarState)({extractAllSnackbarState:null,fileViewerId:f,previewKey:g})),[v,f,g]);if((0,u.useOverrideToolbar)(f,t?"hidden":void 0),!t)return null;let w;if("pending"===t.state)w=r.createElement(n.Snackbar,{open:!0,timeout:0},r.createElement(s.Spinner,{"aria-valuetext":"Loading",size:"small",inverse:!0}),r.createElement(n.Snackbar.Message,null,i.formatMessage({id:"Cdmrh0",defaultMessage:"Extracting files..."})));else if("loaded"===t.state){const e=()=>{v((0,p.openFileURL)({fqPath:t.data}))};w=r.createElement(n.Snackbar,{open:!0,timeout:0},r.createElement(o.UIIcon,{src:l.CheckmarkCircleLine}),r.createElement(n.Snackbar.Message,null,i.formatMessage({id:"Qs0be2",defaultMessage:"Files extracted to {folder} in your main Dropbox folder"},{folder:t.data})),r.createElement(n.Snackbar.Actions,null,r.createElement(c.Button,{variant:"transparent",inverse:!0,onClick:e},i.formatMessage({id:"SliIKT",defaultMessage:"Open"})),r.createElement(c.Button,{variant:"transparent",inverse:!0,onClick:E},i.formatMessage({id:"1dhg8/",defaultMessage:"Close"}))))}else w=r.createElement(n.Snackbar,{open:!0,timeout:0},r.createElement(o.UIIcon,{src:l.FailLine}),r.createElement(n.Snackbar.Message,null,i.formatMessage({id:"Jh3TK7",defaultMessage:"Couldn't extract files"})),r.createElement(n.Snackbar.Actions,null,r.createElement(c.Button,{variant:"transparent",inverse:!0,onClick:E},i.formatMessage({id:"1dhg8/",defaultMessage:"Close"}))));return r.createElement("div",{className:d.snackBar},w)}})),define("typescript/libraries/file-viewer/src/right_rail/right_rail",["require","exports","tslib","react","typescript/component_libraries/files_components/src/right-rail/right_rail","react-redux","typescript/libraries/file-viewer/src/right_rail/right_rail.module.css","typescript/libraries/file-viewer/src/plugins/data","typescript/libraries/file-viewer/src/plugins/props","typescript/libraries/file-viewer/src/plugins/selectors/active_plugin","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/logging/performance","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/ui/animations","typescript/libraries/file-viewer/src/hooks/selectors"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewRightRail=t.NOOP=void 0,r=i.__importStar(r),s=i.__importStar(s);t.NOOP=()=>{},t.PreviewRightRail=r.default.memo(({fileViewerId:e,fileName:i,pluginInstances:g,pluginNavigation:E,pluginQueryBus:w,height:b})=>{const m=(0,n.useDispatch)();(0,u.useMarkTimingEventOnMount)(u.PreviewsTimingEvents.FVSDK_RIGHT_RAIL_MOUNT);const h=(0,f.useFileViewerSelector)(e,d.isRightRailOpen),y=(0,n.useSelector)(t=>E&&(0,o.getPluginData)(t,{fileViewerId:e,navigation:E})),P=(0,n.useSelector)(t=>(0,l.makePluginProps)(t,e,y,w)),T=(0,n.useSelector)(t=>(0,l.makePluginControlProps)(t,e,y,w)),I=r.default.useRef(null),F=(0,f.useFileViewerSelector)(e,d.getIsEditingVideo),S=e=>{var t;return void 0===e[1].rightRailUI.isBladeSupported||!P||P&&P.file&&(null===(t=e[1].rightRailUI)||void 0===t?void 0:t.isBladeSupported(P.file))},L=(0,n.useSelector)(t=>{var i;const r=(0,c.getSelectedRightRailPluginId)(t,e),a=g&&Object.entries(g).find(e=>e[0]===r);if(a&&!S(a)){const t=Object.entries(g).filter(S),i=null==t?void 0:t[0];i&&m((0,p.setActiveRightRailPlugin)({fileViewerId:e,sourceContext:_.UserActionContext.Default,pluginId:i[0]}))}return r||g&&(null===(i=Object.keys(g))||void 0===i?void 0:i[0])}),C=r.default.useCallback(t=>{t===L&&h||m((0,p.setActiveRightRailPlugin)({pluginId:t,fileViewerId:e,sourceContext:_.UserActionContext.RightRail}))},[m,e,L,h]),A=r.default.useCallback(()=>{const t={fileViewerId:e,sourceContext:_.UserActionContext.RightRail};m((0,p.openRightRail)(t))},[m,e]),O=(0,r.useCallback)(()=>{m((0,p.closeRightRail)({fileViewerId:e,sourceContext:_.UserActionContext.RightRail}))},[m,e]),x=r.default.useCallback(e=>{C(e),A()},[C,A]);if(void 0===h)return null;if(void 0===g||null===P||void 0===T||void 0===L)return r.default.createElement("div",{style:{height:b},className:s.previewRightRailWrapper},r.default.createElement("div",{className:h?s.skeletonExpanded:s.skeletonCollapsed}));const D=Object.entries(g).map(([e,{rightRailUI:{Sidebar:t}}])=>r.default.createElement(t,Object.assign({},P,{key:`plugin-sidebar-${e}`}))),R=Object.entries(g).map(([e,{rightRailUI:{Control:i}}])=>r.default.createElement(i,Object.assign({},T,{isSelectedPlugin:e===L,onClick:t.NOOP,key:`plugin-control-${e}`})));return r.default.createElement("div",{style:{height:b},className:s.previewRightRailWrapper,"data-testid":"fv-sdk-right-rail"},r.default.createElement(a.RightRail.RightRailWrapper,{isExpanded:h,withTitle:i,onCollapse:O,expandedBlade:L,className:s.rightRailContainer,onExpandBlade:h?C:x,onExpand:A,expandedChildren:D,collapsedChildren:R}),r.default.createElement(v.OverlayAnimation,{nodeRef:I,active:F,mount:!0},r.default.createElement("div",{ref:I,className:s.overlay})))}),t.PreviewRightRail.displayName="PreviewRightRail",t.PreviewRightRail.displayName="PreviewRightRail"})),define("typescript/libraries/file-viewer/src/right_rail/download_dropdown",["require","exports","tslib","react","dig-components/buttons","dig-components/menu","dig-components/tooltips","dig-components/icons","dig-components/icons/src","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/utils/loadable","react-intl","react-redux"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadDropdown=t.normalize=void 0,r=i.__importStar(r);function v(e){return e?("/"!==e.charAt(0)&&(e=`/${e}`),"/"===e.charAt(e.length-1)?e.substr(0,e.length-1):e):""}t.normalize=v;t.DownloadDropdown=({fileViewerId:t,fileId:g,previewKey:E,canDownload:w,copyTargets:b,useTextButton:m,extractConfig:h,useOutlineButton:y})=>{var P,T;const I=(0,u.useIntl)(),F=(0,_.useDispatch)(),S=()=>{F((0,d.downloadFile)({previewKey:E,fileViewerId:t,sourceContext:c.UserActionContext.RightRail}))},L=e=>()=>{F((0,d.copyToDropbox)({previewKey:E,fileViewerId:t,sourceContext:c.UserActionContext.RightRail,role:e}))},C=I.formatMessage({id:"Mran8D",defaultMessage:"Download"}),A=()=>i.__awaiter(void 0,void 0,void 0,(function*(){F((0,d.updateArchiveExtractAllSnackbarState)({extractAllSnackbarState:(0,p.makePendingLoadableData)(),fileViewerId:t,previewKey:E}));const{unzipAction:r}=yield new Promise((t,i)=>{e(["typescript/libraries/api_v2/redux/flows"],t,i)}).then(i.__importStar);F(r({arg:{file:{identifier:{file_id:g,".tag":"file_id"}}}},{previewKey:E,fileViewerId:t}))})),O=h.canExtract&&w?(e=>{let t;switch(null==e?void 0:e[".tag"]){case"cdm_team":const i=(function(e,t){const i=(e=v(e)).split("/").pop();return i||(t||"Dropbox")})(e.home_path);t=i.length>12?I.formatMessage({id:"TAv+z6",defaultMessage:"Extract to my member folder"}):I.formatMessage({id:"53+pL4",defaultMessage:"Extract to {cdm_tmf_name} folder"},{cdm_tmf_name:i});break;case"not_on_cdm_team":default:t=I.formatMessage({id:"v021UF",defaultMessage:"Extract to my Dropbox"})}return{text:t,value:A,disabled:!1,key:"decompress"}})(h.rootInfo):void 0,x=[w?{text:C,value:S,disabled:!1,key:"download"}:void 0,...b.map(({text:e,isDisabled:t,role:i})=>({text:e,value:L(i),disabled:t,key:e})),O].filter(Boolean);if(1===x.length)return r.createElement(a.Button,{onClick:null===(P=x[0])||void 0===P?void 0:P.value,variant:"outline"},null===(T=x[0])||void 0===T?void 0:T.text);const D=x.map(e=>e?r.createElement(n.Menu.ActionItem,{id:"download-menu-item",key:e.key,value:e.value,disabled:e.disabled},e.text):null);return m?r.createElement(a.SplitButton,{variant:y?"outline":"primary",renderMenu:f(D,I.formatMessage({id:"zeKy1a",defaultMessage:"More download options"})),onClick:S},C):r.createElement(n.Menu.Wrapper,{key:"download-dropdown-menu",onSelection:e=>{e()}},({getContentProps:e,getTriggerProps:t,triggerRef:i})=>r.createElement(r.Fragment,null,r.createElement(s.Tooltip,{placement:"left",title:C,triggerRef:i},r.createElement(a.IconButton,Object.assign({},t(),{variant:"transparent","aria-label":C}),r.createElement(o.UIIcon,{src:l.DownloadLine}))),r.createElement(n.Menu.Content,Object.assign({},e()),r.createElement(n.Menu.Segment,null,D))))},t.DownloadDropdown.displayName="DownloadDropdown";const f=(e,t)=>({buttonProps:i})=>r.createElement(n.Menu.Wrapper,{key:"download-dropdown-menu",onSelection:e=>{e()}},({getContentProps:s,getTriggerProps:o})=>r.createElement(r.Fragment,null,r.createElement(a.Button,Object.assign({},o(),i,{"aria-label":t})),r.createElement(n.Menu.Content,Object.assign({},s()),r.createElement(n.Menu.Segment,null,e))));t.DownloadDropdown.displayName="DownloadDropdown"})),define("metaserver/static/js/logging/hive/schemas/web-file_previews",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebFilePreviewsLoggingRow=void 0;t.WebFilePreviewsLoggingRow=class{constructor(e){this.category="web-file_previews",this.active_user_id=null,this.anon_ip=null,this.authed_user_ids=null,this.identity_gid=null,this.locale_browser_header=null,this.locale_user_selected=null,this.referrer=null,this.session_id=null,this.team_id=null,this.team_type=null,this.ua_browser_name=null,this.ua_browser_version=null,this.ua_dist_name=null,this.ua_dist_version=null,this.ua_os_name=null,this.ua_os_version=null,this.user_agent=null,this.user_id=null,this.device_type=e.device_type,this.event_name=e.event_name,this.extra=e.extra,this.file_extension=e.file_extension,this.file_last_edit_ts=e.file_last_edit_ts,this.file_obj_id=e.file_obj_id,this.file_preview_session_id=e.file_preview_session_id,this.file_preview_size=e.file_preview_size,this.file_sf_status=e.file_sf_status,this.file_size=e.file_size,this.file_viewer_session_id=e.file_viewer_session_id,this.is_starred=e.is_starred,this.ns_id=e.ns_id,this.sj_id=e.sj_id,this.x_dropbox_path=e.x_dropbox_path,this.timestamp=Date.now()/1e3|0,Object.seal(this)}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/hooks",["require","exports","tslib","react","react-redux","@reduxjs/toolkit","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/home/resource_id_types","metaserver/static/js/starred/browse_exports","metaserver/static/js/core/i18n","dig-components/icons/src","typescript/libraries/file-viewer/src/hooks/useStabilizedCallback","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils","metaserver/static/js/file_store/utils","metaserver/static/js/starred/redux/selectors","metaserver/static/js/starred/redux/slice","metaserver/static/js/starred/utils","metaserver/static/js/capture/api","metaserver/static/js/capture/redux/actions","metaserver/static/js/capture/redux/selectors"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f,g,E,w,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useCaptureForFile=t.useCaptureAccess=t.isStarringEnabled=t.useStarControl=void 0,t.useStarControl=function({getActiveFile:e,onToggle:t}){const{file:u}=e(),_=(0,a.useDispatch)(),E=(0,a.useSelector)(e=>(0,v.getIsStarred)(e,u.file_id));(0,r.useEffect)(()=>{_((0,f.fetchMissingStarredStatuses)([{id:u.file_id,type:o.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID}]))},[u]);const w=(0,r.useCallback)(()=>i.__awaiter(this,void 0,void 0,(function*(){null==t||t();const e=yield _((0,f.updateStarredStatus)({id:u.file_id,newStatus:!E,showSnackbar:!1}));try{(0,n.unwrapResult)(e),(0,g.displayStarSnackbar)({itemName:(0,l.itemNameFromStarrableItem)(u),isStarred:!E,success:!0})}catch(e){(0,g.displayStarSnackbar)({itemName:(0,l.itemNameFromStarrableItem)(u),isStarred:!E,success:!1})}})),[t,_,u,E]),b=(0,p.useStabilizedCallback)(e=>{e.preventDefault(),e.stopPropagation(),w()}),m=(0,p.useStabilizedCallback)(e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),w())});return{message:c.intl.formatMessage(E?s.UNSTAR_ACTION_STRING:s.STAR_ACTION_STRING),iconSrc:E?d.StarFill:d.StarLine,handleClick:b,handleKeyPress:m}},t.isStarringEnabled=function(e){return(0,u.isLiveFile)(e)&&!(0,_.isSharedFile)(e)&&!(0,u.isInsideVaultFolder)(e)},t.useCaptureAccess=function(e){const t=(0,a.useDispatch)(),i=(0,a.useSelector)(e=>(0,b.getCaptureAccess)(e));return(0,r.useEffect)(()=>{e&&void 0===i&&(0,E.fetchCaptureAccess)(e).then(e=>t((0,w.setCaptureAccess)(e)))},[i,t,e]),i},t.useCaptureForFile=function(e,t){const i=(0,a.useDispatch)(),{fileId:n,shortLabel:s}=(0,a.useSelector)(e=>(0,b.getCaptureFileVoiceover)(e));return(0,r.useEffect)(()=>{n!==t.file_id&&(0,E.fetchCaptureFileAssociation)(e,t).then(e=>{i((0,w.setCaptureFileVoiceover)(e))})},[t,e,i,n]),t.file_id===n?{fileId:n,shortLabel:s}:{}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/version_history_plugin",["require","exports","tslib","react","metaserver/static/js/core/i18n","dig-components/icons","dig-components/icons/src","metaserver/static/js/action_bar/file_actions/portable/utils","metaserver/static/js/core/browser","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/clean/browse_interface","metaserver/static/js/file_store/utils","metaserver/static/js/cloud_docs/open_with_utils","metaserver/static/js/cloud_docs/constants","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils","metaserver/static/js/sync_everything/constants","metaserver/static/js/file_viewer/sdk_file_viewer/utils"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeVersionHistoryActionLoader=void 0,r=i.__importDefault(r),l=i.__importStar(l);t.makeVersionHistoryActionLoader=(e,t,i)=>({actionDefinitions:()=>{const{file:E}=e();if(!t||!(0,p.isBrowseFile)(E)||(0,u.isCloudBasedDoc)(E)||(0,_.isPointerByExtension)(E.fq_path)||(0,v.isPnmLinkNodeSelected)(E)||!(0,v.isLiveFile)(E))return{};let w="";return w=(0,f.isBackupBrowse)()?(0,d.getFileHistoryUrlForNsPath)({nsPath:E.ns_path,nsId:E.ns_id,userId:t.id},{inside_backup:"true",return_url:l.get_href()}):(0,d.getFileHistoryUrl)({fqPath:E.fq_path,userId:t.id}),{alwaysInOverflow:[[(0,o.makePluginActionDefinition)({label:a.intl.formatMessage(c.VERSION_HISTORY_ACTION_STRING),icon:r.default.createElement(n.UIIcon,{src:s.ClockLine}),id:g.VERSION_HISTORY_ACTION_PLUGIN_ID,action:()=>{i.logUserAction("version_history","title_bar_button"),l.redirect(w)}})]]}}})})),define("typescript/libraries/file-viewer/src/keyboard/bindings",["require","exports","tslib","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/data/actions","ts-key-enum","typescript/libraries/file-viewer/src/core/utils/browser_detection"],(function(e,t,i,r,a,n,s){"use strict";function o(e){return null!=e&&null!=e.preventDefault}function l(e){return function(t){e(),o(t)&&t.preventDefault()}}function c({dispatch:e,fileViewerId:t,previewKey:i,requireCommandKey:s,fileIndex:o}){if(0===o)return[];const c=l(()=>{e((0,a.flipToPreviousFile)({fileViewerId:t,previewKey:i,sourceContext:r.UserActionContext.Keyboard}))}),d={keyboardEventCriteria:{key:n.Key.ArrowLeft,osModifierKey:!0},callback:c};return s?[d]:[{keyboardEventCriteria:{key:n.Key.ArrowLeft},callback:c},d]}function d({dispatch:e,fileViewerId:t,previewKey:i,requireCommandKey:s,fileIndex:o,collectionFileCount:c}){if(o===c-1)return[];const d=l(()=>{e((0,a.flipToNextFile)({fileViewerId:t,previewKey:i,sourceContext:r.UserActionContext.Keyboard}))}),p={keyboardEventCriteria:{key:n.Key.ArrowRight,osModifierKey:!0},callback:d};return s?[p]:[{keyboardEventCriteria:{key:n.Key.ArrowRight},callback:d},p]}function p(e){return{keyboardEventCriteria:{key:n.Key.PageDown},callback:l(e)}}function u(e){return{keyboardEventCriteria:{key:n.Key.ArrowDown},callback:l(e)}}function _(e){return[{keyboardEventCriteria:{key:"-",osModifierKey:!0},callback:l(e)}]}function v(e){return{keyboardEventCriteria:{key:n.Key.End},callback:l(e)}}function f({key:e,callback:t,shift:i,osModifierKey:r}){return{keyboardEventCriteria:{key:e,shiftKey:i||!1,osModifierKey:r||!1},callback:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.getKeyboardBinding=t.getDeleteFileBindings=t.getEscapeBinding=t.getBrowserFindBinding=t.getFindInDocBinding=t.getHomeEndBindings=t.getZoomInOutBindings=t.getUpDownBindings=t.getPageUpDownBindings=t.getFileFlippingBindings=t.isKeyboardEvent=void 0,s=i.__importStar(s),t.isKeyboardEvent=o,t.getFileFlippingBindings=function(e){return[...d(e),...c(e)]},t.getPageUpDownBindings=function({pageUp:e,pageDown:t}){return[(i=e,{keyboardEventCriteria:{key:n.Key.PageUp},callback:l(i)}),p(t)];var i},t.getUpDownBindings=function({up:e,down:t}){return[(i=e,{keyboardEventCriteria:{key:n.Key.ArrowUp},callback:l(i)}),u(t)];var i},t.getZoomInOutBindings=function({zoomIn:e,zoomOut:t}){return[...(i=e,[{keyboardEventCriteria:{key:"+",osModifierKey:!0},callback:l(i)}]),..._(t)];var i},t.getHomeEndBindings=function({home:e,end:t}){return[(i=e,{keyboardEventCriteria:{key:n.Key.Home},callback:l(i)}),v(t)];var i},t.getFindInDocBinding=function(e){return{keyboardEventCriteria:{key:"f",osModifierKey:!0},callback:l(e)}},t.getBrowserFindBinding=function(e){return{keyboardEventCriteria:{key:"f",osModifierKey:!0},callback:e}},t.getEscapeBinding=function(e){return{keyboardEventCriteria:{key:n.Key.Escape},callback:l(e)}},t.getDeleteFileBindings=function(e){const t=f({key:n.Key.Delete,callback:()=>{e(n.Key.Delete)}}),i=f({key:n.Key.Backspace,callback:()=>{e(n.Key.Backspace)}});return s.mac?[t,i]:[t]},t.getKeyboardBinding=f})),define("typescript/libraries/file-viewer/src/keyboard/context",["require","exports","tslib","react"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardBindingContext=void 0,r=i.__importStar(r);const a=()=>{};t.KeyboardBindingContext=r.createContext({registerKeyBindings:a,unregisterKeyBindings:a}),t.KeyboardBindingContext.displayName="KeyboardBindingContext"})),define("typescript/libraries/file-viewer/src/keyboard/keyboard_binding_map",["require","exports","typescript/libraries/file-viewer/src/keyboard/keyboard_binding"],(function(e,t,i){"use strict";function r(e){return i.NormalizedKeyboardEventCriteriaKeys.map(t=>`${t}:${e[t]}`).join("")}function a(e,t){return(function(e,t){return e.reduce((e,{keyboardEventCriteria:i,callback:r})=>(e[t(i)]=r,e),{})})(e,e=>(function(e,t){return r((0,i.normalizeKeyboardEventCriteria)(e,t))})(e,t))}Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardBindingMap=void 0;t.KeyboardBindingMap=class{constructor(e,t){this.bindingDict={},this.bindingDict=a(e,t)}getCallbackForEvent(e){const t=(0,i.normalizeKeyboardEvent)(e);return this.bindingDict[r(t)]}}})),define("typescript/libraries/file-viewer/src/keyboard/keyboard_binding",["require","exports","ts-key-enum"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeKeyboardEventCriteria=t.normalizeKeyboardEvent=t.NormalizedKeyboardEventCriteriaKeys=t.genericNormalizedKeyboardEventCriteria=void 0,t.genericNormalizedKeyboardEventCriteria={altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,key:i.Key.Unidentified},t.NormalizedKeyboardEventCriteriaKeys=Object.keys(t.genericNormalizedKeyboardEventCriteria),t.normalizeKeyboardEvent=function(e){return{altKey:!0===e.altKey,ctrlKey:!0===e.ctrlKey,metaKey:!0===e.metaKey,shiftKey:!0===e.shiftKey,key:e.key}},t.normalizeKeyboardEventCriteria=function(e,t){return{altKey:!0===e.altKey,shiftKey:!0===e.shiftKey,key:e.key,ctrlKey:!1,metaKey:!1,[t]:!0===e.osModifierKey}}})),define("typescript/libraries/file-viewer/src/keyboard/keyboard_connector",["require","exports","tslib","react","typescript/libraries/file-viewer/src/keyboard/context"],(function(e,t,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardBindingConnector=void 0,r=i.__importStar(r);t.KeyboardBindingConnector=e=>{const{keyboardBindings:t,name:i,scope:n}=e,s=r.useRef(i),o=r.useRef(n||!1),l=r.useContext(a.KeyboardBindingContext);return r.useEffect(()=>(l.registerKeyBindings(t,s.current,o.current),()=>{l.unregisterKeyBindings(s.current,o.current)}),[t]),null},t.KeyboardBindingConnector.displayName="KeyboardBindingConnector"})),define("typescript/libraries/file-viewer/src/keyboard/keyboard_provider",["require","exports","tslib","react","lodash","typescript/libraries/file-viewer/src/keyboard/keyboard_binding_map","typescript/libraries/file-viewer/src/keyboard/context"],(function(e,t,i,r,a,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardBindingProvider=void 0,r=i.__importStar(r);t.KeyboardBindingProvider=e=>{const{disableBindings:t,children:i,osModifierKey:o}=e,l=r.useRef({}),c=r.useRef("default"),d=r.useRef(null),p=r.useCallback((e,t,i)=>{if(l.current[i]||(l.current[i]={}),e){if(l.current[i][t])throw new Error(`Keybindings for name ${t} registered twice`);l.current[i][t]=e}else delete l.current[i][t];const r=l.current[c.current];d.current=new n.KeyboardBindingMap((e=>(0,a.flatten)(Object.values(e)))(r),o)},[]),u=r.useCallback((e,t,i)=>{i&&t!==c.current&&(c.current=t),p(e,t,i?t:"default")},[]),_=r.useCallback((e,t)=>{t&&c.current===e&&(c.current="default"),p(void 0,e,t?e:"default")},[]),v=r.useCallback(e=>{var t;if(!(function(e){const t=e.target||e.srcElement;if(!t)return!0;const i=t.tagName,r="INPUT"===i||"SELECT"===i||"TEXTAREA"===i,a=t instanceof HTMLInputElement&&("submit"===t.type||"button"==t.type);return!(t.hasAttribute&&t.hasAttribute("contenteditable")&&"false"!==t.getAttribute("contenteditable").toLowerCase())&&(!r||a)})(e))return;const i=null===(t=d.current)||void 0===t?void 0:t.getCallbackForEvent(e);i&&i(e)},[]);r.useEffect(()=>{if(!0!==t){const e=(0,a.throttle)(v,0);return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}},[v]);const f=r.useMemo(()=>({registerKeyBindings:u,unregisterKeyBindings:_,updateKeyBindings:p}),[]);return r.createElement(s.KeyboardBindingContext.Provider,{value:f},i)},t.KeyboardBindingProvider.displayName="KeyboardBindingProvider"})),define("typescript/libraries/file-viewer/src/app.module.css",["require","exports","css!typescript/libraries/file-viewer/src/app.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transparentBackground=t.editPluginFullscreenContainer=t.contentContainer=t.containerV2=t.container=void 0,t.container="_container_1l1lf_1",t.containerV2="_containerV2_1l1lf_22",t.contentContainer="_contentContainer_1l1lf_27",t.editPluginFullscreenContainer="_editPluginFullscreenContainer_1l1lf_37",t.transparentBackground="_transparentBackground_1l1lf_42";t.default={container:"_container_1l1lf_1",containerV2:"_containerV2_1l1lf_22",contentContainer:"_contentContainer_1l1lf_27",editPluginFullscreenContainer:"_editPluginFullscreenContainer_1l1lf_37",transparentBackground:"_transparentBackground_1l1lf_42"}})),define("typescript/libraries/file-viewer/src/titlebar/title_bar.module.css",["require","exports","css!typescript/libraries/file-viewer/src/titlebar/title_bar.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dropboxLogo=t.mobileMeatball=t.helpButton=t.actionBarMobile=t.actionBar=t.spacer=t.title=t.closeButton=t.overlay=t.mobileTitleBar=t.titleBar=void 0,t.titleBar="_titleBar_20u0t_5",t.mobileTitleBar="_mobileTitleBar_20u0t_12",t.overlay="_overlay_20u0t_17",t.closeButton="_closeButton_20u0t_27",t.title="_title_20u0t_5",t.spacer="_spacer_20u0t_44",t.actionBar="_actionBar_20u0t_48",t.actionBarMobile="_actionBarMobile_20u0t_53",t.helpButton="_helpButton_20u0t_57",t.mobileMeatball="_mobileMeatball_20u0t_63",t.dropboxLogo="_dropboxLogo_20u0t_67";t.default={titleBar:"_titleBar_20u0t_5",mobileTitleBar:"_mobileTitleBar_20u0t_12",overlay:"_overlay_20u0t_17",closeButton:"_closeButton_20u0t_27",title:"_title_20u0t_5",spacer:"_spacer_20u0t_44",actionBar:"_actionBar_20u0t_48",actionBarMobile:"_actionBarMobile_20u0t_53",helpButton:"_helpButton_20u0t_57",mobileMeatball:"_mobileMeatball_20u0t_63",dropboxLogo:"_dropboxLogo_20u0t_67"}})),define("typescript/libraries/file-viewer/src/preview_core.module.css",["require","exports","css!typescript/libraries/file-viewer/src/preview_core.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.brandingBackgroundImage=t.brandingLogo=t.isFullScreen=t.toolbar=t.app=void 0,t.app="_app_13gtt_5",t.toolbar="_toolbar_13gtt_14",t.isFullScreen="_is-full-screen_13gtt_33",t.brandingLogo="_brandingLogo_13gtt_43",t.brandingBackgroundImage="_brandingBackgroundImage_13gtt_50";t.default={app:"_app_13gtt_5",toolbar:"_toolbar_13gtt_14",isFullScreen:"_is-full-screen_13gtt_33",brandingLogo:"_brandingLogo_13gtt_43",brandingBackgroundImage:"_brandingBackgroundImage_13gtt_50"}})),define("typescript/libraries/file-viewer/src/preview_error/preview_error.module.css",["require","exports","css!typescript/libraries/file-viewer/src/preview_error/preview_error.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.illustrationContainer=t.ctaLink=t.ctaSecondary=t.message=t.header=t.img=t.container=void 0,t.container="_container_9t5i9_1",t.img="_img_9t5i9_12",t.header="_header_9t5i9_16",t.message="_message_9t5i9_24",t.ctaSecondary="_ctaSecondary_9t5i9_29",t.ctaLink="_ctaLink_9t5i9_34",t.illustrationContainer="_illustrationContainer_9t5i9_38";t.default={container:"_container_9t5i9_1",img:"_img_9t5i9_12",header:"_header_9t5i9_16",message:"_message_9t5i9_24",ctaSecondary:"_ctaSecondary_9t5i9_29",ctaLink:"_ctaLink_9t5i9_34",illustrationContainer:"_illustrationContainer_9t5i9_38"}})),define("typescript/libraries/file-viewer/src/preview_excel/preview_excel.module.css",["require","exports","css!typescript/libraries/file-viewer/src/preview_excel/preview_excel.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gridCell=t.gridTable=t.toolbar=t.textAlignCenter=t.loadingSpinnerWrapper=t.tab=t.segmentedControlOptionContainer=t.buttonSeparator=t.tabsGroup=t.tabsTabs=t.tabsGroupButtonsContainer=t.tabsGroupContainer=t.tabsGroupAndButtonsContainer=t.tabsPanelContainerNoScroll=t.tabsPanelContainer=t.sheetContent=t.rowHeaders=t.columnHeaders=t.sheetHeader=t.columnHeadersContainer=t.rowHeadersContainer=t.sheetHeaderContainer=t.headerSpacer=t.sheet=t.sheetWrapper=t.container=void 0,t.container="_container_7l53b_9",t.sheetWrapper="_sheetWrapper_7l53b_16",t.sheet="_sheet_7l53b_16",t.headerSpacer="_header-spacer_7l53b_31",t.sheetHeaderContainer="_sheetHeaderContainer_7l53b_41",t.rowHeadersContainer="_row-headersContainer_7l53b_46",t.columnHeadersContainer="_column-headersContainer_7l53b_52",t.sheetHeader="_sheetHeader_7l53b_41",t.columnHeaders="_column-headers_7l53b_52",t.rowHeaders="_row-headers_7l53b_46",t.sheetContent="_sheet-content_7l53b_82",t.tabsPanelContainer="_tabsPanelContainer_7l53b_91",t.tabsPanelContainerNoScroll="_tabsPanelContainerNoScroll_7l53b_106",t.tabsGroupAndButtonsContainer="_tabsGroupAndButtonsContainer_7l53b_110",t.tabsGroupContainer="_tabsGroupContainer_7l53b_123",t.tabsGroupButtonsContainer="_tabsGroupButtonsContainer_7l53b_127",t.tabsTabs="_tabsTabs_7l53b_137",t.tabsGroup="_tabsGroup_7l53b_110",t.buttonSeparator="_buttonSeparator_7l53b_150",t.segmentedControlOptionContainer="_segmentedControlOptionContainer_7l53b_161",t.tab="_tab_7l53b_91",t.loadingSpinnerWrapper="_loadingSpinnerWrapper_7l53b_180",t.textAlignCenter="_textAlignCenter_7l53b_188",t.toolbar="_toolbar_7l53b_193",t.gridTable="_gridTable_7l53b_210",t.gridCell="_gridCell_7l53b_216";t.default={container:"_container_7l53b_9",sheetWrapper:"_sheetWrapper_7l53b_16",sheet:"_sheet_7l53b_16",headerSpacer:"_header-spacer_7l53b_31",sheetHeaderContainer:"_sheetHeaderContainer_7l53b_41",rowHeadersContainer:"_row-headersContainer_7l53b_46",columnHeadersContainer:"_column-headersContainer_7l53b_52",sheetHeader:"_sheetHeader_7l53b_41",columnHeaders:"_column-headers_7l53b_52",rowHeaders:"_row-headers_7l53b_46",sheetContent:"_sheet-content_7l53b_82",tabsPanelContainer:"_tabsPanelContainer_7l53b_91",tabsPanelContainerNoScroll:"_tabsPanelContainerNoScroll_7l53b_106",tabsGroupAndButtonsContainer:"_tabsGroupAndButtonsContainer_7l53b_110",tabsGroupContainer:"_tabsGroupContainer_7l53b_123",tabsGroupButtonsContainer:"_tabsGroupButtonsContainer_7l53b_127",tabsTabs:"_tabsTabs_7l53b_137",tabsGroup:"_tabsGroup_7l53b_110",buttonSeparator:"_buttonSeparator_7l53b_150",segmentedControlOptionContainer:"_segmentedControlOptionContainer_7l53b_161",tab:"_tab_7l53b_91",loadingSpinnerWrapper:"_loadingSpinnerWrapper_7l53b_180",textAlignCenter:"_textAlignCenter_7l53b_188",toolbar:"_toolbar_7l53b_193",gridTable:"_gridTable_7l53b_210",gridCell:"_gridCell_7l53b_216"}})),define("typescript/libraries/file-viewer/src/transcript_blade/transcript_segment.module.css",["require","exports","css!typescript/libraries/file-viewer/src/transcript_blade/transcript_segment.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transcriptSettingInfoText=t.transcriptSettingInfoWrapper=t.transcriptSegmentHeader=t.activeSegment=t.copyButton=t.transcriptSegmentTimestamp=t.transcriptSegment=t.settingInfoSectionHeight=void 0,t.settingInfoSectionHeight="48",t.transcriptSegment="_transcriptSegment_ftqbp_10",t.transcriptSegmentTimestamp="_transcriptSegmentTimestamp_ftqbp_20",t.copyButton="_copyButton_ftqbp_26",t.activeSegment="_activeSegment_ftqbp_30",t.transcriptSegmentHeader="_transcriptSegmentHeader_ftqbp_37",t.transcriptSettingInfoWrapper="_transcriptSettingInfoWrapper_ftqbp_60",t.transcriptSettingInfoText="_transcriptSettingInfoText_ftqbp_68";t.default={settingInfoSectionHeight:"48",transcriptSegment:"_transcriptSegment_ftqbp_10",transcriptSegmentTimestamp:"_transcriptSegmentTimestamp_ftqbp_20",copyButton:"_copyButton_ftqbp_26",activeSegment:"_activeSegment_ftqbp_30",transcriptSegmentHeader:"_transcriptSegmentHeader_ftqbp_37",transcriptSettingInfoWrapper:"_transcriptSettingInfoWrapper_ftqbp_60",transcriptSettingInfoText:"_transcriptSettingInfoText_ftqbp_68"}})),define("typescript/libraries/file-viewer/src/file_activity_blade/file_activity_blade_plugin",["require","exports","tslib","react","typescript/component_libraries/files_components/src/blades/file_activity/index","react-redux","typescript/libraries/file-viewer/src/file_activity_blade/types"],(function(e,t,i,r,a,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileActivityPluginBase=void 0,r=i.__importStar(r);t.FileActivityPluginBase=class{constructor(e,t,i,o,l){this.lifecycle={},this.layerUI={},this.rightRailUI={Sidebar:e=>{const t=this.onOpenVersionHistory,i=(0,r.useMemo)(()=>t?{enabled:!0,onVersionHistoryClicked:()=>{t(),this.context.logUserAction("version_history_clicked","right_sidebar")}}:{enabled:!1},[t]),o=(0,r.useCallback)(e=>{this.context.logUserAction(e,"right_sidebar")},[]);return r.default.createElement(n.Provider,{store:this.store},r.default.createElement(a.FileActivityBlade,{id:s.FILE_ACTIVITY_PLUGIN_ID,fileId:e.file.fileId,user:this.user,intl:this.platform.intl,versionHistory:i,logFilterChange:o}))},Control:()=>r.default.createElement(a.CollapsedFileActivityBladeButton,{id:s.FILE_ACTIVITY_PLUGIN_ID,intl:this.platform.intl})},this.platform=e,this.store=t,this.user=i,this.context=o,this.onOpenVersionHistory=l}}})),define("typescript/libraries/file-viewer/src/preview_image/data_transform",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transform=void 0,t.transform=function(e,t){return{thumbnailUrl:e.default_src||"",fullSizeUrl:e.full_size_src||"",srcSet:e.src_set||"",alt:"",imgWidth:t?t.width:void 0,imgHeight:t?t.height:void 0}}})),define("typescript/libraries/file-viewer/src/preview_image/img_layer",["require","exports","tslib","classnames","react","typescript/libraries/file-viewer/src/preview_image/preview_image.module.css","typescript/libraries/file-viewer/src/logging/performance"],(function(e,t,i,r,a,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageLayer=void 0,r=i.__importDefault(r),a=i.__importStar(a),n=i.__importStar(n);t.ImageLayer=e=>{const{onSmallImageLoaded:t,onFullSizeImageLoaded:i,previewKey:o}=e,[l,c]=a.useState(!1),[d,p]=a.useState(!0);a.useEffect(()=>{!l&&d||(c(!1),p(!0))},[o.serialized]);const u=a.useCallback(({currentTarget:{naturalWidth:e,naturalHeight:i}})=>{p(!1),s.PreviewsEventLogger.mark(s.PreviewsTimingEvents.FVSDK_IMAGE_ON_LOAD),t(e,i)},[]),_=a.useCallback(({currentTarget:{naturalWidth:e,naturalHeight:t}})=>{p(!1),c(!0),i(e,t),s.PreviewsEventLogger.mark(s.PreviewsTimingEvents.FVSDK_FULL_IMAGE_ON_LOAD)},[]),{data:{alt:v,fullSizeUrl:f,thumbnailUrl:g,srcSet:E,imgWidth:w,imgHeight:b},className:m,config:{img_size_optimization:h},layerViewportScale:y}=e;if(h&&w&&b)return a.createElement("div",{className:n.layer},a.createElement("img",{alt:v,className:(0,r.default)(n.fullSizeImg,m),src:f,srcSet:E,sizes:y+"vw",onLoad:_,onError:e.onImageError,"data-testid":"fv-sdk-img-preview-full-size"}));const P={display:"none"};return a.createElement("div",{className:n.layer},a.createElement("img",{key:g,src:g,srcSet:E,style:d?P:void 0,onLoad:u,className:(0,r.default)(n.smallImg,m),onError:e.onImageError,alt:v,"aria-hidden":!!l,"data-testid":"fv-sdk-img-preview-thumbnail"}),a.createElement("img",{key:f,alt:v,className:(0,r.default)(n.fullSizeImg,m),src:f,style:l?void 0:P,onLoad:_,onError:e.onImageError,"data-testid":"fv-sdk-img-preview-full-size"}))},t.ImageLayer.displayName="ImageLayer"})),define("typescript/libraries/file-viewer/src/preview_image/layers",["require","exports","tslib","react","typescript/libraries/file-viewer/src/preview_image/img_layer","typescript/libraries/file-viewer/src/plugins/layers","typescript/libraries/file-viewer/src/core/types/preview_type"],(function(e,t,i,r,a,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultLayerRenderFn=void 0,r=i.__importStar(r);t.defaultLayerRenderFn=e=>t=>{const{activePluginInstance:i,pluginProps:o}=e,l=[r.createElement(a.ImageLayer,Object.assign({key:"image"},e,t))];if((null==o?void 0:o.previewType)===s.PreviewType.Archive)return l;if(null!=o&&null!=i){const e=Object.assign(Object.assign({},o),{layer:{dimensions:o.file.dimensions}}),{layerUI:{Layer:t,LayerWithEventBubbling:a}}=i;if(null!=t)return[...l,r.createElement(t,Object.assign({},e))];if(null!=a)return[r.createElement(n.PortalTargetProvider,{key:"portal-target-provider"},t=>r.createElement(a,Object.assign({},e),r.createElement(n.PortalWrapper,{element:t},l),r.createElement("div",null)))]}return l}})),define("typescript/libraries/file-viewer/src/preview_image/preview_image",["require","exports","tslib","react","classnames","typescript/libraries/file-viewer/src/mobile_web/mobile_web.module.css","typescript/libraries/file-viewer/src/preview_image/viewport","typescript/libraries/file-viewer/src/preview_image/data_transform","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/ui/header","typescript/libraries/file-viewer/src/ui/header.module.css","typescript/libraries/file-viewer/src/core/types/errors","typescript/libraries/file-viewer/src/preview_error/preview_error","typescript/libraries/file-viewer/src/toolbar/configuration","typescript/libraries/file-viewer/src/logging/performance","typescript/libraries/file-viewer/src/preview_core.module.css","typescript/component_libraries/pro-ui/src/components/branding/file_viewer_preview","typescript/libraries/file-viewer/src/core/utils/sizing_const","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/keyboard/bindings","typescript/libraries/file-viewer/src/preview_image/layers","typescript/libraries/file-viewer/src/keyboard/keyboard_connector","typescript/libraries/file-viewer/src/ui/close_button","typescript/libraries/file-viewer/src/hooks/selectors","react-intl","typescript/libraries/file-viewer/src/core/data/utils","react-redux"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f,g,E,w,b,m,h,y,P,T,I,F,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewImage=t.UnconnectedPreviewImage=void 0,r=i.__importStar(r),a=i.__importDefault(a),n=i.__importStar(n);const L=parseInt(n.mobileFooterHeight,10);function C(e){const t={width:void 0,height:void 0};return e.config.img_size_optimization&&e.previewMetadata&&e.previewMetadata.dimensions?e.previewMetadata.dimensions:t}function A(e,t){const{width:i,height:r}=C(e);return r&&i?{originalWidth:i,originalHeight:r}:{originalWidth:t.assetWidth,originalHeight:t.assetHeight}}class O extends r.PureComponent{constructor(e){super(e),this.state={},this.updateFitScaleFactor=(e=this.state)=>{const{width:t,height:i,responsiveSize:r,config:a}=this.props,{originalWidth:n,originalHeight:s}=A(this.props,e),o=(0,_.noToolbarShown)(r,a);if(!n||!s)return;const l=(c={width:n,height:s},d={width:t,height:i},p=E.IMAGE_PADDING,Math.min((d.width-p.horizontal)/c.width,(d.height-p.top-p.bottom)/c.height));var c,d,p;n<t-E.IMAGE_PADDING.horizontal&&s<i-E.IMAGE_PADDING.top-(o?E.IMAGE_PADDING.bottomNoToolbar:E.IMAGE_PADDING.bottom)?this.handleFitScaleFactorChange(1,l):this.handleFitScaleFactorChange(l)},this.handleSmallImgLoad=(e,t)=>{this.state.assetWidth&&this.state.assetHeight||this.handleFullSizeImgLoad(e,t)},this.handleFullSizeImgLoad=(e,t)=>{const i={assetHeight:t,assetWidth:e,aspectRatio:e/t,renderSucceeded:!0};this.setState(i,()=>this.updateFitScaleFactor(i))},this.onRenderFailed=()=>{this.setState({errored:!0})},this.handleCloseFullScreen=()=>{const{dispatch:e,previewKey:t,fileViewerId:i}=this.props;e((0,w.exitFullScreen)({previewKey:t,fileViewerId:i,sourceContext:b.UserActionContext.Default}))},this.handleFitScaleFactorChange=(e,t)=>{const{dispatch:i,fileViewerId:r,previewKey:a}=this.props;i((0,w.updateFitScaleFactor)({fileViewerId:r,previewKey:a,fitScaleFactor:e,storedFitScaleFactor:t}))},this.handleUpdateDimensions=e=>{const{dispatch:t,fileViewerId:i,previewKey:r}=this.props;t((0,w.updateDimensions)({fileViewerId:i,previewKey:r,dimensions:e}))},this.zoomIn=()=>{const{dispatch:e,fileViewerId:t,previewKey:i}=this.props;e((0,w.zoomIn)({fileViewerId:t,previewKey:i,sourceContext:b.UserActionContext.Keyboard}))},this.zoomOut=()=>{const{dispatch:e,fileViewerId:t,previewKey:i}=this.props;e((0,w.zoomOut)({fileViewerId:t,previewKey:i,sourceContext:b.UserActionContext.Keyboard}))},this.keyboardBindings=(0,m.getZoomInOutBindings)({zoomIn:this.zoomIn,zoomOut:this.zoomOut}),v.PreviewsEventLogger.mark(v.PreviewsTimingEvents.FVSDK_IMAGE_CONTAINER_START)}componentDidMount(){this.updateFitScaleFactor(),v.PreviewsEventLogger.mark(v.PreviewsTimingEvents.FVSDK_IMAGE_CONTAINER_MOUNT)}componentDidUpdate(e,t){const{width:i,height:r,onInteractive:a,onRenderSucceeded:n}=this.props,{renderSucceeded:s}=this.state,{originalWidth:o,originalHeight:l}=A(this.props,this.state),{originalWidth:c,originalHeight:d}=A(e,t);s&&s!==t.renderSucceeded&&(a(),n()),t.assetHeight===this.state.assetHeight&&t.assetWidth===this.state.assetWidth||(this.state.assetWidth&&this.state.assetHeight?this.handleUpdateDimensions({height:this.state.assetHeight,width:this.state.assetWidth}):this.handleUpdateDimensions(void 0)),e.width===i&&e.height===r&&c===o&&d===l||this.updateFitScaleFactor()}componentWillUnmount(){this.handleUpdateDimensions(void 0)}render(){const{activePluginInstance:e,config:t,fileViewerUiData:i,dispatch:v,fileInfo:w,fileMetadata:b,filePreviewUiData:m,fileViewerId:T,height:I,intl:F,previewKey:S,previewMetadata:O,pluginProps:x,width:D,responsiveSize:R,header:M,brandingInfo:N,sharedLinkInfo:k,onRenderSucceeded:V,onInteractive:j}=this.props,{originalWidth:Y,originalHeight:U}=A(this.props,this.state),B=(function(e,t){const{width:i,height:r}=C(e);return null!=r&&null!=i?i/r:t.aspectRatio})(this.props,this.state),K=(0,l.getCurrentScaleFactorFromFilePreviewUi)(m),z=(0,_.noToolbarShown)(R,t),W=i.isFullScreen;if(this.state.errored)return r.createElement(u.PreviewRenderError,Object.assign({},this.props,{error:new p.FVError(p.FVErrorCode.Unknown)}));if(!O||!O.content)return null;const H=(0,o.transform)(O.content,O.dimensions);return t.mobile_web?r.createElement("div",{style:{height:`${I-L}px`},className:n.imageContainer},x&&r.createElement(c.PluginHeader,{pluginProps:x,activePluginInstance:e||void 0,header:M}),r.createElement("img",{onLoad:()=>{V(),j()},onError:this.onRenderFailed,src:H.fullSizeUrl,"data-testid":"fv-sdk-img-preview-full-size"})):r.createElement("div",{className:(0,a.default)(f.app,{[f.isFullScreen]:W})},W&&r.createElement(P.CloseButton,{onClick:this.handleCloseFullScreen}),r.createElement("div",{className:d.headerContainer},r.createElement(y.KeyboardBindingConnector,{name:"preview_image",keyboardBindings:this.keyboardBindings}),r.createElement(g.BrandingFileViewerPreview,{backgroundClass:f.brandingBackgroundImage,logoClass:f.brandingLogo,teamAndUserBranding:{teamBranding:k,userBranding:N}},x&&r.createElement(c.PluginHeader,{pluginProps:x,activePluginInstance:e||void 0,header:M}),r.createElement(s.Viewport,{data:H,originalWidth:Y,originalHeight:U,scaleFactor:K,aspectRatio:B,width:D,height:I,topPadding:E.IMAGE_PADDING.top,bottomPadding:z?E.IMAGE_PADDING.bottomNoToolbar:E.IMAGE_PADDING.bottom,horizontalPadding:E.IMAGE_PADDING.horizontal},(0,h.defaultLayerRenderFn)({activePluginInstance:e,dispatch:v,config:t,fileViewerUiData:i,fileInfo:w,fileMetadata:b,filePreviewUiData:m,fileViewerId:T,intl:F,pluginProps:x,previewKey:S,previewMetadata:O,onFullSizeImageLoaded:this.handleFullSizeImgLoad,onImageError:this.onRenderFailed,onSmallImageLoaded:this.handleSmallImgLoad})))))}}t.UnconnectedPreviewImage=O,O.displayName="UnconnectedPreviewImage";t.PreviewImage=e=>{const{fileViewerId:t,previewKey:i}=e,a=(0,I.useIntl)(),n=(0,S.useDispatch)(),s=(0,T.useFileViewerSelector)(t,l.getBrandingInfo),o=(0,T.useFileViewerSelector)(t,l.getSharedLinkInfo),c=(0,T.usePreviewState)(t,i,()=>({}),F.filterZoomableFilePreviewUi);return c?r.createElement(O,Object.assign({},e,c,{intl:a,dispatch:n,brandingInfo:s,sharedLinkInfo:o})):null},t.PreviewImage.displayName="PreviewImage"})),define("typescript/libraries/file-viewer/src/preview_image/viewport",["require","exports","tslib","classnames","react","typescript/libraries/file-viewer/src/core/utils/sizing_utils","typescript/libraries/file-viewer/src/preview_image/preview_image.module.css"],(function(e,t,i,r,a,n,s){"use strict";function o(e,t,i,r){const{left:a,top:n}=e,{w:s,h:o}=t,{w:l,h:c}=i,d=[.5,.5];if(!s||!o||!r)return d;const p=s*r,u=o*r;return p>l&&(d[0]=(a+l/2)/p),u>c&&(d[1]=(n+c/2)/u),d}function l(e,t,i,r){const{w:a,h:n}=i,{w:s,h:o}=r,l=t*a,c=t*n;return[e[0]*l-s/2,e[1]*c-o/2]}Object.defineProperty(t,"__esModule",{value:!0}),t.Viewport=t._calculateScrollPosition=t._calculateFocusPoint=void 0,r=i.__importDefault(r),a=i.__importStar(a),s=i.__importStar(s),t._calculateFocusPoint=o,t._calculateScrollPosition=l;t.Viewport=e=>{const t=a.useRef(null),i=a.useRef([.5,.5]),{scaleFactor:c,originalWidth:d,originalHeight:p,width:u,height:_}=e;a.useLayoutEffect(()=>{t.current&&"function"==typeof t.current.scrollTo&&c&&d&&p&&t.current.scrollTo(...l(i.current,c,{w:d,h:p},{w:u,h:_}))},[c,d,p,_,u]);const v=a.useCallback(e=>{const{scrollLeft:t,scrollTop:r}=e.currentTarget;i.current=o({left:t,top:r},{w:d,h:p},{w:u,h:_},c)},[c,d,p,_,u]),{className:f,aspectRatio:g,data:E}=e,w={width:d,height:p},{topPadding:b,bottomPadding:m,horizontalPadding:h}=e;if(c&&d&&p){const{width:e,height:t,translateX:i,translateY:r}=(0,n.calculateImageSizerDimensions)({width:d,height:p},{width:u,height:_},{top:b,bottom:m},c);w.width=e,w.height=t,w.transform=`translate(${i}px, ${r}px)`}else if(g){const[e,t]=(0,n.calculateFitBox)(u-h,_-b-m,g);w.width=e,w.height=t}else w.visibility="hidden";const y=(0,n.getImageSizeScale)(Number(w.width));return a.createElement("div",{className:(0,r.default)(f,s.viewport),style:{width:u,height:_},onScroll:v,ref:t},a.createElement("div",{className:(0,r.default)(s.sizer),style:w},e.children({originalWidth:d||0,originalHeight:p||0,data:E,layerViewportScale:y})))},t.Viewport.displayName="Viewport"})),define("typescript/libraries/file-viewer/src/preview_doc/data_transform",["require","exports","typescript/libraries/file-viewer/src/preview_doc/text_transform"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformData=void 0,t.transformData=function(e){const t=[];return e.metadata&&Array.isArray(e.pages)?e.pages.map(e=>Object.assign(Object.assign({},e),{textboxes:e.textboxes.map(e=>{const t=(0,i.transform)(e.t);return Object.assign(Object.assign({},e),{transformedText:t.str,dir:t.dir})})})):t}})),define("typescript/libraries/file-viewer/src/preview_doc/img_layer",["require","exports","tslib","react","typescript/libraries/file-viewer/src/preview_doc/preview_doc.module.css","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/preview_doc/utils/sizing"],(function(e,t,i,r,a,n,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImgLayer=void 0,r=i.__importStar(r);class l extends r.PureComponent{constructor(){super(...arguments),this.el=null}componentDidMount(){this.fireEventHandlersIfNeeded()}componentDidUpdate(e){e.previewKey.serialized!==this.props.previewKey.serialized&&this.fireEventHandlersIfNeeded()}fireEventHandlersIfNeeded(){this.el&&this.el.complete&&(this.el.naturalHeight||this.el.naturalWidth?this.props.onImageLoad(this.props.data.pageIndex):this.props.onImageError(this.props.data.pageIndex))}render(){var e,t;const{data:{imgUrls:i,dimension:[l,c]},filePreviewUiData:d,fileMetadata:p,onImageLoad:u,onImageError:_,config:{img_size_optimization:v}}=this.props,f=(0,n.getCurrentScaleFactorFromFilePreviewUi)(d),g=l*f,E=c*f,w=(0,o.getDocPageViewportWidth)(g),b=null!==(t=null===(e=(0,s.filterDocFilePreviewUiState)(d))||void 0===e?void 0:e.viewportWidth)&&void 0!==t?t:0,m=v?{srcSet:i.srcset,sizes:`${2*Math.max(w,b)}vw`}:{};return r.createElement("div",{className:a.imgLayer},r.createElement("img",Object.assign({},m,{ref:e=>this.el=e,alt:p?p.file_name:"",width:g,height:E,role:"tabpanel","aria-hidden":"true",draggable:!1,src:f>=2?i["4x"]:i["1x"],onLoad:()=>u(this.props.data.pageIndex),onError:()=>_(this.props.data.pageIndex),"data-testid":`fvsdk-doc-page-${this.props.data.pageIndex}`})))}}t.ImgLayer=l,l.displayName="ImgLayer"})),define("typescript/libraries/file-viewer/src/preview_doc/layers",["require","exports","tslib","react","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/preview_doc/img_layer","typescript/libraries/file-viewer/src/preview_doc/text_layer","typescript/libraries/file-viewer/src/preview_doc/links_layer","typescript/libraries/file-viewer/src/plugins/layers","typescript/libraries/file-viewer/src/core/types/preview_type"],(function(e,t,i,r,a,n,s,o,l,c){"use strict";function d(e,t,i){const{pluginProps:a,activePluginInstance:n}=e,s=i;if((null==a?void 0:a.previewType)===c.PreviewType.Archive)return s;if(null!=n&&null!=a){const{data:{pageIndex:e}}=t,i=Object.assign(Object.assign({},a),{layer:{dimensions:a.file.pages[e].dimensions,pageIndex:e}}),{layerUI:{Layer:o,LayerWithEventBubbling:c}}=n;if(null!=o)return[...s,r.createElement(o,Object.assign({},i))];if(null!=c)return[r.createElement(l.PortalTargetProvider,{key:"portal-target-provider"},e=>r.createElement(c,Object.assign({},i),r.createElement(l.PortalWrapper,{element:e},s),r.createElement("div",null)))]}return i}Object.defineProperty(t,"__esModule",{value:!0}),t.imageLayerRenderFn=t.defaultLayerRenderFn=void 0,r=i.__importStar(r);t.defaultLayerRenderFn=e=>t=>{const i=[r.createElement(n.ImgLayer,Object.assign({key:"image"},e,t)),r.createElement(s.TextLayer,Object.assign({key:"text",dispatch:e.dispatch,onTextRendered:e.onTextRendered,scaleFactor:(0,a.getCurrentScaleFactorFromFilePreviewUi)(e.filePreviewUiData)},t)),r.createElement(o.LinksLayer,Object.assign({key:"links"},e,t))];return d(e,t,i)};t.imageLayerRenderFn=e=>t=>{const i=[r.createElement(n.ImgLayer,Object.assign({key:"image"},e,t))];return d(e,t,i)}})),define("typescript/libraries/file-viewer/src/preview_doc/links_layer",["require","exports","tslib","react","typescript/libraries/file-viewer/src/preview_doc/preview_doc.module.css","typescript/libraries/file-viewer/src/preview_doc/text_transform","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/data/actions","react-intl","react-redux"],(function(e,t,i,r,a,n,s,o,l,c){"use strict";function d(e){return!!e.ur}Object.defineProperty(t,"__esModule",{value:!0}),t.LinksLayer=t.isLinkUrl=void 0,r=i.__importStar(r),t.isLinkUrl=d;t.LinksLayer=e=>{const{filePreviewUiData:t}=e,i=(0,s.getCurrentScaleFactorFromFilePreviewUi)(t),p=(0,l.useIntl)(),u=(0,c.useDispatch)();const _=e.data.links.map((t,i)=>{const s=t.a;let[l,c,_,v]=t.r;v<0&&(c+=v,v=-v),_<0&&(l+=_,_=-_);const f={position:"absolute",bottom:c,left:l,width:_,height:v};if(d(s)){const{ur:e}=s,t=e.startsWith("mailto:")||e.startsWith("tel:");return r.createElement("a",{key:i,"aria-label":p.formatMessage({id:"+trcEI",defaultMessage:"External Link"}),href:t?e:(0,n.normalizeUrl)(e),onClick:()=>(function(e){u((0,o.openUrl)({url:e}))})(e),rel:"noreferrer noopener",style:f,target:"_blank"})}return r.createElement("div",{key:i,className:a.internalLink,style:f,"aria-label":p.formatMessage({id:"UU1q+t",defaultMessage:"Internal Link"}),onClick:t=>(function(t,i){t.preventDefault(),e.onInternalLinkClicked(i)})(t,s.pn)})});return r.createElement("div",{className:a.linksLayer,style:{transform:`scale(${i})`}},_)},t.LinksLayer.displayName="LinksLayer"})),define("typescript/libraries/file-viewer/src/preview_doc/password_modal",["require","exports","tslib","react","dig-components/modal","react-intl","dig-components/buttons","dig-components/text_fields","typescript/libraries/file-viewer/src/hooks/useStabilizedCallback"],(function(e,t,i,r,a,n,s,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordModal=void 0,r=i.__importStar(r);t.PasswordModal=({passwordAttempt:e,onSubmit:t,onDismiss:i,fileName:c})=>{const d=(0,n.useIntl)(),[p,u]=r.useState("");r.useEffect(()=>u(""),[e]);const _=(0,l.useStabilizedCallback)(e=>{u(e.currentTarget.value)}),v=(0,l.useStabilizedCallback)(e=>{"Enter"===e.key&&t(p)}),f=(0,l.useStabilizedCallback)(()=>{t(p)}),g=e>0,E=d.formatMessage({id:"GKzMoF",defaultMessage:"Close"});return r.createElement(a.Modal,{open:!0,isCentered:!0,withCloseButton:E,onRequestClose:i},r.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard"},r.createElement(a.Modal.Title,null,d.formatMessage({id:"jvUwnG",defaultMessage:"This file is password protected"}))),r.createElement(a.Modal.Body,null,!!c&&r.createElement(o.TextInput,{type:"text",value:c,style:{display:"none"},wrapperProps:{style:{display:"none"}}}),r.createElement("label",null,g?d.formatMessage({id:"qW3q74",defaultMessage:"The password you entered is incorrect, please try again."}):d.formatMessage({id:"qeA+3O",defaultMessage:"Enter password to continue."}),r.createElement(o.TextInput,{autoFocus:!0,type:"password",value:p,isInvalid:g,placeholder:d.formatMessage({id:"4RJ0I8",defaultMessage:"Password"}),onChange:_,wrapperProps:{style:{marginTop:"15px"}},onKeyDown:v}))),r.createElement(a.Modal.Footer,null,r.createElement(s.Button,{variant:"opacity",onClick:i},d.formatMessage({id:"xuJw2w",defaultMessage:"Cancel"})),r.createElement(s.Button,{variant:"primary",onClick:f},d.formatMessage({id:"RS9CyP",defaultMessage:"Submit"}))))},t.PasswordModal.displayName="PasswordModal"})),define("typescript/libraries/file-viewer/src/preview_doc/renderer/page",["require","exports","tslib","react","typescript/libraries/file-viewer/src/preview_doc/preview_doc.module.css"],(function(e,t,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Page=void 0,r=i.__importStar(r);class n extends r.PureComponent{constructor(){super(...arguments),this.state={},this.onPageRef=e=>{null!=this.props.onRef&&this.props.onRef(this.props.data.pageIndex,e)}}render(){const{scaleFactor:e,children:t,onMouseMove:i,onMouseUp:n,onMouseEnter:s,onMouseDown:o,className:l,data:c,isFocused:d,findInDocHighlights:p,findInDocCurrentHit:u}=this.props,{pageIndex:_,dimension:[v,f]}=c;return r.createElement("div",{id:`pageContainer${_+1}`,className:a.page+" "+(l||""),"data-index":_,style:{width:v*e,height:f*e},onMouseDown:o,onMouseMove:i,onMouseUp:n,onMouseEnter:s,ref:this.onPageRef},t({isFocused:d,data:c,findInDocHighlights:p,findInDocCurrentHit:u}))}}t.Page=n,n.defaultProps={data:{pageIndex:0,dimension:[0,0],thumbnailUrl:"",imgUrls:{"1x":"","4x":""},textboxes:[],links:[]},scaleFactor:0,children:()=>null,onRef:()=>{}},n.displayName="Page"})),define("typescript/libraries/file-viewer/src/preview_doc/renderer/pdf_pages",["require","exports","tslib","react","lodash","typescript/libraries/file-viewer/src/preview_doc/renderer/pdf_page","typescript/libraries/file-viewer/src/toolbar/toolbar.module.css","typescript/libraries/file-viewer/src/core/utils/sizing_const"],(function(e,t,i,r,a,n,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PdfPages=void 0,r=i.__importStar(r),s=i.__importStar(s);const l=2*parseInt(s.toolbarRowHeight,10)+parseInt(s.toolbarVerticalPadding,10);class c extends r.PureComponent{constructor(e){super(e),this.state={currentPageIndex:0,startPage:0,endPage:0,pagesScrollTop:[]},this.__viewportEl=null,this.viewportElRef=e=>this.__viewportEl=e,this.totalPagesHeight=0,this.maxWidth=0,this.ol=null,this.handleScrollTopChange=()=>{this.__viewportEl&&(this.props.pageNavigation&&this.props.dispatchResolvePageNavigation(),this.setStateForStartAndEndPage(this.state.pagesScrollTop))},this.throttledHandleScrollTopChange=(0,a.throttle)(()=>this.handleScrollTopChange(),50,{leading:!0}),this.scrollDown=()=>{this.__viewportEl&&this.__viewportEl.scrollTo(0,this.__viewportEl.scrollTop+60)},this.scrollUp=()=>{this.__viewportEl&&this.__viewportEl.scrollTo(0,this.__viewportEl.scrollTop-60)},this.pageUp=()=>{this.scrollToPage(Math.max(0,this.state.currentPageIndex-1))},this.pageDown=()=>{this.props.count&&this.scrollToPage(Math.min(this.props.count-1,this.state.currentPageIndex+1))},this.jumpToPage=e=>{this.scrollToPage(e)},e.findInDocController&&e.findInDocController.setRetrieveCurrentPageIndex(()=>this.state.currentPageIndex)}getMargin(){return o.DOC_LI_MARGIN}computeScrollTops(){const{pages:e,scaleFactor:t}=this.props,i=o.DOC_LI_MARGIN,r=[i];let a=i;for(let n=1;n<e.length;++n){const s=e[n-1].dimension[1]*t+i;r.push(a+s),a+=s}if(e.length>0){const r=e[e.length-1].dimension[1]*t;this.totalPagesHeight=a+r+2*i+l}return this.setState({pagesScrollTop:r}),r}updateMaxWidth(){const{pages:e,scaleFactor:t}=this.props;let i=0;for(let t=0;t<e.length;++t){const r=e[t].dimension[0];r>i&&(i=r)}this.maxWidth=i*t}setStateForStartAndEndPage(e){if(!this.__viewportEl)return;const t=(0,a.sortedIndex)(e,this.__viewportEl.scrollTop+this.__viewportEl.offsetHeight/2),[i,r]=[t-1,t+1],n=Math.max(0,i-10),s=Math.min(this.props.pages.length-1,r+10),o=this.totalPagesHeight,l=this.__viewportEl.offsetHeight,c=Math.max(0,o-l),d=this.__viewportEl.scrollTop>=c?r:i;this.setState({startPage:n,endPage:s,currentPageIndex:d})}scrollToPage(e,t=null,i){const{count:r,scaleFactor:a}=this.props;if(e<0||e>=r||!this.ol||!this.__viewportEl)return;const n=t?t[e]:this.state.pagesScrollTop[e],s=i?i*a-this.__viewportEl.clientHeight/2:0;this.__viewportEl.scrollTop=Math.max(n+o.DOC_LI_MARGIN+s,o.DOC_LI_MARGIN)}componentDidMount(){const e=this.computeScrollTops();this.updateMaxWidth(),this.__viewportEl&&this.setStateForStartAndEndPage(e)}componentDidUpdate(e,t){let i;t.currentPageIndex!==this.state.currentPageIndex&&this.props.onPageChange&&this.props.onPageChange(this.state.currentPageIndex,e.currentPageIndex),e.pages===this.props.pages&&e.scaleFactor===this.props.scaleFactor||(i=this.computeScrollTops(),this.setStateForStartAndEndPage(i),this.updateMaxWidth(),e.scaleFactor!==this.props.scaleFactor&&this.scrollToPage(this.state.currentPageIndex,i)),this.props.pageNavigation&&e.pageNavigation&&this.props.previewKey.serialized!==e.previewKey.serialized?this.props.dispatchResolvePageNavigation():this.props.pageNavigation&&this.scrollToPage(this.props.pageNavigation.pageIndex,i,this.props.pageNavigation.centerOnYOffset)}makePdfPage(e){const{children:t,pages:i,onMouseDown:a,onMouseEnter:s,onMouseMove:o,onMouseUp:l,pageClassName:c,scaleFactor:d,findInDocData:p}=this.props,u=i[e],_=this.state.pagesScrollTop[e];return r.createElement(n.PdfPage,{key:u.pageIndex,index:e,pageData:u,isFocused:this.state.currentPageIndex===e,onMouseDown:a,onMouseEnter:s,onMouseMove:o,onMouseUp:l,onRef:this.props.onPageRef,pageClassName:c,scaleFactor:d,top:_,children:t,findInDocHighlights:null==p?void 0:p.highlights.get(e),findInDocCurrentHit:null==p?void 0:p.currentHit})}render(){const{className:e,pages:t,width:i}=this.props,{startPage:a,endPage:n}=this.state,s={height:this.totalPagesHeight,minWidth:`${this.maxWidth+50}px`},o={width:`${i}px`};return r.createElement("div",{className:e,onScroll:this.throttledHandleScrollTopChange,ref:this.viewportElRef,style:o},r.createElement("ol",{ref:e=>this.ol=e,style:s},t.slice(a,n+1).map((e,t)=>this.makePdfPage(a+t))))}}t.PdfPages=c,c.displayName="PdfPages"})),define("typescript/libraries/file-viewer/src/preview_doc/renderer/pdf_page",["require","exports","tslib","react","typescript/libraries/file-viewer/src/preview_doc/renderer/page"],(function(e,t,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PdfPage=void 0,r=i.__importStar(r),t.PdfPage=r.memo(e=>{const{index:t,pageData:i,isFocused:n,onMouseDown:s,onMouseEnter:o,onMouseMove:l,onMouseUp:c,onRef:d,pageClassName:p,scaleFactor:u,children:_,top:v,findInDocHighlights:f,findInDocCurrentHit:g}=e,{dimension:[E,w]}=i,b=r.useMemo(()=>({width:E*u,height:w*u,transform:`translateY(${v}px)`}),[E,w,u,v]);return r.createElement("li",{"data-index":t,key:t,style:b},r.createElement(a.Page,{className:p,data:i,onMouseDown:s,onMouseEnter:o,onMouseMove:l,onMouseUp:c,scaleFactor:u,isFocused:n,onRef:d,findInDocHighlights:f,findInDocCurrentHit:g},_))}),t.PdfPage.displayName="PdfPage",t.PdfPage.displayName="PdfPage"})),define("typescript/libraries/file-viewer/src/preview_doc/text_box",["require","exports","tslib","react","typescript/libraries/file-viewer/src/core/utils/browser_detection","typescript/libraries/file-viewer/src/preview_doc/types","typescript/libraries/file-viewer/src/preview_doc/preview_doc.module.css"],(function(e,t,i,r,a,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextBox=void 0,r=i.__importStar(r);const o=({text:e,x:t,y:i,width:n,height:o,dir:l,style:c,findInDocHighlights:d,findInDocCurrentHit:p,charOffset:u})=>{const _=d&&a.safari?"spacing":"spacingAndGlyphs",[v,f]=r.useState(),g=r.useCallback(t=>{const a=[];if(d&&null!=t){let n=0;d.forEach(l=>{if(void 0!==u&&(l.startingCharIndex<u||l.startingCharIndex>u+e.trimLeft().length))return;const d=null!=u?u:0,_=t?t.getStartPositionOfChar(Math.min(l.startingCharIndex-d,t.getNumberOfChars()-1)).x:void 0,v=t?t.getEndPositionOfChar(Math.min(l.endingCharIndex-d,t.getNumberOfChars()-1)).x:void 0;if(void 0===_||void 0===v)return;const f=l.hitNumber===p,g=o+3;a.push(r.createElement("rect",{x:_-1.5,y:i-o-1.5,width:v-_+3,height:g,opacity:1,fill:f?s.findInDocHighlightPrimary:s.findInDocHighlightSecondary,style:c,key:n})),n++})}f(a)},[e,i,o,c,d,p,u]);return r.createElement(r.Fragment,null,r.createElement("text",{className:s.textbox,direction:l,height:o,lengthAdjust:_,style:c,textLength:n,x:t,y:i,"data-test":"textbox",ref:d?g:void 0},e),d&&v)};o.displayName="HighlightedTextboxFragment";t.TextBox=({data:{r:[e,t,i,a],d:l,dir:c,transformedText:d,font:p,h:u},onClickLink:_,findInDocHighlights:v,findInDocCurrentHit:f})=>{t=-t;const g={fontSize:u};if(l&&(g.transform=`rotate(${-l}rad)`,g.transformOrigin=`${e}px ${t}px`),p&&(g.fontFamily=p.fontFamily,p.isBold&&(g.fontWeight="bold"),p.isItalic&&(g.fontStyle="italic")),1===d.length){const n=d[0];return r.createElement(o,{text:n.text,x:e,y:t,width:i,height:a,dir:c,style:g,findInDocCurrentHit:f,findInDocHighlights:v})}const E=d.reduce((e,t)=>e+t.text.length,0);let w=0;const b=d.map((s,l)=>{const c=w/E*i+e,d=s.text.length/E*i,p=r.createElement(o,{text:s.text,x:c,y:t,width:d,height:a,findInDocCurrentHit:f,findInDocHighlights:v,charOffset:w});switch(w+=s.text.length,s.type){case n.TextNodeType.email:const e=`mailto:${s.text}`;return r.createElement("a",{key:l,href:e,referrerPolicy:"no-referrer",onClick:()=>_(e)},p);case n.TextNodeType.link:return r.createElement("a",{key:l,href:s.href,target:"_blank",rel:"noreferrer noopener",referrerPolicy:"no-referrer",onClick:()=>_(s.href)},p);default:return p}});return r.createElement("g",{className:s.textbox,direction:c,style:g,"data-test":"textbox"},b)},t.TextBox.displayName="TextBox"})),define("typescript/libraries/file-viewer/src/preview_doc/text_layer",["require","exports","tslib","react","typescript/libraries/file-viewer/src/preview_doc/text_box","typescript/libraries/file-viewer/src/preview_doc/preview_doc.module.css","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,t,i,r,a,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayer=void 0,r=i.__importStar(r);class o extends r.PureComponent{constructor(){super(...arguments),this.handleLinkClick=e=>{e&&this.props.dispatch((0,s.openUrl)({url:e}))}}componentDidMount(){this.props.onTextRendered(this.props.data.pageIndex)}componentDidUpdate(e){e.data!==this.props.data&&this.props.onTextRendered(this.props.data.pageIndex)}render(){const{data:{textboxes:e,dimension:[t,i]},findInDocHighlights:s,findInDocCurrentHit:o,scaleFactor:l}=this.props,c={transform:`scale(${l})`},d=e.map((e,t)=>r.createElement(a.TextBox,{onClickLink:this.handleLinkClick,key:t,data:e,findInDocHighlights:null==s?void 0:s.get(t),findInDocCurrentHit:o}));return r.createElement("svg",{className:n.textLayer,viewBox:`0 -${i} ${t} ${i}`,width:t,height:i,style:c,"data-test":"text-layer"},d)}}t.TextLayer=o,o.displayName="TextLayer"})),define("typescript/libraries/file-viewer/src/preview_doc/text_transform",["require","exports","typescript/libraries/file-viewer/src/preview_doc/text/unicode","typescript/libraries/file-viewer/src/preview_doc/text/bidi","typescript/libraries/file-viewer/src/preview_doc/types"],(function(e,t,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transform=t.normalizeUrl=void 0;const n=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,s=/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,63}/,o=/(\s+)/;function l(e){return"http"===e.substr(0,4)?e:"http://"+e}function c(e){return e.split(o).map(e=>{if(o.test(e))return{type:a.TextNodeType.text,text:e.replace("\t"," ")};let t;return s.test(e)?{text:e,type:a.TextNodeType.email}:(t=e.match(n))&&t[2]&&t[4]?{href:l(e),text:e,type:a.TextNodeType.link}:{type:a.TextNodeType.text,text:e}}).reduce((e,t)=>{const i=e[e.length-1];return i&&i.type===a.TextNodeType.text&&t.type===a.TextNodeType.text?i.text+=t.text:e.push(t),e},[])}t.normalizeUrl=l,t.transform=function(e){const t=(0,i.getNormalizedUnicodes)();let a="";for(let r=0;r<e.length;r++){let n=e.charAt(r);void 0!==t[n]&&(n=t[n]),n=(0,i.reverseIfRtl)(n),"\t"===n&&(n=" "),a+=n}const n=(0,r.bidi)(a,-1,!1);return{dir:n.dir,str:c(n.str)}}})),define("typescript/libraries/file-viewer/src/preview_doc/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextNodeType=t.TextDir=void 0,(function(e){e.ltr="ltr",e.rtl="rtl",e.ttb="ttb"})(t.TextDir||(t.TextDir={})),(function(e){e[e.text=0]="text",e[e.email=1]="email",e[e.link=2]="link"})(t.TextNodeType||(t.TextNodeType={}))})),define("typescript/libraries/file-viewer/src/preview_audio_video/helper/thumbnails_helper",["require","exports","tslib","typescript/libraries/file-viewer/src/loading_helpers"],(function(e,t,i,r){"use strict";function a(e){const t={},i=e.text.split(/#xywh=/i);if(t.imageUrl=i[0],2===i.length){const e=i[1].split(/[ ,]+/);4===e.length&&(t.imageX=+e[0],t.imageY=+e[1],t.imageWidth=+e[2],t.imageHeight=+e[3])}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.loadVtt=t.preloadThumbImage=t.parseVttCue=void 0,t.parseVttCue=a,t.preloadThumbImage=function(e){const t=a(e);return t.imageUrl?(0,r.preloadImage)(t.imageUrl):Promise.reject("Unable to get imageUrl from vtt cue")};function n(e){return new Promise((t,i)=>{const r=[],a=new WebVTT.Parser(window,WebVTT.StringDecoder());a.oncue=function(e){r.push(e)},a.onparsingerror=function(e){i(e)},a.onflush=function(){t(r)},a.parse(e),a.flush()})}t.loadVtt=function(e){return(t=e,i.__awaiter(void 0,void 0,void 0,(function*(){return(yield fetch(t,{method:"GET",credentials:"include"})).text()}))).then(n);var t}})),define("typescript/libraries/file-viewer/src/toolbar/audio_video_markers",["require","exports","tslib","react","lodash","react-dom","classnames","dig-components/icons","dig-components/icons/src","dig-components/buttons","typescript/libraries/file-viewer/src/preview_audio_video/helper/thumbnails_helper","typescript/libraries/file-viewer/src/toolbar/toolbar.module.css","typescript/libraries/file-viewer/src/hooks/useStabilizedCallback","typescript/libraries/file-viewer/src/comments2/plugin/marker","react-redux","typescript/libraries/file-viewer/src/core/utils/time_utils"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeRangeMarker=t.AudioVideoMarkers=t.AudioVideoMarkersComponent=void 0,r=i.__importStar(r),a=i.__importStar(a),s=i.__importDefault(s),p=i.__importStar(p);var g;(function(e){e.Requesting="requesting",e.Failed="failed",e.ImageLoaded="image_loaded"})(g||(g={}));t.AudioVideoMarkersComponent=({threads:e,vttUrl:t,onScrubberThumbnailsLoaded:i,duration:n,openThreadInRightRail:E})=>{const w=(0,r.useRef)([]),[b,m]=(0,r.useState)(g.Requesting),[h,y]=(0,r.useState)(0),[P,T]=(0,r.useState)(0),[I,F]=(0,r.useState)(),[S,L]=(0,r.useState)(0),C=(0,r.useRef)(null),A=(0,v.useSelector)(e=>e.showResolvedComments),O=r.default.useMemo(()=>e?A?Object.entries(e):Object.entries(e).filter(e=>!e[1].resolvedInfo):void 0,[e,A]),x=r.default.useMemo(()=>O&&O.find(e=>{const t=(0,_.getTimeForThread)(e[1]);return void 0!==t&&100*Math.abs(S-t)/n<_.MARKER_WIDTH_PERCENT}),[O,S,n]),D=(0,u.useStabilizedCallback)(e=>{x&&(null==E||E(x[1]),e.stopPropagation())});(0,r.useEffect)(()=>{t&&(0,d.loadVtt)(t).then(e=>{w.current=e,e&&e.length>0&&(0,d.preloadThumbImage)(e[0]).then(()=>{m(g.ImageLoaded),null==i||i(!0)}).catch(()=>{null==i||i(!1),m(g.Failed)})}).catch(()=>{null==i||i(!1),m(g.Failed)})},[t,i]);const R=a.throttle((0,u.useStabilizedCallback)(e=>{if(!e.currentTarget)return;const i=e.currentTarget.getBoundingClientRect(),r=i.width,a=e.clientX-i.left,s=Math.min(Math.max(a,0),r)/r*n;if(T(i.width),y(e.clientX-i.left),L(s),t&&w.current){const e=w.current.find(e=>e.startTime<=s&&e.endTime>=s);e&&F((0,d.parseVttCue)(e))}}),50);(0,r.useEffect)(()=>{const e=C.current;if(e)return e.addEventListener("click",D),()=>e.removeEventListener("click",D)},[D,C]);const{imageUrl:M,imageX:N,imageY:k,imageWidth:V,imageHeight:j}=I||{},Y=b===g.Failed?80:128,U=b===g.ImageLoaded?{background:`url("${M}") no-repeat -${N}px -${k}px`,width:V,height:j}:b===g.Failed?{display:"none"}:{},B=Math.min(Math.max(0,h-Y/2),P-Y),K={left:B},z={left:h-(B+Y/2)},W=(0,f.formatTime)(S,n,(0,f.showTimestampDecimalPlaces)(n));return r.default.createElement(r.default.Fragment,null,O&&r.default.createElement("div",{className:p.commentMarkersContainer},O.map(e=>r.default.createElement(_.Marker,{key:e[0],duration:n,thread:e[1]}))),r.default.createElement("div",{className:p.thumbnailHolder,onMouseMove:R},r.default.createElement("div",{className:(0,s.default)(p.thumbnailWrapper,{[p.thumbnailHolderComment]:!!x,[p.thumbnailLoadError]:!!t&&b===g.Failed}),style:K,ref:C},!!t&&r.default.createElement("div",{className:p.thumbnailImage,style:U},b===g.Requesting?r.default.createElement("div",{className:"c-loader"}):null),!!x&&!!t&&r.default.createElement("div",{className:p.commentIconHolder},r.default.createElement(c.IconButton,{className:(0,s.default)(p.regularButton),variant:"transparent",size:"small",inverse:!0},r.default.createElement(o.UIIcon,{src:l.CommentLine}))),!!t&&r.default.createElement("div",{className:p.thumbnailTime}," ",W," "),r.default.createElement("div",{className:p.timeLine,style:z}))))},t.AudioVideoMarkersComponent.displayName="AudioVideoMarkersComponent",t.AudioVideoMarkersComponent.displayName="AudioVideoMarkersComponent";t.AudioVideoMarkers=e=>{var{container:a}=e,s=i.__rest(e,["container"]);return(0,n.createPortal)(r.default.createElement(t.AudioVideoMarkersComponent,Object.assign({},s)),a)},t.AudioVideoMarkers.displayName="AudioVideoMarkers";t.TimeRangeMarker=({timeRange:e,duration:t,container:i})=>{const a=0===t?0:100*e.start/t;let s;return s=e.end?0===t?0:100*(e.end-e.start)/t:0===t?0:100*(t-e.start)/t,(0,n.createPortal)(r.default.createElement("div",{className:p.rangeMarkersContainer},r.default.createElement("div",{className:p.rangeMarker,style:{left:`${a}%`,width:`${s}%`}})),i)}})),define("typescript/libraries/file-viewer/src/preview_doc/text/bidi",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bidi=void 0;const i=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","ON","ON","ET","ET","ET","ON","ON","ON","ON","ON","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","ON","ET","ET","ET","ET","ON","ON","ON","ON","L","ON","ON","BN","ON","ON","ET","ET","EN","EN","ON","L","ON","ON","ON","EN","L","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L"],r=["AN","AN","AN","AN","AN","AN","ON","ON","AL","ET","ET","AL","CS","AL","ON","ON","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","ON","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","ON","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL"];function a(e){return 0!=(1&e)}function n(e){return 0==(1&e)}function s(e,t,i){for(var r=t,a=e.length;r<a;++r)if(e[r]!==i)return r;return r}function o(e,t,i,r){for(var a=t;a<i;++a)e[a]=r}function l(e,t,i){for(var r=t,a=i-1;r<a;++r,--a){var n=e[r];e[r]=e[a],e[a]=n}}function c(e,t,i){return{str:e,dir:i?"ttb":t?"ltr":"rtl"}}let d=[],p=[];t.bidi=function(e,t,u){var _=!0,v=e.length;if(0===v||u)return c(e,_,u);d.length=v,p.length=v;var f,g,E=0;for(f=0;f<v;++f){d[f]=e.charAt(f);var w=e.charCodeAt(f),b="L";w<=255?b=i[w]:1424<=w&&w<=1524?b="R":1536<=w&&w<=1791?b=r[255&w]:1792<=w&&w<=2220&&(b="AL"),"R"!==b&&"AL"!==b&&"AN"!==b||E++,p[f]=b}if(0===E)return c(e,_=!0);-1===t&&(E/v<.3?(_=!0,t=0):(_=!1,t=1));var m=[];for(f=0;f<v;++f)m[f]=t;var h,y=a(t)?"R":"L",P=y,T=P,I=P;for(f=0;f<v;++f)"NSM"===p[f]?p[f]=I:I=p[f];for(I=P,f=0;f<v;++f)"EN"===(h=p[f])?p[f]="AL"===I?"AN":"EN":"R"!==h&&"L"!==h&&"AL"!==h||(I=h);for(f=0;f<v;++f)"AL"===(h=p[f])&&(p[f]="R");for(f=1;f<v-1;++f)"ES"===p[f]&&"EN"===p[f-1]&&"EN"===p[f+1]&&(p[f]="EN"),"CS"!==p[f]||"EN"!==p[f-1]&&"AN"!==p[f-1]||p[f+1]!==p[f-1]||(p[f]=p[f-1]);for(f=0;f<v;++f)if("EN"===p[f]){var F;for(F=f-1;F>=0&&"ET"===p[F];--F)p[F]="EN";for(F=f+1;F<v&&"ET"===p[F];++F)p[F]="EN"}for(f=0;f<v;++f)"WS"!==(h=p[f])&&"ES"!==h&&"ET"!==h&&"CS"!==h||(p[f]="ON");for(I=P,f=0;f<v;++f)"EN"===(h=p[f])?p[f]="L"===I?"L":"EN":"R"!==h&&"L"!==h||(I=h);for(f=0;f<v;++f)if("ON"===p[f]){var S=s(p,f+1,"ON"),L=P;f>0&&(L=p[f-1]);var C=T;S+1<v&&(C=p[S+1]),"L"!==L&&(L="R"),"L"!==C&&(C="R"),L===C&&o(p,f,S,L),f=S-1}for(f=0;f<v;++f)"ON"===p[f]&&(p[f]=y);for(f=0;f<v;++f)h=p[f],n(m[f])?"R"===h?m[f]+=1:"AN"!==h&&"EN"!==h||(m[f]+=2):"L"!==h&&"AN"!==h&&"EN"!==h||(m[f]+=1);var A,O=-1,x=99;for(f=0,g=m.length;f<g;++f)O<(A=m[f])&&(O=A),x>A&&a(A)&&(x=A);for(A=O;A>=x;--A){var D=-1;for(f=0,g=m.length;f<g;++f)m[f]<A?D>=0&&(l(d,D,f),D=-1):D<0&&(D=f);D>=0&&l(d,D,m.length)}for(f=0,g=d.length;f<g;++f){var R=d[f];"<"!==R&&">"!==R||(d[f]="")}return c(d.join(""),_)}})),define("typescript/libraries/file-viewer/src/preview_doc/text/unicode",["require","exports"],(function(e,t){"use strict";function i(e){var t;return function(){return e&&(t=Object.create(null),e(t),e=null),t}}Object.defineProperty(t,"__esModule",{value:!0}),t.reverseIfRtl=t.getNormalizedUnicodes=void 0;i((function(e){e[63721]=169,e[63193]=169,e[63720]=174,e[63194]=174,e[63722]=8482,e[63195]=8482,e[63729]=9127,e[63730]=9128,e[63731]=9129,e[63740]=9131,e[63741]=9132,e[63742]=9133,e[63726]=9121,e[63727]=9122,e[63728]=9123,e[63737]=9124,e[63738]=9125,e[63739]=9126,e[63723]=9115,e[63724]=9116,e[63725]=9117,e[63734]=9118,e[63735]=9119,e[63736]=9120}));var r=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];t.getNormalizedUnicodes=i((function(e){e[""]=" ",e[""]=" ",e[""]=" ",e[""]="",e[""]=" ",e[""]="IJ",e[""]="ij",e[""]="L",e[""]="l",e[""]="n",e[""]="s",e[""]="D",e[""]="D",e[""]="d",e[""]="LJ",e[""]="Lj",e[""]="lj",e[""]="NJ",e[""]="Nj",e[""]="nj",e[""]="DZ",e[""]="Dz",e[""]="dz",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="a",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=".",e[""]="..",e[""]="...",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="!!",e[""]=" ",e[""]="??",e[""]="?!",e[""]="!?",e[""]="",e[""]=" ",e[""]="Rs",e[""]="a/c",e[""]="a/s",e[""]="C",e[""]="c/o",e[""]="c/u",e[""]="",e[""]="F",e[""]="No",e[""]="TEL",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="FAX",e[""]="I",e[""]="II",e[""]="III",e[""]="IV",e[""]="V",e[""]="VI",e[""]="VII",e[""]="VIII",e[""]="IX",e[""]="X",e[""]="XI",e[""]="XII",e[""]="L",e[""]="C",e[""]="D",e[""]="M",e[""]="i",e[""]="ii",e[""]="iii",e[""]="iv",e[""]="v",e[""]="vi",e[""]="vii",e[""]="viii",e[""]="ix",e[""]="x",e[""]="xi",e[""]="xii",e[""]="l",e[""]="c",e[""]="d",e[""]="m",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="(1)",e[""]="(2)",e[""]="(3)",e[""]="(4)",e[""]="(5)",e[""]="(6)",e[""]="(7)",e[""]="(8)",e[""]="(9)",e[""]="(10)",e[""]="(11)",e[""]="(12)",e[""]="(13)",e[""]="(14)",e[""]="(15)",e[""]="(16)",e[""]="(17)",e[""]="(18)",e[""]="(19)",e[""]="(20)",e[""]="1.",e[""]="2.",e[""]="3.",e[""]="4.",e[""]="5.",e[""]="6.",e[""]="7.",e[""]="8.",e[""]="9.",e[""]="10.",e[""]="11.",e[""]="12.",e[""]="13.",e[""]="14.",e[""]="15.",e[""]="16.",e[""]="17.",e[""]="18.",e[""]="19.",e[""]="20.",e[""]="(a)",e[""]="(b)",e[""]="(c)",e[""]="(d)",e[""]="(e)",e[""]="(f)",e[""]="(g)",e[""]="(h)",e[""]="(i)",e[""]="(j)",e[""]="(k)",e[""]="(l)",e[""]="(m)",e[""]="(n)",e[""]="(o)",e[""]="(p)",e[""]="(q)",e[""]="(r)",e[""]="(s)",e[""]="(t)",e[""]="(u)",e[""]="(v)",e[""]="(w)",e[""]="(x)",e[""]="(y)",e[""]="(z)",e[""]="",e[""]="::=",e[""]="==",e[""]="===",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]=" ",e[""]=" ",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="()",e[""]="1",e[""]="2",e[""]="3",e[""]="4",e[""]="5",e[""]="6",e[""]="7",e[""]="8",e[""]="9",e[""]="10",e[""]="11",e[""]="12",e[""]="0",e[""]="1",e[""]="2",e[""]="3",e[""]="4",e[""]="5",e[""]="6",e[""]="7",e[""]="8",e[""]="9",e[""]="10",e[""]="11",e[""]="12",e[""]="13",e[""]="14",e[""]="15",e[""]="16",e[""]="17",e[""]="18",e[""]="19",e[""]="20",e[""]="21",e[""]="22",e[""]="23",e[""]="24",e[""]="1",e[""]="2",e[""]="3",e[""]="4",e[""]="5",e[""]="6",e[""]="7",e[""]="8",e[""]="9",e[""]="10",e[""]="11",e[""]="12",e[""]="13",e[""]="14",e[""]="15",e[""]="16",e[""]="17",e[""]="18",e[""]="19",e[""]="20",e[""]="21",e[""]="22",e[""]="23",e[""]="24",e[""]="25",e[""]="26",e[""]="27",e[""]="28",e[""]="29",e[""]="30",e[""]="31",e[""]="ff",e[""]="fi",e[""]="fl",e[""]="ffi",e[""]="ffl",e[""]="t",e[""]="st",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="";e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]=" ",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="_",e[""]="_",e[""]="_",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]="",e[""]=""})),t.reverseIfRtl=function(e){var t,i,a=e.length;if(a<=1||!((t=e.charCodeAt(0))>=(i=r[13]).begin&&t<i.end||t>=(i=r[11]).begin&&t<i.end))return e;for(var n="",s=a-1;s>=0;s--)n+=e[s];return n}})),define("typescript/libraries/file-viewer/src/preview_doc/renderer/pdf",["require","exports","tslib","react","classnames","typescript/libraries/file-viewer/src/preview_doc/sidebar","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/preview_doc/renderer/pdf_pages","typescript/libraries/file-viewer/src/preview_doc/preview_doc.module.css","typescript/libraries/file-viewer/src/ui/ui.module.css","typescript/libraries/file-viewer/src/preview_core.module.css","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/ui/header","typescript/libraries/file-viewer/src/ui/header.module.css","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/preview_doc/utils/sizing","typescript/libraries/file-viewer/src/keyboard/bindings","typescript/libraries/file-viewer/src/ui/close_button","typescript/libraries/file-viewer/src/keyboard/keyboard_connector","typescript/component_libraries/pro-ui/src/components/branding/file_viewer_preview"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f,g,E,w,b,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewPDF=void 0,r=i.__importStar(r),a=i.__importDefault(a);class h extends r.PureComponent{constructor(e){super(e),this.pdfPages=null,this.containerEl=null,this.pageRendered={},this.state={isSidebarFocused:!1,rendered:!1},this.handleSidebarPageChange=e=>{this.focusSidebar(),this.syncStorePageIndex(e,s.UserActionContext.DocSidebar),this.props.onPageNavigation&&this.props.onPageNavigation(e);const{logSidebarPageClicked:t}=this.props;t&&t()},this.dispatchResolvePageNavigation=()=>{this.props.dispatch((0,v.resolvePageNavigation)({fileViewerId:this.props.fileViewerId,previewKey:this.props.previewKey,sourceContext:s.UserActionContext.Default}))},this.focusSidebar=()=>{this.setState({isSidebarFocused:!0})},this.unfocusSidebar=()=>{this.setState({isSidebarFocused:!1})},this.handleCloseFullScreen=()=>{const{dispatch:e,previewKey:t,fileViewerId:i}=this.props;e((0,v.exitFullScreen)({previewKey:t,fileViewerId:i,sourceContext:s.UserActionContext.Default}))},this.handleInternalLinkClicked=e=>{this.props.onPageNavigation&&this.props.onPageNavigation(e),this.syncStorePageIndex(e,s.UserActionContext.DocLink)},this.handleImageLoad=e=>{this.pageRendered[e]|=2,this.props.onInteractive(),this.checkPageRendered()},this.handleImageError=()=>{this.props.onPageImageError&&this.props.onPageImageError()},this.handleTextRendered=e=>{this.pageRendered[e]|=1,this.checkPageRendered()},this.pageDown=()=>{this.pdfPages&&this.pdfPages.pageDown()},this.pageUp=()=>{this.pdfPages&&this.pdfPages.pageUp()},this.scrollDown=()=>{this.pdfPages&&this.pdfPages.scrollDown()},this.scrollUp=()=>{this.pdfPages&&this.pdfPages.scrollUp()},this.upBinding=()=>{this.state.isSidebarFocused?this.pageUp():this.scrollUp()},this.downBinding=()=>{this.state.isSidebarFocused?this.pageDown():this.scrollDown()},this.makeKeyboardBindings=()=>[...(0,E.getPageUpDownBindings)({pageUp:this.pageUp,pageDown:this.pageDown}),...(0,E.getUpDownBindings)({up:this.upBinding,down:this.downBinding}),...(0,E.getHomeEndBindings)({home:()=>this.syncStorePageIndex(0,s.UserActionContext.Keyboard),end:()=>{this.props.rivieraData&&this.syncStorePageIndex(this.props.rivieraData.pages.length-1,s.UserActionContext.Keyboard)}})],this.keybindings=this.makeKeyboardBindings()}checkPageRendered(){if(this.state.rendered)return;Object.keys(this.pageRendered).find(e=>3===this.pageRendered[+e])&&(this.setState({rendered:!0}),this.props.onRenderSucceeded&&this.props.onRenderSucceeded())}UNSAFE_componentWillReceiveProps(e){e.previewKey.serialized!==this.props.previewKey.serialized&&(this.setState({isSidebarFocused:!1,rendered:!1}),this.pageRendered={},this.syncStorePageIndex(0,s.UserActionContext.DocReset))}getContainerEl(){return this.containerEl}syncStorePageIndex(e,t){this.props.dispatch((0,v.pageNavigation)({fileViewerId:this.props.fileViewerId,previewKey:this.props.previewKey,sourceContext:t,pageIndex:e}))}jumpToPage(e){this.pdfPages&&this.pdfPages.jumpToPage(e)}render(){const{activePluginInstance:e,className:t,config:i,fileViewerUiData:s,data:v,dispatch:E,fileInfo:h,fileMetadata:y,filePreviewUiData:P,fileViewerId:T,height:I,intl:F,isEditMode:S,layerRenderFn:L,onMouseDown:C,onMouseEnter:A,onMouseMove:O,onMouseUp:x,onPageChange:D,onPageRef:R,onScroll:M,pageClassName:N,pagesClassName:k,pluginProps:V,previewKey:j,previewMetadata:Y,width:U,header:B,findInDocData:K,findInDocController:z,brandingInfo:W,sharedLinkInfo:H}=this.props,{currentPageIndex:G}=P,q=(0,p.getCurrentScaleFactorFromFilePreviewUi)(P),{isDocSidebarOpen:X,isFullScreen:Z}=s,{rendered:$}=this.state,J=(0,g.shouldShowDocSidebar)(U,f.PreviewType.SsrDoc),Q=J&&X;return r.createElement(r.Fragment,null,r.createElement("article",{className:(0,a.default)(l.container,t,{[d.isFullScreen]:Z}),style:{visibility:$?"visible":"hidden",width:U,height:I},ref:e=>this.containerEl=e},Z&&r.createElement(w.CloseButton,{className:(0,a.default)(l.close,c.close),onClick:this.handleCloseFullScreen}),$&&J&&!Z?r.createElement(n.Sidebar,{isOpened:X,isEditMode:S,currentPageIndex:G,pages:v,intl:F,isFocused:this.state.isSidebarFocused,onPageChange:this.handleSidebarPageChange,onFocus:this.focusSidebar,onBlur:this.unfocusSidebar,featureConfig:i}):null,r.createElement("div",{className:_.headerContainer},r.createElement(m.BrandingFileViewerPreview,{backgroundClass:d.brandingBackgroundImage,logoClass:d.brandingLogo,teamAndUserBranding:{teamBranding:H,userBranding:W}},V&&r.createElement(u.PluginHeader,{pluginProps:V,activePluginInstance:e||void 0,header:B}),r.createElement(o.PdfPages,{className:(0,a.default)(l.pdfViewport,k),count:v?v.length:1,height:I,onMouseDown:C,onMouseEnter:A,onMouseMove:O,onMouseUp:x,onPageChange:D,onScroll:M,pageClassName:N,currentPageIndex:G,pages:(v||[]).slice(0,$?void 0:1),ref:e=>this.pdfPages=e,scaleFactor:q,width:Q?U-n.SIDEBAR_WIDTH:U,pageNavigation:P.pageNavigation,dispatchResolvePageNavigation:this.dispatchResolvePageNavigation,onPageRef:R,previewKey:j,findInDocData:K,findInDocController:z},L({activePluginInstance:e,config:i,fileViewerUiData:s,dispatch:E,fileInfo:h,fileMetadata:y,filePreviewUiData:P,fileViewerId:T,intl:F,pluginProps:V,previewKey:j,previewMetadata:Y,onImageError:this.handleImageError,onImageLoad:this.handleImageLoad,onInternalLinkClicked:this.handleInternalLinkClicked,onTextRendered:this.handleTextRendered}))))),r.createElement(b.KeyboardBindingConnector,{name:"preview_pdf",keyboardBindings:this.keybindings}))}}t.PreviewPDF=h,h.displayName="PreviewPDF"})),define("typescript/libraries/file-viewer/src/preview_doc/renderer/ppt",["require","exports","tslib","react","lodash","classnames","typescript/libraries/file-viewer/src/preview_doc/sidebar","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/utils/sizing_utils","typescript/libraries/file-viewer/src/preview_doc/renderer/page","typescript/libraries/file-viewer/src/preview_doc/preview_doc.module.css","typescript/libraries/file-viewer/src/preview_core.module.css","typescript/libraries/file-viewer/src/ui/header.module.css","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/ui/header","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/toolbar/configuration","typescript/libraries/file-viewer/src/keyboard/bindings","typescript/libraries/file-viewer/src/ui/close_button","typescript/libraries/file-viewer/src/keyboard/keyboard_connector","typescript/component_libraries/pro-ui/src/components/branding/file_viewer_preview","typescript/libraries/file-viewer/src/preview_doc/utils/sizing"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f,g,E,w,b,m,h,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewPPTWithOnlyImageLayer=t.PreviewPPT=void 0,r=i.__importStar(r),n=i.__importDefault(n);class P extends r.PureComponent{constructor(e){super(e),this.state={isSidebarFocused:!0,rendered:!1},this.pageRendered={},this.focusSidebar=()=>{this.setState({isSidebarFocused:!0})},this.unfocusSidebar=()=>{this.setState({isSidebarFocused:!1})},this.handleSidebarPageChange=e=>{this.focusSidebar(),this.props.onPageChange&&this.props.onPageChange(e,o.UserActionContext.DocSidebar)},this.handleWheel=(0,a.debounce)(e=>{const{data:t,width:i,height:r,filePreviewUiData:a,onPageChange:n}=this.props;if(!t.length)return;const{currentPageIndex:s}=a,c=(0,_.getCurrentScaleFactorFromFilePreviewUi)(a),{dimension:d}=t[s],p=(u=d,v=[i,r],(0,l.calculateFitBox)(v[0],v[1],u[0]/u[1])[0]/u[0]);var u,v;c.toFixed(2)<=p.toFixed(2)&&n&&n(s+(e.deltaY>0?1:-1),o.UserActionContext.MouseWheel)},40,{leading:!0,trailing:!1}),this.handleClose=()=>{const{dispatch:e,previewKey:t,fileViewerId:i}=this.props;e((0,g.exitFullScreen)({previewKey:t,fileViewerId:i,sourceContext:o.UserActionContext.Default}))},this.handleImageLoad=e=>(this.pageRendered[e]|=2,this.props.onInteractive(),this.checkPageRendered()),this.handleTextRendered=e=>{this.pageRendered[e]|=1,this.checkPageRendered()},this.changePage=(e,t)=>{const{onPageChange:i}=this.props;i(e,t)},this.pageFirst=e=>{this.changePage(0,e)},this.pageLast=e=>{const t=this.props.rivieraData;t&&this.changePage(t.pages.length-1,e)},this.pageNext=e=>{const{currentPageIndex:t}=this.props.filePreviewUiData;this.changePage(t+1,e)},this.pagePrev=e=>{const{currentPageIndex:t}=this.props.filePreviewUiData;this.changePage(t-1,e)},this.pageUpKeyboard=()=>this.pagePrev(o.UserActionContext.Keyboard),this.pageDownKeyboard=()=>this.pageNext(o.UserActionContext.Keyboard),this.pageFirstKeyboard=()=>this.pageFirst(o.UserActionContext.Keyboard),this.pageLastKeyboard=()=>this.pageLast(o.UserActionContext.Keyboard),this.keyboardBindings=[...(0,w.getPageUpDownBindings)({pageUp:this.pageUpKeyboard,pageDown:this.pageDownKeyboard}),...(0,w.getUpDownBindings)({up:this.pageUpKeyboard,down:this.pageDownKeyboard}),...(0,w.getHomeEndBindings)({home:this.pageFirstKeyboard,end:this.pageLastKeyboard})],e.findInDocController&&e.findInDocController.setRetrieveCurrentPageIndex(()=>this.props.pageNavigation?this.props.pageNavigation.pageIndex:this.props.filePreviewUiData.currentPageIndex)}checkPageRendered(){!this.state.rendered&&Object.keys(this.pageRendered).find(e=>3===this.pageRendered[+e])&&(this.setState({rendered:!0}),this.props.onRenderSucceeded&&this.props.onRenderSucceeded())}handleInternalLinkClicked(){}handleImageError(){}UNSAFE_componentWillReceiveProps(e){e.previewKey.serialized!==this.props.previewKey.serialized&&(this.setState({isSidebarFocused:!1,rendered:!1}),this.pageRendered={},this.props.onPageChange&&this.props.onPageChange(0,o.UserActionContext.DocReset))}componentDidUpdate(){this.props.pageNavigation&&(this.props.onPageChange(this.props.pageNavigation.pageIndex,o.UserActionContext.Default),this.props.dispatch((0,g.resolvePageNavigation)({previewKey:this.props.previewKey,fileViewerId:this.props.fileViewerId,sourceContext:o.UserActionContext.Default})))}render(){const{activePluginInstance:e,className:t,config:i,fileViewerUiData:a,data:o,dispatch:l,fileInfo:g,fileMetadata:w,filePreviewUiData:P,fileViewerId:T,height:I,intl:F,layerRenderFn:S,onPageMouseDown:L,onPageMouseEnter:C,onPageMouseMove:A,onPageMouseUp:O,pageClassName:x,pluginProps:D,previewKey:R,previewMetadata:M,refCallback:N,width:k,pageNavigation:V,responsiveSize:j,findInDocData:Y,header:U,brandingInfo:B,sharedLinkInfo:K}=this.props,z=V?V.pageIndex:P.currentPageIndex,W=(0,_.getCurrentScaleFactorFromFilePreviewUi)(P),{isDocSidebarOpen:H,isFullScreen:G}=a,{isSidebarFocused:q,rendered:X}=this.state,Z=(0,E.noToolbarShown)(j,i),$=X&&(0,y.shouldShowDocSidebar)(k,f.PreviewType.SsrDoc)&&!G;return r.createElement(r.Fragment,null,r.createElement("article",{ref:N,className:(0,n.default)(d.container,t,{[p.isFullScreen]:G}),style:{visibility:X?"visible":"hidden",height:I,width:k}},G&&r.createElement(b.CloseButton,{onClick:this.handleClose,isInverse:!1}),$?r.createElement(s.Sidebar,{currentPageIndex:z,pages:o,intl:F,isFocused:q,onPageChange:this.handleSidebarPageChange,onFocus:this.focusSidebar,onBlur:this.unfocusSidebar,isOpened:H,featureConfig:i}):null,r.createElement("div",{className:u.headerContainer},r.createElement(h.BrandingFileViewerPreview,{backgroundClass:p.brandingBackgroundImage,logoClass:p.brandingLogo,teamAndUserBranding:{teamBranding:K,userBranding:B}},D&&r.createElement(v.PluginHeader,{pluginProps:D,activePluginInstance:e||void 0,header:U}),r.createElement("section",{className:d.pptViewport,onWheel:this.handleWheel},r.createElement("div",{className:(0,n.default)(d.pptSizer,{[d.pptFullSizer]:Z})},r.createElement(c.Page,{className:x,key:z,onMouseDown:L,onMouseEnter:C,onMouseMove:A,onMouseUp:O,onRef:this.props.onPageRef,data:o?o[z]:void 0,scaleFactor:W,findInDocHighlights:null==Y?void 0:Y.highlights.get(z),findInDocCurrentHit:null==Y?void 0:Y.currentHit},S({activePluginInstance:e,config:i,fileViewerUiData:a,dispatch:l,fileInfo:g,fileMetadata:w,filePreviewUiData:P,fileViewerId:T,intl:F,pluginProps:D,previewKey:R,previewMetadata:M,onImageError:this.handleImageError,onImageLoad:this.handleImageLoad,onInternalLinkClicked:this.handleInternalLinkClicked,onTextRendered:this.handleTextRendered}))))))),r.createElement(m.KeyboardBindingConnector,{name:"preview_ppt",keyboardBindings:this.keyboardBindings}))}}t.PreviewPPT=P,P.displayName="PreviewPPT";t.PreviewPPTWithOnlyImageLayer=class extends P{checkPageRendered(){!this.state.rendered&&Object.keys(this.pageRendered).find(e=>2===this.pageRendered[+e])&&(this.setState({rendered:!0}),this.props.onRenderSucceeded&&this.props.onRenderSucceeded())}}})),define("typescript/libraries/file-viewer/src/comments2/plugin/marker",["require","exports","tslib","react","typescript/libraries/file-viewer/src/toolbar/toolbar.module.css"],(function(e,t,i,r,a){"use strict";function n(e){var t;switch(null===(t=e.annotation)||void 0===t?void 0:t.type){case"audio":case"video":return e.annotation.time/100;default:return}}Object.defineProperty(t,"__esModule",{value:!0}),t.Marker=t.getTimeForThread=t.MARKER_WIDTH_PERCENT=void 0,r=i.__importDefault(r),a=i.__importStar(a),t.MARKER_WIDTH_PERCENT=2,t.getTimeForThread=n;t.Marker=({duration:e,thread:t})=>{const i=n(t);if(void 0===i)return null;const s=0===e?0:100*i/e;return r.default.createElement("div",{className:a.commentMarker,style:{left:`${s}%`}})},t.Marker.displayName="Marker"})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/download_plugin",["require","exports","tslib","react","metaserver/static/js/core/i18n","dig-components/menu","dig-components/buttons","dig-components/icons/src","dig-components/icons","dig-components/tooltips","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/action_bar/file_actions/portable/utils","metaserver/static/js/action_bar/file_actions/portable/download","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils","metaserver/static/js/file_store/utils","metaserver/static/js/share_download/ui/util","metaserver/static/js/file_viewer/sdk_file_viewer/download_utils","metaserver/static/js/file_viewer/sdk_file_viewer/utils","metaserver/static/js/user_survey/user_survey","metaserver/static/js/sync_everything/constants","metaserver/static/js/browse/data/selectors","metaserver/static/js/browse/data/store","metaserver/static/js/file_viewer/sdk_file_viewer/utils","metaserver/static/js/admin/registration_source_constants"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f,g,E,w,b,m,h,y,P){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeDownloadPlugin=void 0,r=i.__importDefault(r);const T=[E.SDKPreviewSurface.BROWSE,E.SDKPreviewSurface.SEARCH,E.SDKPreviewSurface.STANDALONE_PREVIEW],I=(e,t)=>{t&&T.includes(t)&&w.UserSurvey.trackEvent("download_item","previews"),(0,E.isVideoPreview)(e)&&w.UserSurvey.trackEvent("video_preview_download","previews")};t.makeDownloadPlugin=(e,t,i,n,s,c,E,w,T,S)=>{const L=(0,p.makePluginActionDefinition)({label:a.intl.formatMessage(d.DOWNLOAD_ACTION_STRING),icon:r.default.createElement(l.UIIcon,{src:o.DownloadLine}),id:y.DOWNLOAD_ACTION_PLUGIN_ID,action:()=>{t.logUserAction("download","title_bar_open_split_button");const{file:r}=e();I(r,i);const{rootNSID:a,blockHash:s}=(0,m.getBrowseState)((0,h.getStoreForBrowse)().getState()).context;n&&a&&(0,b.isUnmountedBackupBrowse)(n,a)?s&&(0,v.isBrowseFile)(r)&&(0,u.downloadSingleFileAsZip)({fqPath:r.fq_path,rootNsId:a,source:"PREVIEWS",blockHash:s,user:n}):(0,u.downloadSingleFile)({href:r.href,source:"PREVIEWS",isFswm:(0,v.isSharedFile)(r)})}}),[C,A]=F({downloadAllowed:!!c&&(0,f.isDownloadAllowed)(c),downloadAction:()=>{t.logUserAction("download","title_bar_download_split_button");const{file:r}=e();I(r,i),(0,g.downloadActiveFile)(r,n,E,w,t.logUserAction,s,T)},saveACopyToDropboxAction:()=>{const{file:i}=e();(0,g.saveToDropbox)(i,e=>t.logUserAction(e,"title_bar_download_split_button"),n,s,E,P.RegistrationSource.SHMODEL_SAVE_TO_REGISTER,S)},getActiveFile:e,user:n,shareToken:s,encryptionOptions:E});return{actionDefinitions:()=>{const{file:t}=e();if(!(0,_.isLiveFile)(t)||(0,_.isPnmLinkNodeSelected)(t)||(0,_.isCloudDoc)(t))return{};let i;return i=(0,v.isSharedFile)(t)?n||!A?[C]:[C,A]:[L],{atTopLevelIfSpace:i,alwaysInOverflow:[i]}}}};const F=({downloadAction:e,saveACopyToDropboxAction:t,shareToken:i,downloadAllowed:u,user:_})=>{var v,f;const g=r.default.createElement(l.UIIcon,{src:o.DownloadLine}),E=a.intl.formatMessage(d.DOWNLOAD_ACTION_STRING),w=e=>{e.menuItem.handler()},b=t=>{t.preventDefault(),t.stopPropagation(),e()},m=t=>{"Enter"===t.key&&(t.preventDefault(),t.stopPropagation(),e())},h=a.intl.formatMessage({id:"3IQVpL",defaultMessage:"You do not have permission to download this file"}),P=a.intl.formatMessage({id:"A9yx17",defaultMessage:"You do not have permission to save a copy of this file"}),T=(0,p.makePluginActionDefinition)({icon:g,label:E,action:e,id:y.DOWNLOAD_ACTION_PLUGIN_ID,disabled:u?{disabled:!1}:{disabled:!0,tooltipMessage:h}});let I=null;i&&(I=(0,p.makePluginActionDefinition)({icon:r.default.createElement(l.UIIcon,{src:o.DropboxLine}),label:a.intl.formatMessage({id:"WiS7tZ",defaultMessage:"Save a copy to Dropbox"}),action:()=>{t()},id:"SHARECOPY_ACTION",disabled:u?{disabled:!1}:{disabled:!0,tooltipMessage:P},overflowItemTooltipDataAttribute:"action-bar-download-split-button-menu-save-a-copy-overflow-item"}));const F=(e,t)=>e?r.default.createElement(c.Tooltip,{title:t},r.default.createElement("div",null,e)):null;if(!_)return[{id:T.id,renderButton:e=>{var t;const i=null===(t=T.renderButton)||void 0===t?void 0:t.call(T,e);return r.default.createElement(r.default.Fragment,null,u?i:F(i,h))},overflowItem:u?T.overflowItem:null!==(v=F(T.overflowItem,h))&&void 0!==v?v:void 0},...I?[{id:I.id,renderButton:e=>{var t;const i=null===(t=null==I?void 0:I.renderButton)||void 0===t?void 0:t.call(I,e);return r.default.createElement(r.default.Fragment,null,u?i:F(i,P))},overflowItem:u?I.overflowItem:null!==(f=F(I.overflowItem,P))&&void 0!==f?f:void 0}]:[]];const S=r.default.createElement(r.default.Fragment,null,T.overflowItem,null==I?void 0:I.overflowItem),L=({buttonProps:e})=>r.default.createElement(n.Menu.Wrapper,{onSelection:w},({getTriggerProps:t,getContentProps:i})=>r.default.createElement(r.default.Fragment,null,r.default.createElement(s.Button,Object.assign({"aria-label":"Show options"},e,t(),{disabled:!u,"data-tooltip":"action-bar-download-split-button-menu"})),r.default.createElement(n.Menu.Content,Object.assign({},i(),{placement:"bottom-end"}),r.default.createElement(n.Menu.Segment,null,S)))),C=r.default.createElement(n.Menu.Submenu,{disabled:!u,withTriggerContent:E,withLeftAccessory:g},r.default.createElement(n.Menu.Segment,null,S));return[{renderButton:e=>{const t=r.default.createElement(s.SplitButton,{onClick:b,onKeyPress:m,variant:"opacity",renderMenu:L,disabled:!u},!e&&g,E);return u?t:F(t,h)},overflowItem:u?C:F(C,h)}]}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/open_dropdown_plugin",["require","exports","tslib","react","react-redux","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils","metaserver/static/js/core/i18n","dig-components/menu","dig-components/buttons","dig-components/icons","dig-components/icons/src","metaserver/static/js/extensions/data/store","metaserver/static/js/extensions/data/helpers","metaserver/static/js/extensions/data/selectors","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/extensions/extensions_menu_component_v2","metaserver/static/js/file_viewer/unity/with_unity","metaserver/static/js/file_store/utils","metaserver/static/js/file_viewer/sdk_file_viewer/utils","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/unity/features","metaserver/static/js/unity/check_file_cache","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/file_actions","typescript/libraries/file-viewer/src/core/logging/constants"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v,f,g,E,w,b,m,h,y,P){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeOpenDropdownAction=t.OpenMenuContent=void 0,r=i.__importDefault(r),h=i.__importDefault(h);const T={surface:"previews"};t.OpenMenuContent=e=>(0,E.isBrowseFile)(e.file)?r.default.createElement(g.WithUnity,{file:e.file,user:e.user,render:t=>r.default.createElement(f.ExtensionsPopoverContent,Object.assign({},e,{unityInfo:t}))}):r.default.createElement(f.ExtensionsPopoverContent,Object.assign({},e)),t.OpenMenuContent.displayName="OpenMenuContent";const I=(e,t,i)=>{if((0,E.isBrowseFile)(e)&&(0,n.isLiveFile)(e)&&!(0,n.isInsideVaultFolder)(e)&&m.UnityFeatures.isUnitySupported()&&"ns_path"in e&&(null===h.default||void 0===h.default?void 0:h.default.is_cached_and_locally_available(e.ns_id,e.ns_path)))return()=>(0,y.openInDesktopAction)(e,t,i)},F=(e,t)=>{const i=(0,a.useSelector)(t=>(0,_.getOpenActionsForFile)(t,e),a.shallowEqual),n=r.default.useMemo(()=>(0,u.partitionActions)(i).cloudEditors,[i]);if((0,E.isSharedFile)(e)){if(0===n.length)return!1;if((e=>(null==e?void 0:e.linkType)===b.SharedLinkType.Shmodel)(t))return!1}return!0},S=({file:e,shareToken:t,icon:i,label:a,content:n,hideIcon:s,handleSelection:c})=>F(e,t)?r.default.createElement(o.Menu.Wrapper,{onSelection:c},({getTriggerProps:e,getContentProps:t})=>r.default.createElement(r.default.Fragment,null,r.default.createElement(l.Button,Object.assign({},e(),{variant:"opacity",withIconLeft:s?null:i,withDropdownIcon:!0}),a),r.default.createElement(o.Menu.Content,Object.assign({},t()),n))):null;S.displayName="OpenButton";const L=({file:e,shareToken:t,icon:i,label:a,content:n})=>F(e,t)?r.default.createElement(o.Menu.Submenu,{withTriggerContent:a,withLeftAccessory:i},n):null;L.displayName="OpenOverflow";const C=({file:e,shareToken:i,user:n,store:o,context:l})=>{const p=r.default.createElement(t.OpenMenuContent,{user:n,file:e,isInActionBar:!0,telemetryContext:T,openDesktopActionHandler:I(e,n,l)}),u=r.default.createElement(c.UIIcon,{src:d.OpenLine}),_=s.intl.formatMessage(v.OPEN_IN_ACTION_STRING),f=e=>{e.menuItem.handler(),l.logUserAction(e.menuItem.userAction||"unknown",P.UserActionContext.Toolbar,Object.assign({},e.menuItem.actionName&&{app_action_name:e.menuItem.actionName}))};return{renderButton:t=>r.default.createElement(a.Provider,{store:o},r.default.createElement(S,{icon:u,content:p,file:e,shareToken:i,handleSelection:f,hideIcon:t,label:_})),overflowItem:r.default.createElement(a.Provider,{store:o},r.default.createElement(L,{icon:u,content:p,file:e,shareToken:i,handleSelection:f,label:_})),id:w.OPEN_DROPDOWN_ACTION_PLUGIN_ID}};C.displayName="OpenDropdownPreview";t.makeOpenDropdownAction=(e,t,i)=>({actionDefinitions:()=>{const r=(0,p.getStore)(),{file:a,shareToken:s}=e();if(!(0,n.isLiveFile)(a)||(0,n.isInsideVaultFolder)(a)||(0,n.isPnmLinkNodeSelected)(a))return{};const o=C({file:a,shareToken:s,store:r,user:t,context:i});return{atTopLevelIfSpace:[o],alwaysInOverflow:[[o]]}}})})),define("typescript/libraries/file-viewer/src/file_viewer/context_provider",["require","exports","tslib","react"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileViewerContextProvider=t.useFileViewerContext=void 0;const a=(r=i.__importDefault(r)).default.createContext(null);a.displayName="FileViewerContext";t.useFileViewerContext=()=>r.default.useContext(a),t.FileViewerContextProvider=a.Provider})),define("typescript/libraries/file-viewer/src/logging/timing",["require","exports","tslib","react","react-redux","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/middlewares/analytics","typescript/libraries/file-viewer/src/file_viewer/context_provider","typescript/libraries/file-viewer/src/logging/performance"],(function(e,t,i,r,a,n,s,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTimingLogging=void 0,r=i.__importDefault(r);const c=new Set([l.PreviewsTimingEvents.SKELETON_MOUNT,l.PreviewsTimingEvents.SKELETON_IMAGE_LOAD,l.PreviewsTimingEvents.SKELETON_DOC_RIVIERA_CALL_END,l.PreviewsTimingEvents.SKELETON_DOC_IMAGE_LOAD,l.PreviewsTimingEvents.CONTAINER_CODE_START,l.PreviewsTimingEvents.COLLECTION_VIEWER_CODE_START,l.PreviewsTimingEvents.COLLECTION_VIEWER_MOUNT,l.PreviewsTimingEvents.SDK_FILE_VIEWER_CODE_START,l.PreviewsTimingEvents.FVSDK_CONSTRUCTOR,l.PreviewsTimingEvents.FVSDK_INITIALIZE_START,l.PreviewsTimingEvents.FVSDK_PLUGINS_INITIALIZED,l.PreviewsTimingEvents.FVSDK_GET_RIVIERA_DATA_START_START,l.PreviewsTimingEvents.FVSDK_GET_PREVIEW_METADATA,l.PreviewsTimingEvents.FVSDK_GET_RIVIERA_DATA,l.PreviewsTimingEvents.FVSDK_INITIALIZE_COMPLETE,l.PreviewsTimingEvents.FVSDK_APP_MOUNT,l.PreviewsTimingEvents.FVSDK_IMAGE_CONTAINER_START,l.PreviewsTimingEvents.FVSDK_IMAGE_CONTAINER_MOUNT,l.PreviewsTimingEvents.FVSDK_IMAGE_ON_LOAD,l.PreviewsTimingEvents.FVSDK_DOC_CONTAINER_START,l.PreviewsTimingEvents.FVSDK_DOC_CONTAINER_MOUNT,l.PreviewsTimingEvents.FVSDK_VIDEO_CONTAINER_MOUNT,l.PreviewsTimingEvents.FVSDK_MARK_TTI]),d=new Set([l.PreviewsTimingEvents.FVSDK_FULL_IMAGE_ON_LOAD]),p=(e,t,i)=>{const n=(0,a.useSelector)(t=>t.loggingSession[e]),{batteries:c}=(0,o.useFileViewerContext)(),d=r.default.useRef(!1);return{onLogTimeline:r.default.useCallback(()=>{var e,r;const a=l.PreviewsEventLogger.getStartEntry();if(a&&!d.current){const o=l.PreviewsEventLogger.getEventTimeline();Object.entries(o).forEach(([e,r])=>{var a,o;i.has(e)&&(null===(o=null===(a=null==c?void 0:c.logger)||void 0===a?void 0:a.logDuration)||void 0===o||o.call(a,{eventName:t,durationInMs:r,tags:{event:e},session:n?(0,s.serializeSession)(n):void 0}))}),null===(r=null===(e=null==c?void 0:c.logger)||void 0===e?void 0:e.logDuration)||void 0===r||r.call(e,{eventName:t,durationInMs:a.startTime,tags:{event:"session_start_since_load"},session:n?(0,s.serializeSession)(n):void 0}),d.current=!0}},[n,c])}};t.useTimingLogging=e=>{const t=(0,a.useDispatch)(),i=(0,a.useSelector)(t=>t.loggingSession[e]),{batteries:u}=(0,o.useFileViewerContext)(),{onLogTimeline:_}=p(e,"preview_timeline",c),{onLogTimeline:v}=p(e,"preview_ttvc_timeline",d),f=r.default.useCallback(()=>{l.PreviewsEventLogger.mark(l.PreviewsTimingEvents.FVSDK_MARK_TTI),t((0,n.logTTI)(e)),_()},[e,t,_]),g=r.default.useCallback(e=>{var t,r,a;(null===(t=e.detail)||void 0===t?void 0:t.value)&&(null===(a=null===(r=null==u?void 0:u.logger)||void 0===r?void 0:r.logDuration)||void 0===a||a.call(r,{eventName:"TTI",durationInMs:e.detail.value,shouldLogToHive:!0,tags:{navigation_type:e.detail.isAjax?"ajax":"page_load"},session:i?(0,s.serializeSession)(i):void 0}))},[u,i]),E=r.default.useCallback(e=>{var t,r,a,n;(null===(t=e.detail)||void 0===t?void 0:t.value)&&(null===(a=null===(r=null==u?void 0:u.logger)||void 0===r?void 0:r.logDuration)||void 0===a||a.call(r,{eventName:"visually_complete",durationInMs:e.detail.value,tags:{navigation_type:null!==(n=e.detail.navigation_type)&&void 0!==n?n:"unknown",file_flip:String(!!(null==i?void 0:i.extra.was_flipped))},shouldLogToHive:!0,session:i?(0,s.serializeSession)(i):void 0})),v()},[u,i]),w=r.default.useCallback(e=>{var t,r,a;(null===(t=e.detail)||void 0===t?void 0:t.value)&&(null===(a=null===(r=null==u?void 0:u.logger)||void 0===r?void 0:r.logDuration)||void 0===a||a.call(r,{eventName:"largest_contentful_paint",durationInMs:e.detail.value,shouldLogToHive:!0,session:i?(0,s.serializeSession)(i):void 0}))},[u,i]);return r.default.useEffect(()=>(window.addEventListener("time_to_interactive",g),window.addEventListener("visually_complete",E),window.addEventListener("largest_contentful_paint",w),()=>{window.removeEventListener("time_to_interactive",g),window.removeEventListener("visually_complete",E),window.removeEventListener("largest_contentful_paint",w)}),[g,E,w]),{onLogTTI:f}}})),define("typescript/libraries/file-viewer/src/preview_doc/renderer/find_in_doc/find_in_doc_controller",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/kmp_search"],(function(e,t,i,r,a,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FindInDocController=void 0;t.FindInDocController=class{constructor(e){this.addSyntheticSpaceBetweenTextboxes=({segments:e,segmentIndex:t,chunkIndex:i})=>{const r=e[t].chunks[i],a=e[t].chunks[i+1];return this.isNewlineTextbox(r,a)||this.isHorizontalSpaceTextbox(r,a)},this.args=e,this.kmpSearch=new s.KMPSearch(()=>this.args.retrievePages().map(e=>{var{textboxes:t}=e,r=i.__rest(e,["textboxes"]);return Object.assign(Object.assign({},r),{chunks:t})}),{shouldAddSyntheticSpace:this.addSyntheticSpaceBetweenTextboxes,parseText:this.parseText})}setRetrieveCurrentPageIndex(e){this.retrieveCurrentPageIndex=e}initializeSearch(){var e,t;(null===(e=this.args.previewMetadata)||void 0===e?void 0:e.content)&&(null===(t=this.args.rivieraData)||void 0===t?void 0:t.metadata)&&this.args.dispatch((0,r.fetchPageDataWithMetadata)({fileViewerId:this.args.fileViewerId,previewKey:this.args.previewKey,textUrlTmpl:this.args.previewMetadata.content.text_url_tmpl,startPage:0,endPage:this.args.rivieraData.metadata.page_count}))}onNext(e){this.searchResult&&(this.args.dispatch((0,a.logUserActionEvent)({userAction:n.UserAction.FindInDocNext,fileViewerId:this.args.fileViewerId,actionContext:"keyboard"===e?n.UserActionContext.Keyboard:n.UserActionContext.FindInDocSearchbar,extra:{find_method:e}})),this.searchResult.currentHit++,this.searchResult.currentHit>=this.searchResult.hits.length&&(this.searchResult.currentHit=0),this.jumpTo(this.searchResult.hits[this.searchResult.currentHit]))}onPrevious(e){this.searchResult&&(this.args.dispatch((0,a.logUserActionEvent)({userAction:n.UserAction.FindInDocPrev,fileViewerId:this.args.fileViewerId,actionContext:"keyboard"===e?n.UserActionContext.Keyboard:n.UserActionContext.FindInDocSearchbar,extra:{find_method:e}})),this.searchResult.currentHit--,this.searchResult.currentHit<0&&(this.searchResult.currentHit=this.searchResult.hits.length-1),this.jumpTo(this.searchResult.hits[this.searchResult.currentHit]))}jumpTo(e){this.args.dispatch((0,r.updateDocCurrentPageIndex)({fileViewerId:this.args.fileViewerId,previewKey:this.args.previewKey,pageIndex:e.pageIndex,sourceContext:n.UserActionContext.Keyboard})),this.args.dispatch((0,r.pageNavigation)({fileViewerId:this.args.fileViewerId,previewKey:this.args.previewKey,pageIndex:e.pageIndex,centerOnYOffset:e.pageYOffset,sourceContext:n.UserActionContext.Keyboard}))}onReset(){this.searchResult=void 0,this.currentSearchTerm=void 0,this.args.onSearchResult(void 0)}search(e){if(!e)return void this.onReset();if(this.currentSearchTerm===e||null==this.kmpSearch)return;this.currentSearchTerm=e;const t=[];e=e.toLowerCase().normalize("NFKC");this.kmpSearch.searchSegments(e,({segments:e,segmentIndex:i,chunkIndex:r})=>{const a=e[i].dimension[1]-e[i].chunks[r].r[1];t.push({pageIndex:i,pageYOffset:a})},e=>{this.searchResult={highlights:e,hits:t,currentHit:this.findStartingHit(t)},this.args.onSearchResult(this.searchResult),t.length>0&&this.jumpTo(t[this.searchResult.currentHit])})}parseText(e){return e.trimLeft().toLowerCase().normalize("NFKC")}isNewlineTextbox(e,t){return Math.abs(e.r[1]-t.r[1])>.8*e.r[3]}isHorizontalSpaceTextbox(e,t){return Math.abs(e.r[0]+e.r[2]-t.r[0])>.3*e.h}findStartingHit(e){if(this.retrieveCurrentPageIndex&&e.length>0){const t=this.retrieveCurrentPageIndex(),i=e.findIndex(e=>e.pageIndex>=t);if(i>=0)return i}return 0}}})),define("typescript/libraries/file-viewer/src/preview_doc/renderer/find_in_doc/find_in_doc_searchbar",["require","exports","tslib","react","react-intl","ts-key-enum","lodash","dig-components/buttons","dig-components/icons","dig-components/icons/src","dig-components/text_fields","dig-components/tooltips","typescript/libraries/file-viewer/src/preview_doc/renderer/find_in_doc_searchbar.module.css","typescript/libraries/file-viewer/src/keyboard/keyboard_connector","typescript/libraries/file-viewer/src/keyboard/bindings"],(function(e,t,i,r,a,n,s,o,l,c,d,p,u,_,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FindInDocSearchbar=void 0,r=i.__importStar(r),u=i.__importStar(u);t.FindInDocSearchbar=e=>{var t;const{onClose:i,controller:o}=e,p=(0,a.useIntl)(),g=r.useRef(null);r.useEffect(()=>{var e;null===(e=g.current)||void 0===e||e.focus()},[]);const E=r.useCallback((0,s.debounce)(e=>o.search(e),200),[o.search]),w=r.createElement(r.Fragment,null,o.searchResult&&r.createElement(d.TextInputAffix,null,r.createElement("span",{role:"status"},p.formatMessage({id:"hK6Sbz",defaultMessage:"{currentResult} of {totalResults}"},{currentResult:o.searchResult.hits.length>0?o.searchResult.currentHit+1:0,totalResults:o.searchResult.hits.length})))),b=r.useMemo(()=>[(0,v.getEscapeBinding)(()=>i("keyboard")),(0,v.getFindInDocBinding)(()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.focus()})],[i]);return r.createElement("div",{className:u.findInDocSearchBar},r.createElement(d.TextInput,{ref:g,withLeftAccessory:r.createElement(l.UIIcon,{src:c.SearchLine,role:"presentation"}),withRightAccessory:w,placeholder:p.formatMessage({id:"uDh1dX",defaultMessage:"Search in this document"}),"aria-label":p.formatMessage({id:"gddc5d",defaultMessage:"Search in this document"}),onKeyDown:e=>{e.shiftKey&&e.key===n.Key.Enter?(o.onPrevious("keyboard"),e.stopPropagation()):e.key===n.Key.Enter?(o.onNext("keyboard"),e.stopPropagation()):e.key===n.Key.Escape?(i("keyboard"),e.stopPropagation()):(e.ctrlKey||e.metaKey)&&"f"===e.key&&e.preventDefault()},onChange:e=>E(e.currentTarget.value),isInvalid:0===(null===(t=o.searchResult)||void 0===t?void 0:t.hits.length)}),r.createElement(f,{tooltipText:p.formatMessage({id:"zqVjrn",defaultMessage:"Find previous"}),icon:c.ChevronUpLine,onClick:()=>o.onPrevious("click")}),r.createElement(f,{tooltipText:p.formatMessage({id:"W4xtVb",defaultMessage:"Find next"}),icon:c.ChevronDownLine,onClick:()=>o.onNext("click")}),r.createElement(f,{tooltipText:p.formatMessage({id:"OQXRhL",defaultMessage:"Close search"}),icon:c.CloseLine,onClick:()=>i("click")}),r.createElement(_.KeyboardBindingConnector,{name:"find_in_doc",keyboardBindings:b}))},t.FindInDocSearchbar.displayName="FindInDocSearchbar";const f=e=>r.createElement(p.Tooltip,{placement:"bottom",title:e.tooltipText,shouldCloseOnClick:!0},r.createElement(o.IconButton,{variant:"transparent",size:"small","aria-label":e.tooltipText,onClick:e.onClick},r.createElement(l.UIIcon,{src:e.icon})));f.displayName="FindInDocSearchbarButton"})),define("typescript/libraries/file-viewer/src/hooks/use_toolbar_override",["require","exports","react","react-redux","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,t,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useOverrideToolbar=void 0,t.useOverrideToolbar=function(e,t){const n=(0,r.useDispatch)();(0,i.useEffect)(()=>(n((0,a.overrideFloatingToolbar)({fileViewerId:e,state:t,internal:!0})),()=>{n((0,a.overrideFloatingToolbar)({fileViewerId:e,state:void 0,internal:!0}))}),[t,e])}})),define("typescript/libraries/file-viewer/src/preview_image/preview_image.module.css",["require","exports","css!typescript/libraries/file-viewer/src/preview_image/preview_image.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.layer=t.zoomFit=t.sizer=t.smallImg=t.fullSizeImg=t.loader=t.viewport=void 0,t.viewport="_viewport_1anuf_1",t.loader="_loader_1anuf_9",t.fullSizeImg="_fullSizeImg_1anuf_16",t.smallImg="_smallImg_1anuf_15",t.sizer="_sizer_1anuf_24",t.zoomFit="_zoomFit_1anuf_33",t.layer="_layer_1anuf_41";t.default={viewport:"_viewport_1anuf_1",loader:"_loader_1anuf_9",fullSizeImg:"_fullSizeImg_1anuf_16",smallImg:"_smallImg_1anuf_15",sizer:"_sizer_1anuf_24",zoomFit:"_zoomFit_1anuf_33",layer:"_layer_1anuf_41"}})),define("typescript/libraries/file-viewer/src/ui/ui.module.css",["require","exports","css!typescript/libraries/file-viewer/src/ui/ui.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.snackbar=t.slideEntering=t.slideHidden=t.slideExited=t.slideExiting=t.slideVisible=t.slide=t.overlayExitActive=t.overlayExit=t.overlayEnterActive=t.overlayEnter=t.close=t.overlayDuration=t.slideDuration=void 0,t.slideDuration="333",t.overlayDuration="333",t.close="_close_ac553_12",t.overlayEnter="_overlay-enter_ac553_19",t.overlayEnterActive="_overlay-enter-active_ac553_23",t.overlayExit="_overlay-exit_ac553_28",t.overlayExitActive="_overlay-exit-active_ac553_32",t.slide="_slide_ac553_37",t.slideVisible="_slide-visible_ac553_42",t.slideExiting="_slide-exiting_ac553_46",t.slideExited="_slide-exited_ac553_50",t.slideHidden="_slide-hidden_ac553_54",t.slideEntering="_slide-entering_ac553_58",t.snackbar="_snackbar_ac553_69";t.default={slideDuration:"333",overlayDuration:"333",close:"_close_ac553_12",overlayEnter:"_overlay-enter_ac553_19",overlayEnterActive:"_overlay-enter-active_ac553_23",overlayExit:"_overlay-exit_ac553_28",overlayExitActive:"_overlay-exit-active_ac553_32",slide:"_slide_ac553_37",slideVisible:"_slide-visible_ac553_42",slideExiting:"_slide-exiting_ac553_46",slideExited:"_slide-exited_ac553_50",slideHidden:"_slide-hidden_ac553_54",slideEntering:"_slide-entering_ac553_58",snackbar:"_snackbar_ac553_69"}})),define("typescript/libraries/file-viewer/src/preview_doc/renderer/find_in_doc_searchbar.module.css",["require","exports","css!typescript/libraries/file-viewer/src/preview_doc/renderer/find_in_doc_searchbar.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findInDocSearchBar=void 0,t.findInDocSearchBar="_findInDocSearchBar_o0vck_1";t.default={findInDocSearchBar:"_findInDocSearchBar_o0vck_1"}})),define("typescript/libraries/file-viewer/src/ui/animations",["require","exports","tslib","react-transition-group","react","typescript/libraries/file-viewer/src/ui/ui.module.css"],(function(e,t,i,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SlideAnimation=t.OverlayAnimation=void 0,a=i.__importDefault(a),n=i.__importStar(n);const s=parseInt(n.overlayDuration,10),o=parseInt(n.slideDuration,10);t.OverlayAnimation=({active:e,nodeRef:t,mount:i,children:o})=>a.default.createElement(r.CSSTransition,{nodeRef:t,in:e,classNames:{enter:n.overlayEnter,enterActive:n.overlayEnterActive,enterDone:n.overlayEnterActive,exit:n.overlayExit,exitActive:n.overlayExitActive,exitDone:n.overlayExitActive},timeout:s,mountOnEnter:i,unmountOnExit:i},o),t.OverlayAnimation.displayName="OverlayAnimation";const l={left:[-1,0],right:[1,0],top:[0,1],bottom:[0,1]};t.SlideAnimation=({active:e,direction:t,children:i,distance:s,initial:c,onExited:d})=>{const p="out"==c,u=a.default.useRef(null),[_,v]=l[t],f={"--slide-translate-x":`${s*_}px`,"--slide-translate-y":`${s*v}px`};return a.default.createElement(r.CSSTransition,{nodeRef:u,in:e,onExited:d,classNames:p?{enter:n.slideExited,enterActive:n.slideEntering,enterDone:n.slideVisible,exit:n.slideVisible,exitActive:n.slideExiting,exitDone:n.slideExited}:{enter:n.slideVisible,enterActive:n.slideExiting,enterDone:n.slideHidden,exit:n.slideExited,exitActive:n.slideEntering,exitDone:n.slideVisible},timeout:o,mountOnEnter:p,unmountOnExit:p},a.default.createElement("div",{ref:u,style:f,className:n.slide},i))},t.SlideAnimation.displayName="SlideAnimation"}));
//# sourceMappingURL=pkg-fvsdk.min.js-vfl6fqCpQ.map