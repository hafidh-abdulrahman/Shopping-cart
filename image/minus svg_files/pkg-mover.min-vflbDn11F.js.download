define("metaserver/static/js/folder_dialog/folder_picker_dig",["require","exports","tslib","react","metaserver/static/js/async/loadable","classnames","typescript/component_libraries/dig-experimental/src/managed_table/index","typescript/component_libraries/files_components/src/table/columns/file_name_column","spectrum/icon_arrow/index","keymaster","metaserver/static/js/clean/browse_interface","metaserver/static/js/clean/em_string","js/filepath/filepath","metaserver/static/js/components/ui/css","metaserver/static/js/folder_dialog/constants","metaserver/static/js/clean/static_urls","react-intl","metaserver/static/js/core/i18n","dig-components/progress_indicators","dig-components/tooltips","dig-components/buttons","dig-components/icons","dig-components/icons/src","metaserver/static/js/core/exception","metaserver/static/js/sync_everything/constants","metaserver/static/js/browse/components/file_breadcrumb"],(function(e,t,s,a,i,n,r,o,c,l,d,u,_,p,S,E,g,f,h,m,b,T,O,y,I,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FolderPicker=void 0,a=s.__importStar(a),n=s.__importDefault(n),l=s.__importDefault(l),y=s.__importStar(y);const v=(0,i.Loadable)({loader:()=>s.__awaiter(void 0,void 0,void 0,(function*(){const{BoxEmptySpot:t}=yield new Promise((t,s)=>{e(["metaserver/static/js/dig-illustrations/spot/box-empty"],t,s)}).then(s.__importStar);return t}))}),C=(0,i.Loadable)({loader:()=>s.__awaiter(void 0,void 0,void 0,(function*(){const{TargetMissSpot:t}=yield new Promise((t,s)=>{e(["metaserver/static/js/dig-illustrations/spot/target-miss"],t,s)}).then(s.__importStar);return t}))}),L=(0,p.requireCssWithComponent)(v,["/static/metaserver/static/css/dig-illustrations/index.web-vflzrHQEU.css"]),F=(0,p.requireCssWithComponent)(C,["/static/metaserver/static/css/dig-illustrations/index.web-vflzrHQEU.css"]);class j{constructor(){this.getAccessLevel=e=>e.icon.endsWith(S.ACCESS_LEVEL.NO_ACCESS)||I.BACKUP_ICONS.includes(e.icon)?S.ACCESS_LEVEL.NO_ACCESS:e.icon.endsWith(S.ACCESS_LEVEL.LIMITED_ACCESS_VAULT)?S.ACCESS_LEVEL.LIMITED_ACCESS_VAULT:e.icon.endsWith(S.ACCESS_LEVEL.LIMITED_ACCESS)||e.read_only?S.ACCESS_LEVEL.LIMITED_ACCESS:S.ACCESS_LEVEL.ACCESS,this.convertJsonFolderToFolder=e=>{const{path:t,icon:s,has_subdirs:a,contained_ns:i}=e,n=this.getAccessLevel(e);return{path:t,icon:s,hasSubfolders:a,isSelectable:n===S.ACCESS_LEVEL.LIMITED_ACCESS_VAULT||n===S.ACCESS_LEVEL.ACCESS||n===S.ACCESS_LEVEL.LIMITED_ACCESS&&this.canSelectReadonly,isClickable:n===S.ACCESS_LEVEL.LIMITED_ACCESS_VAULT||n===S.ACCESS_LEVEL.ACCESS||n===S.ACCESS_LEVEL.LIMITED_ACCESS&&(this.canSelectReadonly||a),nsId:i,isLockedVaultFolder:n===S.ACCESS_LEVEL.LIMITED_ACCESS_VAULT&&e.read_only}},this.cachedFolders=new Map}setProps(e,t,s,a){this.apiClient=e,this.user=t,this.canSelectReadonly=s,this.onDataLoaded=a}fetchFolderData(e){return s.__awaiter(this,void 0,void 0,(function*(){const t=yield this.apiClient.getFolderContents(this.user.id,e);if(this.onDataLoaded&&this.onDataLoaded(e),!t)return[];const s=t.map(this.convertJsonFolderToFolder),a=this.user.cdm_tmf_path&&(0,_.paths_are_equal)(e,"/")?[...s.filter(e=>(0,_.paths_are_equal)(e.path,this.user.cdm_tmf_path)),...s.filter(e=>!(0,_.paths_are_equal)(e.path,this.user.cdm_tmf_path))]:s;return this.cachedFolders.set((0,_.normalize)(e).toLowerCase(),a),a}))}fetchInstantFolderContents(e){const t=(0,_.normalize)(e);return this.cachedFolders.get(t.toLowerCase())}fetchFolderContents(e){return s.__awaiter(this,void 0,void 0,(function*(){const t=(0,_.normalize)(e);return this.fetchInstantFolderContents(e)||this.fetchFolderData(t)}))}}const R=(0,r.createManagedTable)(r.useFlexLayout,r.useKeyboarding),N=[{id:"filename",Cell:({row:{original:e}})=>a.default.createElement(o.FileNameCell,{file:e}),accessor:e=>e.title,width:300},{id:"drilldown_arrow",accessor:e=>e.hasSubfolders?a.default.createElement(c.IconArrow,{name:"right"}):"",width:void 0}],P=({size:e})=>{const t=f.intl.formatMessage({id:"BAyazl",defaultMessage:"This is the only folder there is."});return a.default.createElement(g.RawIntlProvider,{value:f.intl},a.default.createElement("div",{className:(0,n.default)("folder-picker__empty-message","u-font-center",{"u-pad-top-xl":"small"!==e})},a.default.createElement(L,null),"small"===e?a.default.createElement("span",null,t):a.default.createElement("h2",{className:"u-pad-top-l"},t)))};P.displayName="EmptyMessage";const w=()=>a.default.createElement("div",{className:"folder-picker__error"},a.default.createElement(F,null),a.default.createElement("span",null,f.intl.formatMessage({id:"UIh+KT",defaultMessage:"Something went wrong on our end.  Please reload and try again."}))),M=()=>{const e=f.intl.formatMessage({id:"G09nql",defaultMessage:"Loading your foldersâ€¦"});return a.default.createElement(g.RawIntlProvider,{value:f.intl},a.default.createElement("div",{className:"folder-picker-dig-loading "},a.default.createElement(h.Spinner,{"aria-valuetext":e,size:"xsmall"}),a.default.createElement("span",{className:"folder-picker-dig-loading-label"},e)))};class x{constructor(){this.appendReactableData=e=>{const t=[];return e.forEach((e,s)=>{t.push(Object.assign(Object.assign({},e),{title:u.Emstring.em_snippet((0,_.filename)(e.path),S.MAX_FOLDER_NAME_LENGTH),uniqueKey:""+e.nsId,isFolder:!0,isShared:!1,extension:"",path:e.path,index:s,isSelected:!1}))}),t},this.getDisplayableFolderList=e=>s.__awaiter(this,void 0,void 0,(function*(){const t=yield H.fetchFolderContents(e);return this.appendReactableData(t)})),this.getInstantDisplayableFolderList=e=>{const t=H.fetchInstantFolderContents(e);if(t)return this.appendReactableData(t)},this.getSingleCachedFolder=e=>{const t=this.getInstantDisplayableFolderList((0,_.parent_dir)(e));let s=null;return null==t||t.some(t=>!!(0,_.paths_are_equal)(t.path,e)&&(s=t,!0)),s},this.getSingleFolder=e=>s.__awaiter(this,void 0,void 0,(function*(){let t=this.getInstantDisplayableFolderList((0,_.parent_dir)(e));t||(t=yield this.getDisplayableFolderList((0,_.parent_dir)(e)));let s=null;return null==t||t.some(t=>!!(0,_.paths_are_equal)(t.path,e)&&(s=t,!0)),s}))}}class D{constructor(){this.selectedIndex=0,this.prevKeyScope="",this.claimFocusAfterNavigate=!1,this.keysActive=!1,this.updateFolderData=e=>{this.folderData=e},this.handleChoice=()=>{if(!this.folderData[this.selectedIndex].isClickable)return;this.claimFocusAfterNavigate=!0;const e=this.folderData[this.selectedIndex];this.handleFolderChoice(e)},this.setupKeyboardShortcuts=()=>{this.changedFocusedFolder(),this.keysActive||(this.keysActive=!0,this.prevKeyScope=l.default.getScope(),this.prevKeyScope!==S.KEY_SCOPE&&l.default.setScope(S.KEY_SCOPE),(0,l.default)("up",S.KEY_SCOPE,()=>{this.selectedIndex=this.selectedIndex-1,this.changedFocusedFolder()}),(0,l.default)("down",S.KEY_SCOPE,()=>{this.selectedIndex=this.selectedIndex+1,this.changedFocusedFolder()}),(0,l.default)("left",S.KEY_SCOPE,()=>{this.claimFocusAfterNavigate=!0,this.changedFocusedFolder(),this.goToParent()}),(0,l.default)("right",S.KEY_SCOPE,this.handleChoice),(0,l.default)("space",S.KEY_SCOPE,this.handleChoice),(0,l.default)("enter",S.KEY_SCOPE,()=>{this.changedFocusedFolder(),this.handleChoice(),void 0!==this.onSuccess&&this.onSuccess()}))},this.cleanupKeyboardShortcuts=()=>{this.keysActive=!1,l.default.clearScope(S.KEY_SCOPE),this.prevKeyScope&&l.default.setScope(this.prevKeyScope),l.default.resetFilter()},this.setFocus=()=>{if(!this.claimFocusAfterNavigate)return;const e=document.querySelector(".folder-picker-container table tr");e&&(e.setAttribute("tabindex","-1"),e.focus()),this.claimFocusAfterNavigate=!1}}}const B=(e,t,s)=>{let a,i,n=!1;const{onFolderSelected:r,user:o,canSelectReadonly:c}=t;let l;e&&"/"!==e.path?(l=e.path,a=e.isLockedVaultFolder,i=e.nsId,n=e.isSelectable):(l="",n=((e,t)=>t||!e.is_cdm_member||e.is_cdm_member&&"edit"===e.user_root_permissions)(o,c),i=o.root_ns_id),n||t.forceFolderSelectedCallback?r(l,i,s,a):r(void 0,void 0)},k=()=>{const e=f.intl.formatMessage({id:"oDXE4c",defaultMessage:"Based on previous activity and file type"});return a.default.createElement(m.Tooltip,{title:e},a.default.createElement(b.IconButton,{variant:"transparent"},a.default.createElement(T.UIIcon,{src:O.HelpLine,className:"icon-help","aria-label":e})))};k.displayName="SuggestionHeaderTooltip";const G=()=>{const e=f.intl.formatMessage({id:"qdhuuB",defaultMessage:"Suggested location"});return a.default.createElement("span",null,e,a.default.createElement(k,null))};G.displayName="SuggestionHeaderText";const U=e=>{const t=(0,_.parent_dir)(e.path),s=(0,_.paths_are_equal)(t,"/")?e.rootName:t.slice(1),i=f.intl.formatMessage({id:"R7F8Tb",defaultMessage:"in {location}"},{location:s});return a.default.createElement("a",{href:"#",className:"suggestion_parent",onClick:t=>{t.stopPropagation(),e.handleClick()}},i)};U.displayName="FolderSuggestionLocation";class q{constructor(e,t,a){this.fetch=()=>s.__awaiter(this,void 0,void 0,(function*(){try{const e=yield this.fetchFolderSuggestion(this.user.id);this.onFetch(e)}catch(e){const t=e.raw?e.raw.responseBody:"Received error response from folder suggestion API";y.reportException({err:new Error(t),tags:["folder_suggestion"],severity:y.SEVERITY.NONCRITICAL})}})),this.fetchFolderSuggestion=e,this.user=t,this.onFetch=a}}const K=e=>{const[t,s]=(0,a.useState)(""),i={uniqueKey:e.path,title:(0,_.filename)(e.path),isFolder:!0,icon:t};let n="",r=!1;(0,a.useEffect)(()=>{V.getSingleFolder(e.path).then(e=>{null!==e&&s(e.icon)})},[e.path]);const c=a.default.createElement(U,{path:(0,_.parent_dir)(e.path),handleClick:e.handleLocationClick,rootName:e.rootName});let d="folder-suggestion-location";return e.selected&&(d+=" folder-suggestion-location-selected"),a.default.createElement("div",{className:"folder-suggestion-dig",onFocus:()=>{r||(r=!0,n=l.default.getScope(),n!==S.SUGGESTED_LOCATION_KEY_SCOPE&&l.default.setScope(S.SUGGESTED_LOCATION_KEY_SCOPE),e.handleLocationClick())},onBlur:()=>{l.default.clearScope(S.SUGGESTED_LOCATION_KEY_SCOPE),n&&l.default.setScope(n),l.default.resetFilter()}},a.default.createElement(G,null),a.default.createElement("span",{role:"button",className:d,onClick:e.handleClick},a.default.createElement(o.FileNameCell,{file:i,subTitle:c})))};let H,V,z,W;K.displayName="FolderSuggestionDisplay";const Y=e=>{var t;const[i,n]=(0,a.useState)(null!==(t=e.initialPath)&&void 0!==t?t:"/"),r=(0,a.useRef)(""),[o,c]=(0,a.useState)([]),l=(0,a.useRef)(!1),u=e.size||"standard",{showEmptyFolders:p,onError:S,onFolderSelected:h,onRowClicked:m}=e,[b,T]=(0,a.useState)(void 0),[O,y]=(0,a.useState)(!1),I=(0,a.useCallback)(t=>{const s={user:e.user,canSelectReadonly:e.canSelectReadonly,onFolderSelected:h,forceFolderSelectedCallback:e.forceFolderSelectedCallback};null==m||m(t.path,t.index,!1),t.hasSubfolders||p||(r.current=t.path),n(t.path),B(t,s)},[e.user,e.canSelectReadonly,h,e.forceFolderSelectedCallback,m]),v=(0,a.useCallback)((t,a)=>s.__awaiter(void 0,void 0,void 0,(function*(){n(t),y(null!=a);const s={user:e.user,canSelectReadonly:e.canSelectReadonly,onFolderSelected:e.onFolderSelected,forceFolderSelectedCallback:e.forceFolderSelectedCallback};V.getSingleFolder(t).then(e=>{B(e,s,a)})})),[e.user,e.canSelectReadonly,e.onFolderSelected,e.forceFolderSelectedCallback]);(0,a.useMemo)(()=>{H=new j,V=new x,z=new D,z.goToParent=()=>{},z.onSuccess=e.onSuccess,z.changedFocusedFolder=()=>{y(!1)}},[e.onSuccess]),(0,a.useMemo)(()=>{H.setProps(e.apiClient,e.user,e.canSelectReadonly,e.onDataLoaded)},[e.apiClient,e.user,e.canSelectReadonly,e.onDataLoaded]),(0,a.useEffect)(()=>{(()=>{const e=new Image;e.src=(0,E.static_url)("/static/metaserver/static/images/illustration_catalog/dropbox_somethings_not_working-vfl2QXPxi.png"),e.srcset=(0,E.static_url)("/static/metaserver/static/images/illustration_catalog/dropbox_somethings_not_working@2x-vflkcbmXv.png")+" 2x"})()},[]),(0,a.useEffect)(()=>{e.apiClient.fetchFolderSuggestion&&(W=new q(e.apiClient.fetchFolderSuggestion,e.user,t=>{var s,a;const{path:i,prediction_id:n,suggest_id:r}=t;if(i){const t={path:i,predictionId:n};null===(a=e.onFetchFolderSuggestionSuccess)||void 0===a||a.call(e,[t],r),T(t)}else null===(s=e.onFetchFolderSuggestionSuccess)||void 0===s||s.call(e,[],r)}),W.fetch())},[e.apiClient.fetchFolderSuggestion,e.user,e.onFetchFolderSuggestionSuccess]),(0,a.useEffect)(()=>{v(i)},[i]),(0,a.useEffect)(()=>{z.goToParent=()=>{v((0,_.parent_dir)(r.current))}},[v]),(0,a.useEffect)(()=>{z.handleFolderChoice=I},[I]),(0,a.useEffect)(()=>{z.onSuccess=e.onSuccess},[e.onSuccess]),(0,a.useEffect)(()=>{z.updateFolderData(o),z.selectedIndex=0,z.setFocus()},[o]),(0,a.useEffect)(()=>{const e=()=>s.__awaiter(void 0,void 0,void 0,(function*(){let e=yield V.getDisplayableFolderList(i);0!=e.length||(0,_.paths_are_equal)(i,"/")||p||(e=yield V.getDisplayableFolderList((0,_.parent_dir)(i))),r.current=i,c(e)}));(()=>{const t=V.getInstantDisplayableFolderList(i),s=V.getSingleCachedFolder(i);if(r.current&&void 0!==t&&t.length<1&&!(0,_.paths_are_equal)(i,"/"))r.current=i;else if(!r.current||!1!==(null==s?void 0:s.hasSubfolders)||p||(0,_.paths_are_equal)(i,"/")){if(t)return r.current=i,void c(t);try{h(void 0,void 0,void 0,void 0,!0),e()}catch(e){a=e,null==S||S(a),h(),l.current=!0}var a}else r.current=i})()},[i,S,h]);const C=(0,a.useRef)(!1);e.initialPath&&!C.current&&(C.current=!0,v(e.initialPath));const L=()=>i!==r.current;let F,k=null;if(l.current)F=a.default.createElement(w,null);else if(L())F=a.default.createElement(M,null);else if(L()||o.length>0){const t=(0,d.get_browse_root_name)(e.user);void 0!==b&&(k=a.default.createElement(K,{path:b.path,handleClick:()=>{var t;null===(t=e.onFolderSuggestionClick)||void 0===t||t.call(e,b),v(b.path,b.predictionId)},handleLocationClick:()=>{var t;null===(t=e.onFolderSuggestionLocationClick)||void 0===t||t.call(e,b),v((0,_.parent_dir)(b.path),b.predictionId)},rootName:t,selected:O})),F=a.default.createElement("div",{className:"folder-picker-container folder-picker-dig-container",onFocus:z.setupKeyboardShortcuts,onBlur:z.cleanupKeyboardShortcuts},a.default.createElement(R,{isSelectable:!0,columns:N,data:o,showHeader:!1,getPropsForRow:e=>({disabled:!e.isClickable,onClick:()=>{I(e)},filename:e.title,className:e.isClickable?"":"not-clickable"})}))}else F=a.default.createElement(P,{size:u});return a.default.createElement(g.RawIntlProvider,{value:f.intl},k,a.default.createElement("div",{className:"folder-picker-dig__breadcrumbs"},a.default.createElement("h1",{className:"ax-visually-hidden"},(0,_.filename)(r.current)),a.default.createElement(A.FileBreadcrumb,{useFullPath:!0,isForCurrentPath:!0,user:e.user,setUrl:t=>{var s;null===(s=e.onBreadcrumbClicked)||void 0===s||s.call(e,t),v(t)},path:r.current,size:"small"})),F)};Y.displayName="FolderPickerTableNoCss",t.FolderPicker=(0,p.requireCssWithComponent)(Y,["/static/metaserver/static/css/browse/browse-vflwcdHa4.css","/static/metaserver/static/css/react/folder_picker-vflhBHl9O.css","/static/metaserver/static/css/scooter/scooter-scoped-vflhkBqI_.css","/static/metaserver/static/css/dig-components/index.web-vflD7DS1H.css","/static/typescript/component_libraries/dig-experimental/src/index.web-vfl_m6TBk.css"])})),define("metaserver/static/js/folder_dialog/folder_dialog",["require","exports","tslib","react","dig-components/buttons","dig-components/typography","dig-components/modal","metaserver/static/js/logging/hive/schemas/web-modal-activity","metaserver/static/js/folder_dialog/api","metaserver/static/js/folder_dialog/folder_picker_dig","metaserver/static/js/ux_analytics/utils","metaserver/static/js/clean/viewer","metaserver/static/js/clean/web_modal_activity_logger","metaserver/static/js/clean/web_timing_logger","metaserver/static/js/core/i18n"],(function(e,t,s,a,i,n,r,o,c,l,d,u,_,p,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FolderDialog=void 0,a=s.__importDefault(a),p=s.__importStar(p);class E extends a.default.PureComponent{constructor(e){super(e),this.close=()=>{this.focusElementOnClose(),this.setState({isOpen:!1}),(0,d.dispatchModalClosed)()},this.focusElementOnClose=()=>{this.elementToFocusOnClose&&this.props.focusElementOnClose&&this.elementToFocusOnClose instanceof HTMLElement&&this.props.focusElementOnClose(this.elementToFocusOnClose)},this.handleError=e=>{this.logger.log(o.ModalEventName.ERROR,{error:e.message}),this.props.onError(e)},this.handleSuccess=()=>{void 0!==this.state.path&&(this.logger.log(o.ModalEventName.SUCCESS),this.props.onSuccess(this.state.path,this.state.nsid),this.close())},this.handleCancel=()=>{this.props.onCancel(),this.close()},this.handleDataLoaded=e=>{this.logger.log(o.ModalEventName.DATA_LOADED,{path:e})},this.handleBreadcrumbClicked=e=>{this.logger.log(o.ModalEventName.BREADCRUMB_CLICKED,{path:e})},this.handleRowClicked=(e,t,s)=>{this.logger.log(o.ModalEventName.ROW_CLICKED,{path:e,index:t,is_keyboard:s})},this.handleReady=()=>{this.logger.log(o.ModalEventName.READY),(0,d.dispatchModalOpened)()},this.handleRequestClose=()=>{this.logger.log(o.ModalEventName.CLOSE),this.close()},this.handlePrimaryButtonClick=e=>{this.logger.log(o.ModalEventName.PRIMARY_CLICK,{path:e})},this.handleSecondaryButtonClick=()=>{this.logger.log(o.ModalEventName.SECONDARY_CLICK)},this.handleFolderSelected=(e,t)=>{this.setState({path:e,nsid:t})},this.handlePrimaryAction=()=>{this.handlePrimaryButtonClick(),this.handleSuccess()},this.handleSecondaryAction=()=>{this.handleSecondaryButtonClick(),this.handleCancel()},this.handleTertiaryAction=()=>{this.props.handleClickNewFolder&&this.props.handleClickNewFolder(this.state.path)},this.state={isOpen:!0},this.elementToFocusOnClose=document.activeElement}componentDidMount(){this.logger=new _.WebModalActivityLogger(this.props.modalName),this.logger.log(o.ModalEventName.SHOW)}render(){const{title:e,user:t,initialPath:s,canSelectReadonly:o,handleClickNewFolder:d,useApiV2:_}=this.props,E={getFolderContents:this.props.getFolderContents?this.props.getFolderContents:_?c.getFolderContentsAPIv2:c.getFolderContents};return a.default.createElement(r.Modal,{onAfterOpen:this.handleReady,open:this.state.isOpen,onRequestClose:this.handleRequestClose,className:"folder-picker-modal"},a.default.createElement(r.Modal.Header,{hasBottomSpacing:"title-small"},a.default.createElement(n.Title,{size:"small"},e)),a.default.createElement(r.Modal.Body,{className:"folder-picker-container__fixed-height",id:this.props.modalId},a.default.createElement(l.FolderPicker,{apiClient:E,user:t,canSelectReadonly:!!o,rootName:u.Viewer.get_role_title(t)||S.intl.formatMessage({id:"rIir19",defaultMessage:"Dropbox"}),onFolderSelected:this.handleFolderSelected,onSuccess:this.handleSuccess,onError:this.handleError,onRowClicked:this.handleRowClicked,onBreadcrumbClicked:this.handleBreadcrumbClicked,onDataLoaded:this.handleDataLoaded,initialPath:s,webTimer:p.get_timer()})),a.default.createElement(r.Modal.Footer,null,d&&a.default.createElement(i.Button,{variant:"transparent",size:"small",onClick:this.handleTertiaryAction},S.intl.formatMessage({id:"eXL9sz",defaultMessage:"Create new folder"})),a.default.createElement(i.Button,{variant:"opacity",onClick:this.handleSecondaryAction},S.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"})),a.default.createElement(i.Button,{variant:"primary",onClick:this.handlePrimaryAction,disabled:void 0===this.state.path},this.props.primaryActionLabel)))}}t.FolderDialog=E,E.defaultProps={onError:()=>{},onCancel:()=>{}},E.displayName="FolderDialog"})),define("metaserver/static/js/sharing/avatar_info",["require","exports","tslib","metaserver/static/js/core/user_i18n"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apiInviteeMemberToAvatarInfo=t.apiGroupMemberToAvatarInfo=t.apiUserMemberToAvatarInfo=void 0,a=s.__importStar(a);const i=function(e){switch(e){case"reader":return"viewer";case"writer":return"editor";case"owner":return"owner";default:return"default"}};t.apiUserMemberToAvatarInfo=function(e){const t=e.displayName()||"",s=e.email()||"";return{access_type:i(e.access_type),display_name:t,familiar_name:null!=e.account?e.account.familiar_name:void 0,initials:null!=e.initials?e.initials:a.getInitials(t),photo_url:null!=e.account?e.account.profile_photo_url:void 0,user_id:e.memberId(),email:s,account_id:e.account_id}};t.apiGroupMemberToAvatarInfo=e=>({access_type:i(e.access_type),gid:e.memberId(),is_automatic:"team"===e.group_type,name:e.displayName(),num_users:e.member_count});t.apiInviteeMemberToAvatarInfo=e=>({access_type:i(e.access_type),invitation_id:e.memberId(),email_or_fbname:e.displayName()})})),define("metaserver/static/js/clean/web_modal_activity_logger",["require","exports","tslib","metaserver/static/js/logging/telemetry","metaserver/static/js/logging/hive/schemas/web-modal-activity","metaserver/static/js/search/store_helpers"],(function(e,t,s,a,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebModalActivityLogger=void 0,a=s.__importStar(a);t.WebModalActivityLogger=class{constructor(e){this.modalName=e,this.modalSessionId=(0,n.generateRandomId)(),this.logger=new a.HiveLogger}log(e,t){this.logger.log(new i.WebModalActivityRow(Object.assign({modal_name:this.modalName,modal_session_id:this.modalSessionId,event_name:e},t)))}}})),define("metaserver/static/js/browse/data/reducer",["require","exports","tslib","immutable","js/filepath/filepath","metaserver/static/js/browse/data/types","metaserver/static/js/files_view/types","metaserver/static/js/core/assert","metaserver/static/js/browse/right_rail_preferences","metaserver/static/js/browse/model_types","metaserver/static/js/modules/constants/web_experience_constants"],(function(e,t,s,a,i,n,r,o,c,l,d){"use strict";function u(e){return"V1"===d.WEBXP_IA_RR_PREVIEW_BROWSE||"V2"===d.WEBXP_IA_RR_PREVIEW_BROWSE?c.getIAExposure(e)?c.getIsCollapsed(e):(c.setIsCollapsed(e,!1),!1):"CONTROL"===d.WEBXP_IA_RR_BROWSE||"OFF"===d.WEBXP_IA_RR_BROWSE?c.getIsCollapsed(e):("V2"===d.WEBXP_IA_RR_BROWSE&&window.addEventListener("beforeunload",()=>{c.removeIAExposure(e)}),("V1"===d.WEBXP_IA_RR_BROWSE||"V2"===d.WEBXP_IA_RR_BROWSE)&&(c.getIAExposure(e)?c.getIsCollapsed(e):(c.setIsCollapsed(e,!0),!0)))}Object.defineProperty(t,"__esModule",{value:!0}),t.browseReducer=void 0,a=s.__importStar(a),i=s.__importStar(i),c=s.__importStar(c),t.browseReducer=function(e=n.defaultBrowseState,t){switch(t.type){case n.ActionTypes.APP_INIT:return(function(e,t){const{props:a,user:i,viewer:n}=t.payload;(0,o.assert)(null===e.user,"Cannot reinitialize Browse store; changing invariants such as `user` is untested");const{browseExperiments:r}=a,c=s.__rest(a,["browseExperiments"]);return Object.assign(Object.assign(Object.assign(Object.assign({},e),{user:i,viewer:n,experiments:r}),c),{isRightRailCollapsed:u(i.id)})})(e,t);case n.ActionTypes.PUSH_BOLT_IGNORE:return(function(e,t){let{added:s,moved:a,removed:i}=e.boltIgnore;return t.payload.added&&(s=new Set(s),t.payload.added.forEach(e=>s.add(e))),t.payload.moved&&(a=new Set(a),t.payload.moved.forEach(e=>a.add(e))),t.payload.removed&&(i=new Set(i),t.payload.removed.forEach(e=>i.add(e))),Object.assign(Object.assign({},e),{boltIgnore:{added:s,moved:a,removed:i}})})(e,t);case n.ActionTypes.POP_BOLT_IGNORE:return(function(e,t){let{added:s,moved:a,removed:i}=e.boltIgnore;return t.payload.added&&(s=new Set(s),t.payload.added.forEach(e=>s.delete(e))),t.payload.moved&&(a=new Set(a),t.payload.moved.forEach(e=>a.delete(e))),t.payload.removed&&(i=new Set(i),t.payload.removed.forEach(e=>i.delete(e))),Object.assign(Object.assign({},e),{boltIgnore:{added:s,moved:a,removed:i}})})(e,t);case n.ActionTypes.SELECT_FILES_BY_FQ_PATH:return(function(e,t){const{fqPathsToSelect:s}=t.payload,i=s.map(e=>e.toLowerCase()),n=e.unsortedFiles.toList().filter(e=>i.includes(e.fq_path.toLowerCase())).map(e=>e.fq_path),r=a.OrderedSet(n),o=n.size?n.get(0):null;return Object.assign(Object.assign({},e),{selection:e.selection.set("selected",r).set("anchor",o)})})(e,t);case n.ActionTypes.SET_CAN_DISPLAY_FOLDER_SIZES:return(function(e,t){const{canDisplayFolderSizes:s}=t.payload;return Object.assign(Object.assign({},e),{canDisplayFolderSizes:s})})(e,t);case n.ActionTypes.SET_CLIPBOARD_FILES:return(function(e,t){const{clipboard:s}=t.payload;return Object.assign(Object.assign({},e),{clipboard:s})})(e,t);case n.ActionTypes.SET_CONTEXT:return(function(e,t){const{context:s}=t.payload;return Object.assign(Object.assign({},e),{context:s})})(e,t);case n.ActionTypes.SET_CURRENT_FOLDER_INFO:return(function(e,t){const{currentFolderInfo:s}=t.payload;return Object.assign(Object.assign({},e),{currentFolderInfo:s})})(e,t);case n.ActionTypes.SET_FILE_HAS_AUTOMATED_RULE_MAP:return(function(e,t){return Object.assign(Object.assign({},e),{fileHasAutomatedRuleMap:e.fileHasAutomatedRuleMap.merge(t.payload.fileHasAutomatedRuleMap)})})(e,t);case n.ActionTypes.SET_FILE_JUMP_FILTER:return(function(e,t){const{fileJumpFilter:s}=t.payload;return Object.assign(Object.assign({},e),{fileJumpFilter:s})})(e,t);case n.ActionTypes.SET_FILE_PATHS_TO_SELECT_ON_NEXT_UPDATE:return(function(e,t){let{filePathsToSelectOnNextUpdate:s}=t.payload;return"ON"!==e.browsePostTTIExperiments.expUploadBrowseRefresh&&"GA"!==e.browsePostTTIExperiments.expUploadBrowseRefresh||(s=e.filePathsToSelectOnNextUpdate.merge(s)),Object.assign(Object.assign({},e),{filePathsToSelectOnNextUpdate:s})})(e,t);case n.ActionTypes.SET_FOLDER_SIZES:return(function(e,t){const{folderSizes:s}=t.payload;return Object.assign(Object.assign({},e),{folderSizes:s})})(e,t);case n.ActionTypes.SET_LOADING_STATE:return(function(e,t){const{loadingState:s,path:n}=t.payload;return i.paths_are_equal(n,e.path)?s===r.LoadingState.LOADED?Object.assign(Object.assign({},e),{loadingState:s,filePathsToSelectOnNextUpdate:a.Set()}):Object.assign(Object.assign({},e),{loadingState:s}):e})(e,t);case n.ActionTypes.SET_MOUNT_POINTS:return(function(e,t){const{mountPoints:s}=t.payload;return Object.assign(Object.assign({},e),{mountPoints:a.Map(s)})})(e,t);case n.ActionTypes.SET_NEW_FOLDER_CREATION_STATE:return(function(e,t){const{newFolderCreationState:s}=t.payload;return Object.assign(Object.assign({},e),{newFolderCreationState:s})})(e,t);case n.ActionTypes.SET_PAGINATED_TOTAL_NUM_FILES:return(function(e,t){const{paginatedTotalNumFiles:s}=t.payload;return Object.assign(Object.assign({},e),{paginatedTotalNumFiles:s})})(e,t);case n.ActionTypes.SET_PATH:return(function(e,t){const{path:s}=t.payload;return Object.assign(Object.assign({},e),{path:s})})(e,t);case n.ActionTypes.SET_SELECTION:return(function(e,t){const{selection:s}=t.payload;return Object.assign(Object.assign({},e),{selection:s})})(e,t);case n.ActionTypes.SET_SHOULD_SHOW_DELETED_FILES:return(function(e,t){const{shouldShowDeletedFiles:s}=t.payload;return Object.assign(Object.assign({},e),{shouldShowDeletedFiles:s})})(e,t);case n.ActionTypes.SET_UNSORTED_FILES:return(function(e,t){const{unsortedFiles:s}=t.payload;return Object.assign(Object.assign({},e),{unsortedFiles:s})})(e,t);case n.ActionTypes.SHOW_TIMELINE:return(function(e,t){return Object.assign(Object.assign({},e),{isRewindVisible:!0,clickRewindTimestamp:t.payload.timestamp})})(e,t);case n.ActionTypes.HIDE_TIMELINE:return(function(e,t){return Object.assign(Object.assign({},e),{isRewindVisible:!1})})(e);case n.ActionTypes.SHOW_FOLDER_HISTORY_PANEL:return(function(e,t){return Object.assign(Object.assign({},e),{isFolderHistoryVisible:!0,clickFolderHistoryTimestamp:t.payload.timestamp})})(e,t);case n.ActionTypes.HIDE_FOLDER_HISTORY_PANEL:return(function(e,t){return Object.assign(Object.assign({},e),{isFolderHistoryVisible:!1})})(e);case n.ActionTypes.SET_IS_FILE_VIEWER_SHOWN:return(function(e,t){return Object.assign(Object.assign({},e),{isFileViewerShown:t.payload.isShown})})(e,t);case n.ActionTypes.SET_IS_REWIND_ENABLED:return(function(e,t){return Object.assign(Object.assign({},e),{isRewindButtonEnabled:t.payload.value})})(e,t);case n.ActionTypes.SET_FOLDER_MEMBER_COUNTS:return(function(e,t){return Object.assign(Object.assign({},e),{folderMemberCounts:t.payload.value})})(e,t);case n.ActionTypes.TOGGLE_SPACES_ENTRY_POINT:return(function(e,t){return Object.assign(Object.assign({},e),{isSpacesEntryPointEnabled:t.payload.value})})(e,t);case n.ActionTypes.REQUEST_FOLDER_SIZES:return(function(e,t){const{fqPath:s}=t.payload;if(e.isQueryingFolderSizes)return e;const a=e.folderSizes.withMutations(e=>{e.set(s,{size:0,state:l.FetchFolderSizeState.LOADING})});return Object.assign(Object.assign({},e),{folderSizes:a,isQueryingFolderSizes:!0})})(e,t);case n.ActionTypes.SET_FOLDER_SIZES_PENDING:return(function(e,t){const{fetchFolderSizesResp:s}=t.payload;let a=e.currentFolderSizesQuery;const i=e.folderSizes.withMutations(e=>{for(const t of s.sizes_dict)e.update(t.fq_path,{size:0,state:l.FetchFolderSizeState.LOADING},()=>({size:t.size,state:l.FetchFolderSizeState.LOADING})),a=a.withMutations(e=>e.add(t.fq_path))});return Object.assign(Object.assign({},e),{currentFolderSizesQuery:a,folderSizes:i})})(e,t);case n.ActionTypes.COMPLETE_FOLDER_SIZES:return(function(e,t){const{fetchFolderSizeState:s}=t.payload,i=e.folderSizes.withMutations(t=>{e.currentFolderSizesQuery.forEach(a=>{const i=e.folderSizes.get(a);i&&t.update(a,()=>({size:i.size,state:s}))})});return Object.assign(Object.assign({},e),{currentFolderSizesQuery:a.Set(),folderSizes:i,isQueryingFolderSizes:!1})})(e,t);case n.ActionTypes.SET_ARE_POST_TTI_MODULES_LOADED:return(function(e,t){return Object.assign(Object.assign({},e),{arePostTTIModulesLoaded:t.payload.arePostTTIModulesLoaded})})(e,t);case n.ActionTypes.SET_VIEW_SCOPE:return(function(e,t){return Object.assign(Object.assign({},e),{viewScope:t.payload.viewScope})})(e,t);case n.ActionTypes.SET_HIDE_FILES_AND_SIDEBAR:return(function(e,t){return Object.assign(Object.assign({},e),{shouldHideFilesAndSidebar:t.payload.shouldHideFilesAndSidebar})})(e,t);case n.ActionTypes.SET_IS_CREATING_SHARED_LINK:return(function(e,t){return Object.assign(Object.assign({},e),{isCreatingSharedLinkMap:e.isCreatingSharedLinkMap.set(t.payload.fileIdOrPath,t.payload.isCreatingSharedLink)})})(e,t);case n.ActionTypes.SET_RIGHTRAIL_IS_COLLAPSED:return(function(e,t){return Object.assign(Object.assign({},e),{isRightRailCollapsed:t.payload.collapsed})})(e,t);case n.ActionTypes.SET_EXPANDED_BLADE:return(function(e,t){return Object.assign(Object.assign({},e),{expandedBlade:t.payload.expandedBlade})})(e,t);case n.ActionTypes.SET_OVERFLOW_MENU_OPEN_REQUEST:return(function(e,t){return Object.assign(Object.assign({},e),{overflowMenuOpenRequest:t.payload.overflowMenuOpenRequest})})(e,t);case n.ActionTypes.SET_OVERFLOW_MENU_CLOSE_REQUEST:return(function(e,t){return e.overflowMenuCloseRequest===t.payload.overflowMenuCloseRequest?e:Object.assign(Object.assign({},e),{overflowMenuCloseRequest:t.payload.overflowMenuCloseRequest})})(e,t);case n.ActionTypes.SET_INLINE_OVERFLOW_MENU_OPEN_REQUEST:return(function(e,t){return Object.assign(Object.assign({},e),{inlineOverflowMenuOpenRequest:t.payload.inlineOverflowMenuOpenRequest})})(e,t);case n.ActionTypes.SET_OVERFLOW_MENU_COORDINATES:return(function(e,t){return Object.assign(Object.assign({},e),{overflowMenuCoordinates:t.payload.overflowMenuCoordinates})})(e,t);case n.ActionTypes.SET_BROWSE_POST_TTI_EXPERIMENTS:return(function(e,t){const{browsePostTTIExperiments:s}=t.payload;return Object.assign(Object.assign({},e),{browsePostTTIExperiments:s})})(e,t);case n.ActionTypes.SET_BROWSE_POST_TTI_DATA:return(function(e,t){const{browsePostTTIData:s}=t.payload;return Object.assign(Object.assign({},e),{browsePostTTIData:Object.assign(Object.assign({},e.browsePostTTIData),s)})})(e,t);case n.ActionTypes.SET_BACKUPS:return(function(e,t){return Object.assign(Object.assign({},e),{backups:t.payload.backups})})(e,t);case n.ActionTypes.SET_CREATE_MENU_OPEN_REQUEST:return(function(e,t){return Object.assign(Object.assign({},e),{createMenuOpenRequest:t.payload.createMenuOpenRequest})})(e,t);case n.ActionTypes.HANDLE_APP_CLEANUP:return n.defaultBrowseState;case n.ActionTypes.SET_LAST_BACKUP_TIMES:return(function(e,t){return Object.assign(Object.assign({},e),{lastBackupTimes:e.lastBackupTimes.set(t.payload.fqPath,t.payload.lastBackupTime)})})(e,t)}return e}})),define("metaserver/static/js/browse/data/store",["require","exports","metaserver/static/js/redux/namespaces","metaserver/static/js/browse/data/reducer","metaserver/static/js/redux/store","metaserver/static/js/tagging/data/store","metaserver/static/js/business_space/browse/data/store","metaserver/static/js/capture/redux/store"],(function(e,t,s,a,i,n,r,o){"use strict";let c;Object.defineProperty(t,"__esModule",{value:!0}),t.getStoreForBrowse=void 0;t.getStoreForBrowse=()=>(c||(c=(0,i.getStoreAndRegisterReducers)({[s.BROWSE_NAMESPACE_KEY]:a.browseReducer})),(0,n.getStoreForTagging)(),(0,r.getStoreForClientPortal)(),(0,o.getStoreForCapture)(),c)})),define("metaserver/static/js/browse/model_types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FetchFolderSizeState=void 0,(function(e){e.LOADING="LOADING",e.COMPLETE="COMPLETE",e.NO_ACCESS="NO_ACCESS",e.ERROR="ERROR"})(t.FetchFolderSizeState||(t.FetchFolderSizeState={}))})),define("metaserver/static/js/browse/right_rail_preferences",["require","exports","metaserver/static/js/core/persistence/storage","metaserver/static/js/core/exception"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeIAExposure=t.setIAExposure=t.getIAExposure=t.setIsCollapsed=t.getIsCollapsed=t.RIGHTRAIL_IA_STORAGE_KEY=t.RIGHTRAIL_COLLAPSED_STORAGE_KEY=void 0,t.RIGHTRAIL_COLLAPSED_STORAGE_KEY="browse_right_rail_collapsed_preferences",t.RIGHTRAIL_IA_STORAGE_KEY="browse_right_rail_IA",t.getIsCollapsed=function(e){try{return s.UserLocalStorage.get(e,t.RIGHTRAIL_COLLAPSED_STORAGE_KEY)||!1}catch(e){return(0,a.reportException)({err:e,severity:"non-critical"}),!1}},t.setIsCollapsed=function(e,i){try{s.UserLocalStorage.set(e,t.RIGHTRAIL_COLLAPSED_STORAGE_KEY,i)}catch(e){(0,a.reportException)({err:e,severity:"non-critical"})}},t.getIAExposure=function(e){try{return s.UserLocalStorage.get(e,t.RIGHTRAIL_IA_STORAGE_KEY)||!1}catch(e){return(0,a.reportException)({err:e,severity:"non-critical"}),!1}},t.setIAExposure=function(e){try{s.UserLocalStorage.set(e,t.RIGHTRAIL_IA_STORAGE_KEY,!0)}catch(e){(0,a.reportException)({err:e,severity:"non-critical"})}},t.removeIAExposure=function(e){try{s.UserLocalStorage.delete(e,t.RIGHTRAIL_IA_STORAGE_KEY)}catch(e){(0,a.reportException)({err:e,severity:"non-critical"})}}})),define("metaserver/static/js/tagging/data/reducer",["require","exports","lodash","metaserver/static/js/tagging/data/types","metaserver/static/js/tagging/utils"],(function(e,t,s,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.taggingReducer=t.defaultTaggingState=void 0,t.defaultTaggingState={tagsByFile:{},tags:void 0};const n=(e,t)=>{const s=[...e,...t],a=new Map(s.map(e=>[e.tag_text,e]));return[...Array.from(a.values())]};t.taggingReducer=function(e=t.defaultTaggingState,r){switch(r.type){case a.ActionTypes.SET_FILE_TO_TAGS_MAP:return((e,{fileToTags:t,override:a})=>{const i=Object.keys(t).reduce((a,i)=>{const n=e.tagsByFile[i],r=t[i];return void 0===n?(a[i]=r,a):((0,s.isEqual)((0,s.sortBy)(n,e=>e.tag_text),(0,s.sortBy)(r,e=>e.tag_text))?a[i]=n:a[i]=r,a)},{});let r=void 0;if(void 0!==e.tags){const t=Object.entries(i).map(([e,t])=>t).reduce((e,t)=>[...t,...e],[]);r=n(e.tags,t)}return Object.assign(Object.assign({},e),{tagsByFile:Object.assign(Object.assign({},a?{}:e.tagsByFile),i),tags:null!=r?r:e.tags})})(e,r.payload);case a.ActionTypes.FILE_RENAME:return((e,{file:t,newFile:s})=>{const a=(0,i.getFileMapKey)(t),n=(0,i.getFileMapKey)(s),r=e.tagsByFile[a];if(!r)return e;const o=e.tagsByFile;return delete o[a],o[n]=r,Object.assign(Object.assign({},e),{tagsByFile:o})})(e,r.payload);case a.ActionTypes.SET_ALL_TAGS:return((e,{tags:t})=>Object.assign(Object.assign({},e),{tags:t}))(e,r.payload);default:return e}}})),define("metaserver/static/js/tagging/data/store",["require","exports","metaserver/static/js/tagging/data/reducer","metaserver/static/js/redux/namespaces","metaserver/static/js/redux/store"],(function(e,t,s,a,i){"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.getStoreForTagging=void 0;t.getStoreForTagging=()=>(n||(n=(0,i.getStoreAndRegisterReducers)({[a.TAGGING_NAMESPACE_KEY]:s.taggingReducer})),n)})),define("metaserver/static/js/tagging/data/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTypes=void 0,(function(e){e.SET_FILE_TO_TAGS_MAP="TAGGING/SET_FILE_TO_TAGS_MAP",e.ADD_TAG_TO_FILE="TAGGING/ADD_TAG_TO_FILE",e.REMOVE_TAG_FROM_FILE="TAGGING/REMOVE_TAG_FROM_FILE",e.FILE_RENAME="TAGGING/FILE_RENAME",e.SET_ALL_TAGS="TAGGING/SET_ALL_TAGS"})(t.ActionTypes||(t.ActionTypes={}))})),define("metaserver/static/js/business_space/browse/data/store",["require","exports","metaserver/static/js/business_space/browse/data/reducer","metaserver/static/js/redux/namespaces","metaserver/static/js/redux/store"],(function(e,t,s,a,i){"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.getStoreForClientPortal=void 0;t.getStoreForClientPortal=()=>(n||(n=(0,i.getStoreAndRegisterReducers)({[a.CLIENT_PORTAL_NAMESPACE_KEY]:s.clientPortalReducer})),n)})),define("metaserver/static/js/business_space/browse/data/reducer",["require","exports","metaserver/static/js/business_space/browse/data/types"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientPortalReducer=t.defaultClientPortalState=void 0,t.defaultClientPortalState={businessSpaceInfo:{found:!1,business_space_xgid:"",is_business_space_root:!1,business_space_name:"",space_xid:"",client_portal_url:"",visibilities:{},client_uploads_enabled:!1},selectedFileBusinessSpaceInfo:{found:!1,business_space_xgid:"",is_business_space_root:!1,business_space_name:"",space_xid:"",client_portal_url:"",client_uploads_enabled:!1},contextMenuFileBusinessSpaceInfo:{found:!1,business_space_xgid:"",is_business_space_root:!1,business_space_name:"",space_xid:"",client_portal_url:"",client_uploads_enabled:!1}};t.clientPortalReducer=function(e=t.defaultClientPortalState,a){switch(a.type){case s.ActionTypes.SET_BUSINESS_SPACE_INFO:return((e,{found:t,business_space_xgid:s,is_business_space_root:a,business_space_name:i="",space_xid:n=""})=>Object.assign(Object.assign({},e),{businessSpaceInfo:Object.assign(Object.assign({},e.businessSpaceInfo),{found:t,business_space_xgid:s,is_business_space_root:a,business_space_name:i,space_xid:n})}))(e,a.payload);case s.ActionTypes.SET_LOGINLESS_LINK:return((e,{client_portal_url:t,space_xid:s})=>Object.assign(Object.assign({},e),{businessSpaceInfo:Object.assign(Object.assign({},e.businessSpaceInfo),{client_portal_url:t,space_xid:s})}))(e,a.payload);case s.ActionTypes.SET_VISIBILITIES:return((e,{objects_visibility:t})=>{const s=e.businessSpaceInfo.visibilities||{};return t&&t.forEach(e=>{e.full_path&&e.visibility&&e.visibility[".tag"]&&(s[e.full_path]=e.visibility[".tag"])}),Object.assign(Object.assign({},e),{businessSpaceInfo:Object.assign(Object.assign({},e.businessSpaceInfo),{visibilities:s})})})(e,a.payload);case s.ActionTypes.SET_VISIBILITY:return((e,{fileFqPath:t,newObjectVisibility:s})=>Object.assign(Object.assign({},e),{businessSpaceInfo:Object.assign(Object.assign({},e.businessSpaceInfo),{visibilities:Object.assign(Object.assign({},e.businessSpaceInfo.visibilities),t&&s?{[t]:s}:{})})}))(e,a.payload);case s.ActionTypes.SET_SELECTED_FILE_BUSINESS_SPACE_INFO:return((e,{found:t,business_space_xgid:s,is_business_space_root:a,business_space_name:i,space_xid:n="",client_portal_url:r=""})=>Object.assign(Object.assign({},e),{selectedFileBusinessSpaceInfo:Object.assign(Object.assign({},e.selectedFileBusinessSpaceInfo),{found:t,business_space_xgid:s,business_space_name:i,is_business_space_root:a,space_xid:n,client_portal_url:r})}))(e,a.payload);case s.ActionTypes.SET_SELECTED_FILE_LOGINLESS_LINK:return((e,{client_portal_url:t,space_xid:s})=>Object.assign(Object.assign({},e),{selectedFileBusinessSpaceInfo:Object.assign(Object.assign({},e.selectedFileBusinessSpaceInfo),{client_portal_url:t,space_xid:s})}))(e,a.payload);case s.ActionTypes.SET_SPLIT_SHARE_BUTTON_FILE_BUSINESS_SPACE_INFO:return((e,{found:t,business_space_xgid:s,is_business_space_root:a,business_space_name:i,space_xid:n=""})=>Object.assign(Object.assign({},e),{contextMenuFileBusinessSpaceInfo:Object.assign(Object.assign({},e.contextMenuFileBusinessSpaceInfo),{found:t,business_space_xgid:s,is_business_space_root:a,business_space_name:i,space_xid:n})}))(e,a.payload);case s.ActionTypes.SET_SPLIT_SHARE_BUTTON_FILE_LOGINLESS_LINK:return((e,{client_portal_url:t,space_xid:s})=>Object.assign(Object.assign({},e),{contextMenuFileBusinessSpaceInfo:Object.assign(Object.assign({},e.contextMenuFileBusinessSpaceInfo),{client_portal_url:t,space_xid:s})}))(e,a.payload);case s.ActionTypes.SET_CLIENT_UPLOADS_ENABLED:return((e,{client_uploads_enabled:t})=>Object.assign(Object.assign({},e),{businessSpaceInfo:Object.assign(Object.assign({},e.businessSpaceInfo),{client_uploads_enabled:t})}))(e,a.payload);default:return e}}})),define("metaserver/static/js/business_space/browse/data/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTypes=void 0,(function(e){e.SET_BUSINESS_SPACE_INFO="BUSINESS_SPACE/SET_BUSINESS_SPACE_INFO",e.SET_LOGINLESS_LINK="BUSINESS_SPACE/SET_LOGINLESS_LINK",e.SET_VISIBILITIES="BUSINESS_SPACE/SET_VISIBILITIES",e.SET_SELECTED_FILE_BUSINESS_SPACE_INFO="BUSINESS_SPACE/SET_SELECTED_FILE_BUSINESS_SPACE_INFO",e.SET_SELECTED_FILE_LOGINLESS_LINK="BUSINESS_SPACE/SET_SELECTED_FILE_LOGINLESS_LINK",e.SET_VISIBILITY="BUSINESS_SPACE/SET_VISIBILITY",e.SET_SPLIT_SHARE_BUTTON_FILE_BUSINESS_SPACE_INFO="BUSINESS_SPACE/SET_SPLIT_SHARE_BUTTON_FILE_BUSINESS_SPACE_INFO",e.SET_SPLIT_SHARE_BUTTON_FILE_LOGINLESS_LINK="BUSINESS_SPACE/SET_SPLIT_SHARE_BUTTON_FILE_LOGINLESS_LINK",e.SET_CLIENT_UPLOADS_ENABLED="BUSINESS_SPACE/SET_CLIENT_UPLOADS_ENABLED"})(t.ActionTypes||(t.ActionTypes={}))})),define("metaserver/static/js/sync_everything/hive_logger",["require","exports","tslib","metaserver/static/js/logging/hive/schemas/web-sync-everything-events","metaserver/static/js/logging/telemetry"],(function(e,t,s,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSource=t.logEvent=void 0;const n=new((i=s.__importStar(i)).HiveLogger);function r(e){return Object.keys(e).reduce((t,s)=>{const a=e[s];return"string"==typeof a?t[s]=a:"number"==typeof a||"boolean"==typeof a?t[s]=a.toString():"object"==typeof a&&null!=a&&(t[s]=JSON.stringify(a)),t},{})}t.logEvent=({action_surface:e,event:t,extra:s,page_source:i})=>{n.log(new a.BackupWebLoggerTableRow({action_surface:e,event:t,extra:s?r(s):void 0,page_source:i}))};t.getSource=(e,t="browse")=>{const s=e.getQuery();let a=t;return s._source&&(a=Array.isArray(s._source)?s._source[0]:s._source),a}})),define("metaserver/static/js/logging/hive/schemas/web-sync-everything-events",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackupWebLoggerTableRow=void 0;t.BackupWebLoggerTableRow=class{constructor(e){this.category="web-sync-everything-events",this.session_id=null,this.team_id=null,this.ua_browser_name=null,this.ua_browser_version=null,this.ua_os_name=null,this.ua_os_version=null,this.user_id=null,this.action_surface=e.action_surface,this.event=e.event,this.extra=e.extra,this.page_source=e.page_source,this.timestamp=Date.now(),Object.seal(this)}}})),define("metaserver/static/js/capture/redux/store",["require","exports","metaserver/static/js/capture/redux/reducer","metaserver/static/js/redux/namespaces","metaserver/static/js/redux/store"],(function(e,t,s,a,i){"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.getStoreForCapture=void 0;t.getStoreForCapture=()=>(n||(n=(0,i.getStoreAndRegisterReducers)({[a.CAPTURE_NAMESPACE_KEY]:s.captureReducer})),n)}));
//# sourceMappingURL=pkg-mover.min.js-vfl9J2em1.map