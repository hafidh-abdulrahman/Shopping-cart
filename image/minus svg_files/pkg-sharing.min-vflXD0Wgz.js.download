define("metaserver/static/js/file_viewer/controller",["require","exports","tslib","react","react-dom","metaserver/static/js/file_viewer/data/store","metaserver/static/js/previews/data/store","metaserver/static/js/file_viewer/utils","metaserver/static/js/core/browser_detection","metaserver/static/js/file_viewer/url_utils","metaserver/static/js/previews/ui/constants","metaserver/static/js/extensions/data/store","metaserver/static/js/previews/data/selectors","metaserver/static/js/file_store/utils"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u,m){"use strict";let h;Object.defineProperty(t,"__esModule",{value:!0}),t.updateProps=t.isShown=t.close=t.updateFiles=t.open=t.prewarmPreviewData=void 0,a=s.__importDefault(a),i=s.__importDefault(i);let g="";function _(e,t,s=!1){const a=(0,n.getStoreForFileViewer)();(0,r.fetchPreviewDataUpdateStore)(a,e,t,s)}t.prewarmPreviewData=function(e,t){_(e,t)};function f(e,t,s=!1){h&&((function(e){const t=(0,n.getStoreForFileViewer)();(0,n.updateFileStore)(t,e)})(e),_(e,h.user,s),b(Object.assign(Object.assign({},h),{file:t||h.file,files:e})))}function E(){(function(){const e=document.getElementById(g);i.default.unmountComponentAtNode(e),(function(e){const t=document.getElementById(e);if(t){const e=t.getAttribute("data-preview-created-container");e&&"true"===e&&document.body.removeChild(t)}})(g),h=void 0})()}t.open=function(e,t,a,i,h,_){g=i,(function(e){let t=document.getElementById(e);t||(t=document.createElement("div"),t.setAttribute("data-preview-created-container","true"),t.id=e,document.body.insertBefore(t,document.body.children[0]))})(g);const S=(function(e){let{initialPreviewSourceAction:t,initialPreviewSourceContext:a,sharedLinkInfos:i,sharePermissions:n,shareTokens:r}=e,c=s.__rest(e,["initialPreviewSourceAction","initialPreviewSourceContext","sharedLinkInfos","sharePermissions","shareTokens"]);c.canClose=!0,null==a&&(a=(0,o.getSourceContext)(c.fileViewOrigin)||d.PreviewSourceContext.Browse);null==t&&(t=(0,o.getSourceAction)());const p=(0,l.is_supported_mobile_browser)();c.isMobileUserAgent=p,p&&(c.hideComments=!0);const{onCloseViewer:u}=c;return c.onCloseViewer=()=>(E(),"function"==typeof u?u():void 0),Object.assign({initialPreviewSourceAction:t,initialPreviewSourceContext:a},c)})(h);_||(function(e,t){const s=(0,n.getStoreForFileViewer)();(0,n.hydrateFileViewerNamespace)(s,{},t),(0,r.hydrateFileStoreAndPreviewStore)(s,e,t),t&&(0,p.initializeStore)(t,e)})(e,a);const v=(0,n.getStoreForFileViewer)(),M=(0,u.getApiDataForFiles)(v.getState(),e),T=e.map(e=>{var t;return Object.assign(Object.assign({},e),{preview:e.preview||(null===(t=M[(0,m.getFileRevisionId)(e)])||void 0===t?void 0:t.data)})});b(Object.assign(Object.assign({},S),{containerId:i,titleBarCloseUrl:(0,c.getCurrentFolderHref)(),files:T,file:T[t],sharedLinkInfos:h.sharedLinkInfos,shareTokens:h.shareTokens,sharePermissions:h.sharePermissions,user:a,updateFiles:f,shouldPresentInZoom:h.shouldPresentInZoom}))},t.updateFiles=f,t.close=E,t.isShown=function(){return null!=h};const S=a.default.lazy(()=>s.__awaiter(void 0,void 0,void 0,(function*(){const{FileCollectionViewer:t}=yield new Promise((t,s)=>{e(["metaserver/static/js/file_viewer/collection_viewer"],t,s)}).then(s.__importStar);return{default:t}})));function b(e){const t=document.getElementById(g);h=e,i.default.render(a.default.createElement(a.default.Suspense,{fallback:a.default.createElement("div",null)},a.default.createElement(S,Object.assign({},e))),t)}t.updateProps=function(e){h&&b(Object.assign(Object.assign({},h),e))}})),define("metaserver/static/js/onboarding_checklist/api",["require","exports","tslib","metaserver/static/js/clean/active_user","metaserver/static/js/core/exception","metaserver/static/js/api_v2/user_client"],(function(e,t,s,a,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateTask=t.getTasks=void 0,t.getTasks=function(){return s.__awaiter(this,void 0,void 0,(function*(){const e=new n.UserApiV2Client,t=(0,a.mustGetActiveUserId)(),s=yield e.ns("custom_onboarding").rpc("get_tasks",{user_id:t},{subjectUserId:t}).catch(e=>{(0,i.reportException)({err:e,tags:["onboarding_checklist"],severity:i.SEVERITY.NONCRITICAL})});return null==s?void 0:s.tasks}))},t.updateTask=function(e){return s.__awaiter(this,void 0,void 0,(function*(){const t=new n.UserApiV2Client,s=(0,a.mustGetActiveUserId)(),r={user_id:s,task:e};t.ns("custom_onboarding").rpc("update_task",r,{subjectUserId:s}).catch(e=>{(0,i.reportException)({err:e,tags:["onboarding_checklist"],severity:i.SEVERITY.NONCRITICAL})})}))}})),define("metaserver/static/js/onboarding_checklist/share_button_tooltip",["require","exports","tslib","react","react-redux","metaserver/static/js/activation/data/selectors","metaserver/static/js/activation/data/slices","metaserver/static/js/activation/data/hooks","metaserver/static/js/onboarding_checklist/messages","dig-components/typography","dig-components/tooltips","dig-components/buttons","metaserver/static/js/core/i18n","metaserver/static/js/components/ui/css","metaserver/static/js/onboarding_checklist/constants","metaserver/static/js/onboarding/logging/logging","metaserver/static/js/onboarding/logging/events"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u,m,h,g,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OnboardingChecklistShareButtonTooltip=void 0,a=s.__importDefault(a),n=s.__importStar(n);const f=({triggerRef:e})=>{const t=(0,o.useAppDispatch)(),s=(0,i.useSelector)(n.shouldShowShareButtonTooltip),[m,f]=a.default.useState(s),[E,S]=a.default.useState("bottom");a.default.useEffect(()=>{s&&f(!0)},[s]),a.default.useEffect(()=>{m&&(t(r.activationActions.setShouldShowShareButtonTooltip({shouldShowShareButtonTooltip:!1})),g.OALogger.logToTeamsWeb(_.OnboardingChecklistEvents.ONBOARDING_CHECKLIST_SHARE_BUTTON_TOOLTIP_SHOWN,{location:location}))},[m]);return a.default.createElement(d.Tooltip.Control,{variant:"rich",open:m,triggerRef:e,placement:E,onChangePlacement:S,openDelay:h.TOOLTIP_OPEN_DELAY,auto:!0},a.default.createElement(c.Title,{size:"standard",inverse:!0},u.intl.formatMessage(l.shareButtonTooltipTitleText)),a.default.createElement(c.Text,{tagName:"p",color:"standard",inverse:!0},u.intl.formatMessage(l.shareButtonTooltipBodyText)),a.default.createElement("div",{className:"onboarding-checklist-share-button-tooltip__actions"},a.default.createElement(p.Button,{variant:"outline",inverse:!0,onClick:()=>{f(!1),g.OALogger.logToTeamsWeb(_.OnboardingChecklistEvents.ONBOARDING_CHECKLIST_SHARE_BUTTON_TOOLTIP_DISMISSED,{location:location})},autoFocus:!0},u.intl.formatMessage(l.shareButtonTooltipButtonText))))};f.displayName="OnboardingChecklistShareButtonTooltipComponent",t.OnboardingChecklistShareButtonTooltip=(0,m.requireCssWithComponent)(f,["/static/metaserver/static/css/growth/experiments/onboarding_checklist-vflXmpcow.css"])})),define("metaserver/static/js/sharing/actions/actions_adapter",["require","exports","tslib","eventemitter3"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionsAdapter=void 0;const i=new((a=s.__importDefault(a)).default);t.ActionsAdapter={emit(e,t){i.emit(e,t)},on:(e,t)=>i.on(e,t),removeListener:(e,t)=>i.removeListener(e,t),removeAllListeners(){i.removeAllListeners()},eventNames:()=>i.eventNames()}})),define("metaserver/static/js/sharing/actions/share_modal",["require","exports","tslib","react","metaserver/static/js/clean/analytics","metaserver/static/js/api_v2/error","metaserver/static/js/clean/browse_interface","metaserver/static/js/contacts/contact","metaserver/static/js/contacts/types","metaserver/static/js/clean/em_string","js/filepath/filepath","metaserver/static/js/flux/dispatcher","metaserver/static/js/browse/constants","metaserver/static/js/components/ui/modal","metaserver/static/js/pass/actions","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/pass/constants","metaserver/static/js/pass/pass_helpers","metaserver/static/js/pass/store","metaserver/static/js/sharing/sharing_settings_util","metaserver/static/js/sharing/actions/actions_adapter","metaserver/static/js/sharing/action_types","metaserver/static/js/sharing/actions/sharing_actions","metaserver/static/js/sharing/api","metaserver/static/js/sharing/api/types/metadata","metaserver/static/js/sharing/api/util/types","metaserver/static/js/sharing/confirmation_modals/member_access_change_confirmation_modal","metaserver/static/js/sharing/confirmation_modals/relinquish_membership_confirmation_modal","metaserver/static/js/sharing/sharing_settings_modal","metaserver/static/js/sharing/access_level","metaserver/static/js/sharing/parent_folder_access_modal","metaserver/static/js/sharing/share_page/action_types","metaserver/static/js/sharing/stores/sharing_info","metaserver/static/js/sharing/stores/sharing_info_util","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/sharing_settings_constants","typescript/component_libraries/spectrum-sharing/src/utils/logging","typescript/component_libraries/spectrum-sharing/src/utils/logging","metaserver/static/js/sharing/ui_util","metaserver/static/js/sharing/ui_notifications_util","metaserver/static/js/sharing/views/inherited_members","metaserver/static/js/clean/web_user_action_logger","metaserver/static/js/user_survey/user_survey","metaserver/static/js/clean/web_user_action_events","metaserver/static/js/deprecated_ajax/ajax_form_extract_errors","metaserver/static/js/core/browser","metaserver/static/js/core/i18n","metaserver/static/js/clean/ui/snackbar","metaserver/static/js/sharing/actions/contact_validators","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/sharing/views/share_modal_evolution/utils/logging","metaserver/static/js/sharing/views/rich_snackbar/exp_esign_snackbar","metaserver/static/js/sharing/views/rich_snackbar/exp_record_video_snackbar","metaserver/static/js/sharing/magnet_and_surface_existing_teams_utils","metaserver/static/js/sharing/ui_util","metaserver/static/js/sharing/views/constants","metaserver/static/js/edison/ui/router_utils","metaserver/static/js/clean/history_singleton","metaserver/static/js/sharing/views/share_modal_evolution/share/main_section/copy_link_section","metaserver/static/js/core/browser_detection","metaserver/static/js/browse/constants","metaserver/static/js/campaigns/types","metaserver/static/js/campaigns/emitter","metaserver/static/js/campaigns/history_utils","metaserver/static/js/flows/logging/flows_loggers","metaserver/static/js/integrations/hellosign_deep_integration/launcher","metaserver/static/js/flows/utils/async_modal_launchers","metaserver/static/js/sharing/views/share_modal_evolution/utils/experiments","metaserver/static/js/integrations/data/store","metaserver/static/js/integrations/data/selectors","metaserver/static/js/previews/util","metaserver/static/js/docsend_analytics_add_on/data/apiUtils","metaserver/static/js/docsend_analytics_add_on/helpers/utils","metaserver/static/js/teams/guest_pass/guest_pass_api"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u,m,h,g,_,f,E,S,b,v,M,T,y,C,I,k,A,L,N,w,O,P,R,D,x,F,j,B,U,H,G,V,W,q,K,z,Y,$,Z,X,Q,J,ee,te,se,ae,ie,ne,re,oe,le,ce,de,pe,ue,me,he,ge,_e,fe,Ee){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareModalActionHandler=t.incompleteInbandShare=void 0,a=s.__importDefault(a),r=s.__importStar(r),l=s.__importDefault(l),W=s.__importStar(W);const Se=a.default.createElement;t.incompleteInbandShare=new Set;t.ShareModalActionHandler=class{constructor(o,l,c,d,h,_,f){this.groupSeenStateInfo=null,this.linkSeenStateInfo=null,this.presentAccountIds=null,this.hasLoggedSet={},this.setUrl=null,this.hasLoggedApprovalFormShown=!1,this.changeAccess=(e,t,s=!1)=>{let a=Promise.resolve({});const i=e.memberId(),n=this.getContentInfo(),r=n.id,o=this.sharingInfo.isNonUserRelativeContext();if(t===g.MEMBER_ACTION.REMOVE)i!==this.user.account_id||o?a=(n.isFileFolder()?this.client.getParentFolderAccess({contentId:this.sharingInfo.parentSharedFolderId(),memberId:i}):this.removeMember(r,e,s,n.isFolder())).then(t=>{this.showParentFolderAccessModalIfQualified("remove",e,t)}):this.relinquishMembership(r,s);else if(t===L.ACCESS_LEVEL.OWNER)a=this.client.transferContent({contentId:r,memberId:i}).then(()=>{this.dispatch(v.ShareModalActionTypes.TRANSFER_OWNER_SUCCESS),(0,j.sharingNotificationSuccess)(q.intl.formatMessage({id:"sAxJWH",defaultMessage:"Made {name} the owner"},{name:e.displayName()})),this.fetchDataAndShowShareModal()});else{let s;if(n.isFileFolder()&&t===L.ACCESS_LEVEL.READER)s=this.client.getParentFolderAccess({contentId:this.sharingInfo.parentSharedFolderId(),memberId:i,accessLevel:t});else{const a=this.getContentInfo().isFileFolder();a&&this.dispatch(v.ShareModalActionTypes.MEMBER_ACTION_PENDING,{member:e});const i=e.is_inherited&&t===L.ACCESS_LEVEL.READER&&e.inherited_access_type!==L.ACCESS_LEVEL.READER;s=this.shareIfFileFolder(i?void 0:q.intl.formatMessage({id:"xYinYM",defaultMessage:"Updating member access..."})).then(()=>(a&&this.dispatch(v.ShareModalActionTypes.MEMBER_ACTION_COMPLETE,{member:e}),this.changeMemberAccess(this.getContentInfo().id,e,t))).catch(t=>{this.reportShareFailure(t),a&&this.dispatch(v.ShareModalActionTypes.MEMBER_ACTION_COMPLETE,{member:e})})}a=s.then(t=>{this.fetchInitialData(),this.handleShowUpdatedMembers(e,t)})}return a.then(this.refreshSharedWithColumnContentData)},this.handleShowUpdatedMembers=(e,t)=>{this.isMemberAccessLevelQualified(t)?(this.showParentFolderAccessModal("update",e,t),K.Snackbar.close()):K.Snackbar.complete(q.intl.formatMessage({id:"x5Je3g",defaultMessage:"Member access updated."}),"sharing-notification")},this.changeRecipientAccess=e=>s.__awaiter(this,void 0,void 0,(function*(){this.dispatch(v.ShareModalActionTypes.CHANGE_RECIPIENT_ACCESS,{newAccess:e}),yield this.validateContacts(this.getSharingInfo().recipientTokens())})),this.changeRecipientMessage=e=>{this.dispatch(v.ShareModalActionTypes.CHANGE_RECIPIENT_MESSAGE,{message:e})},this.appendToRecipientMessage=e=>{this.dispatch(v.ShareModalActionTypes.APPEND_TO_RECIPIENT_MESSAGE,{messageToAppend:e})},this.changeCreateCommentCheckbox=e=>{this.dispatch(v.ShareModalActionTypes.CHANGE_CREATE_COMMENT_CHECKBOX,{checked:e})},this.logShownApprovalForm=()=>{var e;this.hasLoggedApprovalFormShown||(this.hasLoggedApprovalFormShown=!0,null===(e=this.approvalClient)||void 0===e||e.logger.logShownRequestForm(this.sharingInfo.contentId().toString(),"share_modal"))},this.toggleAutomationOption=()=>{this.sharingInfo.automationOptionChecked()?ce.PapLogger.logDeselectAutoFolderSetupCheckbox({actionSurface:"share_modal"}):ce.PapLogger.logSelectAutoFolderSetupCheckbox({actionSurface:"share_modal"}),this.dispatch(v.ShareModalActionTypes.TOGGLE_OPEN_AUTOMATIONS)},this.toggleSendApproval=()=>{this.dispatch(v.ShareModalActionTypes.TOGGLE_SEND_APPROVAL)},this.changeNeedsAllApprovers=e=>{this.dispatch(v.ShareModalActionTypes.CHANGE_NEEDS_ALL_APPROVERS,{needsAllApprovers:e})},this.createApproval=e=>s.__awaiter(this,void 0,void 0,(function*(){var t,s;if(!this.approvalClient)return;const a=this.getSharingInfo().getInitialProps(),i=this.sharingInfo.contentId().toString(),n=this.sharingInfo.recipientTokens(),r=n.length,o=this.sharingInfo.needsAllApprovers(),l=this.sharingInfo.recipientMessage(),c=this.sharingInfo.recipientAccess();if(K.Snackbar.sync(q.intl.formatMessage({id:"rfZeo4",defaultMessage:"Sharing file and sending approval {numApprovers, plural, one {email} other {emails}}..."},{numApprovers:r}),!0,"flows-approval-snackbar"),this.dispatch(v.ShareModalActionTypes.CREATE_APPROVAL_REQUEST),yield this.recipientsChange(e.getContacts()),yield this.validateContacts(this.sharingInfo.recipientTokens()),this.sharingInfo.contactsError().level===F.ContactsErrorLevel.Error)return void this.log(D.TiburonEventName.FailInbandShare,{error_message:void 0,error_tag:"contacts_error"});let d="";try{this.approvalClient.logger.logSubmitApprovalRequest({actionSurface:"share_modal",approvalDetailsLength:l.length,entryPoint:this.getContentInfo().extras.origin,fileId:i,numApprovers:n.length,requiresAll:o});const{comment_id:e}=yield this.approvalClient.createApproval(i,l,n.map(({email:e})=>({email:e})),o);this.approvalClient.logger.logSubmitApprovalSuccess(i,"share_modal",l.length,JSON.stringify(n.map(({dbx_account_id:e})=>e)),o,n.length,e),this.dispatch(v.ShareModalActionTypes.CREATE_APPROVAL_SUCCESS)}catch(e){d=(null===(t=e.error)||void 0===t?void 0:t[".tag"])||"unknown",K.Snackbar.fail(q.intl.formatMessage({id:"NvrwMd",defaultMessage:"Couldn't share file or send approval request."},{numApprovers:r}),"flows-approval-snackbar"),this.approvalClient.logger.logSubmitApprovalFailure({actionSurface:"share_modal",fileId:i,errorReason:d}),this.dispatch(v.ShareModalActionTypes.CREATE_APPROVAL_FAILURE)}if(d)return;let p=!1;try{yield this.sendShare(e,{keepModalOpen:!1,suppressAllSnackbars:!0,suppressSuccessSnackbar:!0,suppressNotifications:!0})}catch(e){c!==L.ACCESS_LEVEL.READER&&(p=!0)}null===(s=a.onCreateApprovalSuccess)||void 0===s||s.call(a),p?K.Snackbar.fail(q.intl.formatMessage({id:"8l0aUb",defaultMessage:"Sent approval request, but couldn't share the file with edit access."},{numApprovers:r}),"flows-approval-snackbar"):K.Snackbar.complete(q.intl.formatMessage({id:"l4nAAD",defaultMessage:"File shared and approval request sent."}),"flows-approval-snackbar")})),this.enableNamespaceCreation=e=>this.getContentInfo().isFileFolder()&&"editor"===e&&this.getSharingInfo().fetchMetadataStatus()!==ee.FETCH_METADATA_STATUS.FAIL,this.createNamespaceIfNeeded=(e,t)=>{if(!this.enableNamespaceCreation(e))return Promise.resolve({});if(void 0===t&&this.getSharingInfo().sharingPrefs().efl_delay_namespace_creation_enabled)return Promise.resolve({});if(this.sharingInfo.shareFolderPromise())return this.sharingInfo.shareFolderPromise();let s=void 0;return null!=this.sharingInfo.shouldSyncThisFolder()&&(s=this.sharingInfo.shouldSyncThisFolder()?"default":"not_synced"),this.shareFolderSimple(this.getFqPath(),this.sharingInfo.shareAsConfidential(),s)},this.getCreateSharedLinkTTI=e=>Date.now()-e,this.buildExtraFieldForCreateSharedLinkEvents=(e,t,s,a)=>({is_alpha:!0,access:s,include_ns_creation:e,timing:this.getCreateSharedLinkTTI(t),delay_ns_creation_enabled:a}),this.createSharedLink=(e,t,s)=>{const a=Date.now(),i=this.enableNamespaceCreation(e),r=e||"viewer",o=this.getSharingInfo().sharingPrefs().efl_delay_namespace_creation_enabled;return this.log(D.TiburonEventName.ClickTibCreateLink),this.log(D.TiburonEventName.AttemptCreateSharedLinkWithSettings,{access:r,delay_ns_creation_enabled:o}),this.dispatch(v.ShareModalActionTypes.CREATE_LINK_REQUEST),"editor"===e?K.Snackbar.sync(q.intl.formatMessage({id:"OvEApa",defaultMessage:"Creating edit link..."}),!1,"sharing-notification"):K.Snackbar.sync(q.intl.formatMessage({id:"8PPImn",defaultMessage:"Creating view link..."}),!1,"sharing-notification"),this.createNamespaceIfNeeded(e).catch(e=>(this.reportCreatingNamespaceError(e),this.log(D.TiburonEventName.FailCreateSharedLinkWithSettings,Object.assign({http_status_code:e.raw&&e.raw.status,error_tag:e.error&&e.error[".tag"]||"undefined_error",error_summary:e&&e.summary,fail_at:"ns_creation"},this.buildExtraFieldForCreateSharedLinkEvents(i,a,r,o))),this.dispatch(v.ShareModalActionTypes.CREATE_LINK_FAILURE),Promise.reject(e))).then(()=>{const l={};e&&(l.access=e),t&&(l.audience=t);const c=this.getContentInfo(),d=c.fileId()||c.displayPath();return this.client.createSharedLink({fileIdOrPath:d,settings:l}).then(t=>{this.dispatch(v.ShareModalActionTypes.CREATE_LINK_SUCCESS,{linkMetadata:t}),this.refreshSharedWithColumnLinkData(),this.log(D.TiburonEventName.SucceedCreateSharedLinkWithSettings,Object.assign(Object.assign({http_status_code:200,response_status:"success"},this.buildExtraFieldForCreateSharedLinkEvents(i,a,r,o)),(0,$.buildExtraFromLinkMetadata)(t))),(0,F.trackUserLeapEvent)(F.SharingUserLeapEvent.SHARE_LINK_CREATE_SUCCESS,g.SHARE_ACTION_ORIGIN_TYPE.SHARE_LINK_MODAL);const n=this.getSharingInfo().modalInfoState().recipientAccess,l=n?n===L.ACCESS_LEVEL.WRITER?"editor":"viewer":e,c=e!==l;s===ee.LINK_CREATION_SURFACE.COPY_OR_CREATE_LINK_SECTION&&(0,ae.isBrowserCopyEnabled)()&&!c||("editor"===e?K.Snackbar.complete(q.intl.formatMessage({id:"JtONmB",defaultMessage:"Edit link created."}),"sharing-notification"):K.Snackbar.complete(q.intl.formatMessage({id:"ufl8ka",defaultMessage:"View link created."}),"sharing-notification")),o&&this.createNamespaceIfNeeded(e,t).catch(t=>{this.log(D.TiburonEventName.FailCreateNamespaceAfterLinkCreated,{http_status_code:t.raw&&t.raw.status,error_tag:t.error&&t.error[".tag"]||"undefined_error",error_summary:t&&t.summary,access:e,delay_ns_creation_enabled:!0})})}).catch((0,n.catchApiError)(e=>(e instanceof n.AppError&&e.error&&"access_denied"===e.error[".tag"]?this.getContentInfo().isFolder()?(0,j.sharingNotificationError)(q.intl.formatMessage({id:"/ivxG2",defaultMessage:"You don’t have permission to create a link to this folder"})):(0,j.sharingNotificationError)(q.intl.formatMessage({id:"p1EB+W",defaultMessage:"You don’t have permission to create a link to this file"})):this.showStandardError(e),e.error&&"shared_link_already_exists"===e.error[".tag"]?this.log(D.TiburonEventName.SucceedCreateSharedLinkWithSettings,Object.assign({http_status_code:e.raw&&e.raw.status,response_status:"success"},this.buildExtraFieldForCreateSharedLinkEvents(i,a,r,o))):this.log(D.TiburonEventName.FailCreateSharedLinkWithSettings,Object.assign({http_status_code:e.raw&&e.raw.status,error_tag:e.error&&e.error[".tag"]||"undefined_error",error_summary:e&&e.summary,fail_at:"link_creation"},this.buildExtraFieldForCreateSharedLinkEvents(i,a,r,o))),this.dispatch(v.ShareModalActionTypes.CREATE_LINK_FAILURE),Promise.reject(e))))})},this.fetchMetadataForFile=e=>M.SharingActions.loadFileMetadata({user:this.user,contentId:e.id,sourceUrl:e.url(),client:this.client}).catch((0,n.catchApiError)(t=>{this.handleLoadingError(t,e)})),this.fetchMetadataForFileFolder=e=>{const t=g.MEMBER_ACTION.ALL,a=g.VALIDATE_PATH_PERMISSIONS_CONFIDENTIAL_AWARE,i={actions:Object.keys(a),listMembersArg:{actions:t},shouldParseMetadataFromError:!0};let r,o;const l=!!this.sharingInfo.isNonUserRelativeContext();return l&&!this.user.is_cdm_member?(r=e=>s.__awaiter(this,void 0,void 0,(function*(){const t=this.contentManagerValidateFolderPath(e);return this.client.validatePathContinue(t,!1)})),o={nsId:e.nsId(),nsPath:e.nsPath()}):(r=this.client.validateFqPath,o={fqPath:e.displayPath(),shareAsConfidential:this.sharingInfo.shareAsConfidential()}),r(Object.assign(Object.assign({},o),i)).then(({metadata:e,inheritedMembers:t})=>{this.handleGetMetadataSuccess(e);const s=this.getContentInfo();this.listMembers({contentId:s.id,url:s.url(),members:s.isFileFolder()&&t||void 0,isNonUserRelativeContext:l})}).catch((0,n.catchApiError)(t=>{this.handleLoadingError(t,e)}))},this.fetchMetadataForSharedFolder=e=>this.client.getMetadata({contentId:e.id,isInSharedFolder:e.isInSharedFolder(),actions:Object.keys(g.ALPHA_FOLDER_METADATA_PERMISSIONS)}).then(this.handleGetMetadataSuccess).catch((0,n.catchApiError)(t=>{this.handleLoadingError(t,e)})),this.handleSetConfidentialClick=(e,t)=>{m.Modal.showInstance(a.default.createElement(B.SetInheritedMembersUIConfidentialModal,{actionHandler:this,initialIsConfidentialFolder:e,contentInfo:this.getContentInfo(),teamName:t,onCancel:this.openShareModal,userId:this.user.id}))},this.handleInheritedMemberAccessChange=(e,t,s,i)=>{const n=this.getContentInfo(),r=this.getSharingInfo();m.Modal.showInstance(a.default.createElement(B.SingleInheritedUserAccessChangeModal,{actionHandler:this,member:e,teamName:t,userId:this.user.id,isSharedFolder:n.isSharedFolder(),parentFolderName:r.parentFolderName(),currentFolderName:r.name(),isUserSelf:e.memberId()===this.user.account_id,isDowngrading:s,newAccessLevel:i}))},this.handleMemberAccessChange=(e,t)=>{const s=e.displayName();if(t===g.MEMBER_ACTION.REMOVE||t===L.ACCESS_LEVEL.OWNER){const a=t===g.MEMBER_ACTION.REMOVE&&e.memberId()===this.user.account_id,i=this.getContentInfo().isFolder(),n=this.getContentInfo().isNestedSharedFolder(),r=e.permissions.leave_a_copy&&e.permissions.leave_a_copy.allow,o=s=>{this.changeAccess(e,t,!0===s)},l=this.openManageAccessModal,c=()=>{m.Modal.close(void 0,I.CONFIRM_WITH_OPTION_MODAL_ID)},d=this.getSharingInfo().parentFolderName(),p=this.getSharingInfo().isConfidentialFolder(),u=e.type()===y.MembershipType.GROUPS,h=this.getSharingInfo().isNonUserRelativeContext(),_=this.getSharingInfo().isFolderInsideTeamFolderTree(),f=t===g.MEMBER_ACTION.REMOVE&&e.is_inherited;a?(0,k.showRelinquishMembershipConfirmationModal)(i,n,o,l,r,p):f&&i&&!_?this.changeAccess(e,t):(0,I.showMemberAccessChangeConfirmationModal)(s,t,i,n,r,o,c,p,h,d,u)}else this.changeAccess(e,t)},this.handleGetMetadataSuccess=e=>{this.dispatch(v.ShareModalActionTypes.FETCH_METADATA_SUCCESS,{metadata:e}),p.Dispatcher.dispatch({type:w.SharePageActionTypes.FETCH_METADATA_SUCCESS,metadata:e,user:this.user})},this.handleLinkSettingsClick=(e={isLinkOnly:!0,linkAccessLevel:"viewer"})=>{i.TeamsWebActionsLogger.log("open_link_settings_modal");let t,s=R.VIEW_LINK_SETTINGS;"editor"===e.linkAccessLevel&&(s=R.EDIT_LINK_SETTINGS),this.log(D.TiburonEventName.OpenLinkSettingsModal,{settings_tab:s}),e.isLinkOnly||(t=this.sharingInfo.isFolder()?this.sharingInfo.folderPolicy():this.sharingInfo.filePolicy()),m.Modal.showInstance(a.default.createElement(A.SharingSettingsModal,{actionHandler:this,sharingInfo:this.sharingInfo,sharingPrefs:this.sharingInfo.sharingPrefs(),client:this.client,currentTab:s,currentPolicy:t,folderName:this.sharingInfo.name(),isFolder:this.sharingInfo.isFolder(),isSharedFolder:this.getContentInfo().isSharedFolder(),isFolderInsideTeamFolderTree:this.sharingInfo.isFolderInsideTeamFolderTree(),isInContentManager:this.getSharingInfo().isNonUserRelativeContext(),isTeamSharedFolder:this.sharingInfo.isTeamSharedFolder(),isUserOnOwnerTeam:this.sharingInfo.isUserOnOwnerTeam(),linkMetadata:this.sharingInfo.linkMetadata(),onDismiss:()=>m.Modal.close(),permissions:this.sharingInfo.permissions(),ownerTeam:this.sharingInfo.ownerTeam(),user:this.user}))},this.handleLoadingError=(e,t)=>{var s,a,i;if(e instanceof n.AppError){if("not_a_member"===(null===(s=e.error)||void 0===s?void 0:s[".tag"])||"no_access"===(null===(a=e.error)||void 0===a?void 0:a[".tag"]))(0,j.sharingNotificationError)(q.intl.formatMessage({id:"O4CWz2",defaultMessage:"You don’t have permission to share this folder"})),m.Modal.close();else if("invalid_id"===(null===(i=e.error)||void 0===i?void 0:i[".tag"]))(0,j.sharingNotificationError)(q.intl.formatMessage({id:"4GGEvb",defaultMessage:"This folder can’t be shared"})),m.Modal.close();else if(e.error&&e.error.too_many_mounts&&t.isFolder()&&!t.extras.exists){const t=J.NSF_HELP_ARTICLE_LINK;e.error.too_many_mounts[".tag"]===ee.NS_LIMIT_ERROR.TOTAL_MOUNTS_EXCEEDED?(0,j.failSnackbarWithHelpCenter)((0,F.namespaceLimitExceededFailCreateSharedFolderSnackbarMsg)(e),t):e.error.too_many_mounts[".tag"]===ee.NS_LIMIT_ERROR.HOME_MOUNTS_EXCEEDED?(0,j.failSnackbarWithHelpCenter)((0,F.namespaceLimitExceededFailCreateSharedFolderSnackbarMsg)(e),t):e.error.too_many_mounts[".tag"]===ee.NS_LIMIT_ERROR.TREE_SIZE_EXCEEDED&&(0,j.failSnackbarWithHelpCenter)((0,F.namespaceLimitExceededFailCreateSharedFolderSnackbarMsg)(e),t),m.Modal.close()}const n=e.error&&e.error.bad_path&&e.error.bad_path[".tag"],r=e.error&&e.error.too_many_mounts&&e.error.too_many_mounts[".tag"];this.dispatch(v.ShareModalActionTypes.FETCH_METADATA_FAILURE,{reason:n||r,countExceedNsLimit:r&&(0,F.getExceededCountInfo)(e)})}else this.showStandardError(e),m.Modal.close()},this.handleSetConfidential=(e,t=!1)=>{const s=this.getContentInfo(),a=s.isSharedFolder()?s.sharedFolderId().toString():void 0,i=e=>(this.handleGetMetadataSuccess(e),e),r=(e,t,s)=>this.client.setConfidentiality({contentId:e,confidential:t,keepInheritedMembers:s}).then(i);return a?r(a,e,t):this.client.share({fqPath:this.getFqPath(),confidential:e}).then(i).catch(s=>{if(s instanceof n.AppError&&s.error&&s.error.bad_path&&"already_shared"===s.error.bad_path[".tag"]){const a=(0,C.folderMetadataApiToRecord)(s.error.bad_path);this.handleGetMetadataSuccess(a);const i=this.getContentInfo().sharedFolderId();return r(i.toString(),e,t)}return Promise.reject(s)})},this.openShareModal=()=>{m.Modal.showInstance(Se(this.shareModalClass,{actionHandler:this}))},this.openSharingSettingsModal=e=>{m.Modal.showInstance(Se(this.shareModalClass,{actionHandler:this,initialScreen:Y.SETTINGS_SCREEN,initialCurrentTab:e}))},this.showScreen=(e,t)=>{switch(e){case Y.SHARE_SCREEN:this.openShareModal();break;case Y.SETTINGS_SCREEN:{const e=this.getSharingInfo().isFolder()?R.FOLDER_SETTINGS:R.FILE_SETTINGS,s=t||e;this.openSharingSettingsModal(s);break}case Y.MANAGE_SCREEN:this.openManageAccessModal();break;default:this.openShareModal()}},this.openManageAccessModal=()=>{m.Modal.showInstance(Se(this.shareModalClass,{actionHandler:this,initialScreen:Y.MANAGE_SCREEN}))},this.recipientsChange=(e,t="")=>Promise.resolve({}).then(()=>this.dispatch(v.ShareModalActionTypes.CHANGE_RECIPIENTS,{recipientTokens:e,recipientRawInput:t})).then(()=>this.validateContacts(e)),this.redirectToPath=(t,a)=>{if(null!=this.setUrl&&this.getSharingInfo().getInitialProps().content&&this.getSharingInfo().fqPath()){const i=t=>{a&&new Promise((t,s)=>{e(["metaserver/static/js/sharing/share_modal_util"],t,s)}).then(s.__importStar).then(({showShareModal:e})=>e(this.user,t,{origin:g.SHARE_ACTION_ORIGIN_TYPE.PARENT_FOLDER_MODAL},this.setUrl))};t!==this.getSharingInfo().fqPath()?(this.setUrl({path:t,qargs:{[ne.BrowseQueryArg.share_manage_access]:!0}}),W.reload()):i(this.getSharingInfo().getInitialProps().content)}else{const e=r.browse_uri_for_fq_path(this.user,t);a&&e.updateQuery({shareoptions:"1"}),(0,se.browserRedirectWrapper)(e)}},this.refreshSharedWithColumnContentData=()=>{this.getContentInfo().isFolder()?p.Dispatcher.dispatch({type:u.SharedWithActionType.SIGNAL_SHARED_FOLDER_DATA_OUT_OF_DATE,data:{}}):p.Dispatcher.dispatch({type:u.SharedWithActionType.SIGNAL_SHARED_FILE_DATA_OUT_OF_DATE,data:{fileIds:[this.getContentInfo().id]}})},this.shareIfFileFolder=(e,t)=>{if(this.getSharingInfo().shouldCloseImmediately()?m.Modal.close():null!=e&&K.Snackbar.sync(e,!0,"sharing-notification"),!this.getContentInfo().isFileFolder())return Promise.resolve({});if(this.sharingInfo.shareFolderPromise())return this.sharingInfo.shareFolderPromise();let s=void 0;return null!=this.sharingInfo.shouldSyncThisFolder()&&(s=this.sharingInfo.shouldSyncThisFolder()?"default":"not_synced"),this.shareFolderSimple(this.getFqPath(),this.sharingInfo.shareAsConfidential(),s,t)},this.reportCreatingNamespaceError=e=>{e instanceof n.RateLimitError?K.Snackbar.fail(q.intl.formatMessage({id:"+v688d",defaultMessage:"Folder updates in progress. Try again in a few minutes."}),"sharing-notification"):e instanceof n.AppError&&"too_many_files"===e.error[".tag"]?K.Snackbar.fail(q.intl.formatMessage({id:"1pXTM7",defaultMessage:"Couldn’t create link. Too many files in this folder. "}),"sharing-notification"):(0,F.isTotalMountsExceededError)(e)?(0,j.failSnackbarWithHelpCenter)((0,F.totalMountsExceededFailSnackbarMsg)(e),J.NSF_HELP_ARTICLE_LINK):(0,F.isTreeSizeExceededError)(e)?(0,j.failSnackbarWithHelpCenter)((0,F.treeSizeExceededFailSnackbarMsg)(e),J.NSF_HELP_ARTICLE_LINK):(0,F.isHomeMountsExceededError)(e)?(0,j.failSnackbarWithHelpCenter)((0,F.homeMountsExceededFailSnackbarMsg)(e),J.NSF_HELP_ARTICLE_LINK):K.Snackbar.fail(q.intl.formatMessage({id:"15YAHw",defaultMessage:"There was a problem completing this request."}),"sharing-notification")},this.reportShareFailure=e=>{e instanceof n.RateLimitError?(0,j.failSnackbarWithHelpCenter)(q.intl.formatMessage({id:"/sRvdA",defaultMessage:"Folder updates in progress — please try again later."}),"/help/9259"):e instanceof n.AppError&&"too_many_files"===e.error[".tag"]?(0,j.failSnackbarWithHelpCenter)(q.intl.formatMessage({id:"Js1Gcw",defaultMessage:"Couldn’t share. If this folder has a lot of files, try sharing fewer files."}),"/support",(0,F.getContactSupportMessage)()):e instanceof n.AppError&&"internal_error"===e.error[".tag"]?(0,j.failSnackbarWithHelpCenter)(q.intl.formatMessage({id:"7/f5Vp",defaultMessage:"Couldn’t share, but it might work if you reload the page and try again."}),"/support",(0,F.getContactSupportMessage)()):(0,F.isTotalMountsExceededError)(e)?(0,j.failSnackbarWithHelpCenter)((0,F.namespaceLimitExceededFailCreateSharedFolderSnackbarMsg)(e),J.NSF_HELP_ARTICLE_LINK):(0,F.isTreeSizeExceededError)(e)?(0,j.failSnackbarWithHelpCenter)((0,F.namespaceLimitExceededFailCreateSharedFolderSnackbarMsg)(e),J.NSF_HELP_ARTICLE_LINK):(0,F.isHomeMountsExceededError)(e)?(0,j.failSnackbarWithHelpCenter)((0,F.namespaceLimitExceededFailCreateSharedFolderSnackbarMsg)(e),J.NSF_HELP_ARTICLE_LINK):K.Snackbar.fail((0,F.convertIfHTML)((0,F.genAddMemberErrorMessage)(e)),"sharing-notification")},this.showParentFolderAccessModalIfQualified=(e,t,s)=>{this.isMemberAccessLevelQualified(s)&&this.showParentFolderAccessModal(e,t,s)},this.showParentFolderAccessModal=(e,t,s)=>{this.log(D.TiburonEventName.OpenParentFolderAccessModal,{num_parent_folders:s.parentFolders&&s.parentFolders.length||0}),m.Modal.showInstance(a.default.createElement(N.ParentFolderAccessModal,{contentInfo:this.getContentInfo(),memberAccessLevelResult:s,memberDisplayName:t.displayName()||"",originalAction:e,isInContentManager:this.sharingInfo.isNonUserRelativeContext(),onClose:this.openShareModal,onParentFolderClicked:this.redirectToPath}))},this.parseParentFolderAccessError=e=>{let t=e.error;if("member_error"===e.error[".tag"]&&(t=e.error.member_error),"no_explicit_access"===t[".tag"])return(0,C.memberAccessLevelApiToRecord)(this.user.id,t);this.showStandardError(e)},this.changeLinkAudienceSelection=(e,t)=>{this.dispatch(v.ShareModalActionTypes.CHANGE_LINK_AUDIENCE_SELECTION,{accessLevel:e,audience:t})},this.removeLinkAudienceSelection=e=>{this.dispatch(v.ShareModalActionTypes.REMOVE_LINK_AUDIENCE_SELECTION,{accessLevel:e})},this.updateLinkAudience=(e,t)=>{const s=(0,S.getLinkPolicy)(e).set("audience",t),a=(0,S.getLinkPolicy)(e),i=(0,S.getModifiedSettings)(e,s,a);return i&&i.settings?(this.log(D.TiburonEventName.ChangeSharedLinkAudience,Object.assign({old_audience:a.audience,new_audience:t,screen:x.ScreenName.ShareScreen},(0,$.buildExtraFromLinkMetadata)(e))),this.updateLinkSettings([i])):Promise.reject(`Error getting modified settings for audience ${t}`)},this.updateLinkSettings=e=>Promise.all(e.map(e=>this.client.modifySharedLinkSettings(e))).then(e=>{(0,j.sharingNotificationSuccess)(q.intl.formatMessage({id:"8TOykk",defaultMessage:"Settings saved."}));const t=[];for(const s of this.sharingInfo.sharedLinks()){const a=e.find(e=>(s.link_permissions.link_access_level||"viewer")===(e.link_permissions.link_access_level||"viewer"));t.push(a||s)}this.setSharedLinks(t),this.refreshSharedWithColumnLinkData()}).catch(()=>((0,j.sharingNotificationError)(q.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."})),Promise.reject())),this.waitForAllMembersLoaded=()=>{if(this.sharingInfo.areMembersFullyLoaded())return Promise.resolve({});const e=this.sharingInfo.fetchingMembersRequest();return e&&e.promise||Promise.resolve({})},this.onPageNavigationAttempt=e=>{if(t.incompleteInbandShare.size>0)return this.log(D.TiburonEventName.AttemptNavigateAwayDuringShare),e.preventDefault(),e.returnValue="",""},this.onPageNavigationAway=e=>{t.incompleteInbandShare.size>0&&this.log(D.TiburonEventName.SucceedNavigateAwayDuringShare)},this.getShopModalPrereqs=()=>{const e=this.getContentInfo();let t={},s=!1;return e.isFile()&&e.name()&&(t=(0,J.getShopModalCtx)(e,this.getSharingInfo().getReferrer()),s=(0,le.hasEventInHistory)(re.CampaignEvents.SHARE_MODAL_SETTINGS_OPENED,t)),{contextData:t,shouldShowShopModal:s}},this.client=o,this.asyncContactValidator=new z.AsyncContactValidator(this.client),this.user=l,this.shareModalClass=c,this.setUrl=d||null,this.contentManagerValidateFolderPath=h,this.openSettingsFromTheExternalSharePageQuickActions=_,this.approvalClient=f}initializeShareModal(e,t={}){const s=e.contentInfo;return p.Dispatcher.dispatch({type:v.ShareModalActionTypes.SHARE_MODAL_OPEN,data:{initialProps:t,shareModalInfoAttrs:e},contentIds:(0,P.getContentIdsForContentInfo)(s),user:this.user}),this.sharingInfo=O.sharingInfoStore.getSharingInfo(this.user.id,s.id),this.fetchInitialData()}fetchDataAndShowShareModal(){this.fetchInitialData(),this.openShareModal()}fetchInitialData(){const e=this.sharingInfo.contentInfo(),t=this.sharingInfo.isNonUserRelativeContext();this.beginTime=Date.now(),this.isSendForSignatureEnabled=(0,he.isSendForSignatureEnabled)(this.getIntegrationStoreState(this.user.id)),this.fetchPassInfo();const s=[];return e.isFileFolder()?s.push(this.fetchMetadataForFileFolder(e)):(s.push(this.listMembers({contentId:e.id,url:e.url(),isNonUserRelativeContext:t})),e.isFile()?s.push(this.fetchMetadataForFile(e)):e.isSharedFolder()&&s.push(this.fetchMetadataForSharedFolder(e))),s.push(this.fetchMemberCounts()),s.push(this.fetchCurrentAccount()),s.push(this.fetchSharingPrefs()),this.sharingInfo.shouldFetchLinkMetadata()&&s.push(this.fetchLinkMetadata()),this.shouldFetchDocsendAnalyticsLink()&&s.push(this.fetchDocsendAnalyticsLink()),Promise.all(s)}fetchPassInfo(){this.sharingInfo.shouldBlockMemberListOnPassLoad()&&setTimeout(()=>this.dispatch(v.ShareModalActionTypes.UNBLOCK_MEMBER_LIST_ON_PASS_LOAD),4e3);const{shouldFetchPass:e,fileId:t}=this.getPassFetchingInfo();if(!e||!t)return;this.clearCachedPassInfo();const s=E.passStore.passFetchingStatus(t);if((0,_.fetchingStatusIsSuccessful)(s)){const{groupSeenStateInfo:e,linkSeenStateInfo:s}=E.passStore.getLinkAndGroupSeenStateInfo(t);this.groupSeenStateInfo=e,this.linkSeenStateInfo=s,this.presentAccountIds=E.passStore.presence(t)}else s===_.PassFetchingStatus.NOT_YET_KNOWN&&f.PassHelpers.setup({user:this.user,fileData:this.getFileData(),prevFileData:null,shouldWritePresence:!1,skipSharingEndpoints:!0})}getIntegrationStoreState(e){return(0,me.initStoreForIntegration)(e).getState()}getAsyncContactValidator(){return this.asyncContactValidator}getSharingInfo(){return this.sharingInfo}clearCachedPassInfo(){[this.groupSeenStateInfo,this.linkSeenStateInfo,this.presentAccountIds]=[null,null,null]}getPassInfo(){const e=this.getContentInfo();if(e.isFolder())return{groupSeenStateInfo:{},linkSeenStateInfo:[],presentAccountIds:[],passFetchingStatus:_.PassFetchingStatus.ERROR};if(this.groupSeenStateInfo&&this.linkSeenStateInfo&&this.presentAccountIds)return{groupSeenStateInfo:this.groupSeenStateInfo,linkSeenStateInfo:this.linkSeenStateInfo,presentAccountIds:this.presentAccountIds,passFetchingStatus:_.PassFetchingStatus.PASS_SUCCESS};{const t=this.getPassFetchingInfo().fileId;if(!t)return[this.groupSeenStateInfo,this.presentAccountIds]=[{},[],[]],{groupSeenStateInfo:{},linkSeenStateInfo:[],presentAccountIds:[],passFetchingStatus:_.PassFetchingStatus.ERROR};const s=E.passStore.getPassPermissions(t),a=E.passStore.passFetchingStatus(t);if(!(0,_.fetchingStatusIsComplete)(a))return{groupSeenStateInfo:{},linkSeenStateInfo:[],presentAccountIds:[],passFetchingStatus:_.PassFetchingStatus.FETCHING};if(null==s||!s.canReadPresence)return{groupSeenStateInfo:{},linkSeenStateInfo:[],presentAccountIds:[],passFetchingStatus:_.PassFetchingStatus.ERROR};const{linkSeenStateInfo:i,groupSeenStateInfo:n}=E.passStore.getLinkAndGroupSeenStateInfo(t);return this.linkSeenStateInfo=i,this.groupSeenStateInfo=n,this.presentAccountIds=[...E.passStore.presence(t)||[]],this.isContentInfoForFilePreview(e)&&this.presentAccountIds.indexOf(this.user.account_id)<0&&this.presentAccountIds.push(this.user.account_id),{groupSeenStateInfo:this.groupSeenStateInfo,linkSeenStateInfo:this.linkSeenStateInfo,presentAccountIds:this.presentAccountIds,passFetchingStatus:a}}}getPassFetchingInfo(){const e=this.getContentInfo();if(e.extras.origin&&["BROWSE_FILE_ACTIONS","BROWSE_FILE_FACEPILE","BROWSE_FILE_ROW","PREVIEW_PAGE","PREVIEW_PAGE_FACEPILE","PAPER_INTEGRATION","GOOGLE_DSS"].indexOf(e.extras.origin)>=0&&e.isFile()){const{fileId:t}=e.extras,s=this.isContentInfoForFilePreview(e);return{shouldFetchPass:!!t&&!s&&e.isFile(),fileId:t}}return{shouldFetchPass:!1}}getUrl(){const e=this.sharingInfo.linkMetadata();return e?e.url:void 0}getFileData(e){const{fileId:t=null}=this.getPassFetchingInfo();return{file:{file_id:t},url:e}}getContentInfo(){return this.sharingInfo.contentInfo()}getOpenSettingsFromTheExternalSharePageQuickActions(){return this.openSettingsFromTheExternalSharePageQuickActions}dispatch(e,t={}){p.Dispatcher.dispatch({type:e,data:t,contentIds:[this.getContentInfo().id],user:this.user})}changeMemberAccessSimple(e,t,s){return this.client.updateMember({contentId:e,memberId:t,accessLevel:s})}changeMemberAccess(e,t,s){const a=t.access_type;return this.log(D.TiburonEventName.SelectChangeMemberPermission,{new_access:s,old_access:a}),this.dispatch(v.ShareModalActionTypes.CHANGE_MEMBER_ACCESS_REQUEST,{member:t,newAccess:s}),this.changeMemberAccessSimple(e,t.memberId(),s).then(e=>{if(this.log(D.TiburonEventName.SucceedChangeMemberPermission,{http_status_code:200,response_status:"success",is_alpha:!1}),e.access_level&&e.warning)return this.dispatch(v.ShareModalActionTypes.CHANGE_MEMBER_ACCESS_FAILURE,{member:t,prevAccess:e.access_level}),e}).catch((0,n.catchApiError)(e=>{const s=e.error&&e.error[".tag"];return this.log(D.TiburonEventName.FailChangeMemberPermission,{http_status_code:e.raw&&e.raw.status,error_tag:s||"undefined",is_alpha:!1}),this.dispatch(v.ShareModalActionTypes.CHANGE_MEMBER_ACCESS_FAILURE,{member:t,prevAccess:a}),this.parseParentFolderAccessError(e)}))}_constructSearchResults(e){return e.map(e=>{if("group_id"in e)return new o.Contact({type:l.default.NEW_STYLE_GROUP,group_id:e.group_id,name:e.name,members:e.members,on_team:e.dbx_team_id===this.user.team_dbtid,group_size:e.group_size});if("dbx_account_id"in e)return new o.Contact({type:l.default.EMAIL,dbx_account_id:e.dbx_account_id,dbx_team_id:e.dbx_team_id,name:e.name,email:e.email,photo_url:e.photo_url,on_team:e.dbx_team_id===this.user.team_dbtid});throw new Error("Could not parse contact result.")})}suggestTargets(e,t){return this.client.targetsSearch(e,t).then(e=>{this.log(D.TiburonEventName.AttemptTargetSearch);const t=this._constructSearchResults(e.entries);return this.log(D.TiburonEventName.SucceedTargetSearch),t}).catch((0,n.catchApiError)(e=>{t&&t.aborted||(this.log(D.TiburonEventName.AttemptTargetSearch),this.log(D.TiburonEventName.FailTargetSearch,{error:e.message}),this.showStandardError(e))})).catch(e=>{this.log(D.TiburonEventName.FailTargetSearch,{error:e.message})})}validateContacts(e){return s.__awaiter(this,void 0,void 0,(function*(){return yield this._validateContacts(e,!1)}))}resetContactValidations(){return s.__awaiter(this,void 0,void 0,(function*(){return yield this._validateContacts(this.getSharingInfo().recipientTokens(),!0)}))}_validateContacts(e,t=!1){return s.__awaiter(this,void 0,void 0,(function*(){const s=this.getSharingInfo(),a=s.recipientAccess(),i=s.recipientValidation()[a]||{},n=t?e:e.filter(e=>!i[e.getKey()]);if(0===n.length)return;let r={};if(s.sharingPrefs().in_server_side_contact_validation_settings){const e=s.contentInfo(),t=e.isFileFolder()?this.getFqPath():String(e.id);r=yield this.getAsyncContactValidator().validate(this.user.id,t,e,s.recipientAccess(),n)}else r=this.localValidation(n);this.dispatch(v.ShareModalActionTypes.UPDATE_RECIPIENT_VALIDATION,{recipientValidation:{[a]:r},resetCurrentValidations:t})}))}localValidation(e){const t=this.getSharingInfo(),s={};return e.forEach(e=>s[e.getKey()]=(0,F.validateContact)(e,this.user,t.ownerTeam(),t.folderPolicy(),t.isTeamSharedFolder(),t.isFolderInsideTeamFolderTree(),t.memberCountWithRecipients())),s}fetchLinkMetadata(){return"/"!==this.getContentInfo().displayPath()?(this.dispatch(v.ShareModalActionTypes.FETCH_LINK_METADATA_REQUEST),this.client.sharedLinkInfo({fileIdOrPath:this.getContentInfo().idForLink()}).then(e=>{this.dispatch(v.ShareModalActionTypes.FETCH_LINK_METADATA_SUCCESS,{sharedLinks:e})}).catch(()=>{this.dispatch(v.ShareModalActionTypes.FETCH_LINK_METADATA_FAILURE),this.isContentInfoForPaper(this.getContentInfo())||this.sharingInfo.isNonUserRelativeContext()||(this.showStandardError(),m.Modal.close())})):Promise.resolve({})}fetchMemberCounts(){const e=this.getContentInfo();return e.isFile()?M.SharingActions.fetchFileMemberCount({user:this.user,contentId:e.id,limit:g.FETCH_FILE_MEMBER_COUNT_LIMIT}):e.isSharedFolder()||e.isFolder()&&e.isInSharedFolder()?M.SharingActions.fetchFolderMemberCount({user:this.user,contentId:e.isSharedFolder()?e.sharedFolderId():e.nsId(),client:this.client}):Promise.resolve({})}fetchSharingPrefs(){return this.dispatch(v.ShareModalActionTypes.FETCH_SHARING_PREFS_REQUEST),this.client.getSharingPrefs().then(e=>{this.dispatch(v.ShareModalActionTypes.FETCH_SHARING_PREFS_SUCCESS,{sharingPrefs:e})})}setSeenUpsellCounterPref(e){return this.dispatch(v.ShareModalActionTypes.SET_UPSELL_COUNTER_PREF),this.client.setSharingPrefs({has_seen_share_modal_upsell_premium_sharing_counter:e}).then(()=>{this.dispatch(v.ShareModalActionTypes.SET_UPSELL_COUNTER_PREF_SUCCESS)})}setHasSeenPostSharingEsignPref(){return this.client.setSharingPrefs({has_seen_esign_post_sharing:!0})}setLastSeenPostSharingEsignTsPref(){return this.client.setSharingPrefs({is_in_esign_post_sharing_exclusion_period:!0})}onShareModalUnmount(e){var t;this.teardownPass();const s=e&&e.serializeInputData()||{};this.dispatch(v.ShareModalActionTypes.SHARE_MODAL_CLOSE,s);const a=this.getSharingInfo().getInitialProps();null===(t=a.onClose)||void 0===t||t.call(a)}fetchCurrentAccount(){return this.dispatch(v.ShareModalActionTypes.FETCH_CURRENT_ACCOUNT_REQUEST),this.client.getLightweightAccountCached().then(e=>{this.dispatch(v.ShareModalActionTypes.FETCH_CURRENT_ACCOUNT_SUCCESS,{teamPolicy:e.team_policies,isFamilyUser:e.is_family_user})})}getAccountInfo(){return this.client.getCurrentAccountCached()}handleContentNameChange(e){const t="SIMPLIFIED_WIZARD_UI::CONTENT_NAME_CHANGE";this.hasLoggedSet[t]||(this.sharingExperimentsLog(t),this.hasLoggedSet[t]=!0),this.dispatch(v.ShareModalActionTypes.HANDLE_CONTENT_NAME_CHANGE,{name:e})}handleUpdateFilePolicy(e,t){this.handleUpdateSharingSettings(e);const s=this.getSharingInfo().filePolicy(),{fileId:a}=this.getPassFetchingInfo();if(a)if(s.viewer_info_policy===y.ViewerInfoPolicy.disabled&&t.viewer_info_policy===y.ViewerInfoPolicy.enabled)this.clearCachedPassInfo(),h.PassActions.resetPassInfo(a),h.PassActions.fetchPassError(a),this.dispatch(v.ShareModalActionTypes.CLEAR_FILE_MEMBERSHIP_LAST_SEEN_INFO);else{const e=s.audience===y.LinkAudience.members!=(t.audience===y.LinkAudience.members),i=s.viewer_info_policy===y.ViewerInfoPolicy.enabled&&t.viewer_info_policy===y.ViewerInfoPolicy.disabled;if(e||i){this.clearCachedPassInfo();const e=this.getUrl();i&&this.listMembers({contentId:a,url:e,isNonUserRelativeContext:this.sharingInfo.isNonUserRelativeContext()});const t=this.isContentInfoForFilePreview(this.getContentInfo());f.PassHelpers.setup({user:this.user,fileData:this.getFileData(e),prevFileData:null,shouldWritePresence:t,skipSharingEndpoints:!0})}}}handleUpdateSharingSettings(e){this.dispatch(v.ShareModalActionTypes.UPDATE_SHARING_SETTINGS_SUCCESS,{metadata:e})}listMembers({contentId:e,url:t,members:s,isNonUserRelativeContext:a=!1}){return M.SharingActions.listMembers({user:this.user,contentId:e,isFolder:this.sharingInfo.isFolder(),url:t,members:s,client:this.client,isNonUserRelativeContext:a})}addMembers(e,t,s=!1,a){const i=e.map(e=>({member:(0,C.createUnionScalar)(e.contactType(),e.contactId()),access_level:(0,C.accessLevelConstToApi)(e.access_type)}));return this.client.addMembersWithAccessLevel({contentId:t,members:i,customMessage:a,quiet:s})}isContentInfoForFilePreview(e){return("PREVIEW_PAGE"===e.extras.origin||"PREVIEW_PAGE_FACEPILE"===e.extras.origin)&&!e.isFolder()}isContentInfoForPaper(e){return e.extras&&"PAPER_INTEGRATION"===e.extras.origin}log(e,t={}){(0,F.logTiburonEvent)(this.getContentInfo(),this.user.id,e,t)}logIfHaventBefore(e,t={},s=!0){this.hasLoggedSet[e]||(this.hasLoggedSet[e]=!0,s&&(t.timing=Date.now()-this.beginTime),this.log(e,t))}redirectToBrowseUrl(e){if(null!=this.setUrl)this.setUrl({path:e});else{const t=r.browse_uri_for_fq_path(this.user,e);(0,se.browserRedirectWrapper)(t)}}redirectToUpgrade(){(0,se.browserRedirectWrapper)("/upgrade?oqa=spw")}refreshSharedWithColumnLinkData(){p.Dispatcher.dispatch({type:u.SharedWithActionType.SIGNAL_SHARED_LINK_DATA_OUT_OF_DATE,data:{fileFqPaths:[this.getContentInfo().displayPath()]}})}relinquishMembershipSimple(e,t){return this.client.relinquishMembership({contentId:e,leaveACopy:t}).then(()=>{m.Modal.close(),this.redirectToBrowseUrl("/")})}relinquishMembership(e,t){const s=this.getContentInfo();return this.relinquishMembershipSimple(e,t).then(()=>{s.isFolder()?(0,j.sharingNotificationSuccess)(q.intl.formatMessage({id:"CD+ZYc",defaultMessage:"Folder access removed."})):(0,j.sharingNotificationSuccess)(q.intl.formatMessage({id:"GTNg67",defaultMessage:"File access removed."}))})}removeMemberSimple(e,t,s){return this.client.removeMember({contentId:e,memberId:t,leaveACopy:s})}removeMember(e,t,s,a){return this.dispatch(v.ShareModalActionTypes.MEMBER_ACTION_PENDING,{member:t}),this.log(D.TiburonEventName.AttemptRemoveMember),this.removeMemberSimple(e,t.memberId(),s).then(e=>(this.log(D.TiburonEventName.SucceedRemoveMember,{http_status_code:200}),this.fetchInitialData().then(()=>{if(e&&null!=e.access_level&&null!=e.warning)return this.dispatch(v.ShareModalActionTypes.REMOVE_MEMBER_KEEP_ACCESS,{member:t,access:e.access_level}),e;a?(0,j.sharingNotificationSuccess)(q.intl.formatMessage({id:"CD+ZYc",defaultMessage:"Folder access removed."})):(0,j.sharingNotificationSuccess)(q.intl.formatMessage({id:"GTNg67",defaultMessage:"File access removed."})),this.dispatch(v.ShareModalActionTypes.REMOVE_MEMBER_SUCCESS,{member:t}),this.fetchMemberCounts()}))).catch(e=>{if(e instanceof n.ApiError){const s=e;return this.log(D.TiburonEventName.FailRemoveMember,{http_status_code:s.raw&&s.raw.status,error_tag:s.error&&s.error[".tag"]||"undefined_error",error_summary:s.summary}),this.dispatch(v.ShareModalActionTypes.MEMBER_ACTION_COMPLETE,{member:t}),this.parseParentFolderAccessError(s)}throw this.log(D.TiburonEventName.FailRemoveMember),e})}setContentNameAndSendShare(e){const t=this.sharingInfo.contentNameInputValue(),s=(0,d.parent_dir)(this.sharingInfo.fqPath()),a=(0,F.getNewFolderPathFromContentName)(t,s);let i=!this.sharingInfo.isNonUserRelativeContext();this.getSharingInfo().shouldSuppressRedirectToBrowse()&&(i=!1);let n=i&&!(0,te.shouldUseReactRouter)();return this.getSharingInfo().shouldCloseImmediately()&&(n=!0),new Promise((s,o)=>{new T.SharingApi(this.user).validate_new_sf_path(t,a,()=>{this.dispatch(v.ShareModalActionTypes.VALIDATE_CONTENT_NAME_SUCCESS,{newFolderPath:a}),this.sendShare(e,{keepModalOpen:i,suppressSuccessSnackbar:n}).then(()=>{var e;if(this.sharingInfo.shareAsConfidential()&&U.WebUserActionLog.log(this.user.id,G.WebUserActionLogEvent.CONF_BY_CREATE_CONFIDENTIAL_FOLDER,{ns_id:this.sharingInfo.contentId(),who_has_access:G.WebUserActionLogExtraValue.SPECIFIC_PEOPLE,location:this.sharingInfo.isNonUserRelativeContext()?G.WebUserActionLogExtraValue.CONTENT_MANAGER:G.WebUserActionLogExtraValue.BROWSE}),i){const t=r.browse_uri_for_fq_path(this.user,a);t.updateQuery("show_share_success_snackbar","1"),this.sharingInfo.automationOptionChecked()&&((0,te.shouldUseReactRouter)()&&((0,se.browserRedirectWrapper)(t),(0,pe.asyncLaunchAddOrEditAutoFolderModal)({fqPath:a,nsId:null===(e=this.sharingInfo.metadata())||void 0===e?void 0:e.nsId(),user:this.user,entryPoint:"share_modal",source:"add_from_folder_creation"}),s()),t.updateQuery("automations","from_share")),(0,se.browserRedirectWrapper)(t)}s()})},e=>{this.sharingExperimentsLog("SIMPLIFIED_WIZARD_UI::INVALID_CONTENT_NAME");const t=(0,V.extractErrors)(e.responseText),s=t.folder_name&&t.folder_name.message_text;this.dispatch(v.ShareModalActionTypes.VALIDATE_CONTENT_NAME_ERROR,{errorMsg:s}),o(s)})})}setSharedLinks(e){this.dispatch(v.ShareModalActionTypes.FETCH_LINK_METADATA_SUCCESS,{sharedLinks:e})}deleteLinkMetadata(e){this.dispatch(v.ShareModalActionTypes.DELETE_LINK_METADATA_SUCCESS,{deletedLink:e})}enableImmediateModalClose(e){const{inviteEligibleNotSeenContacts:t}=this.sharingInfo.getEligibleInviteAfterSharingContacts(),s=this.sharingInfo.sharingPrefs().invite_or_request_after_sharing_modal_variant;return e||0===t.length||t.length>1&&(0,Q.isBasicUserRequestModal)(s)||"not_enabled"===s}createSharingTasks(){return s.__awaiter(this,void 0,void 0,(function*(){try{const e=(0,ue.getReceiverRedCarpetVariant)(this),t="OFF"!==e,s=this.sharingInfo.isFolder(),a=this.sharingInfo.name().endsWith(".paper"),i=this.sharingInfo.recipientTokens(),n=i.some(e=>e.type===l.default.NEW_STYLE_GROUP);if(t&&!s&&!a&&!n){const t=this.sharingInfo.contentInfo().id,s=this.sharingInfo.recipientMessage(),a=i.map(e=>e.email),n="CONTROL"===e?[]:this.sharingInfo.getSharingTasks(),r=n.map(e=>({".tag":e}));this.log(D.TiburonEventName.RRCSenderShareModalShareClick,{variant:e,tasks:n.join(),num_emails:a.length,note_length:s.length,file_ext:(0,ge.getWhitelistedExtension)(this.sharingInfo.name())}),yield this.client.createSharingTasks({fileId:t,note:s,emails:a,sharingTasks:r})}}catch(e){this.log(D.TiburonEventName.RRCSenderCreateSharingTasksError,{error_message:null==e?void 0:e.message,error_tag:(null==e?void 0:e.error)&&e.error[".tag"]||"undefined_error"})}}))}sendShare(e,s={keepModalOpen:!1,suppressSuccessSnackbar:!1,suppressAllSnackbars:!1,suppressNotifications:!1}){const i={outcomeHasBeenLogged:!1},r=(e,t)=>{this.log(e,t),i.outcomeHasBeenLogged=!0},o=this.getContentInfo().isFileFolder(),l=this.getSharingInfo().getInitialProps(),p=this.sharingInfo.contentInfo().id;l.onShareClick&&l.onShareClick(this.getSharingInfo().recipientTokens(),this.getSharingInfo().recipientAccess());const u=t.incompleteInbandShare.has(p);this.log(D.TiburonEventName.ClickInbandShareButton,{in_progress:u});const h=Date.now();let _,f;return this.recipientsChange(e.getContacts()).then(()=>this.validateContacts(this.sharingInfo.recipientTokens())).then(()=>{if(f=this.sharingInfo.contactsError().level,f===F.ContactsErrorLevel.Error)return Promise.reject({});this.enableImmediateModalClose(s.keepModalOpen)&&(m.Modal.close(),this.log(D.TiburonEventName.CloseShareModal,{time_modal_opened:Date.now()-h})),window.addEventListener("beforeunload",this.onPageNavigationAttempt),window.addEventListener("unload",this.onPageNavigationAway),t.incompleteInbandShare.add(p),this.dispatch(v.ShareModalActionTypes.SEND_SHARE_REQUEST),_=(0,C.contactsToMembers)(this.sharingInfo.recipientTokens());const e=this.sharingInfo.contentInfo().extras.origin;return e!==g.SHARE_ACTION_ORIGIN_TYPE.BROWSE_GLOBAL_ACTIONS&&e!==g.SHARE_ACTION_ORIGIN_TYPE.WIZARD||U.WebUserActionLog.log(this.user.id,G.WebUserActionLogEvent.NEW_FOLDER_ADD_MEMBER,{num_invites:_.length}),this.shareIfFileFolder(s.suppressAllSnackbars?void 0:q.intl.formatMessage({id:"lhzBKS",defaultMessage:"Sharing <st>{folder_name}</st>..."},{st:e=>a.default.createElement("strong",null,e),folder_name:c.Emstring.em_snippet(this.sharingInfo.name(),g.SNIPPET_SIZES.FILENAME)}))}).then(()=>this.createSharingTasks()).then(()=>this.client.addMembers({accessLevel:this.sharingInfo.recipientAccess(),contentId:this.sharingInfo.contentInfo().id,customMessage:this.sharingInfo.recipientMessage(),members:_,addMessageAsComment:!!this.sharingInfo.recipientMessage()&&this.sharingInfo.isShareMessageAsCommentChecked()&&this.sharingInfo.permissionsObj().canShareMessageAsComment(),quiet:s.suppressNotifications||!1})).catch(e=>{if(e instanceof n.ApiError){const t=e.error&&e.error[".tag"];this.dispatch(v.ShareModalActionTypes.SEND_SHARE_FAILURE),s.suppressAllSnackbars||this.reportShareFailure(e),r(D.TiburonEventName.FailInbandShare,{http_status_code:e.raw&&e.raw.status,error_tag:t||"undefined",error_summary:"summary"in e?e.summary:"message"in e?e.message:"undefined",timing:Date.now()-h,num_recipients:_.length})}else r(D.TiburonEventName.FailInbandShare,{error_message:e.message,error_tag:f===F.ContactsErrorLevel.Error?"contacts_error":null});return Promise.reject({})}).then(()=>{var e,t;if(r(D.TiburonEventName.SucceedInbandShare,{timing:Date.now()-h,num_recipients:_.length}),this.dispatch(v.ShareModalActionTypes.SEND_SHARE_SUCCESS),this.sharingInfo.isShowingFileUploadToolkitCampaign())(0,oe.publishEvent)(re.CampaignEvents.FILE_SHARE_SUCCESS,{context:{file_name:this.sharingInfo.name(),file_extension:(0,d.file_extension)(this.sharingInfo.name()),file_path:this.sharingInfo.fqPath()}}),(0,j.showInBandShareSuccessSnackbar)(this.sharingInfo.name());else{b.ActionsAdapter.emit("onSuccessSharing",{origin:this.sharingInfo.contentInfo().extras.origin,wasFileFolder:o}),this.fetchMemberCounts();const a=this.sharingInfo.contentInfo().extras.origin,{contextData:i,shouldShowShopModal:n}=this.getShopModalPrereqs();if(!s.suppressSuccessSnackbar&&!s.suppressAllSnackbars){const e=this.sharingInfo.name(),t=(0,X.shouldShowInBandShareSuccessRecordVideoSnackbar)(this.getSharingInfo().sharingPrefs().capture_sdk_integration_voice_overs_variant);if(this.shouldShowEsignDiscoveryUpsell()&&!n){const s=this.sharingInfo.hasSeenEsignPostSharing();s||this.setHasSeenPostSharingEsignPref(),(0,Z.showInBandShareSuccessEsignSnackbar)(e,(0,j.formatSuccessMessageForFolder)(e),this.sharingInfo.fqPath(),this.user.id,Number(this.sharingInfo.contentId()),s,t,()=>{this.setLastSeenPostSharingEsignTsPref()})}else t&&!n?(0,X.showInBandShareSuccessRecordVideoSnackbar)(e,(0,j.formatSuccessMessageForFolder)(e),this.sharingInfo.fqPath(),this.user.id):(0,j.showInBandShareSuccessSnackbar)(this.sharingInfo.name());H.UserSurvey.addAttribute("isFolder",String(this.sharingInfo.isFolder())),(0,F.trackUserLeapEvent)(F.SharingUserLeapEvent.SHARE_SUCCESS,a)}if(a!==g.SHARE_ACTION_ORIGIN_TYPE.BROWSE_GLOBAL_ACTIONS&&a!==g.SHARE_ACTION_ORIGIN_TYPE.WIZARD||U.WebUserActionLog.log(this.user.id,G.WebUserActionLogEvent.NEW_SHARED_FOLDER_SUCCESS,{}),null===(e=l.onSuccessSharing)||void 0===e||e.call(l),this.sharingInfo.automationOptionChecked()&&(0,pe.asyncLaunchAddOrEditAutoFolderModal)({fqPath:this.sharingInfo.fqPath(),nsId:null===(t=this.sharingInfo.metadata())||void 0===t?void 0:t.nsId(),user:this.user,entryPoint:"share_modal",source:"add_from_folder_creation"}),this.refreshSharedWithColumnContentData(),!s.keepModalOpen){const{inviteEligibleNotSeenContacts:e,inviteEligibleSeenContacts:t}=this.sharingInfo.getEligibleInviteAfterSharingContacts(),s=this.getSharingInfo().sharingPrefs().invite_or_request_after_sharing_modal_variant;if((0,Q.shouldShowModalVariant)(e,s)){m.Modal.close();const i=(0,Q.getInviteAfterSharingUsers)(e,t);if("admin_invite_expand_eligibility"===s&&1===i.length){const e=i[0],t=Date.now(),n=this.loadShowGuestPassAdminInviteAfterSharingModal(),r=this.loadShowAdminInviteAfterSharingModal();(0,Ee.fetchIsEligibleToInviteGuest)(e.email).then(e=>{e?n.then(e=>{e({eligibleUser:i[0],modalOrigin:a})}):r.then(e=>{e({eligibleUsers:i,adminModalVariant:s,modalOrigin:a,modalLoadingStartTime:t})})})}else if("admin_invite_expand_eligibility"===s){const e=Date.now();this.loadShowAdminInviteAfterSharingModal().then(t=>{t({eligibleUsers:i,adminModalVariant:s,modalOrigin:a,modalLoadingStartTime:e})})}else if((0,Q.isMemberInviteModal)(s)){const e=Date.now();this.loadShowMemberInviteAfterSharingModal().then(t=>{t({eligibleUsers:i,memberModalVariant:s,sharingOrigin:a,modalLoadingStartTime:e})})}}else if(n){const e=(0,J.getShopModalLoggingParams)(this.getContentInfo(),this.getSharingInfo().getReferrer());(0,oe.publishEvent)(re.CampaignEvents.SHARE_MODAL_CLOSED,{context:i,loggingParams:e})}else m.Modal.close()}}return Promise.resolve()}).finally(()=>{i.outcomeHasBeenLogged||this.log(D.TiburonEventName.InconclusiveInbandShare),t.incompleteInbandShare.delete(p)})}loadShowAdminInviteAfterSharingModal(){return s.__awaiter(this,void 0,void 0,(function*(){const{showAdminInviteAfterSharingModal:t}=yield new Promise((t,s)=>{e(["metaserver/static/js/teams/invite/modals/invite_after_sharing/admin_invite_after_sharing_modal"],t,s)}).then(s.__importStar);return t}))}loadShowGuestPassAdminInviteAfterSharingModal(){return s.__awaiter(this,void 0,void 0,(function*(){const{showGuestPassAdminInviteAfterSharingModal:t}=yield new Promise((t,s)=>{e(["metaserver/static/js/teams/invite/modals/guest_pass/guest_pass_admin_invite_after_sharing_modal"],t,s)}).then(s.__importStar);return t}))}loadShowMemberInviteAfterSharingModal(){return s.__awaiter(this,void 0,void 0,(function*(){const{showMemberInviteAfterSharingModal:t}=yield new Promise((t,s)=>{e(["metaserver/static/js/teams/invite/modals/invite_after_sharing/member_invite_after_sharing_modal"],t,s)}).then(s.__importStar);return t}))}shareFolderSimple(e,t=!1,s,a){const i=e=>{this.dispatch(v.ShareModalActionTypes.SHARE_FOLDER_SUCCESS,{metadata:e}),p.Dispatcher.dispatch({type:w.SharePageActionTypes.FETCH_METADATA_SUCCESS,metadata:e,user:this.user})},r={fqPath:e,confidential:t,syncSetting:s,folderPolicy:a},o=this.client.share(r);return this.dispatch(v.ShareModalActionTypes.SHARE_FOLDER_REQUEST,{promise:o}),o.then(i).catch(e=>{if(e instanceof n.AppError&&e.error&&e.error.bad_path&&"already_shared"===e.error.bad_path[".tag"]){const t=(0,C.folderMetadataApiToRecord)(e.error.bad_path);return i(t)}return this.dispatch(v.ShareModalActionTypes.SHARE_FOLDER_FAILURE),Promise.reject(e)})}getFqPath(){let e;return e=this.sharingInfo.isNonUserRelativeContext()&&!this.user.is_cdm_member?`ns:${this.getContentInfo().nsId()}${this.getContentInfo().nsPath()}`:this.getContentInfo().displayPath(),e}isMemberAccessLevelQualified(e){return null!=e}sharingExperimentsLog(e,t={}){const s=this.getContentInfo().extras.modalSessionId;t.modalSessionId=t.modalSessionId||s,i.SharingExperimentsLogger.log(this.user.id,e,t)}teardownPass(){this.clearCachedPassInfo(),this.getPassFetchingInfo().shouldFetchPass&&f.PassHelpers.teardown({user:this.user,fileData:this.getFileData(),async:!0,shouldWritePresence:!1})}showStandardError(e){const t=e&&e.message;(0,j.sharingNotificationError)(t||q.intl.formatMessage({id:"+iNJRS",defaultMessage:"There was a problem completing this request."}))}shouldShowEsignDiscoveryUpsell(){return de.HELLOSIGN_SUPPORTED_EXTENSIONS.includes("."+(0,d.file_extension)(this.sharingInfo.name()))&&!this.sharingInfo.isInEsignPostSharingExclusionPeriod()&&this.isSendForSignatureEnabled&&!(0,ie.is_supported_mobile_browser)()}updateSharingTasks(e){this.dispatch(v.ShareModalActionTypes.UPDATE_SHARING_TASKS,{sharingTasks:e})}shouldFetchDocsendAnalyticsLink(){var e;const t=this.sharingInfo.contentInfo(),s=(0,fe.getDocsendAnalyticsAddOnConfig)(this.user,this.sharingInfo.getInitialProps().docsendAnalyticsAddOn);return s.coreSharingModal.fetchAnalyticsLink&&s.isSupportedFile((null===(e=this.sharingInfo.sharingInfoState().linkMetadata)||void 0===e?void 0:e.file_size)||0,(0,d.file_extension)(t.name()))&&"string"==typeof this.sharingInfo.contentInfo().id}fetchDocsendAnalyticsLink(){return s.__awaiter(this,void 0,void 0,(function*(){const e=this.sharingInfo.contentInfo(),t=(0,d.file_extension)(e.name());this.dispatch(v.ShareModalActionTypes.DOCSEND_ANALYTICS_LINK_REQUEST);const s=yield(0,_e.getLink)(this.client,e.id,t,"share_modal",{subjectUserId:this.user.id});s?this.dispatch(v.ShareModalActionTypes.DOCSEND_ANALYTICS_LINK_SUCCESS,{linkData:{link:s.link,hasNewerFileVersion:s.file_has_newer_version,fileTimestampMicro:s.file_hlc_unix_micros}}):this.dispatch(v.ShareModalActionTypes.DOCSEND_ANALYTICS_LINK_FAILURE)}))}}})),define("metaserver/static/js/sharing/actions/contact_validators",["require","exports","tslib","metaserver/static/js/sharing/api/util/types","lodash","metaserver/static/js/sharing/ui_util","metaserver/static/js/core/exception","metaserver/static/js/clean/js_client_stopwatch","metaserver/static/js/contacts/contact_token_state","typescript/component_libraries/spectrum-sharing/src/utils/logging"],(function(e,t,s,a,i,n,r,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncContactValidator=void 0,i=s.__importStar(i);const d={state:l.ContactTokenState.invalid,msg:n.CONTACT_ERROR_MESSAGES.SINGLE_INVALID};t.AsyncContactValidator=class{constructor(e){this.validationStopWatchName="async_contact_server_side_validation",this.client=e,o.JSStopwatch.create_stopwatch_if_not_exist(this.validationStopWatchName)}validate(e,t,i,l,p){return s.__awaiter(this,void 0,void 0,(function*(){const s={};p.filter(e=>e.invalid).forEach(e=>s[e.getKey()]=d);const u=p.filter(e=>!e.invalid);if(0===u.length)return s;const m=o.JSStopwatch.startSpan("validation",{stopwatchName:this.validationStopWatchName,async:!0});let h=void 0;try{(0,n.logTiburonEvent)(i,e,c.TiburonEventName.AttemptTargetValidation),h=yield this.client.validateMembers({contentId:t,accessLevel:l,members:(0,a.contactsToMembers)(u,!0)})}catch(t){(0,n.logTiburonEvent)(i,e,c.TiburonEventName.FailTargetValidation,{error:t.error?t.error[".tag"]:"unknown server error"});let s=[];try{s=u.map(e=>{const t=e.getContactID()||"";return{mtype:(0,a.contactToMember)(e,!0)[".tag"],ctype:e.type,value:`${t.slice(0,1)}__${t.slice(-3)}`,valLen:t.length}})}catch(e){}(0,r.reportStack)("server error in contact validation",{severity:r.SEVERITY.NONCRITICAL,tags:["sharing"],exc_extra:{contactsDebug:s}})}if(!h)return s;(0,n.logTiburonEvent)(i,e,c.TiburonEventName.SucceedTargetValidation);const{results:g}=h,_={};return p.forEach(e=>{_[this.selectorToScalarKey((0,a.contactToMember)(e,!0))]=e.getKey()}),g.forEach(e=>{const t=_[this.selectorToScalarKey(e.member)],a=e.target_invite_or_request_eligibility;s[t]=Object.assign(Object.assign({},this.calculateValidation(e.result)),{inviteAfterSharingEligibility:a})}),o.JSStopwatch.endSpan("validation",{stopwatchName:this.validationStopWatchName,spanId:m}),setTimeout(()=>o.JSStopwatch.flush_current_data(),0),s}))}selectorToScalarKey(e){const t=e[".tag"];return`${t}-${i.get(e,t)}`}calculateValidation(e){const t=e[".tag"];switch(t){case"allowed":const s=e.allowed[".tag"];switch(s){case"no_warning":return{state:l.ContactTokenState.ok,msg:null};case"outside_of_team":return{state:l.ContactTokenState.warn,msg:n.CONTACT_ERROR_MESSAGES.OUT_OF_TEAM};case"not_dropbox_user":return{state:l.ContactTokenState.warn,msg:"NOT_DROPBOX_USER"};default:return(0,r.reportStack)("New allowed warning type without handling",{tags:["sharing"],severity:r.SEVERITY.CRITICAL,exc_extra:{warning:s}}),{state:l.ContactTokenState.ok,msg:null}}case"disallowed":const a=e.disallowed[".tag"];switch(a){case"invalid_member":return{state:l.ContactTokenState.invalid,msg:n.CONTACT_ERROR_MESSAGES.SINGLE_INVALID};case"outside_of_team":return{state:l.ContactTokenState.invalid,msg:n.CONTACT_ERROR_MESSAGES.OUT_OF_TEAM};case"target_is_individual":return{state:l.ContactTokenState.invalid,msg:n.CONTACT_ERROR_MESSAGES.NONGROUP_INVITEE};case"no_permission":return{state:l.ContactTokenState.invalid,msg:n.CONTACT_ERROR_MESSAGES.NO_PERMISSION};default:return(0,r.reportStack)("New disallowed error type without handling",{tags:["sharing"],severity:r.SEVERITY.CRITICAL,exc_extra:{error:a}}),{state:"invalid",msg:n.CONTACT_ERROR_MESSAGES.NO_PERMISSION}}default:const i="Unpredicted state in client validation API response";throw(0,r.reportStack)(i,{tags:["sharing"],severity:r.SEVERITY.CRITICAL,exc_extra:{state:t}}),new Error(i)}}}})),define("metaserver/static/js/sharing/actions/create_shared_folder_modal_actions",["require","exports","tslib","metaserver/static/js/file_actions/create-folder","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/browse/constants","metaserver/static/js/files_view/file_actions/file_from_metadata"],(function(e,t,s,a,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleCreateSharedFolder=void 0,a=s.__importStar(a),t.handleCreateSharedFolder=function({user:e,pathName:t,folderName:o,redirectOnSuccess:l,showShareModalOnSuccess:c,shouldLaunchAutomationModal:d=!1}){return s.__awaiter(this,void 0,void 0,(function*(){const s=yield a.createFolder({destination:t,name:o,user:e,checkFsw:!1,origin:n.CREATE_FOLDER_ACTION_ORIGIN_TYPE.CREATE_SHARED_FOLDER_MODAL,surface:"browse"});if("success"===s.type){const e=(0,r.folderFromFolderMetadata)(s.folder);l&&(l(e.fq_path),c&&c(e,i.SHARE_ACTION_ORIGIN_TYPE.CREATE_SHARED_FOLDER_MODAL,d))}}))}})),define("metaserver/static/js/sharing/api",["require","exports","metaserver/static/js/deprecated_ajax/ajax_jquery"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingApi=void 0;t.SharingApi=class{constructor(e){this.user=e}get_sync_vars_for_ns_id(e,t,s){const a={ns_id:e,sub_path:t};this._make_request("/sharing/get_sync_vars_for_ns_id",a,s,null,!0)}validate_new_sf_path(e,t,s,a){const i={share_type:"new",folder_name:e,path:t};this._make_request("/share_ajax/validate_folder",i,s,a,!0)}validate_shareable_existing_sf_path(e,t,s){const a={share_type:"shareable_existing",path:e};this._make_request("/share_ajax/validate_folder",a,t,s,!0)}_make_request(e,t,a,i,n=!1,r=!0){const o={url:e,data:t,success(e,t,s){a(s)},error(e){i&&i(e)}};r&&(o.subject_user=this.user.id),n?(0,s.FormWebRequest)(o):(0,s.WebRequest)(o)}}})),define("metaserver/static/js/sharing/cdm_new_folder_modal_components",["require","exports","tslib","classnames","react","dig-components/icons","dig-components/icons/src","dig-components/modal","dig-components/text_fields","dig-components/form_row","dig-components/typography","typescript/libraries/spectrum-content-icon-compatibility/src/index","spectrum/input/index","js/filepath/filepath","metaserver/static/js/clean/ui/flag","metaserver/static/js/sharing/views/hover_close_button","metaserver/static/js/core/i18n"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u,m,h,g,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FolderNameInput=t.FolderNameDefaultWarningMessage=t.FolderNameDefaultErrorMessage=t.FolderNameDefaultWarningValidator=t.FolderNameDefaultErrorValidator=t.FolderNameHeader=void 0,a=s.__importDefault(a),i=s.__importStar(i),g=s.__importDefault(g);t.FolderNameHeader=e=>{const{isCreateViaUpload:t,folderPath:s,handleClickCloseButton:a,useDigModal:n}=e,r=t&&s?(0,m.filename)(s):_.intl.formatMessage({id:"5Z9j+l",defaultMessage:"Create folder"});return n?i.createElement(o.Modal.Header,{className:"cdm-create-folder-modal__header--dig",hasBottomSpacing:"title-small"},i.createElement(p.IconContent,{name:"folder-small"}),i.createElement(d.Title,{className:"cdm-create-folder-modal__header-title--dig",size:"small"},r)):i.createElement("div",null,i.createElement(h.Flag,{rightAttachment:a?i.createElement(g.default,{onClick:a}):void 0,leftAttachment:i.createElement(p.IconContent,{name:"folder-small"}),spacing:"s"},r))},t.FolderNameHeader.displayName="FolderNameHeader";t.FolderNameDefaultErrorValidator=e=>f(e,["\\","/",":"]);t.FolderNameDefaultWarningValidator=e=>f(e,['"',"*","<",">","?","|"]);const f=(e,t)=>{if(!e)return!1;for(const s of t)if(e.indexOf(s)>=0)return!1;return!0};t.FolderNameDefaultErrorMessage=_.intl.formatMessage({id:"LAZfR0",defaultMessage:'Folder names can’t contain: " \\ / :'}),t.FolderNameDefaultWarningMessage=_.intl.formatMessage({id:"Vf5SED",defaultMessage:"Warning: To avoid potential sync issues, name should not contain \" * '<' '>' ? |"});class E extends i.PureComponent{constructor(){super(...arguments),this.inputRef=i.createRef()}componentDidMount(){this.props.focusOnMount&&this.inputRef.current&&this.inputRef.current.focus()}render(){if(this.props.isCreateViaUpload)return null;const e=this.props.errorText||this.props.warningText;return this.props.useDig?i.createElement("div",{className:(0,a.default)("cdm-create-folder-modal__name-input--dig",this.props.className)},i.createElement(c.FormLabel,{htmlFor:"new_folder_name_input"},_.intl.formatMessage({id:"cJojIg",defaultMessage:"Name"})),i.createElement(l.TextInput,{ref:this.inputRef,id:"new_folder_name_input",placeholder:_.intl.formatMessage({id:"ss4CO0",defaultMessage:"Folder name"}),onChange:this.props.handleFolderNameChange,onKeyDown:this.props.onKeyDown,isInvalid:!!e,"aria-describedby":"new_folder_name_message",defaultValue:this.props.defaultInputFolderName}),this.props.errorText&&i.createElement(c.FormHelperText,{isInvalid:!0,id:"new_folder_name_message"},i.createElement(n.UIIcon,{src:r.FailLine,size:"small"})," ",this.props.errorText),this.props.warningText&&i.createElement(c.FormHelperText,{id:"new_folder_name_message"},i.createElement(n.UIIcon,{src:r.WarningLine,size:"small"})," ",this.props.warningText)):i.createElement("div",{className:(0,a.default)("u-pad-vertical-s",this.props.className,{"u-mar-bottom-s":!e})},i.createElement("div",{className:"cdm-create-folder-modal__header u-pad-bottom-xs u-font-meta"},_.intl.formatMessage({id:"cJojIg",defaultMessage:"Name"})),i.createElement(u.Input,{forwardedRef:this.inputRef,placeholder:_.intl.formatMessage({id:"ss4CO0",defaultMessage:"Folder name"}),id:"new_folder_name_input",onChange:this.props.handleFolderNameChange,className:(0,a.default)("cdm-create-folder-modal__content-name",this.props.inputClassName,{valid:this.props.isValid,invalid:!this.props.isValid}),onKeyDown:this.props.onKeyDown,defaultValue:this.props.defaultInputFolderName}),i.createElement("label",{style:{display:"none"},htmlFor:"new_folder_name_input"},_.intl.formatMessage({id:"ss4CO0",defaultMessage:"Folder name"})),!e&&i.createElement("div",{className:"new-folder-empty-status"}),this.props.errorText&&i.createElement("span",{className:"new-folder-error-text"},this.props.errorText),this.props.warningText&&i.createElement("span",{className:"new-folder-warning-text"},this.props.warningText))}}t.FolderNameInput=E,E.displayName="FolderNameInput"})),define("metaserver/static/js/sharing/confirmation_modals/confirm_recursive_policy_change_modal",["require","exports","tslib","react","dompurify","metaserver/static/js/components/ui/modal","metaserver/static/js/core/i18n","spectrum/modal/index"],(function(e,t,s,a,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.confirmRecursivePolicyChange=void 0,a=s.__importStar(a),i=s.__importDefault(i),t.confirmRecursivePolicyChange=function(e){const t=e.isTeamSharedFolder?i.default.sanitize(r.intl.formatMessage({id:"p4X4PM",defaultMessage:"Your changes will be applied to this team folder and any folders inside it."})):i.default.sanitize(r.intl.formatMessage({id:"ImAPkp",defaultMessage:"Your changes will be applied to this folder and any folders inside it."}));n.Modal.showInstance(a.createElement(o.UtilityModal,{ariaLabel:r.intl.formatMessage({id:"SoVWmf",defaultMessage:"Save settings?"}),title:r.intl.formatMessage({id:"SoVWmf",defaultMessage:"Save settings?"}),overlayClickClose:!0,primaryAction:r.intl.formatMessage({id:"kTq6n5",defaultMessage:"Save settings"}),secondaryAction:r.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"}),onPrimaryAction:e.onConfirm,onSecondaryAction:e.onCancel,open:!0,onRequestClose:e.onCancel},t))}})),define("metaserver/static/js/sharing/confirmation_modals/member_access_change_confirmation_modal",["require","exports","tslib","react","metaserver/static/js/clean/em_string","metaserver/static/js/sharing/confirmation_modals/confirm_with_option_modal","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/components/ui/modal","metaserver/static/js/core/browser","metaserver/static/js/core/i18n"],(function(e,t,s,a,i,n,r,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showMemberAccessChangeConfirmationModal=t.CONFIRM_WITH_OPTION_MODAL_ID=void 0,a=s.__importDefault(a),l=s.__importStar(l),t.CONFIRM_WITH_OPTION_MODAL_ID="confirm-with-option-modal";t.showMemberAccessChangeConfirmationModal=function(e="",s,d,p,u=!1,m,h,g=!1,_,f,E=!1){let S,b,v,M,T;const y=i.Emstring.em_snippet(e,40);let C=null;if(s===r.MEMBER_ACTION.REMOVE){if(v=c.intl.formatMessage({id:"sIVZG2",defaultMessage:"Remove {name}?"},{name:y}),d){S=p&&!g?f?c.intl.formatMessage({id:"ru4Qhg",defaultMessage:"If you remove <strong>{name}</strong>, they won’t be able to see future changes to this shared folder. Keep in mind that anyone who can access <strong>{parentname}</strong> will still be able to access this folder."},{strong:e=>a.default.createElement("strong",null,e),name:y,parentname:f}):c.intl.formatMessage({id:"8rlotY",defaultMessage:"If you remove <strong>{name}</strong>, they won’t be able to see future changes to this shared folder. Keep in mind that anyone who can access the parent folder will still be able to access this folder."},{strong:e=>a.default.createElement("strong",null,e),name:y}):c.intl.formatMessage({id:"03tbWi",defaultMessage:"If you remove <strong>{name}</strong>, they won’t be able to see future changes to this shared folder."},{strong:e=>a.default.createElement("strong",null,e),name:y}),u&&(C=c.intl.formatMessage({id:"RB9i4M",defaultMessage:"Let {name} keep a copy of this shared folder"},{name:y}))}else S=E?c.intl.formatMessage({id:"D0n7tP",defaultMessage:"Keep in mind, if group members have a shared link to this file, they might still be able to view or edit it."}):c.intl.formatMessage({id:"nAwKbF",defaultMessage:"Keep in mind, if they have a shared link to this file, they might still be able to view or edit it."}),M=c.intl.formatMessage({id:"S+RxKh",defaultMessage:"More about links"}),T=()=>l.open_tab("https://help.dropbox.com/files-folders/share/remove-link");b=c.intl.formatMessage({id:"6WOQfa",defaultMessage:"Remove"})}else _?(v=c.intl.formatMessage({id:"Px//wf",defaultMessage:"Make {name} the owner of this folder and all contained files and folders?"},{name:y}),S=c.intl.formatMessage({id:"gek9SL",defaultMessage:"Settings for this folder will now be managed by {name}. Keep in mind, if they’re not on your Dropbox team, you won’t be able to manage this folder here anymore."},{name:y})):(v=c.intl.formatMessage({id:"khEZSl",defaultMessage:"Make {name} the owner of this folder?"},{name:y}),S=c.intl.formatMessage({id:"y7GDnJ",defaultMessage:"{name} will become the owner of all items in this folder. Only they will be able to unshare or change folder settings."},{name:y})),b=c.intl.formatMessage({id:"+ZJXxL",defaultMessage:"Make owner"});return o.Modal.showInstance(a.default.createElement(n.ConfirmWithOptionModal,{autoClose:!1,confirmText:b,cancelText:c.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"}),link:M,onConfirm:m,onCancel:h,onClickLink:T,optionLabel:C,showOption:null!=C,title:v},S),!0,t.CONFIRM_WITH_OPTION_MODAL_ID)}}));var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,s,a){void 0===a&&(a=s);var i=Object.getOwnPropertyDescriptor(t,s);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,a,i)}:function(e,t,s,a){void 0===a&&(a=s),e[a]=t[s]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&__createBinding(t,e,s);return __setModuleDefault(t,e),t};define("metaserver/static/js/sharing/create_shared_folder_modal/async_create_shared_folder_util",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncShowCreateSharedFolderModal=void 0,t.asyncShowCreateSharedFolderModal=function(t){return new Promise(s=>{new Promise((t,s)=>{e(["metaserver/static/js/sharing/create_shared_folder_modal/create_shared_folder_modal"],t,s)}).then(__importStar).then(e=>{s(e.showCreateSharedFolderModal(t))})})}})),define("metaserver/static/js/sharing/delete_link_modal",["require","exports","tslib","metaserver/static/js/deprecated_ajax/ajax_jquery","react","metaserver/static/js/clean/em_string","metaserver/static/js/components/ui/modal","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/sharing/ui_notifications_util","dig-components/modal","dig-components/buttons","metaserver/static/js/core/i18n","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/dropbox/proto/pap_events/organize/finish_browse_time_to_success","metaserver/static/js/browse_tts/browse_tts","metaserver/static/js/sharing/ui_util","typescript/component_libraries/spectrum-sharing/src/utils/logging","metaserver/static/js/api_v2/error"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u,m,h,g,_,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteLinkWithConfirmLegacy=t.deleteLinkWithConfirm=void 0,a=s.__importStar(a),i=s.__importDefault(i),o=s.__importStar(o);var E=m.pap_events.organize.Finish_BrowseTimeToSuccess.BrowseTtsEventName;t.deleteLinkWithConfirm=function({contentInfo:e,client:t,url:s,contentName:a,onDeleteLink:m,onCancel:S,actionHandler:b}){const v=(s,a={})=>{(0,g.logTiburonEvent)(e,t.userId,s,a)};a=n.Emstring.em_snippet(a,o.SNIPPET_SIZES.FILENAME);const M=p.intl.formatMessage({id:"gbccCU",defaultMessage:"Delete link to “{name}”?"},{name:a}),T=()=>{r.Modal.close(),S&&S()};r.Modal.showInstance(i.default.createElement(c.Modal,{"aria-label":M,title:M,open:!0,onRequestClose:T,overlayClassName:"file-viewer-modal-overlay"},i.default.createElement(c.Modal.Header,{hasBottomSpacing:"title-standard"},i.default.createElement(c.Modal.Title,null,M)),i.default.createElement(c.Modal.Body,{hasVerticalSpacing:!1},p.intl.formatMessage({id:"poEviS",defaultMessage:"If you want to further restrict access, check the list of people who still have access."})),i.default.createElement(c.Modal.Footer,null,i.default.createElement(d.Button,{variant:"opacity",onClick:T},p.intl.formatMessage({id:"gZIlfg",defaultMessage:"Cancel"})),i.default.createElement(d.Button,{variant:"primary",onClick:()=>{v(_.TiburonEventName.AttemptDeleteSharedLink),(0,h.logBrowseTTS)(E.DELETE_LINK_BROWSE_TTS_EVENT_NAME);const e=p.intl.formatMessage({id:"NEH57K",defaultMessage:"Deleting link to <st>{name}</st>..."},{st:e=>i.default.createElement("strong",null,e),name:a});(0,l.sharingNotificationInProgress)(e,!0),t.revokeSharedLink({url:s}).then(()=>{v(_.TiburonEventName.SucceedDeleteSharedLink,{http_status_code:200});const e=p.intl.formatMessage({id:"gfG7zK",defaultMessage:"Deleted link to <st>{name}</st>."},{st:e=>i.default.createElement("strong",null,e),name:a});b?(0,l.showDeleteLinkSuccessSnackbar)(e,()=>b.showScreen(u.MANAGE_SCREEN),"sharing-notification"):(0,l.sharingNotificationSuccess)(e),r.Modal.close(),m&&m()}).catch(e=>{if(e instanceof f.ApiError){const t=e;v(_.TiburonEventName.FailDeleteSharedLink,{http_status_code:t.raw&&t.raw.status,error_tag:t.error&&t.error[".tag"]||"undefined_error",error_summary:t.summary})}else v(_.TiburonEventName.FailDeleteSharedLink);throw e})}},p.intl.formatMessage({id:"cRtuyn",defaultMessage:"Delete"})))))};t.deleteLinkWithConfirmLegacy=function({client:e,tkey:t,contentName:s,onDeleteLink:i,onCancel:c}){if(s=n.Emstring.em_snippet(s,o.SNIPPET_SIZES.FILENAME),null===t)return void r.Modal.close();return r.SimpleModal.show({autoclose:!1,body_html:p.intl.formatMessage({id:"xuc+Bh",defaultMessage:"This link will no longer work for anyone who has it."}),cancel_completed_callback:c,cancel_text:p.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"}),confirm_callback:()=>a.WebRequest({url:`/sm/disable/${t}`,type:"POST",data:{tkey:t},subject_user:e.userId,success(){const e=p.intl.formatMessage({id:"Rfyu6S",defaultMessage:"Deleted link to “{name}”"},{name:s});(0,l.sharingNotificationSuccess)(e),r.Modal.close(),i&&i()}}),confirm_text:p.intl.formatMessage({id:"9v2+SN",defaultMessage:"Delete"}),title_text:p.intl.formatMessage({id:"gbccCU",defaultMessage:"Delete link to “{name}”?"},{name:s}),style:"default-maestro"})}})),define("metaserver/static/js/sharing/member_constructors",["require","exports","metaserver/static/js/sharing/api/types/metadata","metaserver/static/js/sharing/access_level","metaserver/static/js/pass/utils","metaserver/static/js/core/i18n","metaserver/static/js/core/user_i18n"],(function(e,t,s,a,i,n,r){"use strict";function o(){const e=new s.PermissionSetting({allow:!1});return new s.MemberPermissions({make_editor:e,make_viewer:e,make_owner:e,remove:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.constructLinkMembers=t.constructGuests=void 0,t.constructGuests=function(e){const t=i.AnonymousViewerUtils.getAnonymousUserIds(e),a=n.intl.formatMessage({id:"+s6D7j",defaultMessage:"Guest"});return t.map(e=>new s.UserMembershipInfo({access_type:"reader",account:new s.BasicAccount({account_id:e,display_name:a,familiar_name:a,given_name:a,surname:""}),account_id:e,initials:i.AnonymousViewerUtils.getAnonymousViewerInitials(a),is_inherited:!1,permissions:o(),same_team:!1,time_last_seen:null}))},t.constructLinkMembers=function(e){return e?e.map(e=>{const{seen_state_user:{user_id:t,display_name:i,email:n,photo_circle_url:l,sharing_access_type:c},when_last_seen:d}=e;let p=a.ACCESS_LEVEL.READER;return c&&"edit_link_access"===c.type&&(p=a.ACCESS_LEVEL.WRITER),new s.UserMembershipInfo({access_type:p,account:new s.BasicAccount({account_id:t,display_name:i,email:n,email_verified:!0,familiar_name:"",given_name:"",profile_photo_url:l,surname:""}),account_id:t,initials:(0,r.getInitials)(i),is_inherited:!1,permissions:o(),same_team:!0,time_last_seen:d?new Date(1e3*d):null})}):[]}})),define("metaserver/static/js/sharing/parent_folder_access_modal",["require","exports","tslib","react","react-intl","metaserver/static/js/clean/em_string","metaserver/static/js/clean/ui/flag","metaserver/static/js/components/ui/modal","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/core/i18n","metaserver/static/js/icon/folder_icon"],(function(e,t,s,a,i,n,r,o,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParentFolderAccessModal=void 0,a=s.__importDefault(a),r=s.__importStar(r);class p extends a.default.Component{constructor(){super(...arguments),this.dismissModal=()=>{o.Modal.close(),this.handleDismissed()},this.handleDismissed=()=>{this.props.onClose&&this.props.onClose()},this.handleNavigateToParentFolder=e=>()=>{o.Modal.close(),this.props.onParentFolderClicked&&this.props.onParentFolderClicked(e.path,this.arePermissionsAllowed(e.permissions))},this.arePermissionsAllowed=e=>e.some(e=>e&&e.allow),this.getInfoStr=e=>"remove"===this.props.originalAction?c.intl.formatMessage({id:"Wg804T",defaultMessage:"{count, plural, one{To remove them from <b>{content_name}</b>, you'll need to remove them from the parent folder <b>{single_parent_folder_name}</b>.} other{To remove them from <b>{content_name}</b>, you'll need to remove them from the parent folders listed.}}"},Object.assign({count:this.props.memberAccessLevelResult.parentFolders.length},e)):c.intl.formatMessage({id:"u9QEXM",defaultMessage:"{count, plural, one{To change their access to <b>{content_name}</b>, you'll need to change their access to the parent folder <b>{single_parent_folder_name}</b>.} other{To change their access to <b>{content_name}</b>, you'll need to change their access to the parent folders listed.}}"},Object.assign({count:this.props.memberAccessLevelResult.parentFolders.length},e)),this.getSimpleContentInfoStr=e=>"remove"===this.props.originalAction?c.intl.formatMessage({id:"P4ldKD",defaultMessage:"Because they have access to the parent folder, they can't be removed from <b>{content_name}</b>."},e):c.intl.formatMessage({id:"FziuiR",defaultMessage:"Because they can edit the parent folder, their access to <b>{content_name}</b> can't be changed."},e),this.renderParentFolderContent=()=>a.default.createElement("div",null,this.getInfoStr({member_name:n.Emstring.em_snippet(this.props.memberDisplayName,l.SNIPPET_SIZES.DISPLAY_NAME),content_name:n.Emstring.em_snippet(this.props.contentInfo.name()||"",l.SNIPPET_SIZES.FILENAME),single_parent_folder_name:n.Emstring.em_snippet(1===this.props.memberAccessLevelResult.parentFolders.length?this.props.memberAccessLevelResult.parentFolders[0].name:"",l.SNIPPET_SIZES.FILENAME),b:e=>a.default.createElement("b",null,e)}),a.default.createElement("div",{className:"parent-folder-access-modal__folder-list u-mar-top-s"},a.default.createElement("ul",{className:"o-list-ui o-list-ui--dividers"},this.props.memberAccessLevelResult.parentFolders.map(this.renderParentFolder)))),this.renderParentFolder=e=>a.default.createElement("li",null,a.default.createElement("div",{className:"parent-folder-access-modal__parent-folder u-pad-vertical-xs u-pad-horizontal-s",onClick:this.handleNavigateToParentFolder(e)},a.default.createElement(r.Flag,{leftAttachment:a.default.createElement(d.SharedFolderIcon,null),rightAttachment:this.renderFolderLink(e),spacing:"xs"},a.default.createElement("span",{className:"parent-folder-access-modal__folder-name"},n.Emstring.em_snippet(e.name,l.SNIPPET_SIZES.FILENAME))))),this.renderFolderLink=e=>a.default.createElement("button",{className:"button-as-link",onClick:this.handleNavigateToParentFolder(e),type:"button"},this.arePermissionsAllowed(e.permissions)?c.intl.formatMessage({id:"IyoET0",defaultMessage:"Manage access"}):c.intl.formatMessage({id:"D3p2Rv",defaultMessage:"View folder"})),this.renderSimpleContent=()=>a.default.createElement("div",null,a.default.createElement("span",{className:"parent-folder-access-modal__warning"},this.getSimpleContentInfoStr({content_name:n.Emstring.em_snippet(this.props.contentInfo.name()||"",l.SNIPPET_SIZES.FILENAME),b:e=>a.default.createElement("b",null,e)})),a.default.createElement("div",{className:"u-mar-top-m clearfix"},a.default.createElement("div",{className:"u-l-fr"},a.default.createElement("button",{className:"c-btn c-btn--primary confirm-button",onClick:this.dismissModal},c.intl.formatMessage({id:"nOO9Qi",defaultMessage:"OK"}))))),this.getTitleStr=()=>"remove"===this.props.originalAction?this.displayParentFolderContent()?(0,i.defineMessage)({id:"W05Pm/",defaultMessage:"Couldn't remove {member_name}"}):(0,i.defineMessage)({id:"pE8z12",defaultMessage:"Can't remove {member_name}"}):this.displayParentFolderContent()?(0,i.defineMessage)({id:"o9ZIdD",defaultMessage:"Couldn't change access for {member_name}"}):(0,i.defineMessage)({id:"PR8RwD",defaultMessage:"Can't change access for {member_name}"}),this.displayParentFolderContent=()=>this.props.memberAccessLevelResult.parentFolders&&!this.props.isInContentManager}render(){const e=this.getTitleStr();return a.default.createElement(o.Modal,{autoClose:!1,className:"parent-folder-access-modal",buttonComponent:a.default.createElement("span",null),onDismissCompleted:this.handleDismissed,title:c.intl.formatMessage(e,{member_name:n.Emstring.em_snippet(this.props.memberDisplayName,l.SNIPPET_SIZES.DISPLAY_NAME)})},a.default.createElement("div",{className:"parent-folder-access-modal__contents"},this.displayParentFolderContent()?this.renderParentFolderContent():this.renderSimpleContent()))}}t.ParentFolderAccessModal=p,p.displayName="ParentFolderAccessModal"})),define("metaserver/static/js/sharing/magnet_and_surface_existing_teams_utils",["require","exports"],(function(e,t){"use strict";function s(e,t){return e.filter(e=>void 0!==e.email).map(e=>({email:e.email,checkForInvite:t}))}function a(e){return["member_invite_expand_eligibility","member_suggestion_expand_eligibility"].includes(e)}function i(e){return["admin_invite_after_move","admin_invite_expand_eligibility"].includes(e)}function n(e){return"basic_user_request_to_join"===e}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldShowModalVariant=t.isBasicUserRequestModal=t.isAdminInviteModal=t.isMemberInviteModal=t.getInviteAfterSharingUsers=t.convertContactsToRequestAfterSharingUserEmail=void 0,t.convertContactsToRequestAfterSharingUserEmail=function(e){return s(e,!0)[0].email},t.getInviteAfterSharingUsers=function(e,t){return[...s(e,!0),...s(t,!1)]},t.isMemberInviteModal=a,t.isAdminInviteModal=i,t.isBasicUserRequestModal=n,t.shouldShowModalVariant=function(e,t){const s=e.length>0&&(i(t)||a(t)),r=n(t)&&1===e.length;return Boolean(s||r)}})),define("metaserver/static/js/sharing/share_modal",["require","exports","tslib","immutable","react","classnames","react-intl","metaserver/static/js/flux/store_listener","metaserver/static/js/pass/constants","metaserver/static/js/flows/utils/async_modal_launchers","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/sharing_settings_constants","typescript/component_libraries/spectrum-sharing/src/utils/logging","metaserver/static/js/pass/store","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/sharing/views/constants","ts-key-enum","metaserver/static/js/sharing/member_constructors","metaserver/static/js/sharing/stores/sharing_info","metaserver/static/js/sharing/ui_util","metaserver/static/js/sharing/gating_util","metaserver/static/js/sharing/sharing_settings_modal","metaserver/static/js/sharing/views/modal_content_spectrum","metaserver/static/js/clean/viewer","dig-components/modal","metaserver/static/js/core/i18n","metaserver/static/js/ux_analytics/utils","metaserver/static/js/sharing/api/client","metaserver/static/js/campaigns/types"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u,m,h,g,_,f,E,S,b,v,M,T,y,C,I,k){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareModal=void 0,a=s.__importStar(a),i=s.__importDefault(i),n=s.__importDefault(n);class A extends i.default.Component{constructor(e){super(e),this.spectrumModalClassName="scl-share-modal",this.handleKeyDown=e=>{e.key===g.Key.Escape&&this.onModalCloseClick()},this.preventEventBubbling=e=>e.stopPropagation(),this.onModalCloseClick=()=>{var e;const{onCancel:t,contentInfo:s}=this.props;t&&t();const a=this.getTokenizer();a&&a.finishLogging(!1),this.setState({open:!1}),(0,C.dispatchModalClosed)(),(0,E.trackUserLeapEvent)(E.SharingUserLeapEvent.SHARE_MODAL_CLOSE,s.extras.origin),(0,E.logTiburonEvent)(s,this.props.user.id,p.TiburonEventName.CloseShareModal),(0,E.publishShopModalEvent)(k.CampaignEvents.SHARE_MODAL_CLOSED,s,this.props.sharingInfo.getReferrer(),!0),this.props.sharingInfo.contentInfo().pathExists()&&this.props.sharingInfo.automationOptionChecked()&&(0,c.asyncLaunchAddOrEditAutoFolderModal)({fqPath:this.props.sharingInfo.fqPath(),nsId:null===(e=this.props.sharingInfo.metadata())||void 0===e?void 0:e.nsId(),user:this.props.user,entryPoint:"share_modal",source:"add_from_folder_creation"})},this.getSpectrumModalElement=()=>document.getElementsByClassName(this.spectrumModalClassName)[0],this.onModalReady=()=>{(0,C.dispatchModalOpened)();const e=this.getSpectrumModalElement();e&&e.addEventListener("keypress",this.preventEventBubbling,!1)},this.handleDismiss=e=>{this.showPreviousScreen(e),this.props.openSettingsFromTheExternalSharePageQuickActions&&this.onModalCloseClick()},this.showPreviousScreen=e=>{let t=void 0;e!=d.EDIT_LINK_SETTINGS&&e!=d.VIEW_LINK_SETTINGS||(t=this.state.previousTab),this.setState({currentScreen:this.state.previousScreen,currentTab:t,previousTab:void 0})},this.onSettingsClick=()=>{(0,E.logTiburonEvent)(this.props.contentInfo,this.props.user.id,this.props.sharingInfo.isFolder()?p.TiburonEventName.OpenFolderSettingsModal:p.TiburonEventName.OpenFileSettingsModal),this.setState({currentTab:this.props.sharingInfo.isFolder()?d.FOLDER_SETTINGS:d.FILE_SETTINGS,previousScreen:this.state.currentScreen,currentScreen:m.SETTINGS_SCREEN})},this.onLinkSettingsClick=()=>{let e=d.VIEW_LINK_SETTINGS;this.props.sharingInfo.permissionsObj().canCreateEditLink()&&(e=d.EDIT_LINK_SETTINGS),(0,E.logTiburonEvent)(this.props.contentInfo,this.props.user.id,p.TiburonEventName.OpenLinkSettingsModal,{settings_tab:e}),this.setState({currentTab:e,previousScreen:this.state.currentScreen,currentScreen:m.SETTINGS_SCREEN})},this.onLinkSettingsTextClick=e=>{this.setState({previousTab:p.ManageAccessTabName.ManageLinksTab,currentTab:e,previousScreen:this.state.currentScreen,currentScreen:m.SETTINGS_SCREEN})},this.state={open:!0,currentScreen:e.initialScreen?e.initialScreen:m.SHARE_SCREEN,currentTab:e.initialCurrentTab,previousScreen:m.SHARE_SCREEN,previousTab:void 0}}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown,!1)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown,!1);const e=this.getTokenizer();this.props.actionHandler.onShareModalUnmount(e);const t=this.getSpectrumModalElement();t&&t.removeEventListener("keypress",this.preventEventBubbling,!1)}getTokenizer(){return this.refs.content&&this.refs.content.getWrappedComponent()&&this.refs.content.getWrappedComponent().refs.tokenizer}getClient(){return this.props.sharingInfo.isFolder()?new I.FolderShareApiClient({userId:this.props.user.id,isNonUserRelativeContext:this.props.isInContentManager}):new I.FileShareApiClient({userId:this.props.user.id})}getIsPassEnabled(){const e=u.passStore.getPassPermissions(this.props.contentInfo.extras.fileId);return!!e&&e.canReadPresence}isPassInfoLoaded(){return(0,l.fetchingStatusIsComplete)(this.props.passFetchingStatus)}shouldRenderMainLoading(){if(this.props.sharingInfo.fetchMetadataStatus()===h.FETCH_METADATA_STATUS.FAIL)return!1;const e=this.props.isLinkMetadataLoaded||!this.props.sharingInfo.shouldFetchLinkMetadata(),t=this.props.sharingInfo.isMetadataLoaded()&&this.props.sharingInfo.areSharingPrefsLoaded(),s=this.props.sharingInfo.hasNonSelfMembers()||this.props.areMembersFullyLoaded,a=!this.getIsPassEnabled()||this.isPassInfoLoaded(),i=this.props.shouldBlockMemberListOnPassLoad&&!a;return!t||!s||i||!e}getFinalUIMode(){return this.props.uiMode===h.MODES.POINTER?h.MODES.POINTER:this.shouldRenderMainLoading()?h.MODES.LOADING:this.shouldRenderShareME()?h.MODES.EVOLUTION:this.props.uiMode}render(){let e;if(e=this.props.sharingInfo.isFolder()?this.props.sharingInfo.folderPolicy():this.props.sharingInfo.filePolicy(),this.state.currentScreen===m.SETTINGS_SCREEN&&e)return i.default.createElement(b.SharingSettingsModal,{className:this.spectrumModalClassName,actionHandler:this.props.actionHandler,sharingInfo:this.props.sharingInfo,sharingPrefs:this.props.sharingPrefs,client:this.getClient(),currentTab:this.state.currentTab,currentPolicy:e,folderName:this.props.sharingInfo.name(),isFolder:this.props.sharingInfo.isFolder(),isSharedFolder:this.props.contentInfo.isSharedFolder(),isFolderInsideTeamFolderTree:this.props.isFolderInsideTeamFolderTree,isInContentManager:this.props.isInContentManager,isTeamSharedFolder:this.props.isTeamSharedFolder,isUserOnOwnerTeam:this.props.isUserOnOwnerTeam,linkMetadata:this.props.linkMetadata,ownerTeam:this.props.ownerTeam,permissions:this.props.permissions,user:this.props.user,onDismiss:this.handleDismiss,onSuccessSharing:this.props.onSuccessSharing});{const e=(0,n.default)(this.spectrumModalClassName,{"scl-share-modal--overflow-visible":this.getFinalUIMode()===h.MODES.EVOLUTION});return i.default.createElement(r.RawIntlProvider,{value:y.intl},i.default.createElement(T.Modal,{"app-element":document.getElementById("embedded-app")||document.body,"aria-label":y.intl.formatMessage({id:"XTD4g+",defaultMessage:"Sharing Modal"}),className:e,"body-class-name":"scl-share-modal-content uxa-modal","body-id":"unified-share-modal",open:this.state.open,width:540,overlayClassName:"file-viewer-modal-overlay",onLoad:this.onModalReady,onRequestClose:this.onModalCloseClick,shouldCloseOnOverlayClick:!0},this.renderModalContent()))}}renderModalContent(){const e=!!(this.props.contentInfo.isFile()?this.props.filePolicy&&this.props.filePolicy.viewer_info_policy:this.props.folderPolicy&&this.props.folderPolicy.viewer_info_policy),t={currentScreen:this.state.currentScreen,headerId:"unified-share-modal-title",isCreatingNewFolder:this.isCreatingNewFolder(),isLimitedTeam:this.props.viewer.team_is_limited,isPassEnabled:this.getIsPassEnabled(),mode:this.getFinalUIMode(),showContentManagerBridge:this.shouldRenderContentManagerBridge(),showPassFileSettings:e,onLinkSettingsClick:this.onLinkSettingsClick,onModalCloseClick:this.onModalCloseClick,onLinkSettingsTextClick:this.onLinkSettingsTextClick,onSettingsClick:this.onSettingsClick,currentTab:this.state.currentTab},s=Object.assign(Object.assign({},this.props),t);return i.default.createElement(v.ShareModalContentSpectrum,Object.assign({},s))}shouldRenderContentManagerBridge(e=!1){return!this.props.isInContentManager&&(!!S.GoldenGate.hasContentManagerAndSuperAdmin(this.props.user.id)&&(!!this.props.isTeamSharedFolder||!(!this.props.isFolderInsideTeamFolderTree||!this.props.isUserOnOwnerTeam)&&(e||!this.props.sharingPermissions.canInviteEditor())))}isCreatingNewFolder(){const e=this.props.contentInfo;return e.isFolder()&&!e.extras.exists}notRenderShareME(){return this.props.sharingInfo.fetchMetadataStatus()===h.FETCH_METADATA_STATUS.FAIL||!this.props.sharingInfo.shouldFetchLinkMetadata()}shouldRenderShareME(){return!this.notRenderShareME()}}A.displayName="ShareModal",t.ShareModal=(0,o.listenToStores)(A,{sharingInfoStore:f.sharingInfoStore,passStore:u.passStore},e=>{const t=e.actionHandler.getSharingInfo(),s=t.getInitialProps(),{groupSeenStateInfo:i,linkSeenStateInfo:n,presentAccountIds:r,passFetchingStatus:o}=e.actionHandler.getPassInfo();return{sharingInfo:t,actionHandler:e.actionHandler,areMembersFullyLoaded:t.areMembersFullyLoaded(),areSharingPrefsLoaded:t.areSharingPrefsLoaded(),canChangeOptions:t.permissionsObj().canChangeOptions(),canEdit:t.permissionsObj().canEdit(),canRelinquishMembership:t.permissionsObj().canRelinquishMembership(),canShareLink:t.canShareLink(),canUnshareFile:t.permissionsObj().canUnshare(),canUnshareFolder:t.permissionsObj().canUnshare(),canUpdateConfidentiality:t.permissionsObj().canUpdateConfidentiality(),contactsError:t.contactsError(),contentInfo:t.contentInfo(),contentNameMessage:t.contentNameMessage(),contentNameMessageLevel:t.contentNameMessageLevel(),filePolicy:t.filePolicy(),folderPolicy:t.folderPolicy(),guestMembers:(0,_.constructGuests)(r),groupSeenStateInfo:i,hasDisplayableMembers:t.hasDisplayableMembers(),hasParentSharedFolder:t.hasParentSharedFolder(),initialContentName:s.initialContentName,initialRecipientTokens:t.initialRecipientTokens(),sharingPrefs:t.sharingPrefs(),isConfidentialFolder:t.isConfidentialFolder(),isContentNameFocused:t.isContentNameFocused(),isFolderInsideTeamFolderTree:t.isFolderInsideTeamFolderTree(),isInContentManager:s.isInContentManager,isLinkMetadataLoaded:t.isLinkMetadataLoaded(),isMetadataLoaded:t.isMetadataLoaded(),isOwner:t.isOwner(),isCurrentAccountLoaded:t.isCurrentAccountLoaded(),isTeamSharedFolder:t.isTeamSharedFolder(),isTokenizerEmpty:t.isTokenizerEmpty(),isUserOnOwnerTeam:t.isUserOnOwnerTeam(),linkMembers:(0,_.constructLinkMembers)(n),linkMetadata:t.linkMetadata(),linkOnlyReason:t.linkOnlyReason(),memberCounts:t.memberCounts(),memberCountWithRecipients:t.memberCountWithRecipients(),members:t.members(),metadata:t.metadata(),ownerTeam:t.ownerTeam(),passFetchingStatus:o,pendingMemberAction:t.pendingMemberAction(),permissions:t.permissions(),sharingPermissions:t.permissionsObj(),presentAccountIds:a.Set(r),recipientMessage:t.recipientMessage(),recipientTokens:t.recipientTokens(),shareButtonLabelOverride:s.shareButtonLabelOverride,shareFolderPromise:t.shareFolderPromise(),shouldBlockMemberListOnPassLoad:t.shouldBlockMemberListOnPassLoad(),initialScreen:e.initialScreen,initialCurrentTab:e.initialCurrentTab,teamPolicy:t.teamPolicy(),uiMode:t.uiMode(),user:t.user(),onCancel:s.onCancel,onCreateGroupCallback:t.onCreateGroupCallback(),onDeleteLink:s.onDeleteLink,onSetContentNameAndSendShareFail:s.onSetContentNameAndSendShareFail,onShareClick:s.onShareClick,onSuccessSharing:s.onSuccessSharing,teamGroupInfo:s.teamGroupInfo,viewer:M.Viewer.get_viewer(),focusOnMount:s.focusOnMount,openSettingsFromTheExternalSharePageQuickActions:e.actionHandler.getOpenSettingsFromTheExternalSharePageQuickActions(),creatingApprovalRequest:t.creatingApprovalRequest(),showApproval:s.showApproval,sendApproval:t.sendApproval(),needsAllApprovers:t.needsAllApprovers(),automationOptionChecked:t.automationOptionChecked(),docsendAnalyticsAddOnMetadata:Object.assign({variant:s.docsendAnalyticsAddOn},t.modalInfoState().docsendAnalyticsLink)}})})),define("metaserver/static/js/sharing/share_modal_icon",["require","exports","tslib","react","typescript/libraries/spectrum-content-icon-compatibility/src/index","metaserver/static/js/clean/filetypes","metaserver/static/js/icon/file_icon","metaserver/static/js/icon/icon_helper"],(function(e,t,s,a,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareModalIcon=void 0,a=s.__importDefault(a);class l extends a.default.Component{render(){return this.props.isFolder?this.renderFolder():this.renderFile()}renderFile(){const e={file:{type:n.FileTypes.FILE,fq_path:this.props.filename},className:this.props.className,variant:"small"};return a.default.createElement(r.FileIcon,Object.assign({},e))}renderFolder(){let e=n.FileTypes.FOLDER;this.props.pathExists&&(this.props.isTeamSharedFolder?e=n.FileTypes.TEAM_SHARED_FOLDER:this.props.isSharedFolder&&(e=n.FileTypes.SHARED_FOLDER));const t=(0,o.spectrumFolderIcon)({fileType:e,isViewOnly:this.props.isViewOnly,isInTeamFolderTree:this.props.isFolderInsideTeamFolderTree,size:o.SpectrumIconSize.Small,isConfidential:this.props.isConfidentialFolder||!1,iconPostfix:this.props.isConfidentialFolder?"_admin_view":""});return a.default.createElement(i.IconContent,{name:t,"aria-label":this.props.alt,role:"img",className:this.props.className})}}t.ShareModalIcon=l,l.displayName="ShareModalIcon"})),define("metaserver/static/js/sharing/share_modal_util",["require","exports","tslib","metaserver/static/js/account/email","metaserver/static/js/account/email_verify_reasons","metaserver/static/js/contacts/contact","metaserver/static/js/contacts/types","metaserver/static/js/clean/filetypes","metaserver/static/js/browse/action_logger","metaserver/static/js/browse/models","metaserver/static/js/sharing/actions/share_modal","metaserver/static/js/sharing/api/client","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/sharing/content_info","metaserver/static/js/sharing/share_modal","metaserver/static/js/sharing/ui_util","metaserver/static/js/clean/viewer","typescript/component_libraries/spectrum-sharing/src/utils/logging","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/flows/approval/approval_io_client"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u,m,h,g,_,f,E,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showPrefilledShareModal=t.showNewFolderShareModal=t.getShareModalInfo=t.showShareModal=t.getSharingInfo=t.generateModalSessionId=void 0,r=s.__importDefault(r),l=s.__importStar(l);t.generateModalSessionId=()=>(new Date).getTime().toString();t.getSharingInfo=function(e,s,a){let i=null;"number"==typeof e&&(e=_.Viewer.get_viewer().get_user_by_id(e)),null==a.userHomeNs&&(a.userHomeNs=e.home_ns_id);let n=(0,t.getShareModalInfo)(s),r=null;if(null!=n){if(n=Object.assign(Object.assign({},n),a),n.modalSessionId||(n.modalSessionId=(0,t.generateModalSessionId)()),void 0===a.logShareModalView||a.logShareModalView){const{nsId:t,sjid:s,fileId:a,filename:i,fqPath:r}=n;l.logViewShareModal({uid:e.id,modal_session_id:n.modalSessionId||"",file_nsid:t,file_sjid:s,file_id:a,file_name:i,file_path:r})}try{i=m.ContentInfo.createFromParams(n)}catch(e){i=null}r=s instanceof c.BrowseContext?s:n.browseContext}return{browseContext:r,contentInfo:i,shareModalInfo:n,user:e}};t.showShareModal=function(e,s,n,r,o,l=!0){let c,m,_;if(({browseContext:c,contentInfo:m,shareModalInfo:_,user:e}=(0,t.getSharingInfo)(e,s,n)),null==m||null==_)return!1;(0,g.logTiburonEvent)(m,e.id,f.TiburonEventName.BeginShareFlow);const b=(null!=c?c.isNonUserRelativeContext:void 0)||_.isNonUserRelativeContext;let v=i.EmailVerificationReasons.SHMODAL;if(_.origin===u.SHARE_ACTION_ORIGIN_TYPE.PREVIEW_PAGE&&(v=i.EmailVerificationReasons.SHARE_FILEVIEWER),b||a.EmailVerification.get_for_user(e).verified_or_show(v,_.onCancel)){const t=new(m.isFolder()?p.FolderShareApiClient:p.FileShareApiClient)({userId:e.id,isNonUserRelativeContext:b}),a=(0,S.approvalIOClient)(e.id),i=new d.ShareModalActionHandler(t,e,h.ShareModal,r,o,n.openSettingsFromTheExternalSharePageQuickActions,a),{inLinksPage:c}=_,u=_.prefillContacts,g=i.initializeShareModal({contentInfo:m,initialRecipientTokens:u,inLinksPage:c},{client:t,content:s,user:e,onDeleteLink:_.onDeleteLink,teamGroupInfo:m.teamGroupInfo(),isInContentManager:!!b,onSuccessSharing:_.onSuccessSharing,shareAsConfidential:!!_.shareAsConfidential,initialContentName:_.initialContentName,shouldSyncThisFolder:_.shouldSyncThisFolder,recipientMessage:_.recipientMessage,onCreateGroupCallback:_.onCreateGroupCallback,onShareClick:_.onShareClick,shouldSuppressRedirectToBrowse:_.shouldSuppressRedirectToBrowse,shouldCloseImmediately:_.shouldCloseImmediately,onCancel:_.onCancel,onClose:_.onClose,onSetContentNameAndSendShareFail:_.onSetContentNameAndSendShareFail,shareButtonLabelOverride:_.shareButtonLabelOverride,focusOnMount:l,referrer:_.referrer,experiments:_.experiments,showApproval:_.showApproval,approvalClient:a,onCreateApprovalSuccess:_.onCreateApprovalSuccess,automationOptionChecked:n.automationOptionChecked,docsendAnalyticsAddOn:_.docsendAnalyticsAddOn,defaultRecipientAccessLevel:n.defaultRecipientAccessLevel});n.defaultRecipientAccessLevel&&i.changeRecipientAccess(n.defaultRecipientAccessLevel),n.openLinkSettings?g.then(()=>i.handleLinkSettingsClick()):n.initialScreen&&n.initialScreen===E.MANAGE_SCREEN?i.showScreen(E.MANAGE_SCREEN):i.openShareModal()}else(0,g.logTiburonEvent)(m,e.id,f.TiburonEventName.ShareModalEmailUnverified);return!0};t.getShareModalInfo=function(e){if(e instanceof c.File){const t=[o.FileTypes.FILE,o.FileTypes.PACKAGE].indexOf(e.type)>-1;return{exists:!e.isDeleted,fileId:e.file_id,fqPath:e.fq_path,isFolder:!t,isTeamSharedFolder:e.type===o.FileTypes.TEAM_SHARED_FOLDER,isFolderInsideTeamFolderTree:e.is_in_team_folder_tree,sjid:e.sjid,nsId:e.ns_id,nsPath:e.ns_path,targetNsId:e.target_ns}}return e instanceof c.BrowseContext?b(e):e};const b=function(e){return e.isInFolderMode?e.isInsideSharedFolder?e.currentNSPath?{fqPath:e.currentFQPath,isFolder:!0,nsId:e.currentNSID,nsPath:e.currentNSPath,targetNsId:null}:{fqPath:e.currentMountPoint,isFolder:!0,nsId:null,nsPath:e.currentMountPoint,targetNsId:e.currentNSID}:{fqPath:e.currentFQPath,isFolder:!0,nsId:e.currentNSID,nsPath:e.currentNSPath,targetNsId:null}:{fqPath:e.currentFQPath,isFolder:!1,nsId:e.currentNSID,nsPath:e.currentNSPath,targetNsId:null}};t.showNewFolderShareModal=function(e,s=null,a=null,i=null,n=!1,r=!1,o=null,l,c,d,p,m=null,h=null,_,f,E,S,b=!0,v,M,T){s||(s=(0,t.generateModalSessionId)());const y={fqPath:(function(){let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let s=1;s<=100;s++)e+=t.charAt(Math.floor(Math.random()*t.length));return(0,g.getNewFolderPathFromContentName)(e,a||"")})(),isFolder:!0,exists:!1,origin:u.SHARE_ACTION_ORIGIN_TYPE.WIZARD,modalSessionId:s,isNonUserRelativeContext:r,isTeamSharedFolder:!1,initialContentName:i,shareAsConfidential:n,shouldSyncThisFolder:o,shouldSuppressRedirectToBrowse:m,shouldCloseImmediately:h,onCancel:_,onClose:f,onSetContentNameAndSendShareFail:E,shareButtonLabelOverride:S,logShareModalView:b,experiments:v,defaultRecipientAccessLevel:T},C={origin:u.SHARE_ACTION_ORIGIN_TYPE.WIZARD};return d&&(C.onSuccessSharing=d),p&&(C.onShareClick=p),C.automationOptionChecked=M,C.defaultRecipientAccessLevel=T,(0,t.showShareModal)(e,y,C,l,c)};t.showPrefilledShareModal=function({user:e,sharePrefillEmails:s,content:a,setUrl:i,contentManagerValidateFolderPath:o,extras:l}){let c,d;return s&&s.length>0?(c=u.SHARE_ACTION_ORIGIN_TYPE.GRANT_ACCESS,d=s.map(e=>new n.Contact({type:r.default.EMAIL,email:e,name:"",query:e,pending:!0}))):(c=u.SHARE_ACTION_ORIGIN_TYPE.DESKTOP_CLIENT,d=[]),(0,t.showShareModal)(e,a,Object.assign({origin:c,prefillContacts:d},l),i,o)}})),define("metaserver/static/js/sharing/share_modal_dropdown_util",["require","exports","metaserver/static/js/sharing/access_level","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/sharing/strings","metaserver/static/js/core/i18n"],(function(e,t,s,a,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMemberActionInfo=t.shouldShowMemberAction=void 0;t.shouldShowMemberAction=function(e,t,s,i,n){return t===s||i&&i.get(e)&&i.get(e).allow||t===a.MEMBER_ACTION.REMOVE&&n};t.getMemberActionInfo=function(e){return[[a.MEMBER_ACTION.MAKE_EDITOR,{value:s.ACCESS_LEVEL.WRITER,title:i.ACCESS_NAME[s.ACCESS_LEVEL.WRITER],folder_description:i.MEMBER_ACTION_FOLDER[a.MEMBER_ACTION.MAKE_EDITOR],file_description:i.MEMBER_ACTION_FILE[a.MEMBER_ACTION.MAKE_EDITOR]}],[a.MEMBER_ACTION.MAKE_VIEWER,{value:s.ACCESS_LEVEL.READER,title:i.ACCESS_NAME[s.ACCESS_LEVEL.READER],folder_description:i.MEMBER_ACTION_FOLDER[a.MEMBER_ACTION.MAKE_VIEWER],file_description:i.MEMBER_ACTION_FILE[a.MEMBER_ACTION.MAKE_VIEWER]}],[a.MEMBER_ACTION.MAKE_VIEWER_NO_COMMENT,{value:s.ACCESS_LEVEL.READER_NO_COMMENT,title:i.ACCESS_NAME[s.ACCESS_LEVEL.READER_NO_COMMENT],folder_description:i.MEMBER_ACTION_FOLDER[a.MEMBER_ACTION.MAKE_VIEWER_NO_COMMENT],file_description:i.MEMBER_ACTION_FILE[a.MEMBER_ACTION.MAKE_VIEWER_NO_COMMENT]}],[a.MEMBER_ACTION.MAKE_OWNER,{value:s.ACCESS_LEVEL.OWNER,title:n.intl.formatMessage({id:"+ZJXxL",defaultMessage:"Make owner"})}],[a.MEMBER_ACTION.REMOVE,{value:"remove",title:e?n.intl.formatMessage({id:"eTtbKw",defaultMessage:"Remove my access"}):n.intl.formatMessage({id:"6WOQfa",defaultMessage:"Remove"})}],[a.MEMBER_ACTION.MANAGE_LINK_ACCESS,{value:"manage_link_access",title:n.intl.formatMessage({id:"qG3VMJ",defaultMessage:"Manage access"})}]]}})),define("metaserver/static/js/sharing/sharing_settings_dropdown",["require","exports","tslib","react","spectrum/dropdown_menu/index","spectrum/dropdown_menu/index","typescript/component_libraries/spectrum-sharing/src/components/sharing_dropdown_menu/index"],(function(e,t,s,a,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettingDropdown=void 0,a=s.__importDefault(a);class o extends a.default.Component{constructor(){super(...arguments),this.handleSelection=e=>{this.props.onValueSelected(e)}}render(){return a.default.createElement(r.SharingDropdownMenu,{disabled:this.props.disabled,onSelection:this.handleSelection,position:"right"},this.renderButton(),a.default.createElement(n.Menu,null,this.renderMenuItems()))}renderButton(){return a.default.createElement(i.DropdownMenuButton,{className:"sharing-settings-dropdown__button",disabled:this.props.disabled},this.props.optionsDict[this.props.currentValue].label)}renderMenuItems(){return this.props.valuesList.map(e=>a.default.createElement(r.SharingDropdownMenuItem,{key:e,value:e,label:this.props.optionsDict[e].label,description:this.props.optionsDict[e].description,selected:e===this.props.currentValue}))}}t.SettingDropdown=o,o.displayName="SettingDropdown"})),define("metaserver/static/js/sharing/sharing_settings_modal",["require","exports","tslib","react","classnames","metaserver/static/js/core/browser","metaserver/static/js/sharing/share_page/action_types","metaserver/static/js/flux/dispatcher","metaserver/static/js/browse/constants","metaserver/static/js/clean/em_string","js/filepath/filepath","metaserver/static/js/components/ui/css","dig-components/tabs","dig-components/buttons","metaserver/static/js/components/ui/modal","dig-components/modal","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_banner/index","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/sharing/sharing_settings_util","metaserver/static/js/clean/ui/util","metaserver/static/js/sharing/ui_notifications_util","metaserver/static/js/sharing/content_manager","metaserver/static/js/api_v2/error","metaserver/static/js/modules/constants/trademark","metaserver/static/js/sharing/gating_util","metaserver/static/js/clean/ui/snackbar","metaserver/static/js/core/i18n","typescript/component_libraries/spectrum-sharing/src/utils/logging","metaserver/static/js/sharing/ui_util","metaserver/static/js/sharing/api/types/metadata","metaserver/static/js/sharing/views/share_modal/inform_owner_update_section","metaserver/static/js/sharing/views/sharing_settings_file_folder_policy_view","metaserver/static/js/sharing/views/sharing_settings_link_section","metaserver/static/js/sharing/confirmation_modals/confirm_recursive_policy_change_modal","metaserver/static/js/sharing/confirmation_modals/reset_access_modal","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/sharing_settings_constants","metaserver/static/js/sharing/sharing_tracked_element","metaserver/static/js/sharing/views/share_modal/sharing_modal_upsell_premium_sharing","metaserver/static/js/sharing/views/share_modal_evolution/utils/logging","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/sharing_settings_util","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_downgrade_banner/index","react-intl","metaserver/static/js/sharing/access_level","metaserver/static/js/campaigns/types","metaserver/static/js/dropbox/proto/pap_events/organize/finish_browse_time_to_success","metaserver/static/js/browse_tts/browse_tts","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/browse/shared_with/redux/store","metaserver/static/js/browse/shared_with/redux/slice"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u,m,h,g,_,f,E,S,b,v,M,T,y,C,I,k,A,L,N,w,O,P,R,D,x,F,j,B,U,H,G,V,W,q,K,z,Y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSettingsModal=t.SharingSettingsModalUnstyled=void 0,a=s.__importDefault(a),i=s.__importDefault(i),n=s.__importStar(n),d=s.__importStar(d);var $=W.pap_events.organize.Finish_BrowseTimeToSuccess.BrowseTtsEventName;const Z=a.default.createElement;class X extends a.default.Component{constructor(e){super(e),this.handleSaveLinkSettings=()=>{(0,q.logBrowseTTS)($.UPDATE_FILE_SETTINGS_BROWSE_TTS_EVENT_NAME);for(const e of this.props.sharingInfo.sharedLinks()){const t=(0,E.getLinkPolicy)(e),s=this.state.updatedLinkPolicies[e.url]||t;t.audience!==s.audience&&(0,A.logTiburonEvent)(this.props.sharingInfo.contentInfo(),this.props.user.id,k.TiburonEventName.ChangeSharedLinkAudience,Object.assign({old_audience:t.audience,new_audience:s.audience,screen:k.ScreenName.SettingsScreen},(0,j.buildExtraFromLinkMetadata)(e)))}this.saveLinkSettings()},this.saveLinkSettings=()=>{const e=this.getLinkSettingsToUpdate();e.errors||this.setState({isSubmitting:!0},()=>{this.props.actionHandler.updateLinkSettings(e.requests).then(()=>{this.setState({isSubmitting:!1}),this.props.onDismiss&&this.props.onDismiss(this.getCurrentTab())}).catch(()=>{this.setState({isSubmitting:!1})})})},this.saveFileSettings=()=>{const e=(0,E.getPolicyDiff)(this.state.desiredPolicy,this.props.currentPolicy);e&&(0,S.setStatePromise)(this,{isSubmitting:!0}).then(()=>this.props.client.updatePolicy({contentId:this.props.sharingInfo.contentId(),newPolicy:e,actions:Object.keys(f.ALPHA_FILE_METADATA_PERMISSIONS)})).catch((0,M.catchApiError)(e=>{this.setState({isSubmitting:!1});const t=e&&e.message;return(0,b.sharingNotificationError)(t||I.intl.formatMessage({id:"+iNJRS",defaultMessage:"There was a problem completing this request."})),Promise.reject()})).then(e=>{(0,b.sharingNotificationSuccess)(I.intl.formatMessage({id:"Hpq9jD",defaultMessage:"File settings updated."})),this.setState({isSubmitting:!1}),this.props.currentPolicy&&this.props.actionHandler.handleUpdateFilePolicy(e,this.props.currentPolicy),this.props.onDismiss&&this.props.onDismiss()}).then(()=>this.props.actionHandler.resetContactValidations())},this.handleSetFolderPolicy=()=>{const e=(0,E.getPolicyDiff)(this.state.desiredPolicy,this.props.currentPolicy),t=t=>{if(C.Snackbar.complete(I.intl.formatMessage({id:"wGHIQR",defaultMessage:"Folder settings updated."}),"sharing-notification"),null!=t){if(t.policy.shared_link_policy!==this.props.currentPolicy.shared_link_policy){this.props.actionHandler.fetchLinkMetadata();const e=[this.props.sharingInfo.displayPath()];K.SHARED_WITH_REDUX?(0,z.getStoreForSharedWith)().dispatch((0,Y.sharedLinkDataOutOfDate)(e)):o.Dispatcher.dispatch({type:l.SharedWithActionType.SIGNAL_SHARED_LINK_DATA_OUT_OF_DATE,data:{fileFqPaths:e}})}this.props.actionHandler.handleUpdateSharingSettings(t),o.Dispatcher.dispatch({type:r.SharePageActionTypes.FETCH_FOLDER_POLICY_SUCCESS,user:this.props.user,sharedFolderMetadata:t,policyUpdate:e}),this.props.onSuccessSharing&&this.props.onSuccessSharing()}this.props.onDismiss&&this.props.onDismiss()},s=this.props.sharingInfo.metadata()&&this.props.sharingInfo.metadata().shared_folder_id;if(s)return this.props.client.updatePolicyAlpha({contentId:s,newPolicy:e,url:null!=this.props.linkMetadata?this.props.linkMetadata.url:void 0}).then(t).then(()=>this.props.actionHandler.resetContactValidations());{const s=e=>{if(this.props.actionHandler.reportShareFailure)return this.props.actionHandler.reportShareFailure(e)};return this.props.actionHandler.shareIfFileFolder(I.intl.formatMessage({id:"AKdTOF",defaultMessage:"Updating folder settings..."}),e).then(t).then(()=>this.props.actionHandler.resetContactValidations()).catch(s)}},this.saveFolderSettings=()=>{this.props.isTeamSharedFolder||this.props.hasParentSharedFolder?(0,P.confirmRecursivePolicyChange)({isTeamSharedFolder:this.props.isTeamSharedFolder,onConfirm:this.handleSetFolderPolicy,onCancel:h.Modal.close}):(0,S.setStatePromise)(this,{isSubmitting:!0}).then(()=>{this.handleSetFolderPolicy().then(()=>{this.setState({isSubmitting:!1})}).catch((0,M.catchApiError)(()=>this.setState({isSubmitting:!1})))})},this.handleUnshareFolder=()=>{if((0,A.logTiburonEvent)(this.props.sharingInfo.contentInfo(),this.props.user.id,k.TiburonEventName.AttemptRemoveAllMembers),this.props.sharingInfo.metadata()&&null!=this.props.sharingInfo.metadata().shared_folder_id&&this.props.sharingInfo.permissionsObj().canUnshare()){const e=e=>(C.Snackbar.sync(I.intl.formatMessage({id:"2h4tij",defaultMessage:"Unsharing <st>{folder_name}</st>..."},{st:e=>a.default.createElement("strong",null,e),folder_name:c.Emstring.em_snippet(this.props.folderName,f.SNIPPET_SIZES.FILENAME)}),!0,"unshare-folder-notification"),this.props.client.unshare({contentId:this.props.sharingInfo.metadata()&&this.props.sharingInfo.metadata().shared_folder_id,leaveACopy:e}).then(()=>((0,A.logTiburonEvent)(this.props.sharingInfo.contentInfo(),this.props.user.id,k.TiburonEventName.SucceedRemoveAllMembers,{http_status_code:200,response_status:"success"}),C.Snackbar.complete(I.intl.formatMessage({id:"tKbyJ8",defaultMessage:"Unshared <st>{folder_name}</st>."},{st:e=>a.default.createElement("strong",null,e),folder_name:c.Emstring.em_snippet(this.props.folderName,f.SNIPPET_SIZES.FILENAME)}),"unshare-folder-notification"),this.props.actionHandler.refreshSharedWithColumnContentData(),h.Modal.close(),o.Dispatcher.dispatch({type:r.SharePageActionTypes.UNSHARE_FOLDER_SUCCESS,metadata:this.props.sharingInfo.metadata(),user:this.props.user}))).catch(e=>((0,A.logTiburonEvent)(this.props.sharingInfo.contentInfo(),this.props.user.id,k.TiburonEventName.FailRemoveAllMembers,{http_status_code:e.raw&&e.raw.status,error_message:e.error[".tag"]?e.error[".tag"]:"undefined_error"}),"too_many_files"===e.error[".tag"]?this.tooManyFilesSnackbar():(0,b.sharingNotificationError)(e.message),o.Dispatcher.dispatch({type:r.SharePageActionTypes.UNSHARE_FOLDER_ERROR,metadata:this.props.sharingInfo.metadata(),user:this.props.user}))));return(0,R.confirmResetAccess)({allowLeaveACopy:this.props.sharingInfo.permissionsObj().canLeaveACopy(),contentName:this.props.folderName,isFolder:!0,isNestedSharedFolder:!!this.props.hasParentSharedFolder,onCancel:()=>h.Modal.close(),onConfirm:e})}},this.onSaveSettings=()=>{switch(this.getCurrentTab()){case D.FILE_SETTINGS:return this.saveFileSettings();case D.FOLDER_SETTINGS:return this.saveFolderSettings();case D.EDIT_LINK_SETTINGS:case D.VIEW_LINK_SETTINGS:return this.handleSaveLinkSettings();default:throw new Error("Unknown tab")}},this.onDeleteLink=e=>{this.props.actionHandler.refreshSharedWithColumnLinkData(),this.props.actionHandler.deleteLinkMetadata(e),this.props.onDismiss&&this.props.onDismiss(),this.props.actionHandler.openSharingSettingsModal(this.getCurrentTab())},this.onCancelDeleteLink=()=>{this.props.actionHandler.openSharingSettingsModal(this.getCurrentTab())},this.onUnshare=()=>{this.props.isFolder?this.handleUnshareFolder():this.handleUnshareFile()},this.renderTabGroups=()=>{const e=[];return this.getTabs().forEach(t=>{e.push(a.default.createElement(u.Tabs.Tab,{className:"sharing-settings-modal__tabs",id:t.id},t.label))}),a.default.createElement(u.Tabs.Group,{justified:!0},e)},this.renderTabPanels=()=>{const e=[];return this.getTabs().forEach(t=>{const s=this.getTabInfo(t.id);e.push(a.default.createElement(u.Tabs.Panel,{tabId:t.id},a.default.createElement("div",{className:"sharing-settings-modal__banners"},s.banner,s.description),a.default.createElement("div",{className:"sharing-settings-modal__tab-content"},s.content)))}),e},this.renderTabs=()=>a.default.createElement(u.Tabs,{selectedTab:this.getCurrentTab(),onSelection:this.onTabSelected},this.renderTabGroups(),this.renderTabPanels()),this.render=()=>{return a.default.createElement(g.Modal,{className:(0,i.default)(this.props.className,"scl-settings-modal"),"aria-label":this.renderTitle(),title:this.renderTitle(),open:!0,isCentered:!0,withCloseButton:"Close",onRequestClose:()=>h.Modal.close(),overlayClassName:"file-viewer-modal-overlay"},a.default.createElement(g.Modal.Header,{hasBottomSpacing:"title-standard"},a.default.createElement(g.Modal.Title,null,this.renderTitle())),a.default.createElement(g.Modal.Body,{hasVerticalSpacing:!1},this.renderTabs()),a.default.createElement(g.Modal.Footer,null,this.shouldShowUnshare()?a.default.createElement(m.Button,{variant:"transparent",onClick:this.onUnshare,"data-testid":"unshare_button"},(e=this.props.isFolder,t=this.props.isFolderInsideTeamFolderTree,e?t?I.intl.formatMessage({id:"11dNm1",defaultMessage:"Reset membership"}):I.intl.formatMessage({id:"qyAR1S",defaultMessage:"Unshare folder"}):I.intl.formatMessage({id:"px+mde",defaultMessage:"Unshare file"}))):void 0,a.default.createElement(m.Button,{variant:"opacity",onClick:()=>{var e,t;return null===(t=(e=this.props).onDismiss)||void 0===t?void 0:t.call(e,this.getCurrentTab())}},I.intl.formatMessage({id:"pTINM6",defaultMessage:"Cancel"})),this.renderPrimaryAction()));var e,t},this.renderPrimaryAction=()=>a.default.createElement(m.Button,{className:"confirm-button u-mar-left-s",variant:"primary",disabled:!this.allowSaveSettings()||this.state.isSubmitting,onClick:this.onSaveSettings},this.state.isSubmitting?I.intl.formatMessage({id:"qIDtpl",defaultMessage:"Saving..."}):I.intl.formatMessage({id:"rQzKcA",defaultMessage:"Save"})),this.handlePolicyUpdate=(e,t)=>{this.setState({desiredPolicy:this.state.desiredPolicy.set(e,t)})},this.onTabSelected=e=>{this.setState({currentTab:e}),(0,A.logTiburonEvent)(this.props.sharingInfo.contentInfo(),this.props.user.id,k.TiburonEventName.ViewSettingsTab,{settings_tab:e})},this.getCurrentTab=()=>this.state.currentTab||this.getTabs()[0].id,this.handleLinkPolicyUpdate=(e,t)=>{const s=this.state.updatedLinkPolicies;if(s[e.url]=t,this.props.sharingInfo.editRighteousLink()){const e=(0,E.getLinkPolicy)(this.props.sharingInfo.editRighteousLink()).audience;(0,G.isLinkAudienceLowerAccess)(t.audience,e)&&this.setState({showDowngradeBanner:!0}),this.setState({showAdvancedSettingsWarning:!!t.expires||!!t.require_password})}this.setState({updatedLinkPolicies:s})},this.hideDowngradeBanner=()=>{this.setState({showDowngradeBanner:!1})},this.openManageAccess=e=>{e.preventDefault(),this.saveAndManageAccess()},this.saveAndManageAccess=()=>{for(const e of this.props.sharingInfo.sharedLinks()){const t=(0,E.getLinkPolicy)(e),s=this.state.updatedLinkPolicies[e.url]||t;t.audience!==s.audience&&(0,A.logTiburonEvent)(this.props.sharingInfo.contentInfo(),this.props.user.id,k.TiburonEventName.ChangeSharedLinkAudience,Object.assign({old_audience:t.audience,new_audience:s.audience,screen:k.ScreenName.SettingsScreen},(0,j.buildExtraFromLinkMetadata)(e)))}const e=this.getLinkSettingsToUpdate();e.errors||this.setState({isSubmitting:!0},()=>{this.props.actionHandler.updateLinkSettings(e.requests).then(()=>{this.setState({isSubmitting:!1}),this.props.actionHandler.showScreen(f.MANAGE_SCREEN)}).catch(()=>{this.setState({isSubmitting:!1})})})},this.state={currentTab:e.currentTab,isSubmitting:!1,updatedLinkPolicies:{},desiredPolicy:e.currentPolicy,showDowngradeBanner:!1,showAdvancedSettingsWarning:void 0}}componentDidMount(){return s.__awaiter(this,void 0,void 0,(function*(){const e=this.props.sharingInfo.contentInfo();this.setState({isSubmitting:!1}),(0,A.logTiburonEvent)(e,this.props.user.id,k.TiburonEventName.ViewSettingsScreen,{settings_tab:this.getCurrentTab()}),(0,A.logTiburonEvent)(e,this.props.user.id,k.TiburonEventName.ViewSettingsTab,{settings_tab:this.getCurrentTab()}),(0,A.publishShopModalEvent)(V.CampaignEvents.SHARE_MODAL_SETTINGS_OPENED,e,this.props.sharingInfo.getReferrer())}))}shouldShowUnshare(){return this.props.sharingInfo.permissionsObj().canUnshare()&&(!this.props.isFolder||!this.props.isInContentManager&&this.props.isSharedFolder)}getLinkSettingsToUpdate(){const e={errors:!1,requests:[]};for(const t of this.props.sharingInfo.sharedLinks()){const s=(0,E.getLinkPolicy)(t),a=this.state.updatedLinkPolicies[t.url]||s,i=(0,E.getModifiedSettings)(t,a,s);if(i&&i.settings)e.requests.push(i);else if(null===i){e.errors=!0;break}}return e}tooManyFilesSnackbar(){return C.Snackbar.show(Z(C.Snackbar,{actionButtonText:I.intl.formatMessage({id:"gk12sS",defaultMessage:"Learn more"}),closeButtonText:I.intl.formatMessage({id:"u/p3Pl",defaultMessage:"Close"}),onActionClick:()=>n.open_tab("/help/files-folders/unshare-folder#foldersize"),title:I.intl.formatMessage({id:"DWcV9y",defaultMessage:"Unsharing unsuccessful. This folder has too many files."}),variant:"fail"}))}renderTitle(){let e;const t={file_or_folder_name:c.Emstring.em_snippet(this.props.folderName,f.SNIPPET_SIZES.FILENAME)};return e=I.intl.formatMessage({id:"NHPru6",defaultMessage:"Settings for “{file_or_folder_name}”"},t),e}handleUnshareFile(){(0,q.logBrowseTTS)($.UNSHARE_FILE_BROWSE_TTS_EVENT_NAME),(0,A.logTiburonEvent)(this.props.sharingInfo.contentInfo(),this.props.user.id,k.TiburonEventName.AttemptRemoveAllMembers);(0,R.confirmResetAccess)({allowLeaveACopy:!1,contentName:this.props.folderName,isFolder:!1,isNestedSharedFolder:!1,onConfirm:()=>(C.Snackbar.sync(I.intl.formatMessage({id:"JopplL",defaultMessage:"Unsharing <st>{file_name}</st>..."},{st:e=>a.default.createElement("strong",null,e),file_name:this.props.folderName}),!0,"unshare-file-notification"),this.props.client.unshare({contentId:this.props.sharingInfo.contentId()}).then(()=>{(0,A.logTiburonEvent)(this.props.sharingInfo.contentInfo(),this.props.user.id,k.TiburonEventName.SucceedRemoveAllMembers,{http_status_code:200,response_status:"success"});const e=[this.props.sharingInfo.contentId().toString()];K.SHARED_WITH_REDUX?(0,z.getStoreForSharedWith)().dispatch((0,Y.sharedFileDataOutOfDate)(e)):o.Dispatcher.dispatch({type:l.SharedWithActionType.SIGNAL_SHARED_FILE_DATA_OUT_OF_DATE,data:{fileIds:e}}),C.Snackbar.complete(I.intl.formatMessage({id:"4fsv5F",defaultMessage:"Unshared <st>{file_name}</st>."},{st:e=>a.default.createElement("strong",null,e),file_name:this.props.folderName}),"unshare-file-notification"),h.Modal.close()}).catch(e=>{(0,A.logTiburonEvent)(this.props.sharingInfo.contentInfo(),this.props.user.id,k.TiburonEventName.FailRemoveAllMembers,{http_status_code:e.raw&&e.raw.status,error_message:e.error[".tag"]?e.error[".tag"]:"undefined_error"})})),onCancel:()=>h.Modal.close()})}getTabs(){const e=[];return this.props.currentPolicy&&(this.props.isFolder?e.push({id:D.FOLDER_SETTINGS,label:I.intl.formatMessage({id:"jR9e/q",defaultMessage:"Folder settings"})}):e.push({id:D.FILE_SETTINGS,label:I.intl.formatMessage({id:"TdlC4Q",defaultMessage:"File settings"})})),this.showEditLinkSettingsTab()&&e.push({id:D.EDIT_LINK_SETTINGS,label:I.intl.formatMessage({id:"DIbS2E",defaultMessage:"Link for editing"})}),this.showViewLinkSettingsTab()&&e.push({id:D.VIEW_LINK_SETTINGS,label:I.intl.formatMessage({id:"rvYosE",defaultMessage:"Link for viewing"})}),e}showEditLinkSettingsTab(){return!!this.props.sharingInfo.editRighteousLink()||(this.props.isFolder?this.props.sharingInfo.permissionsObj().canInviteEditor()&&!this.props.isTeamSharedFolder&&!this.props.isInContentManager:!this.props.isInContentManager&&this.props.sharingInfo.permissionsObj().canCreateEditLink())}showViewLinkSettingsTab(){return!this.props.isTeamSharedFolder&&!this.props.isInContentManager}isTeamFolderTree(){return this.props.isTeamSharedFolder||this.props.isFolderInsideTeamFolderTree}getFolderSettingsDescription(){let e;if(this.props.sharingInfo.permissionsObj().canChangeOptions()&&!this.props.user.is_team_admin)return e=this.isTeamFolderTree()?I.intl.formatMessage({id:"fYsGwY",defaultMessage:"Only team admins can change these settings."}):I.intl.formatMessage({id:"jAJgVs",defaultMessage:"Only you (the owner) can change these settings. Settings apply to all folders in “{folder_name}”."},{folder_name:c.Emstring.em_snippet(this.props.folderName,f.SNIPPET_SIZES.FILENAME)}),a.default.createElement(_.SharingModalBanner,{className:"sharing-settings-modal__banner",type:"default",message:e})}getFileSettingsDescription(){if(this.props.sharingInfo.permissionsObj().canChangeOptions())return a.default.createElement(_.SharingModalBanner,{className:"sharing-settings-modal__banner",type:"default",message:I.intl.formatMessage({id:"JK63j9",defaultMessage:"Anyone with edit access can change these settings."})})}getFileSettingsBanner(){if(this.props.sharingInfo.permissionsObj().canChangeOptions())return;let e;return this.props.currentPolicy&&this.props.permissions&&(e=(0,E.getPassDenyReason)(this.props.currentPolicy,this.props.permissions)),e||(e=I.intl.formatMessage({id:"lxNU0Z",defaultMessage:"You don’t have permission to change the settings on this file."})),a.default.createElement(_.SharingModalBanner,{className:"sharing-settings-modal__banner",type:"error",message:e})}shouldRenderContentManagerBridge(){return!this.props.isInContentManager&&(!!y.GoldenGate.hasContentManagerAndSuperAdmin(this.props.user.id)&&(!!this.props.isTeamSharedFolder||!(!this.props.isFolderInsideTeamFolderTree||!this.props.isUserOnOwnerTeam)&&(this.props.currentTab===D.FOLDER_SETTINGS||!this.props.sharingInfo.permissionsObj().canInviteEditor())))}getFolderSettingsBanner(){let e;const t=I.intl.formatMessage({id:"PXwJ3O",defaultMessage:"These settings will apply to all folders inside “{folder_name}”."},{folder_name:this.props.folderName});if(this.props.isInContentManager&&this.isTeamFolderTree())e=t;else if(this.shouldRenderContentManagerBridge()){const t=d.parent_dir(this.props.sharingInfo.fqPath()),s=(0,v.genContentManagerBridgeUri)({containingFolder:t,filenameToSelect:this.props.folderName}),i=I.intl.formatMessage({id:"+XzGBK",defaultMessage:"These settings will apply to all folders inside “{folder_name}”. You can change these settings in the Admin Console."},{folder_name:this.props.folderName});e=a.default.createElement("div",null,i+" ",a.default.createElement("div",null,a.default.createElement("a",{href:s.toString(),target:"_blank",rel:"noreferrer"},I.intl.formatMessage({id:"hwq/Wo",defaultMessage:"Go to Admin Console."}))))}else if(this.isTeamFolderTree())e=a.default.createElement("div",null,t+" ",a.default.createElement("div",null,a.default.createElement("a",{href:"/team",target:"_blank"},I.intl.formatMessage({id:"RgAHdC",defaultMessage:"To edit, ask your admin."}))));else{if(this.props.sharingInfo.permissionsObj().canChangeOptions())return this.props.isInContentManager&&!this.isTeamFolderTree()?a.default.createElement(N.InformOwnerUpdateSection,{isInSharingSettingsModal:!0}):void 0;e=I.intl.formatMessage({id:"hLLslJ",defaultMessage:"Only the owner can change these settings."})}return a.default.createElement(_.SharingModalBanner,{className:"sharing-settings-modal__banner",type:"error",message:e})}linkControlPolicyWarning(e){const t=this.getCurrentLink(e);if(!t)return;const{link_permissions:s}=t,i=(0,E.getLinkPolicy)(t),n=this.state.updatedLinkPolicies[t.url]||i,r=(0,B.getLinkControlPolicyWarningText)(i,n,s,I.intl);return r?a.default.createElement(_.SharingModalBanner,{className:"sharing-settings-modal__banner",type:"warn",message:r}):void 0}editFolderLinkSettingWarning(e){if("editor"!==e||!this.props.sharingInfo.isFolder())return;const t=this.getCurrentLink(e);if(t){if(void 0===this.state.showAdvancedSettingsWarning){if(!t.link_permissions.require_password&&!t.expires)return}else if(!this.state.showAdvancedSettingsWarning)return;return a.default.createElement(_.SharingModalBanner,{className:"sharing-settings-modal__banner",type:"warn",message:I.intl.formatMessage({id:"pL1I+c",defaultMessage:"This setting won't apply to people who add this folder to their Dropbox account."}),descriptionLinkUrl:"https://help.dropbox.com/files-folders/share/set-link-permissions",descriptionLinkText:I.intl.formatMessage({id:"TV9B2p",defaultMessage:"Learn More"})})}}getCurrentLink(e){let t=void 0;return"editor"===e?t=this.props.sharingInfo.editRighteousLink():(t=this.props.sharingInfo.viewRighteousLink(),t||(t=this.props.sharingInfo.shmodelLink())),t}getLinkSettingsBanner(e){let t=!1;const s=this.getCurrentLink(e);if(!s)return;if(s.isRighteousLink())!1===s.link_permissions.can_use_extended_sharing_controls&&(t=!0);else{const e=s.link_permissions;t=e.audience_options.filter(e=>e.disallowed_reason===L.LinkAudienceDisallowedReason.UserAccountType).length>0||!1===e.can_disallow_download}if(this.props.sharingInfo&&this.props.sharingInfo.isFamilyUser()&&(t=!1),!t)return;let i,n;1===this.props.user.is_team?(i="/team/upgrade",n=I.intl.formatMessage({id:"TfYT+f",defaultMessage:"Upgrade to {trademark_business} to enable all link settings."},{trademark_business:T.TRADEMARK_BUSINESS})):(i="/upgrade?oqa=sfp&_tk=sg_pro_bundle_header",this.props.sharingInfo&&"OFF"!==this.props.sharingInfo.shareModalUpsellPremiumSharingVariant()&&(i=(0,F.getCTALink)(this.props.user,this.props.sharingInfo.shareModalUpsellPremiumSharingVariant(),"sg_pro_bundle_header")),n=I.intl.formatMessage({id:"VvOgoh",defaultMessage:"Upgrade to Dropbox {trademark_professional} to enable all link settings."},{trademark_professional:T.TRADEMARK_PROFESSIONAL}));const r=a.default.createElement("div",null,a.default.createElement(x.TrackedLink,{trackingId:"link_settings_pro_upsell",user:this.props.user,contentInfo:this.props.sharingInfo&&this.props.sharingInfo.contentInfo(),href:i,target:"_blank",rel:"noopener noreferrer"},n));return a.default.createElement(_.SharingModalBanner,{className:"sharing-settings-modal__banner",type:"default",message:r})}getFolderSettingPolicies(){const e=[];return Boolean(this.props.ownerTeam)&&e.push(D.MEMBER_POLICY),e.push(D.ACL_UPDATE_POLICY),Boolean(this.props.ownerTeam)&&e.push(D.FOLDER_LINK_AUDIENCE_POLICY),this.props.currentPolicy&&(this.props.currentPolicy instanceof L.FilePolicy||this.props.currentPolicy instanceof L.FolderPolicy)&&null!=this.props.currentPolicy.viewer_info_policy&&!this.shouldRenderContentManagerBridge()&&e.push(D.VIEWER_INFO_POLICY),e}getFileSettingPolicies(){const e=[];return this.props.currentPolicy&&(this.props.currentPolicy instanceof L.FilePolicy||this.props.currentPolicy instanceof L.FolderPolicy)&&null!=this.props.currentPolicy.viewer_info_policy&&e.push(D.VIEWER_INFO_POLICY),e}getTabInfo(e){switch(e){case D.FILE_SETTINGS:return{title:I.intl.formatMessage({id:"vTaaOS",defaultMessage:"File settings"}),banner:this.getFileSettingsBanner(),description:this.getFileSettingsDescription(),content:this.getFileFolderSettingsContent(this.getFileSettingPolicies())};case D.FOLDER_SETTINGS:return{title:I.intl.formatMessage({id:"3QmSF8",defaultMessage:"Folder settings"}),banner:this.getFolderSettingsBanner(),description:this.getFolderSettingsDescription(),content:this.getFileFolderSettingsContent(this.getFolderSettingPolicies())};case D.EDIT_LINK_SETTINGS:return{title:I.intl.formatMessage({id:"/0odKW",defaultMessage:"Link for editing"}),banner:this.getLinkSettingsBannerAndWarning("editor"),description:null,content:this.renderLinkSettings("editor")};case D.VIEW_LINK_SETTINGS:return{title:I.intl.formatMessage({id:"O2aovx",defaultMessage:"Link for viewing"}),banner:this.getLinkSettingsBannerAndWarning("viewer"),description:null,content:this.renderLinkSettings("viewer")};default:throw new Error("tabName not found")}}getFileFolderSettingsContent(e){const t=(0,E.getPolicyDiff)(this.state.desiredPolicy,this.props.currentPolicy);return a.default.createElement(w.SharingSettingsFileFolderPolicyView,{policies:e,policyUpdate:t,isFolder:this.props.isFolder,isTeamSharedFolder:this.props.isTeamSharedFolder,isFolderInsideTeamFolderTree:this.props.isFolderInsideTeamFolderTree,ownerTeam:this.props.ownerTeam,onPolicyUpdate:this.handlePolicyUpdate,teamPolicy:this.props.sharingInfo.teamPolicy(),currentPolicy:this.props.currentPolicy,showContentManagerBridge:this.shouldRenderContentManagerBridge(),permissions:this.props.permissions})}renderLinkSettings(e){if(this.props.sharingInfo)return a.default.createElement("div",null,this.state.showDowngradeBanner&&this.renderDowngradeBanner(),a.default.createElement(O.SharingSettingsLinkSection,{client:this.props.client,sharingInfo:this.props.sharingInfo,sharingPrefs:this.props.sharingPrefs,updatedLinkPolicies:this.state.updatedLinkPolicies,onDeleteLink:this.onDeleteLink,onCancelDeleteLink:this.onCancelDeleteLink,onPolicyUpdate:this.handleLinkPolicyUpdate,actionHandler:this.props.actionHandler,accessLevel:e}))}renderDowngradeBanner(){return a.default.createElement(U.SharingModalDowngradeBanner,{header:I.intl.formatMessage(Q.downgradeBannerHeader),subheader:I.intl.formatMessage(Q.downgradeBannerSubheader),outlineButtonLabel:I.intl.formatMessage(Q.downgradeBannerGotIt),transparentButtonLabel:I.intl.formatMessage(Q.downgradeBannerManageLinks),onClickOutlineButton:this.hideDowngradeBanner,onClickCloseButton:this.hideDowngradeBanner,onClickTransparentButton:this.openManageAccess,showCloseButton:!0})}allowSaveSettings(){return[D.EDIT_LINK_SETTINGS,D.VIEW_LINK_SETTINGS].includes(this.getCurrentTab())?Object.keys(this.state.updatedLinkPolicies).length>0:!this.state.desiredPolicy.equals(this.props.currentPolicy)}getLinkSettingsBannerAndWarning(e){const t=this.linkControlPolicyWarning(e),s=this.editFolderLinkSettingWarning(e),i=this.getLinkSettingsBanner(e);if(s||t||i)return a.default.createElement("div",null,s,t,i)}}t.SharingSettingsModalUnstyled=X,X.displayName="SharingSettingsModal";const Q=(0,H.defineMessages)({downgradeBannerHeader:{id:"V2Zurn",defaultMessage:"People who have used this link might still have access"},downgradeBannerSubheader:{id:"rqdCog",defaultMessage:"You can check the list of people with access and remove them."},downgradeBannerGotIt:{id:"YCTkuR",defaultMessage:"Got It"},downgradeBannerManageLinks:{id:"UBFEXr",defaultMessage:"Who still has access?"}});t.SharingSettingsModal=(0,p.requireCssWithComponent)(X,["/static/metaserver/static/css/sharing/share_modal-vfl2U4u2o.css","/static/metaserver/static/css/modal-vflf1hwfZ.css","/static/typescript/component_libraries/spectrum-sharing/src/index.web-vfl8iPiYL.css"])})),define("metaserver/static/js/sharing/sharing_settings_util",["require","exports","tslib","metaserver/static/js/previews/util","lodash","metaserver/static/js/sharing/api/types/metadata","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/sharing_settings_constants","metaserver/static/js/sharing/ui_notifications_util","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/sharing_settings_util","metaserver/static/js/core/i18n"],(function(e,t,s,a,i,n,r,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requiresChangeAudienceConfirmation=t.shouldRenderNoPreviewFileWarning=t.getModifiedSettings=t.getLinkPolicy=t.getEffectivePolicyValue=t.getPolicyDiff=t.isCommonSharingSettingsPolicy=t.getPassDenyReason=t.denyReasonToDenyString=t.canChangePolicy=void 0,a=s.__importStar(a),i=s.__importStar(i);const d={shared_folder_member_policy:"team"},p={member_policy:"shared_folder_member_policy"};function u(e,t,s,a){switch(e){case r.VIEWER_INFO_POLICY:return!a&&(!!s&&(t&&"enabled"===t.get(r.VIEWER_INFO_POLICY)?!!s.disable_viewer_info&&s.disable_viewer_info.allow:!!s.enable_viewer_info&&s.enable_viewer_info.allow));default:return!1}}function m(e){switch(e){case"restricted_by_parent_folder":return c.intl.formatMessage({id:"98DfV5",defaultMessage:"This setting is turned off for all files in this folder."});case"restricted_by_team":return c.intl.formatMessage({id:"AGa70V",defaultMessage:"Your admin has disabled this setting."});default:return}}function h(e){return-1!==[r.VIEWER_INFO_POLICY].indexOf(e)}t.canChangePolicy=u,t.denyReasonToDenyString=m,t.getPassDenyReason=function(e,t){return"enabled"===e.get(r.VIEWER_INFO_POLICY)?t.disable_viewer_info?m(t.disable_viewer_info.reason):void 0:t.enable_viewer_info?m(t.enable_viewer_info.reason):void 0},t.isCommonSharingSettingsPolicy=h,t.getPolicyDiff=function(e,t){let s;return s=t instanceof n.FilePolicy?new n.FilePolicy:t instanceof n.FolderPolicy?new n.FolderPolicy:new n.LinkPolicy,e.keySeq().toArray().map(a=>{const n=e.get(a),r=t.get(a);("object"==typeof n?i.isEqual(n,r):n===r)||(s=s.set(a,n))}),s},t.getEffectivePolicyValue=function(e,t,s,a,i,n){let r;const o=p[e];null!=o&&null!=i&&(r=i.get(o));let l=null!=(null!=t?t.get(e):void 0)?null!=t?t.get(e):void 0:s.get(e),c=null!=n.change_options&&n.change_options.allow;return null!=r&&d[o]===r&&(c=!1,l=r),h(e)&&(c=u(e,s,n,a)),a&&(c=!1),[l,c]};const g=(0,l.SharingSettingsUtil)(c.intl);t.getLinkPolicy=e=>new n.LinkPolicy(g.getLinkPolicy(e));t.getModifiedSettings=(e,t,s)=>{const a=g.getModifiedSettings(e,t,s);if(a)return a.error?((0,o.sharingNotificationError)(a.error),null):{url:a.url,settings:a.settings,remove_expiration:a.remove_expiration}},t.shouldRenderNoPreviewFileWarning=function(e,t){if(!e)return!1;if(null!=(null!=t?t.preview_type:void 0)){const{preview_type:e}=t;if(Array.from(a.VALID_PREVIEW_TYPES).includes(e))return!1}return!0},t.requiresChangeAudienceConfirmation=function(e,t){const s=(0,l.getAudienceForLink)(e.link_permissions);return"password"===t&&"public"===s||"team"===t&&["public","password"].includes(s)||"no_one"===t&&["public","password","team"].includes(s)}})),define("metaserver/static/js/sharing/strings",["require","exports","metaserver/static/js/sharing/access_level","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/core/i18n"],(function(e,t,s,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MEMBER_ACTION_FILE_NO_COMMENT=t.MEMBER_ACTION_FOLDER_NO_COMMENT=t.MEMBER_ACTION_CLOUD_DOC=t.MEMBER_ACTION_FILE=t.MEMBER_ACTION_FOLDER=t.ACCESS_NAME_NO_COMMENT=t.ACCESS_NAME=void 0;const n={[s.ACCESS_LEVEL.OWNER]:i.intl.formatMessage({id:"if8xIl",defaultMessage:"Owner"}),[s.ACCESS_LEVEL.WRITER]:i.intl.formatMessage({id:"ywqz2g",defaultMessage:"Can edit"}),[s.ACCESS_LEVEL.READER]:i.intl.formatMessage({id:"Gz5ABt",defaultMessage:"Can view"}),[s.ACCESS_LEVEL.READER_NO_COMMENT]:i.intl.formatMessage({id:"vQquJX",defaultMessage:"View-only"})};t.ACCESS_NAME=n;const r={[s.ACCESS_LEVEL.OWNER]:i.intl.formatMessage({id:"if8xIl",defaultMessage:"Owner"}),[s.ACCESS_LEVEL.WRITER]:i.intl.formatMessage({id:"ywqz2g",defaultMessage:"Can edit"}),[s.ACCESS_LEVEL.READER]:i.intl.formatMessage({id:"Cgg/GQ",defaultMessage:"Can comment"}),[s.ACCESS_LEVEL.READER_NO_COMMENT]:i.intl.formatMessage({id:"Gz5ABt",defaultMessage:"Can view"})};t.ACCESS_NAME_NO_COMMENT=r;const o={[a.MEMBER_ACTION.MAKE_EDITOR]:i.intl.formatMessage({id:"l98l5t",defaultMessage:"People can edit, delete, comment, and add the files to their Dropbox"}),[a.MEMBER_ACTION.MAKE_VIEWER]:i.intl.formatMessage({id:"b2gULy",defaultMessage:"People can view, download, and comment"}),[a.MEMBER_ACTION.MAKE_VIEWER_NO_COMMENT]:i.intl.formatMessage({id:"SS1NPa",defaultMessage:"People can only view and download the files"})};t.MEMBER_ACTION_FOLDER=o;const l={[a.MEMBER_ACTION.MAKE_EDITOR]:i.intl.formatMessage({id:"p1FXFw",defaultMessage:"People can edit, delete, comment, and add the file to their Dropbox"}),[a.MEMBER_ACTION.MAKE_VIEWER]:i.intl.formatMessage({id:"b2gULy",defaultMessage:"People can view, download, and comment"}),[a.MEMBER_ACTION.MAKE_VIEWER_NO_COMMENT]:i.intl.formatMessage({id:"EYJ3Li",defaultMessage:"People can only view and download the file"})};t.MEMBER_ACTION_FILE=l;const c={[a.MEMBER_ACTION.MAKE_EDITOR]:i.intl.formatMessage({id:"65RS70",defaultMessage:"People can edit and comment"}),[a.MEMBER_ACTION.MAKE_VIEWER]:i.intl.formatMessage({id:"9zXodW",defaultMessage:"People can view and comment"})};t.MEMBER_ACTION_CLOUD_DOC=c;const d={[a.MEMBER_ACTION.MAKE_EDITOR]:i.intl.formatMessage({id:"UFB0OU",defaultMessage:"Lets them view, comment, and edit."}),[a.MEMBER_ACTION.MAKE_VIEWER]:i.intl.formatMessage({id:"dLWWVm",defaultMessage:"Lets them view and comment, but not edit."}),[a.MEMBER_ACTION.MAKE_VIEWER_NO_COMMENT]:i.intl.formatMessage({id:"Fp+s39",defaultMessage:"Lets them view only. They can’t see comments."})};t.MEMBER_ACTION_FOLDER_NO_COMMENT=d;const p={[a.MEMBER_ACTION.MAKE_EDITOR]:i.intl.formatMessage({id:"UFB0OU",defaultMessage:"Lets them view, comment, and edit."}),[a.MEMBER_ACTION.MAKE_VIEWER]:i.intl.formatMessage({id:"dLWWVm",defaultMessage:"Lets them view and comment, but not edit."}),[a.MEMBER_ACTION.MAKE_VIEWER_NO_COMMENT]:i.intl.formatMessage({id:"Fp+s39",defaultMessage:"Lets them view only. They can’t see comments."})};t.MEMBER_ACTION_FILE_NO_COMMENT=p})),define("metaserver/static/js/sharing/sharing_tracked_element",["require","exports","tslib","react","metaserver/static/js/sharing/ui_util","metaserver/static/js/components/ui/helpers","dig-components/typography","typescript/component_libraries/spectrum-sharing/src/utils/logging"],(function(e,t,s,a,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TrackedLink=t.withSharingTracking=void 0,a=s.__importDefault(a);const l=["trackingId","href"];function c(){return e=>{class t extends a.default.Component{constructor(){super(...arguments),this.getWhitelistedExtras=()=>{const e={};return l.forEach(t=>{this.props.hasOwnProperty(t)&&(e[`element_${t}`]=this.props[t])}),e},this.onClick=()=>{(0,i.logTiburonEvent)(this.props.contentInfo,this.props.user.id,o.TiburonEventName.ElementClick,this.getWhitelistedExtras())}}componentDidMount(){(0,i.logTiburonEvent)(this.props.contentInfo,this.props.user.id,o.TiburonEventName.ElementView,this.getWhitelistedExtras())}render(){return a.default.createElement(e,Object.assign({onClick:this.onClick},this.props))}}return t.displayName=`withSharingTracking(${(0,n.getDisplayName)(e)}`,t}}t.withSharingTracking=c;class d extends a.default.Component{render(){return a.default.createElement(r.Link,Object.assign({},this.props),this.props.children)}}d.displayName="TrackedLinkElement",t.TrackedLink=c()(d)})),define("metaserver/static/js/sharing/views/share_modal/contacts_error_banner",["require","exports","tslib","react","metaserver/static/js/sharing/ui_util","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_banner/index"],(function(e,t,s,a,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContactsErrorBanner=void 0,a=s.__importDefault(a),t.ContactsErrorBanner=function({level:e="defaultLevel",message:t}){if(!t)return null;const s={[i.ContactsErrorLevel.Error]:"error",[i.ContactsErrorLevel.Warn]:"warn",defaultLevel:"default"}[e];return a.default.createElement(n.SharingModalBanner,{className:"contacts-error-banner",type:s,message:t})}})),define("metaserver/static/js/sharing/views/share_modal/inform_owner_update_section",["require","exports","tslib","react","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_banner/index","metaserver/static/js/core/i18n"],(function(e,t,s,a,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InformOwnerUpdateSection=void 0,a=s.__importDefault(a);class r extends a.default.Component{render(){const e=n.intl.formatMessage({id:"jxjvN9",defaultMessage:"We’ll let the owner know whenever you change these settings"});return a.default.createElement(i.SharingModalBanner,{className:this.props.isInSharingSettingsModal?"sharing-settings-modal__banner":void 0,type:"dark",message:e})}}t.InformOwnerUpdateSection=r,r.displayName="InformOwnerUpdateSection"})),define("metaserver/static/js/sharing/views/share_modal/sharing_modal_no_permissions_section",["require","exports","tslib","react","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_banner/index","metaserver/static/js/core/i18n","lodash"],(function(e,t,s,a,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalNoPermissionsSection=void 0,a=s.__importDefault(a),r=s.__importStar(r);class o extends a.default.Component{constructor(){super(...arguments),this.getNoPermissionMessage=()=>this.props.isTeamSharedFolder?this.getTeamSharedFolderMessage():this.props.isFolder?n.intl.formatMessage({id:"7nUdHD",defaultMessage:"You don’t have permission to manage membership of this folder"}):n.intl.formatMessage({id:"Bg4C2n",defaultMessage:"You don’t have permission to manage membership of this file"})}render(){return a.default.createElement(i.SharingModalBanner,{message:this.getNoPermissionMessage()})}getTeamSharedFolderMessage(){return this.renderTeamFolderNoPermissionMessage()?n.intl.formatMessage({id:"Ia9tjc",defaultMessage:"This folder is automatically shared with all members of {team_name}"},{team_name:this.props.teamName}):n.intl.formatMessage({id:"6Vgz8b",defaultMessage:"Only <admin_link>admins</admin_link> and <group_link>group managers</group_link> can change team folder membership."},{admin_link:e=>a.default.createElement("a",{href:"/team?_tk=left_nav_team",target:"_blank",rel:"noreferrer"},e),group_link:e=>a.default.createElement("a",{href:"/help/7232#transfer",target:"_blank",rel:"noreferrer"},e)})}renderTeamFolderNoPermissionMessage(){return r.get(this.props,"members.groups",{}).some(e=>"team"===e.group_type&&r.get(e,"permissions.make_editor.allow")&&r.get(e,"permissions.make_viewer.allow"))}}t.SharingModalNoPermissionsSection=o,o.displayName="SharingModalNoPermissionsSection"})),define("metaserver/static/js/sharing/views/share_modal/sharing_modal_upsell_premium_sharing",["require","exports","tslib","react","typescript/component_libraries/spectrum-sharing/src/components/banner/index","metaserver/static/js/sharing/sharing_tracked_element","dig-components/typography","metaserver/static/js/core/i18n","metaserver/static/js/core/exception"],(function(e,t,s,a,i,n,r,o,l){"use strict";function c(e,s,a){return"M1V2"===s||"M1V2_LINK_SETTINGS"===s?1===e.paid?`/buy/professional?_tk=${a}`:`/pro/try?_tk=${a}`:(["M1V1","OFF","CONTROL"].indexOf(s)<0&&(0,l.reportException)({err:new Error(`Variant is ${s}`),tags:[t.SHARE_MODAL_UPSELL_PREMIUM_SHARING_EXCLOG_TAG],severity:l.SEVERITY.NONCRITICAL}),`/upgrade?oqa=sfp&_tk=${a}`)}Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalUpsellPremiumSharing=t.getCTALink=t.SHARE_MODAL_UPSELL_PREMIUM_SHARING_EXCLOG_TAG=void 0,a=s.__importDefault(a),t.SHARE_MODAL_UPSELL_PREMIUM_SHARING_EXCLOG_TAG="share_modal_upsell_premium_sharing",t.getCTALink=c;class d extends a.default.Component{componentDidMount(){this.props.hasIncrementedCounter||void 0===this.props.hasSeenCounter||this.props.onSetSeenCounter(this.props.hasSeenCounter+1)}getCTAText(){return 1===this.props.user.paid?o.intl.formatMessage({id:"vFDLgh",defaultMessage:"Try it with Professional"}):o.intl.formatMessage({id:"iPDKbr",defaultMessage:"Try free with Professional"})}render(){return a.default.createElement(i.Banner,{showTopCaret:!0},a.default.createElement(r.Text,{size:"small",className:"scl-banner__text"},o.intl.formatMessage({id:"R2FTNc",defaultMessage:"Secure this link with a password and expiration."})," ",a.default.createElement(n.TrackedLink,{trackingId:"share_modal_pro_upsell_footer",user:this.props.user,contentInfo:this.props.contentInfo,href:c(this.props.user,this.props.variant,"sharing_modal_upsell"),target:"_blank",rel:"noopener",hasNoUnderline:!0},this.getCTAText())))}}t.SharingModalUpsellPremiumSharing=d,d.displayName="SharingModalUpsellPremiumSharing"})),define("metaserver/static/js/sharing/views/share_modal_evolution/manage/header_section",["require","exports","tslib","react","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_header/index","metaserver/static/js/core/i18n","metaserver/static/js/sharing/views/share_modal_evolution/utils/context","typescript/component_libraries/spectrum-sharing/src/utils/logging"],(function(e,t,s,a,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderSection=void 0,a=s.__importDefault(a);class l extends a.default.Component{constructor(){super(...arguments),this.handleSettingsButtonClick=e=>{e.preventDefault(),this.props.onSettingsButtonClick(),this.context.logEvent(o.TiburonEventName.ClickSettingsGear,void 0,{screen:o.ScreenName.ManageAccessScreen})}}render(){return a.default.createElement(i.SharingModalHeaderWithBackButton,{autoFocus:!0,closeButtonVisible:!0,settingsButtonVisible:!0,onClickBackButton:this.props.onBackButtonClick,onClickCloseButton:this.props.onCloseButtonClick,onClickSettingsButton:this.handleSettingsButtonClick,label:n.intl.formatMessage({id:"oMWVkR",defaultMessage:"Back"})})}}t.HeaderSection=l,l.displayName="HeaderSection",l.contextType=r.ShareModalEvolutionContext})),define("metaserver/static/js/sharing/views/share_modal_evolution/manage/main_section",["require","exports","tslib","react","metaserver/static/js/clean/em_string","metaserver/static/js/core/i18n","metaserver/static/js/components/ui/css","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/sharing/views/member_list","metaserver/static/js/sharing/views/share_modal/sharing_modal_no_permissions_section","typescript/component_libraries/spectrum-sharing/src/components/action_container/index","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_downgrade_banner/index","react-intl","dig-components/tabs","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/sharing_settings_constants","metaserver/static/js/sharing/views/constants","metaserver/static/js/sharing/sharing-sdk/provider_with_logging_context","metaserver/static/js/sharing/sharing-sdk/links_in_member_list","typescript/component_libraries/spectrum-sharing/src/utils/logging","metaserver/static/js/sharing/views/share_modal_evolution/utils/context","dig-components/typography","dig-components/icons/src","metaserver/static/js/sharing/views/share_modal_evolution/utils/strings"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u,m,h,g,_,f,E,S,b,v,M){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareModalEvolutionManageAccessMainSection=t.MainSection=void 0,a=s.__importDefault(a),M=s.__importStar(M);const T=(0,u.defineMessages)({downgradeBannerHeader:{id:"YBKCoS",defaultMessage:"People who can view could still edit via link"},removeBannerHeader:{id:"w/RnTZ",defaultMessage:"People might still have access via link"},downgradeBannerSubheader:{id:"iYhJt/",defaultMessage:"You can delete the link to further restrict access."},downgradeBannerGotIt:{id:"YCTkuR",defaultMessage:"Got It"},downgradeBannerManageLinks:{id:"J9wEBS",defaultMessage:"Manage Links"}}),y=(0,u.defineMessages)({peopleTab:{id:"kUwFiX",defaultMessage:"People"},linksTab:{id:"Iv9euZ",defaultMessage:"Links"}});class C extends a.default.Component{constructor(e){super(e),this.setSelectedTab=e=>{this.setState({selectedTab:e}),this.context.logEvent(E.TiburonEventName.ViewManageAccessTab,void 0,{manage_access_tab:e,manually_switch_tab:!0})},this.getCurrentTab=()=>this.state.selectedTab,this.isMemberListEmpty=()=>{const e=this.props.membership,t=this.props.memberListProps.linkMembers,s=this.props.memberListProps.guestMembers,{groups:a,invitees:i,users:n}=e;return(!t||0==t.length)&&(!s||0==s.length)&&a.isEmpty()&&i.isEmpty()&&n.isEmpty()},this.handleViewLinkSettingsButtonClick=()=>{this.props.onLinkSettingsTextClick(h.VIEW_LINK_SETTINGS)},this.handleEditLinkSettingsButtonClick=()=>{this.props.onLinkSettingsTextClick(h.EDIT_LINK_SETTINGS)},this.enableSecurityBanner=e=>{this.setState({showSecurityBanner:!0,securityBannerType:e})},this.hideSecurityBanner=()=>{this.setState({showSecurityBanner:!1})},this.openLinkSettings=e=>{e.preventDefault(),this.props.actionHandler.openSharingSettingsModal("edit_link_settings")};const t=this.isMemberListEmpty()?E.ManageAccessTabName.ManageLinksTab:E.ManageAccessTabName.ManagePeopleTab;this.state={showSecurityBanner:!1,securityBannerType:l.SecurityBannerType.DowngradeAccess,selectedTab:this.props.currentTab||t}}componentDidMount(){this.shouldRenderLinksInMemberList()?(this.context.logEvent(E.TiburonEventName.ViewManageAccessScreen,void 0,{manage_access_tab:this.getCurrentTab(),is_member_list_empty:this.isMemberListEmpty(),lml_variant:this.props.actionHandler.getSharingInfo().sharingPrefs().exp_links_in_member_list}),this.context.logEvent(E.TiburonEventName.ViewManageAccessTab,void 0,{manage_access_tab:this.getCurrentTab(),manually_switch_tab:!1})):this.context.logEvent(E.TiburonEventName.ViewManageAccessScreen,void 0,{lml_variant:this.props.actionHandler.getSharingInfo().sharingPrefs().exp_links_in_member_list})}render(){return this.shouldRenderLinksInMemberList()?this.renderManageAccessListWithLinksList():this.renderManageAccessList()}renderManageAccessList(){return a.default.createElement(d.ActionContainer,{header:this.getTitle(),headerSize:"small",banner:this.renderBanner(),showBorder:!0},a.default.createElement(l.SharingMemberList,Object.assign({},this.props.memberListProps,{onShowSecurityBanner:this.enableSecurityBanner})))}emptyMemberListNoPermissions(){const e=M.TITLE_NO_PERMISSIONS,t=M.SUBTITLE_NO_PERMISSIONS;return a.default.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column",paddingTop:"20px"}},a.default.createElement("div",{style:{height:"48px",width:"48px"}},a.default.createElement(v.WarningPictogram,null)),a.default.createElement("div",null,a.default.createElement("div",{style:{textAlign:"center",paddingTop:"20px"}},a.default.createElement(b.Title,{size:"small"},e)),a.default.createElement("div",{style:{textAlign:"center",padding:"0 24px 0 24px"}},a.default.createElement(b.Text,{size:"standard"},t))))}getSubtitleWithPermissions(){const e=this.props.actionHandler.getContentInfo().isFile(),t=this.props.actionHandler.getContentInfo().isFileFolder();return e?M.SUBTITLE_WITH_PERMISSIONS_FILE:t?M.SUBTITLE_WITH_PERMISSIONS_FOLDER:""}emptyMemberListWithPermissions(){const e=M.TITLE_WITH_PERMISSIONS,t=this.getSubtitleWithPermissions();return a.default.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column",paddingTop:"20px"}},a.default.createElement("div",{style:{height:"48px",width:"48px"}},a.default.createElement(v.InfoPictogram,null)),a.default.createElement("div",null,a.default.createElement("div",{style:{textAlign:"center",paddingTop:"20px"}},a.default.createElement(b.Title,{size:"small"},e)),a.default.createElement("div",{style:{textAlign:"center",padding:"0 24px 0 24px",width:"420px"}},a.default.createElement(b.Text,{size:"standard"},t))))}renderMemberList(){return this.isMemberListEmpty()?this.renderEmptyMemberList():this.renderNotEmptyMemberList()}renderEmptyMemberList(){return this.props.canInviteMembers?this.emptyMemberListWithPermissions():this.emptyMemberListNoPermissions()}renderNotEmptyMemberList(){return a.default.createElement(l.SharingMemberList,Object.assign({},this.props.memberListProps,{onShowSecurityBanner:this.enableSecurityBanner}))}shouldRenderLinksInMemberList(){return this.props.actionHandler.getSharingInfo().sharingPrefs().exp_links_in_member_list===g.EXP_LINK_IN_MEMBER_LIST_VARIANT.ON}renderManageAccessListWithLinksList(){const e=n.intl.formatMessage(y.peopleTab),t=n.intl.formatMessage(y.linksTab);return a.default.createElement(d.ActionContainer,{header:this.getTitle(),headerSize:"small",banner:this.renderBanner(),showBorder:!1},a.default.createElement(m.Tabs,{selectedTab:this.getCurrentTab(),onSelection:this.setSelectedTab},a.default.createElement(m.Tabs.Group,null,a.default.createElement(m.Tabs.Tab,{id:E.ManageAccessTabName.ManagePeopleTab},e),a.default.createElement(m.Tabs.Tab,{id:E.ManageAccessTabName.ManageLinksTab},t)),a.default.createElement(m.Tabs.Panel,{tabId:E.ManageAccessTabName.ManagePeopleTab},a.default.createElement("div",{style:{border:"1px solid var(--color__faint__border)",marginTop:"18px",height:"250px",paddingTop:"13px",overflowY:"auto"}},this.renderMemberList())),a.default.createElement(m.Tabs.Panel,{tabId:E.ManageAccessTabName.ManageLinksTab},a.default.createElement("div",{style:{marginTop:"18px"}},a.default.createElement(_.SharingSdkProviderWithLoggingContext,{user:this.props.user,contentInfo:this.props.actionHandler.getContentInfo(),sharingInfo:this.props.actionHandler.getSharingInfo()},a.default.createElement(f.SharingSdkLinksInMemberList,{actionHandler:this.props.actionHandler,onViewLinkSettingsClick:this.handleViewLinkSettingsButtonClick,onEditLinkSettingsClick:this.handleEditLinkSettingsButtonClick}))))))}getTitle(){const e={fileName:i.Emstring.em_snippet(this.props.fileName,o.SNIPPET_SIZES.SHARE_ME_MANAGE_ACCESS_FILE_FOLDER_TITLE)};return this.shouldRenderLinksInMemberList()?n.intl.formatMessage({id:"ptXJuT",defaultMessage:"Access to <s>{fileName}</s>"},{fileName:e.fileName,s:e=>a.default.createElement("span",null,e)}):n.intl.formatMessage({id:"IQ37US",defaultMessage:"Who can access <s>{fileName}</s>"},{fileName:e.fileName,s:e=>a.default.createElement("span",null,e)})}noPermissionsSectionProps(){return{isFolder:this.props.isFolder,isTeamSharedFolder:this.props.isTeamSharedFolder,members:this.props.membership,teamName:this.props.ownerTeamName}}renderBanner(){if(this.shouldRenderLinksInMemberList()&&this.isMemberListEmpty())return a.default.createElement(a.default.Fragment,null);if(!this.props.canInviteMembers)return a.default.createElement(c.SharingModalNoPermissionsSection,Object.assign({},this.noPermissionsSectionProps()));if(this.props.editLinkExists&&this.state.showSecurityBanner){let e;switch(this.state.securityBannerType){case l.SecurityBannerType.RemoveAccess:e=T.removeBannerHeader;break;case l.SecurityBannerType.DowngradeAccess:default:e=T.downgradeBannerHeader}return a.default.createElement(p.SharingModalDowngradeBanner,{header:n.intl.formatMessage(e),subheader:n.intl.formatMessage(T.downgradeBannerSubheader),outlineButtonLabel:n.intl.formatMessage(T.downgradeBannerGotIt),transparentButtonLabel:n.intl.formatMessage(T.downgradeBannerManageLinks),onClickOutlineButton:this.hideSecurityBanner,onClickTransparentButton:this.openLinkSettings})}}}t.MainSection=C,C.displayName="MainSection",C.contextType=S.ShareModalEvolutionContext,t.ShareModalEvolutionManageAccessMainSection=(0,r.requireCssWithComponent)(C,["/static/metaserver/static/css/sharing/share_modal_evolution-vflp8NfE3.css"])})),define("metaserver/static/js/sharing/views/share_modal_evolution/manage/manage_access_page",["require","exports","tslib","react","metaserver/static/js/components/ui/css","metaserver/static/js/sharing/views/share_modal_evolution/manage/header_section","metaserver/static/js/sharing/views/share_modal_evolution/manage/main_section","metaserver/static/js/sharing/ui_util","metaserver/static/js/sharing/views/constants"],(function(e,t,s,a,i,n,r,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ManageAccessModal=t.ManageAccessPage=t.baseClassName=void 0,a=s.__importDefault(a),t.baseClassName="share-modal-evolution__manage-access-page";class c extends a.default.Component{componentDidMount(){const e=this.props.lmlExperimentVariant;if(e===l.EXP_LINK_IN_MEMBER_LIST_VARIANT.ON||e===l.EXP_LINK_IN_MEMBER_LIST_VARIANT.CONTROL){const e=parseInt(localStorage.getItem("manageAccessPageViewsCount")||"[]");e?2!=e&&localStorage.setItem("manageAccessPageViewsCount",(e+1).toString()):localStorage.setItem("manageAccessPageViewsCount",1..toString())}}componentWillUnmount(){const e=this.props.lmlExperimentVariant;2===parseInt(localStorage.getItem("manageAccessPageViewsCount")||"[]")&&(e===l.EXP_LINK_IN_MEMBER_LIST_VARIANT.ON&&(0,o.trackUserLeapEvent)(o.SharingUserLeapEvent.SHARE_LINK_MEMBER_LIST_ON,this.props.lmlSprigSurveyOrigin),e===l.EXP_LINK_IN_MEMBER_LIST_VARIANT.CONTROL&&(0,o.trackUserLeapEvent)(o.SharingUserLeapEvent.SHARE_LINK_MEMBER_LIST_CONTROL,this.props.lmlSprigSurveyOrigin))}render(){return a.default.createElement("div",{className:t.baseClassName},a.default.createElement(n.HeaderSection,{onBackButtonClick:this.props.onBackButtonClick,onCloseButtonClick:this.props.onCloseButtonClick,onSettingsButtonClick:this.props.onSettingsButtonClick}),a.default.createElement(r.MainSection,{canInviteMembers:this.props.canInviteMembers,fileName:this.props.fileName,isFolder:this.props.isFolder,isTeamSharedFolder:this.props.isTeamSharedFolder,memberListProps:this.props.memberListProps,membership:this.props.membership,ownerTeamName:this.props.ownerTeamName,actionHandler:this.props.actionHandler,editLinkExists:this.props.editLinkExists,onLinkSettingsTextClick:this.props.onLinkSettingsTextClick,user:this.props.user,currentTab:this.props.currentTab}))}}t.ManageAccessPage=c,c.displayName="ManageAccessModal",t.ManageAccessModal=(0,i.requireCssWithComponent)(c,["/static/metaserver/static/css/sharing/share_modal_evolution-vflp8NfE3.css"])})),define("metaserver/static/js/sharing/views/share_modal_evolution/share_modal_evolution",["require","exports","tslib","react","dig-components/layer","metaserver/static/js/components/ui/css","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/sharing/views/share_modal_evolution/utils/context","metaserver/static/js/sharing/views/share_modal_evolution/utils/logging","typescript/component_libraries/spectrum-sharing/src/utils/logging","metaserver/static/js/sharing/views/share_modal_evolution/manage/manage_access_page","metaserver/static/js/sharing/views/share_modal_evolution/share/share_screen"],(function(e,t,s,a,i,n,r,o,l,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareModalEvolution=t.ShareModalEvolutionComponent=void 0,a=s.__importDefault(a);class u extends a.default.Component{constructor(){super(...arguments),this.handleManageAccessClick=()=>{this.props.showScreen(r.MANAGE_SCREEN)},this.handleBackButtonClick=()=>{this.props.showScreen(r.SHARE_SCREEN)},this.handleLogEvent=(e,t,s)=>{const{contentMetadata:a,user:i}=this.props;this.props.logTiburonEvent(e,i.id,Object.assign(Object.assign({},(0,l.buildExtraFromMetadata)(a,t)),s))}}render(){return a.default.createElement(i.LayerContext.Provider,{value:{zIndex:1e4}},a.default.createElement(o.ShareModalEvolutionContextProvider,{logEvent:this.handleLogEvent,experiments:this.props.actionHandler.getSharingInfo().getExperiments()},a.default.createElement("div",{className:"share-modal-evolution"},this.renderActiveScreen())))}renderActiveScreen(){return this.props.currentScreen===r.MANAGE_SCREEN?a.default.createElement(d.ManageAccessModal,Object.assign({},this.manageAccessPageProps())):a.default.createElement(p.ShareScreen,Object.assign({},this.getShareScreenProps()))}manageAccessPageProps(){const{isFolder:e,isTeamSharedFolder:t,onSettingsButtonClick:s,onLinkSettingsTextClick:a,sharingInfo:i,onCloseButtonClick:n,actionHandler:r,user:o,currentTab:l}=this.props;return{canInviteMembers:i.permissionsObj().canInvite(),fileName:i.name(),isFolder:e,isTeamSharedFolder:t,memberListProps:this.props.memberListProps,membership:i.members(),onBackButtonClick:this.handleBackButtonClick,onCloseButtonClick:n,onSettingsButtonClick:s,onLinkSettingsTextClick:a,ownerTeamName:this.props.ownerTeam?this.props.ownerTeam.name:void 0,actionHandler:r,editLinkExists:!!i.editRighteousLink(),user:o,lmlSprigSurveyOrigin:i.contentInfo().extras.origin,lmlExperimentVariant:i.sharingPrefs().exp_links_in_member_list,currentTab:this.getManageAccessPageTab(l)}}getManageAccessPageTab(e){if(e==c.ManageAccessTabName.ManagePeopleTab||e==c.ManageAccessTabName.ManageLinksTab)return e}getShareScreenProps(){return{actionHandler:this.props.actionHandler,contactsError:this.props.contactsError,contentMetadata:this.props.contentMetadata,isEmailSending:this.props.isEmailSending,handleManageAccessClick:this.handleManageAccessClick,handleMessageChanged:this.props.handleMessageChanged,initialTypeaheadTokens:this.props.initialTypeaheadTokens,isTeamSharedFolder:this.props.isTeamSharedFolder,isTokenizerEmpty:this.props.isTokenizerEmpty,onCloseButtonClick:this.props.onCloseButtonClick,onSettingsButtonClick:this.props.onSettingsButtonClick,recipientMessage:this.props.recipientMessage,sharingInfo:this.props.sharingInfo,user:this.props.user,guestMembers:this.props.guestMembers,linkMembers:this.props.linkMembers,showPassFileSettings:this.props.showPassFileSettings,showApproval:this.props.showApproval,sendApproval:this.props.sendApproval,needsAllApprovers:this.props.needsAllApprovers,creatingApprovalRequest:this.props.creatingApprovalRequest,docsendAnalyticsAddOnMetadata:this.props.docsendAnalyticsAddOnMetadata}}}t.ShareModalEvolutionComponent=u,u.displayName="ShareModalEvolution",t.ShareModalEvolution=(0,n.requireCssWithComponent)(u,["/static/metaserver/static/css/sharing/share_modal_evolution-vflp8NfE3.css","/static/metaserver/static/css/dig-components/index.web-vflD7DS1H.css"])})),define("metaserver/static/js/sharing/views/share_modal_evolution/share/docsend_analytics_add_on_footer",["require","exports","tslib","react","dig-components/buttons","dig-components/icons/src","dig-components/icons","dig-components/badges","metaserver/static/js/core/i18n","js/filepath/filepath","metaserver/static/js/sharing/views/share_modal_evolution/share/docsend_analytics_add_on_footer.module.css","metaserver/static/js/clean/analytics","metaserver/static/js/sharing/views/share_modal_evolution/share/docsend_analytics_add_on_help","metaserver/static/js/docsend_analytics_add_on/helpers/modals"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocsendAnalyticsAddOnFooter=void 0,a=s.__importDefault(a),d=s.__importDefault(d);const h=l.intl.formatMessage({id:"3PWKcW",defaultMessage:"Send and track"}),g=l.intl.formatMessage({id:"hRqFL9",defaultMessage:"View analytics"});t.DocsendAnalyticsAddOnFooter=({fileName:e,user:t,fileId:s,path:_,variant:f,linkMetadata:E,waitForLinkMetadata:S})=>{const b=(0,c.file_extension)(e);a.default.useEffect(()=>{p.ProEventsLogger.log(`docsend_analytics_add_on_share_modal_${f}`,{fileExt:b,entryPoint:"share_modal"})},[b,f]);const v=a.default.useCallback(()=>{p.ProEventsLogger.log(`docsend_analytics_add_on_share_modal_${f}_click`,{fileExt:b,entryPoint:"share_modal"}),(0,m.showDocsendModal)({fileId:s,fileName:e,filePath:(0,c.parent_dir)(_),user:t,stormcrowVariant:f,entryPoint:"share_modal"})},[b,s,e,_,t,f]);return!S||"initial"!==E.status&&"loading"!==E.status?a.default.createElement("div",{className:d.default.footerSection},a.default.createElement("div",{className:d.default.buttonSection},a.default.createElement(i.Button,{"data-testid":"cta-button",variant:"transparent",withIconLeft:a.default.createElement(r.UIIcon,{src:n.AnalyticsLine,role:"presentation"}),onClick:v,hasNoUnderline:!0,className:d.default.button},"ready"===E.status&&E.linkData.link?g:h),a.default.createElement(o.AccessoryBadge,null,l.intl.formatMessage({id:"QT7EnD",defaultMessage:"Beta"})),a.default.createElement(u.DocsendAnalyticsAddOnHelp,null))):null},t.DocsendAnalyticsAddOnFooter.displayName="DocsendAnalyticsAddOnFooter"})),define("metaserver/static/js/sharing/views/share_modal_evolution/share/docsend_analytics_add_on_footer.module.css",["require","exports","css!metaserver/static/js/sharing/views/share_modal_evolution/share/docsend_analytics_add_on_footer.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.button=t.buttonSection=t.footerSection=void 0,t.footerSection="_footer-section_hfeej_2",t.buttonSection="_button-section_hfeej_11",t.button="_button_hfeej_11";t.default={footerSection:"_footer-section_hfeej_2",buttonSection:"_button-section_hfeej_11",button:"_button_hfeej_11"}})),define("metaserver/static/js/sharing/views/share_modal_evolution/share/docsend_analytics_add_on_help",["require","exports","tslib","react","dig-components/buttons","dig-components/icons/src","dig-components/icons","metaserver/static/js/core/i18n","metaserver/static/js/sharing/views/share_modal_evolution/share/docsend_analytics_add_on_help.module.css","dig-components/tooltips","dig-components/typography","dig-components/click_outside"],(function(e,t,s,a,i,n,r,o,l,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocsendAnalyticsAddOnHelp=void 0,a=s.__importDefault(a),l=s.__importDefault(l);t.DocsendAnalyticsAddOnHelp=()=>{const[e,t]=a.default.useState(!1),[s,u]=a.default.useState("bottom"),m=a.default.useRef(null),h=a.default.useCallback(()=>t(!0),[]),g=a.default.useCallback(()=>{t(!1),u("bottom")},[]),_=a.default.useCallback(()=>e?g():h(),[e]);return a.default.createElement(a.default.Fragment,null,a.default.createElement(i.IconButton,{variant:"transparent",onClick:_,ref:m},a.default.createElement(r.UIIcon,{src:n.HelpLine,"aria-label":o.intl.formatMessage({id:"AJkGR1",defaultMessage:"Help"})})),a.default.createElement(p.ClickOutside,{isActive:e,onClickOutside:g,isClickThroughPortaled:!1},a.default.createElement(c.Tooltip.Control,{variant:"rich",open:e,triggerRef:m,auto:!0,placement:s,onChangePlacement:u,isPortaled:!1},a.default.createElement(d.Title,{size:"standard",inverse:!0},o.intl.formatMessage({id:"LVpS9H",defaultMessage:"See how recipients engage with your file"})),a.default.createElement(d.Text,{tagName:"p",color:"standard",inverse:!0},o.intl.formatMessage({id:"GXjOEm",defaultMessage:"Get viewer insights for the files you share using Dropbox."})),a.default.createElement("section",{className:l.default.tooltipActions},a.default.createElement(i.Button,{variant:"transparent",inverse:!0,href:"https://help.dropbox.com/integrations/docsend-analytics",target:"_blank",rel:"noreferrer"},o.intl.formatMessage({id:"AmzhYC",defaultMessage:"Learn more"})),a.default.createElement(i.Button,{variant:"outline",inverse:!0,onClick:g,autoFocus:!0},o.intl.formatMessage({id:"aLdUSP",defaultMessage:"Got it"}))))))},t.DocsendAnalyticsAddOnHelp.displayName="DocsendAnalyticsAddOnHelp"})),define("metaserver/static/js/sharing/views/share_modal_evolution/share/docsend_analytics_add_on_help.module.css",["require","exports","css!metaserver/static/js/sharing/views/share_modal_evolution/share/docsend_analytics_add_on_help.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tooltipActions=void 0,t.tooltipActions="_tooltip-actions_jv1py_2";t.default={tooltipActions:"_tooltip-actions_jv1py_2"}})),define("metaserver/static/js/sharing/views/share_modal_evolution/share/header_section",["require","exports","tslib","react","dig-components/typography","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_header/index","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/clean/em_string","metaserver/static/js/sharing/share_modal_icon","metaserver/static/js/core/i18n","metaserver/static/js/sharing/views/share_modal_evolution/utils/context","typescript/component_libraries/spectrum-sharing/src/utils/logging","metaserver/static/js/sharing/views/constants"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderSection=void 0,a=s.__importDefault(a);class m extends a.default.Component{constructor(){super(...arguments),this.handleSettingsButtonClick=e=>{e.preventDefault(),this.props.onSettingsButtonClick(e),this.context.logEvent(p.TiburonEventName.ClickSettingsGear,void 0,{screen:p.ScreenName.ShareScreen})}}render(){const e=this.getSubTitle();return a.default.createElement(n.SharingModalHeaderTitle,{closeButtonVisible:!0,icon:this.getIcon(),subTitle:e,onClickCloseButton:this.props.onCloseButtonClick,onClickSettingsButton:this.handleSettingsButtonClick,settingsButtonVisible:this.props.contentInfo.isFolder()||this.props.showPassFileSettings,title:this.getHeaderTitle()})}getHeaderTitle(){return o.Emstring.em_snippet(this.props.sharingInfo.name(),r.SNIPPET_SIZES.FILENAME)}getIcon(){const{contentInfo:e}=this.props;return a.default.createElement(l.ShareModalIcon,{alt:"",filename:this.props.sharingInfo.name(),isSharedFolder:e.isSharedFolder(),isFolder:e.isFolder(),isTeamSharedFolder:this.props.isTeamSharedFolder,isFolderInsideTeamFolderTree:this.props.isFolderInsideTeamFolderTree,isViewOnly:!this.props.canEdit,isConfidentialFolder:this.props.isConfidentialFolder,pathExists:e.pathExists()})}getNumberOfPeopleShared(){const{membership:e,linkMembers:t,guestMembers:s}=this.props,{total_unique_users:a}=this.props.sharingInfo.memberCounts();return(a||e.getTotalMemberCount([]))+t.length+s.length}canViewInheritedMembers(){return!this.props.contentInfo.isFile()||this.props.membership.hasInheritedUsers()}getFinalNumberShared(){const e=this.props.sharingInfo.memberCounts();return e&&e.exceeds_count?this.props.sharingInfo.memberNum():this.getNumberOfPeopleShared()}hasExistingLink(){return 0!=this.props.sharingInfo.sharedLinks().length}showOnlyYouCanAccess(){if(this.props.sharingInfo.sharingPrefs().exp_links_in_member_list==u.EXP_LINK_IN_MEMBER_LIST_VARIANT.ON&&this.hasExistingLink())return!1;const e=this.getFinalNumberShared();return this.canViewInheritedMembers()&&(0===e||1===e)}disableManageAccessLink(){return this.showOnlyYouCanAccess()}getHeaderSubtitleDescription(){return this.showOnlyYouCanAccess()?c.intl.formatMessage({id:"CQ2ZaT",defaultMessage:"Only you can access"}):c.intl.formatMessage({id:"Yxc2O3",defaultMessage:"Who can access"})}getSubTitle(){const e=this.getHeaderSubtitleDescription(),t=this.disableManageAccessLink();return a.default.createElement(i.Text,{color:"faint",size:"small"},t?a.default.createElement("span",null,e):a.default.createElement(i.Link,{href:"#",hasNoUnderline:!0,onClick:e=>{e.preventDefault(),this.props.onManageAccessClick()}},e))}}t.HeaderSection=m,m.displayName="HeaderSection",m.contextType=d.ShareModalEvolutionContext})),define("metaserver/static/js/sharing/views/share_modal_evolution/share/main_section/email_share",["require","exports","tslib","react","classnames","typescript/component_libraries/spectrum-sharing/src/components/action_section/index","dig-components/tooltips","dig-components/buttons","metaserver/static/js/sharing/ui_util","metaserver/static/js/sharing/views/share_contacts_tokenizer","dig-components/text_fields","metaserver/static/js/core/i18n","metaserver/static/js/sharing/views/share_modal_evolution/utils/context","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/index","typescript/component_libraries/spectrum-sharing/src/utils/logging","metaserver/static/js/sharing/views/share_modal_evolution/utils/experiments","typescript/component_libraries/spectrum-sharing/src/components/checkbox_with_label/index","metaserver/static/js/sharing/views/share_modal_evolution/share/main_section/copy_or_create_link_section","metaserver/static/js/sharing/sharing-sdk/tokenizer","metaserver/static/js/sharing/sharing-sdk/task_menu","metaserver/static/js/sharing/sharing-sdk/provider_with_logging_context","typescript/component_libraries/flows/src/components/approval-forms/approval_type_radio_button_group","typescript/component_libraries/flows/src/components/approval-forms/approval_checkbox_in_share","metaserver/static/js/business_space/browse/group_suggestion/group_suggestion_section","metaserver/static/js/previews/util","metaserver/static/js/contacts/types"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u,m,h,g,_,f,E,S,b,v,M,T,y,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmailShare=t.baseClassName=void 0,a=s.__importDefault(a),i=s.__importDefault(i),C=s.__importDefault(C),t.baseClassName="share-modal-evolution-contacts-field";class I extends a.default.Component{constructor(e){super(e),this.updateGroupSelection=e=>{this.setState({typeaheadTokens:[e]})},this.getIsSharingSdkTokenizerEnabled=()=>{const e=this.props.actionHandler.getSharingInfo();return!(!e||!e.sharingPrefs)&&"ON"===e.sharingPrefs().sharing_sdk_tokenizer_variant},this.getIsExpBsxOrganizeAroundPeopleEnabled=()=>{const e=this.props.actionHandler.getSharingInfo();return!!e&&e.isExpBsxOrganizeAroundPeopleEnabled()},this.finishLogging=e=>this.shareContactsTokenizerRef.finishLogging(e),this.onTypeaheadTokensChange=e=>{this.setState({typeaheadTokens:e}),this.props.emailCountChangeCallback(e.length)},this.setShareContactsTokenizerRef=e=>{null!==e&&(this.shareContactsTokenizerRef=e)},this.filterContacts=e=>this.props.isTeamSharedFolder?!!e.group_id:e.email!==this.props.user.email,this.includeGroupTokens=()=>this.state.typeaheadTokens.some(({group_id:e})=>!!e),this.shouldDisableApprovalCheckbox=()=>this.includeGroupTokens(),this.shouldCreateApproval=()=>{const{showApproval:e,sendApproval:t}=this.props;return e&&!this.shouldDisableApprovalCheckbox()&&t},this.renderApprovalTypeRadioButtons=()=>{const{actionHandler:e,showApproval:t,needsAllApprovers:s,sendApproval:i}=this.props,{typeaheadTokens:n}=this.state;return!t||!i||this.shouldDisableApprovalCheckbox()||n.length<2?null:a.default.createElement(v.ApprovalTypeRadioButtonGroup,{needsAllApprovers:s,onChange:e.changeNeedsAllApprovers})},this.renderApprovalCheckbox=()=>{const{actionHandler:e,showApproval:t,sendApproval:s,recipientMessage:i}=this.props;if(!t||0===this.state.typeaheadTokens.length&&0===i.length)return null;const n=this.shouldDisableApprovalCheckbox();return a.default.createElement(M.ApprovalCheckboxInShare,{disabled:n,checked:!n&&s,onChange:e.toggleSendApproval,onMount:e.logShownApprovalForm})},this.footerContent=()=>{let e=this.props.accessLevel,t=this.props.sharedLink,s=this.props.canCreateLink;return a.default.createElement(a.default.Fragment,null,this.shouldRenderPostNoteAsComment()&&this.renderPostNoteAsComment(),a.default.createElement(f.CopyOrCreateLinkSection,{size:"standard",accessLevel:e,actionHandler:this.props.actionHandler,modalClose:this.props.modalClose,sharedLink:t,getEmailTokenCountFn:this.props.getEmailTokenCountFn,canCreateLink:s,isFolder:this.props.isFolder,contentMetadata:this.props.contentMetadata}))},this.onEmailLinkButtonClick=()=>(this.logClickShareButtonLinkSettingsStatus(),this.shouldCreateApproval()?this.props.actionHandler.createApproval(this):this.props.actionHandler.sendShare(this)),this.onCheckboxToggled=()=>{this.props.actionHandler.changeCreateCommentCheckbox(!this.props.isPostNoteAsCommentChecked)},this.state={typeaheadTokens:this.props.initialTypeaheadTokens}}componentDidMount(){return s.__awaiter(this,void 0,void 0,(function*(){this.isValidReceiverRedCarpetExposure()&&this.props.actionHandler.logIfHaventBefore(h.TiburonEventName.RRCSenderShareModalView,{variant:(0,g.getReceiverRedCarpetVariant)(this.props.actionHandler),file_ext:this.getWhitelistedExtension()})}))}getContacts(){return this.shareContactsTokenizerRef.getContacts()}getWhitelistedExtension(){const e=this.props.actionHandler.getSharingInfo();return e?(0,y.getWhitelistedExtension)(e.name()):""}isValidFileForReceiverRedCarpet(){return!this.props.isFolder&&!this.props.contentMetadata.name.endsWith(".paper")}isValidReceiverRedCarpetExposure(){return this.isValidFileForReceiverRedCarpet()&&"OFF"!==(0,g.getReceiverRedCarpetVariant)(this.props.actionHandler)}hasGroupInRecipientTokens(){return this.state.typeaheadTokens.some(e=>e.type===C.default.NEW_STYLE_GROUP)}shouldRenderEmailShareTaskMenu(){const e=(0,g.getReceiverRedCarpetVariant)(this.props.actionHandler),t="V1"===e||"V2"===e,s=this.isValidFileForReceiverRedCarpet();return t&&s&&this.shouldRenderMessageField()&&!this.hasGroupInRecipientTokens()}renderEmailShareTaskMenu(){return a.default.createElement(b.SharingSdkProviderWithLoggingContext,{user:this.props.user,contentInfo:this.props.actionHandler.getContentInfo(),sharingInfo:this.props.actionHandler.getSharingInfo()},a.default.createElement(S.SharingSdkTaskMenu,{actionHandler:this.props.actionHandler,userId:this.props.user.id}))}render(){const{contactsError:e,disabledContactsInput:s,creatingApprovalRequest:r}=this.props,c=(0,i.default)(["email-share",s?`${t.baseClassName}__typeahead--disabled`:`${t.baseClassName}__typeahead`,e&&e.level===l.ContactsErrorLevel.Error?"contacts-input-error":void 0]);return a.default.createElement(n.ActionSection,{footerContent:this.footerContent(),footerActions:a.default.createElement("span",{className:"scl-sharing-modal-footer"},a.default.createElement(o.Button,{isLoading:r,disabled:this.shouldDisableShareButton(),onClick:this.onEmailLinkButtonClick,variant:"primary",className:"email-link-button","data-uxa-log":"sharing-modal-footer-button-send-email"},this.getShareButtonText())),isHeaderBold:!1},this.renderContactTokenizer(c),this.renderApprovalTypeRadioButtons(),this.shouldRenderEmailShareTaskMenu()&&this.renderEmailShareTaskMenu(),this.shouldRenderMessageField()&&this.renderMessageField(),this.renderApprovalCheckbox())}shouldRenderMessageField(){return this.state.typeaheadTokens.length>0||this.props.recipientMessage.length>0}shouldDisableShareButton(){return this.props.isEmailSending||this.props.isTokenizerEmpty||this.props.contactsError&&this.props.contactsError.level===l.ContactsErrorLevel.Error}shouldRenderPostNoteAsComment(){return this.props.showPostNoteAsComment&&this.props.recipientMessage.length>0&&this.shouldRenderMessageField()}getTypeaheadPlaceholder(){return this.props.isTeamSharedFolder?p.intl.formatMessage({id:"VMGE6I",defaultMessage:"Group names"}):this.props.user.is_team?p.intl.formatMessage({id:"+nKRfb",defaultMessage:"Add an email, name, or group"}):p.intl.formatMessage({id:"bdV6O3",defaultMessage:"Add an email or name"})}getShareButtonText(){const e=p.intl.formatMessage({id:"vJGcTi",defaultMessage:"Share file"}),t=p.intl.formatMessage({id:"cHEg6H",defaultMessage:"Share folder"}),s=p.intl.formatMessage({id:"Qd1iC2",defaultMessage:"Sharing..."}),a=this.props.isFolder?t:e;return this.props.isEmailSending?s:a}renderContactTokenizer(e){const t=this.getIsSharingSdkTokenizerEnabled()?a.default.createElement(b.SharingSdkProviderWithLoggingContext,{user:this.props.user,contentInfo:this.props.actionHandler.getContentInfo(),sharingInfo:this.props.actionHandler.getSharingInfo()},a.default.createElement(a.default.Fragment,null,a.default.createElement(E.SharingSdkTokenizer,{accessLevel:this.props.accessLevel,className:e,ref:this.setShareContactsTokenizerRef,actionHandler:this.props.actionHandler,disabledInput:this.props.disabledContactsInput,focusOnMount:!this.props.disabledContactsInput,initialTypeaheadTokens:this.props.initialTypeaheadTokens,typeaheadTokens:this.state.typeaheadTokens,onTypeaheadTokensChange:this.onTypeaheadTokensChange,shouldLogContactSearch:!0,typeaheadPlaceholder:this.getTypeaheadPlaceholder(),user:this.props.user,showContactImport:!this.props.isTeamSharedFolder,teamGroupInfo:this.props.teamGroupInfo,filterContacts:this.filterContacts}),a.default.createElement(T.GroupSuggestionSection,{contacts:this.state.typeaheadTokens,user:this.props.user,expBsxOrganizeAroundPeople:this.getIsExpBsxOrganizeAroundPeopleEnabled(),updateGroupSelection:this.updateGroupSelection,teamPolicy:this.props.teamPolicy}))):a.default.createElement(a.default.Fragment,null,a.default.createElement(c.ShareContactsTokenizer,{className:e,ref:this.setShareContactsTokenizerRef,actionHandler:this.props.actionHandler,disabledInput:this.props.disabledContactsInput,focusOnMount:!this.props.disabledContactsInput,initialTypeaheadTokens:this.props.initialTypeaheadTokens,typeaheadTokens:this.state.typeaheadTokens,onTypeaheadTokensChange:this.onTypeaheadTokensChange,shouldLogContactSearch:!0,typeaheadPlaceholder:this.getTypeaheadPlaceholder(),user:this.props.user,showContactImport:!this.props.isTeamSharedFolder,teamGroupInfo:this.props.teamGroupInfo,filterContacts:this.filterContacts}),a.default.createElement(T.GroupSuggestionSection,{contacts:this.state.typeaheadTokens,user:this.props.user,expBsxOrganizeAroundPeople:this.getIsExpBsxOrganizeAroundPeopleEnabled(),updateGroupSelection:this.updateGroupSelection,teamPolicy:this.props.teamPolicy}));return this.props.disabledContactsInput?a.default.createElement(r.Tooltip,{id:"tooltip-button",title:p.intl.formatMessage({id:"E3Ydgf",defaultMessage:"You can only copy this link"})},a.default.createElement("div",{id:"contact_tokenizer_with_tooltip"},t)):t}renderMessageField(){return this.isValidReceiverRedCarpetExposure()&&this.props.actionHandler.logIfHaventBefore(h.TiburonEventName.RRCSenderNoteView,{variant:(0,g.getReceiverRedCarpetVariant)(this.props.actionHandler),file_ext:this.getWhitelistedExtension()}),a.default.createElement("div",{className:"share-modal-evolution-message-field"},a.default.createElement(d.TextArea,{placeholder:p.intl.formatMessage({id:"30bVmM",defaultMessage:"Add a note"}),"aria-label":p.intl.formatMessage({id:"30bVmM",defaultMessage:"Add a note"}),onChange:this.props.handleMessageChanged,value:this.props.recipientMessage}))}renderPostNoteAsComment(){const e=p.intl.formatMessage({id:"Jfn0Wa",defaultMessage:"Post this note as a comment"});return a.default.createElement(_.CheckboxWithLabel,{onCheckboxToggled:this.onCheckboxToggled,isChecked:this.props.isPostNoteAsCommentChecked,label:e,isCheckboxDisabled:""===this.props.recipientMessage,fontSize:"small"})}logClickShareButtonLinkSettingsStatus(){let e=!1,t=!1,s=!1;if(this.props.sharedLink){const a=(0,m.getAudienceForLink)(this.props.sharedLink.link_permissions);e=this.props.sharedLink.link_permissions.require_password||"password"===a,t=!!this.props.sharedLink.expires,s=!this.props.sharedLink.link_permissions.allow_download}this.context.logEvent(h.TiburonEventName.ClickShareButtonLinkSettingsStatus,this.props.sharedLink,{password:e,expiration:t,disable_download:s})}}t.EmailShare=I,I.contextType=u.ShareModalEvolutionContext,I.displayName="EmailShare"})),define("metaserver/static/js/sharing/views/share_modal_evolution/share/share_screen",["require","exports","tslib","react","metaserver/static/js/sharing/views/share_modal_evolution/share/header_section","metaserver/static/js/sharing/views/share_modal_evolution/share/main_section/main_section","metaserver/static/js/components/ui/css","js/filepath/filepath","metaserver/static/js/sharing/views/share_modal_evolution/share/docsend_analytics_add_on_footer","metaserver/static/js/docsend_analytics_add_on/helpers/utils"],(function(e,t,s,a,i,n,r,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareScreen=void 0,a=s.__importDefault(a);class d extends a.default.Component{constructor(){super(...arguments),this.getDocsendAnalyticsAddOnEntryPointMetadata=()=>{var e;const{contentMetadata:t,sharingInfo:s,user:a,docsendAnalyticsAddOnMetadata:i}=this.props,n=(0,c.getDocsendAnalyticsAddOnConfig)(a,i.variant),r=n.coreSharingModal.showFooterWhenViewAccess&&"writer"!==s.recipientAccess()||n.coreSharingModal.showFooterWhenEditAccess,l=n.isSupportedFile((null===(e=s.sharingInfoState().linkMetadata)||void 0===e?void 0:e.file_size)||0,(0,o.file_extension)(t.name));return r&&l&&t.path_lower&&t.isFile()?{showEntryPoint:!0,entryPointProps:{fileName:t.name,user:a,fileId:t.id,path:t.path_lower,variant:n.variantForLogging,linkMetadata:i,waitForLinkMetadata:n.coreSharingModal.fetchAnalyticsLink}}:{showEntryPoint:!1}}}render(){const{actionHandler:e,contactsError:t,contentMetadata:s,isEmailSending:r,handleManageAccessClick:o,handleMessageChanged:c,initialTypeaheadTokens:d,isTeamSharedFolder:p,isTokenizerEmpty:u,sharingInfo:m,showPassFileSettings:h,onCloseButtonClick:g,onSettingsButtonClick:_,recipientMessage:f,user:E,guestMembers:S,linkMembers:b,showApproval:v,sendApproval:M,needsAllApprovers:T,creatingApprovalRequest:y}=this.props,C=this.getDocsendAnalyticsAddOnEntryPointMetadata();return a.default.createElement("div",{className:"share-modal-evolution-share-screen"},a.default.createElement(i.HeaderSection,{canEdit:m.permissionsObj().canEdit(),isConfidentialFolder:m.isConfidentialFolder(),isTeamSharedFolder:m.isTeamSharedFolder(),isFolderInsideTeamFolderTree:m.isFolderInsideTeamFolderTree(),showPassFileSettings:h,contentInfo:m.contentInfo(),guestMembers:S,linkMembers:b,membership:m.members(),onCloseButtonClick:g,onManageAccessClick:o,onSettingsButtonClick:_,sharingInfo:m}),a.default.createElement(n.MainSection,{actionHandler:e,closeModalHandler:g,contactsError:t,contentMetadata:s,isEmailSending:r,handleMessageChanged:c,initialTypeaheadTokens:d,isTeamSharedFolder:p,isTokenizerEmpty:u,onManageAccessClick:o,recipientMessage:f,sharingInfo:m,user:E,selectedAccessLevel:"writer"===this.props.sharingInfo.recipientAccess()?"editor":"viewer",showApproval:v,sendApproval:M,needsAllApprovers:T,creatingApprovalRequest:y}),C.showEntryPoint&&a.default.createElement(l.DocsendAnalyticsAddOnFooter,Object.assign({},C.entryPointProps)))}}d.displayName="ShareScreen",t.ShareScreen=(0,r.requireCssWithComponent)(d,["/static/metaserver/static/css/sharing/share_modal_evolution-vflp8NfE3.css"])})),define("metaserver/static/js/sharing/views/share_modal_evolution/share/main_section/access_level_dropdown",["require","exports","tslib","react","classnames","dig-components/buttons","dig-components/menu","dig-components/typography","metaserver/static/js/sharing/views/share_modal_evolution/utils/access_level","metaserver/static/js/sharing/views/share_modal_evolution/utils/audience"],(function(e,t,s,a,i,n,r,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccessLevelDropdown=void 0,a=s.__importDefault(a),i=s.__importDefault(i);const d="share-modal-evolution-access-level-dropdown";class p extends a.default.Component{constructor(){super(...arguments),this.renderDropdownOptions=e=>e.map(e=>a.default.createElement(r.Menu.SelectItem,{key:e.label,value:e.link_access_level,selected:this.props.selectedAccessLevel===e.link_access_level,disabled:!e.allowed},(0,l.getAccessLevelDescription)(this.props.selectedAudience,e.link_access_level))),this.handleSelectedAccessLevelChange=e=>{this.props.selectedAccessLevel!==e&&this.props.onSelectedAccessLevelChange(e)}}render(){const e=this.props.linkAccessLevelOptions,t=1===e.length?" ":": ",s=(0,i.default)([`${d}`,e.length>1?`${d}__with-menu`:void 0]);return a.default.createElement("div",{className:s},a.default.createElement(o.Text,{className:`${d}__audience-text`},this.getAudienceText(),t),1===e.length?this.getCurrentAccessLevelText():this.renderAccessMenu(e))}getAudienceText(){const{contentMetadata:e,selectedAudience:t}=this.props;return(0,c.getAudienceText)(t,e.owner_team)}getCurrentAccessLevelText(){return a.default.createElement(o.Text,{className:`${d}__audience-text`,isBold:!0},(0,l.getAccessLevelDescription)(this.props.selectedAudience,this.props.selectedAccessLevel))}renderAccessMenu(e){return a.default.createElement(r.Menu.Wrapper,{onSelection:this.handleSelectedAccessLevelChange,isPortaled:!1,className:`${d}__unportaled-menu`},({getContentProps:t,getTriggerProps:s})=>a.default.createElement(a.default.Fragment,null,a.default.createElement(n.Button,Object.assign({},s(),{variant:"transparent",withDropdownIcon:!0}),(0,l.getAccessLevelDescription)(this.props.selectedAudience,this.props.selectedAccessLevel)),a.default.createElement(r.Menu.Content,Object.assign({},t(),{placement:"bottom-end"}),a.default.createElement(r.Menu.Segment,null,this.renderDropdownOptions(e)))))}}t.AccessLevelDropdown=p,p.displayName="AccessLevelDropdown"})),define("metaserver/static/js/sharing/views/share_modal_evolution/share/main_section/access_level_section",["require","exports","tslib","react","metaserver/static/js/core/i18n","dig-components/typography","metaserver/static/js/sharing/views/share_modal_evolution/share/main_section/access_level_dropdown","metaserver/static/js/sharing/views/share_modal_evolution/utils/audience","metaserver/static/js/sharing/views/share_modal_evolution/utils/context","typescript/component_libraries/spectrum-sharing/src/components/action_section/index","typescript/component_libraries/spectrum-sharing/src/utils/logging"],(function(e,t,s,a,i,n,r,o,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccessLevelSection=void 0,a=s.__importDefault(a);class p extends a.default.Component{constructor(){super(...arguments),this.handleSettingsButtonClick=e=>{let t;e.preventDefault(),"editor"===this.props.selectedAccessLevel?(this.props.openSharingSettingsModal("edit_link_settings"),t=d.SettingsTabName.EditLinkSettingsTab):(this.props.openSharingSettingsModal("view_link_settings"),t=d.SettingsTabName.ViewLinkSettingsTab),this.context.logEvent(d.TiburonEventName.ClickSettingsText,this.props.sharedLink,{settings_tab:t})}}render(){const{canCreateLink:e,contentMetadata:t,linkAccessLevelOptions:s,onSelectedAccessLevelChange:i,selectedAccessLevel:l,selectedAudience:d,sharedLink:p,teamPolicy:u,defaultSharingLinkAudience:m}=this.props,h=this.enableSettingsButton();return a.default.createElement(c.ActionSection,{layout:"columns"},a.default.createElement(r.AccessLevelDropdown,{selectedAccessLevel:l,linkAccessLevelOptions:s,contentMetadata:t,selectedAudience:(0,o.getSelectedAudience)(e,d,p,u,t.policy,m),onSelectedAccessLevelChange:i}),a.default.createElement(n.Text,{size:"standard",color:h?"standard":"disabled"},this.renderSettingsButton(h)))}enableSettingsButton(){return this.props.canCreateLink||void 0!==this.props.sharedLink}renderSettingsButton(e){const t=i.intl.formatMessage({id:"Q8t9EL",defaultMessage:"Settings"});return e?a.default.createElement(n.Link,{href:"#",hasNoUnderline:!0,onClick:this.handleSettingsButtonClick},t):a.default.createElement(a.default.Fragment,null,t)}}t.AccessLevelSection=p,p.displayName="AccessLevelSection",p.contextType=l.ShareModalEvolutionContext})),define("metaserver/static/js/sharing/views/share_modal_evolution/share/main_section/copy_link_section",["require","exports","tslib","react","metaserver/static/js/core/i18n","dig-components/typography","dig-components/icons/src","metaserver/static/js/sharing/ui_notifications_util","dig-components/icons","typescript/component_libraries/spectrum-sharing/src/share_modal_evolution/copy_link/copy_link_education_tooltip","metaserver/static/js/sharing/views/share_modal_evolution/utils/context","typescript/component_libraries/spectrum-sharing/src/utils/logging","typescript/component_libraries/spectrum-sharing/src/share_modal_evolution/utils/link_description","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/index","dig-components/icons/src","metaserver/static/js/clean/clipboard_v3","metaserver/static/js/sharing/ui_util","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u,m,h,g,_,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyLinkSection=t.isBrowserCopyEnabled=void 0,a=s.__importDefault(a);t.isBrowserCopyEnabled=()=>{const e=document.createElement("input");e.value="sharing is caring",document.body.appendChild(e),e.select();const t=document.queryCommandEnabled("copy");return document.body.removeChild(e),t};class E extends a.default.Component{constructor(e){super(e),this.linkRef=a.default.createRef(),this.handleCopyLinkClicked=e=>{e.preventDefault();const t=this.props.getEmailTokenCountFn();this.context.logEvent(p.TiburonEventName.CopySharedLink,this.props.sharedLink,{tokenized_contact_count:t}),(0,g.copyToClipboard)(this.props.sharedLink.url,()=>this.handleClipboardSuccess(),()=>this.copyLinkToClipboardRetryUsingNativeAPI())},this.renderCopyLink=e=>a.default.createElement("div",{className:"sharing-modal-footer-link-div"},a.default.createElement(c.CopyLinkEducationTooltip,{key:"copy-link-education-tooltip",intl:i.intl,sharedLink:this.props.sharedLink,linkRef:this.linkRef},a.default.createElement(n.Text,{size:this.props.size},a.default.createElement(n.Link,{key:"linkCopyToClipboard",href:"#",hasNoUnderline:!0,className:"copy-link-button",onClick:this.handleCopyLinkClicked,isBold:!0,ref:this.linkRef,"data-uxa-log":"sharing-modal-footer-copy-link"},a.default.createElement(l.UIIcon,{src:r.LinkLine,size:this.props.size,"aria-label":""}),e))),this.renderBanner()),this.renderBanner=()=>{const e=this.getLinkRestrictions();return e?a.default.createElement(n.Text,{color:"faint"},a.default.createElement("span",{className:"sharing-modal-footer-link-margin"},e),a.default.createElement("span",{className:"sharing-modal-footer-restrictions-margin"},"·"),a.default.createElement(n.Link,{className:"sharing-modal-footer-restrictions-text",inverse:!0,href:"#",onClick:this.props.handleSettingsButtonClick},(0,u.getModifyText)(i.intl))):""},this.focusOnInput=()=>{this.inputRef.current&&this.inputRef.current.select()},this.handleCopyLink=()=>{const e=this.props.getEmailTokenCountFn();this.context.logEvent(p.TiburonEventName.CopySharedLink,this.props.sharedLink,{tokenized_contact_count:e}),(0,g.copyToClipboard)(this.props.sharedLink.url,()=>this.handleClipboardSuccess(),()=>this.copyLinkToClipboardRetryUsingNativeAPI())},this.renderViewedLinkCopiedText=()=>{const e="editor"===this.props.accessLevel;return a.default.createElement("div",{className:"share-modal-evolution-share-screen-footer-link__link-copied"},a.default.createElement(l.UIIcon,{className:"share-modal-evolution-share-screen-footer-link__link-copied-icon",src:h.CheckmarkCircleLine}),a.default.createElement(n.Text,{tagName:"p",isBold:!0},e?i.intl.formatMessage({id:"dmwGjM",defaultMessage:"Edit link copied"}):i.intl.formatMessage({id:"opUQcS",defaultMessage:"View link copied"})))},this.inputRef=a.default.createRef(),this.state={copySuccess:!1}}componentDidUpdate(e){this.props.createdLink&&this.props.sharedLink&&e!==this.props&&(0,t.isBrowserCopyEnabled)()&&this.handleCopyLink()}render(){const e=i.intl.formatMessage({id:"t0Frp1",defaultMessage:"Copy link"});return this.props.createdLink&&this.state.copySuccess&&(0,t.isBrowserCopyEnabled)()?this.renderViewedLinkCopiedText():this.renderCopyLink(e)}handleClipboardSuccess(){this.setState({copySuccess:!0},()=>{(0,o.showCopyLinkSuccessSnackbar)(this.props.sharedLink.url,this.props.accessLevel)}),(0,_.trackUserLeapEvent)(_.SharingUserLeapEvent.SHARE_LINK_COPY_SUCCESS,f.SHARE_ACTION_ORIGIN_TYPE.SHARE_LINK_MODAL)}copyLinkToClipboardRetryUsingNativeAPI(){navigator.clipboard?navigator.clipboard.writeText(this.props.sharedLink.url).then(()=>this.handleClipboardSuccess(),()=>this.handleClipboardFailureNativeAPI()):this.handleClipboardFailureNativeAPI()}handleClipboardFailureNativeAPI(){this.context.logEvent(p.TiburonEventName.CopySharedLinkFailure,this.props.sharedLink,{tokenized_contact_count:this.props.getEmailTokenCountFn(),error:"failed_copy_to_clipboard"}),this.setState({copySuccess:!1}),(0,o.showCopyLinkErrorSnackbar)(this.props.sharedLink.url,this.props.accessLevel)}getLinkRestrictions(){const e=this.props.sharedLink,t=(0,m.getAudienceForLink)(e.link_permissions),s=e.link_permissions.require_password||"password"===t,a=e.expires;return s&&a?(0,u.getRestrictionsApplyText)(i.intl):s?(0,u.getPasswordRequiredText)(i.intl):a?(0,u.getExpirationEnabledText)(i.intl,e):void 0}}t.CopyLinkSection=E,E.displayName="CopyLinkSection",E.contextType=d.ShareModalEvolutionContext})),define("metaserver/static/js/sharing/views/share_modal_evolution/share/main_section/create_link_section",["require","exports","tslib","react","metaserver/static/js/core/i18n","dig-components/typography","dig-components/icons/src","dig-components/icons","typescript/component_libraries/spectrum-sharing/src/components/sharing_spinner/index","metaserver/static/js/sharing/views/share_modal_evolution/share/main_section/create_link_help_text","metaserver/static/js/sharing/views/share_modal_evolution/utils/context"],(function(e,t,s,a,i,n,r,o,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateLinkSection=void 0,a=s.__importDefault(a);class p extends a.default.Component{constructor(e){super(e),this.handleCreateLinkClick=e=>{e.preventDefault(),this.setState({isCreatingLink:!0},()=>{this.props.onCreateLinkClick().finally(()=>{this.setState({isCreatingLink:!1})})})},this.state={isCreatingLink:!1}}render(){return this.state.isCreatingLink?this.renderCreatingLinkLoading():this.renderCreateLink()}renderCreatingLinkLoading(){return a.default.createElement(l.SharingSpinner,{ariaValue:"Loading xsmall",message:i.intl.formatMessage({id:"g7It2O",defaultMessage:"Creating link..."}),textSize:this.props.size})}renderCreateLink(){const{canCreateLink:e}=this.props,t=e=>a.default.createElement(n.Link,{key:"toCreateALink",href:"#",hasNoUnderline:!0,onClick:this.handleCreateLinkClick,"aria-label":i.intl.formatMessage({id:"lCKMha",defaultMessage:"Create link"}),style:{paddingRight:"0"}},e);return e?a.default.createElement(n.Text,{size:this.props.size,isBold:!0},a.default.createElement(o.UIIcon,{src:r.LinkLine,size:this.props.size,"aria-label":""}),a.default.createElement("div",{style:{whiteSpace:"pre",display:"flex"}},i.intl.formatMessage({id:"DW0r0G",defaultMessage:"<link>Create</link> and copy link"},{link:t}))):a.default.createElement(c.CreateLinkHelpText,{contentMetadata:this.props.contentMetadata,size:this.props.size})}}t.CreateLinkSection=p,p.displayName="CreateLinkSection",p.contextType=d.ShareModalEvolutionContext})),define("metaserver/static/js/sharing/views/share_modal_evolution/share/main_section/create_link_help_text",["require","exports","tslib","react","metaserver/static/js/core/i18n","dig-components/icons","dig-components/icons/src","dig-components/typography","typescript/component_libraries/spectrum-sharing/src/components/help_info/index","metaserver/static/js/sharing/access_level"],(function(e,t,s,a,i,n,r,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateLinkHelpText=void 0,a=s.__importDefault(a),t.CreateLinkHelpText=function(e){const t=i.intl.formatMessage({id:"YNOPIK",defaultMessage:"To create the view link, add this folder to Dropbox"});return!1==!!e.contentMetadata.path_lower&&e.contentMetadata.access_type===c.ACCESS_LEVEL.WRITER&&e.contentMetadata.isFolder()?a.default.createElement(o.Text,{size:e.size,color:"disabled",isBold:!0},a.default.createElement(n.UIIcon,{src:r.LinkLine,size:e.size,"aria-label":""}),i.intl.formatMessage({id:"m9qOdI",defaultMessage:"Create and copy link"}),a.default.createElement(l.HelpInfo,{id:"cannotCopyLinkInfo",text:t})):a.default.createElement(o.Text,{size:e.size,color:"disabled",isBold:!0},a.default.createElement(n.UIIcon,{src:r.LinkLine,size:e.size,"aria-label":""}),i.intl.formatMessage({id:"t0Frp1",defaultMessage:"Copy link"}),a.default.createElement(l.HelpInfo,{id:"cannotCopyLinkInfo",text:i.intl.formatMessage({id:"CqPhXv",defaultMessage:"You can only email this link"})}))}})),define("metaserver/static/js/sharing/views/share_modal_evolution/share/main_section/copy_or_create_link_section",["require","exports","tslib","react","metaserver/static/js/sharing/views/share_modal_evolution/share/main_section/copy_link_section","metaserver/static/js/sharing/views/share_modal_evolution/share/main_section/create_link_section","typescript/component_libraries/spectrum-sharing/src/utils/logging","metaserver/static/js/sharing/views/share_modal_evolution/utils/context","metaserver/static/js/sharing/views/constants"],(function(e,t,s,a,i,n,r,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyOrCreateLinkSection=void 0,a=s.__importDefault(a);class c extends a.default.Component{constructor(e){super(e),this.handleCreateLinkClick=()=>this.props.actionHandler.createSharedLink(this.props.accessLevel,this.props.selectedAudience,l.LINK_CREATION_SURFACE.COPY_OR_CREATE_LINK_SECTION),this.handleSettingsButtonClick=e=>{let t;e.preventDefault(),"editor"===this.props.accessLevel?(this.props.actionHandler.openSharingSettingsModal("edit_link_settings"),t=r.SettingsTabName.EditLinkSettingsTab):(this.props.actionHandler.openSharingSettingsModal("view_link_settings"),t=r.SettingsTabName.ViewLinkSettingsTab),this.context.logEvent(r.TiburonEventName.OpenLinkSettingsModal,this.props.sharedLink,{settings_tab:t})},this.state={createdLink:!1}}componentDidUpdate(e){!e.sharedLink&&this.props.sharedLink&&e.accessLevel===this.props.accessLevel&&(this.setState({createdLink:!0}),setTimeout(()=>{this.setState({createdLink:!1})},5e3))}render(){return this.props.sharedLink?a.default.createElement(i.CopyLinkSection,{accessLevel:this.props.accessLevel,modalClose:this.props.modalClose,sharedLink:this.props.sharedLink,getEmailTokenCountFn:this.props.getEmailTokenCountFn,size:this.props.size,handleSettingsButtonClick:this.handleSettingsButtonClick,createdLink:this.state.createdLink,isFolder:this.props.isFolder}):a.default.createElement(n.CreateLinkSection,{onCreateLinkClick:this.handleCreateLinkClick,canCreateLink:this.props.canCreateLink,size:this.props.size,contentMetadata:this.props.contentMetadata})}}t.CopyOrCreateLinkSection=c,c.defaultProps={size:"small"},c.contextType=o.ShareModalEvolutionContext,c.displayName="CopyOrCreateLinkSection"})),define("metaserver/static/js/sharing/views/share_modal_evolution/share/main_section/share_link_section",["require","exports","tslib","react","metaserver/static/js/sharing/views/share_modal_evolution/share/main_section/email_share","metaserver/static/js/sharing/views/share_modal_evolution/utils/context"],(function(e,t,s,a,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareLinkSection=void 0,a=s.__importDefault(a);class r extends a.default.Component{constructor(e){super(e),this.state={numEmailTokens:this.props.initialTypeaheadTokens.length}}render(){return a.default.createElement(i.EmailShare,{actionHandler:this.props.actionHandler,contactsError:this.props.contactsError,isEmailSending:this.props.isEmailSending,disabledContactsInput:!this.props.canInviteByEmail,handleMessageChanged:this.props.handleMessageChanged,modalClose:this.props.modalClose,recipientMessage:this.props.recipientMessage,sharedLink:this.props.sharedLink,showPostNoteAsComment:this.props.showPostNoteAsComment,isFolder:this.props.isFolder,isPostNoteAsCommentChecked:this.props.isPostNoteAsCommentChecked,isTeamSharedFolder:this.props.isTeamSharedFolder,isTokenizerEmpty:this.props.isTokenizerEmpty,initialTypeaheadTokens:this.props.initialTypeaheadTokens,user:this.props.user,emailCountChangeCallback:this.updateEmailTokenCount.bind(this),accessLevel:this.props.accessLevel,getEmailTokenCountFn:this.getEmailTokenCount.bind(this),canCreateLink:this.props.canCreateLink,contentMetadata:this.props.contentMetadata,canCreateViewLinkForFolder:this.props.canCreateViewLinkForFolder,viewLinkForFolder:this.props.viewLinkForFolder,showApproval:this.props.showApproval,sendApproval:this.props.sendApproval,needsAllApprovers:this.props.needsAllApprovers,creatingApprovalRequest:this.props.creatingApprovalRequest,teamPolicy:this.props.teamPolicy})}updateEmailTokenCount(e){this.setState({numEmailTokens:e})}getEmailTokenCount(){return this.state.numEmailTokens}}t.ShareLinkSection=r,r.displayName="ShareLinkSection",r.contextType=n.ShareModalEvolutionContext})),define("metaserver/static/js/sharing/views/share_modal_evolution/share/main_section/link_section",["require","exports","tslib","react","metaserver/static/js/sharing/views/share_modal_evolution/share/main_section/share_link_section","metaserver/static/js/sharing/views/share_modal_evolution/utils/context"],(function(e,t,s,a,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkSection=void 0,a=s.__importDefault(a);class r extends a.default.Component{constructor(e){super(e),this.state={isUpdatingAccess:!1}}render(){return a.default.createElement(i.ShareLinkSection,{key:"shareLinkSection",accessLevel:this.props.accessLevel,actionHandler:this.props.actionHandler,canCreateLink:this.props.canCreateLink,canInviteByEmail:this.props.canInviteByEmail,contactsError:this.props.contactsError,isEmailSending:this.props.isEmailSending,handleMessageChanged:this.props.handleMessageChanged,modalClose:this.props.modalClose,recipientMessage:this.props.recipientMessage,sharedLink:this.props.sharedLink,isPostNoteAsCommentChecked:this.props.isPostNoteAsCommentChecked,isFolder:this.props.isFolder,showPostNoteAsComment:this.props.showPostNoteAsComment,isTeamSharedFolder:this.props.isTeamSharedFolder,isTokenizerEmpty:this.props.isTokenizerEmpty,initialTypeaheadTokens:this.props.initialTypeaheadTokens,user:this.props.user,contentMetadata:this.props.contentMetadata,canCreateViewLinkForFolder:this.props.canCreateViewLinkForFolder,viewLinkForFolder:this.props.viewLinkForFolder,showApproval:this.props.showApproval,sendApproval:this.props.sendApproval,needsAllApprovers:this.props.needsAllApprovers,creatingApprovalRequest:this.props.creatingApprovalRequest,teamPolicy:this.props.teamPolicy})}}t.LinkSection=r,r.displayName="LinkSection",r.contextType=n.ShareModalEvolutionContext})),define("metaserver/static/js/sharing/views/share_modal_evolution/share/main_section/main_section",["require","exports","tslib","react","typescript/component_libraries/spectrum-sharing/src/components/action_container/index","metaserver/static/js/sharing/access_level","metaserver/static/js/sharing/ui_util","metaserver/static/js/sharing/views/share_modal_evolution/share/main_section/link_section","metaserver/static/js/sharing/views/share_modal_evolution/share/main_section/no_permissions_banner","typescript/component_libraries/spectrum-sharing/src/components/info_box/index","metaserver/static/js/core/i18n","metaserver/static/js/sharing/views/share_modal_evolution/utils/context","typescript/component_libraries/spectrum-sharing/src/utils/logging","metaserver/static/js/sharing/views/share_modal_evolution/share/main_section/access_level_section","metaserver/static/js/clean/static_urls","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/sharing_settings_util","typescript/component_libraries/spectrum-sharing/src/components/form_validation_message/index"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u,m,h,g,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MainSection=void 0,a=s.__importDefault(a);const f={[r.ContactsErrorLevel.Error]:"error",[r.ContactsErrorLevel.Warn]:"warn",defaultLevel:"default"};class E extends a.default.Component{constructor(e){super(e),this.onTabSelected=e=>{this.props.actionHandler.changeRecipientAccess("editor"===e?n.ACCESS_LEVEL.WRITER:n.ACCESS_LEVEL.READER);const t="editor"===e?u.ShareTabName.EditTab:u.ShareTabName.ViewTab;this.context.logEvent(u.TiburonEventName.ViewShareTab,void 0,{share_tab:t})}}componentDidMount(){const e="editor"===this.props.selectedAccessLevel?u.ShareTabName.EditTab:u.ShareTabName.ViewTab;this.context.logEvent(u.TiburonEventName.ViewShareScreen,void 0,{share_tab:e}),this.context.logEvent(u.TiburonEventName.ViewShareTab,void 0,{share_tab:e})}render(){const{actionHandler:e,contentMetadata:t,selectedAccessLevel:s,sharingInfo:n}=this.props;return 0===this.getLinkAccessLevelOptions().length?a.default.createElement(c.InfoBox,{imgPath:(0,h.static_url)("/static/metaserver/static/images/sharing/share_modal/no_access-vflRKAkm7.png"),imgAlt:d.intl.formatMessage({id:"jLOGFI",defaultMessage:"No permissions to share"}),title:d.intl.formatMessage({id:"XGWBlY",defaultMessage:"You can view, but not share"}),message:this.getNoPermissionsMessage()}):a.default.createElement(i.ActionContainer,{header:this.getHeaderDescription()},a.default.createElement(_.FormValidationMessage,{message:this.props.contactsError.message,variant:this.getMessageType()}),a.default.createElement(m.AccessLevelSection,{selectedAccessLevel:s,canCreateLink:this.canCreateLink(s),contentMetadata:t,linkAccessLevelOptions:this.getLinkAccessLevelOptions(),selectedAudience:n.getSelectedAudienceByAccessLevel(s),sharedLink:this.getSharedLinkByAccessLevel(s),teamPolicy:n.teamPolicy(),onSelectedAccessLevelChange:this.onTabSelected,openSharingSettingsModal:e.openSharingSettingsModal,defaultSharingLinkAudience:this.props.sharingInfo.getDefaultSharingLinkAudience()}),"editor"===this.props.selectedAccessLevel?this.renderLinkSection("editor"):this.renderLinkSection("viewer"))}getMessageType(){const e=this.props.contactsError.level||"defaultLevel";return f[e]}getSharedLinkByAccessLevel(e){let t;return"editor"===e?t=this.props.sharingInfo.editRighteousLink():"viewer"===e&&(t=this.props.sharingInfo.viewRighteousLink()||this.props.sharingInfo.shmodelLink()),t}canInvite(e){const t=this.props.sharingInfo.permissionsObj();switch(e){case"editor":return t.canInviteEditor();case"viewer":return t.canInviteViewer();default:return!1}}canCreateLink(e){const{sharingInfo:t,isTeamSharedFolder:s,contentMetadata:a}=this.props,i=this.props.sharingInfo.permissionsObj();return(0,g.canCreateLink)(e,t.isCloudDoc(),t.isFolder(),s,t.isConfidentialFolder(),i.canInviteEditor(),t.canShareLink(),i.canCreateViewLink(),i.canCreateEditLink(),a.access_type,!!a.path_lower)}validateAccessLevel(e){return this.canInvite(e)||this.canCreateLink(e)||void 0!==this.getSharedLinkByAccessLevel(e)}renderLinkSection(e){const{actionHandler:t,sharingInfo:s}=this.props;return this.validateAccessLevel(e)?a.default.createElement(o.LinkSection,{accessLevel:e,actionHandler:t,canCreateLink:this.canCreateLink(e),canInviteByEmail:this.canInvite(e),contactsError:this.props.contactsError,contentMetadata:this.props.contentMetadata,isEmailSending:this.props.isEmailSending,handleMessageChanged:this.props.handleMessageChanged,initialTypeaheadTokens:this.props.initialTypeaheadTokens,isPostNoteAsCommentChecked:s.isShareMessageAsCommentChecked(),isTokenizerEmpty:this.props.isTokenizerEmpty,isTeamSharedFolder:this.props.isTeamSharedFolder,onManageAccessClick:this.props.onManageAccessClick,recipientMessage:this.props.recipientMessage,user:this.props.user,sharedLink:this.getSharedLinkByAccessLevel(e),modalClose:this.props.closeModalHandler,isFolder:s.isFolder(),teamPolicy:s.teamPolicy(),showPostNoteAsComment:s.permissionsObj().canShareMessageAsComment(),canCreateViewLinkForFolder:this.canCreateLink("viewer"),viewLinkForFolder:s.shmodelLink(),showApproval:this.props.showApproval,sendApproval:this.props.sendApproval,needsAllApprovers:this.props.needsAllApprovers,creatingApprovalRequest:this.props.creatingApprovalRequest}):a.default.createElement(l.NoPermissionsBanner,{accessLevel:e,isFolder:s.isFolder()})}getHeaderDescription(){return this.props.sharingInfo.isFolder()?d.intl.formatMessage({id:"hMjxKh",defaultMessage:"Share this folder"}):d.intl.formatMessage({id:"8fJdJ4",defaultMessage:"Share this file"})}getLinkAccessLevelOptions(){const e=[];return e.push({link_access_level:"viewer",allowed:this.validateAccessLevel("viewer"),label:"can view"}),e.push({link_access_level:"editor",allowed:this.validateAccessLevel("editor"),label:"can edit"}),e.filter(e=>e.allowed)}getNoPermissionsMessage(){return this.props.sharingInfo.isFolder()?d.intl.formatMessage({id:"fpgILd",defaultMessage:"To share this folder, ask someone else for access to edit."}):d.intl.formatMessage({id:"m4b4bb",defaultMessage:"To share this file, ask someone else for access to edit."})}}t.MainSection=E,E.displayName="MainSection",E.contextType=p.ShareModalEvolutionContext})),define("metaserver/static/js/sharing/views/share_modal_evolution/share/main_section/no_permissions_banner",["require","exports","tslib","react","metaserver/static/js/core/i18n","dig-components/typography","typescript/component_libraries/spectrum-sharing/src/components/banner/index"],(function(e,t,s,a,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoPermissionsBanner=void 0,a=s.__importDefault(a);class o extends a.default.Component{render(){return a.default.createElement(r.Banner,{variant:"transparent-left"},a.default.createElement(n.Text,null,this.getNoPermissionsText()))}getNoPermissionsText(){return"editor"===this.props.accessLevel?this.props.isFolder?i.intl.formatMessage({id:"dooCWY",defaultMessage:"You can only share a link for viewing for this folder."}):i.intl.formatMessage({id:"XbAqHv",defaultMessage:"You can only share a link for viewing for this type of file."}):i.intl.formatMessage({id:"X+IYXP",defaultMessage:"This link type isn’t supported."})}}t.NoPermissionsBanner=o,o.displayName="NoPermissionsBanner"})),define("metaserver/static/js/sharing/views/share_modal_evolution/utils/access_level",["require","exports","metaserver/static/js/core/i18n"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAccessLevelDescription=void 0;const a=s.intl.formatMessage({id:"jAzCAz",defaultMessage:"can edit"}),i=s.intl.formatMessage({id:"GKgRRt",defaultMessage:"can edit"}),n=s.intl.formatMessage({id:"wZejJ8",defaultMessage:"can view"}),r=s.intl.formatMessage({id:"eCFw0p",defaultMessage:"can view"});t.getAccessLevelDescription=function(e,t){return"public"===e?"editor"===t?a:n:"editor"===t?i:r}})),define("metaserver/static/js/sharing/views/share_modal_evolution/utils/audience",["require","exports","metaserver/static/js/sharing/api/types/metadata","metaserver/static/js/core/i18n","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/index","metaserver/static/js/clean/em_string","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants"],(function(e,t,s,a,i,n,r){"use strict";function o(e,t,s){if(t&&"members"===t.shared_link_policy)return"no_one";if(e){const t=e.shared_link_create_policy;if("team_only"===t||"default_team_only"===t)return"team";if("default_no_one"===t)return"no_one"}return s||"public"}Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectedAudience=t.getDefaultAudienceOptions=t.getDefaultAudience=t.getAudienceText=void 0,t.getAudienceText=function(e,t){switch(e){case"public":return a.intl.formatMessage({id:"vAFlk4",defaultMessage:"Anyone with this link"});case"team":return t?a.intl.formatMessage({id:"tOfnIZ",defaultMessage:"{team_name} members with this link"},{team_name:n.Emstring.em_snippet(t.name,r.SNIPPET_SIZES.COMPANY_NAME,1)}):a.intl.formatMessage({id:"wrE9Wi",defaultMessage:"Team Members with this link"});case"password":return a.intl.formatMessage({id:"QI5Jkq",defaultMessage:"People with the password for this link"});case"no_one":return a.intl.formatMessage({id:"SnIjdP",defaultMessage:"Only people invited"})}},t.getDefaultAudience=o,t.getDefaultAudienceOptions=function(e,t,a){const i=[],n=t&&"team_only"===t.shared_link_create_policy;return i.push(new s.LinkAudienceOption({audience:"public",allowed:!n,disallowed_reason:n?s.LinkAudienceDisallowedReason.RestrictedByTeam:null})),i.push(new s.LinkAudienceOption({audience:"team",allowed:e.is_team,disallowed_reason:e.is_team?null:s.LinkAudienceDisallowedReason.UserNotOnTeam})),i.push(new s.LinkAudienceOption({audience:"no_one",allowed:!0})),a&&"members"===a.shared_link_policy?i.map(e=>new s.LinkAudienceOption({audience:e.audience,allowed:!1,disallowed_reason:s.LinkAudienceDisallowedReason.RestrictedBySharedFolder})):i},t.getSelectedAudience=function(e,t,s,a,n,r){return t||(s?(0,i.getAudienceForLink)(s.link_permissions):e?o(a,n,r):"no_one")}})),define("metaserver/static/js/sharing/views/share_modal_evolution/utils/context",["require","exports","tslib","react"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareModalEvolutionContextProvider=t.ShareModalEvolutionContext=void 0,a=s.__importDefault(a),t.ShareModalEvolutionContext=a.default.createContext({logEvent:()=>{},experiments:{}});t.ShareModalEvolutionContextProvider=e=>{const s=a.default.useMemo(()=>({logEvent:e.logEvent,experiments:e.experiments}),[e.logEvent,e.experiments]);return a.default.createElement(t.ShareModalEvolutionContext.Provider,{value:s},e.children)},t.ShareModalEvolutionContextProvider.displayName="ShareModalEvolutionContextProvider"})),define("metaserver/static/js/sharing/views/share_modal_evolution/utils/strings",["require","exports","metaserver/static/js/core/i18n"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SUBTITLE_WITH_PERMISSIONS_FILE=t.SUBTITLE_WITH_PERMISSIONS_FOLDER=t.TITLE_WITH_PERMISSIONS=t.SUBTITLE_NO_PERMISSIONS=t.TITLE_NO_PERMISSIONS=void 0,t.TITLE_NO_PERMISSIONS=s.intl.formatMessage({id:"XURAv9",defaultMessage:"Can't manage people with access"}),t.SUBTITLE_NO_PERMISSIONS=s.intl.formatMessage({id:"e0jVSh",defaultMessage:"This folder contains subfolders that you don't own."}),t.TITLE_WITH_PERMISSIONS=s.intl.formatMessage({id:"f7F1sF",defaultMessage:"Keep track of people and permissions"}),t.SUBTITLE_WITH_PERMISSIONS_FOLDER=s.intl.formatMessage({id:"rgZZgG",defaultMessage:"When specific people are invited to this folder, they’ll be listed here."}),t.SUBTITLE_WITH_PERMISSIONS_FILE=s.intl.formatMessage({id:"7453qx",defaultMessage:"When specific people are invited to this file, they’ll be listed here."})})),define("metaserver/static/js/sharing/views/share_modal_evolution/utils/experiments",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getReceiverRedCarpetVariant=void 0;t.getReceiverRedCarpetVariant=e=>{const t=e.getSharingInfo();return t&&t.sharingPrefs?t.sharingPrefs().core_act_receiver_red_carpet_variant:"OFF"}})),define("metaserver/static/js/sharing/views/inherited_members",["require","exports","tslib","classnames","react","metaserver/static/js/clean/em_string","metaserver/static/js/clean/ui/snackbar","metaserver/static/js/clean/ui/sprite","metaserver/static/js/sharing/api/types/metadata","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/sharing/views/inherited_members_helpers","metaserver/static/js/clean/web_user_action_logger","metaserver/static/js/clean/web_user_action_events","metaserver/static/js/core/i18n","typescript/libraries/spectrum-content-icon-compatibility/src/index","spectrum/button/index","spectrum/modal/index","metaserver/static/js/sharing/ui_notifications_util"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u,m,h,g,_,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SingleInheritedUserAccessChangeModal=t.SetInheritedMembersUIConfidentialModal=t.InheritedMembers=void 0,a=s.__importDefault(a),i=s.__importDefault(i),f=s.__importStar(f);class E extends i.default.Component{constructor(e){super(e),this.onToggleShowMemberList=()=>{0!==this.props.members.length&&this.setState({areMembersExpanded:!this.state.areMembersExpanded})},this.handleToggleInheritanceClick=e=>{this.props.actionHandler.handleSetConfidentialClick(!1,this.props.ownerTeamName)},this.state={areMembersExpanded:!1}}renderMembersList(){return this.state.areMembersExpanded?i.default.createElement("div",null,i.default.createElement("div",{className:"u-mar-top-xs u-mar-horizontal-xs u-pad-top-xs inherited-member-list__divider"}),i.default.createElement("div",null,i.default.createElement("ul",{className:"u-pad-horizontal-s u-pad-vertical-xs inherited-member-list__member"},this.props.children))):void 0}renderRemoveButton(){return this.props.canUpdateConfidentiality?i.default.createElement(g.Button,{className:"inherited-member-list__remove-button button-as-link",onClick:this.handleToggleInheritanceClick,variant:"styleless"},m.intl.formatMessage({id:"aPhz2c",defaultMessage:"Remove"})):void 0}renderTriangle(){return 0===this.props.members.length?i.default.createElement("div",{className:"u-pad-horizontal-xs"}):i.default.createElement(g.Button,{className:"u-pad-horizontal-xxs o-flag__fix inherited-member-list__triangle button-as-link",onClick:this.onToggleShowMemberList,variant:"styleless"},i.default.createElement(o.Sprite,{alt:m.intl.formatMessage({id:"Bcpu+z",defaultMessage:"Toggle whether inherited members are displayed or hidden"}),group:"web",name:this.state.areMembersExpanded?"triangle_open_1x":"triangle_closed_1x"}))}render(){const e=this.props.actionHandler.getSharingInfo().parentFolderName(),t=""===e?m.intl.formatMessage({id:"6fi/fQ",defaultMessage:"Everyone at {team_name}"},{team_name:n.Emstring.em_snippet(this.props.ownerTeamName,c.SNIPPET_SIZES.DISPLAY_NAME)}):m.intl.formatMessage({id:"U5hJI+",defaultMessage:"People with access to “{folder_name}” folder"},{folder_name:n.Emstring.em_snippet(e,c.SNIPPET_SIZES.FILENAME)});let s=0,r=null;this.props.memberCounts&&(r=this.props.contentInfo.isSharedFolder()?this.props.memberCounts.total_unique_inherited_members:this.props.memberCounts.total_unique_users),null!=r&&0!==r?s=r:this.props.members.forEach(e=>{e instanceof l.GroupMembershipInfo?s+=e.member_count:s++});const o=m.intl.formatMessage({id:"ECZFz/",defaultMessage:"{count, plural, one{{count} member} other{{count} members}}"},{count:s}),d=(0,a.default)([{"u-mar-bottom-xs":!0,"inherited-member-list__outer-expanded":this.state.areMembersExpanded,"inherited-member-list__outer-closed":!this.state.areMembersExpanded,"inherited-member-list__outer-spectrum":!0}]),p=(0,a.default)([{"inherited-member-list__inner":!this.state.areMembersExpanded}]);return i.default.createElement("div",{className:d},i.default.createElement("div",{className:p},i.default.createElement("div",{className:"o-flag inherited-member-list__toggle-show-member",onClick:this.onToggleShowMemberList},this.renderTriangle(),i.default.createElement("div",{className:"o-flag__flex u-pad-vertical-xs u-pad-right-s"},i.default.createElement("div",{className:"o-flag"},i.default.createElement("div",{className:"o-flag__fix"},i.default.createElement(h.IconContent,{name:"folder_shared-small"})),i.default.createElement("div",{className:"o-flag__flex u-pad-left-s"},i.default.createElement("div",{className:"inherited-member-list__member-str u-font-strong"},t),i.default.createElement("div",{className:"inherited-member-list__member-count-str u-font-meta"},o)),i.default.createElement("div",{className:"o-flag__fix u-pad-right-xxs"},this.renderRemoveButton())))),i.default.createElement("div",null,this.renderMembersList())))}}t.InheritedMembers=E,E.displayName="InheritedMembers";class S extends i.default.Component{constructor(e){super(e),this._onToggleConfidentialFolderFalse=()=>{this._onToggleConfidentialFolder(!1)},this.state={isAccepting:!1};const t=e.actionHandler.getSharingInfo().displayPath(),s=e.actionHandler.getSharingInfo().parentFolderName();this.contentGenerator=new d.SetInheritedMembersUIConfidentialModalContentGenerator(e.initialIsConfidentialFolder,t,e.teamName,s)}_onToggleConfidentialFolder(e){const t=!e,s=e===this.props.initialIsConfidentialFolder;e||this.setState({isAccepting:!0});const{actionHandler:a,contentInfo:n}=this.props;r.Snackbar.sync(this.contentGenerator.syncSnackMessage(s),!0,"share-folder-notification");const o=n.isSharedFolder();return a.handleSetConfidential(s).then(e=>{a.fetchDataAndShowShareModal(),s&&p.WebUserActionLog.log(this.props.userId,t?u.WebUserActionLogEvent.CONF_BY_MANAGE_ACCESS:u.WebUserActionLogEvent.CONF_BY_UNDO_AFTER_RESTORE_ACCESS,{ns_id:e.shared_folder_id,original_folder_type:o?u.WebUserActionLogExtraValue.SHARED_FOLDER:u.WebUserActionLogExtraValue.FILE_FOLDER})}).then(()=>{const e=this.contentGenerator.completeSnackMessage(s);t?r.Snackbar.show(i.default.createElement(r.Snackbar,{title:e,timeoutDelayMs:1e4,actionButtonText:m.intl.formatMessage({id:"OfxyEk",defaultMessage:"Undo"}),onActionClick:()=>this._onToggleConfidentialFolder(!0),closeButtonText:m.intl.formatMessage({id:"u/p3Pl",defaultMessage:"Close"}),variant:"complete",id:"share-folder-notification"})):r.Snackbar.complete(e,"share-folder-notification")}).catch(e=>(0,d.handleApiError)(e,this.contentGenerator.failSnackMessage(s),()=>this.setState({isAccepting:!1}),"share-folder-notification"))}render(){return i.default.createElement(_.UtilityModal,{ariaLabel:this.contentGenerator.getTitleContent(),title:this.contentGenerator.getTitleContent(),overlayClickClose:!0,primaryAction:this.contentGenerator.getActionString(),secondaryAction:m.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"}),onPrimaryAction:this._onToggleConfidentialFolderFalse,onSecondaryAction:this.props.onCancel,open:!0,onRequestClose:this.props.onCancel,overlayClassName:"file-viewer-modal-overlay"},this.contentGenerator.getBodyContent())}}t.SetInheritedMembersUIConfidentialModal=S,S.displayName="SetInheritedMembersUIConfidentialModal";class b extends i.default.Component{constructor(e){super(e),this.actionCompleteCallback=()=>{const{actionHandler:e}=this.props;f.sharingNotificationSuccess(this.contentGenerator.getSnackBarCompleteString()),this.setState({removing:!1}),e.fetchDataAndShowShareModal()},this.removeTheSelectedMember=()=>{const{member:e,actionHandler:t,isUserSelf:s}=this.props,a=t.getContentInfo().id;return s?t.relinquishMembershipSimple(a,!1):t.removeMemberSimple(a,e.memberId(),!1)},this.changeAccessOfSelectedMember=()=>{const{newAccessLevel:e,actionHandler:t,member:s}=this.props,a=e;return t.changeMemberAccessSimple(t.getContentInfo().id,s.memberId(),a)},this.changeConfidentialAccess=()=>{const{actionHandler:e,userId:t,isSharedFolder:s,isDowngrading:a}=this.props;this.setState({removing:!0});return e.shareIfFileFolder(this.contentGenerator.getSnackBarRemovingString()).then(()=>e.handleSetConfidential(!0,!0).then(()=>this.logWebUserAction(t,a,e.getContentInfo().id,s))).then(()=>a?this.changeAccessOfSelectedMember():this.removeTheSelectedMember()).then(this.actionCompleteCallback).catch(e=>(0,d.handleApiError)(e,this.contentGenerator.getSnackBarFailString(),()=>this.setState({removing:!1})))},this.state={removing:!1};const{member:t,teamName:s,parentFolderName:a,currentFolderName:i,isDowngrading:n,isUserSelf:r}=this.props;this.contentGenerator=new d.SingleInheritedUserAccessChangeModalContentGenerator(n,s,a,i,t.displayName()||"",t instanceof l.GroupMembershipInfo,r)}render(){return i.default.createElement(_.UtilityModal,{ariaLabel:this.contentGenerator.getConfirmModalTitleString(),title:this.contentGenerator.getConfirmModalTitleString(),overlayClickClose:!0,primaryAction:this.contentGenerator.getButtonText(),secondaryAction:m.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"}),onPrimaryAction:this.changeConfidentialAccess,onSecondaryAction:this.props.actionHandler.openShareModal,open:!0,onRequestClose:this.props.actionHandler.openShareModal,overlayClassName:"file-viewer-modal-overlay"},this.renderBody())}renderBody(){return i.default.createElement("div",null,i.default.createElement("div",{className:"confirmation-modal__content"},this.contentGenerator.getConfirmModalContent()),i.default.createElement("br",null))}logWebUserAction(e,t,s,a){p.WebUserActionLog.log(e,t?u.WebUserActionLogEvent.CONF_BY_DOWNGRADE_MEMBER:u.WebUserActionLogEvent.CONF_BY_REMOVE_MEMBER,{ns_id:s,original_folder_type:a?u.WebUserActionLogExtraValue.SHARED_FOLDER:u.WebUserActionLogExtraValue.FILE_FOLDER})}}t.SingleInheritedUserAccessChangeModal=b,b.displayName="SingleInheritedUserAccessChangeModal"})),define("metaserver/static/js/sharing/views/inherited_members_helpers",["require","exports","tslib","react","react-intl","metaserver/static/js/api_v2/error","metaserver/static/js/clean/em_string","js/filepath/filepath","metaserver/static/js/components/ui/modal","metaserver/static/js/clean/ui/snackbar","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/core/i18n","metaserver/static/js/core/notify"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SingleInheritedUserAccessChangeModalContentGenerator=t.SetInheritedMembersUIConfidentialModalContentGenerator=t.handleApiError=void 0,a=s.__importDefault(a),o=s.__importStar(o);t.handleApiError=(e,t,s,a)=>{(0,n.catchApiError)(()=>(s&&s(),c.Snackbar.close(a),e instanceof n.ServerError?c.Snackbar.fail(t):l.Modal.close(),u.Notify.error(e.message||p.intl.formatMessage({id:"EQfnGr",defaultMessage:"We were unable to complete your request."})),e))(e)};t.SetInheritedMembersUIConfidentialModalContentGenerator=class{constructor(e,t,s,a){this.initialIsConfidentialFolder=e,this.teamName=s,this.folderName=o.filename(t),this.parentFolderName=a,this.topMostLevelFolder=""===a,this.folderSnippet=r.Emstring.em_snippet(this.folderName,15),this.parentFolderSnippet=r.Emstring.em_snippet(this.parentFolderName,15),this.teamSnippet=r.Emstring.em_snippet(this.teamName,d.SNIPPET_SIZES.DISPLAY_NAME)}getActionString(){const e=r.Emstring.em_snippet(this.teamName,d.SNIPPET_SIZES.DISPLAY_NAME),t=this.topMostLevelFolder?p.intl.formatMessage({id:"xbrdNQ",defaultMessage:"Share with {team_name}"},{team_name:e}):p.intl.formatMessage({id:"CcpVyl",defaultMessage:"Share"});return this.initialIsConfidentialFolder?t:p.intl.formatMessage({id:"6WOQfa",defaultMessage:"Remove"})}getTitleContent(){let e;return e=this.initialIsConfidentialFolder?this.topMostLevelFolder?p.intl.formatMessage({id:"XmdmiQ",defaultMessage:"Share “{folder_name}” with everyone at {team_name}?"},{folder_name:this.folderSnippet,team_name:this.teamSnippet}):p.intl.formatMessage({id:"o2uL8S",defaultMessage:"Share “{folder_name}” with everyone who can access “{parent_folder_name}”?"},{folder_name:this.folderSnippet,parent_folder_name:this.parentFolderSnippet}):this.topMostLevelFolder?p.intl.formatMessage({id:"fYJ2Zy",defaultMessage:"Remove members of {team_name}?"},{team_name:this.teamSnippet}):p.intl.formatMessage({id:"qioX4z",defaultMessage:"Remove members of “{folder_name}” folder?"},{folder_name:this.parentFolderSnippet}),e}getBodyContent(){let e;return e=this.initialIsConfidentialFolder?this.topMostLevelFolder?p.intl.formatMessage({id:"+yGlTj",defaultMessage:"<strong>{folder_name}</strong> won’t be shared privately any more. Everyone at {team_name} will have access to this folder."},{team_name:this.teamSnippet,folder_name:this.folderSnippet,strong:e=>a.default.createElement("strong",{style:{fontWeight:500}},e)}):p.intl.formatMessage({id:"qc2+KU",defaultMessage:"Everyone who can access <strong>{parent_folder_name}</strong> will be able to access this folder."},{parent_folder_name:this.parentFolderSnippet,strong:e=>a.default.createElement("strong",{style:{fontWeight:500}},e)}):this.topMostLevelFolder?p.intl.formatMessage({id:"EFGwFd",defaultMessage:"Members of {team_name} won’t be able to access <strong>{folder_name}</strong>."},{team_name:this.teamSnippet,folder_name:this.folderSnippet,strong:e=>a.default.createElement("strong",{style:{fontWeight:500}},e)}):p.intl.formatMessage({id:"8x9N0T",defaultMessage:"Members of <strong>{parent_folder_name}</strong> folder won’t be able to access <strong>{folder_name}</strong>."},{parent_folder_name:this.parentFolderSnippet,folder_name:this.folderSnippet,strong:e=>a.default.createElement("strong",{style:{fontWeight:500}},e)}),a.default.createElement("div",null,a.default.createElement("div",{className:"confirmation-modal__content"},e),a.default.createElement("br",null))}syncSnackMessage(e){return e?p.intl.formatMessage({id:"YFmCHZ",defaultMessage:"Removing members from <strong>{folder_name}</strong>…"},{folder_name:this.folderSnippet,strong:e=>a.default.createElement("strong",{style:{fontWeight:500}},e)}):this.topMostLevelFolder?p.intl.formatMessage({id:"4xzuPe",defaultMessage:"Sharing <strong>{folder_name}</strong> with everyone…"},{folder_name:this.folderSnippet,strong:e=>a.default.createElement("strong",{style:{fontWeight:500}},e)}):p.intl.formatMessage({id:"DI9fEf",defaultMessage:"Sharing <strong>{folder_name}</strong> with members of <strong>{parent_folder_name}</strong>…"},{folder_name:this.folderSnippet,parent_folder_name:this.parentFolderSnippet,strong:e=>a.default.createElement("strong",{style:{fontWeight:500}},e)})}completeSnackMessage(e){return e?p.intl.formatMessage({id:"r445sC",defaultMessage:"Members removed from <strong>{folder_name}</strong>."},{folder_name:this.folderSnippet,strong:e=>a.default.createElement("strong",{style:{fontWeight:500}},e)}):this.topMostLevelFolder?p.intl.formatMessage({id:"a5EQjJ",defaultMessage:"<strong>{folder_name}</strong> shared with everyone."},{folder_name:this.folderSnippet,strong:e=>a.default.createElement("strong",{style:{fontWeight:500}},e)}):p.intl.formatMessage({id:"67McYW",defaultMessage:"<strong>{folder_name}</strong> shared with members of <strong>{parent_folder_name}</strong>."},{folder_name:this.folderSnippet,parent_folder_name:this.parentFolderSnippet,strong:e=>a.default.createElement("strong",{style:{fontWeight:500}},e)})}failSnackMessage(e){return e?p.intl.formatMessage({id:"otsE6R",defaultMessage:"Too many members to restrict access. Try adding specific people to a new folder."}):p.intl.formatMessage({id:"Z4c55e",defaultMessage:"Couldn’t share folder. Try sharing again."})}};t.SingleInheritedUserAccessChangeModalContentGenerator=class{constructor(e,t,s,n,r,o,l){this.getButtonText=()=>this.isDowngrading?p.intl.formatMessage({id:"/sfVvH",defaultMessage:"Change access"}):this.isTsdPlusOne?p.intl.formatMessage({id:"g7vg1d",defaultMessage:"Remove everyone"}):p.intl.formatMessage({id:"6WOQfa",defaultMessage:"Remove"}),this.getConfirmModalTitleString=()=>this.isRelinquishment?p.intl.formatMessage({id:"amnrJj",defaultMessage:"Remove yourself from “{parent_folder}”?"},{parent_folder:this.parentFolderName}):this.isDowngrading?p.intl.formatMessage({id:"x01mJ5",defaultMessage:"Change how members can access “{current_folder}”?"},{current_folder:this.currentFolderName}):this.isTsdPlusOne?p.intl.formatMessage({id:"sSJ+PD",defaultMessage:"Remove everyone at {team_name}?"},{team_name:this.teamName}):p.intl.formatMessage({id:"F23jdQ",defaultMessage:"Remove a member of “{parent_folder}”?"},{parent_folder:this.parentFolderName}),this.getConfirmModalTitle=()=>{const e={current_folder:this.currentFolderName,parent_folder:this.parentFolderName,team_name:this.teamName,b:e=>a.default.createElement("b",{style:{fontWeight:500}},e)};let t;return t=this.isRelinquishment?(0,i.defineMessage)({id:"ANxsmU",defaultMessage:"<b>Remove yourself from “{parent_folder}”?</b>"}):this.isDowngrading?(0,i.defineMessage)({id:"fG6HZx",defaultMessage:"<b>Change how members can access “{current_folder}”?</b>"}):this.isTsdPlusOne?(0,i.defineMessage)({id:"7gnJT/",defaultMessage:"<b>Remove everyone at {team_name}?</b>"}):(0,i.defineMessage)({id:"tAFtaB",defaultMessage:"<b>Remove a member of “{parent_folder}”?</b>"}),p.intl.formatMessage(t,e)},this.getConfirmModalContent=()=>{const e={member_name:this.memberName,parent_folder:this.parentFolderName,current_folder:this.currentFolderName,team_name:this.teamName,b:e=>a.default.createElement("b",{style:{fontWeight:500}},e),br:a.default.createElement("br",null)};let t;return t=this.isRelinquishment?(0,i.defineMessage)({id:"hfMe4J",defaultMessage:"You won’t be able to see future changes to this shared folder, and new members of <b>{parent_folder}</b> won’t have access to this folder automatically."}):this.isTsdPlusOne?this.isDowngrading?(0,i.defineMessage)({id:"xO44hJ",defaultMessage:"{member_name} will only be able to view this folder, and new {team_name} members won’t be able to access it automatically.{br}{br}To add more people to this folder in the future, you’ll need to invite them directly."}):(0,i.defineMessage)({id:"8bNVGs",defaultMessage:"{team_name} members won’t be able to see future changes to <b>{current_folder}</b> automatically.{br}{br}To give people access to this folder in the future, you’ll need to invite them directly."}):this.isDowngrading?(0,i.defineMessage)({id:"eo+uWg",defaultMessage:"{member_name} will only be able to view this folder, and new members of <b>{parent_folder}</b> won’t be able to access it automatically.{br}{br}To add more people to this folder in the future, you’ll need to invite them directly."}):(0,i.defineMessage)({id:"zDnrtL",defaultMessage:"{member_name} and new members of the <b>{parent_folder}</b> folder won’t be able to see future changes to this shared folder.{br}{br}To add more people to this folder in the future, you’ll need to invite them directly."}),p.intl.formatMessage(t,e)},this.getSnackBarRemovingString=()=>{const e={b:e=>a.default.createElement("b",{style:{fontWeight:500}},e),current_folder:this.currentFolderName},t=this.isDowngrading?(0,i.defineMessage)({id:"0Lmb+Y",defaultMessage:"Changing access for <b>{current_folder}</b>…"}):this.memberIsGroup?(0,i.defineMessage)({id:"hpOZFA",defaultMessage:"Removing members from <b>{current_folder}</b>…"}):(0,i.defineMessage)({id:"tbN3jw",defaultMessage:"Removing member from <b>{current_folder}</b>…"});return p.intl.formatMessage(t,e)},this.getSnackBarCompleteString=()=>{const e={b:e=>a.default.createElement("b",{style:{fontWeight:500}},e),current_folder:this.currentFolderName},t=this.isDowngrading?(0,i.defineMessage)({id:"srndH4",defaultMessage:"Access changed for <b>{current_folder}</b>."}):this.memberIsGroup?(0,i.defineMessage)({id:"bnI+zs",defaultMessage:"Members removed from <b>{current_folder}</b>."}):(0,i.defineMessage)({id:"GWzQpn",defaultMessage:"Member removed from <b>{current_folder}</b>."});return p.intl.formatMessage(t,e)},this.getSnackBarFailString=()=>this.isDowngrading?p.intl.formatMessage({id:"5Yzfj9",defaultMessage:"Couldn’t change access. Try changing access again."}):this.memberIsGroup?p.intl.formatMessage({id:"NCQATi",defaultMessage:"Couldn’t remove members. Try removing them again."}):p.intl.formatMessage({id:"jHXRss",defaultMessage:"Couldn’t remove member. Try removing them again."}),this.isDowngrading=e,this.teamName=t,this.parentFolderName=s,this.currentFolderName=n,this.memberName=r,this.isTsdPlusOne=""===s,this.memberIsGroup=o,this.isRelinquishment=l}}})),define("metaserver/static/js/sharing/views/member_list",["require","exports","tslib","immutable","classnames","react","metaserver/static/js/sharing/access_level","metaserver/static/js/sharing/api/types/metadata","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/sharing/views/inherited_members","metaserver/static/js/sharing/views/member_list_item","metaserver/static/js/sharing/views/viewer_info","metaserver/static/js/sharing/ui_util","metaserver/static/js/clean/viewer","metaserver/static/js/core/i18n","metaserver/static/js/sharing/views/wrapped_group_viewers_maker","metaserver/static/js/pass/store","metaserver/static/js/integrations/data/store","react-redux","metaserver/static/js/sharing/ui_util","typescript/component_libraries/spectrum-sharing/src/utils/logging"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u,m,h,g,_,f,E,S,b){"use strict";var v;Object.defineProperty(t,"__esModule",{value:!0}),t.SharingMemberList=t.SecurityBannerType=void 0,i=s.__importDefault(i),n=s.__importDefault(n),(function(e){e[e.RemoveAccess=0]="RemoveAccess",e[e.DowngradeAccess=1]="DowngradeAccess"})(v=t.SecurityBannerType||(t.SecurityBannerType={}));class M extends n.default.Component{constructor(){super(...arguments),this.renderMembersListItem=(e,t,s)=>{const a=e.memberKey(),i=this.isLinkVisitor(e,t),o=this.props.groupSeenStateInfo[e.memberId()]?this.renderWrappedGroupViewersElement(e):void 0,c=this.props.canUpdateConfidentiality&&e.is_inherited,p=!!c||!this.props.contentInfo.isFileFolder()&&this.props.canRelinquishMembership;return n.default.createElement(d.SharingMemberListItem,{hasLinkMetadata:this.props.hasLinkMetadata,canInviteMembers:this.props.canInviteMembers,canRelinquishMembership:p,contentInfo:this.props.contentInfo,wrappedGroupViewersElement:o,isInheritedMember:s,isMemberActionPending:this.props.pendingMemberAction.has(a),isPresent:this.props.shouldShowPassUI&&this.isMemberCurrentlyViewing(e),key:a,member:e,user:this.props.user,onAccessChangeInBubbleMenu:t=>{const s=t===l.MEMBER_ACTION.REMOVE,a=t===l.MEMBER_ACTION.MANAGE_LINK_ACCESS,n=!s&&(0,r.isLowerAccess)(e.access_type,t),o=this.props.contentInfo.isSharedFolder()?e.inherited_access_type:e.access_type,d=s||n&&o&&(0,r.isLowerAccess)(o,t);if((s||n)&&this.props.onShowSecurityBanner){const e=s?v.RemoveAccess:v.DowngradeAccess;this.props.onShowSecurityBanner(e)}if(c&&d){const s=this.props.ownerTeamName,a={new_access:t,old_access:e.access_type,inherited_access:o};return(0,S.logTiburonEvent)(this.props.contentInfo,this.props.user.id,b.TiburonEventName.SelectChangeMemberPermission,a),this.props.actionHandler.handleInheritedMemberAccessChange(e,s,n,n?t:void 0)}if(a&&i){const t="writer"===e.access_type?"editor":"viewer",s={access_level:t};return(0,S.logTiburonEvent)(this.props.contentInfo,this.props.user.id,b.TiburonEventName.ClickManageAccess,s),this.props.actionHandler.handleLinkSettingsClick({isLinkOnly:!1,linkAccessLevel:t})}return this.props.actionHandler.handleMemberAccessChange(e,t)},isLinkVisitor:i})}}render(){const e=(0,u.makeMemberSortCmp)(this.props.user,this.props.presentAccountIds||(0,a.Set)(),this.shouldSortUsingPassRules()),t=this.membersByInheritance();let s=t.get(!1);s&&(s=s.sort(e));let i=t.get(!0);i&&(i=i.sort(e));let r=null;return this.props.areMembersFullyLoaded||(r=n.default.createElement("div",{className:"sharing-member-list__loading c-loader u-mar-horizontal-auto u-l-b"},h.intl.formatMessage({id:"A0CVFo",defaultMessage:"Loading more members..."}))),n.default.createElement(E.Provider,{store:(0,f.initStoreForIntegration)(this.props.user.id)},n.default.createElement("div",{className:"sharing-member-list"},this.renderInheritedUI(s,i),r))}shouldSortUsingPassRules(){const e=_.passStore.getPassPermissions(this.props.contentInfo.extras.fileId);return null!=e&&(e.canReadPresence||e.canReadSeenState)}renderInheritedUI(e,t){const s=(0,a.Set)(this.getLinkVisitors()),r=this.renderInheritedMembers(s,t);let o=null;e&&e.count()>0&&(o=n.default.createElement("div",null,e.map(e=>this.renderMembersListItem(e,s)).toArray()));const l=(0,i.default)({"o-list-ui":!0});return n.default.createElement("ul",{className:l},r,o)}renderInheritedMembers(e,t){const{isConfidentialFolder:s,ownerTeamName:a}=this.props;if(this.shouldShowInherited()&&a&&!s)return n.default.createElement(c.InheritedMembers,{actionHandler:this.props.actionHandler,canUpdateConfidentiality:this.props.canUpdateConfidentiality,contentInfo:this.props.contentInfo,memberCounts:this.props.memberCounts,members:t?t.toArray():[],ownerTeamName:a},t&&t.map(t=>this.renderMembersListItem(t,e,!0)))}getLinkVisitors(){return this.props.linkMembers.concat(this.props.guestMembers)}isLinkVisitor(e,t){return e instanceof o.UserMembershipInfo&&t.contains(e)}isMemberCurrentlyViewing(e){return!this.memberIsAssumed(e)&&(e instanceof o.UserMembershipInfo&&this.props.presentAccountIds&&this.props.presentAccountIds.has(e.account_id))}memberIsAssumed(e){return e instanceof o.UserMembershipInfo&&e.account_id===this.props.user.account_id&&m.Viewer.get_viewer().is_assume_user_session}dedupUsersAndLinkVisitors(e,t){let s=(0,a.Map)();return t.forEach(e=>{s=s.set(e.memberKey(),e)}),s.merge(e)}membersByInheritance(){const e=this.getLinkVisitors(),t=e=>this.shouldShowInherited()&&e.is_inherited,{membership:s}=this.props;if(!s)return e.length>0?(0,a.List)(e).groupBy(t):(0,a.Map)();const{groups:i,invitees:n,users:r}=s,o=this.dedupUsersAndLinkVisitors(r,e);return i.valueSeq().concat(n.valueSeq(),o.valueSeq()).groupBy(t)}shouldShowInherited(){const e=this.props.actionHandler.getSharingInfo(),t=!!e.parentSharedFolderId();return e.isUserOnOwnerTeam()&&t}extractGroupSeenStateAndViewers(e){const t=this.props.groupSeenStateInfo[e.memberId()];let s=[];return this.props.presentAccountIds&&(s=t.map(e=>new p.ViewerInfo(e)).filter(e=>null!=e.time_last_seen||this.props.presentAccountIds.has(e.account_id))),{singleGroupSeenStateInfo:t,viewers:s}}renderWrappedGroupViewersElement(e){const{viewers:t}=this.extractGroupSeenStateAndViewers(e);return t.length?g.WrappedGroupViewersMaker.make(t,this.props.presentAccountIds):{element:null,elementText:""}}}t.SharingMemberList=M,M.displayName="SharingMemberList",M.defaultProps={disabled:!1,groupSeenStateInfo:{},guestMembers:[],linkMembers:[]}})),define("metaserver/static/js/sharing/views/member_list_item",["require","exports","tslib","classnames","react","metaserver/static/js/avatar/avatar_with_default","metaserver/static/js/clean/em_string","metaserver/static/js/avatar/initials_avatar","metaserver/static/js/avatar/size","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/datetime/datetime","metaserver/static/js/pass/utils","metaserver/static/js/clean/ui/title_bubble","metaserver/static/js/sharing/share_modal_dropdown_util","metaserver/static/js/sharing/api/types/metadata","metaserver/static/js/clean/static_urls","metaserver/static/js/core/i18n","metaserver/static/js/core/user_i18n","typescript/component_libraries/spectrum-sharing/src/components/member_row/index","metaserver/static/js/sharing/access_level","metaserver/static/js/sharing/strings","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/integrations/profile_card_popover","metaserver/static/js/integrations/integration_popover","metaserver/static/js/integrations/data/store","react-redux","typescript/component_libraries/deep-integrations/src/async","spectrum/button/index","metaserver/static/js/integrations/data/selectors","metaserver/static/js/clean/ui/sticky_position"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u,m,h,g,_,f,E,S,b,v,M,T,y,C,I,k,A,L){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingMemberListItem=t.SharingMemberListItemElement=void 0,a=s.__importDefault(a),i=s.__importDefault(i),n=s.__importDefault(n),f=s.__importStar(f);class N extends i.default.Component{constructor(){super(...arguments),this.popoverGroup=new T.IntegrationPopoverGroup,this.onMemberRowChange=(e,t)=>{this.props.onAccessChangeInBubbleMenu(t)},this.openProfileCard=()=>{this.popoverRef&&this.popoverRef.openProfileCard()}}shouldLinkToGroup(){return this.props.member instanceof h.GroupMembershipInfo&&(!!this.props.member.same_team&&(!!this.props.user.is_team_admin||!!this.props.member.is_member&&this.props.member.group_management_type!==h.GroupManagementType.system_managed))}linkToGroup(e,t,s){const n=`/team#groups/${e.group_id}`,r=(0,a.default)({"u-font-meta":!s,"sharing-member-info__group-name-link":!0,"sharing-member-info__display-name-title":s});return i.default.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:r,title:e.group_name},t)}renderAvatar(e,t){const s=this.props.member.displayName()||"",a=this.getAvatarInitials(),r=t?"SQUARE":"CIRCLE",{member:c,user:d,contentInfo:u,isPresent:m,isProfileCardEnabled:g}=this.props,f=p.AnonymousViewerUtils.isAnonymousUserId(c.memberId())?c.memberId():s,E=i.default.createElement("div",{className:"o-flag__fix"},i.default.createElement(n.default,{dimension:l.AvatarSize.MEDIUM,photoUrl:e,shape:r,defaultAvatar:i.default.createElement(o.InitialsAvatarWithColorDerivedFromName,{dimension:l.AvatarSize.MEDIUM,shape:r,initials:a,name:f,alt:""})}));if(g){const t=(0,y.initStoreForIntegration)(this.props.user.id);let s,a;if(c instanceof h.GroupMembershipInfo){const e=c;let t="";this.shouldRenderGroupCount()&&(t=_.intl.formatMessage({id:"ECZFz/",defaultMessage:"{count, plural, one{{count} member} other{{count} members}}"},{count:c.member_count})),s={avatarType:"group",targetGroup:{gid:e.group_id,groupName:e.displayName(),message:t}}}else if(c instanceof h.InviteeMembershipInfo){const t=c;s={avatarType:"invited_person",targetUser:{accountId:t.contact,displayName:t.displayName(),familiarName:t.displayName(),accessType:b.ACCESS_NAME[t.access_type],email:t.contact,photoUrl:e||void 0}}}else if(c instanceof h.UserMembershipInfo){const t=c;s={avatarType:"joined_member",targetUser:{accountId:t.account_id,displayName:t.displayName()||t.email()||"",familiarName:t.displayName(),accessType:b.ACCESS_NAME[t.access_type],isViewer:t.account_id===this.props.user.account_id,email:t.email(),photoUrl:e||void 0}},a=t.time_last_seen}const n={".tag":u.isFolder()?"folder":"file",id:(0,I.fulfilled)(u.idForLink()),name:u.name()};if(s)return i.default.createElement(M.ProfileCardPopover,{popoverRef:e=>this.popoverRef=e,popoverGroup:this.popoverGroup,integrationStore:t,avatarInfo:s,entryPoint:"share_sheet",file:this.props.hasLinkMetadata?n:void 0,seenState:m?this.getPresentText():this.getLastSeenText(a),viewerId:d.id,positioning:"right",upsellPositioning:"right",portalParentElement:document.querySelector("body")||void 0,maxCalendarEventsToRender:1,autoRePosition:!0},i.default.createElement(k.Button,{variant:"circular"},E))}return E}getDisplayName(e,t){let s;this.props.member.displayName()&&(s=this.props.member.displayName()),s=void 0!==s?s:"";let a=this.getLastSeenText(e);this.props.isPresent?a=this.getPresentText():e&&(a=this.getLastSeenText(e));const i=this.getDisabledMessage(t);let n=0,o=0;a&&(n=new r.Emstring(`  ·  ${a}`).length),i&&(o=new r.Emstring(`  ·  ${i}`).length);const l=c.SNIPPET_SIZES.DISPLAY_NAME-n-o,d=r.Emstring.em_snippet(s,l);return this.shouldLinkToGroup()&&!this.shouldRenderGroupCount()?this.linkToGroup(this.props.member,d,!0):d}getAvatarInitials(){const e=this.props.member.displayName()||"";return f.getInitials(e)}getPresentText(){return _.intl.formatMessage({id:"BMhlbR",defaultMessage:"Viewing now"})}getLastSeenText(e){let t="";return e&&(t=_.intl.formatMessage({id:"uIg+ju",defaultMessage:"Viewed {time_str}"},{time_str:(0,d.ago)(e)})),t}getDisabledMessage(e){let t="";return e&&e.disabled&&(t=_.intl.formatMessage({id:"RBvabN",defaultMessage:"Deleted"})),t}getOffTeamMessage(e){let t="";const s=e&&!e.email;return!this.props.user.is_team||this.props.member.same_team||s||(t=_.intl.formatMessage({id:"x48gqV",defaultMessage:"Outside your Dropbox team"})),t}getMemberDetails(e,t){let s;return e?s=this.shouldLinkToGroup()?this.linkToGroup(this.props.member,e,!1):e:t&&t.email&&t.email_verified&&(s=t.email),s}isAllowedToRelinquishMembership(){return this.props.member.memberId()===this.props.user.account_id&&this.props.canRelinquishMembership}getOptionGroup(){let e=[],t="";const s=b.ACCESS_NAME[this.props.member.access_type],a=(0,m.getMemberActionInfo)(this.isAllowedToRelinquishMembership());for(const s of a){const a=s[0],i=s[1];this.props.member.access_type===i.value&&(t=i.value);const n=this.getOptionGroupOption(a,i);n&&e.push(n)}const i=e.find(e=>e.apiId===v.MEMBER_ACTION.MANAGE_LINK_ACCESS);return i&&(e=[i]),{id:`optionGroup${this.props.member.memberId()}`,label:s,options:e,selectedApiId:t,enabled:!this.props.isMemberActionPending}}getOptionGroupOption(e,t){if(t.value===v.MEMBER_ACTION.MANAGE_LINK_ACCESS&&this.props.isLinkVisitor)return{apiId:t.value,label:t.title,tooltip:_.intl.formatMessage({id:"Ja6XYU",defaultMessage:"Change or remove their access in link settings"}),disabled:!1};if((0,m.shouldShowMemberAction)(e,t.value,this.props.member.access_type,this.props.member.permissions,this.isAllowedToRelinquishMembership())){const e=this.props.contentInfo.isFolder()?t.folder_description:t.file_description,s=t.value===v.MEMBER_ACTION.REMOVE?"red":t.value===S.ACCESS_LEVEL.READER?"border":"default";return{apiId:t.value,label:t.title,tooltip:e||"",variant:s}}}renderSeenStateInfo(e,t){const s=_.intl.formatDate(t,{day:"numeric",month:"short",year:"numeric"}),a=_.intl.formatTime(t,{hour:"numeric",minute:"numeric"});return i.default.createElement(u.TitleBubble,{content:i.default.createElement("div",null,s,a&&i.default.createElement("br",null),a),className:"timestamp-tooltip",children:i.default.createElement("span",null,e),position:L.StickyPosition.BOTTOM,isTargetPositionFixed:!0})}shouldRenderGroupCount(){return this.props.member instanceof h.GroupMembershipInfo&&this.props.member.member_count}render(){const{member:e}=this.props;let t,s,a=void 0,n=!1,r=void 0,o=void 0,l="";if(e instanceof h.UserMembershipInfo){if(l=e.account_id,a=e.account,!a)return null;r=a.profile_photo_url,t=e.time_last_seen}else e instanceof h.GroupMembershipInfo&&(l=e.group_id,n=!0,"team"===e.group_type&&(r=(0,g.static_url)("/static/metaserver/static/images/icons/team_24@2x-vflR8kGKs.png")),this.shouldRenderGroupCount()&&(o=_.intl.formatMessage({id:"ECZFz/",defaultMessage:"{count, plural, one{{count} member} other{{count} members}}"},{count:e.member_count})));return this.props.wrappedGroupViewersElement&&this.props.wrappedGroupViewersElement.element?s=this.props.wrappedGroupViewersElement.element:this.props.isPresent?s=this.getPresentText():t&&(s=this.renderSeenStateInfo(this.getLastSeenText(t),t)),i.default.createElement(E.MemberRow,{id:l,avatarUrl:r||"",avatarElement:this.renderAvatar(r,n),initialAvatarShape:n?"square":"circle",displayName:this.getDisplayName(t,a),userDisabled:null==a?void 0:a.disabled,disabledMessage:this.getDisabledMessage(a),description:this.getMemberDetails(o,a),passString:s,offTeamMessage:this.getOffTeamMessage(a),present:this.props.isPresent,initials:this.getAvatarInitials(),loadingSpinnerVisible:this.props.isMemberActionPending,optionGroup:this.getOptionGroup(),onChange:this.onMemberRowChange,variant:this.props.isInheritedMember?"borderless":"default",onClickDetails:this.props.isProfileCardEnabled?this.openProfileCard:void 0,onClickDisplayName:this.props.isProfileCardEnabled?this.openProfileCard:void 0})}}t.SharingMemberListItemElement=N,N.displayName="SharingMemberListItemElement",N.defaultProps={canInviteMembers:!1,canRelinquishMembership:!1,disabled:!1,isPresent:!1,isViewOnly:!1},t.SharingMemberListItem=(0,C.connect)(e=>({isProfileCardEnabled:(0,A.isProfileCardInShareSheetEnabled)(e)}))(N)})),define("metaserver/static/js/sharing/views/modal_content_spectrum",["require","exports","tslib","metaserver/static/js/core/browser","classnames","react","metaserver/static/js/clean/analytics","metaserver/static/js/contacts/util","js/filepath/filepath","metaserver/static/js/clean/ui/bubble_dropdown_v2","metaserver/static/js/components/ui/css","ts-key-enum","metaserver/static/js/async/loadable","typescript/component_libraries/flows/src/components/auto-folder-setup-checkbox/index","metaserver/static/js/pass/constants","metaserver/static/js/sharing/ui_util","metaserver/static/js/sharing/gating_util","metaserver/static/js/sharing/content_manager","metaserver/static/js/sharing/views/constants","metaserver/static/js/sharing/views/share_modal_header_section","metaserver/static/js/sharing/views/member_list","metaserver/static/js/sharing/views/share_modal_contacts_section","metaserver/static/js/sharing/views/share_modal_footer_link_section","metaserver/static/js/sharing/views/share_modal_pointer_mode","metaserver/static/js/clean/web_timing_logger","metaserver/static/js/sharing/views/share_modal/contacts_error_banner","metaserver/static/js/sharing/views/share_modal/sharing_modal_no_permissions_section","metaserver/static/js/core/i18n","typescript/component_libraries/spectrum-sharing/src/components/confidential_folder_section/index","metaserver/static/js/sharing/views/share_modal/inform_owner_update_section","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_banner/index","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_message_field/index","typescript/component_libraries/spectrum-sharing/src/components/scooter_loader/index","typescript/component_libraries/spectrum-sharing/src/utils/logging","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/sharing/views/share_modal_evolution/share_modal_evolution","metaserver/static/js/sharing/access_level","metaserver/static/js/sharing/ui_util","metaserver/static/js/onboarding_checklist/api","metaserver/static/js/browse/data/store","metaserver/static/js/browse/data/selectors"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u,m,h,g,_,f,E,S,b,v,M,T,y,C,I,k,A,L,N,w,O,P,R,D,x,F,j,B,U){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MODES=t.ShareModalContentSpectrum=void 0,a=s.__importStar(a),i=s.__importDefault(i),n=s.__importDefault(n),o=s.__importDefault(o),l=s.__importStar(l),y=s.__importStar(y),Object.defineProperty(t,"MODES",{enumerable:!0,get:function(){return E.MODES}});const H=(0,u.Loadable)({loader:()=>new Promise((t,s)=>{e(["metaserver/static/js/sharing/views/comments_integrated_footer_section"],t,s)}).then(s.__importStar).then(({CommentsIntegratedFooterSection:e})=>e)});class G extends n.default.Component{constructor(){super(...arguments),this.afterLoad=()=>{this.hasPerformedAfterLoad=!0,this.props.user.is_team&&(0,j.updateTask)({type:{".tag":"share_file"},is_completed:!0})},this.isGoldenGateTeamOverLimit=()=>(0,g.shouldEnforceMemberLimits)(this.props.user,this.props.isTeamSharedFolder,this.props.isFolderInsideTeamFolderTree)&&(null!=this.props.memberCounts?this.props.memberCounts.total_unique_users:0)>=_.GoldenGate.SHARING_TOTAL_LIMIT,this.handleCheckChanged=e=>{this.props.actionHandler.changeCreateCommentCheckbox(e)},this.handleLogTiburonEvent=(e,t,s)=>{const{modalSessionId:a,origin:i}=this.props.contentInfo.extras;r.ShareTibEventLogger.log(t,e,i,Object.assign(Object.assign({},s),{modal_session_id:a}))},this.handleMessageChanged=e=>{this.props.actionHandler.changeRecipientMessage(e.target.value)},this.linkSectionProps=()=>({actionHandler:this.props.actionHandler,contentInfo:this.props.contentInfo,mode:this.props.mode,user:this.props.user,onLinkSettingsClick:this.props.onLinkSettingsClick,closeModalHandler:this.props.onModalCloseClick,isLinkMetadataLoaded:this.props.isLinkMetadataLoaded,isTeamSharedFolder:this.props.isTeamSharedFolder,canShareLink:this.props.canShareLink,permissions:this.props.sharingPermissions}),this._addEveryoneGroup=()=>this.contactsSection.addExternalContacts([o.default.teamGroupInfoToContact(this.props.teamGroupInfo)]),this.headerSectionProps=()=>({ref:this.setHeaderSectionRef,actionHandler:this.props.actionHandler,contentInfo:this.props.contentInfo,contentNameMessage:this.props.contentNameMessage,contentNameMessageLevel:this.props.contentNameMessageLevel,canEdit:this.props.canEdit,isTeamSharedFolder:this.props.isTeamSharedFolder,isFolderInsideTeamFolderTree:this.props.isFolderInsideTeamFolderTree,isInContentManager:this.props.isInContentManager,isConfidentialFolder:this.props.isConfidentialFolder,isContentNameFocused:this.props.isContentNameFocused,isCreatingNewFolder:this.props.isCreatingNewFolder,isMetadataLoaded:this.props.isMetadataLoaded,initialContentName:this.props.initialContentName,onModalCloseClick:this.props.onModalCloseClick,onSettingsButtonClick:this.props.onSettingsClick,onContentNameInputChange:this.handleContentNameInputChange,onContentNameInputKeyUp:this.handleContentNameInputKeyUp,ownerTeam:this.props.ownerTeam,sharingInfo:this.props.actionHandler.getSharingInfo(),showPassFileSettings:this.props.showPassFileSettings,user:this.props.user}),this.contactsSectionProps=()=>({ref:this.setContactsSectionRef,actionHandler:this.props.actionHandler,contentInfo:this.props.contentInfo,canInviteEditor:this.props.sharingPermissions.canInviteEditor(),canInviteViewer:this.props.sharingPermissions.canInviteViewer(),context:"spectrum",focusOnMount:this.props.focusOnMount&&this.props.contentInfo.pathExists(),initialTypeaheadTokens:this.getInitialTypeaheadTokens(),isFolderInsideTeamFolderTree:this.props.isFolderInsideTeamFolderTree,isInContentManager:this.props.isInContentManager,isTeamSharedFolder:this.props.isTeamSharedFolder,memberCountWithRecipients:this.props.memberCountWithRecipients,ownerTeam:this.props.ownerTeam,shouldLogContactSearch:!0,typeaheadPlaceholder:this.getTypeaheadPlaceholder(),user:this.props.user,showContactImport:!this.props.isTeamSharedFolder,teamGroupInfo:this.props.isTeamSharedFolder?this.props.teamGroupInfo:void 0}),this.handleContentNameInputChange=e=>{this.props.actionHandler.handleContentNameChange(e.currentTarget.value)},this.handleContentNameInputKeyUp=e=>{e.key===p.Key.Enter&&this.contactsSection&&this.contactsSection.focusTypeaheadInput()},this.handleShareButtonClick=t=>s.__awaiter(this,void 0,void 0,(function*(){const{actionHandler:a,recipientMessage:i,user:n}=this.props;if(this.props.isCreatingNewFolder)try{return yield a.setContentNameAndSendShare(this.contactsSection)}catch(e){this.headerSection.selectContentNameInput(),this.props.onSetContentNameAndSendShareFail&&this.props.onSetContentNameAndSendShareFail(e)}else{const r=i&&a.getSharingInfo().isShareMessageAsCommentChecked()&&!a.getSharingInfo().permissionsObj().canShareMessageAsComment(),o=r?yield this.extractUserContacts():[];if(yield a.sendShare(this.contactsSection),r)return new Promise((t,s)=>{e(["metaserver/static/js/sharing/actions/comments2_integration"],t,s)}).then(s.__importStar).then(({processAndDispatchAddCommentAction:e})=>{e(t,n,i,o)})}})),this.setContactsSectionRef=e=>{this.contactsSection=e},this.setHeaderSectionRef=e=>{this.headerSection=e}}componentDidMount(){this.hasPerformedAfterLoad=!1,this.logTTI()}componentDidUpdate(e,t){return this.logTTI()}logTTI(){if(this.props.contentInfo.extras.origin===R.SHARE_ACTION_ORIGIN_TYPE.GRANT_ACCESS&&this.props.mode!==E.MODES.LOADING&&y.mark_time_to_interactive(),this.props.mode===E.MODES.LINK_ONLY&&this.props.isLinkMetadataLoaded?this.props.actionHandler.logIfHaventBefore(P.TiburonEventName.ViewLinkOnlyModal,{link_only_reason:this.props.linkOnlyReason||"undefined"}):this.props.mode!==E.MODES.LOADING&&this.props.actionHandler.logIfHaventBefore(P.TiburonEventName.ViewShareModal),this.props.mode===E.MODES.LOADING||this.hasPerformedAfterLoad||this.afterLoad(),this.props.mode===E.MODES.MEMBERSHIP)return this.props.actionHandler.logIfHaventBefore(P.TiburonEventName.MemberListLoaded,{member_count:this.props.actionHandler.getSharingInfo().memberNum()})}render(){let e=`${this.props.mode}`;this.props.mode===E.MODES.MEMBERSHIP&&(this._shouldRenderMainMembershipMode()||(e="no-main-membership"));const t=(0,i.default)("unified-share-modal",`unified-share-modal--${e}`,"unified-share-modal--two-link",{"unified-share-modal--loading":e===E.MODES.LOADING,"unified-share-modal--auto-folder":this.shouldRenderAutoFolderCheckbox()});switch(this.props.mode){case E.MODES.LINK_ONLY:return n.default.createElement("div",{className:t},n.default.createElement(S.ShareModalHeaderSection,Object.assign({},this.headerSectionProps())),this.props.linkOnlyReason!==E.LINK_ONLY_REASON.LINKS_PAGE&&this.renderLinkOnlyNoPermissionSection(),this.renderLinkOnlyFooter());case E.MODES.POINTER:return n.default.createElement(T.ShareModalPointerMode,{className:t,sharingInfo:this.props.sharingInfo,onClickCloseButton:this.props.onModalCloseClick});case E.MODES.LOADING:return n.default.createElement("div",{className:t},n.default.createElement(S.ShareModalHeaderSection,Object.assign({},this.headerSectionProps(),{isLoading:!0})),this._renderMainLoading());case E.MODES.EVOLUTION:return n.default.createElement("div",{className:t},n.default.createElement(D.ShareModalEvolution,Object.assign({},this.shareModalEvolutionProps())));default:return n.default.createElement("div",{className:t},n.default.createElement(S.ShareModalHeaderSection,Object.assign({},this.headerSectionProps())),this._renderToSection(),n.default.createElement(C.ContactsErrorBanner,Object.assign({},this.props.contactsError)),this.shouldRenderConfidentialFolderSection()&&n.default.createElement(A.ConfidentialFolderSection,Object.assign({},this.confidentialFolderSectionProps())),this.shouldRenderInformOwnerUpdateSection()&&n.default.createElement(L.InformOwnerUpdateSection,null),this._renderMainSection(),this.shouldRenderAutoFolderCheckbox()&&n.default.createElement(m.AutoFolderSetupCheckbox,{automateOptionChecked:!!this.props.automationOptionChecked,onAutomationOptionToggle:this.props.actionHandler.toggleAutomationOption,intl:k.intl,inShareModal:!0}),this.shouldRenderFooterSection()&&this.renderFooterSection())}}_renderToSection(){return this.props.showContentManagerBridge?this._renderContentManagerBridge():this.props.sharingPermissions.canInvite()?this.isGoldenGateTeamOverLimit()?this._renderOverLimitSection():n.default.createElement(v.ShareModalContactsSection,Object.assign({},this.contactsSectionProps())):n.default.createElement(I.SharingModalNoPermissionsSection,Object.assign({},this.noPermissionsSectionProps()))}noPermissionsSectionProps(){return{isFolder:this.props.contentInfo.isFolder(),isTeamSharedFolder:this.props.isTeamSharedFolder,members:this.props.members,teamName:this.props.ownerTeam&&this.props.ownerTeam.name}}shouldRenderAutoFolderCheckbox(){const e=(0,B.getStoreForBrowse)(),{expFlowsCoreFolderSetupFlow:t}=(0,U.browsePostTTIExperiments)(e.getState()),s=this.props.sharingInfo.fqPath(),a=s?(0,U.flowsFolderRule)(e.getState(),s):void 0;return"INCLUDE_SHARING"===t&&!a}shouldRenderContentSettingsShareButton(){return this.props.contentInfo.isFolder()&&this.props.contentInfo.pathExists()||this.props.contentInfo.isFile()&&this.props.showPassFileSettings||this.inShareMode()||this.props.isInContentManager}inShareMode(){return[E.MODES.SHARE,E.MODES.SHARE_SENDING].includes(this.props.mode)}shouldRenderFooterSection(){return!!this.props.isMetadataLoaded&&(this.shouldRenderLinkRowInFooter()||this.shouldRenderContentSettingsShareButton())}renderFooterSection(){const e=(0,i.default)(["unified-share-modal__section","unified-share-modal__section--footer"]);return n.default.createElement("div",{className:e},this.shouldRenderLinkRowInFooter()?this.renderLinkRowContent():this.renderRegularFooterContent())}shareButtonProps(){return{mode:this.props.mode,contentInfo:this.props.contentInfo,contactsError:this.props.contactsError,contentNameMessage:this.props.contentNameMessage,isInContentManager:this.props.isInContentManager,isTeamSharedFolder:this.props.isTeamSharedFolder,isTokenizerEmpty:this.props.isTokenizerEmpty,onShareButtonClick:this.handleShareButtonClick,shareButtonLabelOverride:this.props.shareButtonLabelOverride}}renderRegularFooterContent(){return n.default.createElement(H,Object.assign({sharingInfo:this.props.sharingInfo,onCheckChanged:this.handleCheckChanged,hasRecipientMessage:this.props.recipientMessage.length>0},this.shareButtonProps()))}_shouldRenderMainMembershipMode(){return this.props.sharingPermissions.canInvite()||this._showSharingMemberList()}_renderMainSection(){switch(this.props.mode){case E.MODES.MEMBERSHIP:return this._shouldRenderMainMembershipMode()?this._renderMainMembership():null;case E.MODES.SHARE:case E.MODES.SHARE_SENDING:return this._renderMainShare();default:return null}}confidentialFolderSectionProps(){const{ownerTeam:e,contentInfo:t,actionHandler:s}=this.props;return{intl:k.intl,teamName:e?e.name:"",parentFolderName:s.getSharingInfo().parentFolderName(),isRestoreAccessEnabled:t.pathExists(),onRestoreAccessClick:s.handleSetConfidentialClick}}shouldRenderConfidentialFolderSection(){return this.props.isConfidentialFolder&&this.props.canUpdateConfidentiality}hasOwnersThatAreNotCurrentUser(){const e=this.props.members;return null!=e&&e.users.filter(e=>e.access_type===x.ACCESS_LEVEL.OWNER&&e.team_member_id!==this.props.user.team_member_id).size>0}shouldRenderInformOwnerUpdateSection(){return!!this.props.sharingInfo.metadata()&&(this.props.isInContentManager&&this.props.contentInfo.isFolder()&&!this.props.isTeamSharedFolder&&!this.props.isFolderInsideTeamFolderTree&&this.hasOwnersThatAreNotCurrentUser())}_renderContentManagerBridge(){const e=this.props.actionHandler.getSharingInfo(),t=l.parent_dir(e.displayPath()),s=e.name(),a=(0,f.genContentManagerBridgeUri)({containingFolder:t,filenameToSelect:s}),i=n.default.createElement("span",null,k.intl.formatMessage({id:"EpLafK",defaultMessage:"You can manage access in the <link>admin console</link>."},{link:e=>n.default.createElement("a",{href:a.toString(),target:"_blank",rel:"noreferrer"},e)}));return n.default.createElement(N.SharingModalBanner,{message:i})}_renderOverLimitSection(){const e=k.intl.formatMessage({id:"JSd+J1",defaultMessage:"This folder is over its {member_limit}-member limit."},{member_limit:_.GoldenGate.SHARING_TOTAL_LIMIT}),t=n.default.createElement("div",null,n.default.createElement("div",null,e),n.default.createElement("div",null,k.intl.formatMessage({id:"wFsjaI",defaultMessage:"Please remove some members."})," ",n.default.createElement("a",{href:"/help/9292",target:"_blank",rel:"noopener"},k.intl.formatMessage({id:"epmnB3",defaultMessage:"Learn more."}))));return n.default.createElement(N.SharingModalBanner,{message:t})}_renderMainLoading(){return n.default.createElement("div",{className:(0,i.default)(["unified-share-modal__main","unified-share-modal__section","unified-share-modal__section--no-border",this.shouldRenderFooterSection()?void 0:"unified-share-modal__main--no-footer-spectrum"])},n.default.createElement("div",{className:"unified-share-modal__loader-wrapper"},n.default.createElement("div",{className:"c-loader"},k.intl.formatMessage({id:"/DGYJM",defaultMessage:"Loading..."}))))}renderLinkOnlyFooter(){return n.default.createElement("div",{className:(0,i.default)(["unified-share-modal__section","unified-share-modal__section--footer"])},this.props.isLinkMetadataLoaded?this.renderLinkRowContent():this.renderLinkOnlyLoading())}renderLinkRowContent(){if(!this.props.isInContentManager)return n.default.createElement(M.ShareModalFooterLinkSection,Object.assign({},this.linkSectionProps()))}getLinkOnlyReasonMessage(){const e=this.props.sharingInfo.countsExceedNsLimit();switch(this.props.linkOnlyReason){case E.LINK_ONLY_REASON.INSIDE_SHARED_FOLDER:return n.default.createElement("span",null,k.intl.formatMessage({id:"vApw15",defaultMessage:"This folder can only be shared as a link because it’s in a shared folder."})," ",n.default.createElement("a",{href:"/help/1931",target:"_blank",rel:"noopener noreferrer"},k.intl.formatMessage({id:"bjsWDZ",defaultMessage:"Learn more"})));case E.LINK_ONLY_REASON.CONTAINS_SHARED_FOLDER:return n.default.createElement("span",null,k.intl.formatMessage({id:"0er2Ve",defaultMessage:"This folder can only be shared as a link because it contains a shared folder."})," ",n.default.createElement("a",{href:"/help/1931",target:"_blank",rel:"noopener noreferrer"},k.intl.formatMessage({id:"bjsWDZ",defaultMessage:"Learn more"})));case E.LINK_ONLY_REASON.TOTAL_MOUNTS_EXCEEDED:return n.default.createElement("div",{className:"scl-sharing-modal-banner--left"},n.default.createElement("b",null,(0,F.getLinkOnlyTitle)()),n.default.createElement("br",null),e?(0,F.getTotalMountsExceededLinkOnlyMsg)(e):(0,F.getTotalMountsExceededMsg)()," ",n.default.createElement("a",{href:"https://help.dropbox.com/files-folders/share/shared-folder-faq#cantcreate",target:"_blank",rel:"noopener noreferrer"},k.intl.formatMessage({id:"bjsWDZ",defaultMessage:"Learn more"})));case E.LINK_ONLY_REASON.HOME_MOUNTS_EXCEEDED:return n.default.createElement("div",{className:"scl-sharing-modal-banner--left"},n.default.createElement("b",null,(0,F.getLinkOnlyTitle)()),n.default.createElement("br",null),e?(0,F.getHomeMountsExceededLinkOnlyMsg)(e):(0,F.getHomeMountsExceededMsg)()," ",n.default.createElement("a",{href:"https://help.dropbox.com/files-folders/share/shared-folder-faq#cantcreate",target:"_blank",rel:"noopener noreferrer"},k.intl.formatMessage({id:"bjsWDZ",defaultMessage:"Learn more"})));case E.LINK_ONLY_REASON.TREE_SIZE_EXCEEDED:return n.default.createElement("div",{className:"scl-sharing-modal-banner--left"},n.default.createElement("b",null,(0,F.getLinkOnlyTitle)()),n.default.createElement("br",null),e?(0,F.getTreeSizeExceededLinkOnlyMsg)(e):(0,F.getTreeSizeExceededMsg)()," ",n.default.createElement("a",{href:"https://help.dropbox.com/files-folders/share/shared-folder-faq#cantcreate",target:"_blank",rel:"noopener noreferrer"},k.intl.formatMessage({id:"bjsWDZ",defaultMessage:"Learn more"})));default:return k.intl.formatMessage({id:"RSBaM6",defaultMessage:"This folder can only be shared as a link."})}}renderLinkOnlyNoPermissionSection(){let e;return e=this.props.actionHandler.getSharingInfo().isOSXPackage()?k.intl.formatMessage({id:"vJ3Igb",defaultMessage:"This package file can only be shared as a link."}):this.getLinkOnlyReasonMessage(),n.default.createElement(N.SharingModalBanner,{message:e})}renderLinkOnlyLoading(){return n.default.createElement("div",{className:"unified-share-modal__link-info--loading"},n.default.createElement(O.ScooterLoader,{"aria-label":k.intl.formatMessage({id:"qxfDnR",defaultMessage:"Loading..."})}))}_showSharingMemberList(){return!!this.props.sharingInfo.hasNonSelfMembers()||(this.props.isFolderInsideTeamFolderTree?1===this.props.members.users.size||!this.props.isConfidentialFolder:this.props.guestMembers.length>0||this.props.linkMembers.length>0)}_renderMemberList(){return n.default.createElement("div",{className:(0,i.default)(["unified-share-modal__section","unified-share-modal__section--no-padding","unified-share-modal__section--no-border"])},n.default.createElement(b.SharingMemberList,Object.assign({},this.memberListProps())))}shareModalEvolutionProps(){return{actionHandler:this.props.actionHandler,contactsError:this.props.contactsError,contentMetadata:this.props.metadata,currentScreen:this.props.currentScreen,currentTab:this.props.currentTab,isEmailSending:this.props.sharingInfo.uiMode()===E.MODES.SHARE_SENDING,handleMessageChanged:this.handleMessageChanged,initialTypeaheadTokens:this.getInitialTypeaheadTokens(),isFolder:this.props.contentInfo.isFolder(),isFolderInsideTeamFolderTree:this.props.isFolderInsideTeamFolderTree,isTeamSharedFolder:this.props.isTeamSharedFolder,isTokenizerEmpty:this.props.isTokenizerEmpty,logTiburonEvent:this.handleLogTiburonEvent,memberListProps:this.memberListProps(),onCloseButtonClick:this.props.onModalCloseClick,onSettingsButtonClick:this.props.onSettingsClick,onLinkSettingsTextClick:this.props.onLinkSettingsTextClick,ownerTeam:this.props.ownerTeam,recipientMessage:this.props.recipientMessage,sharingInfo:this.props.sharingInfo,showScreen:this.props.actionHandler.showScreen,user:this.props.user,guestMembers:this.props.guestMembers,linkMembers:this.props.linkMembers,showPassFileSettings:this.props.showPassFileSettings,showApproval:this.props.showApproval,sendApproval:this.props.sendApproval,needsAllApprovers:this.props.needsAllApprovers,creatingApprovalRequest:this.props.creatingApprovalRequest,docsendAnalyticsAddOnMetadata:this.props.docsendAnalyticsAddOnMetadata}}memberListProps(){return{actionHandler:this.props.actionHandler,areMembersFullyLoaded:this.props.areMembersFullyLoaded,canInviteMembers:this.props.sharingPermissions.canInvite(),hasLinkMetadata:this.props.isLinkMetadataLoaded,canRelinquishMembership:this.props.canRelinquishMembership,canUpdateConfidentiality:this.props.canUpdateConfidentiality,contentInfo:this.props.contentInfo,disabled:this.props.showContentManagerBridge,groupSeenStateInfo:this.props.groupSeenStateInfo,guestMembers:this.props.guestMembers,isConfidentialFolder:this.props.isConfidentialFolder,linkMembers:this.props.linkMembers,memberCounts:this.props.memberCounts,membership:this.props.members,ownerTeamName:this.props.ownerTeam?this.props.ownerTeam.name:void 0,pendingMemberAction:this.props.pendingMemberAction,presentAccountIds:this.props.presentAccountIds,shouldShowPassUI:this.props.isPassEnabled&&(0,h.fetchingStatusIsSuccessful)(this.props.passFetchingStatus),user:this.props.user}}_renderTeamSharedFolderBanner(){let e;return e=null!=this.props.teamGroupInfo?[n.default.createElement("p",{className:"u-mar-top-xxl"},n.default.createElement("a",{onClick:this._addEveryoneGroup},k.intl.formatMessage({id:"DnaiNC",defaultMessage:"Add everyone at {team_name}"},{team_name:this.props.ownerTeam.name}))),n.default.createElement("p",null,k.intl.formatMessage({id:"ix7pHj",defaultMessage:"Or, add groups to this team folder."})+" ",n.default.createElement("a",{onClick:this.props.onCreateGroupCallback},k.intl.formatMessage({id:"tthwuJ",defaultMessage:"Create a group"})))]:n.default.createElement("p",{className:"u-mar-top-xxl"},k.intl.formatMessage({id:"IjevGW",defaultMessage:"Add groups to this team folder."})+" ",n.default.createElement("a",{onClick:this.props.onCreateGroupCallback},k.intl.formatMessage({id:"tthwuJ",defaultMessage:"Create a group"}))),n.default.createElement("div",{className:(0,i.default)(["unified-share-modal__section","unified-share-modal__section--no-border"])},n.default.createElement("div",{className:(0,i.default)(["unified-share-modal__no-members-banner","u-font-center","u-font-meta","u-font-center","u-font-meta"])},e))}_renderMainMembership(){const e=(0,i.default)(["unified-share-modal__main",this._isPassInfoLoaded()?"unified-share-modal__main--pass-loaded":void 0]);return this._showSharingMemberList()?n.default.createElement("div",{className:e},this._renderMemberList()):this.props.isTeamSharedFolder?n.default.createElement("div",{className:e},this._renderTeamSharedFolderBanner()):n.default.createElement("div",{className:e},n.default.createElement(w.SharingModalMessageField,Object.assign({},this.messageFieldProps())))}messageFieldProps(){return{placeholder:k.intl.formatMessage({id:"LQgYei",defaultMessage:"Add a message (optional)"}),onChange:this.handleMessageChanged,value:this.props.recipientMessage}}_renderMainShare(){return n.default.createElement("div",{className:"unified-share-modal__main"},!this.props.isTeamSharedFolder&&n.default.createElement(w.SharingModalMessageField,Object.assign({},this.messageFieldProps())))}_isPassInfoLoaded(){return(0,h.fetchingStatusIsComplete)(this.props.passFetchingStatus)}shouldRenderLinkRowInFooter(){return this.props.mode!==E.MODES.SHARE&&this.props.mode!==E.MODES.SHARE_SENDING&&!this.props.isInContentManager}getInitialTypeaheadTokens(){const{recipientTokens:e,initialRecipientTokens:t}=this.props;return e?t.concat(e):t}getTypeaheadPlaceholder(){return this.props.isTeamSharedFolder?k.intl.formatMessage({id:"GLQxt4",defaultMessage:"Group names"}):this.props.user.is_team?k.intl.formatMessage({id:"BoLL3S",defaultMessage:"Email, name, or group"}):k.intl.formatMessage({id:"EUp7Eo",defaultMessage:"Email or name"})}extractUserContacts(){return s.__awaiter(this,void 0,void 0,(function*(){return yield this.props.actionHandler.recipientsChange(this.contactsSection.getContacts()),this.contactsSection.getContacts().filter(({dbx_account_id:e,email:t})=>void 0!==e||void 0!==t).map(({dbx_account_id:e,email:t,name:s})=>e?{accountId:e,displayName:s}:{email:t,displayName:s})}))}}G.displayName="ShareModalContentSpectrum",G.defaultProps={headerId:"unified-share-modal-title",initialRecipientTokens:[],isTeamSharedFolder:!1,mode:E.MODES.MEMBERSHIP,onFolderSettingsClick:null,guestMembers:[],linkMembers:[],onCreateGroupCallback:()=>{a.redirect("/team#groups/newgroup")}};const V=(0,d.requireCssWithComponent)(G,["/static/metaserver/static/css/spectrum/index.web-vflJy4G-t.css","/static/typescript/component_libraries/spectrum-sharing/src/index.web-vfl8iPiYL.css","/static/metaserver/static/css/react/contacts_tokenizer-vflR-o-P-.css","/static/metaserver/static/css/scooter/scooter-scoped-vflhkBqI_.css","/static/metaserver/static/css/sharing/share_modal-vfl2U4u2o.css","/static/metaserver/static/css/modal-vflf1hwfZ.css"],[c.BubbleDropdown]);t.ShareModalContentSpectrum=V})),define("metaserver/static/js/sharing/views/righteous_modal_link_info",["require","exports","tslib","metaserver/static/js/core/i18n","react","metaserver/static/js/sharing/views/constants","metaserver/static/js/clean/ui/util","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_link/index","typescript/component_libraries/spectrum-sharing/src/components/scooter_loader/index","spectrum/button/index","spectrum/icon_acl/index","spectrum/colorized_icon/index","metaserver/static/js/sharing/ui_notifications_util","metaserver/static/js/sharing/link_description","metaserver/static/js/sharing/views/share_modal/sharing_modal_upsell_premium_sharing","metaserver/static/js/sharing/ui_util","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","typescript/component_libraries/spectrum-sharing/src/utils/logging","typescript/component_libraries/spectrum-sharing/src/utils/logging","metaserver/static/js/sharing/views/share_modal_evolution/utils/logging","metaserver/static/js/clean/clipboard_v3"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u,m,h,g,_,f,E,S,b){"use strict";function v(e){const t=_.COLORS.COLOR_INK_60;switch(e){case"editor":return i.default.createElement(p.ColorizedIcon,{color:t},i.default.createElement(d.IconAcl,{name:"link-edit"}));default:return i.default.createElement(p.ColorizedIcon,{color:t},i.default.createElement(d.IconAcl,{name:"link-view"}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.RighteousModalLinkInfo=t.getSpectrumLinkIcon=void 0,i=s.__importDefault(i),a.intl.formatMessage({id:"tyzuDO",defaultMessage:"Link copied. Allows editing."}),a.intl.formatMessage({id:"6z63dh",defaultMessage:"Link copied. Allows viewing."}),t.getSpectrumLinkIcon=v;class M extends i.default.Component{constructor(e){super(e),this.copyLink=()=>{(0,b.copyToClipboard)(this.getLink(),()=>(this.props.modalClose(),(0,u.showCopyLinkSuccessSnackbar)(this.props.linkMetadata.url,this.props.linkAccessLevel)),(function(){(0,u.sharingNotificationError)(a.intl.formatMessage({id:"YHoriR",defaultMessage:"Unable to copy the link, please copy manually"}))}))},this.getSpectrumLinkText=e=>{switch(e){case"editor":return i.default.createElement("span",null,i.default.createElement("b",null,a.intl.formatMessage({id:"fE8Xhp",defaultMessage:"Can edit"})),i.default.createElement("br",null),this.renderLinkDescription());case"viewer":return i.default.createElement("span",null,i.default.createElement("b",null,a.intl.formatMessage({id:"ReyNxC",defaultMessage:"Can view"})),i.default.createElement("br",null),this.renderLinkDescription());default:return this.renderLinkDescription()}},this.getLink=()=>null!=this.props.linkMetadata?this.props.linkMetadata.url:"",this.getSpectrumNoLinkText=e=>{switch(e){case"editor":return i.default.createElement("span",null,i.default.createElement("b",null,a.intl.formatMessage({id:"fE8Xhp",defaultMessage:"Can edit"})),i.default.createElement("br",null),a.intl.formatMessage({id:"QfMy5I",defaultMessage:"No link created yet."}));case"viewer":return i.default.createElement("span",null,i.default.createElement("b",null,a.intl.formatMessage({id:"ReyNxC",defaultMessage:"Can view"})),i.default.createElement("br",null),a.intl.formatMessage({id:"QfMy5I",defaultMessage:"No link created yet."}));default:return a.intl.formatMessage({id:"le+3CZ",defaultMessage:"No link created yet"})}},this.onClickButtonCreateLink=()=>{this.setState({creatingLink:!0},()=>this.handleCreateLinkClicked())},this.handleCreateLinkClicked=()=>{this.props.actionHandler&&this.props.actionHandler.createSharedLink(this.props.linkAccessLevel)},this.getSpectrumLoadingText=e=>{switch(e){case"editor":return i.default.createElement("span",null,i.default.createElement("b",null,a.intl.formatMessage({id:"fE8Xhp",defaultMessage:"Can edit"})),i.default.createElement("br",null),a.intl.formatMessage({id:"d3Gvwr",defaultMessage:"Creating edit link..."}),i.default.createElement(l.ScooterLoader,null));case"viewer":return i.default.createElement("span",null,i.default.createElement("b",null,a.intl.formatMessage({id:"ReyNxC",defaultMessage:"Can view"})),i.default.createElement("br",null),a.intl.formatMessage({id:"rnuyM8",defaultMessage:"Creating view link..."}),i.default.createElement(l.ScooterLoader,null));default:return}},this.handleCopyLinkClicked=()=>{if(!this.state.showingUrl){const e={};if(this.props.linkMetadata){e.visibility=this.props.linkMetadata.link_permissions.resolved_visibility,e.expiration=this.props.linkMetadata.expires;const t=(0,S.getLinkKey)(this.props.linkMetadata.url);t.kind!==E.LinkKeyTypes.NONE&&(e[t.kind]=t.val,e.link_type=t.link_type)}this.props.contentInfo&&((0,g.logTiburonEvent)(this.props.contentInfo,this.props.user.id,f.TiburonEventName.ClickTibCopyLink,e),(0,g.logTiburonEvent)(this.props.contentInfo,this.props.user.id,f.TiburonEventName.CopySharedLink,e))}return(0,r.setStatePromise)(this,{showingUrl:!this.state.showingUrl,creatingLink:!1}).then(this.copyLink)},this.state={showingUrl:!1,creatingLink:!1}}getLinkabilityState(){const e=this.props.actionHandler&&this.props.actionHandler.getSharingInfo(),{permissions:t}=this.props;return e&&e.isCloudDoc()?this.getLinkabilityStateForCloudDoc():this.props.isTeamSharedFolder?n.LinkabilityStates.CANT_LINK_TEAM_FOLDER:(e.isFolder()||!e.isMetadataLoaded()||t.canCreateViewLink())&&(this.props.canShareLink||this.props.mode===n.MODES.LINK_ONLY)?n.LinkabilityStates.CAN_LINK:t.canInvite()?n.LinkabilityStates.INVITE_NO_LINK:n.LinkabilityStates.NO_INVITE_NO_LINK}getLinkabilityStateForCloudDoc(){const e=this.props.actionHandler&&this.props.actionHandler.getSharingInfo();return this.props.linkMetadata?n.LinkabilityStates.CAN_LINK:"editor"===this.props.linkAccessLevel&&e.permissionsObj().canCreateEditLink()?n.LinkabilityStates.CAN_LINK:"viewer"===this.props.linkAccessLevel&&e.permissionsObj().canCreateViewLink()?n.LinkabilityStates.CAN_LINK:n.LinkabilityStates.NO_INVITE_NO_LINK}spectrumClassNames(){return"scl-sharing-modal-footer-link--no-border"}render(){const e=this.props.actionHandler&&this.props.actionHandler.getSharingInfo(),t=this.getLinkabilityState();if(t===n.LinkabilityStates.NO_INVITE_NO_LINK)return this.renderSpectrumCantLinkOrShare();if(t===n.LinkabilityStates.INVITE_NO_LINK)return this.renderSpectrumCantLinkCDM();if(t===n.LinkabilityStates.CANT_LINK_TEAM_FOLDER)return this.renderSpectrumCantLinkTeamFolder();if(this.props.linkMetadata){let t;return t=this.state.showingUrl?this.renderSpectrumCopyLink():this.renderSpectrumLink(),i.default.createElement(i.default.Fragment,null,t,e.hasCreatedLink()&&this.renderUpsellPremiumSharing())}return this.state.creatingLink?i.default.createElement(i.default.Fragment,null,this.renderSpectrumLoading(),this.renderUpsellPremiumSharing()):t===n.LinkabilityStates.CAN_LINK?this.renderSpectrumNoLink():null}getSpectrumLinkNoAvailableCloudDocText(e){switch(e){case"editor":return i.default.createElement("span",null,i.default.createElement("b",null,a.intl.formatMessage({id:"fE8Xhp",defaultMessage:"Can edit"})),i.default.createElement("br",null),a.intl.formatMessage({id:"5tpMRl",defaultMessage:"Link not available"}));case"viewer":return i.default.createElement("span",null,i.default.createElement("b",null,a.intl.formatMessage({id:"ReyNxC",defaultMessage:"Can view"})),i.default.createElement("br",null),a.intl.formatMessage({id:"5tpMRl",defaultMessage:"Link not available"}));default:return a.intl.formatMessage({id:"5tpMRl",defaultMessage:"Link not available"})}}renderSpectrumCantLinkOrShare(){return i.default.createElement(o.SharingModalFooterLink,{className:this.spectrumClassNames(),icon:v(this.props.linkAccessLevel),body:this.getSpectrumLinkNoAvailableCloudDocText(this.props.linkAccessLevel)})}getSpectrumCantLinkCDMCloudDocText(e){switch(e){case"editor":return i.default.createElement("span",null,i.default.createElement("b",null,a.intl.formatMessage({id:"fE8Xhp",defaultMessage:"Can edit"})),i.default.createElement("br",null),a.intl.formatMessage({id:"3VVFir",defaultMessage:"Link not available. To share, invite specific people."}));case"viewer":return i.default.createElement("span",null,i.default.createElement("b",null,a.intl.formatMessage({id:"ReyNxC",defaultMessage:"Can view"})),i.default.createElement("br",null),a.intl.formatMessage({id:"3VVFir",defaultMessage:"Link not available. To share, invite specific people."}));default:return a.intl.formatMessage({id:"3VVFir",defaultMessage:"Link not available. To share, invite specific people."})}}renderSpectrumCantLinkCDM(){const e=i.default.createElement("a",{href:"/help/business/team-folders",target:"_blank",rel:"noopener noreferrer"},a.intl.formatMessage({id:"sGKSF8",defaultMessage:"Learn more"}));return i.default.createElement(o.SharingModalFooterLink,{className:this.spectrumClassNames(),icon:v(this.props.linkAccessLevel),body:this.getSpectrumCantLinkCDMCloudDocText(this.props.linkAccessLevel),actions:e})}renderSpectrumCantLinkTeamFolder(){const e=i.default.createElement("a",{href:"/help/business/team-folders",target:"_blank",rel:"noopener noreferrer"},a.intl.formatMessage({id:"sGKSF8",defaultMessage:"Learn more"}));return i.default.createElement(o.SharingModalFooterLink,{className:this.spectrumClassNames(),icon:v(this.props.linkAccessLevel),body:this.getSpectrumLinkNoAvailableCloudDocText(this.props.linkAccessLevel),actions:e})}renderLinkDescription(){let e;if(this.props.linkMetadata){const t=this.props.actionHandler&&this.props.actionHandler.getSharingInfo();e=(0,m.formatLinkDescriptionPlainText)(this.props.linkMetadata,t.isUserOnOwnerTeam(),!0)}return e}renderSpectrumLink(){const e=i.default.createElement("span",{className:"copy-link-button"},a.intl.formatMessage({id:"DhomU6",defaultMessage:"Copy link"}));return i.default.createElement(o.SharingModalFooterLink,{className:this.spectrumClassNames(),icon:v(this.props.linkAccessLevel),body:this.getSpectrumLinkText(this.props.linkAccessLevel),actions:i.default.createElement(c.Button,{className:"button-as-link copy-link-container",key:"copy",variant:"borderless",onClick:this.handleCopyLinkClicked},e)})}renderSpectrumCopyLink(){return i.default.createElement(o.SharingModalFooterLinkCopy,{className:this.spectrumClassNames(),icon:v(this.props.linkAccessLevel),sharedLinkUrl:this.getLink(),labelSharedLinkUrl:a.intl.formatMessage({id:"9s4M13",defaultMessage:"Shared link URL"}),textButton:a.intl.formatMessage({id:"CgREwE",defaultMessage:"Hide link"}),onClickButton:this.handleCopyLinkClicked})}renderSpectrumNoLink(){return i.default.createElement(o.SharingModalFooterLinkCreate,{className:this.spectrumClassNames(),icon:v(this.props.linkAccessLevel),statusNoLinkCreated:this.getSpectrumNoLinkText(this.props.linkAccessLevel),textButtonCreateLink:a.intl.formatMessage({id:"/nFZR2",defaultMessage:"Create link"}),onClickButtonCreateLink:this.onClickButtonCreateLink})}renderSpectrumLoading(){return i.default.createElement(o.SharingModalFooterLink,{className:this.spectrumClassNames(),icon:v(this.props.linkAccessLevel),body:this.getSpectrumLoadingText(this.props.linkAccessLevel)})}renderUpsellPremiumSharing(){const e=this.props.actionHandler&&this.props.actionHandler.getSharingInfo(),t=e=>{this.props.actionHandler&&this.props.actionHandler.setSeenUpsellCounterPref(e)};return e.isShareModalUpsellPremiumSharing()&&e.shareModalUpsellPremiumSharingVariant()&&!e.isCloudDoc()?i.default.createElement(h.SharingModalUpsellPremiumSharing,{user:this.props.user,contentInfo:this.props.contentInfo,variant:e.shareModalUpsellPremiumSharingVariant(),hasIncrementedCounter:e.hasIncrementedUpsellCounter(),hasSeenCounter:e.hasSeenUpsellCounter(),onSetSeenCounter:t}):void 0}}t.RighteousModalLinkInfo=M,M.displayName="RighteousModalLinkInfo"})),define("metaserver/static/js/sharing/views/share_modal_contacts_section",["require","exports","tslib","react","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_contacts_field/index","metaserver/static/js/sharing/access_level","metaserver/static/js/sharing/views/share_contacts_tokenizer","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/sharing/strings","metaserver/static/js/core/i18n"],(function(e,t,s,a,i,n,r,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareModalContactsSection=void 0,a=s.__importDefault(a);class d extends a.default.Component{constructor(e){super(e),this.finishLogging=e=>this.shareContactsTokenizerRef.finishLogging(e),this.setShareContactsTokenizerRef=e=>{this.shareContactsTokenizerRef=e},this.onTypeaheadTokensChange=e=>{this.setState({typeaheadTokens:e})},this.handleAccessTypeChange=e=>{this.props.actionHandler.changeRecipientAccess(e)},this.filterContacts=e=>this.props.isTeamSharedFolder?!!e.group_id:this.props.isInContentManager||e.email!==this.props.user.email,this.state={typeaheadTokens:[]}}getContacts(){return this.shareContactsTokenizerRef.getContacts()}focusTypeaheadInput(){return this.shareContactsTokenizerRef.focusTypeaheadInput()}addExternalContacts(e){return this.shareContactsTokenizerRef.addExternalContacts(e)}render(){const e=this.props.isTeamSharedFolder?c.intl.formatMessage({id:"aTEm56",defaultMessage:"Add groups:"}):c.intl.formatMessage({id:"bLfZ53",defaultMessage:"To:"}),t=c.intl.formatMessage({id:"CIbq3r",defaultMessage:"This file type can only be shared with view access"});return a.default.createElement(i.SharingModalContactsField,{contactsField:this.renderContactsField(),labelledAccessTypes:this.getAccessTypes(),onAccessTypeChange:this.handleAccessTypeChange,selectedAccessType:this.getSelectedAccessType(),toLabel:e,showNoEditTooltip:this.props.contentInfo.isFile()&&!this.props.canInviteEditor,noEditText:t})}getAccessTypes(){const e=[],t=e=>c.intl.formatMessage({id:"+f5spv",defaultMessage:"change permission for users to {label}"},{label:e}),s=l.ACCESS_NAME,a=this.props.contentInfo&&this.props.contentInfo.isFolder()?l.MEMBER_ACTION_FOLDER:this.props.actionHandler.getSharingInfo().isCloudDoc()?l.MEMBER_ACTION_CLOUD_DOC:l.MEMBER_ACTION_FILE;return this.props.canInviteEditor&&e.push({apiId:n.ACCESS_LEVEL.WRITER,ariaLabel:t(n.ACCESS_LEVEL.WRITER),label:s[n.ACCESS_LEVEL.WRITER],details:a[o.MEMBER_ACTION.MAKE_EDITOR]}),this.props.canInviteViewer&&e.push({apiId:n.ACCESS_LEVEL.READER,ariaLabel:t(n.ACCESS_LEVEL.READER),label:s[n.ACCESS_LEVEL.READER],details:a[o.MEMBER_ACTION.MAKE_VIEWER]}),e}getSelectedAccessType(){const e=this.props.actionHandler.getSharingInfo(),t=this.getAccessTypes();let s;for(const a of t)a.apiId===e.recipientAccess()&&(s=a);return s}renderContactsField(){return a.default.createElement(r.ShareContactsTokenizer,{ref:this.setShareContactsTokenizerRef,actionHandler:this.props.actionHandler,typeaheadTokens:this.state.typeaheadTokens,onTypeaheadTokensChange:this.onTypeaheadTokensChange,context:this.props.context,focusOnMount:this.props.focusOnMount,initialTypeaheadTokens:this.props.initialTypeaheadTokens,typeaheadPlaceholder:this.props.typeaheadPlaceholder,user:this.props.user,filterContacts:this.filterContacts,shouldLogContactSearch:this.props.shouldLogContactSearch,showContactImport:this.props.showContactImport,teamGroupInfo:this.props.teamGroupInfo})}}t.ShareModalContactsSection=d,d.displayName="ShareModalContactsSection"})),define("metaserver/static/js/sharing/views/share_contacts_tokenizer",["require","exports","tslib","react","metaserver/static/js/contacts/config","metaserver/static/js/clean/analytics","metaserver/static/js/clean/static_urls","metaserver/static/js/clean/ui/flag","metaserver/static/js/clean/ui/image","typescript/component_libraries/spectrum-sharing/src/components/sharing_contact_token/index","typescript/component_libraries/spectrum-sharing/src/utils/index","typescript/component_libraries/spectrum-sharing/src/components/member_row/index","spectrum/typeahead/index","metaserver/static/js/contacts/data_v2","metaserver/static/js/contacts/contact","metaserver/static/js/contacts/util","metaserver/static/js/profile_services/profile_services_constants","metaserver/static/js/profile_services/profile_services_link","metaserver/static/js/profile_services/popup_handler","metaserver/static/js/teams/admin/widgets/groups/util","metaserver/static/js/core/assert","metaserver/static/js/core/notify","metaserver/static/js/core/i18n","react-dom","metaserver/static/js/core/user_i18n","metaserver/static/js/sharing/ui_util"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u,m,h,g,_,f,E,S,b,v,M,T,y,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareContactsTokenizer=t.ThirdPartyImport=t.ExpandImport=void 0,a=s.__importStar(a),i=s.__importStar(i),g=s.__importDefault(g),_=s.__importDefault(_),T=s.__importStar(T),y=s.__importStar(y);const I=(0,d.ContactsTokenizer)(h.Contact);class k{constructor(){}getKey(){return"expand-importer"}}t.ExpandImport=k;class A{constructor({provider:e,connected:t}){this.provider=e,this.connected=t}getKey(){return`third-party-import${this.provider}`}}t.ThirdPartyImport=A;class L extends a.Component{constructor(e){super(e),this.updateRecipientData=()=>{this.props.actionHandler.recipientsChange(this.props.typeaheadTokens,this.typeaheadInput.value)},this.filterContacts=e=>this.props.filterContacts?this.props.filterContacts(e):e.email!==this.props.user.email,this.handleTypeaheadOnChange=e=>{const t=I.tokenizeDelimitedInputs(e);if(t.length>0)return this.validateAndAddTokens(t),void this.typeahead.setState({inputValue:""});this.showSuggestions(e),this.updateRecipientData()},this.handleExpandImport=()=>{this.tokenizeRawInput();const e=[];Array.from(_.default.importable_contact_services()).map(t=>{if(this.profile_services){const s=new A({provider:t,connected:this.profile_services.service_is_connected(t)});e.push(s)}}),this.setState({typeaheadSuggestions:e})},this.handleThirdPartyImport=e=>{let t;if((0,b.assert)((t=e.provider,Array.from(_.default.importable_contact_services()).includes(t)),`invalid party contact provider ${e.provider}`),!this.profile_services||!this.profile_services.service_is_connected(e.provider))return this.link_handler.auth_service_with_user(e.provider,this.props.user.id,e=>f.ProfileServicesLinkingHandler.show_import_notifications(e));{const t=M.intl.formatMessage({id:"D/rjjz",defaultMessage:"You’re already connected to {service_name}"},{service_name:_.default.to_name(e.provider)});v.Notify.success(t)}},this.handleTypeaheadSelect=(e,t,s)=>{if(e||s)if(e instanceof k)this.handleExpandImport();else if(e instanceof A)this.handleThirdPartyImport(e);else{e&&this._logTokenSelect(e,t,s);const a=e?[e]:I.tokenizeAllRawInputs(s);this.validateAndAddTokens(a),this.setState({typeaheadSuggestions:[]})}},this.handleTypeaheadRemoveToken=e=>{const t=this.props.typeaheadTokens.filter(t=>t!==e);this._logTokenChangeEvent(e,!0),this.props.onTypeaheadTokensChange(t)},this.renderTypeaheadTokenContent=e=>{const t=this._getValidation(e);let s=e.name||e.email;"ok"!==t.state&&t.msg===C.CONTACT_ERROR_MESSAGES.OUT_OF_TEAM&&(s=e.email);return this._logTokenChangeEvent(e,!1,{did_select_suggestion:!1}),a.createElement(c.SharingContactToken,{avatarUrl:e.photo_url,displayName:s,validation:t})},this.setTypeaheadRef=e=>{this.typeahead=e},this.setTypeaheadInputRef=e=>{this.typeaheadInput=e},this.finishLogging=e=>{const t=this.contactsDataSource.getStats().numLocalContacts;if(this._flush_unfinished_queries_cache(),this.shouldLogSearch())return this.contact_search_logger.log_records(this.props.user.id,e,t)},this._logTokenSelect=(e,t,s)=>{const a={search_expr:s,selected_pos:t||0,num_query_results:this.state.typeaheadSuggestions.length,did_select_suggestion:!0};this._logTokenChangeEvent(e,!1,a)},this._logTokenChangeEvent=(e,t=!1,s={})=>{if(this.contact_search_logger&&e){if(!t){const t={context:this._getLoggingContext(),contact_type:e.type,contact_id:e.getContactID(),contact_name:e.name,sort_variant:null,event_ts:window.performance.now()};for(const e in s)s[e]&&(t[e]=s[e]);return this.contact_search_logger.add_record(t)}{const t=e.getContactID();if(t)return this.contact_search_logger.flag_record_as_removed(t)}}},this._logSearchComplete=(e,t,s=!0)=>{if(!this.shouldLogSearch()||!e)return;const a=window.performance.now();let i=this.unfinished_contact_search_queries[e];if(!i)return;const n=i.begin_time;!("ttfr"in i)&&t>0&&(i.ttfr=Math.floor(a-n)),s?(i.local_duration=Math.floor(a-n),i.num_local_results=t):(i.remote_duration=Math.floor(a-n),i.num_additional_remote_results=t),i.num_results+=t;return(()=>this.contactsDataSource.isSearchLocalOnly()&&s||!s)()?(i=this._prepareSearchStatsForLogging(i,e,a,!0),this.contact_search_logger.add_timing_record(i),this.contact_search_logger.count_search(i.is_slow),delete this.unfinished_contact_search_queries[e]):void 0},this._logSearchBegin=e=>{if(!this.shouldLogSearch()||!e)return;const t=window.performance.now();return this._flush_unfinished_queries_cache(t),this.unfinished_contact_search_queries[e]={begin_time:t,num_results:0}},this._flush_unfinished_queries_cache=e=>{if(this.shouldLogSearch()){null==e&&(e=window.performance.now());for(const t in this.unfinished_contact_search_queries)if(this.unfinished_contact_search_queries[t]){let s=this.unfinished_contact_search_queries[t];e&&e-s.begin_time<i.CONTACTS_SEARCH_PREEMPTED_THRESHOLD&&(s.is_preempted=!0),s=this._prepareSearchStatsForLogging(s,t,e,!1),this.contact_search_logger.add_timing_record(s),this.contact_search_logger.count_search(s.is_slow)}return this.unfinished_contact_search_queries={}}},this._prepareSearchStatsForLogging=(e,t,s,a)=>{const i=e.begin_time;e.duration=Math.floor(s-i),"ttfr"in e?e.is_slow=e.ttfr>100:a&&0===e.num_results?e.is_slow=!1:e.is_slow=e.duration>100;const n=this.contactsDataSource.getStats().localContactsDownloadedTime;return e.started_before_download=null==n||i<n,"is_preempted"in e||(e.is_preempted=!1),e.context=this._getLoggingContext(),e.query_length=t.length,e.is_finished=a,e},this._getLoggingContext=()=>{let e="spectrum_tokenizer";return null!=this.props.context&&(e+=`_${this.props.context}`),e},this.state={typeaheadSuggestions:[]},this.link_handler=new f.ProfileServicesLinkingHandler,this.profile_services=null,this.props.teamGroupInfo||this.props.showContactImport&&this.props.user&&(this.profile_services=f.LinkedProfileServices.get_linked_profile_services_for_user(this.props.user.id))}getContacts(){return this.tokenizeRawInput(),this.props.typeaheadTokens}focusTypeaheadInput(){T.findDOMNode(this.typeaheadInput).focus()}addExternalContacts(e){this.validateAndAddTokens(e)}componentDidMount(){this.contactsDataSource=this.initContactsDataSource(this.props.user,this.filterContacts),this.props.shouldLogContactSearch&&(this.contact_search_logger=new n.ContactSearchLogger(this._getLoggingContext(),this.contactsDataSource.searchModeName),this.unfinished_contact_search_queries={}),this.props.initialTypeaheadTokens&&this.props.initialTypeaheadTokens.length>0&&this.validateAndAddTokens(this.props.initialTypeaheadTokens),this.props.focusOnMount&&this.focusTypeaheadInput(),this.props.actionHandler.suggestTargets({force_refresh:!0})}componentDidUpdate(e,t){if(this.contactsDataSource=this.initContactsDataSource(this.props.user,this.filterContacts),this.state.typeaheadSuggestions.length>0){const e=this.state.typeaheadSuggestions[0]instanceof k,s=this.state.typeaheadSuggestions[0]instanceof A;t.typeaheadSuggestions===this.state.typeaheadSuggestions||e?(e||s)&&this.typeahead.setState({suggestionsListSelectedIndex:-1}):this.typeahead.setState({suggestionsListSelectedIndex:0})}e.typeaheadTokens!==this.props.typeaheadTokens&&this.updateRecipientData()}tokenizeRawInput(){const e=this.typeaheadInput.value;if(""!==e){const t=I.tokenizeAllRawInputs(e);this.validateAndAddTokens(t),this.typeahead.setState({inputValue:""})}}getSuggestionRenderer(){return this.props.renderTypeaheadSuggestion}getSuggestions(){return this.state.typeaheadSuggestions}render(){return a.createElement(u.Typeahead,{ref:this.setTypeaheadRef,className:this.props.className,height:160,inputProps:{ref:this.setTypeaheadInputRef,disabled:this.props.disabledInput,placeholder:this.props.typeaheadPlaceholder,"aria-label":M.intl.formatMessage({id:"rQOIK5",defaultMessage:"Contact name"})},listItemHeight:48,onChange:this.handleTypeaheadOnChange,onRemoveToken:this.handleTypeaheadRemoveToken,onSelect:this.handleTypeaheadSelect,renderSuggestion:this.getSuggestionRenderer(),renderTokenContent:this.renderTypeaheadTokenContent,suggestions:this.getSuggestions(),suggestionsBuffer:0,tokens:this.createTypeaheadTokenObjects()})}initContactsDataSource(e,t){return new m.ContactsDataSourceV2(e,t,!1)}_getValidation(e){const t=this.props.actionHandler.getSharingInfo().recipientAccess(),s=this.props.actionHandler.getSharingInfo().recipientValidation()[t]||{},a=e.getKey();return s[a]?s[a]:{state:"pending",msg:null}}getVariantForTypeaheadToken(e){const t=this._getValidation(e);return"invalid"===t.state?"error":"warn"===t.state?"warning":"default"}createTypeaheadTokenObjects(){return this.props.typeaheadTokens.map(e=>({key:e.getKey(),variant:this.getVariantForTypeaheadToken(e),content:e}))}filterExistingTokens(e){if(!e)return[];const t=this.props.typeaheadTokens.map(e=>e.getKey());return e.filter(e=>!t.includes(e.getKey()))}suggestSharingTargets(e){this.props.actionHandler.suggestTargets({query:e}).then(e=>{e?this.setSuggestions(this.filterExistingTokens(e.filter(e=>this.filterContacts(e)))):this.typeahead.setState({suggestionsListSelectedIndex:-1})})}is_server_side_contact_search_on(){return"ON"===this.props.actionHandler.getSharingInfo().sharingPrefs().in_server_side_contact_search_settings}showSuggestions(e){if(this.is_server_side_contact_search_on())return this.suggestSharingTargets(e);this._logSearchBegin(e);const t=[];this.contactsDataSource.search(e,s=>{t.push(...this.filterExistingTokens(s)),this.setSuggestions(t),this._logSearchComplete(e,(null!=s?s.length:void 0)||0,!0)},s=>{const a=this.filterExistingTokens(s);e===this.typeaheadInput.value&&a.length>0&&(t[t.length-1]instanceof k?t.push(...a.concat(t.pop())):t.push(...a),this.setState({typeaheadSuggestions:t})),this._logSearchComplete(e,s.length,!1)})}setSuggestions(e){const t=e;this.props.teamGroupInfo?t.push(g.default.teamGroupInfoToContact(this.props.teamGroupInfo)):this.props.showContactImport&&t.push(new k),this.setState({typeaheadSuggestions:t})}validateAndAddTokens(e){const t=e.reduce((e,t)=>(t.pending&&t.query&&e.push(t.query),e),[]),s=t=>{const{onTypeaheadTokensChange:s,typeaheadTokens:a}=this.props,i=[],n=a.map(e=>e.getKey());for(const s of e){let e=s;if(e.pending&&e.query){const s=this.contactsDataSource.normalizeQuery(e.query),a=this.determineQueryMatch(s,t[s]);a&&(e=a)}const a=e.getKey();n.includes(a)||(n.push(a),i.push(e))}s(a.concat(i))};if(!this.is_server_side_contact_search_on())return this.contactsDataSource.searchBatch(t,s,s);{const t=this.props.typeaheadTokens.map(e=>e.getKey()),s=[];for(const a of e){const e=a.getKey();t.includes(e)||(t.push(e),s.push(a))}this.props.onTypeaheadTokensChange(this.props.typeaheadTokens.concat(s))}}determineQueryMatch(e,t){if(!t||!e)return null;const s={email:[],name:[]};for(const a of t){const t=a.email?this.contactsDataSource.normalizeQuery(a.email):null,i=a.name?this.contactsDataSource.normalizeQuery(a.name):null;e===t?s.email.push(a):e===i&&s.name.push(a)}for(const e of["email","name"])if(1===s[e].length)return s[e][0];return null}shouldLogSearch(){return!this.is_server_side_contact_search_on()&&this.props.shouldLogContactSearch&&null!=this.contact_search_logger}}t.ShareContactsTokenizer=L,L.displayName="ShareContactsTokenizer",L.defaultProps={disabledInput:!1,shouldLogContactSearch:!1,renderTypeaheadSuggestion:e=>{return e instanceof k?a.createElement("div",{className:"typeahead-option"},a.createElement(o.Flag,{leftAttachment:a.createElement(l.Image,{className:"u-pad-right-s",src:(0,r.static_url)("/static/metaserver/static/images/icons/icon-import-vflOL9sCs.png"),srcHiRes:(0,r.static_url)("/static/metaserver/static/images/icons/icon-import@2x-vfluE8TBO.png")})},a.createElement("div",{className:"option-primary option-only"},M.intl.formatMessage({id:"H3lmrv",defaultMessage:"Import contacts"})))):e instanceof A?(t=e,a.createElement(N,{import:t})):(e=>{const t=e.name||e.email,s=e.group_id?(0,S.getInitials)(e.name):y.getInitials(t),i=e.group_id?M.intl.formatMessage({id:"XMHn5C",defaultMessage:"{count, plural, one{# member} other{# members}}"},{count:e.group_size||0}):e.email;return a.createElement(p.MemberRow,{id:e.getKey(),initials:s,avatarUrl:e.photo_url,description:i,displayName:t,tag:"div",variant:"narrow"})})(e);var t}};class N extends a.PureComponent{constructor(e){super(e),this.show_contact_import_spinner=e=>{if(this.props.import.provider===e.provider)return this.setState({showLoading:!0})},this.state={showLoading:!1}}componentDidMount(){return this.authCompleteListenerToken=(0,E.addAuthCompleteListener)(this.show_contact_import_spinner)}componentWillUnmount(){return(0,E.removeAuthCompleteListener)(this.authCompleteListenerToken)}render(){const{provider:e,connected:t}=this.props.import,s=_.default.to_img_legacy(e);let i=_.default.to_name(e);i=!t&&this.state.showLoading?M.intl.formatMessage({id:"3dBlC+",defaultMessage:"Importing {service_name} Contacts"},{service_name:i}):M.intl.formatMessage({id:"T+Ryks",defaultMessage:"Sign in with {service_name} to import contacts"},{service_name:i});const n=t?M.intl.formatMessage({id:"2/+46g",defaultMessage:"Connected"}):"";return a.createElement("div",{className:"typeahead-option"},a.createElement(o.Flag,{leftAttachment:a.createElement(l.Image,{className:"u-pad-right-s",src:(0,r.static_url)(s[0]),srcHiRes:(0,r.static_url)(s[1])})},a.createElement("div",{className:"option-primary"},i),a.createElement("div",{className:"option-secondary u-font-meta"},n)))}}N.displayName="ThirdPartyImportOption"})),define("metaserver/static/js/sharing/views/share_modal_footer_section",["require","exports","tslib","react","lodash","metaserver/static/js/sharing/ui_util","metaserver/static/js/sharing/views/constants","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_inband/index","metaserver/static/js/core/i18n"],(function(e,t,s,a,i,n,r,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareModalFooterSection=void 0,a=s.__importDefault(a),i=s.__importStar(i);class c extends a.default.PureComponent{isInbandFooterDisabled(){return this.props.isTokenizerEmpty||this.props.contactsError&&this.props.contactsError.level===n.ContactsErrorLevel.Error||!!this.props.contentNameMessage}render(){const{mode:e,children:t,shareButtonLabelOverride:s}=this.props;switch(e){case r.MODES.SHARE:return a.default.createElement(o.SharingModalFooterInband,{isButtonShareDisabled:this.isInbandFooterDisabled(),textButtonShare:s||(this.props.isTeamSharedFolder?l.intl.formatMessage({id:"YcxVqg",defaultMessage:"Add"}):l.intl.formatMessage({id:"CcpVyl",defaultMessage:"Share"})),onClickButtonShare:this.props.onShareButtonClick},t);case r.MODES.SHARE_SENDING:return a.default.createElement(o.SharingModalFooterInband,{isButtonShareDisabled:!0,textButtonShare:s||(this.props.isTeamSharedFolder?l.intl.formatMessage({id:"JowGoo",defaultMessage:"Adding..."}):l.intl.formatMessage({id:"WyW2Um",defaultMessage:"Sharing..."})),onClickButtonShare:i.noop},t);case r.MODES.MEMBERSHIP:return this.props.isInContentManager&&!this.props.contentInfo.pathExists()?a.default.createElement(o.SharingModalFooterInband,{isButtonShareDisabled:!1,textButtonShare:s||(this.props.isTeamSharedFolder?l.intl.formatMessage({id:"YcxVqg",defaultMessage:"Add"}):l.intl.formatMessage({id:"CcpVyl",defaultMessage:"Share"})),onClickButtonShare:this.props.onShareButtonClick}):null;default:return null}}}t.ShareModalFooterSection=c,c.displayName="ShareModalFooterSection"})),define("metaserver/static/js/sharing/views/share_modal_footer_link_section",["require","exports","tslib","react","metaserver/static/js/core/i18n","classnames","spectrum/button/index","metaserver/static/js/sharing/views/righteous_modal_link_info","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_link_list/index","metaserver/static/js/sharing/views/constants"],(function(e,t,s,a,i,n,r,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareModalFooterLinkSection=void 0,a=s.__importDefault(a),n=s.__importDefault(n);class d extends a.default.Component{constructor(){super(...arguments),this.onClickButtonLinkSettings=()=>{this.props.mode===c.MODES.LINK_ONLY?this.props.actionHandler.handleLinkSettingsClick():this.props.onLinkSettingsClick()}}renderSharedLinks(){const e=this.props.actionHandler&&this.props.actionHandler.getSharingInfo();if(e.isCloudDoc()){let t,s;return e&&e.sharedLinks()&&(t=e.editRighteousLink(),s=e.viewRighteousLink(),s||(s=e.shmodelLink())),[this.renderModalLinkInfo(t,"editor"),this.renderModalLinkInfo(s,"viewer")]}{const t=e.shmodelLink();return this.renderModalLinkInfo(t,"viewer")}}renderModalLinkInfo(e,t){return a.default.createElement(o.RighteousModalLinkInfo,{key:t,actionHandler:this.props.actionHandler,contentInfo:this.props.contentInfo,linkMetadata:e,linkAccessLevel:t,mode:this.props.mode,user:this.props.user,isLinkMetadataLoaded:this.props.isLinkMetadataLoaded,isTeamSharedFolder:this.props.isTeamSharedFolder,canShareLink:this.props.canShareLink,permissions:this.props.permissions,modalClose:this.props.closeModalHandler})}renderActions(){const e=this.props.actionHandler&&this.props.actionHandler.getSharingInfo();if(e.sharedLinks()&&e.sharedLinks().length>0&&(!e.isCloudDoc()||e.permissionsObj().canCreateEditLink()||e.permissionsObj().canCreateViewLink()))return a.default.createElement(r.Button,{variant:"borderless",onClick:this.onClickButtonLinkSettings},i.intl.formatMessage({id:"zxECIJ",defaultMessage:"Link settings"}))}render(){const e=this.props.actionHandler&&this.props.actionHandler.getSharingInfo();return a.default.createElement("div",{className:(0,n.default)({"unified-share-modal-two-link-model":!0,"unified-share-modal-two-link-model--upsell-enabled":e.isShareModalUpsellPremiumSharing()})},(()=>this.props.isLinkMetadataLoaded?a.default.createElement(l.SharingModalFooterLinkList,{className:(0,n.default)({"scl-sharing-modal-footer-link-list--no-border":this.props.mode===c.MODES.LINK_ONLY}),title:i.intl.formatMessage({id:"gzuZCm",defaultMessage:"Share a link"}),actions:this.renderActions()},this.renderSharedLinks()):void 0)())}}t.ShareModalFooterLinkSection=d,d.displayName="ShareModalFooterLinkSection"})),define("metaserver/static/js/sharing/views/share_modal_header_section",["require","exports","tslib","classnames","react","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_header/index","metaserver/static/js/clean/ui/bubble","metaserver/static/js/sharing/views/constants","metaserver/static/js/clean/em_string","metaserver/static/js/core/i18n","metaserver/static/js/icon/folder_icon","metaserver/static/js/sharing/share_modal_icon","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareModalHeaderSection=void 0,a=s.__importDefault(a),i=s.__importDefault(i),r=s.__importDefault(r);class m extends i.default.Component{constructor(e){super(e),this.handleContentNameFocus=()=>{this.setState({isFocusOnContentName:!0})},this.handleContentNameBlur=()=>{this.setState({isFocusOnContentName:!1})},this.state={isFocusOnContentName:this.props.isContentNameFocused},this.headerInputRef=i.default.createRef()}selectContentNameInput(){var e;this.headerInputRef&&(null===(e=this.headerInputRef.current)||void 0===e||e.select())}render(){return this.props.isCreatingNewFolder&&!this.props.initialContentName?i.default.createElement(n.SharingModalHeaderInput,{inputAutoFocus:!0,forwardedRef:this.headerInputRef,icon:i.default.createElement(d.SharedFolderIcon,null),inputAriaLabel:this.props.contentNameMessage,inputPlaceholder:this.state.isFocusOnContentName?void 0:c.intl.formatMessage({id:"ss4CO0",defaultMessage:"Folder name"}),onClickCloseButton:this.props.onModalCloseClick,onInputChange:this.props.onContentNameInputChange,onInputFocus:this.handleContentNameFocus,onInputBlur:this.handleContentNameBlur,onInputKeyUp:this.props.onContentNameInputKeyUp},this.shouldShowContentNameBubble()&&this.renderContentNameBubble()):i.default.createElement(n.SharingModalHeaderTitle,{closeButtonVisible:!0,icon:this.getIcon(),subTitle:!this.props.isLoading&&(this.props.subTitle||this.getMemberCountsString()),onClickCloseButton:this.props.onModalCloseClick,onClickSettingsButton:this.props.onSettingsButtonClick,settingsButtonVisible:this.props.isMetadataLoaded&&this.isContentSettingsEnabled(),title:this.getHeaderTitle()})}getHeaderTitle(){return this.props.initialContentName?this.props.initialContentName:l.Emstring.em_snippet(this.props.sharingInfo.name(),u.SNIPPET_SIZES.FILENAME)}isContentNameInputError(){return this.props.contentNameMessageLevel===o.CONTENT_NAME_MESSAGE_LEVELS.ERROR}shouldShowContentNameBubble(){return this.props.contentNameMessage&&(this.state.isFocusOnContentName||this.isContentNameInputError())}renderContentNameBubble(){return i.default.createElement(r.default,{arrow:r.default.ARROW.TOP,className:(0,a.default)("unified-share-modal__content-name__tooltip","u-pad-xs","u-font-strong",{"unified-share-modal__content-name__tooltip-error":this.isContentNameInputError()})},this.props.contentNameMessage)}getIcon(){const e=this.props.contentInfo;if(e.isFolder()){if(!e.extras.exists)return i.default.createElement(d.SharedFolderIcon,null);if(!this.props.isMetadataLoaded)return e.isTeamSharedFolder()||e.isFolderInsideTeamFolderTree()?i.default.createElement(d.TeamFolderIcon,null):e.isSharedFolder()?i.default.createElement(d.SharedFolderIcon,null):i.default.createElement(d.SimpleFolderIcon,null)}return i.default.createElement(p.ShareModalIcon,{alt:"",className:"unified-share-modal__title-icon",filename:this.props.sharingInfo.name(),isSharedFolder:e.isSharedFolder(),isFolder:e.isFolder(),isTeamSharedFolder:this.props.isTeamSharedFolder,isFolderInsideTeamFolderTree:!0===this.props.isFolderInsideTeamFolderTree,isViewOnly:!this.props.canEdit,isConfidentialFolder:this.props.isInContentManager&&this.props.isConfidentialFolder,pathExists:e.pathExists()})}getSharingMemberCountsString(e){return this.ifAnyNonSelfMembers(e)?c.intl.formatMessage({id:"CQ2ZaT",defaultMessage:"Only you can access"}):c.intl.formatMessage({id:"bFyJSY",defaultMessage:"Shared with other people"})}ifAnyNonSelfMembers(e){const t=this.props.sharingInfo.members(),s=t.groups.count(),a=t.users.count(),i=this.props.sharingInfo.hasDirectMemberSelf(),n=this.props.sharingInfo.memberCounts().total_unique_users,r=0===s&&i;if(null===n||n<=1){const e=t.isOnlyMemberInAllGroups();return s>0&&e?0===a||i:r}return!1}getMemberCountsString(){const e=this.props.sharingInfo.memberNum();if(e&&!this.props.isSendingForSignature)return this.getSharingMemberCountsString(e)}isContentSettingsEnabled(){return this.props.contentInfo.isFolder()&&this.props.contentInfo.pathExists()||this.props.contentInfo.isFile()&&this.props.showPassFileSettings}}t.ShareModalHeaderSection=m,m.defaultProps={isLoading:!1},m.displayName="ShareModalHeaderSection"})),define("metaserver/static/js/sharing/views/share_modal_pointer_mode",["require","exports","tslib","react","metaserver/static/js/core/i18n","metaserver/static/js/sharing/ui_util","metaserver/static/js/sharing/ui_notifications_util","typescript/component_libraries/spectrum-sharing/src/utils/logging","typescript/libraries/spectrum-content-icon-compatibility/src/index","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_header/index","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_link/index","metaserver/static/js/clean/clipboard_v3"],(function(e,t,s,a,i,n,r,o,l,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareModalPointerMode=void 0,a=s.__importDefault(a);class u extends a.default.Component{constructor(){super(...arguments),this.handleCopyLinkClicked=()=>{(0,p.copyToClipboard)(this.getLinkUrl(),()=>(0,r.sharingNotificationSuccess)(i.intl.formatMessage({id:"z1RKgB",defaultMessage:"Link copied to clipboard"})),()=>(0,r.sharingNotificationError)(i.intl.formatMessage({id:"zMYKz7",defaultMessage:"Unable to copy the link, please copy manually"}))),this.logCopyEvent()}}render(){const{className:e,sharingInfo:t,onClickCloseButton:s}=this.props;return a.default.createElement("div",{className:e},a.default.createElement(c.SharingModalHeaderTitle,{closeButtonVisible:!0,icon:a.default.createElement(l.IconContent,{name:"dlink-small"}),onClickCloseButton:s,title:t.name()}),a.default.createElement(d.SharingModalFooterLinkCopy,{labelSharedLinkUrl:i.intl.formatMessage({id:"vLmOAd",defaultMessage:"Shared link URL"}),isIconHidden:!0,inputProps:{autoFocus:!1},onClickButton:this.handleCopyLinkClicked,sharedLinkUrl:this.getLinkUrl(),textButton:i.intl.formatMessage({id:"L4Tupd",defaultMessage:"Copy link"})}))}getLinkUrl(){return this.props.sharingInfo.isLinkMetadataLoaded()?this.props.sharingInfo.sharedLinks()[0].url:""}logCopyEvent(){const e=this.props.sharingInfo.user(),t=this.props.sharingInfo.contentInfo();(0,n.logTiburonEvent)(t,e.id,o.TiburonEventName.CopySharedLink,{type:"pointer"})}}t.ShareModalPointerMode=u,u.displayName="ShareModalPointerMode"})),define("metaserver/static/js/sharing/views/sharing_settings_file_folder_policy_view",["require","exports","tslib","react","metaserver/static/js/core/i18n","metaserver/static/js/sharing/sharing_settings_util","metaserver/static/js/sharing/views/sharing_settings_policy_view","metaserver/static/js/clean/em_string","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/sharing_settings_constants"],(function(e,t,s,a,i,n,r,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSettingsFileFolderPolicyView=void 0,a=s.__importDefault(a);class c extends r.SharingSettingsPolicyView{render(){return this.renderPolicies()}renderPolicies(){const e=this.props.policies.map(e=>{const t=this.getPolicyDict(e);return this.renderPolicy(e,t)});return a.default.createElement("div",null,e)}renderPolicy(e,t){let s,a,i;[s,a]=(0,n.getEffectivePolicyValue)(e,this.props.policyUpdate,this.props.currentPolicy,this.props.showContentManagerBridge,this.props.teamPolicy,this.props.permissions);const r=Object.keys(t.optionsDict);if(s&&!r.includes(s))throw new Error(`Invalid Policy: ${s}`);if(t.type===l.DROPDOWN){const n=t=>{this.props.onPolicyUpdate(e,t)};i=this.renderDropdown(e,s,t.optionsDict,r,n,!a)}else if(t.type===l.TOGGLE){const n=(s,a)=>{for(const a of r){t.optionsDict[a].value===s&&this.props.onPolicyUpdate(e,a)}};i=this.renderToggle(e,s,t.optionsDict,n,!a)}return this.renderPolicyRow(e,t,a,i)}isTeamMemberFolder(){return!this.isTeamFolderTree()&&this.props.ownerTeam}isTeamFolderTree(){return this.props.isTeamSharedFolder||this.props.isFolderInsideTeamFolderTree}getMemberPolicyQuestion(){return this.isTeamFolderTree()?i.intl.formatMessage({id:"+JxbQ8",defaultMessage:"Limit who can be added as a member of folders."}):i.intl.formatMessage({id:"lUdY7W",defaultMessage:"Limit who can be added as a member of this folder."})}getAclUpdatePolicyQuestion(){return this.isTeamFolderTree()?i.intl.formatMessage({id:"8eiYiI",defaultMessage:"Choose who can add people to folders."}):i.intl.formatMessage({id:"d2BniZ",defaultMessage:"Choose who can add people to this folder."})}getViewerInfoPolicyDescription(){return this.props.ownerTeam?this.props.isFolder?i.intl.formatMessage({id:"9Ihzjr",defaultMessage:"Show who viewed files in this folder to team members and people who can edit."}):i.intl.formatMessage({id:"pPFsa4",defaultMessage:"Show who viewed this file to team members and people who can edit."}):this.props.isFolder?i.intl.formatMessage({id:"FquCbz",defaultMessage:"Show who’s viewing files in this folder to people who can edit."}):i.intl.formatMessage({id:"VloA8O",defaultMessage:"Show who’s viewing this file to people who can edit."})}getPolicyDict(e){switch(e){case l.MEMBER_POLICY:return{title:i.intl.formatMessage({id:"Z0CQak",defaultMessage:"Folder membership"}),description:this.getMemberPolicyQuestion(),optionsDict:{anyone:{label:i.intl.formatMessage({id:"m1ZBqW",defaultMessage:"Anyone"})},team:{label:i.intl.formatMessage({id:"flkJcx",defaultMessage:"Only team members"})}},type:l.DROPDOWN};case l.ACL_UPDATE_POLICY:return{title:i.intl.formatMessage({id:"qG3VMJ",defaultMessage:"Manage access"}),description:this.getAclUpdatePolicyQuestion(),optionsDict:{editors:{label:this.isTeamFolderTree()||this.isTeamMemberFolder()?i.intl.formatMessage({id:"KBoyON",defaultMessage:"Team members who can edit"}):i.intl.formatMessage({id:"CyxyyA",defaultMessage:"Folder members"}),description:this.isTeamFolderTree()||this.isTeamMemberFolder()?i.intl.formatMessage({id:"rY7b9W",defaultMessage:"Team members with edit access can add people."}):i.intl.formatMessage({id:"U8/o8J",defaultMessage:"Members with edit access can add people."})},owner:{label:this.isTeamFolderTree()?i.intl.formatMessage({id:"FRQa4i",defaultMessage:"Only Team Admins"}):i.intl.formatMessage({id:"svCMOP",defaultMessage:"Only the owner"}),description:this.isTeamFolderTree()?i.intl.formatMessage({id:"kmb+og",defaultMessage:"Only Team Admins."}):i.intl.formatMessage({id:"mNi7Xx",defaultMessage:"Only the owner can add people."})}},type:l.DROPDOWN};case l.VIEWER_INFO_POLICY:return{title:i.intl.formatMessage({id:"OFgJ+q",defaultMessage:"Viewer info"}),description:this.getViewerInfoPolicyDescription(),optionsDict:{enabled:{label:i.intl.formatMessage({id:"4ASaZl",defaultMessage:"On"}),value:!0},disabled:{label:i.intl.formatMessage({id:"495asM",defaultMessage:"Off"}),value:!1}},type:l.TOGGLE};case l.FOLDER_LINK_AUDIENCE_POLICY:if(!this.props.ownerTeam)throw new Error("Policy only valid for teams");return"team"===this.props.currentPolicy[l.FOLDER_LINK_AUDIENCE_POLICY]?this.renderFolderLinkPolicyDropdown():{title:i.intl.formatMessage({id:"dpUA0F",defaultMessage:"Link restrictions"}),description:i.intl.formatMessage({id:"ZnIqIh",defaultMessage:"Prevent non-members from accessing this folder via link."}),optionsDict:{members:{label:i.intl.formatMessage({id:"4ASaZl",defaultMessage:"On"}),value:!0},anyone:{label:i.intl.formatMessage({id:"495asM",defaultMessage:"Off"}),value:!1}},type:l.TOGGLE};default:throw new Error("Policy name not found")}}renderFolderLinkPolicyDropdown(){if(!this.props.ownerTeam)throw new Error("Policy only valid for teams");return{title:i.intl.formatMessage({id:"dpUA0F",defaultMessage:"Link restrictions"}),description:i.intl.formatMessage({id:"W3KUO0",defaultMessage:"Limits who can access this folder via a link."}),optionsDict:{anyone:{label:i.intl.formatMessage({id:"xkdOhD",defaultMessage:"No restrictions"}),description:i.intl.formatMessage({id:"cLesiI",defaultMessage:"Show all access options for links."})},members:{label:i.intl.formatMessage({id:"Tj12s5",defaultMessage:"Invite-only"}),description:i.intl.formatMessage({id:"02i0Sa",defaultMessage:"Show “Only invited members” only."})},team:{label:i.intl.formatMessage({id:"axkOyT",defaultMessage:"Team only"}),description:i.intl.formatMessage({id:"chneWK",defaultMessage:"Show “Only people at {team_name}”."},{team_name:o.Emstring.em_snippet(this.props.ownerTeam.name,12)})}},type:l.DROPDOWN}}}t.SharingSettingsFileFolderPolicyView=c})),define("metaserver/static/js/sharing/views/sharing_settings_link_policy_view",["require","exports","tslib","react","metaserver/static/js/core/i18n","js/filepath/filepath","metaserver/static/js/sharing/sharing_settings_util","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_banner/index","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/sharing_settings_expire","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/sharing_settings_audience","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/sharing_settings_download"],(function(e,t,s,a,i,n,r,o,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSettingsLinkPolicyView=void 0,a=s.__importDefault(a);const p=e=>{window.open(e,"_blank")};class u extends a.default.Component{constructor(){super(...arguments),this.getPolicyDict=e=>this.props.getPolicyDict(e,this.props.isFolder),this.renderCannotPreviewBanner=()=>{if(!(0,r.shouldRenderNoPreviewFileWarning)(!this.props.isFolder,this.props.linkMetadata))return;const e=(0,n.file_extension)(this.props.linkMetadata.name).toUpperCase();return a.default.createElement(o.SharingModalBanner,{className:"sharing-settings-modal__banner",type:"default",message:i.intl.formatMessage({id:"7E5yD4",defaultMessage:"{file_extension} files can’t be previewed. Downloads must be enabled to share."},{file_extension:`.${e}`})})},this.handleMultiplePolicyUpdate=e=>{const t=this.props.linkPolicy.merge(e);this.props.onPolicyUpdate(this.props.linkMetadata,t)},this.handlePolicyUpdate=(e,t)=>{const s=this.props.linkPolicy.set(e,t);this.props.onPolicyUpdate(this.props.linkMetadata,s)}}render(){const e=this.props.readOnlyPolicy;return a.default.createElement("div",null,a.default.createElement(c.SharingSettingsAudience,{intl:i.intl,linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handleMultiplePolicyUpdate,readOnlyPolicy:e}),a.default.createElement(l.SharingSettingsExpire,{intl:i.intl,linkMetadata:this.props.linkMetadata,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handleMultiplePolicyUpdate,readOnlyPolicy:e}),a.default.createElement(d.SharingSettingsDownload,{intl:i.intl,linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handlePolicyUpdate,onLinkClicked:p,banner:this.renderCannotPreviewBanner(),readOnlyPolicy:e,isEditFolderLink:!1}))}}t.SharingSettingsLinkPolicyView=u,u.displayName="SharingSettingsLinkPolicyView"})),define("metaserver/static/js/sharing/views/sharing_settings_link_policies",["require","exports","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/sharing_settings_link_policies","metaserver/static/js/core/i18n"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRLPolicyDict=t.getShmodelInMultipleLinksPolicyDict=void 0;const i=(0,s.SharingSettingsLinkPolicies)(a.intl);t.getShmodelInMultipleLinksPolicyDict=i.getShmodelInMultipleLinksPolicyDict,t.getRLPolicyDict=i.getRLPolicyDict})),define("metaserver/static/js/sharing/views/sharing_settings_link_section",["require","exports","tslib","react","spectrum/button/index","typescript/component_libraries/spectrum-sharing/src/components/card/index","metaserver/static/js/sharing/views/sharing_settings_link_policy_view","metaserver/static/js/sharing/views/sharing_settings_righteous_link_policy_view","metaserver/static/js/sharing/sharing_settings_util","metaserver/static/js/sharing/delete_link_modal","metaserver/static/js/sharing/views/righteous_modal_link_info","metaserver/static/js/sharing/views/sharing_settings_link_policies","metaserver/static/js/core/i18n","typescript/component_libraries/spectrum-sharing/src/components/scooter_loader/index","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/sharing_settings_util"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u,m,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSettingsLinkActions=t.SharingSettingsLinkSection=void 0,a=s.__importDefault(a);class g extends a.default.Component{constructor(e){super(e),this.onClickButtonCreateLink=e=>{"editor"===e?this.setState({creatingEditLink:!0},()=>this.handleCreateLinkClicked(e)):this.setState({creatingViewLink:!0},()=>this.handleCreateLinkClicked(e))},this.handleCreateLinkClicked=e=>{this.props.actionHandler&&this.props.actionHandler.createSharedLink(e).catch(()=>{"editor"===e&&this.state.creatingEditLink?this.setState({creatingEditLink:!1}):this.setState({creatingViewLink:!1})})},this.handleClickDeleteLink=e=>{(0,c.deleteLinkWithConfirm)({contentInfo:this.props.sharingInfo.contentInfo(),client:this.props.client,url:e.url,contentName:e.name,onDeleteLink:()=>{this.props.onDeleteLink(e)},onCancel:this.props.onCancelDeleteLink,actionHandler:this.props.actionHandler})},this.state={creatingEditLink:!1,creatingViewLink:!1}}render(){let e=void 0;"editor"===this.props.accessLevel?e=this.props.sharingInfo.editRighteousLink():(e=this.props.sharingInfo.viewRighteousLink(),e||(e=this.props.sharingInfo.shmodelLink()));const t=this.renderLinkPolicy(this.props.accessLevel,e);return a.default.createElement("div",{className:"scl-sharing-settings-links-section"},t)}emptyLinkCreateActions(e,t){return t?this.renderCreateLinkLoading(e):this.renderEmptyLinkPolicy(e)}renderLinkPolicy(e,t){if(!t)return"editor"===e?this.emptyLinkCreateActions(e,this.state.creatingEditLink):this.emptyLinkCreateActions(e,this.state.creatingViewLink);const s=this.props.updatedLinkPolicies[t.url],i=(0,l.getLinkPolicy)(t),c=(0,h.isReadOnlyPolicy)(i,t.link_permissions);let u;return u=t.isRighteousLink()?a.default.createElement(o.SharingSettingsRighteousLinkPolicyView,{linkPolicy:s||i,linkMetadata:t,onPolicyUpdate:this.props.onPolicyUpdate,readOnlyPolicy:c}):a.default.createElement(r.SharingSettingsLinkPolicyView,{linkPolicy:s||i,linkMetadata:t,isFolder:t.isFolder(),onPolicyUpdate:this.props.onPolicyUpdate,getPolicyDict:p.getShmodelInMultipleLinksPolicyDict,readOnlyPolicy:c}),a.default.createElement(n.Card,{key:t.url||e,icon:(0,d.getSpectrumLinkIcon)(e),title:this.renderTitle(e),actions:this.renderLinkActions(t)},u)}renderLinkActions(e){return a.default.createElement(_,{linkMetadata:e,onClickDeleteLink:this.handleClickDeleteLink})}renderEmptyLinkPolicy(e){var t,s;const{sharingInfo:r}=this.props,o=this.props.sharingInfo.permissionsObj();let l;return l=(0,h.canCreateLink)(e,r.isCloudDoc(),r.isFolder(),r.isTeamSharedFolder(),r.isConfidentialFolder(),o.canInviteEditor(),r.canShareLink(),o.canCreateViewLink(),o.canCreateEditLink(),null===(t=null==r?void 0:r.metadata())||void 0===t?void 0:t.access_type,!!(null===(s=null==r?void 0:r.metadata())||void 0===s?void 0:s.path_lower))?a.default.createElement("div",null,this.getEmptyLinkMessage(e)," ",a.default.createElement(i.Button,{variant:"borderless",onClick:()=>this.onClickButtonCreateLink(e)},u.intl.formatMessage({id:"F7gl6q",defaultMessage:"Create link"}))):u.intl.formatMessage({id:"DhAXrs",defaultMessage:"Link not available."}),a.default.createElement(n.Card,{key:e,icon:(0,d.getSpectrumLinkIcon)(e),title:this.renderTitle(e)},a.default.createElement("div",{className:"sharing-settings-modal__link-policy"},a.default.createElement("div",{className:"sharing-settings-modal__link-policy-text"},l)))}getEmptyLinkMessage(e){return"editor"===e?u.intl.formatMessage({id:"K79TJX",defaultMessage:"There isn’t a link for editing."}):u.intl.formatMessage({id:"B3RLyV",defaultMessage:"There isn’t a link for viewing."})}renderCreateLinkLoading(e){let t;const s=u.intl.formatMessage({id:"MnjJiE",defaultMessage:"Creating link"});return t=a.default.createElement("span",null,s,a.default.createElement(m.ScooterLoader,null)),a.default.createElement(n.Card,{key:e,icon:(0,d.getSpectrumLinkIcon)(e),title:this.renderTitle(e)},a.default.createElement("div",{className:"sharing-settings-modal__link-policy"},a.default.createElement("div",{className:"sharing-settings-modal__link-policy-text"},t)))}renderTitle(e){return"editor"===e?u.intl.formatMessage({id:"jN5OfV",defaultMessage:"People with this link can edit"}):u.intl.formatMessage({id:"xLAQNV",defaultMessage:"People with this link can view"})}}t.SharingSettingsLinkSection=g,g.displayName="SharingSettingsLinkSection";class _ extends a.default.Component{constructor(){super(...arguments),this.handleClickDelete=e=>{e.preventDefault(),this.props.onClickDeleteLink(this.props.linkMetadata)}}render(){return this.canDeleteLink()?a.default.createElement(i.Button,{variant:"borderless",onClick:this.handleClickDelete},u.intl.formatMessage({id:"lDhFjo",defaultMessage:"Delete link"})):null}canDeleteLink(){return this.props.linkMetadata.link_permissions.can_revoke}}t.SharingSettingsLinkActions=_,_.displayName="SharingSettingsLinkActions"})),define("metaserver/static/js/sharing/views/sharing_settings_righteous_link_policy_view",["require","exports","tslib","react","metaserver/static/js/sharing/views/sharing_settings_link_policies","metaserver/static/js/core/i18n","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/sharing_settings_audience","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/sharing_settings_password","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/sharing_settings_expire","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/sharing_settings_download"],(function(e,t,s,a,i,n,r,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSettingsRighteousLinkPolicyView=void 0,a=s.__importDefault(a);const d=e=>{window.open(e,"_blank")};class p extends a.default.Component{constructor(){super(...arguments),this.getPolicyDict=e=>{const{link_permissions:t}=this.props.linkMetadata;return(0,i.getRLPolicyDict)(e,t.link_access_level,this.props.linkMetadata.isFolder())},this.handleMultiplePolicyUpdate=e=>{const t=this.props.linkPolicy.merge(e);this.props.onPolicyUpdate(this.props.linkMetadata,t)},this.handlePolicyUpdate=(e,t)=>{const s=this.props.linkPolicy.set(e,t);this.props.onPolicyUpdate(this.props.linkMetadata,s)}}render(){const e=this.props.readOnlyPolicy;return a.default.createElement("div",null,a.default.createElement(r.SharingSettingsAudience,{intl:n.intl,linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handleMultiplePolicyUpdate,readOnlyPolicy:e}),a.default.createElement(o.SharingSettingsPassword,{intl:n.intl,linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handleMultiplePolicyUpdate,readOnlyPolicy:e}),a.default.createElement(l.SharingSettingsExpire,{intl:n.intl,linkMetadata:this.props.linkMetadata,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handleMultiplePolicyUpdate,readOnlyPolicy:e}),a.default.createElement(c.SharingSettingsDownload,{intl:n.intl,linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handlePolicyUpdate,onLinkClicked:d,readOnlyPolicy:e,isEditFolderLink:this.props.linkMetadata.isFolder(),banner:a.default.createElement(c.DisableDownloadsBanner,{intl:n.intl,linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy})}))}}t.SharingSettingsRighteousLinkPolicyView=p,p.displayName="SharingSettingsRighteousLinkPolicyView"})),define("metaserver/static/js/sharing/views/sharing_settings_policy_view",["require","exports","tslib","react","spectrum/toggle/index","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_settings_row/index","metaserver/static/js/sharing/sharing_settings_dropdown"],(function(e,t,s,a,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSettingsPolicyView=void 0,a=s.__importDefault(a);class o extends a.default.Component{constructor(e){super(e),this.sharingModalSettingsRowLinkClicked=e=>{window.open(e,"_blank")},this.renderPolicyRow=(e,t,s,i,r)=>a.default.createElement(n.SharingModalSettingsRow,{policyFieldName:e,key:t.title,displayName:t.title,displayNameTitle:t.title,description:t.description,descriptionLinkUrl:t.descriptionLinkUrl,descriptionLinkText:t.descriptionLinkText,descriptionLinkOnClicked:this.sharingModalSettingsRowLinkClicked,rightSideElement:i,bottomElement:r})}renderDropdown(e,t,s,i,n,o){return a.default.createElement(r.SettingDropdown,{currentValue:t,valuesList:i,optionsDict:s,onValueSelected:n,disabled:o})}renderToggle(e,t,s,n,r){const o=r?(e,t)=>{}:n;return a.default.createElement(i.Toggle,{ariaLabel:"toggle",className:"sharing-settings-modal__toggle",labelContent:s[t].label,checked:s[t].value,interactive:!r,disabled:r,onCheckedChange:o})}}t.SharingSettingsPolicyView=o,o.displayName="SharingSettingsPolicyView"})),define("metaserver/static/js/sharing/views/viewer_info",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewerInfo=void 0;t.ViewerInfo=class{constructor(e){e.when_last_seen&&(this.time_last_seen=new Date(1e3*e.when_last_seen));const t=e.seen_state_user;this.account_id=t.user_id,this.display_name=t.display_name,this.email=t.email,this.photo_circle_url=t.photo_circle_url,this.same_team=!0}displayName(){return this.display_name}memberId(){return this.account_id}}})),define("metaserver/static/js/sharing/views/wrapped_group_viewers_maker",["require","exports","tslib","react","metaserver/static/js/datetime/datetime","metaserver/static/js/clean/em_string","metaserver/static/js/clean/ui/title_bubble","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/core/i18n","metaserver/static/js/clean/ui/sticky_position"],(function(e,t,s,a,i,n,r,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WrappedGroupViewersMaker=void 0,a=s.__importDefault(a);(function(e){function t(e,t){const s=t.has(e.account_id)?l.intl.formatMessage({id:"BMhlbR",defaultMessage:"Viewing now"}):(0,i.ago)(e.time_last_seen);return[a.default.createElement("tr",null,a.default.createElement("td",{className:"group-tooltip__viewers-table-cell group-tooltip__member-name"},n.Emstring.em_snippet(e.displayName(),o.SNIPPET_SIZES.DISPLAY_NAME)),a.default.createElement("td",{className:"group-tooltip__viewers-table-cell dot"},"·"),a.default.createElement("td",{className:"group-tooltip__viewers-table-cell group-tooltip__seen-string"},s))]}e.make=function(e,s){const i=l.intl.formatMessage({id:"4joFvJ",defaultMessage:"{count, plural, one{{count} viewer} other{{count} viewers}}"},{count:e.length}),n=e.length<=10,o=n?e.length:9;let d=t(e[0],s);for(let a=1;a<o;a++)d=d.concat(t(e[a],s));if(!n){const t=e.length-o,s=l.intl.formatMessage({id:"6gF5ZF",defaultMessage:"{count, plural, one{and {count} other} other{and {count} others}}"},{count:t});d=d.concat(a.default.createElement("tr",null,a.default.createElement("td",{className:"group-tooltip__viewers-table-cell group-tooltip__member-name"},s)))}return{element:a.default.createElement(r.TitleBubble,{content:a.default.createElement("table",{className:"group-tooltip__viewers-table"},a.default.createElement("tbody",null,d)),className:"group-tooltip",children:a.default.createElement("span",{className:"u-font-meta sharing-member-info__viewer-count-text"},i),position:c.StickyPosition.BOTTOM,isTargetPositionFixed:!0}),elementText:i}}})(t.WrappedGroupViewersMaker||(t.WrappedGroupViewersMaker={}))})),define("metaserver/static/js/sharing/views/wrapped_sharing_modal_checkbox_row",["require","exports","tslib","react","metaserver/static/js/sharing/views/hover_close_button","metaserver/static/js/core/i18n","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_checkbox_row/index"],(function(e,t,s,a,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WrappedSharingModalCheckboxRow=void 0,a=s.__importDefault(a),i=s.__importDefault(i);const o=e=>{let t;if(e.showShareAsCommentOnboarding){t={className:"checkbox-row-tooltip",content:a.default.createElement("div",{className:"content"},a.default.createElement("div",{className:"text-content"},a.default.createElement("div",{className:"header"},n.intl.formatMessage({id:"5q97ZA",defaultMessage:"Let everyone know"})),n.intl.formatMessage({id:"pbYebK",defaultMessage:"Check this box so others can see your message when viewing this file."})),a.default.createElement("div",null,a.default.createElement(i.default,{className:"c-coach-mark__x",onClick:e.onCloseShareAsCommentOnboarding}))),alwaysShow:!0}}return a.default.createElement(r.SharingModalCheckboxRow,Object.assign({},e,{tooltipData:t}))};o.displayName="WrappedSharingModalCheckboxRowInternal",t.WrappedSharingModalCheckboxRow=a.default.memo(o),t.WrappedSharingModalCheckboxRow.displayName="WrappedSharingModalCheckboxRow"})),define("metaserver/static/js/teams/admin/widgets/groups/util",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInitials=void 0;t.getInitials=e=>{const t=e.toUpperCase().split(" ");return`${t[0][0]}${t.length>1?t[t.length-1][0]:""}`}})),define("metaserver/static/js/teams/guest_pass/guest_pass_api",["require","exports","tslib","metaserver/static/js/clean/viewer","metaserver/static/js/api_v2/default_user_client","metaserver/static/js/teams/guest_pass/types"],(function(e,t,s,a,i,n){"use strict";function r(){const e=a.Viewer.get_viewer().work_user;if(!e)throw new Error("No active work user");return new i.DefaultUserApiV2Client(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.changeGuestPassExpireAction=t.fetchGuestDetails=t.fetchTeamGuestPassDetails=t.fetchIsEligibleToInviteGuest=void 0,t.fetchIsEligibleToInviteGuest=function(e){return s.__awaiter(this,void 0,void 0,(function*(){const t=r(),s={guest_email:e};try{return!!(yield t.ns("guest_pass").rpc("get_invite_eligibility",s,{})).eligible}catch(e){throw new Error(e.error[".tag"])}}))},t.fetchTeamGuestPassDetails=function(){return s.__awaiter(this,void 0,void 0,(function*(){const e=r();let t;try{t=yield e.ns("guest_pass").rpc("get_team_details",{},{})}catch(e){throw new Error(e.error[".tag"])}if(void 0===t.remaining_guest_passes||void 0===t.used_guest_passes||void 0===t.guest_pass_duration_days||void 0===t.is_team_eligible_for_guest_pass)throw new Error("Missing data in response");return{remainingGuestPasses:t.remaining_guest_passes,usedGuestPasses:t.used_guest_passes,guestPassDurationDays:t.guest_pass_duration_days,isTeamEligibleForGuestPass:t.is_team_eligible_for_guest_pass}}))},t.fetchGuestDetails=function(e){return s.__awaiter(this,void 0,void 0,(function*(){const t=r(),s={guest_user_dbx_id:e};let a;try{a=yield t.ns("guest_pass").rpc("get_guest_details",s,{})}catch(e){throw new Error(e.error[".tag"])}if(void 0===a.guest_pass_expiration_seconds_timestamp||void 0===a.expire_action||void 0===a.display_name||void 0===a.fname)throw new Error("Missing data in response");return{guestPassExpirationTime:new Date(1e3*a.guest_pass_expiration_seconds_timestamp),expireAction:(0,n.toGuestPassExpireAction)(a.expire_action),displayName:a.display_name,fname:a.fname}}))},t.changeGuestPassExpireAction=function({guestUserDbxId:e,expireAction:t}){return s.__awaiter(this,void 0,void 0,(function*(){const s=r(),a={guest_user_dbx_id:e,expire_action:(0,n.toGuestPassExpireActionApiV2)(t)};try{yield s.ns("guest_pass").rpc("change_expire_action",a,{})}catch(e){throw new Error(e.error[".tag"])}}))}})),define("metaserver/static/js/teams/invite/common/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadingState=void 0,(function(e){e[e.LOADING=0]="LOADING",e[e.COMPLETED=1]="COMPLETED",e[e.ERROR=2]="ERROR"})(t.LoadingState||(t.LoadingState={}))})),define("metaserver/static/js/previews/data/store",["require","exports","metaserver/static/js/file_viewer/data/store","metaserver/static/js/previews/data/actions","metaserver/static/js/file_viewer/sdk_file_viewer/experiments"],(function(e,t,s,a,i){"use strict";function n(e,t,s){e.dispatch((0,a.fetchPreviewData)(t,s,void 0,i.fileViewerFeatureExperiments.imgSizeOptimization))}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchPreviewDataUpdateStore=t.hydratePreviewStore=t.hydrateFileStoreAndPreviewStore=void 0,t.hydrateFileStoreAndPreviewStore=function(e,t,a){(0,s.hydrateFileStore)(e,t),n(e,t,a)},t.hydratePreviewStore=n,t.fetchPreviewDataUpdateStore=function(e,t,s,n){e.dispatch((0,a.fetchPreviewData)(t,s,n,i.fileViewerFeatureExperiments.imgSizeOptimization))}})),define("typescript/component_libraries/spectrum-sharing/src/components/back_button/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/back_button/back_button"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/back_button/back_button",["require","exports","tslib","react","classnames","dig-components/buttons","dig-components/icons"],(function(e,t,s,a,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackButton=void 0,a=s.__importStar(a),i=s.__importDefault(i);t.BackButton=e=>{const{autoFocus:t,className:s,onBackButtonClick:o,label:l,icon:c}=e,d=(0,i.default)("scl-back-button",s);return a.createElement("div",{className:d},a.createElement(n.Button,{hasNoUnderline:!0,"aria-label":"settings",autoFocus:t,className:"scl-back-button__wrapper",onClick:o,variant:"transparent"},a.createElement(r.UIIcon,{src:c,className:"scl-back-button__icon"}),a.createElement("span",{className:"scl-back-button__label"},l)))}})),define("typescript/component_libraries/spectrum-sharing/src/components/action_container/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/action_container/action_container"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/action_container/action_container",["require","exports","tslib","react","classnames","dig-components/typography"],(function(e,t,s,a,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionContainer=void 0,a=s.__importStar(a),i=s.__importDefault(i);const r="scl-action-container";class o extends a.Component{render(){const e=this.props,{banner:t,footer:o,children:l,className:c,header:d,headerSize:p,showBorder:u}=e,m=s.__rest(e,["banner","footer","children","className","header","headerSize","showBorder"]),h=(0,i.default)(c,r,{[`${r}--bordered`]:u});return a.createElement("div",Object.assign({className:h},m),d&&a.createElement("div",{className:`${r}__header`},a.createElement(n.Title,{size:p,isBold:!0},d)),t&&a.createElement("div",{className:`${r}__banner`},t),a.createElement("div",{className:`${r}__children`},l),o&&a.createElement("div",{className:`${r}__footer`},o))}}t.ActionContainer=o,o.displayName="ActionContainer",o.defaultProps={showBorder:!1}})),define("typescript/component_libraries/spectrum-sharing/src/components/action_section/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/action_section/action_section"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/action_section/action_section",["require","exports","tslib","react","classnames","dig-components/typography"],(function(e,t,s,a,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionSection=void 0,a=s.__importStar(a),i=s.__importDefault(i);const r="scl-action-section";class o extends a.Component{render(){const{children:e,className:t,layout:s,header:o,footerContent:l,footerActions:c,isHeaderBold:d}=this.props,p=(0,i.default)(t,r,{[`${r}--${s}`]:!!s});return a.createElement("div",{className:p},o&&a.createElement(n.Text,{className:`${r}__header`,tagName:"div",size:"small",isBold:d},o),a.createElement("div",{className:`${r}__children`},e),a.createElement("div",{className:`${r}__footer`},l&&a.createElement("div",{className:`${r}__footer-content`},l),c&&a.createElement("div",{className:`${r}__footer-actions`},c)))}}t.ActionSection=o,o.displayName="ActionSection",o.defaultProps={isHeaderBold:!0,layout:"rows"}})),define("typescript/component_libraries/spectrum-sharing/src/components/checkbox_with_label/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/checkbox_with_label/checkbox_with_label"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/checkbox_with_label/checkbox_with_label",["require","exports","tslib","react","classnames","dig-components/controls","dig-components/typography"],(function(e,t,s,a,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxWithLabel=void 0,a=s.__importStar(a),i=s.__importDefault(i);class o extends a.Component{render(){const{label:e,fontSize:t,isChecked:s,isCheckboxDisabled:o,onCheckboxToggled:l,className:c}=this.props,d=(0,i.default)(c,"scl-checkbox-with-label");return a.createElement("span",{className:d},a.createElement(n.Checkbox,{"aria-label":e,onChange:l,checked:s,disabled:o,id:"checkbox"}),a.createElement(r.Text,{className:"scl-checkbox-with-label__text",tagName:"label",size:t,htmlFor:"checkbox"},e))}}t.CheckboxWithLabel=o,o.displayName="CheckboxWithLabel"})),define("typescript/component_libraries/spectrum-sharing/src/components/card/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/card/card"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/card/card",["require","exports","tslib","classnames","react"],(function(e,t,s,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Card=t.baseClassName=void 0,a=s.__importDefault(a),i=s.__importStar(i),t.baseClassName="scl-card";class n extends i.PureComponent{render(){const{className:e}=this.props,s=(0,a.default)(t.baseClassName,e);return i.createElement("div",{className:s},this.renderHeader(),this.renderBody())}renderHeader(){if(this.props.icon||this.props.title||this.props.actions)return i.createElement("div",{className:`${t.baseClassName}__header`},this.props.icon&&i.createElement("div",{className:`${t.baseClassName}__icon`},this.props.icon),this.props.title&&i.createElement("div",{className:`${t.baseClassName}__title`},this.props.title),this.props.actions&&i.createElement("div",{className:`${t.baseClassName}__actions`},this.props.actions))}renderBody(){return i.createElement("div",{className:`${t.baseClassName}__body`},this.props.children)}}t.Card=n,n.displayName="Card"})),define("typescript/component_libraries/spectrum-sharing/src/components/confidential_folder_section/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/confidential_folder_section/confidential_folder_section"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/confidential_folder_section/confidential_folder_section",["require","exports","tslib","react","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_banner/index","dig-components/buttons","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","typescript/component_libraries/spectrum-sharing/src/utils/em_string"],(function(e,t,s,a,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfidentialFolderSection=void 0,a=s.__importStar(a);class l extends a.Component{constructor(){super(...arguments),this.restoreAccessToConfidentialFolder=()=>{const{teamName:e,onRestoreAccessClick:t}=this.props;t(!0,e)}}render(){const{intl:e,teamName:t,parentFolderName:s,isRestoreAccessEnabled:l}=this.props;let c,d;""!==s?(c=e.formatMessage({id:"V1N9tG",defaultMessage:'This folder isn’t shared with everyone who has access to parent folder "{parent}".'},{parent:o.Emstring.em_snippet(s,r.SNIPPET_SIZES.FILENAME)}),d=e.formatMessage({id:"R+Gy+p",defaultMessage:"Share with everyone"})):(c=e.formatMessage({id:"z87QTd",defaultMessage:"This folder isn’t shared with everyone on {team_name}."},{team_name:o.Emstring.em_snippet(t,r.SNIPPET_SIZES.DISPLAY_NAME)}),d=e.formatMessage({id:"R+Gy+p",defaultMessage:"Share with everyone"}));const p=a.createElement("div",{className:"confidential-folder-section"},c," ",l&&a.createElement(n.Button,{className:"button-as-link","aria-label":d,key:"restore access",variant:"transparent",size:"small",hasNoUnderline:!0,onClick:this.restoreAccessToConfidentialFolder},d));return a.createElement(i.SharingModalBanner,{type:"dark",message:p})}}t.ConfidentialFolderSection=l,l.displayName="ConfidentialFolderSection"})),define("typescript/component_libraries/spectrum-sharing/src/components/fixed_tabbed_container/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/fixed_tabbed_container/fixed_tabbed_container"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/fixed_tabbed_container/fixed_tabbed_container",["require","exports","tslib","classnames","react","spectrum/tabbed_header/index"],(function(e,t,s,a,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FixedTabbedContainer=void 0,a=s.__importDefault(a),i=s.__importStar(i);class r extends i.PureComponent{render(){const{activeTabId:e,className:t,onTabSelected:s,tabs:r}=this.props,o=(0,a.default)("scl-fixed-tabbed-container",t);return i.createElement("div",{className:o},i.createElement("div",{className:"scl-fixed-tabbed-container__tabbed-header"},i.createElement(n.TabbedHeader,{onSelection:s,activeTabId:e},r.map(t=>i.createElement(n.Tab,{active:e===t.id,className:"sharing-settings-modal__tab-header",id:t.id,key:t.id},t.label)))),i.createElement("div",{className:"scl-fixed-tabbed-container__content"},this.props.children))}}t.FixedTabbedContainer=r,r.displayName="FixedTabbedContainer"})),define("typescript/component_libraries/spectrum-sharing/src/components/form_validation_message/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/form_validation_message/form_validation_message"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/form_validation_message/form_validation_message",["require","exports","tslib","react","dig-components/banner"],(function(e,t,s,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormValidationMessage=void 0,a=s.__importStar(a),t.FormValidationMessage=function({message:e,variant:t}){if(!e)return null;const s="error"===t?"alert":"warning";return a.createElement(i.Banner,{type:s},a.createElement(i.Banner.Message,{className:"scl-sharing-modal-validation-warning__message"},e))}})),define("typescript/component_libraries/spectrum-sharing/src/components/help_info/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/help_info/help_info"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/help_info/help_info",["require","exports","tslib","react","classnames","dig-components/icons","dig-components/icons/src","dig-components/tooltips"],(function(e,t,s,a,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HelpInfo=void 0,a=s.__importStar(a),i=s.__importDefault(i);class l extends a.PureComponent{render(){const{id:e,className:t,text:s,placement:l,iconSize:c,children:d}=this.props,p=(0,i.default)(t,"scl-help-info");return a.createElement(o.Tooltip,{className:p,id:e,placement:l,title:s},a.createElement("span",{className:"scl-help-info"},d,a.createElement(n.UIIcon,{src:r.HelpLine,className:"scl-help-info__icon",size:c,"aria-label":""})))}}t.HelpInfo=l,l.displayName="HelpInfo",l.defaultProps={placement:"top",iconSize:"small"}})),define("typescript/component_libraries/spectrum-sharing/src/components/icons/icon_dropdown_caret",["require","exports","tslib","react"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconDropdownCaretBlueWeb=t.IconDropdownCaretWeb=t.IconDropdownCaretWin=t.IconDropdownCaretOsx=void 0,a=s.__importStar(a);t.IconDropdownCaretOsx=({className:e,variant:t="default"})=>a.createElement("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"9",height:"5",viewBox:"0 0 9 5"},a.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"highlighted"===t?"#0269D9":"#3E3E3E",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M8 1L4.5 4 1 1"}));t.IconDropdownCaretWin=({className:e,variant:t="default"})=>a.createElement("svg",{className:e,width:"12px",height:"6px",viewBox:"0 0 12 6",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{stroke:"highlighted"===t?"#0269D9":"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",fillOpacity:"0.8"},a.createElement("g",{fill:"#000000"},a.createElement("polygon",{points:"6 5.01369863 11.4626866 0 12 0.493150685 6 6 0 0.493150685 0.537313433 0"}))));t.IconDropdownCaretWeb=({className:e})=>a.createElement("svg",{className:e,width:"7px",height:"4px",viewBox:"0 0 7 4",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},a.createElement("g",{transform:"translate(-509.000000, -24.000000)",fill:"#637282"},a.createElement("g",{transform:"translate(444.000000, 16.000000)"},a.createElement("polygon",{points:"65 8 72 8 68.5 12"})))));t.IconDropdownCaretBlueWeb=({className:e})=>a.createElement("svg",{className:e,width:"7px",height:"4px",viewBox:"0 0 7 4",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},a.createElement("g",{transform:"translate(-509.000000, -128.000000)",fill:"#007AF5"},a.createElement("polygon",{id:"Arrow",points:"509 128 516 128 512.5 132"})))),t.IconDropdownCaretOsx.displayName="IconDropdownCaretOsx",t.IconDropdownCaretWin.displayName="IconDropdownCaretWin",t.IconDropdownCaretWeb.displayName="IconDropdownCaretWeb",t.IconDropdownCaretBlueWeb.displayName="IconDropdownCaretBlueWeb"})),define("typescript/component_libraries/spectrum-sharing/src/components/icons/icon_dropdown_selected",["require","exports","tslib","react"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconDropdownSelectedBlue=t.IconDropdownSelected=void 0,a=s.__importStar(a);t.IconDropdownSelected=({className:e})=>a.createElement("svg",{className:e,width:"12px",height:"12px",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},a.createElement("g",{fill:"#3E3E3E",fillRule:"nonzero"},a.createElement("path",{d:"M2.25927473,6.3493149 C1.89985258,5.92998906 1.2685526,5.88142752 0.849226756,6.24084967\n                  C0.429900914,6.60027182 0.381339377,7.2315718 0.740761528,7.65089765 L3.65485393,11.0506721\n                  C3.75823486,11.1606625 3.75823486,11.1606625 3.87986598,11.2500569 C4.38534754,11.5870446\n                  5.06830382,11.4504534 5.40529152,10.9449718 L11.3320684,2.05480647 C11.6384209,1.59527778\n                  11.514247,0.974408438 11.0547183,0.668055979 C10.5951896,0.36170352 9.97432029,0.485877389\n                  9.66796784,0.945406077 L4.40019879,8.84705964 L2.25927473,6.3493149 Z"})))),t.IconDropdownSelected.displayName="IconDropdownSelected";t.IconDropdownSelectedBlue=({className:e})=>a.createElement("svg",{className:e,width:"14px",height:"11px",viewBox:"0 0 14 11",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},a.createElement("g",{transform:"translate(-3.000000, -5.000000)",fill:"#0070E0"},a.createElement("path",{d:"M11,13 L11,3 L13,3 L13,13 L13,15 L7,15 L7,13 L11,13 Z",id:"Icon",transform:"translate(10.000000, 9.000000) rotate(-315.000000) translate(-10.000000, -9.000000) "})))),t.IconDropdownSelectedBlue.displayName="IconDropdownSelectedBlue"})),define("typescript/component_libraries/spectrum-sharing/src/components/icons/icon_link",["require","exports","tslib","react"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconLink=void 0,a=s.__importStar(a);const i={default:"transparent",active:"#D0D4D9",edit:"transparent",view:"transparent"},n=()=>a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},a.createElement("g",{transform:"translate(-24.000000, -8.000000)"},a.createElement("g",null,a.createElement("g",{transform:"translate(24.000000, 8.000000)"},a.createElement("circle",{stroke:"#D0D4D9",strokeWidth:"1.32",cx:"16",cy:"16",r:"15.34"}),a.createElement("path",{d:"M21.0859375,13.1015625 L20.0195312,14.1679688 L17.8320312,11.9804688\n                L18.8984375,10.9140625 C19.007813,10.804687 19.1445304,10.75 19.3085938,10.75\n                C19.4726571,10.75 19.6093745,10.804687 19.71875,10.9140625 L21.0859375,12.28125\n                C21.195313,12.3906255 21.25,12.5273429 21.25,12.6914062 C21.25,12.8554696\n                21.195313,12.992187 21.0859375,13.1015625 Z M10.75,19.0625 L17.203125,12.609375\n                L19.390625,14.796875 L12.9375,21.25 L10.75,21.25 L10.75,19.0625 Z",fill:"#6A7C8F"}))))),r=()=>a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},a.createElement("g",{transform:"translate(-24.000000, -8.000000)"},a.createElement("g",null,a.createElement("g",{transform:"translate(24.000000, 8.000000)"},a.createElement("circle",{stroke:"#D0D4D9",strokeWidth:"1.32",cx:"16",cy:"16",r:"15.34"}),a.createElement("path",{d:"M14.7695312,14.7695312 C15.1158871,14.4231754 15.5260393,14.25 16,14.25\n                  C16.4739607,14.25 16.8841129,14.4231754 17.2304688,14.7695312 C17.5768246,\n                  15.1158871 17.75,15.5260393 17.75,16 C17.75,16.4739607 17.5768246,16.8841129\n                  17.2304688,17.2304688 C16.8841129,17.5768246 16.4739607,17.75 16,17.75 C15.5260393,\n                  17.75 15.1158871,17.5768246 14.7695312,17.2304688 C14.4231754,16.8841129 14.25,\n                  16.4739607 14.25,16 C14.25,15.5260393 14.4231754,15.1158871 14.7695312,14.7695312\n                  Z M13.921875,18.078125 C14.5052113,18.643232 15.1979127,18.9257812 16,18.9257812\n                  C16.8020873,18.9257812 17.4902315,18.6386747 18.0644531,18.0644531 C18.6386747,\n                  17.4902315 18.9257812,16.8020873 18.9257812,16 C18.9257812,15.1979127 18.6386747,\n                  14.5097685 18.0644531,13.9355469 C17.4902315,13.3613253 16.8020873,13.0742188 16,\n                  13.0742188 C15.1979127,13.0742188 14.5097685,13.3613253 13.9355469,13.9355469\n                  C13.3613253,14.5097685 13.0742188,15.1979127 13.0742188,16 C13.0742188,16.8020873\n                  13.356768,17.4947887 13.921875,18.078125 Z M12.0898438,12.828125 C13.2565163,\n                  12.0260377 14.5598886,11.625 16,11.625 C17.4401114,11.625 18.7434837,12.0260377\n                  19.9101562,12.828125 C21.0768288,13.6302123 21.915362,14.6874934 22.4257812,16\n                  C21.915362,17.3125066 21.0768288,18.3697877 19.9101562,19.171875 C18.7434837,\n                  19.9739623 17.4401114,20.375 16,20.375 C14.5598886,20.375 13.2565163,19.9739623\n                  12.0898438,19.171875 C10.9231712,18.3697877 10.084638,17.3125066 9.57421875,\n                  16 C10.084638,14.6874934 10.9231712,13.6302123 12.0898438,12.828125 Z",fill:"#667C91"}))))),o=()=>a.createElement("g",{fill:"#6A7C8F",transform:"translate(16.071068, 16.071068) rotate(-315.000000)\n                  translate(-16.071068, -16.071068) translate(13.071068, 9.071068)"},a.createElement("path",{d:"M5.98487348,4.76239943 L4.58487348,4.76239943 L4.58487348,3.36107038\n                      C4.58487348,2.58309388 3.95807213,1.96239943 3.18487348,1.96239943\n                      C2.40628423,1.96239943 1.78487348,2.58860575 1.78487348,3.36107038\n                      L1.78487348,6.16372849 C1.78487348,6.94170499 2.41167483,7.56239943\n                      3.18487348,7.56239943 L3.18487348,8.96239943 C1.63847618,8.96239943\n                      0.384873479,7.70483456 0.384873479,6.16532106 L0.384873479,3.3594778\n                      C0.384873479,1.81469408 1.64162279,0.562399434 3.18487348,0.562399434\n                      C4.73127078,0.562399434 5.98487348,1.81996431 5.98487348,3.3594778\n                      L5.98487348,4.76239943 Z"}),a.createElement("path",{d:"M0.384873479,9.66239943 L1.78487348,9.66239943 L1.78487348,11.0637285\n                      C1.78487348,11.841705 2.41167483,12.4623994 3.18487348,12.4623994\n                      C3.96346273,12.4623994 4.58487348,11.8361931 4.58487348,11.0637285\n                      L4.58487348,8.26107038 C4.58487348,7.48309388 3.95807213,6.86239943\n                      3.18487348,6.86239943 L3.18487348,5.46239943 C4.73127078,5.46239943\n                      5.98487348,6.71996431 5.98487348,8.2594778 L5.98487348,11.0653211\n                      C5.98487348,12.6101048 4.72812417,13.8623994 3.18487348,13.8623994\n                      C1.63847618,13.8623994 0.384873479,12.6048346 0.384873479,11.0653211\n                      L0.384873479,9.66239943 Z"}));t.IconLink=({className:e,variant:t})=>a.createElement("svg",{className:e,width:"32px",height:"32px",viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},a.createElement("circle",{stroke:"#D0D4D9",strokeWidth:"1.32",cx:"16",cy:"16",r:"15.34",fill:i[t||"default"]}),(e=>{switch(e){case"edit":return n();case"view":return r();default:return o()}})(t||"default")))})),define("typescript/component_libraries/spectrum-sharing/src/components/links_info_row/links_info_row",["require","exports","tslib","classnames","dig-components/buttons","dig-components/typography","react"],(function(e,t,s,a,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinksInfoRow=t.baseClassName=void 0,a=s.__importDefault(a),r=s.__importStar(r),t.baseClassName="scl-links-info-row";class o extends r.PureComponent{render(){const{className:e,icon:s,disableIcon:o,title:l,disableTitle:c,subtitle:d,disableButton:p,buttonText:u,onClickButton:m}=this.props,h=(0,a.default)(t.baseClassName,e),g=c?"faint":"standard";return r.createElement("div",{className:h},r.createElement("div",{className:`${h}__icon ${o?"disabled":""}`},s),r.createElement("div",{className:`${h}__container`},r.createElement("div",{className:`${h}__title ${c?"disabled":""}`},r.createElement(n.Text,{size:"small",color:g},l)),r.createElement("div",{className:`${h}__subtitle`},r.createElement(n.Text,{color:"faint",size:"small"},d))),r.createElement("div",{className:`${h}__button ${p?"disabled":""}`},r.createElement(i.Button,{variant:"transparent",size:"small",onClick:m},u)))}}t.LinksInfoRow=o,o.displayName="LinksInfoRow"})),define("typescript/component_libraries/spectrum-sharing/src/components/member_row/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/member_row/member_row"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/member_row/member_row",["require","exports","tslib","classnames","react","spectrum/avatar/index","typescript/component_libraries/spectrum-sharing/src/components/scooter_loader/index","typescript/component_libraries/spectrum-sharing/src/components/sharing_avatar_initials/index","typescript/component_libraries/spectrum-sharing/src/components/sharing_portal_dropdown/index"],(function(e,t,s,a,i,n,r,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemberRow=void 0,a=s.__importDefault(a),i=s.__importStar(i);class c extends i.PureComponent{constructor(){super(...arguments),this.handleDropdownChange=e=>{const{id:t,onChange:s,optionGroup:a}=this.props;!s||a&&a.selectedApiId===e||s(t,e)}}render(){const{className:e,variant:t="default",position:s="default",tag:n}=this.props,r=n||"li",o=(0,a.default)(e,{"scl-member-row":!0,"scl-member-row-borderless":"borderless"===t,"scl-member-row-default":"default"===t,"scl-member-row-narrow":"narrow"===t},{"scl-member-row-positioned":"bottom"===s||"middle"===s,"scl-member-row-bottom":"bottom"===s});return i.createElement(r,{className:o},i.createElement("div",{className:"scl-member-row-outer"},this.renderAvatar(),i.createElement("div",{className:"scl-member-row-info"},this.renderDisplayName(),this.renderMemberDetails())),this.renderRightSideElement())}renderAvatar(){const{avatarHidden:e,avatarUrl:t,avatarElement:s,displayName:a,id:r,initials:l,initialAvatarShape:c}=this.props;return e?i.createElement("div",{className:"scl-member-row-avatar-empty"}):s||(t?i.createElement(n.Avatar,{src:t,className:"scl-member-row-avatar"}):i.createElement(o.SharingAvatarInitials,{avatarSize:32,backgroundColor:(0,n.avatarColorForUserIdentifier)(a||r),className:"scl-member-row-avatar",shape:c},l))}renderRightSideElement(){const{id:e,loadingSpinnerVisible:t,optionGroup:s,userDisabled:a}=this.props;let n=null;return t?n=i.createElement(r.ScooterLoader,null):s&&(n=a||1===s.options.length&&s.selectedApiId===s.options[0].apiId?i.createElement("div",null," ",s.label," "):i.createElement(l.SharingPortalDropdown,{id:e,optionGroup:s,onSelection:this.handleDropdownChange})),n}renderDisabledMessage(){return this.props.disabledMessage?[i.createElement("span",{key:0,className:"u-font-meta dot"}," · "),i.createElement("span",{key:1,className:"u-font-danger"}," ",this.props.disabledMessage)]:null}renderNameTitleAndText(){return i.createElement("span",{className:"scl-member-row-info-display-name-title",title:this.props.displayName},this.props.truncatedDisplayName||this.props.displayName)}renderPASSDot(){return this.props.passString?i.createElement("span",{className:"scl-member-row-dot"}," · "):null}renderOffTeamDot(){return this.props.offTeamMessage&&this.props.description?i.createElement("span",{className:"u-font-meta"}," · "):null}renderPASS(){const{present:e,passString:t}=this.props;if(t){const s=(0,a.default)({"scl-member-row-last-seen":!0,"scl-member-row-last-seen-not-present":!e});return i.createElement("span",{className:s},t)}return null}renderDisplayName(){return i.createElement("div",{className:"scl-member-row-display-name"},i.createElement("span",{className:this.props.onClickDisplayName?"scl-member-row-pointer":"",onClick:this.props.onClickDisplayName},this.renderNameTitleAndText(),this.renderDisabledMessage(),this.renderPASSDot(),this.renderPASS()))}renderOffTeamMessage(e){return e?i.createElement("span",{className:"u-font-meta"},e):null}renderMemberDetails(){const{description:e,offTeamMessage:t,truncatedDescription:s}=this.props;return i.createElement("div",{className:"scl-member-row-details"},i.createElement("span",{className:this.props.onClickDetails?"scl-member-row-pointer":"",onClick:this.props.onClickDetails},i.createElement("span",{className:"scl-member-row-details-span",title:e},s||e),this.renderOffTeamDot(),this.renderOffTeamMessage(t)))}}t.MemberRow=c,c.displayName="MemberRow"})),define("typescript/component_libraries/spectrum-sharing/src/components/scooter_loader/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/scooter_loader/scooter_loader"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/scooter_loader/scooter_loader",["require","exports","tslib","classnames","react"],(function(e,t,s,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScooterLoader=void 0,a=s.__importDefault(a),i=s.__importStar(i);t.ScooterLoader=e=>{var{className:t}=e,n=s.__rest(e,["className"]);return i.createElement("div",Object.assign({className:(0,a.default)("scl-scooter-loader",t)},n),i.createElement("div",{className:"scl-scooter-loader-animation"}))},t.ScooterLoader.displayName="ScooterLoader"})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_contact_token/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/sharing_contact_token/sharing_contact_token"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_contact_token/sharing_contact_token",["require","exports","tslib","react","spectrum/avatar/index","spectrum/tooltip/index"],(function(e,t,s,a,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingContactToken=void 0,a=s.__importStar(a);class r extends a.PureComponent{render(){const{avatarUrl:e,displayName:t,validation:s}=this.props,r=a.createElement("div",{style:{display:"flex",maxWidth:"200px"}},e&&a.createElement(i.Avatar,{size:16,src:e}),a.createElement("div",{style:{flex:"auto",marginLeft:"5px",minWidth:"0",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},t));return s&&"invalid"===s.state?a.createElement(n.Tooltip,{tooltipContent:s.msg?s.msg:""},r):r}}t.SharingContactToken=r,r.displayName="SharingContactToken"})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_dropdown_menu/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/sharing_dropdown_menu/sharing_dropdown_menu","typescript/component_libraries/spectrum-sharing/src/components/sharing_dropdown_menu/sharing_dropdown_menu_button","typescript/component_libraries/spectrum-sharing/src/components/sharing_dropdown_menu/sharing_dropdown_menu_item"],(function(e,t,s,a,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t),s.__exportStar(i,t),s.__exportStar(n,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_dropdown_menu/sharing_dropdown_menu",["require","exports","tslib","classnames","react","spectrum/dropdown_menu/index"],(function(e,t,s,a,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingDropdownMenu=t.baseClassName=void 0,a=s.__importDefault(a),i=s.__importStar(i),t.baseClassName="scl-sharing-dropdown-menu";t.SharingDropdownMenu=e=>{const{position:r,className:o}=e,l=s.__rest(e,["position","className"]),c=(0,a.default)(t.baseClassName,o,{[`${t.baseClassName}--right`]:"right"===r});return i.createElement(n.DropdownMenu,Object.assign({className:c},l))},t.SharingDropdownMenu.displayName="SharingDropdownMenu"})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_dropdown_menu/sharing_dropdown_menu_button",["require","exports","tslib","classnames","react","spectrum/dropdown_menu/index","typescript/component_libraries/spectrum-sharing/src/components/icons/icon_dropdown_caret"],(function(e,t,s,a,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingDropdownMenuButton=void 0,a=s.__importDefault(a),i=s.__importStar(i);const o="scl-sharing-dropdown-menu-button";class l extends i.PureComponent{render(){const e=this.props,{children:t,className:l}=e,c=s.__rest(e,["children","className"]),d=(0,a.default)(o,l);return i.createElement(n.DropdownMenuButton,Object.assign({className:d},c),t,i.createElement(r.IconDropdownCaretOsx,{className:`${o}__icon ${o}__icon--osx`}),i.createElement(r.IconDropdownCaretWin,{className:`${o}__icon ${o}__icon--win`}))}}t.SharingDropdownMenuButton=l,l.displayName="SharingDropdownMenuButton"})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_dropdown_menu/sharing_dropdown_menu_item",["require","exports","tslib","classnames","react","spectrum/dropdown_menu/index","typescript/component_libraries/spectrum-sharing/src/components/icons/icon_dropdown_selected"],(function(e,t,s,a,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingDropdownMenuItem=void 0,a=s.__importDefault(a),i=s.__importStar(i);const o="scl-sharing-dropdown-menu-item";t.SharingDropdownMenuItem=e=>{var{description:t,label:l,selected:c,value:d}=e,p=s.__rest(e,["description","label","selected","value"]);return i.createElement(n.MenuItem,Object.assign({className:o,key:d,value:d,text:l,selected:c},p),c&&i.createElement(r.IconDropdownSelected,{className:`${o}__selected-icon`}),i.createElement("div",{className:(0,a.default)(`${o}__wrapper`,{[`${o}__wrapper-selected`]:c})},i.createElement("div",{className:`${o}__label`},l),t&&i.createElement("div",{className:`${o}__description`},t)))},t.SharingDropdownMenuItem.displayName="SharingDropdownMenuItem"})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_checkbox_row/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_checkbox_row/sharing_modal_checkbox_row"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_checkbox_row/sharing_modal_checkbox_row",["require","exports","tslib","classnames","react","spectrum/checkbox/index","spectrum/tooltip/index","spectrum/util/uuid_generator"],(function(e,t,s,a,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalCheckboxRow=void 0,a=s.__importDefault(a),i=s.__importStar(i);class l extends i.PureComponent{constructor(e){super(e),this.onCheckChanged=e=>{this.props.onCheckChanged("checked"===e)},this.checkboxId=(0,o.generateUUID)("scl-sharing-modal-checkbox-row")}render(){const{checked:e,className:t,disabled:s,labelText:o,tooltipData:l}=this.props,c=(0,a.default)("scl-sharing-modal-checkbox-row",t,{"scl-sharing-modal-checkbox-row--disabled":s}),d=i.createElement(n.Checkbox,{id:this.checkboxId,checked:e?"checked":"unchecked",disabled:s,onChange:this.onCheckChanged}),p=!(!l||!l.alwaysShow),u=l?i.createElement(r.Tooltip,{className:l.className,tooltipContent:l.content,isShowInitially:p,showOnMouseMove:!p,closeOnBlur:!p,positioning:l.positioning},d):d;return i.createElement("div",{className:c},u,i.createElement("label",{className:"scl-sharing-modal-checkbox-row__label",htmlFor:this.checkboxId},o))}}t.SharingModalCheckboxRow=l,l.displayName="SharingModalCheckboxRow"})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_contacts_field/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_contacts_field/sharing_modal_contacts_field"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_contacts_field/sharing_modal_contacts_field",["require","exports","tslib","classnames","react","spectrum/dropdown_menu/index","spectrum/tooltip/index","typescript/component_libraries/spectrum-sharing/src/components/sharing_dropdown_menu/index"],(function(e,t,s,a,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalContactsField=t.baseClassName=void 0,a=s.__importDefault(a),i=s.__importStar(i),t.baseClassName="scl-sharing-modal-contacts-field";class l extends i.Component{constructor(e){super(e),this.renderDropdown=()=>{const{labelledAccessTypes:e,selectedAccessType:t,showNoEditTooltip:s,noEditText:a}=this.props,l=t?t.label:void 0,c=i.createElement(o.SharingDropdownMenu,{position:"right",onSelection:this.handleChange},i.createElement(o.SharingDropdownMenuButton,{disabled:s},l),i.createElement(n.Menu,null,i.createElement(i.Fragment,null,e.map(e=>i.createElement(o.SharingDropdownMenuItem,{"aria-label":e.ariaLabel,description:e.details,key:e.apiId,label:e.label,selected:t&&t.apiId===e.apiId,value:e.apiId})))));return s?i.createElement(r.Tooltip,{positioning:"below",tooltipContent:a},c):c},this.handleChange=e=>{this.props.onAccessTypeChange&&this.props.onAccessTypeChange(e)}}render(){const{className:e,toLabel:s}=this.props,n=(0,a.default)(t.baseClassName,e);return i.createElement("div",{className:n},i.createElement("div",{className:`${t.baseClassName}__left`},i.createElement("div",{className:`${t.baseClassName}__to-label`},s),i.createElement("div",{className:`${t.baseClassName}__input`},this.props.contactsField)),i.createElement("div",{className:`${t.baseClassName}__right`},this.renderDropdown()))}}t.SharingModalContactsField=l,l.displayName="SharingModalContactsField"})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_inband/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_inband/sharing_modal_footer_inband"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_inband/sharing_modal_footer_inband",["require","exports","tslib","classnames","react","spectrum/button/index"],(function(e,t,s,a,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalFooterInband=void 0,a=s.__importDefault(a),i=s.__importStar(i);class r extends i.PureComponent{render(){const{className:e,children:t,textButtonShare:s,isButtonShareDisabled:r,onClickButtonShare:o}=this.props,l=(0,a.default)("scl-sharing-modal-footer-inband",e,"scl-sharing-modal-footer");return i.createElement("div",{className:l},t,i.createElement("div",{className:"scl-sharing-modal-footer-inband__spacer"}),i.createElement(n.Button,{variant:"primary",className:"scl-sharing-modal-footer-inband__button","aria-label":s,onClick:o,disabled:r},s))}}t.SharingModalFooterInband=r,r.defaultProps={isButtonShareDisabled:!1},r.displayName="SharingModalFooterInband"})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_link/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_link/sharing_modal_footer_link","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_link/sharing_modal_footer_link_create","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_link/sharing_modal_footer_link_disabled","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_link/sharing_modal_footer_link_loading","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_link/sharing_modal_footer_link_options","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_link/sharing_modal_footer_link_copy"],(function(e,t,s,a,i,n,r,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t),s.__exportStar(i,t),s.__exportStar(n,t),s.__exportStar(r,t),s.__exportStar(o,t),s.__exportStar(l,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_link_list/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_link_list/sharing_modal_footer_link_list"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_link_list/sharing_modal_footer_link_list",["require","exports","tslib","classnames","react"],(function(e,t,s,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalFooterLinkList=t.baseClassName=void 0,a=s.__importDefault(a),i=s.__importStar(i),t.baseClassName="scl-sharing-modal-footer-link-list";class n extends i.PureComponent{render(){const e=(0,a.default)(t.baseClassName,this.props.className);return i.createElement("div",{className:e},i.createElement("div",{className:`${t.baseClassName}__header`},i.createElement("div",{className:`${t.baseClassName}__title`},this.props.title),i.createElement("div",{className:`${t.baseClassName}__actions`},this.props.actions)),i.createElement("div",{className:`${t.baseClassName}__items`},this.props.children))}}t.SharingModalFooterLinkList=n,n.displayName="SharingModalFooterLinkList"})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_link/sharing_modal_footer_link",["require","exports","tslib","classnames","react","typescript/component_libraries/spectrum-sharing/src/components/icons/icon_link"],(function(e,t,s,a,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalFooterLink=t.baseClassName=void 0,a=s.__importDefault(a),i=s.__importStar(i),t.baseClassName="scl-sharing-modal-footer-link";class r extends i.PureComponent{render(){const e=(0,a.default)(t.baseClassName,this.props.className);return i.createElement("div",{className:e},!0!==this.props.isIconHidden&&i.createElement("div",{className:`${t.baseClassName}__icon`},this.props.icon?this.props.icon:i.createElement(n.IconLink,null)),i.createElement("div",{className:`${t.baseClassName}__body`},this.props.body),i.createElement("div",{className:`${t.baseClassName}__actions`},this.props.actions))}}t.SharingModalFooterLink=r,r.displayName="SharingModalFooterLink"})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_link/sharing_modal_footer_link_copy",["require","exports","tslib","react","classnames","spectrum/button/index","typescript/component_libraries/spectrum-sharing/src/components/icons/icon_link","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_link/sharing_modal_footer_link"],(function(e,t,s,a,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalFooterLinkCopy=void 0,a=s.__importStar(a),i=s.__importDefault(i);const l=function(e){const t=(0,i.default)(o.baseClassName,`${o.baseClassName}--copy`,e.className);return a.createElement(o.SharingModalFooterLink,{className:t,icon:e.icon?e.icon:a.createElement(r.IconLink,{variant:"active"}),isIconHidden:e.isIconHidden,body:a.createElement("input",Object.assign({readOnly:!0,autoFocus:!0,value:e.sharedLinkUrl,onClick:c,onFocus:c,"aria-label":e.labelSharedLinkUrl},e.inputProps)),actions:a.createElement(n.Button,{variant:"borderless",onClick:e.onClickButton},e.textButton)})};t.SharingModalFooterLinkCopy=l,l.displayName="SharingModalFooterLinkCopy";const c=e=>{e.currentTarget.select()}})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_link/sharing_modal_footer_link_create",["require","exports","tslib","react","spectrum/button/index","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_link/sharing_modal_footer_link"],(function(e,t,s,a,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalFooterLinkCreate=void 0,a=s.__importStar(a);t.SharingModalFooterLinkCreate=e=>a.createElement(n.SharingModalFooterLink,{className:e.className,icon:e.icon,body:e.statusNoLinkCreated,actions:a.createElement(i.Button,{variant:"borderless",onClick:e.onClickButtonCreateLink},e.textButtonCreateLink)})})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_link/sharing_modal_footer_link_disabled",["require","exports","tslib","react","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_link/sharing_modal_footer_link"],(function(e,t,s,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalFooterLinkDisabled=void 0,a=s.__importStar(a);t.SharingModalFooterLinkDisabled=e=>a.createElement(i.SharingModalFooterLink,{className:e.className,icon:e.icon,body:a.createElement("div",null,e.statusDisabledLink)})})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_link/sharing_modal_footer_link_loading",["require","exports","tslib","classnames","react","typescript/component_libraries/spectrum-sharing/src/components/scooter_loader/index","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_link/sharing_modal_footer_link"],(function(e,t,s,a,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalFooterLinkLoading=void 0,a=s.__importDefault(a),i=s.__importStar(i);t.SharingModalFooterLinkLoading=e=>{const t=(0,a.default)(r.baseClassName,`${r.baseClassName}--loading`,e.className);return i.createElement(r.SharingModalFooterLink,{className:t,icon:e.icon,body:i.createElement("div",{className:`${r.baseClassName}--loading-body`},i.createElement("span",null,e.statusCreatingLink),i.createElement(n.ScooterLoader,null))})}})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_link/sharing_modal_footer_link_options",["require","exports","tslib","react","spectrum/button/index","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_footer_link/sharing_modal_footer_link","typescript/component_libraries/spectrum-sharing/src/components/icons/icon_link"],(function(e,t,s,a,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalFooterLinkOptions=void 0,a=s.__importStar(a);t.SharingModalFooterLinkOptions=e=>a.createElement(n.SharingModalFooterLink,{className:e.className,icon:e.icon?e.icon:a.createElement(r.IconLink,{variant:"active"}),body:e.statusLinkCreated,actions:a.createElement("div",null,a.createElement(i.Button,{key:"settings",variant:"borderless",onClick:e.onClickButtonLinkSettings},e.textButtonLinkSettings),a.createElement("span",{key:"separator",className:"scl-sharing-modal-footer-link__sep"},"•"),a.createElement(i.Button,{className:e.buttonCopyClassName,key:"copy",variant:"borderless",onClick:e.onClickButtonCopyLink},e.textButtonCopyLink))})})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_header/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_header/sharing_modal_header","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_header/sharing_modal_header_title","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_header/sharing_modal_header_input","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_header/sharing_modal_header_with_back_button"],(function(e,t,s,a,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t),s.__exportStar(i,t),s.__exportStar(n,t),s.__exportStar(r,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_header/sharing_modal_header",["require","exports","tslib","react","classnames","dig-components/buttons","dig-components/icons","dig-components/icons/src"],(function(e,t,s,a,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalHeader=t.baseClassName=void 0,a=s.__importStar(a),i=s.__importDefault(i),t.baseClassName="scl-sharing-modal-header";t.SharingModalHeader=e=>{const{children:s,className:l,closeButtonVisible:c=!1,icon:d,settingsButtonVisible:p=!1}=e,u=(0,i.default)(t.baseClassName,l);return a.createElement("div",{className:u},a.createElement("div",{className:`${t.baseClassName}__icon`},d),a.createElement("div",{className:`${t.baseClassName}__children`},s),p&&a.createElement(n.IconButton,{"aria-label":"settings",className:`${t.baseClassName}__settings`,onClick:e.onClickSettingsButton,variant:"transparent"},a.createElement(r.UIIcon,{src:o.SettingsLine})),c&&a.createElement(n.IconButton,{"aria-label":"close",className:`${t.baseClassName}__close`,onClick:e.onClickCloseButton,variant:"transparent"},a.createElement(r.UIIcon,{src:o.CloseLine})))}})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_header/sharing_modal_header_input",["require","exports","tslib","react","dig-components/text_fields","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_header/sharing_modal_header"],(function(e,t,s,a,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalHeaderInput=void 0,a=s.__importStar(a);t.SharingModalHeaderInput=e=>{const{forwardedRef:t,inputAriaLabel:r,inputAutoFocus:o,inputPlaceholder:l,onInputBlur:c,onInputChange:d,onInputFocus:p,onInputKeyUp:u}=e,m=s.__rest(e,["forwardedRef","inputAriaLabel","inputAutoFocus","inputPlaceholder","onInputBlur","onInputChange","onInputFocus","onInputKeyUp"]);return a.createElement(n.SharingModalHeader,Object.assign({closeButtonVisible:!0},m),a.createElement(i.TextInput,{ref:e.forwardedRef,className:`${n.baseClassName}__input`,"aria-label":r,autoFocus:o,onChange:d,onFocus:p,onBlur:c,onKeyUp:u,placeholder:l}),e.children)},t.SharingModalHeaderInput.displayName="SharingModalHeaderInput"})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_header/sharing_modal_header_title",["require","exports","tslib","react","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_header/sharing_modal_header","dig-components/typography"],(function(e,t,s,a,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalHeaderTitle=void 0,a=s.__importStar(a);t.SharingModalHeaderTitle=e=>{{const{title:t,subTitle:r}=e,o=s.__rest(e,["title","subTitle"]);return a.createElement(i.SharingModalHeader,Object.assign({},o),a.createElement(n.Text,{size:"standard",isBold:!0,className:`${i.baseClassName}__title`},t),r&&a.createElement("div",{className:`${i.baseClassName}__sub-title`},r))}},t.SharingModalHeaderTitle.displayName="SharingModalHeaderTitle"})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_header/sharing_modal_header_with_back_button",["require","exports","tslib","react","typescript/component_libraries/spectrum-sharing/src/components/back_button/index","dig-components/icons/src","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_header/sharing_modal_header"],(function(e,t,s,a,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalHeaderWithBackButton=void 0,a=s.__importStar(a);t.SharingModalHeaderWithBackButton=e=>{const t=`${r.baseClassName}--with-back-button`;return a.createElement(r.SharingModalHeader,Object.assign({className:t},e),a.createElement(i.BackButton,{autoFocus:e.autoFocus,onBackButtonClick:e.onClickBackButton,label:e.label,icon:n.ChevronLeftLine}))},t.SharingModalHeaderWithBackButton.displayName="SharingModalHeaderWithBackButton"})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_message_field/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_message_field/sharing_modal_message_field"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_message_field/sharing_modal_message_field",["require","exports","tslib","classnames","react"],(function(e,t,s,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalMessageField=void 0,a=s.__importDefault(a),i=s.__importStar(i);class n extends i.PureComponent{render(){const{className:e,children:t,onChange:s,value:n,placeholder:r}=this.props,o=(0,a.default)("scl-sharing-modal-message-field",e);return i.createElement("div",{className:o},i.createElement("textarea",{"aria-label":r,className:"scl-textarea",placeholder:r,onChange:s,value:n}),t)}}t.SharingModalMessageField=n,n.displayName="SharingModalMessageField"})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_settings_row/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_settings_row/sharing_modal_settings_row"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_settings_row/sharing_modal_settings_row",["require","exports","tslib","classnames","react"],(function(e,t,s,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalSettingsRow=void 0,a=s.__importDefault(a),i=s.__importStar(i);class n extends i.PureComponent{constructor(){super(...arguments),this.handleLinkClicked=e=>{e.preventDefault(),this.props.descriptionLinkOnClicked&&this.props.descriptionLinkUrl&&this.props.descriptionLinkOnClicked(this.props.descriptionLinkUrl)}}render(){const{className:e,rightSideElement:t,bottomElement:s}=this.props,n=(0,a.default)("scl-sharing-modal-settings-row",e);return i.createElement("div",{className:n},i.createElement("div",{className:"scl-sharing-modal-settings-row-outer"},i.createElement("div",{className:"scl-sharing-modal-settings-row-info"},i.createElement("div",{className:"scl-sharing-modal-settings-row-display-name"},i.createElement("span",{className:"scl-sharing-modal-settings-row-info-display-name-title",title:this.props.displayNameTitle},this.props.displayName)),i.createElement("div",{className:"scl-sharing-modal-settings-row-details"},i.createElement("span",{className:"scl-sharing-modal-settings-row-details-span",title:this.props.description},this.props.description,this.props.descriptionLinkUrl&&this.props.descriptionLinkText&&i.createElement("span",null," ",i.createElement("a",{className:"scl-sharing-modal-settings-row-description-link",href:"#",onClick:this.handleLinkClicked},this.props.descriptionLinkText))))),t&&i.createElement("div",{className:"scl-sharing-modal-settings-right-element"},t)),s&&i.createElement("div",{className:"scl-sharing-modal-settings-bottom-element"},s))}}t.SharingModalSettingsRow=n,n.displayName="SharingModalSettingsRow"})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_downgrade_banner/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_downgrade_banner/sharing_modal_downgrade_banner"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_downgrade_banner/sharing_modal_downgrade_banner",["require","exports","tslib","react","dig-components/buttons","dig-components/icons","dig-components/icons/src","dig-components/typography"],(function(e,t,s,a,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingModalDowngradeBanner=void 0,a=s.__importStar(a);const l="scl-sharing-modal-downgrade-banner";class c extends a.PureComponent{render(){const{subheader:e,header:t,onClickOutlineButton:s,onClickTransparentButton:n,outlineButtonLabel:r,transparentButtonLabel:c,showCloseButton:d}=this.props;return a.createElement("div",{className:`${l} dig-Theme---VIS`},a.createElement("div",{className:`${l}__header`},a.createElement(o.Text,{isBold:!0,size:"large"},t),d&&this.renderCloseButton()),a.createElement("div",{className:`${l}__subheader`},a.createElement(o.Text,null,e)),a.createElement("div",{className:`${l}__buttons`},a.createElement(i.Button,{variant:"outline",onClick:s},r),a.createElement(i.Button,{variant:"transparent",onClick:n},c)))}renderCloseButton(){return a.createElement(i.IconButton,{variant:"transparent","aria-label":"close",className:`${l}__close`,onClick:this.props.onClickCloseButton,size:"standard"},a.createElement(n.UIIcon,{src:r.CloseLine}))}}t.SharingModalDowngradeBanner=c,c.displayName="SharingModalDowngradeBanner"})),define("typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/restricted_visibility_banner",["require","exports","tslib","react","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","typescript/component_libraries/spectrum-sharing/src/utils/em_string","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_banner/index","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/link_metadata_types"],(function(e,t,s,a,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestrictedVisibilityBanner=void 0,a=s.__importStar(a),i=s.__importStar(i);class l extends a.Component{render(){const e=this.props.linkPermissions.resolved_visibility,t=this.props.linkPermissions.audience_options[0].disallowed_reason;return t!==o.LinkAudienceDisallowedReason.RestrictedBySharedFolder&&t!==o.LinkAudienceDisallowedReason.DeleteAndRecreate?null:a.createElement(r.SharingModalBanner,{className:"sharing-settings-modal__banner",type:"default",message:a.createElement("span",null,a.createElement("span",{className:"shared-link-settings-modal__audience-disallowed-text"},this.audienceDisallowedText(e))," ",a.createElement("span",{className:"shared-link-settings-modal__audience-disallowed-advice u-font-meta"},this.audienceDisallowedAdviceText(t)))})}audienceDisallowedText(e){if(e===o.ResolvedVisibilityPolicy.shared_folder_only){let e=this.props.linkPermissions.restricting_shared_folder_path;return void 0!==e?(e=n.Emstring.em_snippet(e,i.SNIPPET_SIZES.FILENAME),this.props.intl.formatMessage({id:"Wzk4tW",defaultMessage:"Only members of the shared folder “{shared_folder_name}” can view this link."},{shared_folder_name:e})):void 0}return e===o.ResolvedVisibilityPolicy.only_you?this.props.intl.formatMessage({id:"kp9e20",defaultMessage:"Only you can view this link."}):void 0}audienceDisallowedAdviceText(e){return e===o.LinkAudienceDisallowedReason.RestrictedBySharedFolder?this.props.intl.formatMessage({id:"D2VN2I",defaultMessage:"To change who can access the link, go to the shared folder options."}):e===o.LinkAudienceDisallowedReason.DeleteAndRecreate?this.props.intl.formatMessage({id:"HbDkss",defaultMessage:"To change who can access the link, delete this link and create a new one."}):void 0}}t.RestrictedVisibilityBanner=l,l.displayName="RestrictedVisibilityBanner"})),define("typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/sharing_settings_dropdown",["require","exports","tslib","react","spectrum/dropdown_menu/index","spectrum/dropdown_menu/index","typescript/component_libraries/spectrum-sharing/src/components/sharing_dropdown_menu/index"],(function(e,t,s,a,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettingDropdown=void 0,a=s.__importStar(a);class o extends a.Component{constructor(){super(...arguments),this.handleSelection=e=>{this.props.onValueSelected(e)}}render(){return a.createElement(r.SharingDropdownMenu,{disabled:this.props.disabled,onSelection:this.handleSelection,position:"right"},this.renderButton(),a.createElement(n.Menu,null,a.createElement(a.Fragment,null,this.renderMenuItems())))}renderButton(){return a.createElement(i.DropdownMenuButton,{className:"sharing-settings-dropdown__button",disabled:this.props.disabled},this.props.optionsDict[this.props.currentValue].label)}renderMenuItems(){return this.props.valuesList.map(e=>a.createElement(r.SharingDropdownMenuItem,{key:e,value:e,label:this.props.optionsDict[e].label,description:this.props.optionsDict[e].description,selected:e===this.props.currentValue}))}}t.SettingDropdown=o,o.displayName="SettingDropdown"})),define("typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/sharing_settings_audience",["require","exports","tslib","react","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/sharing_settings_constants","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/sharing_settings_dropdown","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/sharing_settings_policy_view","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/sharing_settings_password","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/restricted_visibility_banner","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/sharing_settings_util","typescript/component_libraries/spectrum-sharing/src/utils/sharing_util"],(function(e,t,s,a,i,n,r,o,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSettingsAudience=t.AudienceDropdown=void 0,a=s.__importStar(a);function p(e){const s="password"===e.linkPolicy.audience;return a.createElement("div",null,a.createElement(t.AudienceDropdown,Object.assign({},e)),s&&a.createElement(o.PasswordInput,Object.assign({},e)))}t.AudienceDropdown=e=>{const{linkPermissions:t,linkPolicy:s,getPolicyDict:r,onPolicyUpdate:o}=e,l=s.audience||"",p=t.audience_options.filter(e=>!((e,t)=>"public"===e&&(0,c.isPasswordPolicyEnforcedByAdmin)(t)&&!(0,d.isRighteousLink)(t))(e.audience,t)&&e.allowed).map(e=>e.audience),u=r(i.AUDIENCE),m=p.length>1;return a.createElement(n.SettingDropdown,{currentValue:l,valuesList:p,optionsDict:u.optionsDict,onValueSelected:e=>{const a={audience:e};(function(e,t,s,a){if((0,c.isExternalAudience)(e)){if((0,c.isExpirationPolicySetByAdmin)(t)){const e=new Date,i=new Date(e.getFullYear(),e.getMonth(),e.getDate()+c.daysExpirationPolicyToNumber[t.days_to_expire_policy]);(!s.expires||s.expires>i)&&(a.expires=i,a.display_expiration_warning=!0)}(0,c.isPasswordPolicyEnforcedByAdmin)(t)&&!s.require_password&&(a.require_password=!0,"public"===e&&(a.display_password_warning=!0))}else a.display_expiration_warning=!1,a.display_password_warning=!1})(e,t,s,a),o(a)},disabled:!m||e.readOnlyPolicy})},t.SharingSettingsAudience=function(e){const{intl:t,linkPermissions:s}=e;let n;s.audience_options.filter(e=>e.allowed).length>1||(n=a.createElement(l.RestrictedVisibilityBanner,{intl:t,linkPermissions:s}));const o=e.getPolicyDict(i.AUDIENCE),c=a.createElement(p,Object.assign({},e));return a.createElement(r.SettingPolicyRow,{policyName:i.AUDIENCE,policyDict:o,selector:c,extra:n})}})),define("typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/sharing_settings_password",["require","exports","tslib","react","dig-components/text_fields","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/sharing_settings_policy_view","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/sharing_settings_constants","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/sharing_settings_util"],(function(e,t,s,a,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSettingsPassword=t.PasswordInput=void 0,a=s.__importStar(a);const l=(e,t)=>(0,o.isPasswordPolicyEnforcedByAdmin)(e)&&(0,o.isExternalAudience)(t);function c(e,t){return t.link_password||""===t.link_password?t.link_password:(0,o.hasLinkPassword)(e)?"123456":""}t.PasswordInput=e=>{const{intl:t,linkPolicy:s,linkPermissions:n,onPolicyUpdate:r}=e;return a.createElement(i.TextInput,{role:"textbox",autoFocus:!0,className:"password-input__input",disabled:!(0,o.canModifyPassword)(n)||e.readOnlyPolicy,placeholder:t.formatMessage({id:"um5odk",defaultMessage:"Set password"}),name:"link_password",onChange:e=>{r({[e.target.name]:e.target.value})},type:"password",isInvalid:!s.link_password,value:c(n,s)})};t.SharingSettingsPassword=e=>{const{getPolicyDict:s,linkPolicy:i}=e,c=s(r.REQUIRE_PASSWORD),d=a.createElement("div",null,(e=>{const{linkPolicy:t,linkPermissions:s,getPolicyDict:i,onPolicyUpdate:c}=e,d=i(r.REQUIRE_PASSWORD).optionsDict,p=t.require_password?"enabled":"disabled";return a.createElement(n.SettingsToggle,{currentValue:p,optionsDict:d,onOptionChange:(e,t)=>{c({require_password:e})},disabled:!(0,o.canTogglePassword)(s)||l(s,t.audience)||e.readOnlyPolicy})})(e),(i.require_password||l(e.linkPermissions,i.audience)&&!e.readOnlyPolicy)&&a.createElement(t.PasswordInput,Object.assign({},e)));return a.createElement(n.SettingPolicyRow,{policyName:r.REQUIRE_PASSWORD,policyDict:c,selector:d})}})),define("typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/sharing_settings_expire",["require","exports","tslib","react","dig-components/date_picker","typescript/component_libraries/spectrum-sharing/src/utils/datetime_util","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/sharing_settings_policy_view","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/sharing_settings_util","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/sharing_settings_constants"],(function(e,t,s,a,i,n,r,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSettingsExpire=void 0,a=s.__importStar(a);const c=e=>{const{intl:t,linkMetadata:s,linkPolicy:n,onPolicyUpdate:r}=e,l=(e=>{const{linkMetadata:t,linkPolicy:s}=e,a=new Date;let i=void 0;if((0,o.isExternalAudience)(s.audience)){const{days_to_expire_policy:e}=t.link_permissions;(0,o.isExpirationPolicyEnforcedByAdmin)(t.link_permissions)&&(i=new Date(a.getFullYear(),a.getMonth(),a.getDate()+o.daysExpirationPolicyToNumber[e]))}return{before:new Date(a.getFullYear(),a.getMonth(),a.getDate()+1),after:i}})(e),c=n.expires||new Date;return a.createElement(i.DatePickerInput,{value:c,disabled:!(0,o.canModifyExpire)(s)||e.readOnlyPolicy,isDateBlocked:e=>e<l.before||!!(l.after&&e>l.after),onChange:e=>{e&&r({expires:e,display_expiration_warning:!1})},dayLabelFormat:a.useCallback(e=>t.formatDate(e,{day:"2-digit"}),[t]),monthLabelFormat:e=>t.formatDate(e,{month:"long",year:"numeric"}),weekdayLabelFormat:e=>t.formatDate(e,{weekday:"narrow"})})},d=e=>{const{linkPolicy:t,linkMetadata:s,getPolicyDict:i,onPolicyUpdate:c}=e,d=i(l.EXPIRES),u=null!=e.linkPolicy.expires?"enabled":"disabled",{days_to_expire_policy:m}=s.link_permissions;return a.createElement(r.SettingsToggle,{currentValue:u,optionsDict:d.optionsDict,onOptionChange:(e,a)=>{let i=null;e&&(i=t.expires,t.expires||(i=(0,n.daysAfterToday)((0,o.isExternalAudience)(t.audience)&&(0,o.isExpirationPolicySetByAdmin)(s.link_permissions)?o.daysExpirationPolicyToNumber[m]:30))),c({expires:i,display_expiration_warning:!1})},disabled:p(s,t)||e.readOnlyPolicy})},p=(e,t)=>!(0,o.canToggleExpire)(e)||(0,o.isExternalAudience)(t.audience)&&(0,o.isExpirationPolicyEnforcedByAdmin)(e.link_permissions);t.SharingSettingsExpire=e=>{const t=e.getPolicyDict(l.EXPIRES),s=t=>{t&&t.expires instanceof Date&&(t.expires.setHours(23),t.expires.setMinutes(59),t.expires.setSeconds(59)),e.onPolicyUpdate(t)},i=null!=e.linkPolicy.expires,n=a.createElement(d,Object.assign({},e,{onPolicyUpdate:s})),o=a.createElement("div",null,n,i&&a.createElement(c,Object.assign({},e,{onPolicyUpdate:s})));return a.createElement(r.SettingPolicyRow,{policyName:l.EXPIRES,policyDict:t,selector:o})}})),define("typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/sharing_settings_download",["require","exports","tslib","react","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/sharing_settings_constants","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_banner/index","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/sharing_settings_policy_view"],(function(e,t,s,a,i,n,r){"use strict";function o(e){return Boolean(e&&e.allow_download?e.can_disallow_download:e.can_allow_download)}Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSettingsDownload=t.DisableDownloadsBanner=void 0,a=s.__importStar(a);t.DisableDownloadsBanner=e=>{const{intl:t,linkPolicy:s,linkPermissions:i}=e;return!s.allow_download&&i.can_disallow_download?a.createElement(n.SharingModalBanner,{className:"sharing-settings-modal__banner",type:"warn",message:t.formatMessage({id:"+EZZAD",defaultMessage:"This applies only within Dropbox."})}):null};const l=e=>{const{linkPolicy:t,onPolicyUpdate:s,getPolicyDict:n,linkPermissions:l}=e,c=t.allow_download?"disabled":"enabled",d=n(i.ALLOW_DOWNLOAD);return a.createElement(r.SettingsToggle,{currentValue:c,optionsDict:d.optionsDict,onOptionChange:(e,t)=>{s(i.ALLOW_DOWNLOAD,!e)},disabled:!o(l)||e.readOnlyPolicy})};t.SharingSettingsDownload=e=>{const t=e.getPolicyDict(i.ALLOW_DOWNLOAD),s=e.isEditFolderLink?void 0:a.createElement(l,Object.assign({},e)),n=e.isEditFolderLink?"setting-disabled":"";return a.createElement(r.SettingPolicyRow,{policyName:i.ALLOW_DOWNLOAD,policyDict:t,selector:s,onLinkClicked:e.onLinkClicked,extra:e.banner,className:n})}})),define("typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/sharing_settings_policy_view",["require","exports","tslib","react","spectrum/toggle/index","typescript/component_libraries/spectrum-sharing/src/components/sharing_modal_settings_row/index"],(function(e,t,s,a,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsToggle=t.SettingPolicyRow=void 0,a=s.__importStar(a);t.SettingPolicyRow=e=>{const{policyName:t,policyDict:s,selector:i,onLinkClicked:r,extra:o,className:l}=e;return a.createElement(n.SharingModalSettingsRow,{policyFieldName:t,key:s.title,displayName:s.title,displayNameTitle:s.title,description:s.description,descriptionLinkUrl:s.descriptionLinkUrl,descriptionLinkText:s.descriptionLinkText,descriptionLinkOnClicked:r,rightSideElement:i,bottomElement:o,className:l})};t.SettingsToggle=e=>{const{currentValue:t,optionsDict:s,onOptionChange:n,disabled:r}=e,o=r?(e,t)=>{}:n;return a.createElement(i.Toggle,{ariaLabel:s[t].label,className:"sharing-settings-modal__toggle",labelContent:s[t].label,checked:s[t].value,interactive:!r,disabled:r,onCheckedChange:o})}})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_avatar_initials/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/sharing_avatar_initials/sharing_avatar_initials"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_avatar_initials/sharing_avatar_initials",["require","exports","tslib","classnames","react"],(function(e,t,s,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingAvatarInitials=void 0,a=s.__importDefault(a),i=s.__importStar(i);t.SharingAvatarInitials=e=>{var{children:t,className:n,backgroundColor:r,avatarSize:o=32,variant:l,shape:c}=e,d=s.__rest(e,["children","className","backgroundColor","avatarSize","variant","shape"]);const p=(0,a.default)(`scl-sharing-avatar-initials-${o}-${c}`,{"scl-avatar-text-inactive":"inactive"===l,"scl-sharing-avatar-text":!0},n),u={background:`${r}`,border:`1px solid ${r}`,borderRadius:"square"===c?"12%":"50%",height:`${o}px`,width:`${o}px`};return i.createElement("div",Object.assign({className:p,style:u},d),t)},t.SharingAvatarInitials.displayName="SharingAvatarInitials"})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_menu/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/sharing_menu/sharing_menu","typescript/component_libraries/spectrum-sharing/src/components/sharing_menu/sharing_menu_item"],(function(e,t,s,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t),s.__exportStar(i,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_menu/sharing_menu",["require","exports","tslib","react","classnames","spectrum/dropdown_menu/index"],(function(e,t,s,a,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingMenu=void 0,a=s.__importStar(a),i=s.__importDefault(i);t.SharingMenu=e=>{var{className:t}=e,r=s.__rest(e,["className"]);const o=(0,i.default)(t,"scl-sharing-menu");return a.createElement(n.Menu,Object.assign({className:o},r))},t.SharingMenu.displayName="SharingMenu"})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_menu/sharing_menu_item",["require","exports","tslib","classnames","react","spectrum/dropdown_menu/index","typescript/component_libraries/spectrum-sharing/src/components/icons/icon_dropdown_selected"],(function(e,t,s,a,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingMenuItem=void 0,a=s.__importDefault(a),i=s.__importStar(i);t.SharingMenuItem=e=>{var{value:t,label:o,description:l,selected:c,variant:d="default"}=e,p=s.__rest(e,["value","label","description","selected","variant"]);return i.createElement(n.MenuItem,Object.assign({className:(0,a.default)({"scl-sharing-menu-item-border":"border"===d}),key:t,value:t,text:o,selected:c},p),c&&i.createElement(r.IconDropdownSelectedBlue,{className:"scl-sharing-menu-item-selected-icon"}),i.createElement("div",{className:(0,a.default)("scl-sharing-menu-item-wrapper",{"scl-sharing-menu-item-wrapper-selected":c})},i.createElement("div",{className:(0,a.default)("scl-sharing-menu-item-label",{"scl-sharing-menu-item-label-default":"default"===d,"scl-sharing-menu-item-label-red":"red"===d})},o),i.createElement("div",{className:"scl-sharing-menu-item-description"},l)))}})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_portal_dropdown/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/sharing_portal_dropdown/sharing_portal_dropdown"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/sharing_portal_dropdown/sharing_portal_dropdown",["require","exports","tslib","classnames","react","react-dom","react-aria-menubutton","spectrum/util/uuid_generator","spectrum/positioned_portal/index","spectrum/button/index","typescript/component_libraries/spectrum-sharing/src/components/icons/icon_dropdown_caret","typescript/component_libraries/spectrum-sharing/src/components/sharing_menu/index"],(function(e,t,s,a,i,n,r,o,l,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingPortalDropdown=void 0,a=s.__importDefault(a),i=s.__importStar(i),n=s.__importStar(n);class u extends i.PureComponent{constructor(e){super(e),this.dropdownId=(0,o.generateUUID)("portalDropdown"),this.handleResizeEvent=()=>{this.state.isOpen&&this.resolvePortalPosition()},this.handleScrollEvent=()=>{this.state.isOpen&&this.resolvePortalPosition()},this.onMenuToggle=({isOpen:e})=>{e||this.positionedPortalEl.hidePortal(),this.setState({isOpen:e})},this.handlePortalDidShow=()=>{(0,r.openMenu)(this.dropdownId,{focusMenu:!0})},this.state={isOpen:!1}}componentDidUpdate(e,t){this.state.isOpen&&this.positionedPortalEl?(this.mountListeners(),this.resolvePortalPosition()):this.positionedPortalEl&&this.unMountListeners()}componentWillUnmount(){this.unMountListeners()}mountListeners(){document.addEventListener("scroll",this.handleScrollEvent,!1),window.addEventListener("resize",this.handleResizeEvent,!1)}unMountListeners(){document.removeEventListener("scroll",this.handleScrollEvent,!1),window.removeEventListener("resize",this.handleResizeEvent,!1)}resolvePortalPosition(){if(this.positionedPortalEl&&this.positionedPortalEl.portalInstance.portalContentElementRef){const e=n.findDOMNode(this.positionedPortalEl);if(!(e instanceof Element))throw new Error("Unable to find PositionedPortal DOM node - check if this SharingPortalDropdown is still mounted");{const t=e.getElementsByClassName("scl-sharing-portal-dropdown-button");if(!t.length)throw new Error("Unable to find SharingPortalDropdownButton - check if this SharingPortalDropdown is still mounted");{const e=t[0],s=this.positionedPortalEl.portalInstance.portalContentElementRef,a=e.getBoundingClientRect(),i=s.getBoundingClientRect(),n=10;let r={top:0,left:0};r=a.bottom+i.height>window.innerHeight?{top:a.top-i.height-n,left:a.left+a.width-i.width}:{top:a.top+a.height+n,left:a.left+a.width-i.width},s.style.top=r.top+"px",s.style.left=r.left+"px"}}}}render(){const{optionGroup:e,onSelection:t}=this.props;return i.createElement(l.PositionedPortal,{closeOnBlur:!1,ref:e=>this.positionedPortalEl=e,renderContent:()=>i.createElement(r.Wrapper,{id:this.dropdownId,onSelection:t,onMenuToggle:this.onMenuToggle},i.createElement(r.Button,{className:"scl-sharing-portal-dropdown-button-invisible"},e.label),i.createElement(p.SharingMenu,{className:"scl-sharing-portal-menu"},i.createElement(i.Fragment,null,e.options.map(t=>i.createElement(p.SharingMenuItem,{description:t.tooltip,key:t.apiId,label:t.label,selected:e.selectedApiId===t.apiId,value:t.apiId,variant:t.variant,disabled:t.disabled}))))),role:"sharing-dropdown",showOnMouseMove:!1,showOnClick:!0,onDidShow:this.handlePortalDidShow},i.createElement(c.Button,{className:(0,a.default)("scl-sharing-portal-dropdown-button",{"scl-sharing-portal-dropdown-button-expanded":this.state.isOpen}),variant:"styleless"},e.label,(()=>this.state.isOpen?i.createElement(d.IconDropdownCaretBlueWeb,{className:"scl-sharing-portal-dropdown-icon scl-sharing-portal-dropdown-icon-web"}):i.createElement(d.IconDropdownCaretWeb,{className:"scl-sharing-portal-dropdown-icon scl-sharing-portal-dropdown-icon-web"}))()))}}t.SharingPortalDropdown=u,u.displayName="SharingPortalDropdown"})),define("typescript/component_libraries/spectrum-sharing/src/components/info_box/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/info_box/info_box"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/info_box/info_box",["require","exports","tslib","react","dig-components/typography"],(function(e,t,s,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfoBox=void 0,a=s.__importStar(a);class n extends a.Component{componentDidMount(){setTimeout(()=>{(new Image).src=this.props.imgPath},200)}render(){const{imgPath:e,imgAlt:t,title:s,message:n}=this.props;return a.createElement("div",{className:"scl-info-box"},a.createElement("img",{src:e,className:"scl-info-box__img",alt:t}),a.createElement("div",{className:"scl-info-box__text"},a.createElement(i.Title,{size:"small",isBold:!0},s),a.createElement(i.Text,{size:"small"},n)))}}t.InfoBox=n,n.displayName="InfoBox"})),define("typescript/component_libraries/spectrum-sharing/src/components/banner/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/banner/banner"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/banner/banner",["require","exports","tslib","classnames","react"],(function(e,t,s,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Banner=t.baseClassName=void 0,a=s.__importDefault(a),i=s.__importStar(i),t.baseClassName="scl-banner";class n extends i.PureComponent{render(){const{variant:e="default",className:s,showTopCaret:n,children:r}=this.props,o=(0,a.default)(t.baseClassName,s,{"scl-banner--transparent-left":"transparent-left"===e});return i.createElement("div",{className:o},n&&i.createElement("div",{className:t.baseClassName+"__caret-up"}),i.createElement("div",{className:t.baseClassName+"__container"},r))}}t.Banner=n,n.displayName="Banner"})),define("typescript/component_libraries/spectrum-sharing/src/utils/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/utils/contacts_tokenizer/index","typescript/component_libraries/spectrum-sharing/src/utils/logging"],(function(e,t,s,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t),s.__exportStar(i,t)})),define("typescript/component_libraries/spectrum-sharing/src/utils/datetime_util",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatDateToString=t.daysAfterToday=t.getDatePickerLocalization=t.DAY_OF_WEEK_BY_LOCALE=t.DOW_MONDAY=t.DOW_SUNDAY=void 0,t.DOW_SUNDAY=0,t.DOW_MONDAY=1,t.DAY_OF_WEEK_BY_LOCALE={"da-DK":t.DOW_MONDAY,de:t.DOW_MONDAY,en:t.DOW_SUNDAY,"en-US":t.DOW_SUNDAY,"en-GB":t.DOW_MONDAY,es:t.DOW_MONDAY,"es-ES":t.DOW_MONDAY,fr:t.DOW_MONDAY,id:t.DOW_SUNDAY,it:t.DOW_MONDAY,ja:t.DOW_SUNDAY,ko:t.DOW_MONDAY,ms:t.DOW_MONDAY,"nb-NO":t.DOW_MONDAY,"nl-NL":t.DOW_MONDAY,pl:t.DOW_MONDAY,"pt-BR":t.DOW_SUNDAY,ru:t.DOW_MONDAY,"sv-SE":t.DOW_MONDAY,"th-TH":t.DOW_MONDAY,"uk-UA":t.DOW_MONDAY,"zh-CN":t.DOW_MONDAY,"zh-TW":t.DOW_MONDAY};t.getDatePickerLocalization=e=>{const s=t.DAY_OF_WEEK_BY_LOCALE[e.locale];return{firstDayOfWeek:void 0===s?t.DOW_MONDAY:s,months:[e.formatDate(new Date(2019,0,1),{month:"long"}),e.formatDate(new Date(2019,1,1),{month:"long"}),e.formatDate(new Date(2019,2,1),{month:"long"}),e.formatDate(new Date(2019,3,1),{month:"long"}),e.formatDate(new Date(2019,4,1),{month:"long"}),e.formatDate(new Date(2019,5,1),{month:"long"}),e.formatDate(new Date(2019,6,1),{month:"long"}),e.formatDate(new Date(2019,7,1),{month:"long"}),e.formatDate(new Date(2019,8,1),{month:"long"}),e.formatDate(new Date(2019,9,1),{month:"long"}),e.formatDate(new Date(2019,10,1),{month:"long"}),e.formatDate(new Date(2019,11,1),{month:"long"})],weekdaysLong:[e.formatDate(new Date(2019,8,1),{weekday:"long"}),e.formatDate(new Date(2019,8,2),{weekday:"long"}),e.formatDate(new Date(2019,8,3),{weekday:"long"}),e.formatDate(new Date(2019,8,4),{weekday:"long"}),e.formatDate(new Date(2019,8,5),{weekday:"long"}),e.formatDate(new Date(2019,8,6),{weekday:"long"}),e.formatDate(new Date(2019,8,7),{weekday:"long"})],weekdaysShort:[e.formatDate(new Date(2019,8,1),{weekday:"narrow"}),e.formatDate(new Date(2019,8,2),{weekday:"narrow"}),e.formatDate(new Date(2019,8,3),{weekday:"narrow"}),e.formatDate(new Date(2019,8,4),{weekday:"narrow"}),e.formatDate(new Date(2019,8,5),{weekday:"narrow"}),e.formatDate(new Date(2019,8,6),{weekday:"narrow"}),e.formatDate(new Date(2019,8,7),{weekday:"narrow"})]}};t.daysAfterToday=e=>{const t=new Date;return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),((e,t,s,a,i,n)=>(null==t&&(t=0),null==s&&(s=0),null==a&&(a=0),null==i&&(i=0),null==n&&(n=0),e.setFullYear(e.getFullYear()+t),e.setMonth(e.getMonth()+s),e.setDate(e.getDate()+a),e.setHours(e.getHours()+i),e.setMinutes(e.getMinutes()+n),e))(t,0,0,e)};t.formatDateToString=e=>e.toISOString().split(".")[0]+"Z"})),define("typescript/component_libraries/spectrum-sharing/src/utils/em_string",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Emstring=void 0;class s{constructor(e){if(!(this instanceof s))return new s(e);this.s=e,this.info=this.widthInfo(),this.length=e.length?this.info[this.s.length-1]:0}static initClass(){this.ACCURACY=2,this.CODEPOINT_TO_WIDTH={32:38,33:25,34:42,35:67,36:58,37:92,38:75,39:25,40:33,41:33,42:58,43:58,44:25,45:33,46:25,47:42,48:58,49:58,50:58,51:58,52:58,53:58,54:58,55:58,56:58,57:58,58:25,59:25,60:58,61:58,62:58,63:50,64:100,65:67,66:67,67:67,68:75,69:58,70:58,71:75,72:83,73:33,74:25,75:67,76:58,77:100,78:83,79:83,80:67,81:83,82:67,83:58,84:58,85:75,86:67,87:100,88:67,89:58,90:58,91:33,92:42,93:33,94:58,95:50,96:67,97:58,98:67,99:50,100:67,101:58,102:33,103:58,104:67,105:25,106:25,107:58,108:25,109:100,110:67,111:67,112:67,113:67,114:42,115:50,116:42,117:67,118:58,119:83,120:58,121:58,122:50,123:42,124:58,125:42,126:58,161:25,162:58,163:58,164:58,165:58,166:58,167:58,168:67,169:92,170:42,171:50,172:58,174:92,175:58,176:50,177:58,178:42,179:42,180:67,181:67,182:75,183:25,184:25,185:42,186:42,187:50,188:83,189:83,190:83,191:50,192:67,193:67,194:67,195:67,196:67,197:67,198:92,199:67,200:58,201:58,202:58,203:58,204:33,205:33,206:33,207:33,208:75,209:83,210:83,211:83,212:83,213:83,214:83,215:58,216:83,217:75,218:75,219:75,220:75,221:58,222:67,223:67,224:58,225:58,226:58,227:58,228:58,229:58,230:92,231:50,232:58,233:58,234:58,235:58,236:25,237:25,238:25,239:25,240:67,241:67,242:67,243:67,244:67,245:67,246:67,247:58,248:67,249:67,250:67,251:67,252:67,253:58,254:67,255:58,256:75,257:67,258:75,259:67,260:75,261:67,262:75,263:58,264:75,265:58,266:75,267:58,268:75,269:58,270:83,271:83,272:83,273:75,274:67,275:67,276:67,277:67,278:67,279:67,280:67,281:67,282:67,283:67,284:83,285:75,286:83,287:75,288:83,289:75,290:83,291:75,292:83,293:75,294:92,295:75,296:33,297:33,298:33,299:33,300:33,301:33,302:33,303:33,304:33,305:25,306:67,307:67,308:42,309:33,310:75,311:67,312:67,313:58,314:33,315:58,316:33,317:58,318:42,319:58,320:50,321:67,322:42,323:83,324:75,325:83,326:75,327:83,328:75,329:83,330:83,331:75,332:92,333:67,334:92,335:67,336:92,337:67,338:100,339:100,340:75,341:50,342:75,343:50,344:75,345:50,346:67,347:58,348:67,349:58,350:67,351:58,352:67,353:58,354:75,355:42,356:75,357:42,358:75,359:42,360:83,361:75,362:83,363:75,364:83,365:75,366:83,367:75,368:83,369:75,370:83,371:75,372:100,373:92,374:75,375:58,376:75,377:67,378:67,379:67,380:67,381:67,382:67,383:42,384:75,385:83,386:67,387:75,388:75,389:67,390:75,391:83,392:58,393:83,394:100,395:67,396:75,397:67,398:67,399:75,400:58,401:58,402:75,403:83,404:75,405:100,406:50,407:50,408:75,409:67,410:50,411:67,412:117,413:83,414:75,415:92,416:92,417:75,418:117,419:100,420:75,421:75,422:75,423:67,424:58,425:67,426:58,427:42,428:75,429:42,430:75,431:83,432:75,433:92,434:83,435:75,436:75,437:67,438:67,439:67,440:67,441:58,442:58,443:75,444:75,445:58,446:50,447:67,448:33,449:50,450:50,451:33,452:142,453:142,454:133,455:100,456:92,457:67,458:117,459:117,460:100,461:75,462:67,463:33,464:33,465:92,466:67,467:83,468:75,469:83,470:75,471:83,472:75,473:83,474:75,475:83,476:75,477:67,478:75,479:67,480:75,481:67,482:100,483:100,484:92,485:75,486:83,487:75,488:75,489:67,490:92,491:67,492:92,493:67,494:67,495:58,496:33,497:142,498:142,499:133,500:83,501:75,502:117,503:67,504:83,505:75,506:75,507:67,508:100,509:100,510:92,511:67,512:75,513:67,514:75,515:67,516:67,517:67,518:67,519:67,520:33,521:33,522:33,523:33,524:92,525:67,526:92,527:67,528:75,529:50,530:75,531:50,532:83,533:75,534:83,535:75,536:67,537:58,538:75,539:42,540:58,541:58,542:83,543:75,544:83,545:100,546:92,547:67,548:67,549:67,550:75,551:67,552:67,553:67,554:92,555:67,556:92,557:67,558:92,559:67,560:92,561:67,562:75,563:58,564:67,565:100,566:67,567:33,568:100,569:100,570:75,571:75,572:58,573:58,574:67,575:58,576:58,577:67,578:50,579:75,580:75,581:75,582:75,583:58,584:58,585:25,586:83,587:58,588:75,589:33,590:75,591:58,880:67,881:50,882:67,883:50,884:33,885:33,886:75,887:67,888:108,889:108,890:67,891:58,892:58,893:58,894:42,895:108,896:108,897:108,898:108,899:108,900:67,901:67,902:75,903:42,904:83,905:100,906:58,907:108,908:100,909:108,910:100,911:100,912:42,913:75,914:67,915:58,916:83,917:67,918:67,919:83,920:92,921:33,922:75,923:75,924:100,925:83,926:75,927:92,928:83,929:67,930:108,931:67,932:75,933:75,934:83,935:75,936:83,937:92,938:33,939:75,940:83,941:58,942:75,943:42,944:67,945:83,946:67,947:67,948:67,949:58,950:75,951:75,952:67,953:42,954:67,955:67,956:75,957:67,958:67,959:67,960:92,961:67,962:67,963:75,964:67,965:67,966:92,967:67,968:92,969:100,970:42,971:67,972:67,973:67,974:100,975:108,976:58,977:75,978:75,979:100,980:75,981:92,982:100,983:67,984:92,985:67,986:75,987:58,988:58,989:58,990:67,991:58,992:75,993:92,994:100,995:92,996:75,997:58,998:75,999:58,1e3:75,1001:75,1002:67,1003:67,1004:83,1005:58,1006:50,1007:42,1008:67,1009:67,1010:58,1011:33,1012:92,1013:58,1014:58,1015:67,1016:67,1017:75,1018:100,1019:83,1020:58,1021:75,1022:75,1023:75,1024:67,1025:67,1026:92,1027:58,1028:75,1029:67,1030:33,1031:33,1032:42,1033:108,1034:108,1035:83,1036:75,1037:83,1038:75,1039:83,1040:75,1041:67,1042:67,1043:58,1044:83,1045:67,1046:92,1047:67,1048:83,1049:83,1050:75,1051:83,1052:100,1053:83,1054:92,1055:83,1056:67,1057:75,1058:75,1059:75,1060:83,1061:75,1062:83,1063:75,1064:108,1065:108,1066:75,1067:92,1068:67,1069:75,1070:108,1071:75,1072:67,1073:67,1074:58,1075:58,1076:75,1077:67,1078:83,1079:58,1080:75,1081:75,1082:67,1083:67,1084:83,1085:75,1086:67,1087:75,1088:75,1089:58,1090:58,1091:58,1092:92,1093:67,1094:75,1095:58,1096:92,1097:100,1098:67,1099:83,1100:58,1101:58,1102:92,1103:58,1104:67,1105:67,1106:75,1107:58,1108:58,1109:58,1110:33,1111:33,1112:42,1113:92,1114:92,1115:75,1116:67,1117:75,1118:58,1119:75,1120:100,1121:75,1122:75,1123:67,1124:83,1125:83,1126:75,1127:67,1128:100,1129:92,1130:92,1131:83,1132:117,1133:108,1134:67,1135:67,1136:83,1137:83,1138:92,1139:67,1140:83,1141:67,1142:83,1143:67,1144:133,1145:125,1146:92,1147:67,1148:100,1149:75,1150:100,1151:75,1152:75,1153:58,1154:75,1155:0,1156:0,1157:0,1158:0,1159:108,1160:0,1161:0,1162:83,1163:75,1164:67,1165:58,1166:67,1167:75,1168:58,1169:58,1170:67,1171:58,1172:75,1173:67,1174:100,1175:92,1176:67,1177:58,1178:75,1179:67,1180:83,1181:75,1182:75,1183:67,1184:83,1185:75,1186:83,1187:75,1188:100,1189:83,1190:117,1191:100,1192:92,1193:75,1194:75,1195:58,1196:75,1197:58,1198:75,1199:58,1200:75,1201:58,1202:75,1203:75,1204:100,1205:83,1206:75,1207:67,1208:75,1209:67,1210:75,1211:58,1212:92,1213:75,1214:92,1215:75,1216:33,1217:92,1218:83,1219:75,1220:67,1221:83,1222:67,1223:83,1224:75,1225:83,1226:75,1227:75,1228:58,1229:100,1230:83,1231:25,1232:75,1233:67,1234:75,1235:67,1236:100,1237:100,1238:67,1239:67,1240:75,1241:67,1242:75,1243:67,1244:92,1245:83,1246:67,1247:58,1248:67,1249:58,1250:83,1251:75,1252:83,1253:75,1254:92,1255:67,1256:92,1257:67,1258:92,1259:67,1260:75,1261:58,1262:75,1263:58,1264:75,1265:58,1266:75,1267:58,1268:75,1269:58,1270:58,1271:42,1272:92,1273:83,1274:58,1275:42,1276:75,1277:58,1278:75,1279:58,2026:67,19977:108,65403:58},this._ELLIPSIS_LENGTH=new s("…").length}static em_snippet(e,t,a){return null==t&&(t=50),null==a&&(a=.75),new s(e.toString()).snippet(t,a).toString()}widthInfo(){const e={"-1":0};for(let t=0,s=this.s.length,a=0<=s;a?t<s:t>s;a?t++:t--)e[t]=e[t-1]+this.ems(this.s.charAt(t));return e}findSpot(e){let t;if(!e)return 0;let s=0,a=this.s.length;for(;s<=a;){t=Math.floor(s/2+a/2);const i=this.info[t-1];if(i>e)a=t-1;else{if(!(i<e))return t;s=t+1}}return s>t?s:t}ems(e){const t=e.charCodeAt(0),a=s.CODEPOINT_TO_WIDTH[t];return a?a/Math.pow(10,s.ACCURACY):768<=t&&t<=879?0:65377<=t&&t<=65500?.58:11904<=t&&t<=40911||44032<=t&&t<=55215||4352<=t&&t<=4607||63744<=t&&t<=64255||65280<=t&&t<=65535||131072<=t&&t<=196607?1.08:.65}substr(e,t){const a=this.findSpot(e);if(null!=t){let i=this.findSpot(e+t);if(i-a<this.s.length){const e=this.s.charCodeAt(i-a);65024<=e&&e<=65039&&i--}return new s(this.s.substr(a,i-a))}return new s(this.s.substr(a))}toString(){return this.s}snippet(e=50,t=.75){if(this.length<=e)return this;const a=(e-=s._ELLIPSIS_LENGTH)*t,i=e-a,n=this.length-i,r=this.substr(0,a),o=this.substr(n);return new s(r.toString()+"…"+o.toString())}}t.Emstring=s,s.initClass()})),define("typescript/component_libraries/spectrum-sharing/src/utils/contacts_tokenizer/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/utils/contacts_tokenizer/contacts_tokenizer_util"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/utils/contacts_tokenizer/contacts_tokenizer_util",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContactsTokenizer=void 0;const s=/['&A-Za-z0-9\._%+-]+@[A-Za-z0-9-][A-Za-z0-9\.-]*\.[A-Za-z]{2,15}/gi,a=/[,|;>]+/;t.ContactsTokenizer=e=>({tokenizeAllRawInputs(t){const s=this.tokenizeValidRawInputs(t);return s.length>0?s:[e.buildFromRawEmail(t)]},tokenizeValidRawInputs:t=>(t.match(s)||[]).map(e.buildFromRawEmail),tokenizeDelimitedInputs(e){return a.test(e)?this.tokenizeValidRawInputs(e):[]}})})),define("typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/sharing_settings_constants","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/sharing_settings_link_policies","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/link_metadata_types","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/sharing_settings_util"],(function(e,t,s,a,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t),s.__exportStar(i,t),s.__exportStar(n,t),s.__exportStar(r,t)})),define("typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/sharing_settings_constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CLIENT_PORTAL_SETTINGS=t.VIEW_LINK_SETTINGS=t.EDIT_LINK_SETTINGS=t.FOLDER_SETTINGS=t.FILE_SETTINGS=t.TEXT=t.TOGGLE=t.DROPDOWN=t.ACL_UPDATE_POLICY=t.DISPLAY_EXPIRATION_WARNING=t.REQUIRE_PASSWORD=t.AUDIENCE=t.REQUESTED_VISIBILITY=t.ALLOW_DOWNLOAD=t.EXPIRES=t.FOLDER_LINK_AUDIENCE_POLICY=t.ACCESS_LEVEL_POLICY=t.VIEWER_INFO_POLICY=t.MEMBER_POLICY=void 0,t.MEMBER_POLICY="member_policy",t.VIEWER_INFO_POLICY="viewer_info_policy",t.ACCESS_LEVEL_POLICY="access_level",t.FOLDER_LINK_AUDIENCE_POLICY="shared_link_policy",t.EXPIRES="expires",t.ALLOW_DOWNLOAD="allow_download",t.REQUESTED_VISIBILITY="requested_visibility",t.AUDIENCE="audience",t.REQUIRE_PASSWORD="require_password",t.DISPLAY_EXPIRATION_WARNING="display_expiration_warning",t.ACL_UPDATE_POLICY="acl_update_policy",t.DROPDOWN="dropdown",t.TOGGLE="toggle",t.TEXT="text",t.FILE_SETTINGS="file_settings",t.FOLDER_SETTINGS="folder_settings",t.EDIT_LINK_SETTINGS="edit_link_settings",t.VIEW_LINK_SETTINGS="view_link_settings",t.CLIENT_PORTAL_SETTINGS="client_portal_settings"})),define("typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/sharing_settings_link_policies",["require","exports","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/sharing_settings_constants"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSettingsLinkPolicies=void 0;t.SharingSettingsLinkPolicies=e=>({getShmodelInMultipleLinksPolicyDict(t,a){switch(t){case s.AUDIENCE:return{title:e.formatMessage({id:"uCVAxq",defaultMessage:"Who has access"}),description:a?e.formatMessage({id:"4HZCOQ",defaultMessage:"Control who can view the folder with this link."}):e.formatMessage({id:"xb28qW",defaultMessage:"Control who can view the file with this link."}),optionsDict:{public:{label:e.formatMessage({id:"JWcJZ7",defaultMessage:"Anyone with link"}),description:a?e.formatMessage({id:"ysL13U",defaultMessage:"Anyone with this link can view the folder."}):e.formatMessage({id:"oxZeg7",defaultMessage:"Anyone with this link can view the file."})},team:{label:e.formatMessage({id:"i9dq7T",defaultMessage:"Team members"}),description:a?e.formatMessage({id:"AvhnVi",defaultMessage:"Team members with this link can view the folder."}):e.formatMessage({id:"YTZEp1",defaultMessage:"Team members with this link can view the file."})},password:{label:e.formatMessage({id:"DDCDRp",defaultMessage:"People with password"}),description:a?e.formatMessage({id:"uos+ms",defaultMessage:"Password protect this link for viewing the folder."}):e.formatMessage({id:"oPivFQ",defaultMessage:"Password protect this link for viewing the file."})},no_one:{label:e.formatMessage({id:"kuFRq0",defaultMessage:"Only people invited"}),description:e.formatMessage({id:"+ZBQS4",defaultMessage:"The link is off and does not grant additional access to anyone."})}},type:s.DROPDOWN};case s.EXPIRES:return{title:e.formatMessage({id:"HIIRnD",defaultMessage:"Expiration"}),description:e.formatMessage({id:"92TP40",defaultMessage:"Disable this link on a specific date."}),optionsDict:{enabled:{label:e.formatMessage({id:"J8zY2i",defaultMessage:"On"}),value:!0},disabled:{label:e.formatMessage({id:"w6dVgn",defaultMessage:"Off"}),value:!1}},type:s.TOGGLE};case s.ALLOW_DOWNLOAD:return{title:e.formatMessage({id:"d8lth0",defaultMessage:"Disable downloads"}),description:e.formatMessage({id:"B5ygR1",defaultMessage:"Prevent people with this link from downloading."}),descriptionLinkUrl:"/help/files-folders/set-link-permissions",descriptionLinkText:e.formatMessage({id:"gk12sS",defaultMessage:"Learn more"}),optionsDict:{enabled:{label:e.formatMessage({id:"47AlCD",defaultMessage:"On"}),value:!0},disabled:{label:e.formatMessage({id:"0oEiHx",defaultMessage:"Off"}),value:!1}},type:s.TOGGLE};default:throw new Error("Policy name not found")}},getRLPolicyDict(t,a,i){const n="editor"===a;switch(t){case s.AUDIENCE:return{title:e.formatMessage({id:"uCVAxq",defaultMessage:"Who has access"}),description:n?i?e.formatMessage({id:"inMOXx",defaultMessage:"Control who can edit the folder with this link."}):e.formatMessage({id:"/1cHLH",defaultMessage:"Control who can edit the file with this link."}):e.formatMessage({id:"xb28qW",defaultMessage:"Control who can view the file with this link."}),optionsDict:{public:{label:e.formatMessage({id:"JWcJZ7",defaultMessage:"Anyone with link"}),description:n?i?e.formatMessage({id:"w/+tle",defaultMessage:"Anyone with this link can edit the folder."}):e.formatMessage({id:"a3Sd0R",defaultMessage:"Anyone with this link can edit the file."}):e.formatMessage({id:"oxZeg7",defaultMessage:"Anyone with this link can view the file."})},team:{label:e.formatMessage({id:"i9dq7T",defaultMessage:"Team members"}),description:n?i?e.formatMessage({id:"qUcOUf",defaultMessage:"Team members with this link can edit the folder."}):e.formatMessage({id:"dyCqAa",defaultMessage:"Team members with this link can edit the file."}):e.formatMessage({id:"YTZEp1",defaultMessage:"Team members with this link can view the file."})},no_one:{label:e.formatMessage({id:"kuFRq0",defaultMessage:"Only people invited"}),description:e.formatMessage({id:"+ZBQS4",defaultMessage:"The link is off and does not grant additional access to anyone."})}},type:s.DROPDOWN};case s.REQUIRE_PASSWORD:return{title:e.formatMessage({id:"8stY8L",defaultMessage:"Require password"}),description:i?e.formatMessage({id:"1Syz7Y",defaultMessage:"Set a password to limit access to the folder via link."}):e.formatMessage({id:"AH/PXS",defaultMessage:"Set a password to limit access to the file via link."}),optionsDict:{enabled:{label:e.formatMessage({id:"oUP+qL",defaultMessage:"On"}),value:!0},disabled:{label:e.formatMessage({id:"h58mvf",defaultMessage:"Off"}),value:!1}},type:s.TOGGLE};case s.ALLOW_DOWNLOAD:{const t=n&&i;return{title:e.formatMessage({id:"d8lth0",defaultMessage:"Disable downloads"}),description:t?e.formatMessage({id:"RQ2sAU",defaultMessage:"To disable downloads, share the link for viewing."}):e.formatMessage({id:"B5ygR1",defaultMessage:"Prevent people with this link from downloading."}),descriptionLinkUrl:"/help/files-folders/set-link-permissions",descriptionLinkText:t?void 0:e.formatMessage({id:"gk12sS",defaultMessage:"Learn more"}),optionsDict:{enabled:{label:e.formatMessage({id:"47AlCD",defaultMessage:"On"}),value:!0},disabled:{label:e.formatMessage({id:"0oEiHx",defaultMessage:"Off"}),value:!1}},type:s.TOGGLE}}case s.EXPIRES:return{title:e.formatMessage({id:"HIIRnD",defaultMessage:"Expiration"}),description:e.formatMessage({id:"92TP40",defaultMessage:"Disable this link on a specific date."}),optionsDict:{enabled:{label:e.formatMessage({id:"J8zY2i",defaultMessage:"On"}),value:!0},disabled:{label:e.formatMessage({id:"w6dVgn",defaultMessage:"Off"}),value:!1}},type:s.TOGGLE};default:throw new Error("Policy name not found")}}})})),define("typescript/component_libraries/spectrum-sharing/src/share_modal_evolution/copy_link/copy_link_education_tooltip",["require","exports","tslib","react","dig-components/tooltips","typescript/component_libraries/spectrum-sharing/src/share_modal_evolution/utils/link_description"],(function(e,t,s,a,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyLinkEducationTooltip=t.baseClassName=void 0,a=s.__importStar(a),t.baseClassName="scl-copy-link-education-tooltip";class r extends a.Component{render(){return this.shouldRenderCopyLinkEducationTooltip()?a.createElement(i.Tooltip,{triggerRef:this.props.linkRef,placement:"top",className:t.baseClassName,title:this.renderLinkSettingsTooltipContent()},this.props.children):this.props.children}renderLinkSettingsTooltipContent(){const e=(0,n.getLinkDescriptions)(this.props.intl,this.props.sharedLink),t=e.length;return a.createElement(a.Fragment,null,(0,n.getCopyLinkEducationTooltipTitle)(this.props.intl),t>1?this.renderListOfSettings(e):this.renderOneSetting(e))}renderOneSetting(e){return a.createElement(a.Fragment,null," ",a.createElement("span",null,e[0]))}renderListOfSettings(e){const t=[];return e.forEach(e=>{t.push(a.createElement("li",null,e))}),a.createElement(a.Fragment,null,a.createElement("ul",null,t))}shouldRenderCopyLinkEducationTooltip(){return(0,n.getLinkDescriptions)(this.props.intl,this.props.sharedLink).length>0}}t.CopyLinkEducationTooltip=r,r.displayName="CopyLinkEducationTooltip"})),define("typescript/component_libraries/spectrum-sharing/src/share_modal_evolution/utils/link_description",["require","exports","typescript/component_libraries/spectrum-sharing/src/share_modal/sharing_settings/utils/index"],(function(e,t,s){"use strict";function a(e){return e.formatMessage({id:"K/i5x+",defaultMessage:"Password required"})}function i(e){return e.formatMessage({id:"KjJiVt",defaultMessage:"Download disabled"})}function n(e,t){const s=r(t);return e.formatMessage({id:"fp7TGs",defaultMessage:"{count, plural, one{Expires in a day} other{Expires in {count} days}}"},{count:s})}function r(e){const t=e.expires?e.expires.getTime():0;if(null!=e.expires){let e=t-(new Date).getTime();return e<0&&(e=0),Math.floor(e/864e5)}return-1}Object.defineProperty(t,"__esModule",{value:!0}),t.daysTilExpires=t.getLinkDescriptions=t.getExpirationEnabledText=t.getDownloadDisabledText=t.getPasswordRequiredText=t.getRestrictionsApplyText=t.getModifyText=t.getCopyLinkEducationTooltipTitle=void 0,t.getCopyLinkEducationTooltipTitle=function(e){return e.formatMessage({id:"LLktNG",defaultMessage:"Link settings:"})},t.getModifyText=function(e){return e.formatMessage({id:"BypDcT",defaultMessage:"Modify"})},t.getRestrictionsApplyText=function(e){return e.formatMessage({id:"RVzGyv",defaultMessage:"Restrictions apply"})},t.getPasswordRequiredText=a,t.getDownloadDisabledText=i,t.getExpirationEnabledText=n,t.getLinkDescriptions=function(e,t){const r=[],o=(0,s.getAudienceForLink)(t.link_permissions),l=t.link_permissions.require_password||"password"===o,c=t.expires,d=!t.link_permissions.allow_download;return l&&r.push(a(e)),c&&r.push(n(e,t)),d&&r.push(i(e)),r},t.daysTilExpires=r})),define("spectrum/icon_acl/index",["require","exports","tslib","react","spectrum/icon_templates/stateless/index","spectrum/svg_icon_bundle/index","spectrum/icon_acl/bundle"],(function(e,t,s,a,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconAcl=t.ICONS=void 0,a=s.__importStar(a),Object.defineProperty(t,"ICONS",{enumerable:!0,get:function(){return r.ICONS}});t.IconAcl=e=>{const{name:t}=e,s=a.createElement(n.SvgIconBundle,{focusable:"false",icon:r.ICONS[t]});return a.createElement(i.Component,Object.assign({icon:s},e))},t.IconAcl.displayName="IconAcl"})),define("spectrum/icon_acl/bundle",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ICONS=void 0,t.ICONS=JSON.parse('\n    {"link-edit":{"attrs":{"width":"32","height":"32","viewBox":"0 0 32 32"},"dangerouslySetInnerIconHtml":"<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M19.9 9.17l1.377-1.377a1 1 0 0 1 1.415 0l1.364 1.364a1 1 0 0 1 0 1.414l-1.377 1.377L19.9 9.17zM9.653 19.415l9.193-9.192 2.779 2.779-9.193 9.192-2.779-2.779zM8.6 20.441l2.778 2.779-3.219 1.073a.5.5 0 0 1-.632-.633L8.6 20.441z\\" fill=\\"#000\\"></path>"},"link-small":{"attrs":{"width":"24","height":"24","viewBox":"0 0 24 24"},"dangerouslySetInnerIconHtml":"<g fill=\\"none\\" fill-rule=\\"evenodd\\"><path d=\\"M5 12c0-1.657 1.347-3 2.997-3h3.006A3 3 0 0 1 14 12v3H7.997A3 3 0 0 1 5 12zm1.5 0c0 .834.672 1.5 1.5 1.5h1.5V15H14v-2.5h-1.5v-.505c0-.818-.67-1.495-1.499-1.495H8c-.834 0-1.499.672-1.499 1.5z\\" fill=\\"#637282\\"></path><path d=\\"M19 12c0 1.657-1.347 3-2.997 3h-3.006A3 3 0 0 1 10 12V9h6.003A3 3 0 0 1 19 12zm-1.5 0c0-.834-.672-1.5-1.5-1.5h-1.5V9H10v2.5h1.5v.505c0 .818.67 1.495 1.499 1.495H16c.834 0 1.499-.672 1.499-1.5z\\" fill=\\"#637282\\"></path></g>"},"link-view":{"attrs":{"width":"32","height":"32","viewBox":"0 0 32 32"},"dangerouslySetInnerIconHtml":"<path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M16 22c3.524 0 6.612-2.572 8.324-4.348a2.354 2.354 0 0 0 0-3.304C22.612 12.572 19.524 10 16 10s-6.612 2.572-8.324 4.348a2.354 2.354 0 0 0 0 3.304C9.388 19.428 12.476 22 16 22zm0-2c2.153 0 3.899-1.79 3.899-4S18.153 12 16 12s-3.899 1.79-3.899 4 1.746 4 3.899 4z\\" fill=\\"#000\\"></path><path fill-rule=\\"evenodd\\" clip-rule=\\"evenodd\\" d=\\"M16 18.5c1.346 0 2.437-1.12 2.437-2.5S17.346 13.5 16 13.5c-1.346 0-2.437 1.12-2.437 2.5s1.091 2.5 2.437 2.5z\\" fill=\\"#000\\"></path>"},"link":{"attrs":{"width":"32","height":"32","viewBox":"0 0 32 32"},"dangerouslySetInnerIconHtml":"<g fill=\\"none\\" fill-rule=\\"evenodd\\"><g fill=\\"#637282\\"><path d=\\"M6 16c0-2.21 1.794-4 4.007-4h4.986A4.006 4.006 0 0 1 19 16v4h-8.993A4.006 4.006 0 0 1 6 16zm2 0c0 1.112.898 2 2.005 2H13v2h6v-3h-2v-.999c0-1.1-.894-2.001-1.997-2.001H9.997A2 2 0 0 0 8 16z\\"></path><path d=\\"M26 16c0 2.21-1.794 4-4.007 4h-4.986A4.006 4.006 0 0 1 13 16v-4h8.993A4.006 4.006 0 0 1 26 16zm-2 0c0-1.112-.898-2-2.005-2H19v-2h-6v3h2v.999c0 1.1.894 2.001 1.997 2.001h5.006A2 2 0 0 0 24 16z\\"></path></g></g>"}}\n  ')})),define("metaserver/static/js/sharing/sharing-sdk/adapters",["require","exports","tslib","metaserver/static/js/contacts/contact","metaserver/static/js/contacts/types","typescript/component_libraries/spectrum-sharing/src/datatypes/sharing/invite-target","typescript/component_libraries/spectrum-sharing/src/datatypes/utils/typing","metaserver/static/js/validators/validators"],(function(e,t,s,a,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertSharingInfoToSdkLinksMetadata=t.convertLinkMetadataToSdkLinkMetadata=t.convertLinkPermissionToSdkLinkPermission=t.convertSharingInfoToSdkUser=t.convertSharingInfoToSdkObjectMetadata=t.convertEffectiveAudienceToSDKEffectiveAudience=t.convertLinkResolvedVisibilityToSDKLinkResolvedVisibility=t.convertLinkAccessLevelToSdkLinkAccessLevel=t.convertAccessLeveltoSdkAccessLevel=t.convertSharingInfoToSdkAccountMetadata=t.convertSharingInfoToSdkInviteTargetValidation=t.convertInviteTargetToContact=t.convertContactToInviteTarget=void 0,i=s.__importDefault(i),n=s.__importStar(n),r=s.__importStar(r);t.convertContactToInviteTarget=e=>e.type===i.default.EMAIL?e.name&&e.name.length?Object.assign(Object.assign({".tag":"user",dbx_team_id:e.dbx_team_id||""},void 0!==e.photo_url?{photo_url:e.photo_url}:{}),{name:e.name,sort_key:e.name,dbx_account_id:e.dbx_account_id||"",email:e.email||""}):n.createFromEmail(e.email||""):e.type===i.default.NEW_STYLE_GROUP?{".tag":"group",dbx_team_id:e.dbx_team_id||"",members:e.members||"",name:e.name,sort_key:e.name,group_id:e.group_id||"",group_size:e.group_size||0}:e.type===i.default.DBX_ID?Object.assign(Object.assign({".tag":"user",dbx_team_id:e.dbx_team_id||""},void 0!==e.photo_url?{photo_url:e.photo_url}:{}),{name:e.name,sort_key:e.name,dbx_account_id:e.dbx_account_id||"",email:e.email||""}):n.createFromEmail("");t.convertInviteTargetToContact=e=>"email"===e[".tag"]?a.Contact.buildFromRawEmail(e.email):"group"===e[".tag"]?new a.Contact({type:i.default.NEW_STYLE_GROUP,dbx_team_id:e.dbx_team_id,members:e.members,name:e.name,group_id:e.group_id,group_size:e.group_size}):"user"===e[".tag"]?e.dbx_account_id?new a.Contact(Object.assign(Object.assign({type:i.default.EMAIL,dbx_team_id:e.dbx_team_id},void 0!==e.photo_url?{photo_url:e.photo_url}:{}),{name:e.name,invalid:!(0,o.validateEmail)(e.email),dbx_account_id:e.dbx_account_id,email:e.email})):a.Contact.buildFromRawEmail(e.email):r.exhausts(e,a.Contact.buildFromRawEmail(""));const l=e=>"invalid"===e.state?{".tag":"disallowed",disallowed:{".tag":"other"}}:"ok"===e.state?{".tag":"allowed",allowed:{".tag":"no_warning"}}:"warn"===e.state?{".tag":"allowed",allowed:{".tag":"other"}}:{".tag":"other"};t.convertSharingInfoToSdkInviteTargetValidation=(e,s)=>{const a=s.recipientAccess(),i=s.recipientValidation()[a]||{},r=e.map(t.convertInviteTargetToContact).map(e=>e.getKey()),o=e.map(n.getUniqueId),c=o.reduce((e,t,s)=>Object.assign({[t]:i[r[s]]},e),{});return o.reduce((e,t)=>{const s=c[t];if(!s)return e;const a={target_invite_or_request_eligibility:{".tag":"other"},member:{".tag":"other"},result:l(s),target_invite_eligibility:{".tag":"other"}};return Object.assign(Object.assign({},e),{[t]:a})},{})};const c=e=>{if(void 0!==e)return{id:e.id,name:e.name,sharing_policies:e.sharing_policies,office_addin_policy:{".tag":"disabled"},is_locked_team:!1,locked_team_reason:"",camera_uploads_policy:{".tag":"disabled"},sso_state:"none",emm_state:"disabled",is_limited:!1,quota_info:{normal:0,shared:0,quota:0},msl_caps_type:"off",is_msl:!1,team_user_permissions:{is_admin:!1,membership_type:"",join_state:"",suggest_members_enabled:!1}}};t.convertSharingInfoToSdkAccountMetadata=(e,t)=>{const s=e.user();return{account_id:s.account_id,name:{given_name:t.given_name,surname:t.surname,familiar_name:t.familiar_name,display_name:t.display_name,abbreviated_name:""},email:s.email,email_verified:s.is_email_verified,profile_photo_url:t.profile_photo_url,disabled:t.disabled,locale:"en",referral_link:"",team:c(t.team),team_member_id:t.team_member_id,is_paired:!1,account_type:{".tag":"basic"},root_info:{".tag":"user",root_namespace_id:"",home_namespace_id:""},uid:s.id,user_name:"",is_deferred_password:!1,is_deferred_password_set:!1,has_user_added_files:!1,has_ever_linked_desktop:!1,video_uploads_enabled_default:!1,is_paid:!1,uses_apple_relay_email:!1,pending_forced_migration:!1,referral_bonus_info:{bonus_space:0,max_num_bonus:0},visibility_quota_info:{normal:0,shared:0,quota:0},quota_info:{normal:0,shared:0,quota:0},is_business_domain:!1,role:"",teams_member:!1,is_family_user:t.is_family_user,uses_sign_in_with_apple:!1}};t.convertAccessLeveltoSdkAccessLevel=e=>"owner"===e?{".tag":"owner"}:"reader"===e?{".tag":"viewer"}:"writer"===e?{".tag":"editor"}:"reader_no_comment"===e?{".tag":"viewer_no_comment"}:{".tag":"other"};t.convertLinkAccessLevelToSdkLinkAccessLevel=e=>"editor"===e?{".tag":"editor"}:"viewer"===e?{".tag":"viewer"}:r.exhausts(e,{".tag":"other"});t.convertLinkResolvedVisibilityToSDKLinkResolvedVisibility=e=>"public"===e?{".tag":"public"}:"team_only"===e?{".tag":"team_only"}:"password"===e?{".tag":"password"}:"team_and_password"===e?{".tag":"team_and_password"}:"shared_folder_only"===e?{".tag":"shared_folder_only"}:"no_one"===e?{".tag":"no_one"}:"only_you"===e?{".tag":"only_you"}:r.exhausts(e,{".tag":"other"});t.convertEffectiveAudienceToSDKEffectiveAudience=e=>e?"public"===e?{".tag":"public"}:"team"===e?{".tag":"team"}:"password"===e?{".tag":"password"}:"no_one"===e?{".tag":"no_one"}:{".tag":"other"}:void 0;const d=e=>{var t,s;const a=[];return void 0===e?a:((null===(t=e.invite_editor)||void 0===t?void 0:t.allow)&&a.push({action:{".tag":"invite_editor"},allow:!0}),(null===(s=e.invite_viewer)||void 0===s?void 0:s.allow)&&a.push({action:{".tag":"invite_viewer"},allow:!0}),a)},p=e=>{var t,s,a,i;const n=[];return void 0===e?n:((null===(t=e.invite_editor)||void 0===t?void 0:t.allow)&&n.push({action:{".tag":"invite_editor"},allow:!0}),(null===(s=e.invite_viewer)||void 0===s?void 0:s.allow)&&n.push({action:{".tag":"invite_viewer"},allow:!0}),(null===(a=e.create_edit_link)||void 0===a?void 0:a.allow)&&n.push({action:{".tag":"create_edit_link"},allow:!0}),(null===(i=e.create_view_link)||void 0===i?void 0:i.allow)&&n.push({action:{".tag":"create_view_link"},allow:!0}),n)};t.convertSharingInfoToSdkObjectMetadata=e=>{var s,a,i,n,r;const o=e.metadata(),l=e.contentInfo();if(void 0===o)throw new Error("Adapter error.");if(o.isFolder()){if(o.isNewSharedFolder()){const e=o;return Object.assign(Object.assign({".tag":"file_folder",access_type:(0,t.convertAccessLeveltoSdkAccessLevel)(o.access_type),is_inside_team_folder:null!==(s=l.isFolderInsideTeamFolderTree())&&void 0!==s&&s,is_team_folder:null!==(a=l.isTeamSharedFolder())&&void 0!==a&&a,owner_team:e.owner_team,path_lower:e.path_lower},void 0!==e.is_confidential?{is_confidential:e.is_confidential}:{}),{name:o.name,policy:{acl_update_policy:{".tag":"other"},shared_link_policy:{".tag":"other"}},permissions:d(o.permissions)})}{const e=o;return Object.assign(Object.assign({".tag":"shared_folder",access_type:(0,t.convertAccessLeveltoSdkAccessLevel)(o.access_type),is_inside_team_folder:null!==(i=l.isFolderInsideTeamFolderTree())&&void 0!==i&&i,is_team_folder:null!==(n=l.isTeamSharedFolder())&&void 0!==n&&n,owner_team:e.owner_team,path_lower:e.path_lower},void 0!==e.is_confidential?{is_confidential:e.is_confidential}:{}),{name:o.name,permissions:d(o.permissions),policy:{member_policy:{".tag":e.policy.member_policy},resolved_member_policy:{".tag":e.policy.resolved_member_policy},acl_update_policy:{".tag":e.policy.acl_update_policy},download_policy:{".tag":e.policy.download_policy},viewer_info_policy:{".tag":e.policy.viewer_info_policy},shared_link_policy:{".tag":e.policy.shared_link_policy}},preview_url:e.preview_url||"",shared_folder_id:e.shared_folder_id.toString(),time_invited:(null===(r=e.time_invited)||void 0===r?void 0:r.toString())||""})}}{const e=o;return{".tag":"file",access_type:(0,t.convertAccessLeveltoSdkAccessLevel)(e.access_type),download_policy:{".tag":"other"},id:e.id,name:e.name,owner_team:e.owner_team,path_display:e.path_display,path_lower:e.path_lower,permissions:p(e.permissions),policy:{acl_update_policy:{".tag":"other"},download_policy:{".tag":"other"},shared_link_policy:{".tag":"other"}},preview_url:""}}};t.convertSharingInfoToSdkUser=e=>{const t=e.user();return{id:t.id,email:t.email,fname:t.fname,lname:t.lname,display_name:t.display_name,familiar_name:t.familiar_name,initials_url:t.initials_url,photo_url:t.photo_url,photo_circle_url:t.photo_circle_url,is_team:!!t.is_team,is_team_admin:t.is_team_admin,is_dropbox_admin:t.is_dropbox_admin,is_email_verified:t.is_email_verified,is_paper_disabled:t.is_paper_disabled,account_id:t.account_id,team_member_id:t.team_member_id,team_dbtid:t.team_dbtid}};t.convertLinkPermissionToSdkLinkPermission=e=>({resolved_visibility:(0,t.convertLinkResolvedVisibilityToSDKLinkResolvedVisibility)(e.resolved_visibility),can_revoke:e.can_revoke,visibility_policies:[],can_set_expiry:e.can_set_expiry,can_remove_expiry:e.can_remove_expiry,allow_download:e.allow_download,can_allow_download:e.can_allow_download,can_disallow_download:e.can_disallow_download,allow_comments:e.allow_comments,team_restricts_comments:e.team_restricts_comments,effective_audience:(0,t.convertEffectiveAudienceToSDKEffectiveAudience)(e.effective_audience),link_access_level:(0,t.convertLinkAccessLevelToSdkLinkAccessLevel)(e.link_access_level)});t.convertLinkMetadataToSdkLinkMetadata=e=>({".tag":e.file_type,url:e.url,id:e.id,name:e.name,path_lower:e.path_lower,link_permissions:(0,t.convertLinkPermissionToSdkLinkPermission)(e.link_permissions),preview_type:e.preview_type});t.convertSharingInfoToSdkLinksMetadata=e=>{const s=e.sharedLinks();if(null==s)throw new Error("Adapt error");let a=[];for(let e of s)a.push((0,t.convertLinkMetadataToSdkLinkMetadata)(e));return{links:a,has_more:!1}}})),define("metaserver/static/js/sharing/sharing-sdk/links_in_member_list",["require","exports","tslib","react","metaserver/static/js/sharing/sharing-sdk/adapters","typescript/component_libraries/spectrum-sharing/src/organisms/share-modal-manage-links/index"],(function(e,t,s,a,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSdkLinksInMemberList=void 0,a=s.__importStar(a),i=s.__importStar(i),n=s.__importStar(n);class r extends a.Component{constructor(e){super(e),this.state={objectMetadata:i.convertSharingInfoToSdkObjectMetadata(this.props.actionHandler.getSharingInfo()),linksMetadata:i.convertSharingInfoToSdkLinksMetadata(this.props.actionHandler.getSharingInfo())}}render(){return a.createElement(n.ShareModalManageLinksInner,{linksMetadata:this.state.linksMetadata,objectMetadata:this.state.objectMetadata,onViewLinkSettingsClick:this.props.onViewLinkSettingsClick,onEditLinkSettingsClick:this.props.onEditLinkSettingsClick})}}t.SharingSdkLinksInMemberList=r,r.displayName="SharingSdkLinksInMemberList"})),define("metaserver/static/js/sharing/sharing-sdk/sdk_helpers",["require","exports","typescript/component_libraries/spectrum-sharing/src/bindings/provider","js/browser/cookies"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeSdk=void 0;const i=/^www\.dropbox\.com$/,n=/^meta-.*-dbx\.dev\.corp\.dropbox\.com$/;t.initializeSdk=e=>{const t=window.location.hostname;if(!i.test(t)&&!n.test(t))throw new Error("Cannot initialize the SDK on an unsupported domain.");const r=new s.DropboxAuth({domain:window.location.hostname,domainDelimiter:""});return new s.Dropbox({auth:r,fetch:(t,s)=>{const r=new Headers((null==s?void 0:s.headers)||[]),o=window.location.hostname;(i.test(o)||n.test(o))&&r.append("X-CSRF-Token",a.Cookies.read("__Host-js_csrf")||""),r.append("X-Dropbox-Uid",e.id.toString());const l=Object.assign(Object.assign({},s||{}),{headers:r});return fetch(t,l)}})}})),define("metaserver/static/js/sharing/sharing-sdk/provider_with_logging_context",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/bindings/provider","typescript/component_libraries/spectrum-sharing/src/bindings/logging","metaserver/static/js/sharing/sharing-sdk/adapters","react","metaserver/static/js/core/i18n","metaserver/static/js/sharing/sharing-sdk/sdk_helpers","metaserver/static/js/clean/analytics","metaserver/static/js/modules/constants/login_and_register"],(function(e,t,s,a,i,n,r,o,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSdkProviderWithLoggingContext=void 0,a=s.__importStar(a),i=s.__importStar(i),n=s.__importStar(n),r=s.__importDefault(r);t.SharingSdkProviderWithLoggingContext=({user:e,contentInfo:t,sharingInfo:s,children:p})=>{const u=r.default.useCallback(e=>{"TEAMS_WEB"===e.type&&c.TeamsWebActionsLogger.log(e.payload.name,e.payload.extra)},[t,e.id]),m=r.default.useMemo(()=>(0,l.initializeSdk)(e),[e]);return r.default.createElement(a.Provider,{intl:o.intl,sdk:m,loggingSink:u,redirectWindowToken:d.REDIRECT_WINDOW_TOKEN,platform:a.Platforms.METASERVER,origin:t.extras.origin},r.default.createElement(i.MetadataProvider,{sharingObjectMetadata:n.convertSharingInfoToSdkObjectMetadata(s)},p))},t.SharingSdkProviderWithLoggingContext.displayName="SharingSdkProviderWithLoggingContext"})),define("metaserver/static/js/sharing/sharing-sdk/task_menu",["require","exports","tslib","react","typescript/component_libraries/spectrum-sharing/src/components/task_menu/index","metaserver/static/js/sharing/access_level"],(function(e,t,s,a,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSdkTaskMenu=void 0,a=s.__importStar(a);t.SharingSdkTaskMenu=({actionHandler:e,userId:t})=>{const s=a.useMemo(()=>{const t=e.getSharingInfo();return t?t.getSharingTasks():[]},[e]),r=a.useCallback(()=>{const t=e.getSharingInfo(),s=t&&t.permissionsObj().canInviteEditor(),a=t&&t.recipientAccess()!==n.ACCESS_LEVEL.WRITER;s&&a&&e.changeRecipientAccess(n.ACCESS_LEVEL.WRITER)},[e]),o=a.useCallback(t=>{const s=e.getSharingInfo();!(s&&s.getSharingTasks().includes("make_edits"))&&t.includes("make_edits")&&r(),e.updateSharingTasks(t)},[e,r]);return a.createElement(i.TaskMenu,{initialTasks:s,onSharingTasksUpdated:o,userId:t})},t.SharingSdkTaskMenu.displayName="SharingSdkTaskMenu"})),define("metaserver/static/js/sharing/sharing-sdk/tokenizer",["require","exports","tslib","react","metaserver/static/js/sharing/sharing-sdk/adapters","typescript/component_libraries/spectrum-sharing/src/datatypes/sharing/invite-target","typescript/component_libraries/spectrum-sharing/src/organisms/targets_tokenizer/index"],(function(e,t,s,a,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharingSdkTokenizer=void 0,a=s.__importStar(a),i=s.__importStar(i),n=s.__importStar(n),r=s.__importStar(r);class o extends a.Component{constructor(e){super(e),this.cache={},this.getContacts=()=>this.state.contacts,this.finishLogging=()=>{},this.onInviteTargetsChange=e=>{this.cache=e.reduce((e,t)=>{const s=n.getUniqueId(t),a=this.cache[s]||i.convertInviteTargetToContact(t);return Object.assign(Object.assign({},e),{[s]:a})},{});const t=e.map(e=>this.cache[n.getUniqueId(e)]||i.convertInviteTargetToContact(e));this.setState(Object.assign(Object.assign({},this.state),{contacts:t,inviteTargets:e})),this.props.onTypeaheadTokensChange(t),this.props.actionHandler.recipientsChange(t,"")},this.state={objectMetadata:i.convertSharingInfoToSdkObjectMetadata(this.props.actionHandler.getSharingInfo()),user:i.convertSharingInfoToSdkUser(this.props.actionHandler.getSharingInfo()),inviteTargets:this.props.initialTypeaheadTokens.map(i.convertContactToInviteTarget),contacts:this.props.initialTypeaheadTokens,isImportContactsExpanded:!1,isImportContactsLoading:!1},this.props.initialTypeaheadTokens&&this.props.initialTypeaheadTokens.length>0&&this.props.actionHandler.recipientsChange(this.props.initialTypeaheadTokens,"")}componentDidUpdate(e,t){e.typeaheadTokens!==this.props.typeaheadTokens&&this.state.contacts!==this.props.typeaheadTokens&&this.onInviteTargetsChange(this.props.typeaheadTokens.map(i.convertContactToInviteTarget))}render(){const e=i.convertLinkAccessLevelToSdkLinkAccessLevel(this.props.accessLevel),t=i.convertSharingInfoToSdkInviteTargetValidation(this.state.inviteTargets,this.props.actionHandler.getSharingInfo());return a.createElement(r.TargetsTokenizer,{accessLevel:e,user:this.state.user,inviteTargets:this.state.inviteTargets,inviteTargetValidation:t,objectMetadata:this.state.objectMetadata,onInviteTargetsChange:this.onInviteTargetsChange})}}t.SharingSdkTokenizer=o,o.displayName="SharingSdkTokenizer"})),define("typescript/component_libraries/spectrum-sharing/src/bindings/browser",["require","exports","tslib","react"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useOpenUrl=t.Provider=t.DEFAULT_OPEN_URL=void 0,a=s.__importStar(a);t.DEFAULT_OPEN_URL=e=>window.open(e,"_blank");const i=a.createContext(t.DEFAULT_OPEN_URL);t.Provider=({openUrl:e,children:t})=>a.createElement(i.Provider,{value:e},t),t.Provider.displayName="Provider";t.useOpenUrl=()=>{const e=a.useContext(i);return a.useCallback(t=>{e(t)},[e])}})),define("typescript/component_libraries/spectrum-sharing/src/bindings/dropbox-sdk",["require","exports","tslib","react","dropbox-internal-sdk"],(function(e,t,s,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDropboxSdk=t.DropboxSdkProvider=void 0;const n=(a=s.__importStar(a)).createContext(new i.Dropbox({}));t.DropboxSdkProvider=({sdk:e,children:t})=>a.createElement(n.Provider,{value:e},t),t.DropboxSdkProvider.displayName="DropboxSdkProvider";t.useDropboxSdk=()=>a.useContext(n)})),define("typescript/component_libraries/spectrum-sharing/src/bindings/endpoint",["require","exports","tslib","react","typescript/component_libraries/spectrum-sharing/src/bindings/dropbox-sdk","typescript/component_libraries/spectrum-sharing/src/bindings/logging"],(function(e,t,s,a,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useEndpoint=void 0,a=s.__importStar(a),i=s.__importStar(i),n=s.__importStar(n);t.useEndpoint=e=>{const t=i.useDropboxSdk(),r=n.useLogger();if("standard"===e.type){const i=a.useMemo(()=>e.fetch(t),[e,t]);return a.useCallback(t=>s.__awaiter(void 0,void 0,void 0,(function*(){const s=Math.random().toString();r("ENDPOINT_FETCH_BEGIN",{name:e.name,input:t,id:s});const a=Date.now(),n=yield i(t),o=Date.now();return r("ENDPOINT_FETCH_END",{name:e.name,id:s,latency:o-a,response:n}),n})),[i,e,r])}{const t=e.useFetch();return a.useCallback(a=>s.__awaiter(void 0,void 0,void 0,(function*(){const s=Math.random().toString();r("ENDPOINT_FETCH_BEGIN",{name:e.name,input:a,id:s});const i=Date.now(),n=yield t(a),o=Date.now();return r("ENDPOINT_FETCH_END",{name:e.name,id:s,latency:o-i,response:n}),n})),[t,e,r])}}})),define("typescript/component_libraries/spectrum-sharing/src/bindings/intl",["require","exports","tslib","react","react-intl"],(function(e,t,s,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Provider=t.DEFAULT_INTL=void 0,a=s.__importStar(a);const n=(0,i.createIntl)({locale:"en"});t.DEFAULT_INTL=Object.assign(Object.assign({},(0,i.createIntl)({locale:"en"})),{formatMessage(...e){const[t,s]=e;return n.formatMessage(Object.assign(Object.assign({},t),{id:"placeholder"}),s)}});t.Provider=({children:e,intl:t})=>t?a.createElement(i.RawIntlProvider,{value:t},e):e,t.Provider.displayName="Provider"})),define("typescript/component_libraries/spectrum-sharing/src/bindings/logging",["require","exports","tslib","react","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants"],(function(e,t,s,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataProvider=t.useLogger=t.Provider=t.combineSinks=t.DEFAULT_ORIGIN=t.DEFAULT_SINK=void 0,a=s.__importStar(a);t.DEFAULT_SINK=(...e)=>{},t.DEFAULT_ORIGIN=i.SHARE_ACTION_ORIGIN_TYPE.SHARING_SDK_SANDBOX;t.combineSinks=(...e)=>(...t)=>{e.forEach(e=>{try{e(...t)}catch(e){}})};const n=a.createContext({sink:t.DEFAULT_SINK,metadata:{},origin:t.DEFAULT_ORIGIN});t.Provider=({sink:e,children:t,origin:s})=>{const i=a.useMemo(()=>({sink:e,metadata:{},origin:s}),[e,s]);return a.createElement(n.Provider,{value:i},t)},t.Provider.displayName="Provider";t.useLogger=()=>{const e=a.useContext(n);return a.useCallback((t,s)=>{const a={type:t,payload:s};e.sink(a,e.metadata,e.origin)},[e])};t.MetadataProvider=e=>{var{children:t}=e,i=s.__rest(e,["children"]);const r=a.useContext(n),[o]=a.useState({sink:r.sink,metadata:{},origin:r.origin});return o.metadata=Object.assign(Object.assign({},r.metadata),i),a.createElement(n.Provider,{value:o},t)},t.MetadataProvider.displayName="MetadataProvider"})),define("typescript/component_libraries/spectrum-sharing/src/bindings/platform",["require","exports","tslib","react"],(function(e,t,s,a){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.usePlatform=t.Provider=t.Platforms=void 0,a=s.__importStar(a),(function(e){e.SANDBOX="SANDBOX",e.METASERVER="METASERVER",e.PAPER="PAPER",e.DESKTOP="DESKTOP"})(i=t.Platforms||(t.Platforms={}));const n=a.createContext(i.SANDBOX);t.Provider=({platform:e,children:t})=>a.createElement(n.Provider,{value:e},t),t.Provider.displayName="Provider";t.usePlatform=()=>a.useContext(n)})),define("typescript/component_libraries/spectrum-sharing/src/bindings/provider",["require","exports","tslib","react","typescript/component_libraries/spectrum-sharing/src/bindings/dropbox-sdk","typescript/component_libraries/spectrum-sharing/src/bindings/intl","typescript/component_libraries/spectrum-sharing/src/bindings/logging","typescript/component_libraries/spectrum-sharing/src/bindings/platform","typescript/component_libraries/spectrum-sharing/src/bindings/secrets","typescript/component_libraries/spectrum-sharing/src/bindings/snackbar","typescript/component_libraries/spectrum-sharing/src/bindings/browser","typescript/component_libraries/spectrum-sharing/src/bindings/logging-sinks/console","typescript/component_libraries/spectrum-sharing/src/bindings/logging-sinks/tiburon","dropbox-internal-sdk","typescript/component_libraries/spectrum-sharing/src/bindings/intl","typescript/component_libraries/spectrum-sharing/src/bindings/platform","typescript/component_libraries/spectrum-sharing/src/bindings/logging"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u,m,h,g,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Provider=t.Sink=t.Platforms=t.DEFAULT_INTL=t.DropboxAuth=t.Dropbox=void 0,a=s.__importStar(a),i=s.__importStar(i),n=s.__importStar(n),r=s.__importStar(r),o=s.__importStar(o),l=s.__importStar(l),c=s.__importStar(c),d=s.__importStar(d),p=s.__importStar(p),u=s.__importStar(u),Object.defineProperty(t,"Dropbox",{enumerable:!0,get:function(){return m.Dropbox}}),Object.defineProperty(t,"DropboxAuth",{enumerable:!0,get:function(){return m.DropboxAuth}}),Object.defineProperty(t,"DEFAULT_INTL",{enumerable:!0,get:function(){return h.DEFAULT_INTL}}),Object.defineProperty(t,"Platforms",{enumerable:!0,get:function(){return g.Platforms}}),Object.defineProperty(t,"Sink",{enumerable:!0,get:function(){return _.Sink}});const f=({sink:e,children:t,origin:s})=>{const i=p.useConsoleLoggingSink(),n=u.useTiburonLoggingSink(),o=a.useMemo(()=>r.combineSinks(e,i,n),[e,i,n]);return a.createElement(r.Provider,{sink:o,origin:s},t)};f.displayName="LoggingProviderWithBuiltIns";t.Provider=({loggingSink:e,sdk:t,children:s,redirectWindowToken:p=null,intl:u,platform:m=o.Platforms.SANDBOX,openUrl:h=null,origin:g})=>a.createElement(n.Provider,{intl:u},a.createElement(o.Provider,{platform:m},a.createElement(d.Provider,{openUrl:h||d.DEFAULT_OPEN_URL},a.createElement(i.DropboxSdkProvider,{sdk:t},a.createElement(l.Provider,{redirectWindowToken:p},a.createElement(f,{sink:e||r.DEFAULT_SINK,origin:g},a.createElement(c.Provider,null,s))))))),t.Provider.displayName="Provider"})),define("typescript/component_libraries/spectrum-sharing/src/bindings/secrets",["require","exports","tslib","react"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Provider=t.useRedirectWindowToken=void 0;const i=(a=s.__importStar(a)).createContext({redirectWindowToken:null});t.useRedirectWindowToken=()=>a.useContext(i).redirectWindowToken;t.Provider=e=>{var{children:t}=e,n=s.__rest(e,["children"]);const r=a.useMemo(()=>({redirectWindowToken:n.redirectWindowToken}),[n.redirectWindowToken]);return a.createElement(i.Provider,{value:r},t)},t.Provider.displayName="Provider"})),define("typescript/component_libraries/spectrum-sharing/src/bindings/snackbar",["require","exports","tslib","react","react-dom","react-intl","dig-components/buttons","dig-components/snackbar","dig-components/icons/src","dig-components/icons","dig-components/icons/src","dig-components/progress_indicators","typescript/component_libraries/spectrum-sharing/src/utils/browser","typescript/component_libraries/spectrum-sharing/src/utils/dsx/dsx","typescript/component_libraries/spectrum-sharing/src/utils/dsx/dsx-react","typescript/component_libraries/spectrum-sharing/src/bindings/browser","typescript/component_libraries/spectrum-sharing/src/bindings/platform"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u,m,h,g,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Provider=t.useShowGenericRequestFailureMessage=t.useShowSimpleMessage=t.useShowErrorMessage=t.useShowSnackbar=t.useSnackbar=void 0,a=s.__importStar(a),i=s.__importStar(i),m=s.__importStar(m),h=s.__importStar(h),g=s.__importStar(g),_=s.__importStar(_);const f=()=>({$item:m.store(null)}),E=e=>e.formatMessage({id:"0NA7+K",defaultMessage:"Close"});t.useSnackbar=()=>{const e=(0,n.useIntl)(),s=(0,t.useShowSnackbar)(),i=g.useOpenUrl(),m=_.usePlatform()===_.Platforms.DESKTOP?{position:"absolute",bottom:-12,left:0,right:0}:{};return{showCompleted:t=>s(s=>a.createElement(o.Snackbar,Object.assign({},s,{style:m}),a.createElement(c.UIIcon,{src:d.CheckmarkLine}),a.createElement(o.Snackbar.Message,null,t.message),a.createElement(o.Snackbar.Actions,null,a.createElement(r.Button,{variant:"transparent",inverse:!0,onClick:s.onRequestClose},E(e))))),showInProgress:e=>s(t=>a.createElement(o.Snackbar,Object.assign({},t,{timeout:0,style:m}),a.createElement(p.Spinner,{size:"small",inverse:!0}),a.createElement(o.Snackbar.Message,null,e.message))),showFailure:t=>s(s=>{const n=t.helpUrl,d=(0,u.formatUrl)(n||""),p=a.useCallback(()=>{i(d)},[d]);return a.createElement(o.Snackbar,Object.assign({},s,{style:m}),a.createElement(c.UIIcon,{src:l.FailLine}),a.createElement(o.Snackbar.Message,null,t.message),a.createElement(o.Snackbar.Actions,null,t.helpMessage&&t.helpUrl?a.createElement(r.Button,{variant:"transparent",inverse:!0,onClick:p},t.helpMessage):null,a.createElement(r.Button,{variant:"transparent",inverse:!0,onClick:s.onRequestClose},E(e))))})}};const S=a.createContext(f());t.useShowSnackbar=()=>{const e=a.useContext(S);return t=>{const s=Math.random().toString();return e.$item.set({key:s,Snackbar:t}),()=>{const t=e.$item.get();t&&t.key===s&&e.$item.set(null)}}};t.useShowErrorMessage=()=>{const e=(0,n.useIntl)(),s=(0,t.useShowSnackbar)();return a.useCallback(t=>s(s=>a.createElement(o.Snackbar,Object.assign({},s),a.createElement(o.Snackbar.Message,null,t),a.createElement(o.Snackbar.Actions,null,a.createElement(r.Button,{variant:"transparent",inverse:!0},E(e))))),[e,s])};t.useShowSimpleMessage=()=>{const e=(0,n.useIntl)(),s=(0,t.useShowSnackbar)();return a.useCallback(t=>s(s=>a.createElement(o.Snackbar,Object.assign({},s),a.createElement(o.Snackbar.Message,null,t),a.createElement(o.Snackbar.Actions,null,a.createElement(r.Button,{variant:"transparent",inverse:!0},E(e))))),[e,s])};t.useShowGenericRequestFailureMessage=()=>{const e=(0,n.useIntl)(),s=(0,t.useShowSimpleMessage)();return a.useCallback(()=>s(e.formatMessage({id:"+iNJRS",defaultMessage:"There was a problem completing this request."})),[e,s])};const b=()=>{const e=a.useContext(S),t=h.useStore(e.$item),s=(e=>{const t=a.useContext(S);return a.useCallback(()=>{const s=t.$item.get();s&&s.key===e&&t.$item.set(null)},[t,e])})(t?t.key:"");return t?i.createPortal(a.createElement("div",{key:t.key,style:{position:"fixed",display:"flex",zIndex:2e4,width:"100%",bottom:"1em",justifyContent:"center"},"data-sharing-sdk":"1"},a.createElement(t.Snackbar,{style:{flexGrow:1},key:t.key,open:!0,onRequestClose:s})),document.body):null};t.Provider=({children:e})=>{const t=h.useInitStore({},()=>f());return a.createElement(S.Provider,{value:t},a.createElement(a.Fragment,null,e,a.createElement(b,null)))},t.Provider.displayName="Provider"})),define("typescript/component_libraries/spectrum-sharing/src/bindings/logging-sinks/console",["require","exports","tslib","react","typescript/component_libraries/spectrum-sharing/src/bindings/platform"],(function(e,t,s,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useConsoleLoggingSink=void 0,a=s.__importStar(a),i=s.__importStar(i);t.useConsoleLoggingSink=()=>{const e=i.usePlatform();return a.useCallback((t,s)=>{"SANDBOX"===e&&window.console.log(t,s)},[e])}})),define("typescript/component_libraries/spectrum-sharing/src/bindings/logging-sinks/tiburon",["require","exports","tslib","react","typescript/component_libraries/spectrum-sharing/src/utils/logging","typescript/component_libraries/spectrum-sharing/src/endpoints/sharing/sharing-tiburon-logger","typescript/component_libraries/spectrum-sharing/src/datatypes/sharing/object-metadata","typescript/component_libraries/spectrum-sharing/src/datatypes/sharing/link-metadata","typescript/component_libraries/spectrum-sharing/src/datatypes/logging/tiburon","typescript/component_libraries/spectrum-sharing/src/bindings/endpoint"],(function(e,t,s,a,i,n,r,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTiburonLoggingSink=void 0,a=s.__importStar(a),n=s.__importStar(n),r=s.__importStar(r),o=s.__importStar(o),l=s.__importStar(l),c=s.__importStar(c);const d=(e,t)=>{let s={is_alpha:!0};return t.sharingLinkAccessLevel&&(s=Object.assign(Object.assign({},s),{access:t.sharingLinkAccessLevel[".tag"]})),e.createSharedLinkStartTime&&(s=Object.assign(Object.assign({},s),{timing:Date.now()-e.createSharedLinkStartTime})),s};t.useTiburonLoggingSink=()=>{const e=(()=>{const e=c.useEndpoint(n.sharingTiburonLogger);return{SHARE_MODAL_SHARE__PREVALIDATION__API_START:({metadata:t,extras:s,origin:a})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.AttemptTargetValidation,t,a,s))},SHARE_MODAL_SHARE__INVITE__VALIDATION_API_START:({metadata:t,extras:s,origin:a})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.AttemptTargetValidation,t,a,s))},SHARE_MODAL_SHARE__PREVALIDATION__API_SUCCESS:({metadata:t,extras:s,origin:a})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.SucceedTargetValidation,t,a,s))},SHARE_MODAL_SHARE__INVITE__VALIDATION_API_SUCCESS:({metadata:t,extras:s,origin:a})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.SucceedTargetValidation,t,a,s))},SHARE_MODAL_SHARE__PREVALIDATION__API_ERROR:({event:t,metadata:s,extras:a,origin:n})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.FailTargetValidation,s,n,Object.assign(Object.assign({},a),{error:t.payload.error[".tag"]})))},SHARE_MODAL_SHARE__PREVALIDATION__API_FATAL:({metadata:t,extras:s,origin:a})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.FailTargetValidation,t,a,Object.assign(Object.assign({},s),{error:"unknown server error"})))},SHARE_MODAL_SHARE__INVITE__VALIDATION_API_ERROR:({event:t,metadata:s,extras:a,origin:n})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.FailTargetValidation,s,n,Object.assign(Object.assign({},a),{error:t.payload.error[".tag"]})))},SHARE_MODAL_SHARE__INVITE__VALIDATION_API_FATAL:({metadata:t,extras:s,origin:a})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.FailTargetValidation,t,a,Object.assign(Object.assign({},s),{error:"unknown server error"})))},SHARE_MODAL_MANAGE_ACCESS__MANAGE_ACCESS__CLICK:({metadata:t,extras:s,origin:a})=>{t.sharingObjectMembership&&(s=Object.assign(Object.assign({},s),{access_level:t.sharingObjectMembership.access_type[".tag"]})),e(l.generateLogTiburonEventPayload(i.TiburonEventName.ClickManageAccess,t,a,s))},SHARE_MODAL_MANAGE_ACCESS__UPDATE_MEMBER_ACCESS__CLICK:({event:t,metadata:s,extras:a,origin:n})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.SelectChangeMemberPermission,s,n,Object.assign(Object.assign({},a),{new_access:"editor"===t.payload.next[".tag"]?"writer":"reader",old_access:"editor"===t.payload.previous[".tag"]?"writer":"reader"})))},SHARE_MODAL_MANAGE_ACCESS__UPDATE_FILE_MEMBER_ACCESS__API_SUCCESS:({metadata:t,extras:s,origin:a})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.SucceedChangeMemberPermission,t,a,Object.assign(Object.assign({},s),{http_status_code:200,response_status:"success",is_alpha:!1})))},SHARE_MODAL_MANAGE_ACCESS__UPDATE_FILE_MEMBER_ACCESS__API_FATAL:({metadata:t,extras:s,origin:a})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.FailChangeMemberPermission,t,a,Object.assign(Object.assign({},s),{is_alpha:!1,http_status_code:0,error_tag:"undefined"})))},SHARE_MODAL_MANAGE_ACCESS__UPDATE_FILE_MEMBER_ACCESS__API_ERROR:({event:t,metadata:s,extras:a,origin:n})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.FailChangeMemberPermission,s,n,Object.assign(Object.assign({},a),{is_alpha:!1,http_status_code:t.payload.response.statusCode,error_tag:t.payload.response.error[".tag"]})))},SHARE_MODAL_SHARE__CREATE_LINK__API_START:({metadata:t,extras:s,origin:a,cache:n})=>{t.sharingLinkAccessLevel&&(s=Object.assign(Object.assign({},s),{access:t.sharingLinkAccessLevel[".tag"]})),n.createSharedLinkStartTime=Date.now(),e(l.generateLogTiburonEventPayload(i.TiburonEventName.AttemptCreateSharedLinkWithSettings,t,a,s))},SHARE_MODAL_SETTINGS__CREATE_LINK_API_START:({metadata:t,extras:s,origin:a,cache:n})=>{t.sharingLinkAccessLevel&&(s=Object.assign(Object.assign({},s),{access:t.sharingLinkAccessLevel[".tag"]})),n.createSharedLinkStartTime=Date.now(),e(l.generateLogTiburonEventPayload(i.TiburonEventName.AttemptCreateSharedLinkWithSettings,t,a,s))},SHARE_MODAL_SHARE__CREATE_LINK__API_SUCCESS:({metadata:t,event:s,origin:a,extras:n,cache:r})=>{t=Object.assign(Object.assign({},t),{sharingLinkMetadata:s.payload.response.output}),e(l.generateLogTiburonEventPayload(i.TiburonEventName.SucceedCreateSharedLinkWithSettings,t,a,Object.assign(Object.assign({http_status_Code:200,response_status:"success"},d(r,t)),n)))},SHARE_MODAL_SETTINGS__CREATE_LINK_API_SUCCESS:({metadata:t,event:s,origin:a,extras:n,cache:r})=>{t=Object.assign(Object.assign({},t),{sharingLinkMetadata:s.payload.response.output}),e(l.generateLogTiburonEventPayload(i.TiburonEventName.SucceedCreateSharedLinkWithSettings,t,a,Object.assign(Object.assign({http_status_Code:200,response_status:"success"},d(r,t)),n)))},SHARE_MODAL_SHARE__CREATE_LINK__API_ERROR:({metadata:t,event:s,origin:a,extras:n,cache:r})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.FailCreateSharedLinkWithSettings,t,a,Object.assign(Object.assign({error_tag:s.payload.response.error[".tag"],http_status_code:s.payload.response.statusCode,fail_at:"link_creation"},d(r,t)),n)))},SHARE_MODAL_SETTINGS__CREATE_LINK_API_ERROR:({metadata:t,extras:s,origin:a,cache:n,event:r})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.FailCreateSharedLinkWithSettings,t,a,Object.assign(Object.assign({error_tag:r.payload.response.error[".tag"],http_status_code:r.payload.response.statusCode,fail_at:"link_creation"},d(n,t)),s)))},SHARE_MODAL_SHARE__CREATE_LINK__API_FATAL:({metadata:t,extras:s,origin:a,cache:n})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.FailCreateSharedLinkWithSettings,t,a,Object.assign(Object.assign(Object.assign({fail_at:"link_creation"},d(n,t)),{http_status_code:0,error_tag:"undefined_error"}),s)))},SHARE_MODAL_SETTINGS__CREATE_LINK_API_FATAL:({metadata:t,extras:s,origin:a,cache:n})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.FailCreateSharedLinkWithSettings,t,a,Object.assign(Object.assign(Object.assign({fail_at:"link_creation"},d(n,t)),{http_status_code:0,error_tag:"undefined_error"}),s)))},SHARE_MODAL_SHARE__CREATE_LINK__CLICK:({metadata:t,extras:s,origin:a})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.ClickTibCreateLink,t,a,s))},SHARE_MODAL_SETTINGS__CREATE_LINK__CLICK:({metadata:t,extras:s,origin:a})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.ClickTibCreateLink,t,a,s))},SHARE_MODAL_SHARE__INVITE__START:({metadata:t,extras:s,origin:a,cache:n})=>{n.inviteStartTime=Date.now(),e(l.generateLogTiburonEventPayload(i.TiburonEventName.ClickInbandShareButton,t,a,Object.assign({in_progress:!1},s)));const r=t.sharingLinkMetadata;r&&e(l.generateShareMeEventPayload(i.TiburonEventName.ClickShareButtonLinkSettingsStatus,t,a,Object.assign(Object.assign({},s),{isPasswordRequired:r.link_permissions.require_password||!1,isExpirationEnabled:!!r.expires,isDisabledDownloadEnabled:!r.link_permissions.allow_download})))},SHARE_MODAL_SHARE__COPY_LINK__CLICK:({metadata:t,extras:s,origin:a})=>{e(l.generateShareMeEventPayload(i.TiburonEventName.CopySharedLink,t,a,Object.assign(Object.assign({},s),{tokenized_contact_count:t.sharingInviteTargets?t.sharingInviteTargets.length:0})))},SHARE_MODAL_SHARE__CREATE_LINK__COPY_START:({metadata:t,event:s,origin:a,extras:n})=>{t=Object.assign(Object.assign({},t),{sharingLinkMetadata:s.payload.linkMetadata}),e(l.generateShareMeEventPayload(i.TiburonEventName.CopySharedLink,t,a,Object.assign(Object.assign({},n),{tokenized_contact_count:t.sharingInviteTargets?t.sharingInviteTargets.length:0})))},SHARE_MODAL_SHARE__CREATE_LINK__COPY_ERROR:({metadata:t,extras:s,origin:a})=>{e(l.generateShareMeEventPayload(i.TiburonEventName.CopySharedLinkFailure,t,a,Object.assign(Object.assign({},s),{tokenized_contact_count:t.sharingInviteTargets?t.sharingInviteTargets.length:0,error:"failed_copy_to_clipboard"})))},SHARE_MODAL_SHARE__COPY_LINK__COPY_ERROR:({metadata:t,extras:s,origin:a})=>{e(l.generateShareMeEventPayload(i.TiburonEventName.CopySharedLinkFailure,t,a,Object.assign(Object.assign({},s),{tokenized_contact_count:t.sharingInviteTargets?t.sharingInviteTargets.length:0,error:"failed_copy_to_clipboard"})))},SHARE_MODAL_SHARE__CREATE_LINK__COPY_FORBIDDEN:({metadata:t,extras:s,origin:a})=>{e(l.generateShareMeEventPayload(i.TiburonEventName.CopySharedLinkFailure,t,a,Object.assign(Object.assign({},s),{tokenized_contact_count:t.sharingInviteTargets?t.sharingInviteTargets.length:0,error:"failed_copy_to_clipboard"})))},SHARE_MODAL_SHARE__INVITE__CANCELLED:({metadata:t,extras:s,origin:a})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.FailInbandShare,t,a,Object.assign({error_tag:"contacts_error",error_message:"contact validation error",num_recipients:t.sharingInviteTargets?t.sharingInviteTargets.length:0},s)))},SHARE_MODAL_SHARE__INVITE__ADD_FILE_MEMBER_API_ERROR:({metadata:t,extras:s,origin:a,cache:n,event:r})=>{n.inviteStartTime&&(s.timing=Date.now()-n.inviteStartTime),e(l.generateShareMeEventPayload(i.TiburonEventName.FailInbandShare,t,a,Object.assign(Object.assign({},s),{error_tag:r.payload.response.error[".tag"],http_status_code:r.payload.response.statusCode,num_recipients:t.sharingInviteTargets?t.sharingInviteTargets.length:0})))},SHARE_MODAL_SHARE__INVITE__ADD_FILE_MEMBER_API_FATAL:({metadata:t,extras:s,origin:a,cache:n})=>{n.inviteStartTime&&(s.timing=Date.now()-n.inviteStartTime),e(l.generateShareMeEventPayload(i.TiburonEventName.FailInbandShare,t,a,Object.assign(Object.assign({},s),{error_tag:"undefined",http_status_code:0,num_recipients:t.sharingInviteTargets?t.sharingInviteTargets.length:0})))},SHARE_MODAL_SETTINGS__PAGE_VIEW:({metadata:t,extras:s,origin:a,event:n})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.ViewSettingsScreen,t,a,Object.assign(Object.assign({},s),{settings_tab:n.payload.selected_tab}))),e(l.generateLogTiburonEventPayload(i.TiburonEventName.ViewSettingsTab,t,a,Object.assign(Object.assign({},s),{settings_tab:n.payload.selected_tab})))},SHARE_MODAL_SETTINGS__TAB_CHANGE:({metadata:t,extras:s,origin:a,event:n})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.ViewSettingsTab,t,a,Object.assign(Object.assign({},s),{settings_tab:n.payload.selected_tab})))},SHARE_MODAL_MANAGE_ACCESS__SETTINGS_GEAR__CLICK:({metadata:t,extras:s,origin:a})=>{e(l.generateShareMeEventPayload(i.TiburonEventName.ClickSettingsGear,t,a,Object.assign(Object.assign({},s),{screen:i.ScreenName.ManageAccessScreen})));const n=t.sharingObjectMetadata;n&&(r.getIsFile(n)?e(l.generateLogTiburonEventPayload(i.TiburonEventName.OpenFileSettingsModal,t,a,s)):r.getIsFolder(n)&&e(l.generateLogTiburonEventPayload(i.TiburonEventName.OpenFolderSettingsModal,t,a,s)))},SHARE_MODAL_MANAGE_ACCESS__SETTINGS_TEXT__CLICK:({metadata:t,extras:s,origin:a})=>{e(l.generateShareMeEventPayload(i.TiburonEventName.ClickManageAccessPageSettingsText,t,a,Object.assign(Object.assign({},s),{screen:i.ScreenName.ManageAccessScreen})));const n=t.sharingObjectMetadata;n&&e(l.generateLogTiburonEventPayload(r.getIsFile(n)?i.TiburonEventName.OpenFileSettingsModal:i.TiburonEventName.OpenFolderSettingsModal,t,a,s))},SHARE_MODAL_SHARE__SETTINGS_GEAR__CLICK:({metadata:t,extras:s,origin:a})=>{e(l.generateShareMeEventPayload(i.TiburonEventName.ClickSettingsGear,t,a,Object.assign(Object.assign({},s),{screen:i.ScreenName.ShareScreen})));const n=t.sharingObjectMetadata;n&&(r.getIsFile(n)?e(l.generateLogTiburonEventPayload(i.TiburonEventName.OpenFileSettingsModal,t,a,s)):r.getIsFolder(n)&&e(l.generateLogTiburonEventPayload(i.TiburonEventName.OpenFolderSettingsModal,t,a,s)))},SHARE_MODAL_SHARE__SETTINGS_LINK__CLICK:({metadata:t,extras:s,origin:a})=>{s=t.sharingLinkAccessLevel&&"editor"===t.sharingLinkAccessLevel[".tag"]?Object.assign(Object.assign({},s),{settings_tab:"edit_link_settings"}):Object.assign(Object.assign({},s),{settings_tab:"view_link_settings"}),e(l.generateShareMeEventPayload(i.TiburonEventName.ClickSettingsText,t,a,s))},SHARE_MODAL_SHARE__INVITE__ADD_FILE_MEMBER_API_SUCCESS:({metadata:t,extras:s,origin:a,cache:n})=>{n.inviteStartTime&&(s=Object.assign(Object.assign({},s),{timing:Date.now()-n.inviteStartTime})),e(l.generateLogTiburonEventPayload(i.TiburonEventName.SucceedInbandShare,t,a,Object.assign(Object.assign({},s),{num_recipients:t.sharingInviteTargets?t.sharingInviteTargets.length:0})))},SHARE_MODAL_SHARE__INVITE__NAVIGATE_ATTEMPT:({metadata:t,extras:s,origin:a})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.AttemptNavigateAwayDuringShare,t,a,s))},SHARE_MODAL_SHARE__INVITE__NAVIGATE_AWAY:({metadata:t,extras:s,origin:a})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.SucceedNavigateAwayDuringShare,t,a,s))},SHARE_MODAL_SETTINGS__UPSELL_LINK__CLICKED:({event:t,metadata:s,extras:a,origin:n})=>{a=Object.assign(Object.assign({},a),{element_trackingId:"link_settings_pro_upsell",element_href:t.payload.href}),e(l.generateLogTiburonEventPayload(i.TiburonEventName.ElementClick,s,n,a))},SHARE_MODAL_SETTINGS__UPSELL_LINK__EXPOSED:({event:t,metadata:s,extras:a,origin:n})=>{a=Object.assign(Object.assign({},a),{element_trackingId:"link_settings_pro_upsell",element_href:t.payload.href}),e(l.generateLogTiburonEventPayload(i.TiburonEventName.ElementView,s,n,a))},SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_START:({metadata:t,extras:s,origin:a})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.AttemptRemoveAllMembers,t,a,s))},SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_ERROR:({metadata:t,event:s,origin:a,extras:n})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.FailRemoveAllMembers,t,a,Object.assign({http_status_code:s.payload.response.statusCode,error_message:s.payload.response.error[".tag"]},n)))},SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_FATAL:({metadata:t,extras:s,origin:a})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.FailRemoveAllMembers,t,a,Object.assign({http_status_code:0,error_message:"undefined_error"},s)))},SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_SUCCESS:({metadata:t,extras:s,origin:a})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.SucceedRemoveAllMembers,t,a,Object.assign({http_status_code:200,response_status:"success"},s)))},SHARE_MODAL_MANAGE_ACCESS__REMOVE_FILE_MEMBER__API_START:({metadata:t,extras:s,origin:a})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.AttemptRemoveMember,t,a,s))},SHARE_MODAL_MANAGE_ACCESS__REMOVE_FILE_MEMBER__API_ERROR:({metadata:t,extras:s,origin:a,event:n})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.FailRemoveMember,t,a,Object.assign({http_status_code:n.payload.response.statusCode,error_tag:n.payload.response.error[".tag"]},s)))},SHARE_MODAL_MANAGE_ACCESS__REMOVE_FILE_MEMBER__API_FATAL:({metadata:t,extras:s,origin:a})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.FailRemoveMember,t,a,Object.assign({http_status_code:0,error_tag:"undefined_error"},s)))},SHARE_MODAL_MANAGE_ACCESS__REMOVE_FILE_MEMBER__API_SUCCESS:({metadata:t,extras:s,origin:a})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.SucceedRemoveMember,t,a,Object.assign({http_status_code:200},s)))},SHARE_MODAL_DATA_LOADER__INITIAL_LOADER__START:({metadata:t,extras:s,origin:a,cache:n})=>{n.shareModalDataLoadStartTime=Date.now(),n.inviteStartTime=void 0,n.createSharedLinkStartTime=void 0,e(l.generateLogTiburonEventPayload(i.TiburonEventName.BeginShareFlow,t,a,s))},SHARE_MODAL_DATA_LOADER__INITIAL_LOADER__SUCCESS:({metadata:t,extras:s,origin:a,cache:n})=>{n.shareModalDataLoadStartTime&&(s=Object.assign(Object.assign({},s),{timing:Date.now()-n.shareModalDataLoadStartTime})),e(l.generateLogTiburonEventPayload(i.TiburonEventName.ViewShareModal,t,a,s))},SHARE_MODAL_SETTINGS__LINK_AUDIENCE_CHANGE:({metadata:t,extras:s,origin:a,event:n})=>{if(t.sharingLinksMetadata){const e=o.getByAccessLevel(t.sharingLinksMetadata,n.payload.link_access_level);e&&(s=Object.assign(Object.assign({},s),l.getLinkMetadataExtras(e)))}e(l.generateLogTiburonEventPayload(i.TiburonEventName.ChangeSharedLinkAudience,t,a,Object.assign({old_audience:n.payload.previous[".tag"],new_audience:n.payload.next[".tag"],screen:i.ScreenName.SettingsScreen},s)))},SHARE_MODAL_MANAGE_ACCESS__PARENT_FOLDER_CHANGE_ACCESS_MODAL__VIEW:({metadata:t,extras:s,event:a,origin:n})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.OpenParentFolderAccessModal,t,n,Object.assign(Object.assign({},s),{num_parent_folders:a.payload.numParents})))},SHARE_MODAL_MANAGE_ACCESS__PARENT_FOLDER_REMOVE_ACCESS_MODAL__VIEW:({metadata:t,extras:s,event:a,origin:n})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.OpenParentFolderAccessModal,t,n,Object.assign(Object.assign({},s),{num_parent_folders:a.payload.numParents})))},SHARE_MODAL_SHARE__VIEW:({metadata:t,extras:s,origin:a})=>{e(l.generateShareMeEventPayload(i.TiburonEventName.ViewShareScreen,t,a,Object.assign(Object.assign({},s),{share_tab:t.sharingLinkAccessLevel&&"editor"===t.sharingLinkAccessLevel[".tag"]?"edit_tab":"view_tab"}))),e(l.generateShareMeEventPayload(i.TiburonEventName.ViewShareTab,t,a,Object.assign(Object.assign({},s),{share_tab:t.sharingLinkAccessLevel&&"editor"===t.sharingLinkAccessLevel[".tag"]?"edit_tab":"view_tab"})))},SHARE_MODAL_SHARE__LINK_ACCESS_LEVEL__CHANGE:({metadata:t,extras:s,origin:a,event:n})=>{e(l.generateShareMeEventPayload(i.TiburonEventName.ViewShareTab,t,a,Object.assign(Object.assign({},s),{share_tab:"editor"===n.payload.next[".tag"]?"edit_tab":"view_tab"})))},SHARE_MODAL_MANAGE_ACCESS__VIEW:({metadata:t,extras:s,origin:a})=>{e(l.generateShareMeEventPayload(i.TiburonEventName.ViewManageAccessScreen,t,a,s))},SHARE_MODAL__REQUEST_CLOSE__CALLED:({metadata:t,extras:s,origin:a,event:n,cache:r})=>{t=Object.assign(Object.assign({},t),{sharingObjectIdentifier:n.payload.objectIdentifier}),t=Object.assign(Object.assign({},t),{shareModalSessionId:n.payload.sessionId}),r.inviteStartTime&&(s=Object.assign(Object.assign({},s),{time_modal_opened:Date.now()-r.inviteStartTime})),e(l.generateLogTiburonEventPayload(i.TiburonEventName.CloseShareModal,t,a,s))},TARGETS_TOKENIZER__TARGETS_SEARCH__API_START:({metadata:t,extras:s,origin:a})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.AttemptTargetSearch,t,a,s))},TARGETS_TOKENIZER__TARGETS_SEARCH__API_SUCCESS:({metadata:t,extras:s,origin:a})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.SucceedTargetSearch,t,a,s))},TARGETS_TOKENIZER__TARGETS_SEARCH__API_ERROR:({metadata:t,extras:s,origin:a,event:n})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.FailTargetSearch,t,a,Object.assign(Object.assign({},s),{error:n.payload.response.error[".tag"]})))},TARGETS_TOKENIZER__TARGETS_SEARCH__API_FATAL:({metadata:t,extras:s,origin:a})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.FailTargetSearch,t,a,Object.assign(Object.assign({},s),{error:"unknown"})))},RRC_SENDER_CREATE_SHARING_TASKS_ERROR:({metadata:t,extras:s,origin:a})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.RRCSenderCreateSharingTasksError,t,a,Object.assign(Object.assign({},s),{error:"unknown"})))},SHARE_MODAL_SETTINGS__DELETE_LINK_API_START:({metadata:t,extras:s,origin:a})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.AttemptDeleteSharedLink,t,a,s))},SHARE_MODAL_SETTINGS__DELETE_LINK_API_ERROR:({metadata:t,event:s,origin:a,extras:n})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.FailDeleteSharedLink,t,a,Object.assign({http_status_code:s.payload.response.statusCode,error_message:s.payload.response.error[".tag"]},n)))},SHARE_MODAL_SETTINGS__DELETE_LINK_API_FATAL:({metadata:t,extras:s,origin:a})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.FailDeleteSharedLink,t,a,Object.assign({http_status_code:0,error_message:"undefined_error"},s)))},SHARE_MODAL_SETTINGS__DELETE_LINK_API_SUCCESS:({metadata:t,extras:s,origin:a})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.SucceedDeleteSharedLink,t,a,Object.assign({http_status_code:200,response_status:"success"},s)))},SHARE_MODAL_TASK_MENU__RRC_SENDER__TOGGLE_ALL_CLICK:({metadata:t,extras:s,origin:a,event:n})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.RRCSenderTaskMenuToggleAllClick,t,a,Object.assign(Object.assign({},s),n.payload)))},SHARE_MODAL_TASK_MENU__RRC_SENDER__TASK_MENU_CLICK:({metadata:t,extras:s,origin:a,event:n})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.RRCSenderTaskMenuClick,t,a,Object.assign(Object.assign({},s),n.payload)))},SHARE_MODAL_TASK_MENU__RRC_SENDER__TASK_MENU_ITEM_CLICK:({metadata:t,extras:s,origin:a,event:n})=>{e(l.generateLogTiburonEventPayload(i.TiburonEventName.RRCSenderTaskMenuItemClick,t,a,Object.assign(Object.assign({},s),n.payload)))}}})(),t=a.useMemo(()=>({}),[]);return a.useCallback((s,a,i)=>{const n=e[s.type];if(n&&i)try{n({event:s,metadata:a,origin:i,cache:t,extras:{is_sdk:!0}})}catch(e){}},[e,t])}})),define("typescript/component_libraries/spectrum-sharing/src/endpoints/sharing/sharing-tiburon-logger",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/datatypes/common/endpoint"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.strToUTF8Arr=t.base64EncArr=t.sharingTiburonLogger=void 0,a=s.__importStar(a),t.sharingTiburonLogger=a.define({name:"sharing_receiving.SharingTiburonLogger"},e=>s=>{const i=Object.assign(Object.assign({},s),{extras:(0,t.base64EncArr)((0,t.strToUTF8Arr)(JSON.stringify(s.extras)))});return a.handler(e.sharingReceivingSharingTiburonLogger(i))});const i=e=>e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65;t.base64EncArr=e=>{let t=2,s="";const a=e.length;let n=0;for(let r=0;r<a;r++)t=r%3,r>0&&4*r/3%76==0&&(s+="\r\n"),n|=e[r]<<(16>>>t&24),2!==t&&e.length-r!=1||(s+=String.fromCodePoint(i(n>>>18&63),i(n>>>12&63),i(n>>>6&63),i(63&n)),n=0);return s.substr(0,s.length-2+t)+(2===t?"":1===t?"=":"==")};t.strToUTF8Arr=e=>{let t;const s=e.length;let a=0;for(let i=0;i<s;i++)t=e.codePointAt(i),t>65536&&i++,a+=t<128?1:t<2048?2:t<65536?3:t<2097152?4:t<67108864?5:6;const i=new Uint8Array(a);let n=0,r=0;for(;n<a;)t=e.codePointAt(r),t<128?i[n++]=t:t<2048?(i[n++]=192+(t>>>6),i[n++]=128+(63&t)):t<65536?(i[n++]=224+(t>>>12),i[n++]=128+(t>>>6&63),i[n++]=128+(63&t)):t<2097152?(i[n++]=240+(t>>>18),i[n++]=128+(t>>>12&63),i[n++]=128+(t>>>6&63),i[n++]=128+(63&t),r++):t<67108864?(i[n++]=248+(t>>>24),i[n++]=128+(t>>>18&63),i[n++]=128+(t>>>12&63),i[n++]=128+(t>>>6&63),i[n++]=128+(63&t),r++):(i[n++]=252+(t>>>30),i[n++]=128+(t>>>24&63),i[n++]=128+(t>>>18&63),i[n++]=128+(t>>>12&63),i[n++]=128+(t>>>6&63),i[n++]=128+(63&t),r++),r++;return i}})),define("typescript/component_libraries/spectrum-sharing/src/datatypes/common/endpoint",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/datatypes/utils/guards"],(function(e,t,s,a){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.defineProxy=t.define=t.handler=t.Status=void 0,a=s.__importStar(a),(function(e){e.SUCCESS="SUCCESS",e.ERROR="ERROR",e.FATAL="FATAL"})(i=t.Status||(t.Status={}));const n=a.isObjectOf({status:a.isNumber,headers:a.isUnknown,error:a.isObjectOf({error:a.isObjectOf({".tag":a.isString})})});t.handler=e=>s.__awaiter(void 0,void 0,void 0,(function*(){try{const t=yield e;return{status:i.SUCCESS,output:t.result}}catch(e){const t=e;return n(t)?{status:i.ERROR,error:t.error.error,statusCode:t.status}:{status:i.FATAL,error:e}}}));t.define=(e,t)=>({name:e.name,fetch:t,type:"standard"});t.defineProxy=(e,t)=>({name:e.name,useFetch:t,type:"proxy"})})),define("typescript/component_libraries/spectrum-sharing/src/datatypes/logging/tiburon",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/datatypes/sharing/link-access-level","typescript/component_libraries/spectrum-sharing/src/datatypes/sharing/object-metadata"],(function(e,t,s,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateShareMeEventPayload=t.generateLogTiburonEventPayload=t.getLinkMetadataExtras=void 0,a=s.__importStar(a),i=s.__importStar(i);const n=e=>e.access_type?e.access_type[".tag"]:void 0;t.getLinkMetadataExtras=e=>{const t={link_id:e.id,link_access_level:(s=e.link_permissions.link_access_level,s?s[".tag"]:a.VIEWER[".tag"])};var s;const i=(e=>{const t=new URL(e);if(t.search.includes("rlkey"))return{kind:"rlkey",val:t.searchParams.get("rlkey"),link_type:"righteous"};if(t.pathname.includes("/s/")||t.pathname.includes("/sh/")){const e=(e=>e.pathname.includes("/raw/")||e.pathname.includes("/dl/")||e.pathname.includes("/print/"))(t)?3:2;return{kind:"tkey",val:t.pathname.split("/")[e],link_type:"shmodel"}}return null})(e.url);return i&&(t[i.kind]=i.val,t.link_type=i.link_type),t};t.generateLogTiburonEventPayload=(e,t,s,a)=>{const n=t.shareModalSessionId,r=t.sharingObjectMetadata;return n&&(a=Object.assign(Object.assign({},a),{modal_session_id:n})),t.sharingObjectIdentifier&&("file"===t.sharingObjectIdentifier[".tag"]?a=Object.assign(Object.assign({},a),{file_id:t.sharingObjectIdentifier.fileId}):"shared_folder"===t.sharingObjectIdentifier[".tag"]?a=Object.assign(Object.assign({},a),{ns_id:t.sharingObjectIdentifier.sharedFolderId}):"file_folder"===t.sharingObjectIdentifier[".tag"]&&(a=Object.assign(Object.assign({},a),{fq_path:t.sharingObjectIdentifier.path}))),r&&r.path_lower&&(a=Object.assign(Object.assign({},a),{fq_path:r.path_lower})),r&&i.getIsFile(r)&&(a=Object.assign(Object.assign({},a),{file_id:r.id})),r&&i.getIsSharedFolder(r)&&(a=Object.assign(Object.assign({},a),{ns_id:r.shared_folder_id})),{share_tiburon_event_type:e,share_tib_action_origin_type:s,extras:a}};t.generateShareMeEventPayload=(e,s,a,r)=>{const o=s.shareModalSessionId,l=s.sharingLinkMetadata,c=s.sharingObjectMetadata;return o&&(r=Object.assign(Object.assign({},r),{modal_session_id:o})),l&&(r=Object.assign(Object.assign({},r),(0,t.getLinkMetadataExtras)(l))),c&&(r=Object.assign(Object.assign({},r),(e=>Object.assign(Object.assign({user_access_type:"editor"===n(e)?"writer":"reader",is_folder:i.getIsFolder(e),fq_path:e.path_lower,content_id:i.getIsFile(e)?e.id:i.getIsSharedFolder(e)?e.shared_folder_id:i.getIsFolder(e)?e.path_lower:""},Object.assign({},i.getIsSharedFolder(e)?{ns_id:e.shared_folder_id}:{})),{can_create_edit_link:i.getCanDoAction(e,i.CREATE_EDIT_LINK_TAG),can_create_view_link:i.getCanDoAction(e,i.CREATE_VIEW_LINK_TAG),can_edit_inband_invite:i.getCanDoAction(e,i.INVITE_EDITOR_TAG),can_view_invand_invite:i.getCanDoAction(e,i.INVITE_VIEWER_TAG),max_access:i.getCanDoAction(e,i.CREATE_EDIT_LINK_TAG)||i.getCanDoAction(e,i.INVITE_EDITOR_TAG)?"editor":"viewer"}))(c))),{share_tiburon_event_type:e,share_tib_action_origin_type:a,extras:r}}})),define("typescript/component_libraries/spectrum-sharing/src/datatypes/sharing/invite-target",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/datatypes/utils/typing","typescript/component_libraries/spectrum-sharing/src/datatypes/utils/tag"],(function(e,t,s,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toMemberSelector=t.formatSubTitle=t.getAvatarUrl=t.getUniqueId=t.createFromEmail=void 0,a=s.__importStar(a),i=s.__importStar(i);t.createFromEmail=e=>i.create("email",{email:e});t.getUniqueId=e=>"user"===e[".tag"]?""===e.dbx_account_id?`EMAIL:${e.email}`:`DBX_ID:${e.dbx_account_id}`:"group"===e[".tag"]?`DBX_ID:${e.group_id}`:"email"===e[".tag"]?`EMAIL:${e.email}`:a.exhausts(e,"UNKNOWN");t.getAvatarUrl=e=>"user"===e[".tag"]&&e.photo_url||null;t.formatSubTitle=(e,t)=>"user"===e[".tag"]||"email"===e[".tag"]?e.email:"group"===e[".tag"]?t.formatMessage({id:"XMHn5C",defaultMessage:"{count, plural, one{# member} other{# members}}"},{count:e.group_size||0}):"";t.toMemberSelector=e=>"email"===e[".tag"]?{".tag":"email",email:e.email}:"group"===e[".tag"]?{".tag":"dropbox_id",dropbox_id:e.group_id}:"user"===e[".tag"]?""===e.dbx_account_id?{".tag":"email",email:e.email}:{".tag":"dropbox_id",dropbox_id:e.dbx_account_id}:{".tag":"other"}})),define("typescript/component_libraries/spectrum-sharing/src/datatypes/sharing/access-level",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccessLevelWeight=void 0,t.AccessLevelWeight={viewer_no_comment:-10,viewer:1,editor:2,owner:3}})),define("typescript/component_libraries/spectrum-sharing/src/datatypes/sharing/link-access-level",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/datatypes/utils/typing","typescript/component_libraries/spectrum-sharing/src/datatypes/sharing/access-level"],(function(e,t,s,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIsLowerAccess=t.getCanCreateLink=t.EDITOR=t.VIEWER=void 0,a=s.__importStar(a),i=s.__importStar(i),t.VIEWER={".tag":"viewer"},t.EDITOR={".tag":"editor"};t.getCanCreateLink=(e,t,s,i,n,r,o)=>!s&&!i&&("editor"===e[".tag"]?t?n:o:"viewer"===e[".tag"]?!!t||r:"other"!==e[".tag"]&&a.exhausts(e,!1));t.getIsLowerAccess=(e,t)=>{const s=Object.keys(i.AccessLevelWeight);return e!==t&&-1!==s.indexOf(e)&&-1!==s.indexOf(t)&&i.AccessLevelWeight[t]<i.AccessLevelWeight[e]}})),define("typescript/component_libraries/spectrum-sharing/src/datatypes/sharing/link-audience",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OTHER=t.PUBLIC=t.TEAM=t.PASSWORD=t.NO_ONE=void 0,t.NO_ONE={".tag":"no_one"},t.PASSWORD={".tag":"password"},t.TEAM={".tag":"team"},t.PUBLIC={".tag":"public"},t.OTHER={".tag":"other"}})),define("typescript/component_libraries/spectrum-sharing/src/datatypes/sharing/link-metadata",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/datatypes/sharing/link-audience"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDaysUntilExpiration=t.getDefaultAudience=t.getCurrentAudience=t.getByAccessLevel=t.getCanDeleteLink=t.getEditLinkMetadata=t.getViewLinkMetadata=void 0,a=s.__importStar(a);t.getViewLinkMetadata=e=>e.links.find(e=>{var t;return"editor"!==(null===(t=e.link_permissions.link_access_level)||void 0===t?void 0:t[".tag"])})||null;t.getEditLinkMetadata=e=>e.links.find(e=>{var t;return"editor"===(null===(t=e.link_permissions.link_access_level)||void 0===t?void 0:t[".tag"])})||null;t.getCanDeleteLink=e=>{if(e){return e.link_permissions.can_revoke}return!1};t.getByAccessLevel=(e,s)=>"editor"===s[".tag"]?(0,t.getEditLinkMetadata)(e):(0,t.getViewLinkMetadata)(e);t.getCurrentAudience=e=>{const t=e.link_permissions;if(t.effective_audience)return t.effective_audience;if(!t.resolved_visibility)return a.PUBLIC;const s=t.resolved_visibility[".tag"];switch(s){case"public":case"password":case"no_one":return{".tag":s};case"team_only":return a.TEAM;case"team_and_password":return a.PASSWORD;case"shared_folder_only":case"only_you":return a.NO_ONE;default:return a.PUBLIC}};t.getDefaultAudience=(e,t,s,i)=>{if(!e)return a.NO_ONE;if("members"===t.shared_link_policy[".tag"])return a.NO_ONE;if(null!==s){const e=s.shared_link_create_policy[".tag"];if("team_only"===e||"default_team_only"===e)return a.TEAM;if("default_no_one"===e)return a.NO_ONE}return null!=i?i:a.PUBLIC};t.getDaysUntilExpiration=e=>{const t=e.expires;if(!t)return null;const s=(new Date(t).getTime()-Date.now())/864e5;return Math.floor(Math.max(s,0))}})),define("typescript/component_libraries/spectrum-sharing/src/datatypes/sharing/object-metadata",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/datatypes/sharing/link-access-level","typescript/component_libraries/spectrum-sharing/src/datatypes/utils/tag"],(function(e,t,s,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getParentFolderName=t.getParentSharedFolderId=t.getPermissionInfo=t.getCanUnshareObject=t.getCanDisableViewerInfo=t.getCanEnableViewerInfo=t.getCanChangeOptions=t.getCanCreateLink=t.getCanInvite=t.getCanDoSomeActions=t.getCanDoAction=t.getLinkAudiencePolicy=t.getViewerInfoPolicyEnabled=t.getFolderPolicy=t.getIsInsideTeamFolderTree=t.getIsTeamMemberFolder=t.getIsTeamFolderTree=t.getIsTeamSharedFolder=t.getIsConfidentialFolder=t.getIsSharedFolder=t.getIsNonSharedFolder=t.getIsFolder=t.getIsFile=t.DISABLE_VIEWER_INFO_TAG=t.ENABLE_VIEWER_INFO_TAG=t.UNSHARE_TAG=t.SHARE_MESSAGE_AS_COMMENT_TAG=t.SET_DOWNLOAD_POLICY_TAG=t.REMOVE_DOWNLOAD_POLICY_TAG=t.RELINQUISH_MEMBERSHIP_TAG=t.CHANGE_OPTIONS_TAG=t.CREATE_EDIT_LINK_TAG=t.CREATE_VIEW_LINK_TAG=t.INVITE_VIEWER_NO_COMMENT_TAG=t.INVITE_VIEWER_TAG=t.INVITE_EDITOR_TAG=void 0,a=s.__importStar(a),i=s.__importStar(i),t.INVITE_EDITOR_TAG=i.create("invite_editor"),t.INVITE_VIEWER_TAG=i.create("invite_viewer"),t.INVITE_VIEWER_NO_COMMENT_TAG=i.create("invite_viewer_no_comment"),t.CREATE_VIEW_LINK_TAG=i.create("create_view_link"),t.CREATE_EDIT_LINK_TAG=i.create("create_edit_link"),t.CHANGE_OPTIONS_TAG=i.create("change_options"),t.RELINQUISH_MEMBERSHIP_TAG=i.create("relinquish_membership"),t.REMOVE_DOWNLOAD_POLICY_TAG=i.create("remove_download_policy"),t.SET_DOWNLOAD_POLICY_TAG=i.create("set_download_policy"),t.SHARE_MESSAGE_AS_COMMENT_TAG=i.create("share_message_as_comment"),t.UNSHARE_TAG=i.create("unshare"),t.ENABLE_VIEWER_INFO_TAG=i.create("enable_viewer_info"),t.DISABLE_VIEWER_INFO_TAG=i.create("disable_viewer_info");t.getIsFile=e=>"file"===e[".tag"];t.getIsFolder=e=>"file_folder"===e[".tag"]||"shared_folder"===e[".tag"];t.getIsNonSharedFolder=e=>"file_folder"===e[".tag"];t.getIsSharedFolder=e=>"shared_folder"===e[".tag"];t.getIsConfidentialFolder=e=>(0,t.getIsFolder)(e)&&!!e.is_confidential;t.getIsTeamSharedFolder=e=>(0,t.getIsFolder)(e)&&!!e.is_team_folder;t.getIsTeamFolderTree=e=>(0,t.getIsTeamSharedFolder)(e)&&(0,t.getIsInsideTeamFolderTree)(e);t.getIsTeamMemberFolder=e=>!(0,t.getIsInsideTeamFolderTree)(e)&&e.owner_team;t.getIsInsideTeamFolderTree=e=>!!(0,t.getIsFolder)(e)&&e.is_inside_team_folder;t.getFolderPolicy=e=>e.policy;t.getViewerInfoPolicyEnabled=e=>{var s;return"enabled"===(null===(s=(0,t.getFolderPolicy)(e).viewer_info_policy)||void 0===s?void 0:s[".tag"])};t.getLinkAudiencePolicy=e=>{var s;return null===(s=(0,t.getFolderPolicy)(e).shared_link_policy)||void 0===s?void 0:s[".tag"]};t.getCanDoAction=(e,t)=>{var s;return(null!==(s=e.permissions)&&void 0!==s?s:[]).some(e=>e.action[".tag"]===t[".tag"]&&e.allow)};t.getCanDoSomeActions=(e,s)=>s.some(s=>(0,t.getCanDoAction)(e,s));t.getCanInvite=(e,s)=>"editor"===s[".tag"]?(0,t.getCanDoAction)(e,t.INVITE_EDITOR_TAG):"viewer"===s[".tag"]&&(0,t.getCanDoAction)(e,t.INVITE_VIEWER_TAG);t.getCanCreateLink=(e,s)=>a.getCanCreateLink(s,(0,t.getIsFolder)(e),(0,t.getIsTeamSharedFolder)(e),(0,t.getIsConfidentialFolder)(e),(0,t.getCanDoAction)(e,t.INVITE_EDITOR_TAG),(0,t.getCanDoAction)(e,t.CREATE_VIEW_LINK_TAG),(0,t.getCanDoAction)(e,t.CREATE_EDIT_LINK_TAG));t.getCanChangeOptions=e=>(0,t.getCanDoAction)(e,t.CHANGE_OPTIONS_TAG);t.getCanEnableViewerInfo=e=>(0,t.getCanDoAction)(e,t.ENABLE_VIEWER_INFO_TAG);t.getCanDisableViewerInfo=e=>(0,t.getCanDoAction)(e,t.DISABLE_VIEWER_INFO_TAG);t.getCanUnshareObject=e=>(0,t.getCanDoAction)(e,t.UNSHARE_TAG);t.getPermissionInfo=(e,t)=>{var s;return(null!==(s=e.permissions)&&void 0!==s?s:[]).find(e=>e.action[".tag"]===t[".tag"])};t.getParentSharedFolderId=e=>e.parent_shared_folder_id||null;t.getParentFolderName=e=>{if((0,t.getIsFile)(e)){const t=e.path_display;if(t){const e=t.split("/");if(e.length>1)return e[e.length-2]}}return(0,t.getIsFolder)(e)&&"parent_folder_name"in e&&e.parent_folder_name||""}})),define("typescript/component_libraries/spectrum-sharing/src/datatypes/profile-services/linked-services",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDoesServiceHavePermissionGranted=t.getIsServiceConnected=void 0;t.getIsServiceConnected=(e,t)=>{const s=e.linked_services.find(e=>e.service_type[".tag"]===t[".tag"]);return!!s&&"is_connected"===s.connection_state[".tag"]};t.getDoesServiceHavePermissionGranted=(e,t,s)=>{const a=e.linked_services.find(e=>e.service_type[".tag"]===t[".tag"]);return!!a&&a.granted_permissions.some(e=>e[".tag"]===s[".tag"])}})),define("typescript/component_libraries/spectrum-sharing/src/datatypes/utils/guards",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAnyOf=t.isAllOf=t.isObjectOf=t.isArrayOf=t.isObject=t.isArray=t.isString=t.isUndefined=t.isNull=t.isNumber=t.isBoolean=t.isExactly=t.isUnknown=void 0;t.isUnknown=e=>!0;t.isExactly=e=>t=>t===e;t.isBoolean=e=>"boolean"==typeof e;t.isNumber=e=>"number"==typeof e;t.isNull=e=>null===e;t.isUndefined=e=>void 0===e;t.isString=e=>"string"==typeof e;t.isArray=e=>Array.isArray(e);t.isObject=e=>!(0,t.isNull)(e)&&!(0,t.isArray)(e)&&"object"==typeof e;t.isArrayOf=e=>s=>(0,t.isArray)(s)&&s.every(e);t.isObjectOf=e=>s=>(0,t.isObject)(s)&&Object.entries(e).every(([e,t])=>t(s[e]));t.isAllOf=(...e)=>t=>e.every(e=>e(t));t.isAnyOf=(...e)=>t=>e.some(e=>e(t))})),define("typescript/component_libraries/spectrum-sharing/src/datatypes/utils/tag",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=void 0;t.create=(e,t)=>Object.assign({".tag":e},t||{})})),define("typescript/component_libraries/spectrum-sharing/src/datatypes/utils/typing",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exhausts=void 0;t.exhausts=(e,t)=>(console.warn("Exaustive typecheck failed."),t)})),define("typescript/component_libraries/spectrum-sharing/src/endpoints/profile-services/list-linked-services",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/datatypes/common/endpoint"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listLinkedServices=void 0,a=s.__importStar(a),t.listLinkedServices=a.define({name:"profileServices.listLinkedServices"},e=>()=>a.handler(e.profileServicesListLinkedServices()))})),define("typescript/component_libraries/spectrum-sharing/src/endpoints/sharing/targets-search",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/datatypes/common/endpoint"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.targetsSearch=t.unsafeRemoveBroadTargetReference=void 0,a=s.__importStar(a);t.unsafeRemoveBroadTargetReference=e=>e,t.targetsSearch=a.define({name:"sharing.targetsSearch"},e=>i=>s.__awaiter(void 0,void 0,void 0,(function*(){const s=yield a.handler(e.sharingTargetsSearch(i));return"SUCCESS"===s.status?{status:a.Status.SUCCESS,output:s.output.entries.map(t.unsafeRemoveBroadTargetReference)}:s})))})),define("typescript/component_libraries/spectrum-sharing/src/organisms/share-modal-manage-links/formatting",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatIllustrationAltText=t.formatNoPermissionsPageSubtitleText=t.formatNoPermissionsPageTitleText=t.formatViewLinkInfoTitleText=t.formatEditLinkInfoTitleText=t.formatLinkInfoTitleText=t.formatLinkInfoSubtitleText=t.formatAudienceText=void 0;t.formatAudienceText=(e,t,s)=>"editor"===s[".tag"]?"public"===t[".tag"]?e.formatMessage({id:"pS+xkY",defaultMessage:"Anyone with this link can edit"}):"team"===t[".tag"]?e.formatMessage({id:"woEqCF",defaultMessage:"Team members with this link can edit"}):"password"===t[".tag"]?e.formatMessage({id:"ltAbbX",defaultMessage:"Only people with the password can edit"}):"no_one"===t[".tag"]?e.formatMessage({id:"Vsuzcf",defaultMessage:"Only people invited can edit"}):"":"public"===t[".tag"]?e.formatMessage({id:"+yHekt",defaultMessage:"Anyone with this link can view"}):"team"===t[".tag"]?e.formatMessage({id:"vCAOR6",defaultMessage:"Team members with this link can view"}):"password"===t[".tag"]?e.formatMessage({id:"OiPH5W",defaultMessage:"Only people with the password can view"}):"no_one"===t[".tag"]?e.formatMessage({id:"MCi4Ms",defaultMessage:"Only people invited can view"}):"";t.formatLinkInfoSubtitleText=(e,s,a,i)=>a&&s?(0,t.formatAudienceText)(e,s,i):e.formatMessage({id:"+9ti3K",defaultMessage:"Create this link in settings"});t.formatLinkInfoTitleText=(e,s)=>"editor"===s[".tag"]?(0,t.formatEditLinkInfoTitleText)(e):(0,t.formatViewLinkInfoTitleText)(e);t.formatEditLinkInfoTitleText=e=>e.formatMessage({id:"Jaz6mY",defaultMessage:"Link for editing"});t.formatViewLinkInfoTitleText=e=>e.formatMessage({id:"HUaQ+r",defaultMessage:"Link for viewing"});t.formatNoPermissionsPageTitleText=e=>e.formatMessage({id:"fvGBmm",defaultMessage:"You don't have access to links"});t.formatNoPermissionsPageSubtitleText=e=>e.formatMessage({id:"0Y5iuS",defaultMessage:"If you need a link, ask the owner to share it with you"});t.formatIllustrationAltText=e=>e.formatMessage({id:"NXYt9i",defaultMessage:"Person holding an empty box"})})),define("typescript/component_libraries/spectrum-sharing/src/organisms/share-modal-manage-links/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/organisms/share-modal-manage-links/share-modal-manage-links"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/organisms/share-modal-manage-links/link-list",["require","exports","tslib","react","typescript/component_libraries/spectrum-sharing/src/utils/dsx/dsx-react","typescript/component_libraries/spectrum-sharing/src/datatypes/sharing/link-access-level","typescript/component_libraries/spectrum-sharing/src/organisms/share-modal-manage-links/link-list-item","typescript/component_libraries/spectrum-sharing/src/bindings/logging","typescript/component_libraries/spectrum-sharing/src/utils/logging","typescript/component_libraries/spectrum-sharing/src/organisms/share-modal-manage-links/no-permissions-page"],(function(e,t,s,a,i,n,r,o,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkList=void 0,a=s.__importStar(a),i=s.__importStar(i),n=s.__importStar(n),r=s.__importStar(r),o=s.__importStar(o),c=s.__importStar(c);const d=(e,t)=>{const s=o.useLogger();return a.useCallback(()=>{var a,i;let r=n.VIEWER,o=(0,l.getLinkType)(null===(a=e.$viewLinkMetadata.get())||void 0===a?void 0:a.url),c=l.SettingsTabName.ViewLinkSettingsTab;t===n.EDITOR&&(r=n.EDITOR,o=(0,l.getLinkType)(null===(i=e.$editLinkMetadata.get())||void 0===i?void 0:i.url),c=l.SettingsTabName.EditLinkSettingsTab),t===n.EDITOR?e.$props.get().onEditLinkSettingsClick():e.$props.get().onViewLinkSettingsClick(),s("SHARE_MODAL_MANAGE_ACCESS__SETTINGS_TEXT__CLICK",{link_access_level:r,link_type:o,settings_tab:c})},[e,s])},p=({store:e})=>{const t=i.useStore(e.$shouldShowEditLinkInfo),s=i.useStore(e.$editLinkAudience),o=i.useStore(e.$isEditLinkExisting),l=d(e,n.EDITOR),c=i.useStore(e.$objectMetadata),p=i.useStore(e.$canCreateEditLink);return t?a.createElement(a.Fragment,null,a.createElement(r.LinkListItemSection,{canCreateLink:p,isLinkExisting:o,linkAccessLevel:n.EDITOR,linkAudience:s,objectMetadata:c,onLinksSettingsTextClick:l})):a.createElement(a.Fragment,null)};p.displayName="EditLinkInfoWrapper";const u=({store:e})=>{const t=i.useStore(e.$viewLinkAudience),s=i.useStore(e.$isViewLinkExisting),o=d(e,n.VIEWER),l=i.useStore(e.$objectMetadata),c=i.useStore(e.$shouldShowViewLinkInfo),p=i.useStore(e.$canCreateViewLink);return c?a.createElement(a.Fragment,null,a.createElement(r.LinkListItemSection,{canCreateLink:p,isLinkExisting:s,linkAccessLevel:n.VIEWER,linkAudience:t,objectMetadata:l,onLinksSettingsTextClick:o})):a.createElement(a.Fragment,null)};u.displayName="ViewLinkInfoWrapper";const m=({store:e})=>i.useStore(e.$shouldShowNoPermissionsPage)?a.createElement(a.Fragment,null,a.createElement(c.NoPermissionsSection,null)):a.createElement(a.Fragment,null);m.displayName="NoPermissionsPageWrapper";t.LinkList=({store:e})=>a.createElement("div",{style:{border:"1px solid var(--color__faint__border)",height:"250px",padding:"13px"}},a.createElement(p,{store:e}),a.createElement("div",{style:{height:"4px"}}),a.createElement(u,{store:e}),a.createElement(m,{store:e})),t.LinkList.displayName="LinkList"})),define("typescript/component_libraries/spectrum-sharing/src/organisms/share-modal-manage-links/link-list-item",["require","exports","tslib","react","typescript/component_libraries/spectrum-sharing/src/organisms/share-modal-manage-links/formatting","typescript/component_libraries/spectrum-sharing/src/components/links_info_row/links_info_row","react-intl","dig-components/icons","dig-components/icons/src"],(function(e,t,s,a,i,n,r,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkListItemSection=void 0,a=s.__importStar(a),i=s.__importStar(i);const c=({isLinkExisting:e})=>!e;t.LinkListItemSection=e=>{const t=(0,r.useIntl)(),s=(({linkAccessLevel:e})=>"editor"===e[".tag"]?a.createElement(o.UIIcon,{src:l.EditLine,role:"presentation"}):a.createElement(o.UIIcon,{src:l.ShowLine,role:"presentation"}))(e),d=i.formatLinkInfoTitleText(t,e.linkAccessLevel),p=i.formatLinkInfoSubtitleText(t,e.linkAudience,e.isLinkExisting,e.linkAccessLevel),u=c(e),m=c(e),h=(({onLinksSettingsTextClick:e})=>a.useCallback(()=>{e()},[e]))(e),g=(e=>e.formatMessage({id:"7yZAb1",defaultMessage:"Settings"}))(t);return a.createElement(a.Fragment,null,a.createElement(n.LinksInfoRow,{icon:s,disableIcon:u,title:d,disableTitle:m,subtitle:p,disableButton:!1,buttonText:g,onClickButton:h}))},t.LinkListItemSection.displayName="LinkListItemSection"})),define("typescript/component_libraries/spectrum-sharing/src/organisms/share-modal-manage-links/no-permissions-page",["require","exports","tslib","react","react-intl","typescript/component_libraries/spectrum-sharing/src/organisms/share-modal-manage-links/formatting","dig-components/typography","dig-components/icons/src"],(function(e,t,s,a,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoPermissionsSection=void 0,a=s.__importStar(a),n=s.__importStar(n);t.NoPermissionsSection=()=>{const e=(0,i.useIntl)(),t=n.formatNoPermissionsPageTitleText(e),s=n.formatNoPermissionsPageSubtitleText(e);return a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column",paddingTop:"20px"}},a.createElement("div",{style:{height:"48px",width:"48px"}},a.createElement(o.InfoPictogram,null)),a.createElement("div",null,a.createElement("div",{style:{textAlign:"center",paddingTop:"20px"}},a.createElement(r.Title,{size:"small"},t)),a.createElement("div",{style:{textAlign:"center",padding:"0 24px 0 24px"}},a.createElement(r.Text,{size:"standard"},s))))},t.NoPermissionsSection.displayName="NoPermissionsSection"})),define("typescript/component_libraries/spectrum-sharing/src/organisms/share-modal-manage-links/share-modal-manage-links",["require","exports","tslib","react","typescript/component_libraries/spectrum-sharing/src/organisms/share-modal-manage-links/store","typescript/component_libraries/spectrum-sharing/src/organisms/share-modal-manage-links/link-list"],(function(e,t,s,a,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareModalManageLinksInner=void 0,a=s.__importStar(a),i=s.__importStar(i),n=s.__importStar(n);t.ShareModalManageLinksInner=e=>{const t=i.useInitStore(e);return a.createElement("div",{style:{height:"260px"}},a.createElement(n.LinkList,{store:t}))},t.ShareModalManageLinksInner.displayName="ShareModalManageLinksInner"})),define("typescript/component_libraries/spectrum-sharing/src/organisms/share-modal-manage-links/store",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/utils/dsx/dsx","typescript/component_libraries/spectrum-sharing/src/utils/dsx/dsx-react","typescript/component_libraries/spectrum-sharing/src/datatypes/sharing/link-metadata","typescript/component_libraries/spectrum-sharing/src/datatypes/sharing/object-metadata"],(function(e,t,s,a,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useInitStore=void 0,a=s.__importStar(a),i=s.__importStar(i),n=s.__importStar(n),r=s.__importStar(r);t.useInitStore=e=>i.useInitStore(e,e=>{const t=a.proxy(()=>e.get().linksMetadata),s=a.proxy(()=>e.get().objectMetadata),i=a.proxy(()=>e.get().onViewLinkSettingsClick),o=a.proxy(()=>e.get().onEditLinkSettingsClick),l=a.proxy(()=>n.getByAccessLevel(e.get().linksMetadata,{".tag":"editor"})),c=a.proxy(()=>{const e=l.get();return null!==e?n.getCurrentAudience(e):null}),d=a.proxy(()=>null!=l.get()),p=a.proxy(()=>r.getCanCreateLink(s.get(),{".tag":"editor"})),u=a.proxy(()=>{const e=p.get(),t=d.get();return e||t}),m=a.proxy(()=>n.getByAccessLevel(e.get().linksMetadata,{".tag":"viewer"})),h=a.proxy(()=>{const e=m.get();return null!==e?n.getCurrentAudience(e):null}),g=a.proxy(()=>null!=m.get()),_=a.proxy(()=>r.getCanCreateLink(s.get(),{".tag":"viewer"})),f=a.proxy(()=>{const e=_.get(),t=g.get();return e||t}),E=a.proxy(()=>{const e=u.get(),t=f.get();return!(e||t)});return{$objectMetadata:s,$linksMetadata:t,$canCreateEditLink:p,$canCreateViewLink:_,$editLinkMetadata:l,$viewLinkMetadata:m,$editLinkAudience:c,$viewLinkAudience:h,$isEditLinkExisting:d,$isViewLinkExisting:g,$onViewLinkSettingsClick:i,$onEditLinkSettingsClick:o,$shouldShowEditLinkInfo:u,$shouldShowViewLinkInfo:f,$shouldShowNoPermissionsPage:E,$props:e}})})),define("typescript/component_libraries/spectrum-sharing/src/organisms/targets_tokenizer/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/organisms/targets_tokenizer/targets-tokenizer"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/organisms/targets_tokenizer/targets-tokenizer",["require","exports","tslib","react","react-intl","dig-components/avatar","dig-components/chips","dig-components/text_fields","dig-components/typeahead","typescript/component_libraries/spectrum-sharing/src/utils/dsx/dsx","typescript/component_libraries/spectrum-sharing/src/utils/dsx/dsx-react","typescript/component_libraries/spectrum-sharing/src/datatypes/utils/guards","typescript/component_libraries/spectrum-sharing/src/utils/logging","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","typescript/component_libraries/spectrum-sharing/src/utils/em_string","typescript/component_libraries/spectrum-sharing/src/bindings/endpoint","typescript/component_libraries/spectrum-sharing/src/bindings/logging","typescript/component_libraries/spectrum-sharing/src/bindings/secrets","typescript/component_libraries/spectrum-sharing/src/bindings/snackbar","typescript/component_libraries/spectrum-sharing/src/endpoints/sharing/targets-search","typescript/component_libraries/spectrum-sharing/src/endpoints/profile-services/list-linked-services","typescript/component_libraries/spectrum-sharing/src/datatypes/sharing/object-metadata","typescript/component_libraries/spectrum-sharing/src/datatypes/sharing/invite-target","typescript/component_libraries/spectrum-sharing/src/datatypes/profile-services/linked-services","typescript/component_libraries/spectrum-sharing/src/datatypes/utils/typing","typescript/component_libraries/spectrum-sharing/src/utils/initials"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u,m,h,g,_,f,E,S,b,v,M,T,y,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TargetsTokenizer=void 0,a=s.__importStar(a),c=s.__importStar(c),d=s.__importStar(d),p=s.__importStar(p),g=s.__importStar(g),_=s.__importStar(_),f=s.__importStar(f),E=s.__importStar(E),S=s.__importStar(S),b=s.__importStar(b),v=s.__importStar(v),M=s.__importStar(M),T=s.__importStar(T),y=s.__importStar(y),C=s.__importStar(C);const I=/['&A-Za-z0-9\._%+-]+@[A-Za-z0-9-][A-Za-z0-9\.-]*\.[A-Za-z]{2,15}/gi,k=/[,|;>]+/,A=["IMPORT_CONTACTS"],L=e=>(e.match(I)||[]).map(M.createFromEmail),N=e=>a.useCallback(t=>{const s=t.currentTarget.value,a=(i=s,k.test(i)?L(i):[]);var i;c.batch(()=>{e.$isTypeaheadForcedOpen.set(!1),a.length>0?(e.$inviteTargets.set([...e.$inviteTargets.get(),...a]),e.$query.set("")):e.$query.set(s)})},[e]),w=e=>e.map(e=>{if("email"===e[".tag"]||"user"===e[".tag"]){const t=e.email.trim();return t.length===e.email.length?e:Object.assign(Object.assign({},e),{email:t})}return e}),O=e=>{const t={};return e.filter(e=>{const s=M.getUniqueId(e);return!t[s]&&(t[s]=!0,!0)})},P=e=>{const t=(e=>{const t=g.useEndpoint(S.targetsSearch),i=_.useLogger(),n=E.useShowGenericRequestFailureMessage();return a.useCallback(()=>s.__awaiter(void 0,void 0,void 0,(function*(){let s;const a=e.$objectMetadata.get();v.getIsFile(a)&&(s=a.id);const r=e.$query.get();i("TARGETS_TOKENIZER__TARGETS_SEARCH__API_START",null);const o=yield t({content_id:s,query:r,force_refresh:!1,limit:10});if("SUCCESS"===o.status?i("TARGETS_TOKENIZER__TARGETS_SEARCH__API_SUCCESS",{response:o}):"ERROR"===o.status?i("TARGETS_TOKENIZER__TARGETS_SEARCH__API_ERROR",{response:o}):i("TARGETS_TOKENIZER__TARGETS_SEARCH__API_FATAL",{response:o}),e.$query.get()===r)return"SUCCESS"!==o.status?(n(),void e.$searchSuggestionsRaw.set([])):void e.$searchSuggestionsRaw.set(o.output)})),[e,t,n,i])})(e);a.useEffect(()=>{const s=[e.$query.obs(t)];return()=>s.forEach(e=>e())},[e,t])},R=e=>{const t=g.useEndpoint(b.listLinkedServices);return a.useCallback(()=>s.__awaiter(void 0,void 0,void 0,(function*(){if(e.$isLinkedServicesUpdating.get())return;const s=yield t(null);"SUCCESS"===s.status?c.batch(()=>{e.$linkedServices.set(s.output),e.$isLinkedServicesUpdating.set(!1)}):c.batch(()=>{e.$linkedServices.set(null),e.$isLinkedServicesUpdating.set(!1)})})),[e,t])},D=e=>{const t=(0,i.useIntl)(),n=E.useSnackbar(),r=_.useLogger(),o=R(e),l=f.useRedirectWindowToken();return a.useCallback(()=>s.__awaiter(void 0,void 0,void 0,(function*(){if(e.$isConnectingToGoogle.get()||null===l)return;e.$isConnectingToGoogle.set(!0);let s=null;const a=()=>{n.showFailure({message:t.formatMessage({id:"sgP44K",defaultMessage:"Failed to connect your contacts from Google"}),intl:t}),null!==s&&clearInterval(s),window.removeEventListener("message",d),o().then(()=>{e.$isConnectingToGoogle.set(!1)})},i=new URLSearchParams({service:"1",is_popup:"true",action:"link_contacts",prompt_select:"true",token:l,user_id:e.$user.get().id.toString(),is_desktop:"false"}),c=window.open(`/profile_services/start_auth_flow?${i.toString()}`,"Google","width=600,height=600,resizable=1,scrollbars=1");if(null===c)return a();s=setInterval(()=>{c.closed&&a()},1e3);const d=i=>{let l;try{l=JSON.parse(i.data)}catch(e){return}if(p.isObjectOf({type:p.isExactly("db:profile_service:auth_complete"),payload:p.isObjectOf({success:p.isBoolean})})(l)){if(l.payload.success)return m=c,r("TEAMS_WEB",{name:u.TeamsWebEventName.ImportContactsComplete,extra:{provider:"google",path:window.location.pathname}}),n.showCompleted({message:t.formatMessage({id:"Au33+R",defaultMessage:"Successfully connected your contacts from Google"}),intl:t}),null!==s&&clearInterval(s),window.removeEventListener("message",d),o().then(()=>{e.$isConnectingToGoogle.set(!1)}),void(null==m||m.close());var m;a(),c.close()}};window.addEventListener("message",d)})),[e,t,n,r,o,l])},x=(e,t)=>"user"===e[".tag"]?C.getUserInitials(e.name,t.locale):"group"===e[".tag"]?C.getGroupInitials(e.name):"email"===e[".tag"]?"":y.exhausts(e,""),F=(e,t)=>"user"===e[".tag"]?t&&t!==e.dbx_team_id?e.email:e.name:"group"===e[".tag"]?e.name:"email"===e[".tag"]?e.email:"",j=({store:e,target:t})=>{const s=(0,i.useIntl)(),o=((e,t)=>a.useCallback(()=>{const s=e.$inviteTargets.get().filter(e=>e!==t);c.batch(()=>{e.$inviteTargets.set(s),e.$query.set("")})},[e,t]))(e,t),l=e.$user.get().team_dbtid,p=h.Emstring.em_snippet(F(t,l),m.SNIPPET_SIZES.EMAIL),u="user"===t[".tag"]&&l&&l!==t.dbx_team_id?"":x(t,s),g=M.getAvatarUrl(t),_=(0,n.avatarColorForUserIdentifier)(u),f=M.getUniqueId(t),E=d.useStore(e.$inviteTargetValidation)[f],S=E&&"disallowed"===E.result[".tag"],b=E&&"allowed"===E.result[".tag"]&&"no_warning"!==E.result.allowed[".tag"];return a.createElement(r.InputChip,{size:"small",onDelete:o,isAlert:S,isWarning:b,withAvatarLeft:(u||g)&&a.createElement(n.Avatar,{src:g||"",size:"xsmall",backgroundColor:u&&_,hasNoOutline:!0},u)},p)};j.displayName="Chip";const B=({target:e})=>{const t=(0,i.useIntl)(),s=M.getUniqueId(e),r=x(e,t),o=F(e),c=M.formatSubTitle(e,t),d=M.getAvatarUrl(e),p=(0,n.avatarColorForUserIdentifier)(r);return a.createElement(l.Typeahead.Row,{"data-testid":"typeahead-suggestion",key:s,value:e,withTitle:o,withSubtitle:c,withLeftAccessory:a.createElement(n.Avatar,{src:d||"",backgroundColor:p,hasNoOutline:!0},r)})};B.displayName="Suggestion";const U=({store:e})=>{const t=(0,i.useIntl)(),s=d.useStore(e.$isConnectingToGoogle),r=d.useStore(e.$isConnectedToGoogle),o=d.useStore(e.$isImportContactsExpanded),c=d.useStore(e.$isLinkedServicesUpdating);return f.useRedirectWindowToken()?s?a.createElement(l.Typeahead.Row,{"data-testid":"typeahead-import-contacts",key:"IMPORT_CONTACTS",withLeftAccessory:a.createElement(n.Avatar,{src:"/static/images/index/google-logo-color.svg"}),value:"IMPORT_CONTACTS",withTitle:"Google",withSubtitle:t.formatMessage({id:"JbMFlW",defaultMessage:"Importing contacts"})}):c?null:o?r?a.createElement(l.Typeahead.Row,{"data-testid":"typeahead-import-contacts",key:"IMPORT_CONTACTS",withLeftAccessory:a.createElement(n.Avatar,{src:"/static/images/index/google-logo-color.svg"}),value:"IMPORT_CONTACTS",withTitle:"Google",withSubtitle:t.formatMessage({id:"2/+46g",defaultMessage:"Connected"})}):a.createElement(l.Typeahead.Row,{"data-testid":"typeahead-import-contacts",key:"IMPORT_CONTACTS",withLeftAccessory:a.createElement(n.Avatar,{src:"/static/images/index/google-logo-color.svg"}),value:"IMPORT_CONTACTS",withTitle:"Google",withSubtitle:t.formatMessage({id:"CkYgqG",defaultMessage:"Sign in to import contacts"})}):a.createElement(l.Typeahead.Row,{"data-testid":"typeahead-import-contacts",key:"IMPORT_CONTACTS",withLeftAccessory:a.createElement(n.Avatar,{src:"/static/images/icons/icon-import.png"}),value:"IMPORT_CONTACTS",withTitle:t.formatMessage({id:"H3lmrv",defaultMessage:"Import contacts"}),withSubtitle:t.formatMessage({id:"fcpqv/",defaultMessage:"Import contacts from another service"})}):null};U.displayName="ImportContacts";t.TargetsTokenizer=e=>{const t=(e=>{const t=a.useRef(null);return d.useInitStore(e,e=>{const s=c.store(!1),a=c.store(!1),i=c.store(!1),n=c.store(!1),r=c.store(!1),o=c.store(null),l=c.store(""),d=c.proxy(()=>e.get().user),p=c.proxy(()=>e.get().accessLevel),u=c.proxy(()=>e.get().inviteTargets,t=>e.get().onInviteTargetsChange(w(O(t)))),m=c.proxy(()=>e.get().inviteTargetValidation),h=c.proxy(()=>e.get().objectMetadata),g=c.proxy(()=>v.getCanInvite(h.get(),p.get())),_=c.proxy(()=>{const e=o.get();return e?T.getIsServiceConnected(e,{".tag":"google"})&&T.getDoesServiceHavePermissionGranted(e,{".tag":"google"},{".tag":"contacts"}):null}),f=c.proxy(()=>d.get().is_team),E=c.proxy(()=>v.getIsTeamSharedFolder(h.get())),S=c.proxy(()=>n.get()),b=c.store([]),y=c.proxy(e=>{const t=E.get(),s=d.get().email,a=u.get().map(M.getUniqueId),i={},n=b.get().filter(e=>{const n=M.getUniqueId(e);return!i[n]&&(i[n]=!0,!a.includes(n)&&((!t||"group"===e[".tag"])&&("email"!==e[".tag"]&&("user"!==e[".tag"]||e.email!==s))))});return null!==e&&e.length===n.length&&e.every((e,t)=>e===n[t],!0)?e:n}),C=c.proxy(e=>{const t=E.get(),s=l.get(),a=t||""===s,i=[...y.get().slice(0,9),...a?[]:A];return null!==e&&e.length===i.length&&e.reduce((e,t,s)=>e&&t===i[s],!0)?e:i});return{$accessLevel:p,$user:d,$canInvite:g,$inviteTargets:u,$inviteTargetValidation:m,$isConnectedToGoogle:_,$isConnectingToGoogle:s,$isFocused:a,$isImportContactsExpanded:i,$isLinkedServicesUpdating:n,$isTeamAccount:f,$isTeamFolder:E,$isTypeaheadForcedOpen:r,$isUpdatingGoogleConnectionStatus:S,$linkedServices:o,$objectMetadata:h,$query:l,$searchSuggestionsRaw:b,$searchSuggestions:y,$suggestions:C,inputRef:t}})})(e),n=(0,i.useIntl)(),r=a.useRef(null),p=d.useStore(t.$query),u=d.useStore(t.$inviteTargets),m=d.useStore(t.$suggestions),h=d.useStore(t.$canInvite),f=d.useStore(t.$isTypeaheadForcedOpen);P(t),(e=>{const t=g.useEndpoint(S.targetsSearch),i=_.useLogger();a.useEffect(()=>{s.__awaiter(void 0,void 0,void 0,(function*(){i("TARGETS_TOKENIZER__TARGETS_SEARCH__API_START",null);const s=yield t({content_id:void 0,query:"",force_refresh:!0,limit:10});"SUCCESS"===s.status?i("TARGETS_TOKENIZER__TARGETS_SEARCH__API_SUCCESS",{response:s}):"ERROR"===s.status?i("TARGETS_TOKENIZER__TARGETS_SEARCH__API_ERROR",{response:s}):i("TARGETS_TOKENIZER__TARGETS_SEARCH__API_FATAL",{response:s}),"SUCCESS"===s.status&&e.$searchSuggestionsRaw.set(s.output)}))},[])})(t),(e=>{const t=R(e);a.useEffect(()=>{t()},[t])})(t);const E=(e=>{const t=D(e);return a.useCallback(s=>{c.batch(()=>{if("IMPORT_CONTACTS"===s){if(e.$isTypeaheadForcedOpen.set(!0),!e.$isImportContactsExpanded.get())return void e.$isImportContactsExpanded.set(!0);if(e.$isConnectingToGoogle.get())return;if(e.$isConnectedToGoogle.get())return;return e.$query.set(""),void t()}e.$query.set(""),e.$inviteTargets.set([...e.$inviteTargets.get(),s])})},[e,t])})(t),b=(e=>a.useCallback(t=>{const s=e.$query.get();8===t.keyCode&&""===s&&e.$inviteTargets.set(e.$inviteTargets.get().slice(0,-1)),13===t.keyCode&&(e.$searchSuggestions.get().length>0?c.batch(()=>{e.$inviteTargets.set([...e.$inviteTargets.get(),e.$searchSuggestions.get()[0]]),e.$query.set("")}):""!==s&&c.batch(()=>{e.$inviteTargets.set([...e.$inviteTargets.get(),M.createFromEmail(s)]),e.$query.set("")}))},[e]))(t),y=N(t),C=(e=>{const t=(0,i.useIntl)(),s=d.useStore(e.$isTeamFolder),n=d.useStore(e.$isTeamAccount);return a.useMemo(()=>s?t.formatMessage({id:"VMGE6I",defaultMessage:"Group names"}):n?t.formatMessage({id:"+nKRfb",defaultMessage:"Add an email, name, or group"}):t.formatMessage({id:"bdV6O3",defaultMessage:"Add an email or name"}),[s,n,t])})(t),I=(e=>a.useCallback(()=>{const t=L(e.$query.get());c.batch(()=>{t.length>0&&(e.$inviteTargets.set([...e.$inviteTargets.get(),...t]),e.$query.set("")),e.$isTypeaheadForcedOpen.set(!1),e.$isFocused.set(!1)})},[e]))(t),k=(e=>a.useCallback(()=>{e.$isTypeaheadForcedOpen.set(!1),e.$isFocused.set(!0)},[e]))(t),x=(e=>a.useCallback(t=>"IMPORT_CONTACTS"===t?a.createElement(U,{store:e}):a.createElement(B,{target:t}),[e]))(t);return a.createElement(a.Fragment,null,a.createElement(l.Typeahead.Wrapper,{onSelection:E,hasMaxHeight:!0,isPortaled:!1},({getTriggerProps:e,getContentProps:i})=>{const c=i({}),{open:d}=c,g=s.__rest(c,["open"]);return a.createElement(a.Fragment,null,a.createElement(o.TextInput.Container,{ref:r,disabled:!h},a.createElement(o.TextInput.ChipsContainer,null,u.map((e,s)=>a.createElement(j,{store:t,key:s,target:e})),a.createElement(o.TextInput.Input,Object.assign({},e({onChange:y,onKeyDown:b,onBlur:I,onFocus:k}),{ref:t.inputRef,disabled:!h,value:p,"aria-label":C,placeholder:C,"data-testid":"targets-tokenizer-input",id:"targets-tokenizer-input-search"})))),a.createElement(l.Typeahead.Container,Object.assign({},g,{triggerRef:r,open:d||f,"data-testid":"typeahead-container"}),a.createElement(l.Typeahead.Results,{title:n.formatMessage({id:"ZusjWv",defaultMessage:"Suggested people"}),results:m,renderRow:x,initialResults:""==p?3:10,maxResults:10})))}))},t.TargetsTokenizer.displayName="TargetsTokenizer"})),define("typescript/component_libraries/spectrum-sharing/src/components/task_menu/index",["require","exports","tslib","typescript/component_libraries/spectrum-sharing/src/components/task_menu/task-menu"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(a,t)})),define("typescript/component_libraries/spectrum-sharing/src/components/task_menu/task-menu",["require","exports","tslib","react","react-intl","dig-components/menu","dig-components/buttons","dig-components/icons","dig-components/controls","dig-components/typography","dig-components/icons/src","typescript/component_libraries/spectrum-sharing/src/bindings/logging","typescript/component_libraries/spectrum-sharing/src/utils/randomize_order_by_user_id"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TaskMenu=t.getRRCTaskList=void 0,a=s.__importStar(a),p=s.__importStar(p);const m={buttonBorderWithLeftAlignment:{display:"flex",border:"1px solid #8C8279",borderBottom:"none"},fullWidthButton:{display:"flex",flexDirection:"column",marginBottom:"0px"}};t.getRRCTaskList=e=>[{id:"save_copy",title:e.formatMessage({id:"TOs55N",defaultMessage:"Save their own copy of this file"})},{id:"share_file",title:e.formatMessage({id:"siO/O2",defaultMessage:"Share with others to review"})},{id:"make_edits",title:e.formatMessage({id:"O9ZeeZ",defaultMessage:"Make edits to the file"})},{id:"leave_comment",title:e.formatMessage({id:"+UELQ9",defaultMessage:"Review and leave comments"})}];t.TaskMenu=({initialTasks:e,onSharingTasksUpdated:s,userId:h})=>{const g=(0,i.useIntl)(),_=p.useLogger(),f=a.useMemo(()=>(0,u.randomizeOrderByUserId)(h,(0,t.getRRCTaskList)(g)),[g,h]),[E,S]=a.useState(f.filter(t=>e.some(e=>e===t.id))),[b,v]=a.useState(!1),[M,T]=a.useState(!1),y=a.useRef(null),C=a.useRef(null),I=E.length===f.length,k={addAllTasksButton:g.formatMessage({id:"clJoNf",defaultMessage:"Add all"}),removeAllTasksButton:g.formatMessage({id:"vh8X59",defaultMessage:"Remove all"}),addTaskButton:g.formatMessage({id:"YEtX8l",defaultMessage:"Add a request"}),taskMenuLabel:g.formatMessage({id:"atQ7Z3",defaultMessage:"Ask them to:"})},A=a.useCallback(e=>{const t=E.includes(e),a=t?E.filter(t=>t!==e):E.concat(e);S(a),s(a.map(e=>e.id)),_("SHARE_MODAL_TASK_MENU__RRC_SENDER__TASK_MENU_ITEM_CLICK",{task:e.id,state:t?"OFF":"ON",position:f.indexOf(e)})},[S,s,E,_,f]),L=a.useCallback(()=>{I?(S([]),s([])):(S(f),s(f.map(e=>e.id))),_("SHARE_MODAL_TASK_MENU__RRC_SENDER__TOGGLE_ALL_CLICK",{state:I?"OFF":"ON"})},[S,s,f,I,_]),N=a.useCallback(e=>{_("SHARE_MODAL_TASK_MENU__RRC_SENDER__TASK_MENU_CLICK",{state:e.isOpen?"ON":"OFF",tasks:f.map(e=>e.id).join()}),T(e.isOpen)},[_]);return a.useEffect(()=>{const e=e=>{"Escape"!==e.key&&"Tab"!==e.key||!C.current||(e.stopPropagation(),C.current({autoFocus:!0,ref:y}))};return M&&document.addEventListener("keydown",e,!0),()=>{document.removeEventListener("keydown",e,!0)}},[M]),a.createElement("div",{style:m.fullWidthButton},a.createElement(n.Menu.Wrapper,{closeOnSelection:!1,onToggle:N,onSelection:A,isBlock:!0,matchContainingWidth:!0},({getTriggerProps:e,getContentProps:t,closeMenu:s})=>(C.current=s,a.createElement(a.Fragment,null,a.createElement(r.Button,Object.assign({},e(),{variant:"outline",ref:y,size:"large",fullWidth:!0,onFocus:()=>v(!0),onBlur:()=>v(!1),style:Object.assign(Object.assign({},m.buttonBorderWithLeftAlignment),{boxShadow:b?"var(--boxshadow__focusring)":"none"}),withIconLeft:a.createElement(o.UIIcon,{src:d.AddCircleLine,role:"presentation"})}),a.createElement(c.Text,null,a.createElement("u",null,k.addTaskButton)),a.createElement(c.Text,null," ("),a.createElement(c.Text,{color:"faint"},g.formatMessage({id:"OpRt+g",defaultMessage:"{numRequests, number} added"},{numRequests:E.length})),a.createElement(c.Text,null,")")),a.createElement(n.Menu.Content,Object.assign({},t(),{triggerRef:y,positioningStrategy:"fixed",auto:!0}),a.createElement(n.Menu.Segment,{withLabel:k.taskMenuLabel},f.map(e=>a.createElement(n.Menu.ActionItem,{key:e.id,value:e,role:"menuitemcheckbox","aria-checked":E.includes(e),withTitle:e.title,withLeftAccessory:a.createElement(l.Checkbox,{checked:E.includes(e),readOnly:!0,tabIndex:-1})}))),a.createElement(n.Menu.Segment,null,a.createElement(n.Menu.Row,null,a.createElement(r.Button,{variant:"transparent",onClick:L},I?k.removeAllTasksButton:k.addAllTasksButton))))))))},t.TaskMenu.displayName="TaskMenu"})),define("typescript/component_libraries/spectrum-sharing/src/utils/randomize_order_by_user_id",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.memoizedGetRandomizedOrderIndexesByUserId=t.randomizeOrderByUserId=t.buildPermutations=void 0;t.buildPermutations=e=>{const t=[],s=(e,a=[])=>{if(0===e.length)t.push(a);else for(let t=0;t<e.length;t++){let i=e.slice(),n=i.splice(t,1);s(i.slice(),a.concat(n))}};return s(e),t};const s=new WeakMap;t.randomizeOrderByUserId=(e,a)=>{const i=(e=>{const a=s.get(e);if(a)return a;{const a=(0,t.buildPermutations)(e);return s.set(e,a),a}})(a);return i[Math.floor(e/16)%i.length]};const a=new Map;t.memoizedGetRandomizedOrderIndexesByUserId=(e,s)=>{let i=a.get(e);i||(i=new WeakMap,a.set(e,i));const n=i.get(s);if(n)return n;{const a=((e,s)=>{const a=(0,t.randomizeOrderByUserId)(e,s),i=[];for(const e of a){const t=s.indexOf(e);i.push(t)}return i})(e,s);return i.set(s,a),a}}})),define("typescript/component_libraries/spectrum-sharing/src/utils/browser",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatUrl=void 0,t.formatUrl=function(e){const t=window.document.createElement("a");t.href=e;let s=t.protocol||window.location.protocol;":"===t.protocol&&(s=window.location.protocol);const a=t.hostname||window.location.hostname;let i=t.port||window.location.port;"443"===i&&"https:"===s&&(i="");let n=a;return i&&(n=n+":"+i),s+"//"+n+(0===t.pathname.indexOf("/")?t.pathname:`/${t.pathname}`)+t.search+t.hash}})),define("typescript/component_libraries/spectrum-sharing/src/utils/dsx/dsx",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.batch=t.action=t.proxy=t.store=void 0;class s{constructor(e,t,s){this.callbacks=[],this.children=[],this.parents=[],this.isActive=!1,this.cancelledCallbacks=new WeakMap,this.tracker=e,this.getter=t,this.setter=s,this.currentValue=this.getter(null),this.previousValue=this.currentValue,this.generation=this.tracker.generation,this.updateValue()}unregisterChild(e){this.children=this.children.filter(t=>t!==e),this.updateStatus()}registerChild(e){this.children=[...this.children,e],this.updateStatus()}updateStatus(){(this.children.length>0||this.callbacks.length>0)!==this.isActive&&(this.isActive?(this.isActive=!1,this.parents.forEach(e=>e.unregisterChild(this))):(this.isActive=!0,this.previousValue=this.currentValue,this.parents.forEach(e=>e.registerChild(this))))}obs(e){const t=(t,s)=>e(t,s);return this.callbacks=[...this.callbacks,t],this.updateStatus(),()=>{this.cancelledCallbacks.set(t,!0),this.callbacks=this.callbacks.filter(e=>e!==t),this.updateStatus()}}updateValue(){const e=this.parents;if(this.generation=this.tracker.generation,this.tracker.stack.push([]),this.currentValue=this.getter(this.currentValue),this.parents=this.tracker.stack.pop()||[],!this.isActive)return;this.currentValue!==this.previousValue&&(this.tracker.toUpdate=[...this.tracker.toUpdate,...this.children],this.tracker.toNotify=[...this.tracker.toNotify,this]);const t=this.parents,s=t.filter(t=>!e.find(e=>t===e)),a=e.filter(e=>!t.find(t=>e===t));s.forEach(e=>e.registerChild(this)),a.forEach(e=>e.unregisterChild(this))}get(){return(this.tracker.stack[this.tracker.stack.length-1]||[]).push(this),this.generation!==this.tracker.generation&&this.updateValue(),this.currentValue}notify(){if(this.currentValue===this.previousValue)return;const e=this.previousValue;this.previousValue=this.currentValue,this.callbacks.forEach(t=>{this.cancelledCallbacks.has(t)||t(this.currentValue,e)})}set(e){if(this.tracker.depth++,this.tracker.generation++,this.tracker.toUpdate.push(this),this.setter(e),this.tracker.depth--,0===this.tracker.depth){for(;this.tracker.toUpdate.length>0;){const e=this.tracker.toUpdate;this.tracker.toUpdate=[],e.forEach(e=>e.updateValue())}for(;this.tracker.toNotify.length>0;){const e=this.tracker.toNotify;this.tracker.toNotify=[],e.forEach(e=>e.notify())}}}}const a=new class{constructor(){this.stack=[],this.depth=0,this.generation=0,this.toNotify=[],this.toUpdate=[]}};t.store=e=>{let t=e;return new s(a,()=>t,e=>{t=e})};t.proxy=(e,t)=>new s(a,e,t||(()=>{}));t.action=e=>{const t=new s(a,()=>null,t=>e(...t));return(...e)=>t.set(e)};t.batch=e=>(0,t.action)(e)()})),define("typescript/component_libraries/spectrum-sharing/src/utils/dsx/dsx-react",["require","exports","tslib","react","typescript/component_libraries/spectrum-sharing/src/utils/dsx/dsx"],(function(e,t,s,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useInitStore=t.useProps=t.useStore=t.useNode=void 0,a=s.__importStar(a),i=s.__importStar(i);t.useNode=e=>{const[,t]=a.useState(()=>e.get());return a.useEffect(()=>e.obs(e=>t(e)),[e]),e.get()},t.useStore=t.useNode;t.useProps=e=>{const[t]=a.useState(()=>i.store(e));return t.set(e),t};t.useInitStore=(e,s)=>{const i=(0,t.useProps)(e);return a.useState(()=>s(i))[0]}})),define("typescript/component_libraries/spectrum-sharing/src/utils/initials",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCjkLocale=t.getUserInitials=t.getGroupInitials=void 0;function s(e){return-1!==["zh","ja","ko"].indexOf(e)}function a(e){const t=[],s=e.length;let a=0;for(;a<s;){const i=e[a];if(i>="\ud800"&&i<="\udb7f"){if(!(a<s-1))break;{const s=i+e[a+1];t.push(s),a+=2}}else t.push(i),a+=1}return t}t.getGroupInitials=e=>{const t=e.toUpperCase().split(" ").filter(e=>e);return`${t.length>0?t[0][0]:""}${t.length>1?t[t.length-1][0]:""}`},t.getUserInitials=function(e,t){if(!e)return"";const i=(e=e.toUpperCase()).trim().split(" "),n=a(i[0]),r=a(i[i.length-1]);if(i.length>=2)return s(t)?r[0]+n[0]:n[0]+r[0];const o=a(e);return s(t)&&!(function(e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>=128)return!1;return!0})(e)&&o.length>1?o[0]+o[1]:o[0]},t.isCjkLocale=s})),define("metaserver/static/js/onboarding_checklist/messages",["require","exports","react-intl"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TASK_SUBTITLES=t.TASK_TITLES=t.createAndShareFolderText=t.uploadAndShareFolderText=t.uploadAndShareFileText=t.shareExistingFileText=t.createNewFolderText=t.uploadFolderText=t.uploadFilesText=t.shareButtonTooltipButtonText=t.shareButtonTooltipBodyText=t.shareButtonTooltipTitleText=t.dismissButtonAriaLabel=t.dismissButtonText=t.checklistSubHeaderText=t.checklistHeaderTextWithoutAdminName=t.checklistHeaderText=t.checklistAriaLabel=void 0,t.checklistAriaLabel=(0,s.defineMessage)({id:"GuvAwd",defaultMessage:"Onboarding Checklist"}),t.checklistHeaderText=(0,s.defineMessage)({id:"UL+GfV",defaultMessage:"Your admin, {adminName}, created setup steps for you"}),t.checklistHeaderTextWithoutAdminName=(0,s.defineMessage)({id:"NeBVBs",defaultMessage:"Your admin created setup steps for you"}),t.checklistSubHeaderText=(0,s.defineMessage)({id:"n2P8oy",defaultMessage:"<greenText>{completedCount} of {taskCount}</greenText> {taskCount, plural, one{step} other{steps}} completed"}),t.dismissButtonText=(0,s.defineMessage)({id:"0/2eqq",defaultMessage:"Dismiss"}),t.dismissButtonAriaLabel=(0,s.defineMessage)({id:"dpNhc4",defaultMessage:"Dismiss the onboarding checklist"}),t.shareButtonTooltipTitleText=(0,s.defineMessage)({id:"H/2hfM",defaultMessage:"Add people or copy a link"}),t.shareButtonTooltipBodyText=(0,s.defineMessage)({id:"nM9paK",defaultMessage:"Give people edit or view-only access"}),t.shareButtonTooltipButtonText=(0,s.defineMessage)({id:"3tOwNW",defaultMessage:"Got it"}),t.uploadFilesText=(0,s.defineMessage)({id:"isURX7",defaultMessage:"Upload files"}),t.uploadFolderText=(0,s.defineMessage)({id:"FGZHMT",defaultMessage:"Upload folder"}),t.createNewFolderText=(0,s.defineMessage)({id:"HWfBEm",defaultMessage:"Create new folder"}),t.shareExistingFileText=(0,s.defineMessage)({id:"CbiT0d",defaultMessage:"Share an existing file"}),t.uploadAndShareFileText=(0,s.defineMessage)({id:"JZxVfT",defaultMessage:"Upload files and share"}),t.uploadAndShareFolderText=(0,s.defineMessage)({id:"C9VFL9",defaultMessage:"Upload folder and share"}),t.createAndShareFolderText=(0,s.defineMessage)({id:"GBolBb",defaultMessage:"Create new folder and share"}),t.TASK_TITLES={install_desktop_app:(0,s.defineMessage)({id:"DrK3SD",defaultMessage:"Install the desktop app"}),install_mobile_app:(0,s.defineMessage)({id:"+vs+gs",defaultMessage:"Install the mobile app"}),explore_app_center:(0,s.defineMessage)({id:"2w9DYC",defaultMessage:"Explore app integrations"}),upload_to_team_space:(0,s.defineMessage)({id:"J1YJrs",defaultMessage:"Add files to the team space"}),upload_to_member_folder:(0,s.defineMessage)({id:"UzHFKV",defaultMessage:"Add files to the member folder"}),enable_computer_backup:(0,s.defineMessage)({id:"zMjE6b",defaultMessage:"Turn on computer backup"}),import_from_third_party:(0,s.defineMessage)({id:"sqPqU4",defaultMessage:"Import files from other services"}),request_files:(0,s.defineMessage)({id:"6BMsLr",defaultMessage:"Request files"}),share_file:(0,s.defineMessage)({id:"0kzY9D",defaultMessage:"Share a file"}),send_transfer:(0,s.defineMessage)({id:"SzWIwc",defaultMessage:"Send a transfer"}),recover_files:(0,s.defineMessage)({id:"0Mr2vd",defaultMessage:"Learn about file recovery"}),create_strong_password:(0,s.defineMessage)({id:"jh7Prp",defaultMessage:"Create a strong password"}),add_multi_factor_auth:(0,s.defineMessage)({id:"JIVQzS",defaultMessage:"Enable two-step verification"})},t.TASK_SUBTITLES={install_desktop_app:(0,s.defineMessage)({id:"4ssrF/",defaultMessage:"Quickly upload and sync files to Dropbox, save hard drive space, and access files offline"}),install_mobile_app:(0,s.defineMessage)({id:"u2vk+D",defaultMessage:"Access files from any phone or tablet and make files available offline"}),explore_app_center:(0,s.defineMessage)({id:"PZ56HW",defaultMessage:"Find third-party apps to streamline workflows in the Dropbox App Center"}),upload_to_team_space:(0,s.defineMessage)({id:"JL6qKY",defaultMessage:"Upload files and folders to share and collaborate with team members"}),upload_to_member_folder:(0,s.defineMessage)({id:"4cTyUD",defaultMessage:"Upload work in progress files to your member folder"}),enable_computer_backup:(0,s.defineMessage)({id:"s0oEfl",defaultMessage:"Automatically back up important desktop folders to Dropbox"}),import_from_third_party:(0,s.defineMessage)({id:"dPQyNS",defaultMessage:"Migrate files from other web-based storage services like Google Drive"}),request_files:(0,s.defineMessage)({id:"ob/tua",defaultMessage:"Collect and receive files from anyone in a designated folder"}),share_file:(0,s.defineMessage)({id:"NSUkoE",defaultMessage:"Add people to a file or copy a link. Share with edit or view-only access."}),send_transfer:(0,s.defineMessage)({id:"aBY+Ex",defaultMessage:"Send a polished copy of multiple files and folders to a client using Transfer"}),recover_files:(0,s.defineMessage)({id:"U3/GMK",defaultMessage:"Find out how to recover a file or restore to a previous version on dropbox.com"}),create_strong_password:(0,s.defineMessage)({id:"F5jGXF",defaultMessage:"Create a unique, strong password to keep your Dropbox account safe"}),add_multi_factor_auth:(0,s.defineMessage)({id:"Pmcsn/",defaultMessage:"Add a six-digit security code to sign in for an extra layer of security"})}})),define("metaserver/static/js/onboarding_checklist/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MODAL_OPEN_DELAY=t.TOOLTIP_OPEN_DELAY=t.ITEM_LIMIT=t.TASK_ORDER=t.TASK_LINKS=void 0,t.TASK_LINKS={install_desktop_app:"/download",install_mobile_app:"/mobile?trigger=on",explore_app_center:"/apps",upload_to_team_space:"https://help.dropbox.com/teams-admins/team-member/team-folders#new",upload_to_member_folder:"https://help.dropbox.com/teams-admins/team-member/team-space-overview",enable_computer_backup:"https://help.dropbox.com/installs-integrations/sync-uploads/computer-backup",import_from_third_party:"https://help.dropbox.com/es-la/installs-integrations/sync-uploads/import-files",request_files:"/requests",share_file:"https://help.dropbox.com/files-folders/share",send_transfer:"/transfer",recover_files:"https://help.dropbox.com/guide/team/how-to-keep-dropbox-secure#recover-restore",create_strong_password:"/account/security",add_multi_factor_auth:"https://help.dropbox.com/teams-admins/team-member/enable-two-step-verification"},t.TASK_ORDER=["install_desktop_app","install_mobile_app","explore_app_center","upload_to_team_space","upload_to_member_folder","enable_computer_backup","import_from_third_party","request_files","share_file","send_transfer","recover_files","create_strong_password","add_multi_factor_auth"],t.ITEM_LIMIT=4,t.TOOLTIP_OPEN_DELAY=800,t.MODAL_OPEN_DELAY=800})),define("metaserver/static/js/business_space/browse/group_suggestion/group_suggestion_section",["require","exports","tslib","react","metaserver/static/js/groups/api","dig-components/buttons","metaserver/static/js/core/i18n","dig-components/chips","metaserver/static/js/contacts/contact","metaserver/static/js/contacts/types","metaserver/static/js/deprecated_ajax/ajax","dig-components/typography","metaserver/static/js/core/browser","metaserver/static/js/clean/ui/snackbar","metaserver/static/js/groups/utils","metaserver/static/js/business_space/browse/components/education_tag/education_tag","metaserver/static/js/contacts/data_v2","dig-components/progress_indicators","metaserver/static/js/core/exception","metaserver/static/js/pap/analytics_client","js/pap-events/organize_around_people/click_create_group_suggestion","js/pap-events/organize_around_people/shown_create_group_suggestion","js/pap-events/organize_around_people/shown_match_group_suggestion","js/pap-events/organize_around_people/click_match_group_suggestion","metaserver/static/js/business_space/browse/group_suggestion/group_suggestion_section.module.css"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u,m,h,g,_,f,E,S,b,v,M,T,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GroupSuggestionSection=void 0,a=s.__importStar(a),i=s.__importStar(i),c=s.__importDefault(c),h=s.__importDefault(h),y=s.__importDefault(y);const C=(e,t)=>e.length>1&&e.every(e=>!e.group_id&&(e.on_team||e.dbx_team_id&&e.dbx_team_id===t.team_dbtid)),I=()=>{const e=document.querySelector(".server-error");e&&(e.style.display="none")};t.GroupSuggestionSection=e=>{const t=t=>{const s=e.user.is_team_admin?"/team/admin/groups?role=work#/":"/team#groups/";return()=>{(0,u.open_tab)(s+t)}},[k,A]=(0,a.useState)(!1),[L,N]=(0,a.useState)([]),[w,O]=(0,a.useState)([]),[P,R]=(0,a.useState)(!1),[D,x]=(0,a.useState)(!1),F=e=>{const t=e.filter(e=>!!e.group_id);O(t)};(0,a.useEffect)(()=>{if(e.expBsxOrganizeAroundPeople){new _.ContactsDataSourceV2(e.user,void 0,!1).getAll(F)}},[e.user]),(0,a.useEffect)(()=>{if(N([]),x(!1),C(e.contacts,e.user)&&e.expBsxOrganizeAroundPeople){const t=[],a=w.filter(t=>t.group_size===e.contacts.length+1&&!!t.group_id).map(e=>{return a={group_id:e.group_id},s.__awaiter(void 0,void 0,void 0,(function*(){try{const s=yield i.get_group_info_promise(a);return j(s)&&(t.push(e),N(t),(0,S.logEvent)((0,M.PAP_Shown_MatchGroupSuggestion)())),s}catch(t){if(console.error(`Error on geting group info for group ${e.group_id}.`,t),I(),"Actor must be in the group"===t)return null;throw(0,E.reportException)({err:t,tags:["get_group_info_failed"],severity:"non-critical"}),t}}));var a}),n=e=>{B()&&!e.length&&(0,S.logEvent)((0,v.PAP_Shown_CreateGroupSuggestion)())};a.length?(R(!0),Promise.all(a).then(e=>{n(t)}).catch(e=>{x(!0)}).finally(()=>{R(!1),I()})):n(t)}},[e.contacts,w]);const j=t=>{const s=e.contacts.map(e=>e.email);s.push(e.user.email);const a=new Set(t.users.map(e=>e.email));return s.every(e=>a.has(e))},B=()=>{var t;return e.user.is_team_admin||"admins_and_members"===(null===(t=e.teamPolicy)||void 0===t?void 0:t.group_creation_policy)};return P?a.default.createElement(f.ProgressBar,{in:!0,isIndeterminate:!0}):a.default.createElement(a.default.Fragment,null,e.expBsxOrganizeAroundPeople&&C(e.contacts,e.user)&&0===L.length&&B()&&!D&&a.default.createElement("div",{className:y.default.sectionGroupSuggestion},a.default.createElement(n.Button,{variant:"opacity",onClick:()=>((s,a)=>{let i="";const n=a.map(e=>e.name.split(" ")[0]).concat(s.fname);for(let e=0;e<n.length;e++){const t=n[e];if(0===e)i+=t;else{if(!((i+", "+t).length<=h.default.MAX_GROUP_NAME_LEN-"...".length)){i+="...";break}i+=", "+t}}const o=a.map(e=>({email:e.email,is_owner:!1}));A(!0),m.Snackbar.sync(r.intl.formatMessage({id:"Ko1UZV",defaultMessage:"Creating group..."}),!1,"group-suggestion"),(0,S.logEvent)((0,b.PAP_Click_CreateGroupSuggestion)()),(0,d.WebRequest)({url:"/groups_ajax/make_new_group_with_users",data:{name:i,members:JSON.stringify([{name:s.display_name,email:s.email,is_owner:!0},...o]),is_admin_managed:!1},subject_user:s,success:(s,n)=>{const o=JSON.parse(n).data.id;e.updateGroupSelection(new l.Contact({type:c.default.NEW_STYLE_GROUP,name:i,group_id:o,group_size:a.length+1,members:i,on_team:!0})),m.Snackbar.complete(r.intl.formatMessage({id:"2o8/E+",defaultMessage:"Group created and saved."}),"group-suggestion",void 0,{actionButtonText:r.intl.formatMessage({id:"H3Nuk5",defaultMessage:"Manage group"}),onActionClick:t(o),closeButtonText:r.intl.formatMessage({id:"Js0Z4W",defaultMessage:"Close"})})},error:()=>{m.Snackbar.fail(r.intl.formatMessage({id:"Pn6eNL",defaultMessage:"Error creating group."}),"group-suggestion")},complete:()=>{A(!1)}})})(e.user,e.contacts),isLoading:k},r.intl.formatMessage({id:"tyM1vU",defaultMessage:"Save as group"})),a.default.createElement(g.EducationTag,null)),e.expBsxOrganizeAroundPeople&&L.length>0&&a.default.createElement(a.default.Fragment,null,L.map(t=>a.default.createElement(o.ChoiceChip,{onClick:()=>(t=>{(0,S.logEvent)((0,T.PAP_Click_MatchGroupSuggestion)()),e.updateGroupSelection(t)})(t)},t.name))),e.expBsxOrganizeAroundPeople&&e.contacts.some(e=>e.group_id)&&a.default.createElement("div",{className:y.default.sectionManageYourGroupsLink},a.default.createElement(p.Text,{size:"standard"},a.default.createElement(p.Link,{href:"#",onClick:()=>{e.user.is_team_admin?(0,u.open_tab)("/team/admin/groups?role=work"):(0,u.open_tab)("/team#groups")},hasNoUnderline:!0},r.intl.formatMessage({id:"EMZfdS",defaultMessage:"Manage your groups"})))))}})),define("metaserver/static/js/business_space/browse/group_suggestion/group_suggestion_section.module.css",["require","exports","css!metaserver/static/js/business_space/browse/group_suggestion/group_suggestion_section.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sectionManageYourGroupsLink=t.sectionGroupSuggestion=void 0,t.sectionGroupSuggestion="_section-group-suggestion_1rfvu_1",t.sectionManageYourGroupsLink="_section-manage-your-groups-link_1rfvu_7";t.default={sectionGroupSuggestion:"_section-group-suggestion_1rfvu_1",sectionManageYourGroupsLink:"_section-manage-your-groups-link_1rfvu_7"}})),define("metaserver/static/js/business_space/browse/components/education_tag/education_tag",["require","exports","tslib","react","dig-components/typography","metaserver/static/js/core/i18n","dig-components/buttons","dig-components/icons","dig-components/icons/src","dig-components/tooltips","metaserver/static/js/business_space/browse/components/education_tag/education_tag.module.css"],(function(e,t,s,a,i,n,r,o,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EducationTag=void 0,a=s.__importStar(a),d=s.__importDefault(d);t.EducationTag=()=>{const[e,t]=a.useState(!1),s=a.useRef(null);return a.createElement(i.Text,{variant:"paragraph",size:"small",color:"faint",className:d.default.sectionGroupEducationTag},n.intl.formatMessage({id:"kmebBo",defaultMessage:"What are groups?"}),a.createElement(r.IconButton,{id:"toggletip-button",size:"standard",variant:"transparent",ref:s,onClick:()=>t(!e)},a.createElement(o.UIIcon,{className:d.default.tagSectionTooltip,src:l.HelpLine,size:"standard","aria-label":"What are groups?"})),a.createElement(c.Tooltip.Control,{open:e,triggerRef:s,auto:!0,placement:"top-end"},a.createElement(i.Text,{tagName:"p",color:"standard",inverse:!0},n.intl.formatMessage({id:"gw/WIP",defaultMessage:"Groups allow you to quickly and easily share a folder or file to all group members. "}),a.createElement("a",{href:"https://help.dropbox.com/teams-admins/team-member/groups",target:"_blank",rel:"noopener"},n.intl.formatMessage({id:"6gh7Br",defaultMessage:"Learn More"})))))},t.EducationTag.displayName="EducationTag"})),define("metaserver/static/js/business_space/browse/components/education_tag/education_tag.module.css",["require","exports","css!metaserver/static/js/business_space/browse/components/education_tag/education_tag.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sectionGroupEducationTag=t.tagSectionTooltip=void 0,t.tagSectionTooltip="_tag-section-tooltip_mo40d_1",t.sectionGroupEducationTag="_section-group-education-tag_mo40d_6";t.default={tagSectionTooltip:"_tag-section-tooltip_mo40d_1",sectionGroupEducationTag:"_section-group-education-tag_mo40d_6"}})),define("js/pap-events/organize_around_people/click_create_group_suggestion",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PAP_Click_CreateGroupSuggestion=void 0,t.PAP_Click_CreateGroupSuggestion=function(e){return{class:"organize_around_people",action:"click",object:"create_group_suggestion",properties:e}}})),define("js/pap-events/organize_around_people/click_match_group_suggestion",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PAP_Click_MatchGroupSuggestion=void 0,t.PAP_Click_MatchGroupSuggestion=function(e){return{class:"organize_around_people",action:"click",object:"match_group_suggestion",properties:e}}})),define("js/pap-events/organize_around_people/shown_create_group_suggestion",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PAP_Shown_CreateGroupSuggestion=void 0,t.PAP_Shown_CreateGroupSuggestion=function(e){return{class:"organize_around_people",action:"shown",object:"create_group_suggestion",properties:e}}})),define("js/pap-events/organize_around_people/shown_match_group_suggestion",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PAP_Shown_MatchGroupSuggestion=void 0,t.PAP_Shown_MatchGroupSuggestion=function(e){return{class:"organize_around_people",action:"shown",object:"match_group_suggestion",properties:e}}})),define("metaserver/static/js/sync_everything/components/modals/backup_delete_device_folder_modal",["require","exports","tslib","react","metaserver/static/js/core/i18n","dig-components/modal","dig-components/buttons","metaserver/static/js/sync_everything/hive_logger","js/filepath/filepath","metaserver/static/js/sync_everything/utils/deep_link_utils","metaserver/static/js/sync_everything/strings","metaserver/static/js/sync_everything/types","metaserver/static/js/sync_everything/components/modals/unlink_device_modal","metaserver/static/js/pnm/utils"],(function(e,t,s,a,i,n,r,o,l,c,d,p,u,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackupDeleteDeviceFolderModal=void 0,a=s.__importDefault(a),o=s.__importStar(o),l=s.__importStar(l);t.BackupDeleteDeviceFolderModal=({fqPaths:e,backupInfo:t})=>{const s=t.name,h=(0,m.getDisplayedFilename)(l.filename(e[0])),g={primaryActionMsg:d.BACKUP_SETTINGS_BUTTON,secondaryActionMsg:d.CANCEL,altActionMsg:d.DELETE_MODAL_NO_ACCESS_BUTTON,headingMsg:(0,d.DELETE_CB_SYSTEM_FOLDER_MODAL_HEADING)(i.intl,h,s),subheadingMsg:(0,d.DELETE_CB_SYSTEM_FOLDER_MODAL_SUBHEADING)(i.intl,h,s)},[_,f]=a.default.useState(!1),[E,S]=a.default.useState(!0);a.default.useEffect(()=>{o.logEvent({event:"open_delete_device_folder_modal",page_source:"browse",extra:{device_id:t.deviceId}})},[]);const b=()=>{S(!1),o.logEvent({event:"close_delete_device_folder_modal",page_source:"browse",extra:{device_id:t.deviceId}})};return a.default.createElement(a.default.Fragment,null,a.default.createElement(n.Modal,{open:E,isCentered:!0,withCloseButton:"Close",onRequestClose:b},a.default.createElement(n.Modal.Header,{hasBottomSpacing:"title-standard"},a.default.createElement(n.Modal.Title,null,g.headingMsg)),a.default.createElement(n.Modal.Body,{hasVerticalSpacing:!1},g.subheadingMsg),a.default.createElement(n.Modal.Footer,null,a.default.createElement(r.Button,{"data-testid":"delete-modal-no-access-button",variant:"transparent",onClick:()=>{f(!0),b()}},i.intl.formatMessage(g.altActionMsg)),a.default.createElement(r.Button,{"data-testid":"delete-modal-cancel-action",variant:"opacity",onClick:b,autoFocus:!0},i.intl.formatMessage(g.secondaryActionMsg)),a.default.createElement(r.Button,{"data-testid":"delete-modal-delete-action",variant:"primary",onClick:()=>{const s={hostId:t.deviceId,action:p.BackupAppDeepLinkAction.CHANGE_DEVICE_FOLDERS,source:"backup_web",fqPaths:e};(0,c.launchBackupOnDesktop)(s),o.logEvent({event:"open_desktop_app",page_source:"backup",extra:{action:"change_device_folders"}}),b()}},i.intl.formatMessage(g.primaryActionMsg)))),_?a.default.createElement(u.UnlinkDeviceModal,{isOpen:_,close:()=>{f(!1)},deviceName:s}):void 0)},t.BackupDeleteDeviceFolderModal.displayName="BackupDeleteDeviceFolderModal"})),define("metaserver/static/js/sync_everything/strings",["require","exports","tslib","react","react-intl","metaserver/static/js/sync_everything/types","dig-components/truncate","dig-components/typography","metaserver/static/js/core/i18n"],(function(e,t,s,a,i,n,r,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EDB_RESTORE=t.PARTNERSHIP_BANNER_CONTENT_TEXT=t.PARTNERSHIP_BANNER_BUTTON_TEXT=t.PARTNERSHIP_BUTTON=t.PARTNERSHIP_DESCRIPTION=t.PARTNERSHIP_TITLE=t.FSS_UPGRADE_PRODUCT_PLAN=t.DELETE_OS_FOLDER=t.RESTORE_ACTION_BUTTON_TOOLTIP_WINDOWS_FROM_MAC=t.RESTORE_ACTION_BUTTON_TOOLTIP_MAC_FROM_WINDOWS=t.RESTORE_ACTION_BUTTON=t.COPY_TO_FSS=t.ACCOUNT_ROLE_WORK=t.ACCOUNT_ROLE_PERSONAL=t.ACCOUNT_NAME_WORK=t.ACCOUNT_NAME_PERSONAL=t.BACKUP_LANDING_PAGE_TITLE=t.PAIRED_REMINDER_BANNER=t.SKU_EXEMPT_BANNER=t.SKU_MODAL_SUBTITLE=t.SKU_MODAL_BACKUP_BUTTON=t.SKU_MODAL_DESCRIPTION=t.SKU_MODAL_EDB_CONTENT=t.SKU_MODAL_SUCCESS_SNACKBAR=t.SKU_MODAL_EDB_OK_BUTTON=t.SKU_MODAL_EDB_TITLE=t.SKU_MODAL_CLOSE_BUTTON=t.SKU_MODAL_CTA_BUTTON=t.SKU_MODAL_TITLE=t.STATUS_DISABLED_MESSAGE=t.STATUS_SYNCING_PAUSED_MESSAGE=t.STATUS_PAUSED_MESSAGE=t.STATUS_DUPLICATE_MESSAGE=t.STATUS_EDB_ERROR_MESSAGE=t.BACKUP_SETTINGS_BUTTON=t.BACKUP_DELETE_BUTTON=t.BACKUP_GOT_IT_BUTTON=t.BACKUP_STATUS_DELETED=t.BACKUP_STATUS_DISABLED=t.BACKUP_STATUS_SYNICING_PAUSED=t.BACKUP_STATUS_PAUSED=t.BACKUP_EDB_STATUS_ERROR=t.BACKUP_STATUS_DUPLICATE=t.BACKUP_STATUS_DONE=t.SAVE=t.CANCEL=t.SETTINGS=t.UNLINK_DEVICE_INSTRUCTIONS=t.UNLINK_DEVICE_HEADING=t.OVER_QUOTA_HEADER=t.OVER_QUOTA_DESCRIPTION=t.NEW_BADGE_TEXT=t.PLAN_COST_MONTHLY=t.COMPARE_PLANS=t.UPGRADE_PLAN_PLUS_LINK_SUBTITLE=t.UPGRADE_PLAN_PLUS_LINK_TITLE=t.GO_TO_BACKUP_ON_WEB=t.UPGRADE=t.LEARN_MORE=t.OPEN_BACKUP_SETTINGS=t.MANAGE_BACKUP_SKU=t.MANAGE_BACKUPS=t.RESTORED_FILES_INFO=t.UNLIMITED=t.WELCOME_MODAL_DISMISS_BUTTON=t.WELCOME_MODAL_CTA_BUTTON=t.WELCOME_MODAL_DESCRIPTION=t.WELCOME_MODAL_TITLE=t.DELETE_BUTTON_TOOLTIP_TEXT_DEVICE_IN_DELETION=t.SHARING_INFO_DISMISS_BUTTON=t.SHARING_INFO_LINK_CTA=t.SHARING_INFO_DESCRIPTION=t.SHARING_INFO_TITLE=t.EDB_FISSION_MIGRATION_BANNER_LINK_CTA=t.EDB_FISSION_MIGRATION_BANNER_DESCRIPTION=t.EDB_FISSION_MIGRATION_BANNER_TITLE=t.EDB_BANNER_DISMISS_BUTTON=t.EDB_BANNER_LINK_CTA=t.EDB_BANNER_DESCRIPTION=t.EDB_BANNER_TITLE=t.PURGE_ACTION_BUTTON=t.UNDELETE_ACTION_BUTTON=t.HIDE_DELETED_ACTION_BUTTON=t.SHOW_DELETED_ACTION_BUTTON=t.CREATE_EXTERNAL_DRIVE_BACKUP_ACTION_BUTTON=t.CREATE_COMPUTER_BACKUP_ACTION_BUTTON=t.CREATE_BACKUP_ACTION_BUTTON=t.DOWNLOAD_ACTION_BUTTON=t.REWIND_ACTION_BUTTON=t.PURGE_MODAL_PURGE_BUTTON=t.PURGE_SNACKBAR_FAILURE_TEXT=t.PURGE_SNACKBAR_PURGED_TEXT=t.PURGE_SNACKBAR_PURGING_TEXT=t.PURGE_MODAL_DESCRIPTION=t.PURGE_MODAL_HEADER=t.UNDELETE_SNACKBAR_FAILURE_TEXT=t.UNDELETE_SNACKBAR_UNDELETED_TEXT=t.UNDELETE_SNACKBAR_UNDELETING_TEXT=t.DELETE_SNACKBAR_CLOSE_BUTTON=t.DELETE_SNACKBAR_DELETED_TEXT=t.DELETE_SNACKBAR_DELETING_TEXT=t.RENAME_MODAL_NAME_DUPLICATE_NAME=t.RENAME_MODAL_NAME_ILLEGAL_CHARACTERS=t.RENAME_MODAL_INPUT_TITLE=t.COULD_NOT_RENAME=t.RENAME_TRY_AGAIN_SNACKBAR=t.RENAME_UNDO_SNACKBAR=t.RENAME_COMPLETE_SNACKBAR=t.RENAMING_STRING=t.RENAME_FILE_LABEL=t.RENAME_ACTION_BUTTON=t.DELETE_ACTION_BUTTON=t.DELETE_MODAL_NO_ACCESS_BUTTON=t.DELETE_MODAL_CONFIRM_BUTTON=t.DELETE_MODAL_CONTINUE_BUTTON=t.DELETE_MODAL_DELETE_BUTTON=t.DELETE_CB_MODAL_SUBHEADING_ANCHORS=t.DELETE_CB_SYSTEM_FOLDER_MODAL_SUBHEADING=t.DELETE_CB_SYSTEM_FOLDER_MODAL_HEADING=t.DELETE_CB_MODAL_SUBHEADING=t.DELETE_CB_MODAL_HEADING=t.DELETE_EDB_MODAL_DELETE_CONFLICTS_WARNING=t.DELETE_BACKUP_MODAL_SUBHEADING=t.DELETE_BACKUP_MODAL_HEADING=t.TRY_BACKUPS_BUTTON=t.OPEN_BACKUPS_BUTTON=t.EMPTY_STATE_NEW_TO_BACKUPS_DESCRIPTION=t.EMPTY_STATE_NEW_TO_BACKUPS_TITLE=t.EMPTY_STATE_DESCRIPTION=t.EMPTY_STATE_TITLE=t.DOWNLOAD_ERROR=t.COLUMN_HEADER_SIZE=t.COLUMN_HEADER_LAST_BACKUP=t.COLUMN_HEADER_STATUS=t.COLUMN_HEADER_NAME=t.PLAN_RENEWAL_SUBHEADING=t.POST_PURCHASE_SUBHEADING=t.POST_PURCHASE_HEADING=t.EMPTY_VALUE_PLACEHOLDER=void 0,a=s.__importDefault(a),t.EMPTY_VALUE_PLACEHOLDER="--",t.POST_PURCHASE_HEADING=(0,i.defineMessage)({id:"/axHHH",defaultMessage:"Thanks for choosing Dropbox Backup"}),t.POST_PURCHASE_SUBHEADING=(0,i.defineMessage)({id:"v8ghnD",defaultMessage:"Congrats! We could be biased, but we think you made a great choice."});t.PLAN_RENEWAL_SUBHEADING=(e,t)=>e.formatMessage({id:"u0ahYo",defaultMessage:"Your plan will renew on {date}."},{date:t}),t.COLUMN_HEADER_NAME=(0,i.defineMessage)({id:"r9Lq5z",defaultMessage:"Name"}),t.COLUMN_HEADER_STATUS=(0,i.defineMessage)({id:"fXnouE",defaultMessage:"Status"}),t.COLUMN_HEADER_LAST_BACKUP=(0,i.defineMessage)({id:"/F61vn",defaultMessage:"Last backup"}),t.COLUMN_HEADER_SIZE=(0,i.defineMessage)({id:"16vWIk",defaultMessage:"Size"});t.DOWNLOAD_ERROR=e=>e.formatMessage({id:"USRvlh",defaultMessage:"Couldn’t download this backup."}),t.EMPTY_STATE_TITLE=(0,i.defineMessage)({id:"h48hii",defaultMessage:"All your backups. One easy place."}),t.EMPTY_STATE_DESCRIPTION=(0,i.defineMessage)({id:"P11wzq",defaultMessage:"Keep your computer and external device backups safe and up-to-date with Dropbox Backup."}),t.EMPTY_STATE_NEW_TO_BACKUPS_TITLE=(0,i.defineMessage)({id:"bTDBC5",defaultMessage:"All your files. Automatically backed up."}),t.EMPTY_STATE_NEW_TO_BACKUPS_DESCRIPTION=(0,i.defineMessage)({id:"Eti3q3",defaultMessage:"Never lose track of your files or folders again. Or forget to pull them into Dropbox. Dropbox Backup does it automatically."}),t.OPEN_BACKUPS_BUTTON=(0,i.defineMessage)({id:"sD8QEe",defaultMessage:"Open Dropbox Backup"}),t.TRY_BACKUPS_BUTTON=(0,i.defineMessage)({id:"A4BE4d",defaultMessage:"Try Dropbox Backup"});t.DELETE_BACKUP_MODAL_HEADING=(e,t)=>e.formatMessage({id:"jHt6gr",defaultMessage:"Delete {deviceName}?"},{strong:e=>a.default.createElement("strong",{key:"strong"},e),deviceName:t});t.DELETE_BACKUP_MODAL_SUBHEADING=(e,t)=>e.formatMessage({id:"20RWjU",defaultMessage:"You’ll no longer be able to access <strong>{deviceName}</strong> from dropbox.com and any new changes to your files won’t be reflected."},{strong:e=>a.default.createElement("strong",{key:"strong"},e),deviceName:t}),t.DELETE_EDB_MODAL_DELETE_CONFLICTS_WARNING=l.intl.formatMessage({id:"YWsozm",defaultMessage:"Important note: Deleting this drive will also delete any restored files"});t.DELETE_CB_MODAL_HEADING=(e,t)=>e.formatMessage({id:"bbikmc",defaultMessage:"Delete {deviceName} backup?"},{strong:e=>a.default.createElement("strong",{key:"strong"},e),deviceName:t});t.DELETE_CB_MODAL_SUBHEADING=(e,t)=>e.formatMessage({id:"6/2L1f",defaultMessage:"If you are on <strong>{deviceName}</strong> right now, click continue to open desktop app and disable this backup. If you no longer have access to this computer, click I don’t have access."},{strong:e=>a.default.createElement("strong",{key:"strong"},e),deviceName:t});t.DELETE_CB_SYSTEM_FOLDER_MODAL_HEADING=(e,t,s)=>e.formatMessage({id:"c8xB0G",defaultMessage:"Delete {folderName} from your {deviceName} backup?"},{strong:e=>a.default.createElement("strong",{key:"strong"},e),folderName:t,deviceName:s});t.DELETE_CB_SYSTEM_FOLDER_MODAL_SUBHEADING=(e,t,s)=>e.formatMessage({id:"yEg0ez",defaultMessage:"If you are on <strong>{deviceName}</strong> right now, click <strong>Backup Settings</strong> to remove this <strong>{folderName}</strong>. If you no longer have access to this computer, click I don’t have access."},{strong:e=>a.default.createElement("strong",{key:"strong"},e),folderName:t,deviceName:s});t.DELETE_CB_MODAL_SUBHEADING_ANCHORS=(e,t)=>e.formatMessage({id:"eUuURe",defaultMessage:"<strong>{deviceName}</strong> backup will be deleted and removed from Dropbox Backup. This change might take a while to occur.{br}{br}Don’t worry—these files and folders will still live on your computer."},{strong:e=>a.default.createElement("strong",{key:"strong"},e),br:a.default.createElement("br",null),deviceName:t}),t.DELETE_MODAL_DELETE_BUTTON=(0,i.defineMessage)({id:"RcHv8N",defaultMessage:"Delete device"}),t.DELETE_MODAL_CONTINUE_BUTTON=(0,i.defineMessage)({id:"ltZlOf",defaultMessage:"Continue"}),t.DELETE_MODAL_CONFIRM_BUTTON=(0,i.defineMessage)({id:"lZGOUM",defaultMessage:"Confirm"}),t.DELETE_MODAL_NO_ACCESS_BUTTON=(0,i.defineMessage)({id:"vVFtPb",defaultMessage:"I don't have access"}),t.DELETE_ACTION_BUTTON=(0,i.defineMessage)({id:"cQIrNt",defaultMessage:"Delete"}),t.RENAME_ACTION_BUTTON=(0,i.defineMessage)({id:"VeTLmS",defaultMessage:"Rename"}),t.RENAME_FILE_LABEL=(0,i.defineMessage)({id:"44Ky+Q",defaultMessage:"Rename file"}),t.RENAMING_STRING=(0,i.defineMessage)({id:"gCgBnJ",defaultMessage:"Renaming..."});t.RENAME_COMPLETE_SNACKBAR=e=>e.formatMessage({id:"WjNQHn",defaultMessage:"Renaming complete"});t.RENAME_UNDO_SNACKBAR=e=>e.formatMessage({id:"2narMa",defaultMessage:"Undo"});t.RENAME_TRY_AGAIN_SNACKBAR=e=>e.formatMessage({id:"ZsQfs1",defaultMessage:"Try again"});t.COULD_NOT_RENAME=e=>e.formatMessage({id:"lm0WBf",defaultMessage:"Couldn’t rename device"});t.RENAME_MODAL_INPUT_TITLE=e=>e.formatMessage({id:"PmYXh1",defaultMessage:"Device name"});t.RENAME_MODAL_NAME_ILLEGAL_CHARACTERS=(e,t)=>e.formatMessage({id:"WQd5Cy",defaultMessage:"Can’t use {invalidChars}"},{invalidChars:t});t.RENAME_MODAL_NAME_DUPLICATE_NAME=e=>e.formatMessage({id:"2A1Y44",defaultMessage:"Name is already taken"});t.DELETE_SNACKBAR_DELETING_TEXT=(e,t)=>e.formatMessage({id:"ozXMws",defaultMessage:"Deleting <strong>{deviceName}</strong> backup from Dropbox..."},{strong:e=>a.default.createElement("strong",{key:"strong"},e),deviceName:t});t.DELETE_SNACKBAR_DELETED_TEXT=(e,t)=>e.formatMessage({id:"VLsXfv",defaultMessage:"Successfully deleted <strong>{deviceName}</strong> backup from Dropbox."},{strong:e=>a.default.createElement("strong",{key:"strong"},e),deviceName:t}),t.DELETE_SNACKBAR_CLOSE_BUTTON=(0,i.defineMessage)({id:"bnz4Ax",defaultMessage:"Close"});t.UNDELETE_SNACKBAR_UNDELETING_TEXT=(e,t)=>e.formatMessage({id:"KUtUJ6",defaultMessage:"Recovering <strong>{deviceName}</strong>..."},{strong:e=>a.default.createElement("strong",{key:"strong"},e),deviceName:t});t.UNDELETE_SNACKBAR_UNDELETED_TEXT=(e,t)=>e.formatMessage({id:"BjKW7L",defaultMessage:"Successfully recovered <strong>{deviceName}</strong>."},{strong:e=>a.default.createElement("strong",{key:"strong"},e),deviceName:t});t.UNDELETE_SNACKBAR_FAILURE_TEXT=(e,t)=>e.formatMessage({id:"X/goJx",defaultMessage:"Failed to recover <strong>{deviceName}</strong>."},{strong:e=>a.default.createElement("strong",{key:"strong"},e),deviceName:t});t.PURGE_MODAL_HEADER=(e,t)=>e.formatMessage({id:"33o6Xc",defaultMessage:"Permanently delete {backupName}?"},{backupName:t});t.PURGE_MODAL_DESCRIPTION=(e,t)=>e.formatMessage({id:"ENA6ZO",defaultMessage:"<strong>{backupName}</strong> will be gone forever. Permanently deleting this folder won’t free up space."},{strong:e=>a.default.createElement("strong",{key:"strong"},e),backupName:t});t.PURGE_SNACKBAR_PURGING_TEXT=(e,t)=>e.formatMessage({id:"cwio4S",defaultMessage:"Permanently deleting <strong>{deviceName}</strong>..."},{strong:e=>a.default.createElement("strong",{key:"strong"},e),deviceName:t});t.PURGE_SNACKBAR_PURGED_TEXT=(e,t)=>e.formatMessage({id:"YvvOVj",defaultMessage:"Permanently deleted <strong>{deviceName}</strong>."},{strong:e=>a.default.createElement("strong",{key:"strong"},e),deviceName:t});t.PURGE_SNACKBAR_FAILURE_TEXT=(e,t)=>e.formatMessage({id:"Z9DO9/",defaultMessage:"Failed to permanently delete all of <strong>{deviceName}</strong>."},{strong:e=>a.default.createElement("strong",{key:"strong"},e),deviceName:t}),t.PURGE_MODAL_PURGE_BUTTON=(0,i.defineMessage)({id:"JnLgln",defaultMessage:"Permanently delete"}),t.REWIND_ACTION_BUTTON=(0,i.defineMessage)({id:"Y5O26B",defaultMessage:"Rewind"}),t.DOWNLOAD_ACTION_BUTTON=(0,i.defineMessage)({id:"YPfZpS",defaultMessage:"Download"}),t.CREATE_BACKUP_ACTION_BUTTON=(0,i.defineMessage)({id:"UYaJ/y",defaultMessage:"Create Backup"}),t.CREATE_COMPUTER_BACKUP_ACTION_BUTTON=(0,i.defineMessage)({id:"HVZjh+",defaultMessage:"Back up this computer"}),t.CREATE_EXTERNAL_DRIVE_BACKUP_ACTION_BUTTON=(0,i.defineMessage)({id:"yMq1Cv",defaultMessage:"Back up external device"}),t.SHOW_DELETED_ACTION_BUTTON=(0,i.defineMessage)({id:"g+YKUY",defaultMessage:"Show deleted backups"}),t.HIDE_DELETED_ACTION_BUTTON=(0,i.defineMessage)({id:"UOsXri",defaultMessage:"Hide deleted backups"}),t.UNDELETE_ACTION_BUTTON=(0,i.defineMessage)({id:"URS1Jz",defaultMessage:"Recover backup"}),t.PURGE_ACTION_BUTTON=(0,i.defineMessage)({id:"IWUdTo",defaultMessage:"Permanently delete backup"}),t.EDB_BANNER_TITLE=(0,i.defineMessage)({id:"b032QI",defaultMessage:"Want to back up an external device?"}),t.EDB_BANNER_DESCRIPTION=(0,i.defineMessage)({id:"0ofYgk",defaultMessage:"Keep your data safe and up-to-date. Plug in your external device to get started."}),t.EDB_BANNER_LINK_CTA=(0,i.defineMessage)({id:"b69K8l",defaultMessage:"Learn more"}),t.EDB_BANNER_DISMISS_BUTTON=(0,i.defineMessage)({id:"ilS/rg",defaultMessage:"Maybe later"}),t.EDB_FISSION_MIGRATION_BANNER_TITLE=(0,i.defineMessage)({id:"zD0M9a",defaultMessage:"Hey there — Backup has new features to show you"}),t.EDB_FISSION_MIGRATION_BANNER_DESCRIPTION=(0,i.defineMessage)({id:"NBU0tR",defaultMessage:"While we update, things may move around and your actions could be limited. Everything will return to normal once the update completes."}),t.EDB_FISSION_MIGRATION_BANNER_LINK_CTA=(0,i.defineMessage)({id:"6+PFhv",defaultMessage:"Learn more"}),t.SHARING_INFO_TITLE=(0,i.defineMessage)({id:"fBiWa2",defaultMessage:"Sharing for backed up files is going away"}),t.SHARING_INFO_DESCRIPTION=(0,i.defineMessage)({id:"NbNWrV",defaultMessage:"To help prevent accidental sharing, we’ve removed the option to share files directly from backup. You can still share with others by dragging files into your dropbox.com folder."}),t.SHARING_INFO_LINK_CTA=(0,i.defineMessage)({id:"j93SFY",defaultMessage:"Learn more"}),t.SHARING_INFO_DISMISS_BUTTON=(0,i.defineMessage)({id:"on90i9",defaultMessage:"Close"});t.DELETE_BUTTON_TOOLTIP_TEXT_DEVICE_IN_DELETION=(e,t)=>e.formatMessage({id:"I7y30n",defaultMessage:"Available once <strong>{deviceName}</strong> deletes"},{strong:e=>a.default.createElement("strong",{key:"strong"},e),deviceName:t}),t.WELCOME_MODAL_TITLE=(0,i.defineMessage)({id:"b39Jt3",defaultMessage:"Welcome to Dropbox Backup"});t.WELCOME_MODAL_DESCRIPTION=e=>e.formatMessage({id:"peEOJ5",defaultMessage:"All your computer and external device backups in one easy place.{br}{br}Find Backup by clicking the app launcher on the top left."},{br:a.default.createElement("br",null)}),t.WELCOME_MODAL_CTA_BUTTON=(0,i.defineMessage)({id:"8LB/9R",defaultMessage:"Take a look"}),t.WELCOME_MODAL_DISMISS_BUTTON=(0,i.defineMessage)({id:"AkX+s/",defaultMessage:"Dismiss"}),t.UNLIMITED=(0,i.defineMessage)({id:"d20ZDw",defaultMessage:"Unlimited"}),t.RESTORED_FILES_INFO=(0,i.defineMessage)({id:"DpIrW3",defaultMessage:"Click drive to view restored files"}),t.MANAGE_BACKUPS=(0,i.defineMessage)({id:"FCetQn",defaultMessage:"Manage backups"}),t.MANAGE_BACKUP_SKU=(0,i.defineMessage)({id:"3sOQnB",defaultMessage:"Change devices on Backup plan"}),t.OPEN_BACKUP_SETTINGS=(0,i.defineMessage)({id:"/efVDe",defaultMessage:"Open Backup settings"}),t.LEARN_MORE=(0,i.defineMessage)({id:"GDk60d",defaultMessage:"Learn more"}),t.UPGRADE=(0,i.defineMessage)({id:"i39fOC",defaultMessage:"Upgrade"}),t.GO_TO_BACKUP_ON_WEB=(0,i.defineMessage)({id:"HJR9+D",defaultMessage:"Go to Backup on web"}),t.UPGRADE_PLAN_PLUS_LINK_TITLE=(0,i.defineMessage)({id:"wZKYuq",defaultMessage:"Plus"}),t.UPGRADE_PLAN_PLUS_LINK_SUBTITLE=(0,i.defineMessage)({id:"hp3IHt",defaultMessage:"2 TB backup storage space"}),t.COMPARE_PLANS=(0,i.defineMessage)({id:"I6PhCO",defaultMessage:"Compare plans"});t.PLAN_COST_MONTHLY=(e,t)=>e.formatMessage({id:"dpTsLd",defaultMessage:"{planCost}/mo"},{planCost:t}),t.NEW_BADGE_TEXT=(0,i.defineMessage)({id:"e/20lm",defaultMessage:"New"}),t.OVER_QUOTA_DESCRIPTION=(0,i.defineMessage)({id:"Tmvzwx",defaultMessage:"But have no fear - we’ve got you covered. Get more space by upgrading or reducing the number of folders backing up."});t.OVER_QUOTA_HEADER=(e,t)=>e.formatMessage({id:"bRvJ4O",defaultMessage:"You’ve used up your {quota} storage space"},{quota:t});t.UNLINK_DEVICE_HEADING=(e,t)=>e.formatMessage({id:"TgZnOO",defaultMessage:"Unlink {deviceName} to delete"},{strong:e=>a.default.createElement("strong",{key:"strong"},e),deviceName:t});t.UNLINK_DEVICE_INSTRUCTIONS=(e,t,s)=>e.formatMessage({id:"9oEFTS",defaultMessage:"To unlink {deviceName}, click <strong>Settings</strong> on dropbox.com, go to the <strong>security tab</strong>, and <a>sign out of the device</a>. "},{strong:e=>a.default.createElement("strong",{key:"strong"},e),a:e=>a.default.createElement("a",{href:"#",onClick:s},e),deviceName:t}),t.SETTINGS=(0,i.defineMessage)({id:"WJ/dxp",defaultMessage:"Settings"}),t.CANCEL=(0,i.defineMessage)({id:"BnHsH6",defaultMessage:"Cancel"}),t.SAVE=(0,i.defineMessage)({id:"WM7Izq",defaultMessage:"Save"}),t.BACKUP_STATUS_DONE=(0,i.defineMessage)({id:"9C5G7/",defaultMessage:"Done"}),t.BACKUP_STATUS_DUPLICATE=(0,i.defineMessage)({id:"YteofT",defaultMessage:"Duplicate"}),t.BACKUP_EDB_STATUS_ERROR=(0,i.defineMessage)({id:"N143wW",defaultMessage:"Error"}),t.BACKUP_STATUS_PAUSED=(0,i.defineMessage)({id:"XmaP5P",defaultMessage:"Paused"}),t.BACKUP_STATUS_SYNICING_PAUSED=(0,i.defineMessage)({id:"oRm0Do",defaultMessage:"Syncing paused"}),t.BACKUP_STATUS_DISABLED=(0,i.defineMessage)({id:"zV/ycz",defaultMessage:"Disabled"}),t.BACKUP_STATUS_DELETED=(0,i.defineMessage)({id:"wsvLPn",defaultMessage:"Deleted"}),t.BACKUP_GOT_IT_BUTTON=(0,i.defineMessage)({id:"NbjHCG",defaultMessage:"Got it"}),t.BACKUP_DELETE_BUTTON=(0,i.defineMessage)({id:"liz/7u",defaultMessage:"Delete"}),t.BACKUP_SETTINGS_BUTTON=(0,i.defineMessage)({id:"rXWARF",defaultMessage:"Backup settings"}),t.STATUS_EDB_ERROR_MESSAGE=(0,i.defineMessages)({title:{id:"z5rrVK",defaultMessage:"Can’t back up device"},body:{id:"imOZ7+",defaultMessage:"Plug in device again to restart the backup process."}}),t.STATUS_DUPLICATE_MESSAGE=(0,i.defineMessages)({title:{id:"McA0Iu",defaultMessage:"Duplicate backup"},body:{id:"WPZGHr",defaultMessage:"A current backup of this device already exists. Delete this one to free up space."}}),t.STATUS_PAUSED_MESSAGE=(0,i.defineMessages)({title:{id:"sbots+",defaultMessage:"Automatic backup is off"},body:{id:"BfJAsa",defaultMessage:"Turn on automatic backup from Backup settings to keep your files up-to-date."}}),t.STATUS_SYNCING_PAUSED_MESSAGE=(0,i.defineMessages)({title:{id:"xukukW",defaultMessage:"Files and folders aren’t backing up"},body:{id:"q1StaN",defaultMessage:"Resume Sync on your computer to keep your backups up-to-date."}}),t.STATUS_DISABLED_MESSAGE=(0,i.defineMessages)({title:{id:"rIosqJ",defaultMessage:"Backup disabled"},body:{id:"hq85So",defaultMessage:"Set up backup again on this device to reflect any new updates you’ve made."}}),t.SKU_MODAL_TITLE=(0,i.defineMessage)({id:"l72fJD",defaultMessage:"Your Dropbox Backup plan"}),t.SKU_MODAL_CTA_BUTTON=(0,i.defineMessage)({id:"d3+7yF",defaultMessage:"Save"}),t.SKU_MODAL_CLOSE_BUTTON=(0,i.defineMessage)({id:"zO0WzC",defaultMessage:"Close"}),t.SKU_MODAL_EDB_TITLE=(0,i.defineMessage)({id:"e5yBcY",defaultMessage:"Back up an external drive"}),t.SKU_MODAL_EDB_OK_BUTTON=(0,i.defineMessage)({id:"1ZBrv6",defaultMessage:"OK"});t.SKU_MODAL_SUCCESS_SNACKBAR=(e,t)=>1===t.length?e.formatMessage({id:"Mq1ZUL",defaultMessage:"Successfully gave {name} unlimited backup storage space."},{name:t[0]}):e.formatMessage({id:"43LoLs",defaultMessage:"Successfully gave {name1} and {name2} unlimited backup storage space."},{name1:t[0],name2:t[1]});t.SKU_MODAL_EDB_CONTENT=e=>e.formatMessage({id:"DL6BQ6",defaultMessage:"1. <install>Install the Dropbox app</install> on your computer{br}2. Plug in your external device and follow the prompt{br}3. Enjoy your new backup!{br}{br}If you don’t see the prompt, <supported>check that your device is supported</supported>."},{br:a.default.createElement("br",null),install:e=>a.default.createElement("a",{href:"/install",target:"_blank",rel:"noreferrer"},e),supported:e=>a.default.createElement("a",{href:"https://help.dropbox.com/installs-integrations/desktop/dropbox-backup-faq#supporteddrives",target:"_blank",rel:"noreferrer"},e)});t.SKU_MODAL_DESCRIPTION=(e,t)=>e.formatMessage({id:"LX+a1a",defaultMessage:"Select <strong>1 computer</strong> and <strong>1 external device</strong> to receive unlimited backup storage space. You can change these at any time. {storageInfo}"},{strong:e=>a.default.createElement("strong",null,e),storageInfo:t?e.formatMessage({id:"h9Pkx4",defaultMessage:"Your other backups will use your existing {storageSize} of storage space."},{storageSize:t}):""});t.SKU_MODAL_BACKUP_BUTTON=(e,t)=>t===n.BackupType.COMPUTER?e.formatMessage({id:"r6FTtB",defaultMessage:"Back up this computer"}):e.formatMessage({id:"Ixirdt",defaultMessage:"Back up external device"});t.SKU_MODAL_SUBTITLE=(e,t,s)=>s>0?t===n.BackupType.COMPUTER?e.formatMessage({id:"7pgNge",defaultMessage:"{count, plural, one {# computer} other {# computers}} backed up"},{count:s}):e.formatMessage({id:"TBl2GJ",defaultMessage:"{count, plural, one {# external device} other {# external devices}} backed up"},{count:s}):t===n.BackupType.COMPUTER?e.formatMessage({id:"mPVHsh",defaultMessage:"To back up a different computer, install Dropbox on that computer."}):e.formatMessage({id:"WCwE1v",defaultMessage:"Simply plug in your external device to get started."});t.SKU_EXEMPT_BANNER=(e,t)=>t===n.BackupType.COMPUTER?e.formatMessage({id:"EgCkvY",defaultMessage:"Hey there — a reminder that you still have unlimited backup storage space for <strong>1 computer</strong> available."},{strong:e=>a.default.createElement("strong",null,e)}):e.formatMessage({id:"lc1y3V",defaultMessage:"Hey there — a reminder that you still have unlimited backup storage space for <strong>1 external drive</strong> available."},{strong:e=>a.default.createElement("strong",null,e)});t.PAIRED_REMINDER_BANNER=(e,t,s)=>e.formatMessage({id:"U2r1uo",defaultMessage:"Don’t see the backup you’re looking for? Check your <a>{pairedAccountName} account</a>"},{a:e=>a.default.createElement("a",{href:t},e),pairedAccountName:s}),t.BACKUP_LANDING_PAGE_TITLE=(0,i.defineMessage)({id:"0oDtUT",defaultMessage:"Backups"});t.ACCOUNT_NAME_PERSONAL=e=>e.formatMessage({id:"X52eGg",defaultMessage:"Personal Backups"});t.ACCOUNT_NAME_WORK=(e,t)=>t?e.formatMessage({id:"AoQzjw",defaultMessage:"<truncate>{accountName}</truncate> Backups"},{accountName:t,truncate:e=>a.default.createElement(r.Truncate,null,e)}):e.formatMessage({id:"uHYnFH",defaultMessage:"Work Backups"});t.ACCOUNT_ROLE_PERSONAL=e=>e.formatMessage({id:"rwKpOf",defaultMessage:"Personal"});t.ACCOUNT_ROLE_WORK=e=>e.formatMessage({id:"UGrTDw",defaultMessage:"Work"}),t.COPY_TO_FSS={BUTTON:l.intl.formatMessage({id:"CCJHdr",defaultMessage:"Copy backup to..."}),SNACKBAR:(e,t,s)=>{const[i,n]="string"==typeof e?[e,1]:["",e],r={name:i,count:n,destination:t,strong:e=>a.default.createElement("strong",null,e),a:e=>a.default.createElement(o.Link,{href:s,variant:"monochromatic"},e)};return{PROGRESS:l.intl.formatMessage({id:"yq0qND",defaultMessage:"Adding a copy of <strong>{count, plural, one{{name}} other{{count} items}}</strong> to <strong>{destination}</strong>..."},r),SUCCESS:l.intl.formatMessage({id:"Vr11Bd",defaultMessage:"Successfully added a copy of <strong>{count, plural, one{{name}} other{{count} items}}</strong> to <strong><a>{destination}</a></strong>."},r),FAIL:l.intl.formatMessage({id:"uGUIMk",defaultMessage:"Couldn’t add a copy of <strong>{count, plural, one{{name}} other{{count} items}}</strong> to <strong>{destination}</strong>."},r),FAIL_QUOTA:l.intl.formatMessage({id:"uWO/zZ",defaultMessage:"Couldn’t add a copy of <strong>{count, plural, one{{name}} other{{count} items}}</strong> because <strong>Dropbox storage space is full</strong>."},r)}}},t.RESTORE_ACTION_BUTTON=(0,i.defineMessage)({id:"YSu9+9",defaultMessage:"Restore"}),t.RESTORE_ACTION_BUTTON_TOOLTIP_MAC_FROM_WINDOWS=(0,i.defineMessage)({id:"EM3BH5",defaultMessage:"We cannot restore a Mac backup to a Windows computer."}),t.RESTORE_ACTION_BUTTON_TOOLTIP_WINDOWS_FROM_MAC=(0,i.defineMessage)({id:"mzAmap",defaultMessage:"We cannot restore a Windows backup to a Mac computer."}),t.DELETE_OS_FOLDER=(0,i.defineMessage)({id:"C6v9kG",defaultMessage:"Delete"}),t.FSS_UPGRADE_PRODUCT_PLAN={FSS_OVER_QUOTA_HEADER:(0,i.defineMessage)({id:"V3nrNg",defaultMessage:"This won’t fit within your existing storage space"}),UPGRADE_TO_PLUS_BUTTON:(0,i.defineMessage)({id:"V1ABNM",defaultMessage:"Upgrade to Plus"}),UPGRADE_TO_PROFESSIONAL_BUTTON:(0,i.defineMessage)({id:"q79Hnw",defaultMessage:"Upgrade to Professional"}),NO_THANKS_BUTTON:(0,i.defineMessage)({id:"1hXJ4t",defaultMessage:"No, thanks"}),FSS_OVER_QUOTA_DESCRIPTION:(e,t,s,i)=>{const[n,r]="string"==typeof t?[t,1]:["",t],o={name:n,count:r,destination:s,strong:e=>a.default.createElement("strong",null,e),showBackup:i?"yes":"no"};return{BASIC:e.formatMessage({id:"hc3JP/",defaultMessage:"To add a copy of <strong>{count, plural, one{{name}} other{{count} items}}</strong> {showBackup, select, yes{backup } other{}}to <strong>{destination}</strong>, upgrade to a Plus plan and get 2TB (2,000 GB) of storage space."},o),PlUS:e.formatMessage({id:"dYUWnK",defaultMessage:"To add a copy of <strong>{count, plural, one{{name}} other{{count} items}}</strong> {showBackup, select, yes{backup } other{}}to <strong>{destination}</strong>, upgrade to a Professional plan and get 3TB (3,000 GB) of storage space."},o),STANDARD:e.formatMessage({id:"51uT3b",defaultMessage:"To add a copy of <strong>{count, plural, one{{name}} other{{count} items}}</strong> {showBackup, select, yes{backup } other{}}to <strong>{destination}</strong>, ask your admin to upgrade your team to an Advanced plan and get as much storage space as you need."},o),DEFAULT:e.formatMessage({id:"sXgZwA",defaultMessage:"To add a copy of <strong>{count, plural, one{{name}} other{{count} items}}</strong> {showBackup, select, yes{backup } other{}}to <strong>{destination}</strong>, upgrade your plan to get as much storage space as you need."},o)}}},t.PARTNERSHIP_TITLE=(0,i.defineMessage)({id:"kRR2P9",defaultMessage:"Store more with an external device"}),t.PARTNERSHIP_DESCRIPTION=(0,i.defineMessage)({id:"QyMQfu",defaultMessage:"External devices are a great way to back up files, photos, videos—anything you find yourself creating."}),t.PARTNERSHIP_BUTTON=(0,i.defineMessage)({id:"s1j8ZY",defaultMessage:"Learn how"}),t.PARTNERSHIP_BANNER_BUTTON_TEXT=(0,i.defineMessage)({id:"YdtrAY",defaultMessage:"Find out how"}),t.PARTNERSHIP_BANNER_CONTENT_TEXT=(0,i.defineMessage)({id:"rc6eXI",defaultMessage:"Need more backup storage space?"}),t.EDB_RESTORE={MODAL:e=>{const[t,s]="string"==typeof e?[e,1]:["",e];return{TITLE:l.intl.formatMessage({id:"wrA++z",defaultMessage:"Where do you want to save {count, plural, one{{name}} other{{count} items}}?"},{name:t,count:s}),DOWNLOAD_OPTION:l.intl.formatMessage({id:"zTDvdQ",defaultMessage:"Download to this computer"}),COPY_OPTION:l.intl.formatMessage({id:"RxitBm",defaultMessage:"Save to my Dropbox"}),DOWNLOAD_BUTTON:l.intl.formatMessage({id:"eIiJcO",defaultMessage:"Download"}),COPY_BUTTON:l.intl.formatMessage({id:"a45Pwy",defaultMessage:"Continue"}),CANCEL_BUTTON:l.intl.formatMessage({id:"WfHswu",defaultMessage:"Cancel"})}},DOWNLOAD_SNACKBAR:e=>{const[t,s]="string"==typeof e?[e,1]:["",e],i={name:t,count:s,strong:e=>a.default.createElement("strong",null,e)};return{PROGRESS:l.intl.formatMessage({id:"WYnC+/",defaultMessage:"Downloading <strong>{count, plural, one{{name}} other{{count} items}}</strong> to this computer..."},i),SUCCESS:l.intl.formatMessage({id:"0XnP76",defaultMessage:"Successfully downloaded <strong>{count, plural, one{{name}} other{{count} items}}</strong> to this computer."},i),FAIL:l.intl.formatMessage({id:"/Yujqt",defaultMessage:"Couldn’t download <strong>{count, plural, one{{name}} other{{count} items}}</strong> to this computer."},i),PARTIAL_FAIL:l.intl.formatMessage({id:"wue2mo",defaultMessage:"Couldn’t download some items to this computer."},i)}},COPY_SNACKBAR:(e,t,s)=>{const[i,n]="string"==typeof e?[e,1]:["",e],r={name:i,count:n,destination:t,strong:e=>a.default.createElement("strong",null,e),a:e=>a.default.createElement(o.Link,{href:s,variant:"monochromatic"},e)};return{PROGRESS:l.intl.formatMessage({id:"iz+GLk",defaultMessage:"Saving <strong>{count, plural, one{{name}} other{{count} items}}</strong> to <strong>{destination}</strong>..."},r),SUCCESS:l.intl.formatMessage({id:"ku0d4J",defaultMessage:"Successfully saved <strong>{count, plural, one{{name}} other{{count} items}}</strong> to <strong><a>{destination}</a></strong>."},r),FAIL:l.intl.formatMessage({id:"k27py5",defaultMessage:"Couldn’t save <strong>{count, plural, one{{name}} other{{count} items}}</strong> to <strong>{destination}</strong>."},r),PARTIAL_FAIL:l.intl.formatMessage({id:"LqFRC2",defaultMessage:"Couldn’t save some items to <strong>{destination}</strong>."},r)}}}})),define("metaserver/static/js/sync_everything/utils/deep_link_utils",["require","exports","tslib","metaserver/static/js/sync_everything/constants","metaserver/static/js/core/custom_protocol","metaserver/static/js/integrations/url","metaserver/static/js/admin/ui/teams/onboarding/web/util/errors"],(function(e,t,s,a,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBackupAppDeepLink=t.launchBackupRestorationOnDesktop=t.launchBackupOnDesktop=void 0;t.launchBackupOnDesktop=e=>s.__awaiter(void 0,void 0,void 0,(function*(){const s=(0,t.getBackupAppDeepLink)(e);try{yield l(s)}catch(t){const s=o(e);(0,n.openDropboxUrl)(s)}}));t.launchBackupRestorationOnDesktop=(e,t)=>s.__awaiter(void 0,void 0,void 0,(function*(){const s=[`backup_id=${e}`,t&&`source=${t}`].filter(e=>void 0!==e).join("&"),i=`${a.CLIENT_DEEP_LINK_BACKUP_RESTORATION}?${s}`;try{yield l(i)}catch(e){(0,n.openDropboxUrl)(a.INSTALL_PAGE_RELATIVE_PATH)}}));const o=e=>{if(!e)return a.INSTALL_PAGE_RELATIVE_PATH;const{oqa:t}=e,s=[t&&`oqa=${t}`].filter(e=>void 0!==e).join("&");return s.length?`${a.INSTALL_PAGE_RELATIVE_PATH}?${s}`:a.INSTALL_PAGE_RELATIVE_PATH};t.getBackupAppDeepLink=e=>{if(!e)return a.CLIENT_DEEP_LINK_BACKUP_APP;const{accountId:t,source:s,hostId:i,action:n,driveUuid:r,fqPaths:o,oqa:l}=e,c=[t&&`account_id=${t}`,i&&`host_id=${i}`,r&&`drive_uuid=${r}`,n&&`action=${n}`,s&&`web_source=${s}`,o&&`fq_paths=${encodeURIComponent(JSON.stringify(o))}`,l&&`oqa=${l}`].filter(e=>void 0!==e).join("&");return`${a.CLIENT_DEEP_LINK_BACKUP_APP}?${c}`};const l=e=>(0,i.launchUri)(e).catch(()=>Promise.reject(new r.LaunchUriError("launchUri failed")))})),define("metaserver/static/js/integrations/url",["require","exports","metaserver/static/js/core/uri","metaserver/static/js/core/browser"],(function(e,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openExternalUrl=t.openDropboxUrl=void 0;t.openDropboxUrl=e=>{const t=s.URI.parse(e);(0,a.open_tab)(new s.URI({path:t.getPath(),query:t.getQuery(),fragment:t.getFragment()}))};t.openExternalUrl=e=>{const t=s.URI.parse(e);if("https"!==t.getScheme())throw new Error("URL must be https");const i=t.getAuthority(),n="slack.com"===i||i.match(/\.slack\.com$/),r="zoom.us"===i||i.match(/\.zoom\.us$/),o="trello.com"===i||i.match(/\.trello\.com$/);if(!n&&!r&&!o)throw new Error("URL must be to Slack/Zoom/Trello");(0,a.unsafe_open_tab)(t)}})),define("metaserver/static/js/admin/ui/teams/onboarding/web/util/errors",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ensureError=t.LaunchUriError=t.ArgumentError=void 0;class s extends Error{constructor(e){super(e),this.name="ArgumentError"}}t.ArgumentError=s;class a extends Error{constructor(e){super(e),this.name="LaunchUriError"}}t.LaunchUriError=a,t.ensureError=function(e){return e instanceof Error?e:new Error(String(e))}}));
//# sourceMappingURL=pkg-sharing.min.js-vflswoDwM.map