define("metaserver/static/js/account_page/widgets/account_preferences/subviews/account_toggle_block.module.css",["require","exports","css!metaserver/static/js/account_page/widgets/account_preferences/subviews/account_toggle_block.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.accountToggleBlockResponsive=t.accountToggleBlock=t.accountButtonBlockResponsive=t.accountButtonBlock=void 0,t.accountButtonBlock="_account-button-block_gn6yy_1",t.accountButtonBlockResponsive="_account-button-block--responsive_gn6yy_5",t.accountToggleBlock="_account-toggle-block_gn6yy_9",t.accountToggleBlockResponsive="_account-toggle-block--responsive_gn6yy_13";t.default={accountButtonBlock:"_account-button-block_gn6yy_1",accountButtonBlockResponsive:"_account-button-block--responsive_gn6yy_5",accountToggleBlock:"_account-toggle-block_gn6yy_9",accountToggleBlockResponsive:"_account-toggle-block--responsive_gn6yy_13"}})),define("metaserver/static/js/account_page/widgets/account_preferences/utils",["require","exports","tslib","react","metaserver/static/js/account_page/widgets/account_preferences/api"],(function(e,t,a,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useAccountPreferencesData=void 0;t.useAccountPreferencesData=function(e,t){const[r,o]=(0,s.useState)(null==e?void 0:e.preferences),[l,i]=(0,s.useState)(!e||"ready"===(null==e?void 0:e.loadingState)),[c,d]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{(()=>{a.__awaiter(this,void 0,void 0,(function*(){if(!l&&t){d(!0);const e=yield(0,n.getBundledUserRelatedPreferences)(t.id);o(e),i(!0)}d(!1)}))})()},[l,t]),c?null:r}})),define("metaserver/static/js/account_page/widgets/plusplus/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VaultSetupState=void 0,(function(e){e[e.NO_VAULT=0]="NO_VAULT",e[e.NO_PIN=1]="NO_PIN",e[e.COMPLETE=2]="COMPLETE"})(t.VaultSetupState||(t.VaultSetupState={}))})),define("metaserver/static/js/account_page/widgets/profile/api",["require","exports","tslib","metaserver/static/js/api_v2/user_client","metaserver/static/js/deprecated_ajax/ajax_as_promised_jquery"],(function(e,t,a,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makePrimary=t.removeAlias=t.sendVerifyEmail=t.addPendingAlias=t.changeName=t.deletePicture=t.cancelPendingEmailChange=void 0,t.cancelPendingEmailChange=function(e){return(0,n.WebRequest)({url:"/cancelpendingemailchange",subject_user:e})},t.deletePicture=function(e){return(0,n.WebRequest)({url:"/account/delete_account_photo"})},t.changeName=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function*(){return(new s.UserApiV2Client).ns("account").rpc("change_name",{first_name:t,last_name:n},{subjectUserId:e})}))},t.addPendingAlias=function(e,t){return a.__awaiter(this,void 0,void 0,(function*(){return(new s.UserApiV2Client).ns("aliases").rpc("add",{alias_email:t},{subjectUserId:e})}))},t.sendVerifyEmail=function(e,t){return a.__awaiter(this,void 0,void 0,(function*(){return(new s.UserApiV2Client).ns("aliases").rpc("send_verify_email",{alias_email:t},{subjectUserId:e})}))},t.removeAlias=function(e,t){return a.__awaiter(this,void 0,void 0,(function*(){return(new s.UserApiV2Client).ns("aliases").rpc("remove",{alias_email:t},{subjectUserId:e})}))},t.makePrimary=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function*(){return(new s.UserApiV2Client).ns("aliases").rpc("swap_with_primary",{alias_email:t,password:n},{subjectUserId:e})}))}})),define("metaserver/static/js/account_page/widgets/profile/profile_view",["require","exports","tslib","react","styled-components","metaserver/static/js/core/i18n","dig-components/typography","metaserver/static/js/account_page/widgets/profile/subviews/photo_settings","metaserver/static/js/account_page/widgets/profile/subviews/name_settings","metaserver/static/js/account_page/widgets/profile/subviews/email_settings","metaserver/static/js/account_page/widgets/profile/subviews/secondary_emails/secondary_emails","metaserver/static/js/account_page/widgets/profile/subviews/linked_account","metaserver/static/js/account_page/widgets/profile/subviews/linked_user_settings/linked_user_settings","metaserver/static/js/linked_users/linked_users_utils"],(function(e,t,a,s,n,r,o,l,i,c,d,u,m,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Profile=void 0,s=a.__importStar(s);const _=(n=a.__importDefault(n)).default.div`
  .make-primary-modal {
    .secondary-email {
      font-weight: var(--type__body__small--fontweight_strong);
    }

    .make-primary-description {
      margin-bottom: var(--spacing__unit--2);
    }

    .password-input-label {
      display: block;
      font-size: var(--type__body__small--fontsize);
      color: var(--color__faint__text);
    }

    .password-input {
      width: 100%;
      height: var(--spacing__unit--5);
    }
  }

  .basics-link-accounts {
    height: 150px;
  }
`;t.Profile=e=>{const{user:t,viewer:a,profileExtras:n}=e,[g,p]=(0,s.useState)(t);if(!n)return null;const E={user:g,viewer:a,pairingInfo:null==n?void 0:n.pairing_info};return s.default.createElement(_,{className:"account-page-block account-page-block--general"},s.default.createElement("div",{className:"account-page-header"},s.default.createElement(o.Title,{size:"small",isBold:!0},r.intl.formatMessage({id:"X86+76",defaultMessage:"Basics"}))),s.default.createElement(l.PhotoSettings,{user:g}),s.default.createElement(i.NameSettings,{user:g}),s.default.createElement(c.EmailSettings,{user:g,profileExtras:n}),n.show_aliases&&s.default.createElement(d.SecondaryEmails,{user:g,profileExtras:n,updateUser:function(e){p(Object.assign({},e))}}),(0,f.isMultipleLinkedUsersEnabled)(a)?s.default.createElement(m.LinkedUserSettings,{user:g,viewer:a}):s.default.createElement(u.LinkedAccounts,Object.assign({},E)))}})),define("metaserver/static/js/account_page/widgets/profile/subviews/email_settings",["require","exports","tslib","react","styled-components","metaserver/static/js/core/i18n","metaserver/static/js/account_page/components/key_value_block","metaserver/static/js/account_page/components/info_tooltip","metaserver/static/js/clean/analytics","metaserver/static/js/account/email_verify_reasons","metaserver/static/js/account_page/widgets/profile/api","metaserver/static/js/core/notify","dig-components/buttons","metaserver/static/js/account/email"],(function(e,t,a,s,n,r,o,l,i,c,d,u,m,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmailSettings=void 0,s=a.__importStar(s);const _=(n=a.__importDefault(n)).default.div`
  background-color: var(--color__black--5);
  border: 1px solid var(--color__standard__border);
  height: 56px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 var(--spacing__unit--2);
  margin-bottom: var(--spacing__unit--3);
`,g=n.default.span`
  flex-grow: 1;
`,p=n.default.div`
  margin-right: var(--spacing__unit--2);
`,E=n.default.span`
  margin-right: var(--spacing__unit--2);
`,v=r.intl.formatMessage({id:"DuB9XU",defaultMessage:"Verify email"});t.EmailSettings=t=>{const{user:n,profileExtras:M,skipDisplayingPrimaryEmailRow:y,skipDisplayingPendingEmailRow:b,inlinePrimaryEmailDisplay:h}=t,[w,S]=(0,s.useState)(n.email),[T,C]=(0,s.useState)(n.is_email_verified),[A,R]=(0,s.useState)(M.unverified_email),[N,I]=(0,s.useState)();let x,O;(0,s.useEffect)(()=>{I(M.unverified_email===w)}),(0,s.useEffect)(()=>{S(n.email)},[n]);let k=void 0;const j=()=>{new Promise((t,a)=>{e(["metaserver/static/js/account/email"],t,a)}).then(a.__importStar).then(({ChangeEmail:e})=>{e.show(n,c.EmailVerificationReasons.CHANGE_EMAIL)}),i.UserActivityLogger.log("web","de_account_general_basics_email_edit_clicked")},D=()=>{new Promise((t,a)=>{e(["metaserver/static/js/account/email"],t,a)}).then(a.__importStar).then(({EmailVerification:e})=>{const t=e.get_for_user(n);t.show_verify_modal(void 0,c.EmailVerificationReasons.GENERIC),t.ensure_polling(()=>{C(!0)})}),i.UserActivityLogger.log("web","de_account_general_basics_email_verify_clicked")},L=()=>a.__awaiter(void 0,void 0,void 0,(function*(){try{yield(0,d.cancelPendingEmailChange)(n.id),R(null),M.unverified_email=null,u.Notify.success(r.intl.formatMessage({id:"IyrnIK",defaultMessage:"Canceled pending email change."}))}catch(e){u.Notify.success(r.intl.formatMessage({id:"iJC8UM",defaultMessage:"There was an error completing this request."}))}i.UserActivityLogger.log("web","de_account_general_basics_email_verify_cancel_clicked")}));return(0,s.useEffect)(()=>{const e=({email:e,requiresVerification:t})=>{t?(M.unverified_email=e,R(e)):S(e)};return f.ChangeEmail.add_listener(n,e),()=>{f.ChangeEmail.remove_listener(n,e)}},[]),T?M.change_email_disallowed?x=s.default.createElement(l.InfoTooltip,{content:r.intl.formatMessage({id:"Era/F2",defaultMessage:"Contact your team admin to change email"}),position:l.TooltipPlacement.BOTTOM}):(x=r.intl.formatMessage({id:"LtW5wA",defaultMessage:"Edit"}),k=j,O=r.intl.formatMessage({id:"MxDP2f",defaultMessage:"Edit email"})):(x=v,k=D,O=v),s.default.createElement(s.default.Fragment,null,!y&&s.default.createElement(o.KeyValueBlock,{inlineMode:h,className:"preference-email-row",keyText:"personal"===n.role?r.intl.formatMessage({id:"YBBz8t",defaultMessage:"Personal email"}):r.intl.formatMessage({id:"cLyhPz",defaultMessage:"Work email"}),linkText:x,ariaPrimaryButtonLabel:O,valueText:w,onLinkClick:k}),A&&!b&&s.default.createElement(_,{className:"pending-email"},s.default.createElement(g,{className:"pending-email__email"},N?r.intl.formatMessage({id:"J6pSA8",defaultMessage:"Pending email reverification"}):r.intl.formatMessage({id:"B0BOfb",defaultMessage:"Pending email change"})),s.default.createElement(E,{className:"pending-email__email"},A),s.default.createElement(p,null,s.default.createElement(m.Button,{className:"pending-email__verify",onClick:()=>{new Promise((t,a)=>{e(["metaserver/static/js/account/email"],t,a)}).then(a.__importStar).then(({EmailVerification:e})=>{const t=e.get_for_user(n);t.set_email_to_verify(M.unverified_email);let s=c.EmailVerificationReasons.CHANGE_EMAIL;N&&(s=c.EmailVerificationReasons.SUSPICIOUS_ALPACA_REVERIFICATION),t.show(()=>a.__awaiter(void 0,void 0,void 0,(function*(){yield L()})),s)}),i.UserActivityLogger.log("web","de_account_general_basics_email_verify_pending_clicked")},variant:"transparent"},v)),s.default.createElement(m.Button,{onClick:L,variant:"transparent"},r.intl.formatMessage({id:"k/iogD",defaultMessage:"Cancel"}))))}})),define("metaserver/static/js/account_page/widgets/profile/subviews/linked_account",["require","exports","tslib","react","dig-components/buttons","dig-components/modal","dig-components/typography","metaserver/static/js/account_page/components/button_block","metaserver/static/js/clean/analytics","metaserver/static/js/clean/form","metaserver/static/js/core/browser","metaserver/static/js/core/i18n"],(function(e,t,a,s,n,r,o,l,i,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedAccounts=void 0,s=a.__importStar(s),c=a.__importStar(c),d=a.__importStar(d);t.LinkedAccounts=e=>{const{user:t,viewer:a,pairingInfo:m}=e,[f,_]=(0,s.useState)(!1),g=()=>{_(!1),c.post_request("/unpair"),i.TeamsWebActionsLogger.log("account_page_unlink_account_confirmed")},p=()=>{_(!1)},E=()=>{_(!0),i.TeamsWebActionsLogger.log("account_page_unlink_account_clicked")},v=()=>{i.TeamsWebActionsLogger.log("account_page_link_account_clicked"),d.redirect("/team/account_pair")};if(m){const e=a.work_user&&a.personal_user,t=u.intl.formatMessage({id:"iHnMm2",defaultMessage:"This will unlink your accounts everywhere. If you added a linked account on your mobile or desktop app, unlinking will remove the last account you added from that device."}),i=e?u.intl.formatMessage({id:"1XVKkQ",defaultMessage:"You’ll be signed out after unlinking for your security."}):null;return s.default.createElement(s.default.Fragment,null,s.default.createElement(l.ButtonBlock,{label:u.intl.formatMessage({id:"58/Bbj",defaultMessage:"Linked accounts"}),subtext:u.intl.formatMessage({id:"c5OSMC",defaultMessage:"Your team and personal accounts are linked. Unlink to remove the link everywhere."}),buttonText:u.intl.formatMessage({id:"DcKRPG",defaultMessage:"Unlink"}),kind:"transparent",buttonAction:{kind:"function",handler:E}}),f&&s.default.createElement(r.Modal,{onRequestClose:p,open:!0},s.default.createElement(r.Modal.Header,{hasBottomSpacing:"title-standard"},s.default.createElement(o.Title,null,u.intl.formatMessage({id:"wthUCo",defaultMessage:"Are you sure you want to unlink your accounts?"}))),s.default.createElement(r.Modal.Body,null,s.default.createElement(o.Text,{tagName:"div"},s.default.createElement("p",null,t),i&&s.default.createElement("p",null,i))),s.default.createElement(r.Modal.Footer,null,s.default.createElement(n.Button,{variant:"opacity",onClick:p},u.intl.formatMessage({id:"vV9B1q",defaultMessage:"No, cancel"})),s.default.createElement(n.Button,{variant:"primary",onClick:g},u.intl.formatMessage({id:"XULJtd",defaultMessage:"Yes, unlink"})))))}if("personal"===t.role)return s.default.createElement(l.ButtonBlock,{label:u.intl.formatMessage({id:"lN4p6H",defaultMessage:"Link your team account"}),subtext:u.intl.formatMessage({id:"ILPjiY",defaultMessage:"Your accounts will stay separate, but you can easily switch between them and access both from any device."}),buttonText:u.intl.formatMessage({id:"6QvwvW",defaultMessage:"Link accounts"}),kind:"transparent",buttonAction:{kind:"function",handler:v}});if(!a.is_paired){const e=s.default.createElement(s.default.Fragment,null,u.intl.formatMessage({id:"ILPjiY",defaultMessage:"Your accounts will stay separate, but you can easily switch between them and access both from any device."}),s.default.createElement("br",null),u.intl.formatMessage({id:"DVayew",defaultMessage:"If you don’t have a personal account, click “Link accounts” to create one for free."}));return s.default.createElement(l.ButtonBlock,{label:u.intl.formatMessage({id:"qPNKY9",defaultMessage:"Link your personal account"}),subtext:e,buttonText:u.intl.formatMessage({id:"6QvwvW",defaultMessage:"Link accounts"}),kind:"transparent",buttonAction:{kind:"function",handler:v},className:"basics-link-accounts"})}return null}})),define("metaserver/static/js/account_page/widgets/profile/subviews/name_settings",["require","exports","tslib","react","styled-components","metaserver/static/js/core/i18n","metaserver/static/js/core/notify","metaserver/static/js/account_page/components/key_value_block","dig-components/modal","dig-components/typography","dig-components/text_fields","dig-components/buttons","metaserver/static/js/account_page/widgets/profile/api","metaserver/static/js/clean/analytics"],(function(e,t,a,s,n,r,o,l,i,c,d,u,m,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NameSettings=void 0,s=a.__importStar(s);const _=(0,(n=a.__importDefault(n)).default)(i.Modal)`
  .db-modal {
    width: 425px;
  }
`,g=n.default.div`
  color: var(--color__error__text);
  margin-top: var(--spacing__base_unit);
`,p=n.default.div`
  height: var(--spacing__unit--2);
  width: var(--spacing__unit--2);
`,E=Number("100"),v=/[\000-\037/:?\*<>"|\\]/,M=(e,t)=>{const a=(e=>e?e.length>E?"too_long":e.match(v)?"invalid":void 0:"empty")(e);if(a){if("empty"===a){if("firstName"===t)return r.intl.formatMessage({id:"OQ+zMT",defaultMessage:"Please enter your first name"});if("lastName"===t)return r.intl.formatMessage({id:"7OxRhv",defaultMessage:"Please enter your last name"})}else if("too_long"===a){if("firstName"===t)return r.intl.formatMessage({id:"RkgWqF",defaultMessage:"First name cannot be longer then 100 characters."});if("lastName"===t)return r.intl.formatMessage({id:"PpsiBa",defaultMessage:"Last name cannot be longer then 100 characters."})}return"invalid"===a?r.intl.formatMessage({id:"AMSZK+",defaultMessage:"Names can’t contain {invalid_characters}"},{invalid_characters:'" * / : < > ? \\ |'}):void 0}};t.NameSettings=e=>{const{user:t,inlineMode:n}=e,[E,v]=(0,s.useState)(t.fname),[y,b]=(0,s.useState)(t.lname),[h,w]=(0,s.useState)(t.fname),[S,T]=(0,s.useState)(t.lname),[C,A]=(0,s.useState)(!1),[R,N]=(0,s.useState)(),[I,x]=(0,s.useState)(),[O,k]=(0,s.useState)(!1),[j,D]=(0,s.useState)(!0);(0,s.useEffect)(()=>{const e=M(h,"firstName");N(e||"");const t=M(S,"lastName");x(t||""),D(!e&&!t&&!O)});const L=e=>a.__awaiter(void 0,void 0,void 0,(function*(){e.preventDefault(),k(!0);try{yield(0,m.changeName)(t.id,h,S),o.Notify.success(r.intl.formatMessage({id:"9WTRXc",defaultMessage:"Name updated."})),v(h),b(S)}catch(e){o.Notify.error(r.intl.formatMessage({id:"wfJMlq",defaultMessage:"There was an error completing this request."}))}k(!1),A(!1)})),P=()=>{A(!1)},U=r.intl.formatMessage({id:"flaKkC",defaultMessage:"First name"}),B=r.intl.formatMessage({id:"rew2qC",defaultMessage:"Last name"});let F,q;return E||y?(F=r.intl.formatMessage({id:"UwFkjc",defaultMessage:"Edit"}),q=r.intl.formatMessage({id:"Soaval",defaultMessage:"Name edit"})):(F=r.intl.formatMessage({id:"RIq3O6",defaultMessage:"Set"}),q=r.intl.formatMessage({id:"VgwMdM",defaultMessage:"Name set"})),s.default.createElement(s.default.Fragment,null,s.default.createElement(l.KeyValueBlock,{inlineMode:n,keyText:r.intl.formatMessage({id:"0RS80b",defaultMessage:"Name"}),linkText:F,valueText:`${E} ${y}`,onLinkClick:()=>{A(!0),f.UserActivityLogger.log("web","de_account_general_basics_name_edit_clicked")},className:"preference-name-row",ariaPrimaryButtonLabel:q}),C&&s.default.createElement(_,{id:"change-name-modal",open:C,withCloseButton:"Close",onRequestClose:P},s.default.createElement(i.Modal.Header,{hasBottomSpacing:"title-standard"},s.default.createElement(c.Title,null,r.intl.formatMessage({id:"SixISH",defaultMessage:"Change your name"}))),s.default.createElement(i.Modal.Body,null,s.default.createElement("form",{onSubmit:L},R?s.default.createElement(g,null,R):s.default.createElement(p,null),s.default.createElement(d.TextInput,{autoFocus:!0,placeholder:U,"aria-label":U,defaultValue:h,spellCheck:!1,onKeyUp:e=>{w(e.currentTarget.value)},name:"fname",isInvalid:!1}),I&&I!==R?s.default.createElement(g,null," ",I," "):s.default.createElement(p,null),s.default.createElement(d.TextInput,{placeholder:B,"aria-label":B,defaultValue:S,spellCheck:!1,onKeyUp:e=>{T(e.currentTarget.value)},name:"lname",isInvalid:!1}))),s.default.createElement(i.Modal.Footer,null,s.default.createElement(u.Button,{variant:"opacity",onClick:P},r.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"})),s.default.createElement(u.Button,{disabled:!j,variant:"primary",onClick:L},r.intl.formatMessage({id:"dlyU/F",defaultMessage:"Change name"})))))}})),define("metaserver/static/js/account_page/widgets/profile/subviews/photo_settings",["require","exports","tslib","react","metaserver/static/js/core/i18n","metaserver/static/js/core/notify","metaserver/static/js/core/uri","metaserver/static/js/clean/analytics","metaserver/static/js/clean/static_urls","metaserver/static/js/account_page/components/key_value_block","dig-components/avatar","metaserver/static/js/account_page/widgets/profile/api","dig-components/modal","dig-components/typography","dig-components/buttons","styled-components","metaserver/static/js/core/user_i18n"],(function(e,t,a,s,n,r,o,l,i,c,d,u,m,f,_,g,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoSettings=void 0,s=a.__importStar(s),g=a.__importDefault(g),p=a.__importStar(p);const E=g.default.div`
  display: inline-flex;
  width: auto;
  position: relative;
`,v=g.default.div`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 1;
  opacity: 0;
  &:hover {
    opacity: 0.75;
  }
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
`,M=n.intl.formatMessage({id:"/HAEcu",defaultMessage:"Delete photo"});t.PhotoSettings=t=>{const{user:g,avatarOnlyMode:y}=t,[b,h]=(0,s.useState)(g.photo_url),[w,S]=(0,s.useState)(),[T,C]=(0,s.useState)(!!g.photo_url),[A,R]=(0,s.useState)(!1),N=p.getInitials(g.display_name);(0,s.useEffect)(()=>{S(b),C(!!b)},[b]);const I=()=>{h(void 0),R(!1)};(0,s.useEffect)(()=>{const e=e=>{const t=o.URI.parse(e.detail.saved_photo_url).updateQuery({size:"64x64"}).toString();r.Notify.success(n.intl.formatMessage({id:"Jccx0J",defaultMessage:"Photo updated."})),h(t)};return document.addEventListener("db:account_photo:photo_set",e),document.addEventListener("db:account_photo:photo_deleted",I),()=>{document.removeEventListener("db:account_photo:photo_set",e),document.removeEventListener("db:account_photo:photo_deleted",I)}},[]);const x=()=>{new Promise((t,a)=>{e(["metaserver/static/js/account_photo_modal/controller"],t,a)}).then(a.__importStar).then(({AccountPhotoModalController:e})=>{e.show()}),l.UserActivityLogger.log("web","de_account_general_basics_photo_edit_clicked")},O=()=>{R(!0),l.UserActivityLogger.log("web","de_account_general_basics_photo_delete_clicked")},k=()=>{R(!1)},j=s.default.createElement(d.Avatar,{size:"large",src:w,backgroundColor:(0,d.avatarColorForUserIdentifier)(N),alt:"personal"===g.role?n.intl.formatMessage({id:"P2lPuL",defaultMessage:"Personal photo"}):n.intl.formatMessage({id:"rLXEzj",defaultMessage:"Work photo"}),hasNoOutline:!0},N),D=(0,i.static_url)("/static/metaserver/static/images/icons/link-delete-vfle9dQKT.svg"),L=(0,i.static_url)("/static/metaserver/static/images/icons/link-edit-vflyY-kMq.svg");return s.default.createElement(s.default.Fragment,null,!y&&s.default.createElement(c.KeyValueBlock,{className:"preference-picture-row",secondLink:T,keyText:n.intl.formatMessage({id:"0B2QA4",defaultMessage:"Photo"}),linkText:n.intl.formatMessage({id:"UwFkjc",defaultMessage:"Edit"}),ariaPrimaryButtonLabel:n.intl.formatMessage({id:"XRtyZw",defaultMessage:"Photo edit"}),secondValueText:n.intl.formatMessage({id:"9v2+SN",defaultMessage:"Delete"}),ariaSecondaryButtonLabel:M,valueText:j,onLinkClick:x,onSecondLinkClick:O}),y&&s.default.createElement(E,null,j,s.default.createElement(v,{className:"avatar-action",onClick:()=>(T?O:x)()},s.default.createElement(d.Avatar,{size:"small",hasNoOutline:!0,src:T?D:L,alt:n.intl.formatMessage({id:"FRQeqz",defaultMessage:"Edit profile"})}))),A&&s.default.createElement(m.Modal,{className:"delete-photo-modal",open:A,withCloseButton:"Close",onRequestClose:k},s.default.createElement(m.Modal.Header,{hasBottomSpacing:"title-standard"},s.default.createElement(f.Title,null," ",n.intl.formatMessage({id:"V5EJmv",defaultMessage:"Delete account photo"})," ")),s.default.createElement(m.Modal.Body,null,s.default.createElement(f.Text,{size:"standard",className:"delete-photo-modal__text"},n.intl.formatMessage({id:"dSiOzP",defaultMessage:"Are you sure you want to delete your account photo?"}))),s.default.createElement(m.Modal.Footer,null,s.default.createElement(_.Button,{variant:"primary",onClick:()=>a.__awaiter(void 0,void 0,void 0,(function*(){try{yield(0,u.deletePicture)(g.id),I(),r.Notify.success(n.intl.formatMessage({id:"1P57nr",defaultMessage:"Photo deleted."}))}catch(e){r.Notify.error(n.intl.formatMessage({id:"wfJMlq",defaultMessage:"There was an error completing this request."}))}}))},M),s.default.createElement(_.Button,{variant:"opacity",onClick:k},n.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"})))))}})),define("metaserver/static/js/account_page/widgets/profile/subviews/secondary_emails/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_NUM_ALIASES_TO_DISPLAY=t.MAX_NUM_ALIASES=void 0,t.MAX_NUM_ALIASES=10,t.MAX_NUM_ALIASES_TO_DISPLAY=5})),define("metaserver/static/js/account_page/widgets/profile/subviews/secondary_emails/secondary_emails",["require","exports","tslib","react","metaserver/static/js/core/i18n","metaserver/static/js/account_page/components/key_value_block","metaserver/static/js/account_page/components/info_tooltip","metaserver/static/js/account_page/widgets/profile/subviews/secondary_emails/subviews/add_secondary_emails","metaserver/static/js/account_page/widgets/profile/subviews/secondary_emails/subviews/manage_secondary_emails","styled-components","metaserver/static/js/account_page/widgets/profile/subviews/secondary_emails/constants","dig-components/typography"],(function(e,t,a,s,n,r,o,l,i,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SecondaryEmails=void 0,s=a.__importStar(s);const m=(c=a.__importDefault(c)).default.li`
  color: var(--color__faint__text);
  display: ${e=>e.inlineMode?"inline-block":"block"};
  padding-right: var(--spacing__base_unit);
  ${e=>e.inlineMode&&"\n    &:not(:last-child) {\n      &::after {\n        content: ',';\n      }\n    }\n  "}
`,f=c.default.span`
  color: var(--color__faint__text);
`,_=(0,c.default)(r.KeyValueBlock)`
  && {
    height: auto;
    padding-top: var(--spacing__unit--3);
    padding-bottom: var(--spacing__unit--3);
    align-items: flex-start;
  }

  .mc-tertiary-icon-text {
    // Override default for link text as it becomes misaligned with row content
    padding-bottom: 0;
    padding-top: 0;
  }
`,g=c.default.ul`
  margin: 0;
  max-width: 600px;
  text-align: right;
  list-style-type: none;
  word-wrap: break-word;
`;t.SecondaryEmails=e=>{const{user:t,updateUser:a,profileExtras:r,inlineMode:c}=e;let p=e.maxNumberOfSecondaryEmailsToDisplay;p||(p=d.MAX_NUM_ALIASES_TO_DISPLAY);const[E,v]=(0,s.useState)(t.email),[M]=(0,s.useState)(t.is_email_verified),[y]=(0,s.useState)(null==r?void 0:r.edit_aliases_disallowed),[b]=(0,s.useState)(!(null==r?void 0:r.change_email_disallowed)),[h,w]=(0,s.useState)(!1),[S,T]=(0,s.useState)(!1);let C,A=void 0;const R=()=>{T(!0)},N=()=>{T(!1)},I=()=>{w(!0)},x=()=>{return e=(null==r?void 0:r.aliases_info)||[],[...e].sort((e,t)=>{const a=e.is_verified;return a===t.is_verified?e.email<t.email?-1:1:a?-1:1});var e},[O,k]=(0,s.useState)(x()),j=(e,t=!1)=>{r.aliases_info=[...r.aliases_info||[],{email:e,is_verified:t}],k(x())},D=e=>{r.aliases_info=(r.aliases_info||[]).filter(t=>t.email!==e),k(x())};M&&(y?C=s.default.createElement(o.InfoTooltip,{content:n.intl.formatMessage({id:"Mg+i5T",defaultMessage:"Your admin manages these emails"}),position:o.TooltipPlacement.BOTTOM}):O.length>0?(C=n.intl.formatMessage({id:"UwFkjc",defaultMessage:"Edit"}),A=I):(C=n.intl.formatMessage({id:"s2W7dS",defaultMessage:"Add secondary email"}),A=R));let L=null;if(O.length>p){const e=O.length-p;L=n.intl.formatMessage({id:"IwqHAa",defaultMessage:"{count, plural, one{<li>and {count} more...</li>} other{<li>and {count} more...</li>}}"},{count:e,li:e=>s.default.createElement(m,{inlineMode:c,className:"overflow-text"},e)})}const P=O.slice(0,p),U=e=>{j(e)};return s.default.createElement(_,{inlineMode:c,className:"preference-secondary-emails-row",keyText:n.intl.formatMessage({id:"cIP6mb",defaultMessage:"Secondary emails"}),valueText:s.default.createElement("div",{className:"secondary-email-container"},s.default.createElement(g,null,P.map(({email:e,is_verified:t},a)=>s.default.createElement(m,{inlineMode:c,key:e},s.default.createElement(u.Text,{className:"secondary-email-text",title:e},t?e:n.intl.formatMessage({id:"TGhLSw",defaultMessage:"{email} <s>(pending)</s>"},{email:e,s:e=>s.default.createElement(f,null,e)})))),L),s.default.createElement("div",{className:"secondary-email-modal-container"},S&&s.default.createElement(l.AddSecondaryEmails,{user:t,open:!0,onAddPendingSecondaryEmail:U,onCancel:()=>{N()},onDone:()=>{N()},showAddAnotherSecondaryEmailLink:O.length<d.MAX_NUM_ALIASES}),h&&s.default.createElement(i.ManageSecondaryEmails,{user:t,open:!0,onAddPendingSecondaryEmail:U,secondaryEmails:O,swapAliasAndPrimaryAllowed:b,onDone:()=>{w(!1)},onRemoveSecondaryEmail:e=>{D(e)},onMakeSecondaryEmailPrimary:e=>{var s;s=e,t.email=s,a(t),v(s),D(s),j(E,!0)}}))),linkText:C,onLinkClick:A})}})),define("metaserver/static/js/account_page/widgets/profile/subviews/secondary_emails/subviews/add_secondary_emails",["require","exports","tslib","react","dig-components/modal","dig-components/typography","dig-components/buttons","metaserver/static/js/core/i18n","dig-components/text_fields","styled-components","metaserver/static/js/clean/static_urls","dig-components/avatar","metaserver/static/js/core/browser","metaserver/static/js/account_page/widgets/profile/subviews/secondary_emails/subviews/util","metaserver/static/js/account_page/widgets/profile/api","metaserver/static/js/core/notify"],(function(e,t,a,s,n,r,o,l,i,c,d,u,m,f,_,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddSecondaryEmails=void 0,s=a.__importStar(s),c=a.__importStar(c),m=a.__importStar(m);const p=(0,c.default)(i.TextInput)`
  padding-bottom: var(--spacing__unit--2);
`,E=c.default.span`
  font-weight: var(--type__body__standard--fontweight_strong);
`,v=c.default.div`
  color: var(--color__error__text);
  margin-top: var(--spacing__base_unit);
`,M=c.default.div`
  height: 18px;
`,y=c.default.div`
  padding-top: var(--spacing__unit--2);
  display: flex;
  flex-direction: row;
  justify-content: space-between;
`,b=c.default.div`
  height: 240px;
  width: 187px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  font-size: var(--type__body__small--fontsize);
  border-color: var(--color__faint__border);
  border-style: solid;
  border-width: 1px;
`,h=c.css`
  height: 45px;
  width: 45px;
  position: absolute;
  top: 0;
`,w=c.default.img`
  ${h}
  left: 0;
  z-index: 1;
`,S=c.default.img`
  ${h}
  left: 14.2px;
  z-index: 0;
`,T=c.default.img`
  ${h}
  left: 28.4px;
  z-index: -1;
`,C=c.css`
  height: 45px;
  padding-bottom: 20px;
`,A=c.default.div`
  ${C}
  height: 45px;
  width: 73.4px;
  position: relative;
`,R=c.default.div`
  ${C}
  width: 60px;
  position: relative;
`,N=c.default.img`
  position: absolute;
  top: 15px;
  left: -110px;
`,I=c.default.img`
  height: 45px;
  width: 60px;
  position: absolute;
  top: 0;
  left: 0;
`,x=c.default.img`
  position: absolute;
  top: 15px;
  right: -120px;
`,O=c.default.div`
  ${C}
  width: 59px;
  position: relative;
`,k=c.default.img`
  position: absolute;
  top: 0;
  left: 0;
  z-index: 0;
`,j=c.default.div`
  color: var(--color__faint__text);
`,D=c.default.div`
  width: 155px;
  padding-bottom: var(--spacing__unit--3);
  text-overflow: ellipsis;
  overflow: hidden;
`,L=c.default.div`
  padding-top: 45px;
`,P=(0,c.default)(u.Avatar)`
  height: 29px;
  width: 29px;
  position: absolute;
  left: 45px;
  top: 25px;
  z-index: 0;
`,U=c.default.p`
  margin-bottom: 0;
  padding-top: var(--spacing__unit--2);
  font-size: var(--type__body__small--fontsize);
  color: var(--color__faint__text);
`,B=c.default.p`
  margin: 0;
  word-wrap: break-word;
`,F=c.default.span`
  font-weight: var(--type__body__standard--fontweight_strong);
`,q=(0,d.static_url)("/static/metaserver/static/images/avatar/faceholder-vflmhyJKO.svg");t.AddSecondaryEmails=e=>{const{user:t,onAddPendingSecondaryEmail:i,onCancel:c,onDone:u,showAddAnotherSecondaryEmailLink:h}=e,[C,V]=(0,s.useState)("ADD_SECONDARY_EMAIL"),[z,H]=(0,s.useState)(""),[W,K]=(0,s.useState)(),[G,Y]=(0,s.useState)(!1),[Q,X]=(0,s.useState)(!1),J=t.display_name,Z=t.email,$=t.photo_url||q;(0,s.useEffect)(()=>{Y("ADD_SECONDARY_EMAIL"===C),X("VERIFY_EMAIL_SENT"===C)});const ee=(e,t=!1)=>{e.type===f.ErrorType.Inline?K(e.message):(K(""),g.Notify.error(e.message))},te=e=>a.__awaiter(void 0,void 0,void 0,(function*(){e.preventDefault();const a=(0,f.validateEmail)(z);if(a)ee(a);else try{yield(0,_.addPendingAlias)(t.id,z),i(z),g.Notify.success(l.intl.formatMessage({id:"udFUjU",defaultMessage:"Secondary email {email} added."},{email:z})),V("VERIFY_EMAIL_SENT")}catch(e){return void ee((0,f.errorTagToMessage)(e.error[".tag"]))}})),ae=()=>{c()},se=()=>{H(""),V("ADD_SECONDARY_EMAIL")};return s.default.createElement(s.default.Fragment,null,s.default.createElement(n.Modal,{open:G,width:640,withCloseButton:"Close",onRequestClose:ae},s.default.createElement(n.Modal.Header,{hasBottomSpacing:"title-standard"},s.default.createElement(r.Title,null,l.intl.formatMessage({id:"s2W7dS",defaultMessage:"Add secondary email"}))),s.default.createElement(n.Modal.Body,null,s.default.createElement("form",{onSubmit:te},s.default.createElement(r.Text,{size:"standard"},l.intl.formatMessage({id:"2eyJvg",defaultMessage:"Secondary email address"})),W?s.default.createElement(v,null,W):s.default.createElement(M,null),s.default.createElement(p,{autoFocus:!0,defaultValue:z,spellCheck:!1,onChange:e=>{const t=e.target.value;H(t),K("")},name:"secondary-email-input",isInvalid:!!W})),s.default.createElement(y,null,s.default.createElement(b,null,s.default.createElement(A,null,s.default.createElement(w,{alt:"",className:"avatar",src:(0,d.static_url)("/static/metaserver/static/images/account_page/avatar-1-vflR0HsPJ.png")}),s.default.createElement(S,{alt:"",className:"avatar",src:(0,d.static_url)("/static/metaserver/static/images/account_page/avatar-2-vflX2nkbv.png")}),s.default.createElement(T,{alt:"",className:"avatar",src:(0,d.static_url)("/static/metaserver/static/images/account_page/avatar-3-vflMpfF3l.png")})),s.default.createElement(j,{className:"panel-title"},s.default.createElement(r.Text,{size:"small"},l.intl.formatMessage({id:"OdSVd7",defaultMessage:"Other people"}))),s.default.createElement(L,null,l.intl.formatMessage({id:"RdDxZE",defaultMessage:"Add a secondary to help{br}people share with you"},{br:s.default.createElement("br",null)}))),s.default.createElement(b,null,s.default.createElement(R,null,s.default.createElement(N,{alt:l.intl.formatMessage({id:"+eGcx2",defaultMessage:"Arrow pointing right"}),src:(0,d.static_url)("/static/metaserver/static/images/account_page/arrow-short-vfl96Q6Y0.svg")}),s.default.createElement(I,{alt:l.intl.formatMessage({id:"f0osid",defaultMessage:"Envelope"}),src:(0,d.static_url)("/static/metaserver/static/images/account_page/envelope-vfl3QrlwB.svg")}),s.default.createElement(x,{alt:l.intl.formatMessage({id:"+eGcx2",defaultMessage:"Arrow pointing right"}),src:(0,d.static_url)("/static/metaserver/static/images/account_page/arrow-long-vfl7JxmZ2.svg")})),s.default.createElement(j,{className:"panel-title"},s.default.createElement(r.Text,{size:"small"},J)),s.default.createElement(D,null,s.default.createElement(r.Text,{size:"small",color:"faint"},z||"example@example.com")),s.default.createElement(r.Text,{size:"small"},l.intl.formatMessage({id:"0W8WmQ",defaultMessage:"They can also share with{br}your secondary email"},{br:s.default.createElement("br",null)}))),s.default.createElement(b,null,s.default.createElement(O,null,s.default.createElement(k,{alt:l.intl.formatMessage({id:"MLqiSW",defaultMessage:"Folder"}),src:(0,d.static_url)("/static/metaserver/static/images/account_page/folder-overlap-vflToNB6H.svg")}),$&&s.default.createElement(P,{className:"faceholder",size:"standard",src:$})),s.default.createElement(j,{className:"panel-title"},s.default.createElement(r.Text,{size:"small"},l.intl.formatMessage({id:"SrKRAg",defaultMessage:"Your account"}))),s.default.createElement(D,null,s.default.createElement(r.Text,{size:"small",color:"faint"},Z)),s.default.createElement(r.Text,{size:"small"},l.intl.formatMessage({id:"8+Vj2S",defaultMessage:"You’ll get everything in your{br}Dropbox account"},{br:s.default.createElement("br",null)})))),s.default.createElement(U,null,s.default.createElement(r.Text,{size:"small",color:"faint"},l.intl.formatMessage({id:"UIRKh5",defaultMessage:"Note: People will still see your <b>primary email</b> across Dropbox. <link>How secondary emails work</link>"},{b:e=>s.default.createElement(E,{className:"bold"},e),link:e=>s.default.createElement(o.Button,{variant:"transparent",size:"small",onClick:()=>m.open_tab("/help/files-folders/secondary-email")},e)})))),s.default.createElement(n.Modal.Footer,null,s.default.createElement(o.Button,{variant:"opacity",onClick:ae},l.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"})),s.default.createElement(o.Button,{variant:"primary",onClick:te},l.intl.formatMessage({id:"YcxVqg",defaultMessage:"Add"})))),s.default.createElement(n.Modal,{open:Q},s.default.createElement(n.Modal.Header,{hasBottomSpacing:"title-standard"},s.default.createElement(r.Title,null,l.intl.formatMessage({id:"hP3HgD",defaultMessage:"Verify your email"}))),s.default.createElement(n.Modal.Body,null,s.default.createElement(B,null,s.default.createElement(r.Text,{size:"standard"},l.intl.formatMessage({id:"7VEvCe",defaultMessage:"We just sent an email to <b>{email}</b>. Click the button in the email to verify your address and finish adding your secondary email. If you can’t find the email, check your spam folder."},{b:e=>s.default.createElement(F,null,e),email:z})))),s.default.createElement(n.Modal.Footer,null,h&&s.default.createElement(o.Button,{variant:"transparent",onClick:se},l.intl.formatMessage({id:"ffNYyt",defaultMessage:"Add another secondary email"})),s.default.createElement(o.Button,{variant:"opacity",onClick:()=>a.__awaiter(void 0,void 0,void 0,(function*(){try{yield(0,_.sendVerifyEmail)(t.id,z),g.Notify.success(l.intl.formatMessage({id:"NCdpWv",defaultMessage:"Verification email successfully sent."}))}catch(e){ee((0,f.errorTagToMessage)(e.error[".tag"]))}}))},s.default.createElement(o.Button,{variant:"transparent"},l.intl.formatMessage({id:"D09GlF",defaultMessage:"Resend"}))),s.default.createElement(o.Button,{variant:"primary",onClick:()=>{se(),u&&u()}},u?l.intl.formatMessage({id:"6bRQ0U",defaultMessage:"Done"}):l.intl.formatMessage({id:"u/p3Pl",defaultMessage:"Close"})))))}})),define("metaserver/static/js/account_page/widgets/profile/subviews/secondary_emails/subviews/manage_secondary_emails",["require","exports","tslib","react","dig-components/modal","dig-components/typography","dig-components/buttons","metaserver/static/js/core/i18n","dig-components/text_fields","styled-components","metaserver/static/js/core/browser","metaserver/static/js/account_page/widgets/profile/subviews/secondary_emails/subviews/util","metaserver/static/js/account_page/widgets/profile/api","metaserver/static/js/core/notify","metaserver/static/js/account_page/widgets/profile/subviews/secondary_emails/constants","metaserver/static/js/account_page/widgets/profile/subviews/secondary_emails/subviews/add_secondary_emails"],(function(e,t,a,s,n,r,o,l,i,c,d,u,m,f,_,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ManageSecondaryEmails=void 0,s=a.__importStar(s),c=a.__importDefault(c),d=a.__importStar(d);const p=(0,c.default)(o.Button)`
  visibility: hidden;
`,E=c.default.span`
  color: var(--color__faint__text);
`,v=c.default.div`
  padding-left: 0;
  margin-top: 18px;
  position: relative;
  max-height: 240px;
  overflow: auto;
  list-style-type: none;
`,M=c.default.div`
  margin: 0;
  padding-bottom: var(--spacing__unit--2);
`,y=(0,c.default)(r.Text)`
  margin: var(--spacing__unit--2) 0;
  border: 1px solid var(--color__warning--dark);
  color: var(--color__warning--dark);
  padding: 9px;
  background: var(--color__warning__background);
`,b=c.default.div`
  width: 592px;
  display: flex;
  margin-bottom: var(--spacing__unit--2);
  flex-direction: row;
  justify-content: space-between;
`,h=(0,c.default)(r.Text)`
  min-width: 0;
  width: 384px;
`,w=c.default.div`
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-right: var(--spacing__unit--2);
`,S=c.default.div`
  display: flex;
  flex-direction: row;
  padding-left: var(--spacing__unit--2);
`,T=(0,c.default)(o.Button)`
  max-width: 136px;
`,C=(0,c.default)(o.Button)`
  max-width: 136px;
  margin-left: var(--spacing__base_unit);
`,A=(0,c.default)(o.Button)`
  && {
    margin-left: var(--spacing__base_unit);
    padding: 0;
    width: 48px;
  }
`,R=(0,c.default)(n.Modal)`
  .mc-tertiary-icon-text {
    padding: 0;
  }
`,N=(0,c.default)(n.Modal)`
  word-wrap: break-word;
`,I=c.default.span`
  font-weight: var(--type__body__standard--fontweight_strong);
`;t.ManageSecondaryEmails=e=>{const{user:t,secondaryEmails:c,onAddPendingSecondaryEmail:x,onDone:O,onMakeSecondaryEmailPrimary:k,swapAliasAndPrimaryAllowed:j,onRemoveSecondaryEmail:D}=e,[L,P]=(0,s.useState)("MANAGE_SECONDARY_EMAILS"),[U,B]=(0,s.useState)(!1),[F,q]=(0,s.useState)(!1),[V,z]=(0,s.useState)(!1),[H,W]=(0,s.useState)(""),[K,G]=(0,s.useState)(""),[Y,Q]=(0,s.useState)(""),[X,J]=(0,s.useState)(!1),Z=t.email;(0,s.useEffect)(()=>{B("MANAGE_SECONDARY_EMAILS"===L),q("ADD_SECONDARY_EMAIL"===L),z("CONFIRM_REMOVE"===L),J("CONFIRM_MAKE_PRIMARY"===L)});const $=()=>{P("MANAGE_SECONDARY_EMAILS")},ee=e=>{const t=(0,u.errorTagToMessage)(e.error[".tag"]);f.Notify.error(t.message)},te=e=>a.__awaiter(void 0,void 0,void 0,(function*(){e.preventDefault();try{yield(0,m.makePrimary)(t.id,K,Y),f.Notify.success(l.intl.formatMessage({id:"eGpOpC",defaultMessage:"Secondary email {email} successfully made primary."},{email:K})),G(""),k(K),$()}catch(e){ee(e)}})),ae=()=>{d.open_tab("/help/files-folders/secondary-email")},se=e=>()=>{G(e),P("CONFIRM_MAKE_PRIMARY")},ne=e=>()=>{(e=>{a.__awaiter(void 0,void 0,void 0,(function*(){try{yield(0,m.sendVerifyEmail)(t.id,e),f.Notify.success(l.intl.formatMessage({id:"NCdpWv",defaultMessage:"Verification email successfully sent."}))}catch(e){ee(e)}}))})(e)},re=e=>()=>{W(e),P("CONFIRM_REMOVE")},oe=c.length<_.MAX_NUM_ALIASES;return s.default.createElement(s.default.Fragment,null,U&&s.default.createElement(R,{width:640,open:!0},s.default.createElement(n.Modal.Header,{hasBottomSpacing:"title-standard"},s.default.createElement(r.Title,null,l.intl.formatMessage({id:"cIP6mb",defaultMessage:"Secondary emails"}))),s.default.createElement(n.Modal.Body,null,s.default.createElement(M,null,s.default.createElement(r.Text,{size:"standard"},l.intl.formatMessage({id:"rPaNGq",defaultMessage:"When people share folders and files with a secondary email, content automatically gets routed to this Dropbox account. <link>How do secondary emails work?</link>"},{link:e=>s.default.createElement(o.Button,{onClick:ae,variant:"transparent"},e)})),!oe&&s.default.createElement(y,{tagName:"div",className:"warning-box"},l.intl.formatMessage({id:"S3u9PE",defaultMessage:"You have reached the limit of {max_aliases} secondary emails. To add other secondary emails, please remove at least one existing secondary email."},{max_aliases:_.MAX_NUM_ALIASES})),s.default.createElement(v,null,c.map(({email:e,is_verified:t},a)=>s.default.createElement(b,{key:a},s.default.createElement(h,null,t&&s.default.createElement(w,{title:e},e),!t&&s.default.createElement(w,{title:e},l.intl.formatMessage({id:"TGhLSw",defaultMessage:"{email} <s>(pending)</s>"},{email:e,s:e=>s.default.createElement(E,null,e)}))),s.default.createElement(S,null,t&&j&&s.default.createElement(T,{variant:"transparent",onClick:se(e)},l.intl.formatMessage({id:"gdOmTm",defaultMessage:"Make primary"})),!t&&s.default.createElement(C,{variant:"transparent",onClick:ne(e)},l.intl.formatMessage({id:"Kj/rA+",defaultMessage:"Resend verification"})),s.default.createElement(A,{variant:"transparent",onClick:re(e)},l.intl.formatMessage({id:"9v2+SN",defaultMessage:"Delete"})))))))),s.default.createElement(n.Modal.Footer,null,oe&&s.default.createElement(o.Button,{variant:"transparent",onClick:()=>{P("ADD_SECONDARY_EMAIL")}},l.intl.formatMessage({id:"ffNYyt",defaultMessage:"Add another secondary email"})),s.default.createElement(p,{variant:"opacity"}),s.default.createElement(o.Button,{variant:"primary",onClick:()=>{$(),O&&O()}},l.intl.formatMessage({id:"6bRQ0U",defaultMessage:"Done"})))),F&&s.default.createElement(g.AddSecondaryEmails,{user:t,open:!0,onAddPendingSecondaryEmail:e=>{x(e),$()},onCancel:$,onDone:$,showAddAnotherSecondaryEmailLink:oe}),V&&s.default.createElement(N,{open:!0},s.default.createElement(n.Modal.Header,{hasBottomSpacing:"title-standard"},s.default.createElement(r.Title,null,l.intl.formatMessage({id:"X/07sw",defaultMessage:"Delete secondary email?"}))),s.default.createElement(n.Modal.Body,null,s.default.createElement(r.Text,null,l.intl.formatMessage({id:"LltYZa",defaultMessage:"Are you sure you want to delete the secondary email <b>{email}</b>?"},{b:e=>s.default.createElement(I,null,e),email:H}))),s.default.createElement(n.Modal.Footer,null,s.default.createElement(o.Button,{variant:"opacity",onClick:$},l.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"})),s.default.createElement(o.Button,{variant:"primary",onClick:()=>a.__awaiter(void 0,void 0,void 0,(function*(){try{yield(0,m.removeAlias)(t.id,H),f.Notify.success(l.intl.formatMessage({id:"fiuCCf",defaultMessage:"Seondary email {email} removed."},{email:H})),D(H),W(""),$()}catch(e){ee(e)}}))},l.intl.formatMessage({id:"9v2+SN",defaultMessage:"Delete"})))),X&&s.default.createElement(N,{open:!0},s.default.createElement(n.Modal.Header,{hasBottomSpacing:"title-standard"},s.default.createElement(r.Title,null,l.intl.formatMessage({id:"yg9BrZ",defaultMessage:"Make ‘{emailToBePrimary}’ primary?"},{emailToBePrimary:K}))),s.default.createElement(n.Modal.Body,null,s.default.createElement(r.Text,{size:"standard"},l.intl.formatMessage({id:"JnNd2k",defaultMessage:"Please re-enter your password to make <b>{emailToBePrimary}</b> your primary email. Doing so means you will use it to log in to your Dropbox account, and <b>{currentPrimaryEmail}</b> will become a secondary email."},{b:e=>s.default.createElement(I,null,e),emailToBePrimary:K,currentPrimaryEmail:Z})),s.default.createElement("form",{onSubmit:te},s.default.createElement(r.Text,{size:"small"},l.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"})),s.default.createElement(i.TextInput,{autoFocus:!0,defaultValue:Y,type:"password",spellCheck:!1,"aria-label":"Password",placeholder:l.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"}),onChange:e=>{const t=e.target.value;Q(t)},name:"password-input"}))),s.default.createElement(n.Modal.Footer,null,s.default.createElement(o.Button,{variant:"opacity",onClick:$},l.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"})),s.default.createElement(o.Button,{variant:"primary",onClick:te},l.intl.formatMessage({id:"gdOmTm",defaultMessage:"Make primary"})))))}})),define("metaserver/static/js/account_page/widgets/profile/subviews/secondary_emails/subviews/util",["require","exports","tslib","metaserver/static/js/account_page/widgets/profile/subviews/secondary_emails/constants","metaserver/static/js/validators/email_validator","metaserver/static/js/core/exception","metaserver/static/js/core/i18n"],(function(e,t,a,s,n,r,o){"use strict";var l;Object.defineProperty(t,"__esModule",{value:!0}),t.validateEmail=t.errorTagToMessage=t.ErrorType=void 0,n=a.__importDefault(n),(function(e){e[e.Inline=0]="Inline",e[e.Toast=1]="Toast"})(l=t.ErrorType||(t.ErrorType={}));const i={alias_already_owned_by_user:{type:l.Inline,message:o.intl.formatMessage({id:"/XZGug",defaultMessage:"This email already in use, try another"})},user_unverified:{type:l.Inline,message:o.intl.formatMessage({id:"T59HGQ",defaultMessage:"Verify your primary email first"})},alias_unavailable:{type:l.Inline,message:o.intl.formatMessage({id:"Y/r/in",defaultMessage:"This email already taken, try another"})},disallowed_by_team_policy:{type:l.Toast,message:o.intl.formatMessage({id:"bk3RXd",defaultMessage:"Secondary email not added because admin turned off secondary emails for the team."})},email_send_error:{type:l.Toast,message:o.intl.formatMessage({id:"ehdbDz",defaultMessage:"An error occurred on our end. Please try again."})},transient_error:{type:l.Toast,message:o.intl.formatMessage({id:"ehdbDz",defaultMessage:"An error occurred on our end. Please try again."})},unknown_error:{type:l.Toast,message:o.intl.formatMessage({id:"frldLp",defaultMessage:"An error occurred on our end."})},reached_alias_limit:{type:l.Inline,message:o.intl.formatMessage({id:"vazg5S",defaultMessage:"Only {max_aliases} secondary emails allowed"},{max_aliases:s.MAX_NUM_ALIASES})},alias_already_pending:{type:l.Inline,message:o.intl.formatMessage({id:"Mg5hv3",defaultMessage:"This email is pending, try another"})},alias_not_pending:{type:l.Toast,message:o.intl.formatMessage({id:"bW9cCS",defaultMessage:"Email doesn’t exist."})},cannot_remove_primary:{type:l.Toast,message:o.intl.formatMessage({id:"USBRIw",defaultMessage:"Primary email can’t be deleted."})},alias_not_found:{type:l.Toast,message:o.intl.formatMessage({id:"7M7SRT",defaultMessage:"This email can’t be deleted."})},alias_not_verified:{type:l.Toast,message:o.intl.formatMessage({id:"ntZqC3",defaultMessage:"Verify your secondary email before swapping."})},invalid_password:{type:l.Toast,message:o.intl.formatMessage({id:"ot8ivW",defaultMessage:"Invalid password."})},change_email_disallowed:{type:l.Toast,message:o.intl.formatMessage({id:"QaHMKS",defaultMessage:"Primary email can’t be changed."})},other_error:{type:l.Toast,message:o.intl.formatMessage({id:"frldLp",defaultMessage:"An error occurred on our end."})}};t.errorTagToMessage=function(e){const t=i[e];return void 0===t?((0,r.reportStack)(`Error message not found for ${e}`,{severity:r.SEVERITY.NONCRITICAL}),i.other_error):t},t.validateEmail=function(e){for(const{valid:t}of n.default.validate(e))if(!t)return{type:l.Inline,message:o.intl.formatMessage({id:"nk7m1x",defaultMessage:"Invalid email address"})};return null}})),define("metaserver/static/js/account_page/widgets/profile/subviews/linked_user_settings/linked_user_settings",["require","exports","tslib","react","dig-components/icons","dig-components/icons/src","dig-components/badges","dig-components/buttons","dig-components/typography","metaserver/static/js/clean/form","metaserver/static/js/core/i18n","metaserver/static/js/account_menu/account_menu_util","metaserver/static/js/account_page/widgets/profile/subviews/linked_user_settings/linked_user_row","metaserver/static/js/account_page/widgets/profile/subviews/linked_user_settings/confirm_unlink_modal","metaserver/static/js/linked_users/linked_users_utils","metaserver/static/js/account_page/widgets/profile/subviews/linked_user_settings/linked_user_settings.module.css","metaserver/static/js/clean/active_user"],(function(e,t,a,s,n,r,o,l,i,c,d,u,m,f,_,g,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedUserSettings=void 0,s=a.__importStar(s),c=a.__importStar(c),g=a.__importDefault(g);const E=d.intl.formatMessage({id:"v+VAfo",defaultMessage:"Manage linked users"}),v=d.intl.formatMessage({id:"FqtMWD",defaultMessage:"Link user"}),M=d.intl.formatMessage({id:"uIXI8x",defaultMessage:"Beta"});t.LinkedUserSettings=({user:e,viewer:t})=>{const[a,d]=(0,s.useState)(null),y=t.linked_users_set.get_users(),b=(0,s.useCallback)((e,t)=>{d(t)},[]),h=(0,s.useCallback)(()=>{d(null)},[]),w=(0,s.useCallback)(()=>{c.post_request("/unlink_user",{target_luid:a.linked_user_id,_subject_uid:(0,p.mustGetActiveUserId)()})},[a]);return s.default.createElement("div",{className:"account-page-module"},s.default.createElement("div",{className:g.default.sectionContainer},s.default.createElement(i.Text,null,E,s.default.createElement(o.AccessoryBadge,{className:g.default.betaBadge},M)),y.length>=1&&s.default.createElement("div",{className:g.default.linkedUsersContainer},y.map(t=>s.default.createElement(m.LinkedUserRow,{key:t.id,activeUser:e,linkedUser:t,onUnlinkButtonClick:b}))),(0,_.isUserAllowedToLinkNewUsers)(t)&&s.default.createElement(l.Button,{className:g.default.linkUserButton,href:u.ACCOUNT_PAIR_URL,variant:"transparent",withIconLeft:s.default.createElement(n.UIIcon,{src:r.AddCircleLine})},v)),s.default.createElement(f.ConfirmUnlinkModal,{userToUnlink:a,onClose:h,onConfirm:w}))},t.LinkedUserSettings.displayName="LinkedUserSettings"})),define("metaserver/static/js/account_page/widgets/profile/subviews/linked_user_settings/linked_user_settings.module.css",["require","exports","css!metaserver/static/js/account_page/widgets/profile/subviews/linked_user_settings/linked_user_settings.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mcTertiaryIconText=t.linkUserButton=t.linkedUsersContainer=t.betaBadge=t.sectionContainer=void 0,t.sectionContainer="_section-container_15uvx_1",t.betaBadge="_beta-badge_15uvx_8",t.linkedUsersContainer="_linked-users-container_15uvx_12",t.linkUserButton="_link-user-button_15uvx_19",t.mcTertiaryIconText="_mc-tertiary-icon-text_15uvx_23";t.default={sectionContainer:"_section-container_15uvx_1",betaBadge:"_beta-badge_15uvx_8",linkedUsersContainer:"_linked-users-container_15uvx_12",linkUserButton:"_link-user-button_15uvx_19",mcTertiaryIconText:"_mc-tertiary-icon-text_15uvx_23"}})),define("metaserver/static/js/account_page/widgets/profile/subviews/linked_user_settings/linked_user_row",["require","exports","tslib","react","dig-components/avatar","dig-components/buttons","dig-components/typography","metaserver/static/js/api_v2/user_client","metaserver/static/js/core/exception","metaserver/static/js/core/i18n","metaserver/static/js/core/user_i18n","metaserver/static/js/account_page/widgets/profile/subviews/linked_user_settings/linked_user_row.module.css"],(function(e,t,a,s,n,r,o,l,i,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedUserRow=void 0,s=a.__importDefault(s),i=a.__importStar(i),d=a.__importStar(d),u=a.__importDefault(u);const m=c.intl.formatMessage({id:"37m57E",defaultMessage:"Signed out"}),f={},_=e=>{const[t,n]=s.default.useState(null);return s.default.useEffect(()=>{e._authed&&(e=>{a.__awaiter(void 0,void 0,void 0,(function*(){const t=f[e.account_id];if(t)n(t);else try{const t=new l.UserApiV2Client,a=(yield t.ns("users").rpc("get_plan_info",{account_id:e.account_id},{subjectUserId:e.id})).serialized_sku_content.name;f[e.account_id]=a,n(a)}catch(t){"v2_user"===t.error[".tag"]?f[e.account_id]=null:i.reportException({err:t||new Error("Failed to fetch plan for account"),severity:i.SEVERITY.NONCRITICAL})}}))})(e)},[e]),e._authed?null!=t?t:" ":m};t.LinkedUserRow=({activeUser:e,linkedUser:t,onUnlinkButtonClick:a})=>{const{display_name:l,email:i,photo_circle_url:c,team_name:m}=t,f=d.getInitials(l),g=_(t),p=s.default.createElement(r.Button,{onClick:e=>a(e,t),variant:"transparent"},"Unlink");return s.default.createElement("div",{className:u.default.linkedUserRowContainer},s.default.createElement("div",{className:u.default.userCardContainer},s.default.createElement(n.Avatar,{backgroundColor:(0,n.avatarColorForUserIdentifier)(f),hasNoOutline:!0,size:"small",src:c},f),s.default.createElement("div",{className:u.default.userCardTextContainer},s.default.createElement(o.Text,{isBold:!0},i),s.default.createElement(o.Text,{size:"xsmall",color:"faint"},m),s.default.createElement(o.Text,{size:"xsmall",color:"faint"},g))),e.id===t.id?"Current user":p)},t.LinkedUserRow.displayName="LinkedUserRow"})),define("metaserver/static/js/account_page/widgets/profile/subviews/linked_user_settings/linked_user_row.module.css",["require","exports","css!metaserver/static/js/account_page/widgets/profile/subviews/linked_user_settings/linked_user_row.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userCardTextContainer=t.userCardContainer=t.linkedUserRowContainer=void 0,t.linkedUserRowContainer="_linked-user-row-container_1mewr_1",t.userCardContainer="_user-card-container_1mewr_8",t.userCardTextContainer="_user-card-text-container_1mewr_13";t.default={linkedUserRowContainer:"_linked-user-row-container_1mewr_1",userCardContainer:"_user-card-container_1mewr_8",userCardTextContainer:"_user-card-text-container_1mewr_13"}})),define("metaserver/static/js/account_page/widgets/profile/subviews/linked_user_settings/confirm_unlink_modal",["require","exports","tslib","react","react-intl","dig-components/modal","dig-components/buttons","dig-components/typography","metaserver/static/js/core/i18n"],(function(e,t,a,s,n,r,o,l,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfirmUnlinkModal=void 0,s=a.__importDefault(s);const c=(0,n.defineMessage)({id:"/7VIjs",defaultMessage:"Unlink {email}?"}),d=i.intl.formatMessage({id:"gEptPR",defaultMessage:"This will unlink this user for every other linked user as well. You’ll be signed out after unlinking for your security."});t.ConfirmUnlinkModal=({userToUnlink:e,onClose:t,onConfirm:a})=>{const[n,u]=s.default.useState(""),m=!!e;return s.default.createElement(r.Modal,{onRequestClose:t,open:m,onAfterOpen:()=>u(e.email)},s.default.createElement(r.Modal.Header,{hasBottomSpacing:"title-standard"},s.default.createElement(l.Title,null,i.intl.formatMessage(c,{email:n}))),s.default.createElement(r.Modal.Body,null,s.default.createElement(l.Text,{tagName:"div"},s.default.createElement("p",null,d))),s.default.createElement(r.Modal.Footer,null,s.default.createElement(o.Button,{variant:"opacity",onClick:t},i.intl.formatMessage({id:"C9Q7mM",defaultMessage:"No, cancel"})),s.default.createElement(o.Button,{variant:"primary",onClick:a},i.intl.formatMessage({id:"MpxsRK",defaultMessage:"Yes, unlink"}))))},t.ConfirmUnlinkModal.displayName="ConfirmUnlinkModal"})),define("metaserver/static/js/account_page/widgets/account_preferences/subviews/saved_contacts_modal",["require","exports","tslib","react","metaserver/static/js/clean/ui/modal_dig","dig-components/typography","metaserver/static/js/core/i18n","metaserver/static/js/ux_analytics/utils","metaserver/static/js/clean/ux_analytics_modal_tracking","react-modal"],(function(e,t,a,s,n,r,o,l,i,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SavedContactsModal=void 0,s=a.__importDefault(s),(c=a.__importDefault(c)).default.setAppElement(document.body);t.SavedContactsModal=({isTeam:e,onAccept:t})=>{const a=o.intl.formatMessage({id:"nksSmj",defaultMessage:"Clear your manually added contacts?"}),c=o.intl.formatMessage({id:"cZ6jlq",defaultMessage:"Clear"}),d=o.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"}),u=o.intl.formatMessage({id:"ZZVC1L",defaultMessage:"What are manually added contacts?"});let m;return m=e?o.intl.formatMessage({id:"yR4pKK",defaultMessage:"You’ll still keep contacts who are on your team or who you imported. New contacts will be added when you share."}):o.intl.formatMessage({id:"2Qzpbt",defaultMessage:"You’ll still keep contacts you imported, and new contacts will be added when you share."}),s.default.createElement(n.Modal,{title:a,acceptButtonText:c,onShow:l.dispatchModalOpened,onAccept:t,dismissButtonText:d,onDismiss:l.dispatchModalClosed,helpLink:s.default.createElement("a",{className:"account-page__link",href:"https://www.dropbox.com/help/account/contacts#manual-add"},u)},s.default.createElement(i.UXAnalyticsModalTracking,{id:"saved-contacts-modal"}),s.default.createElement(r.Text,null,m))}})),define("metaserver/static/js/account_page/components/dropdown_block",["require","exports","tslib","react","metaserver/static/js/components/ui/css","metaserver/static/js/account_page/components/key_value_block","dig-components/buttons","dig-components/menu","styled-components","metaserver/static/js/account_page/responsive_account_page_context_provider"],(function(e,t,a,s,n,r,o,l,i,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DropdownBlock=void 0,s=a.__importDefault(s);const d=(0,(i=a.__importDefault(i)).default)(r.KeyValueBlock)`
  ${({isResponsiveDesignEnabled:e})=>e?"min-height: 72px;":"height: 72px;"}
  padding-left: var(--spacing__base_unit);
  padding-right: var(--spacing__base_unit);

  .account-dropdown-block__label {
    flex-grow: 1;
    display: flex;
    justify-content: center;
    flex-direction: column;
  }

  .account-dropdown-block__heading {
    font-size: var(--type__body__standard--fontsize);
    color: var(--color__standard__text);
  }

  .account-dropdown-block__subtext {
    font-size: var(--type__body__small--fontsize);
    color: var(--color__faint__text);
    margin-top: var(--spacing__unit--0_5);
  }

  .mc-menu-item-button {
    padding-left: var(--spacing__unit--2);
    padding-right: var(--spacing__unit--2);
  }
`;t.DropdownBlock=(0,n.requireCssWithComponent)(e=>{const t=s.default.useContext(c.AccountPageContext),{className:a,subLabel:n,label:r,onItemSelected:i,placeholder:u,selected:m,items:f}=e,_=["account-page-module","account-dropdown-block",a].join(" ");return s.default.createElement(d,{className:_,keyText:r,subtext:n,customControl:s.default.createElement(l.Menu.Wrapper,{onSelection:i},({getContentProps:e,getTriggerProps:t})=>s.default.createElement(s.default.Fragment,null,s.default.createElement(o.Button,Object.assign({},t(),{withDropdownIcon:!0,variant:"outline"}),m?f[m]:u),s.default.createElement(l.Menu.Content,Object.assign({},e()),s.default.createElement(l.Menu.Segment,null,(()=>{const e=[];for(const t in f){const a=parseInt(t,10);e.push(s.default.createElement(l.Menu.SelectItem,{key:a,value:a,selected:a===m},f[t]))}return e})())))),isResponsiveDesignEnabled:t&&(null==t?void 0:t.enableResponsiveAccountPage)})},["/static/metaserver/static/css/spectrum/index.web-vflJy4G-t.css"])})),define("metaserver/static/js/account_page/tabs/general",["require","exports","tslib","react","metaserver/static/js/account_page/account_page_helpers","metaserver/static/js/clean/viewer","metaserver/static/js/clean/active_user","metaserver/static/js/account_page/widgets/account_preferences/account_preferences_view","metaserver/static/js/account_page/widgets/profile/profile_view","metaserver/static/js/account_page/widgets/delete_account/view","metaserver/static/js/account_page/widgets/plan/views/basic_plan_status","metaserver/static/js/account_page/widgets/company_info/company_info_view","metaserver/static/js/account_page/widgets/plusplus/view","styled-components","metaserver/static/js/growth/ui/basic_upsells/basic_plan_status_upsell","metaserver/static/js/growth/ui/basic_upsells/basic_upsell_messages"],(function(e,t,a,s,n,r,o,l,i,c,d,u,m,f,_,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialize_module=t.moduleInit=t.GeneralTab=void 0,s=a.__importStar(s);const p=(f=a.__importDefault(f)).default.div`
  .plan-status-section {
    display: flex;
    padding: 26px 0;
    border-bottom: 1px solid var(--color__standard__border);
  }

  .plan-status-section.has-no-border {
    border-bottom: none;
  }

  .plan-status-section__icon {
    width: 36px;
    margin: 6px var(--spacing__unit--2) auto var(--spacing__base_unit);
    height: 69px;
  }

  .plan-status-section__description {
    flex-grow: 1;
    color: var(--color__standard__text);
    font-size: var(--spacing__base_unit);
    line-height: 1.5em;
  }

  .plan-status-section__title {
    font-size: var(--type__title__small--fontsize);
    margin-bottom: 0;
  }

  .plan-status-section__link {
    margin-top: 6px;
  }

  .plan-status-section__upgrade_btn {
    flex-basis: 140px;
    text-align: right;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  .plan-status-section__infohead {
    background-color: var(--color__sapphire--5);
    padding: var(--spacing__unit--0_5) var(--spacing__base_unit);
    color: var(--color_sapphire_100);
    font-weight: var(--type__body__small--fontweight_strong);
    font-size: var(--type__body__small--fontsize);
    line-height: var(--type__body__small--lineheight);
    text-transform: uppercase;
    display: inline-block;
    margin-top: 30px;
  }

  #change-company-name-modal {
    .db-modal {
      width: 425px;

      .text-input {
        width: 100%;
      }
    }
  }

  #change-company-role-modal {
    .db-modal {
      width: 425px;

      .text-input {
        width: 100%;
      }
    }
  }

  .change-email-inputs {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
`,{pageIsInteractive:E}=(0,n.TtiLogger)();t.GeneralTab=e=>{var t;const{dwsPrefetchResponse:{data:a}={},showCompanyInfoFields:n,isFamilyUser:f}=e,v=(0,o.mustGetActiveUser)(),M=r.Viewer.get_viewer(),[y]=(0,s.useState)(((e,t)=>!(!e||e.paid||!t||!t.personal_user||t.is_paired))(v,M));let b;(0,s.useEffect)(()=>{!!((null==a?void 0:a.profileExtras)&&(null==a?void 0:a.accountPreferences)&&(null==a?void 0:a.userCompanyInfo))&&E()},[a]);const h=null===(t=null==a?void 0:a.profileExtras)||void 0===t?void 0:t.profileExtras.recommended_plan;return y&&h&&_.SUPPORTED_PLANS.includes(h)?b=s.default.createElement(_.BasicPlanStatusUpsellWithCss,{recommendedPlan:h,loggingLocation:g.BasicUpsellLoggingLocation.GENERAL_TAB,tagToUpsellInfo:g.GENERAL_TAB_TAG_TO_UPSELL_INFO}):y&&(b=s.default.createElement(d.BasicPlanStatusSection,Object.assign({},e))),s.default.createElement(p,{className:"account-page-tab"},b,a&&s.default.createElement(s.default.Fragment,null,s.default.createElement(i.Profile,Object.assign({},a.profileExtras,{user:v,viewer:M})),n&&s.default.createElement(u.UserCompanyInfo,{user:v,userCompanyInfo:a.userCompanyInfo}),s.default.createElement(l.AccountPreferences,{user:v,viewer:M,accountPreferences:null==a?void 0:a.accountPreferences,profileExtras:null==a?void 0:a.profileExtras}),s.default.createElement(m.PlusPlusFeatures,Object.assign({},e,{user:v,accountPreferences:null==a?void 0:a.accountPreferences})),!f&&s.default.createElement(c.DeleteAccountRow,{user:v})))},t.GeneralTab.displayName="GeneralTab",t.moduleInit=function(e){},t.initialize_module=function(e){}})),define("metaserver/static/js/account_page/widgets/account_preferences/api",["require","exports","metaserver/static/js/api_v2/user_client","metaserver/static/js/deprecated_ajax/ajax_as_promised_jquery"],(function(e,t,a,s){"use strict";function n(e,t,a){return(0,s.WebRequest)({url:"/account/set_user_related_preference",subject_user:e,dataType:"json",data:{preference_key:t,preference_value:a}})}Object.defineProperty(t,"__esModule",{value:!0}),t.clearContacts=t.updateUserRelatedPreference=t.updateTimezoneId=t.updateDatetimeId=t.getBundledUserRelatedPreferences=void 0,t.getBundledUserRelatedPreferences=function(e){return(0,s.WebRequest)({url:"/account/get_bundled_user_related_preferences",subject_user:e,dataType:"json"})},t.updateDatetimeId=function(e,t){return n(e,"dateformat_id",t)},t.updateTimezoneId=function(e,t){return n(e,"timezone_id",t)},t.updateUserRelatedPreference=n;t.clearContacts=e=>(new a.UserApiV2Client).ns("contacts").rpc("delete_manual_contacts",void 0,{subjectUserId:e})})),define("metaserver/static/js/account_page/widgets/account_preferences/account_preferences_view",["require","exports","tslib","react","metaserver/static/js/core/i18n","metaserver/static/js/account_page/widgets/account_preferences/subviews/language_preferences","metaserver/static/js/account_page/widgets/account_preferences/subviews/date_format_preferences","metaserver/static/js/account_page/widgets/account_preferences/subviews/timezone_preferences","metaserver/static/js/account_page/widgets/account_preferences/subviews/early_access_preferences","metaserver/static/js/account_page/widgets/account_preferences/subviews/pass_policy_preferences","metaserver/static/js/account_page/widgets/account_preferences/subviews/manual_contacts","metaserver/static/js/account_page/widgets/account_preferences/subviews/system_extension_preferences","metaserver/static/js/account_page/widgets/account_preferences/subviews/smart_sync_preference","metaserver/static/js/account_page/widgets/account_preferences/subviews/content_inherit_permission_default","metaserver/static/js/account_page/widgets/account_preferences/subviews/enable_default_browser_context_menu_preferences","dig-components/typography","metaserver/static/js/clean/active_user","metaserver/static/js/account_page/components/loading","metaserver/static/js/account_page/widgets/account_preferences/utils","metaserver/static/js/activation/data/selectors","react-redux"],(function(e,t,a,s,n,r,o,l,i,c,d,u,m,f,_,g,p,E,v,M,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccountPreferences=void 0,s=a.__importDefault(s);t.AccountPreferences=e=>{const{accountPreferences:t}=e;let a=e.user;a||(a=(0,p.mustGetActiveUser)());const b=(0,v.useAccountPreferencesData)(t,a),h=(0,y.useSelector)(M.isValidEnhancedRightClickVariant);return s.default.createElement("div",{className:"account-page-block account-page-block--general account-page-block--preferences"},s.default.createElement("div",{className:"account-page-header"},s.default.createElement(g.Title,{size:"small",isBold:!0},n.intl.formatMessage({id:"nf00nr",defaultMessage:"Preferences"}))),!b&&s.default.createElement(E.Loading,null),b&&s.default.createElement(s.default.Fragment,null,s.default.createElement(r.LanguagePreferences,{user:a,preferences:b}),s.default.createElement(o.DateFormatPreferences,{user:a,preferences:b}),s.default.createElement(l.TimezonePreferences,{user:a,preferences:b}),s.default.createElement(i.EarlyAccessPreferences,{user:a,preferences:b}),s.default.createElement(c.PassPolicyPreferences,{user:a,preferences:b}),s.default.createElement(d.ManualContacts,{user:a,preferences:b}),s.default.createElement(f.ContentInheritPermissionByDefault,{user:a,preferences:b}),b.team_admin_settings&&s.default.createElement(u.SystemExtensionPreferences,{user:a,preferences:b}),s.default.createElement(m.SmartSyncPreferences,{user:a,preferences:b}),h&&s.default.createElement(_.EnableDefaultBrowserContextMenuPreferences,{user:a,preferences:b})))}})),define("metaserver/static/js/account_page/widgets/account_preferences/subviews/content_inherit_permission_default",["require","exports","tslib","react","metaserver/static/js/core/i18n","metaserver/static/js/account_page/components/toggle_block","metaserver/static/js/sharing/default_permissions_web_uploads/utils","metaserver/static/js/core/notify","metaserver/static/js/clean/analytics","metaserver/static/js/growth/ui/teams_web_actions_logger_events"],(function(e,t,a,s,n,r,o,l,i,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContentInheritPermissionByDefault=void 0,s=a.__importStar(s);t.ContentInheritPermissionByDefault=e=>{const{preferences:t,user:d}=e,u=t.folder_upload_prefs,[m,f]=(0,s.useState)(u.default_permission_for_folder_uploads===o.DefaultPermissionForFolderUploadsOptions.INHERIT);return s.default.createElement(r.ToggleBlock,{label:n.intl.formatMessage({id:"87EbeF",defaultMessage:"Default access to folder uploads"}),subLabel:n.intl.formatMessage({id:"bvBZ2v",defaultMessage:"New folders you upload are accessible to everyone with access to the upload location."}),isOn:m,onToggle:e=>a.__awaiter(void 0,void 0,void 0,(function*(){const t=e?o.DefaultPermissionForFolderUploadsOptions.INHERIT:o.DefaultPermissionForFolderUploadsOptions.NOT_INHERIT,a=n.intl.formatMessage({id:"A8Bq76",defaultMessage:"Default access to folder uploads is {pref, select, true {on} false {off}}."},{pref:e});try{yield(0,o.setDefaultPermissionForFolderUploads)(t,d.id),f(e),l.Notify.success(a),i.TeamsWebActionsLogger.log(c.DefaultPermissionsWebUploadsEvents.ACCOUNT_PREF_DEFAULT_PERMISSION_TOGGLE,{toggle_to_on:e})}catch(e){l.Notify.error(n.intl.formatMessage({id:"wfJMlq",defaultMessage:"There was an error completing this request."}))}})),ariaIdBase:"default-access"})},t.ContentInheritPermissionByDefault.displayName="ContentInheritPermissionByDefault"})),define("metaserver/static/js/account_page/widgets/account_preferences/subviews/early_access_preferences",["require","exports","tslib","react","classnames","metaserver/static/js/core/i18n","metaserver/static/js/account_page/components/toggle_block","metaserver/static/js/core/notify","metaserver/static/js/clean/analytics","metaserver/static/js/account_page/widgets/account_preferences/api","dig-components/buttons","metaserver/static/js/core/browser","styled-components","metaserver/static/js/account_page/pap_logging","metaserver/static/js/account_page/widgets/account_preferences/subviews/account_toggle_block.module.css","metaserver/static/js/account_page/responsive_account_page_context_provider"],(function(e,t,a,s,n,r,o,l,i,c,d,u,m,f,_,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EarlyAccessPreferences=void 0,s=a.__importStar(s),n=a.__importDefault(n),u=a.__importStar(u),m=a.__importDefault(m),_=a.__importDefault(_);const p=(0,m.default)(d.Button)`
  font-size: inherit !important;
  color: inherit !important;
`;t.EarlyAccessPreferences=e=>{const{preferences:t,user:d}=e,m=t.user_related_prefs.early_release_opt_in,[E,v]=(0,s.useState)(m),M=s.default.useContext(g.AccountPageContext);if(void 0===m)return null;const y=()=>{u.open_tab("/help/business/alpha-beta-product")},b=r.intl.formatMessage({id:"xuKK76",defaultMessage:"Get included on early releases for new Dropbox features. Early release features are subject to <a>these additional terms</a>."},{a:e=>s.default.createElement(p,{variant:"transparent",onClick:y},e)}),h=(0,n.default)("account-preference-early-releases",M&&M.enableResponsiveAccountPage?_.default.accountToggleBlockResponsive:_.default.accountToggleBlock);return s.default.createElement(o.ToggleBlock,{label:r.intl.formatMessage({id:"Y4z5Mh",defaultMessage:"Early releases"}),subLabel:b,className:h,isOn:E,onToggle:e=>a.__awaiter(void 0,void 0,void 0,(function*(){try{yield(0,c.updateUserRelatedPreference)(d.id,"early_release_opt_in",e),l.Notify.success(r.intl.formatMessage({id:"/nHstd",defaultMessage:"Preference updated."})),i.UserActivityLogger.log("web","de_account_general_prefs_early_release_opt_in_toggled",{is_on:e}),(0,f.logSelectAccountPreference)(f.AccountGeneralPreference.EARLY_RELEASE_OPT_IN_ACCOUNT_PREFERENCE_NAME,e),v(e)}catch(e){l.Notify.error(r.intl.formatMessage({id:"wfJMlq",defaultMessage:"There was an error completing this request."}))}})),ariaIdBase:"early-access"})}})),define("metaserver/static/js/account_page/widgets/account_preferences/subviews/date_format_preferences",["require","exports","tslib","react","metaserver/static/js/core/i18n","metaserver/static/js/account_page/components/dropdown_block","metaserver/static/js/core/notify","metaserver/static/js/clean/analytics","metaserver/static/js/account_page/widgets/account_preferences/api","metaserver/static/js/account_page/pap_logging"],(function(e,t,a,s,n,r,o,l,i,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateFormatPreferences=void 0,s=a.__importStar(s);t.DateFormatPreferences=e=>{const{preferences:t,user:d}=e,[u]=(0,s.useState)(t.dateformat_prefs),[m,f]=(0,s.useState)(t.dateformat_prefs.selected_dateformat);return s.default.createElement(r.DropdownBlock,{label:n.intl.formatMessage({id:"lO6IaQ",defaultMessage:"Date format"}),selected:m,items:u.dateformats,onItemSelected:e=>a.__awaiter(void 0,void 0,void 0,(function*(){try{yield(0,i.updateDatetimeId)(d.id,e),o.Notify.success(n.intl.formatMessage({id:"uIrB8j",defaultMessage:"Date format updated."})),l.UserActivityLogger.log("web","de_account_general_prefs_datetime_changed",{format:e}),(0,c.logSelectAccountPreference)(c.AccountGeneralPreference.DATETIME_ACCOUNT_PREFERENCE_NAME),t.dateformat_prefs.selected_dateformat=e,f(e)}catch(e){o.Notify.error(n.intl.formatMessage({id:"wfJMlq",defaultMessage:"There was an error completing this request."}))}}))})}})),define("metaserver/static/js/account_page/widgets/account_preferences/subviews/language_preferences",["require","exports","tslib","react","metaserver/static/js/core/i18n","metaserver/static/js/account_page/components/key_value_block","metaserver/static/js/clean/analytics","metaserver/static/js/account_page/pap_logging"],(function(e,t,a,s,n,r,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LanguagePreferences=void 0,s=a.__importDefault(s);t.LanguagePreferences=t=>{const{preferences:i}=t;return s.default.createElement(r.KeyValueBlock,{keyText:n.intl.formatMessage({id:"ibhqsO",defaultMessage:"Language"}),valueText:i.locale_prefs.current_locale_name,linkText:n.intl.formatMessage({id:"UwFkjc",defaultMessage:"Edit"}),ariaPrimaryButtonLabel:n.intl.formatMessage({id:"EIQpcq",defaultMessage:"Edit language"}),onLinkClick:()=>{new Promise((t,a)=>{e(["metaserver/static/js/clean/ui/locale_selector"],t,a)}).then(a.__importStar).then(e=>{e.LocaleSelector.showModal()}),o.UserActivityLogger.log("web","de_account_general_prefs_language_clicked"),(0,l.logSelectAccountPreference)(l.AccountGeneralPreference.LANGUAGE_ACCOUNT_PREFERENCE_NAME)},className:"locale-selector-block"})}})),define("metaserver/static/js/account_page/widgets/account_preferences/subviews/manual_contacts",["require","exports","tslib","react","classnames","metaserver/static/js/account_page/widgets/account_preferences/subviews/saved_contacts_modal","metaserver/static/js/account_page/components/button_block","metaserver/static/js/account_page/widgets/account_preferences/api","metaserver/static/js/components/ui/modal_controller","metaserver/static/js/core/i18n","metaserver/static/js/core/notify","metaserver/static/js/account_page/responsive_account_page_context_provider","metaserver/static/js/account_page/widgets/account_preferences/subviews/account_toggle_block.module.css"],(function(e,t,a,s,n,r,o,l,i,c,d,u,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ManualContacts=void 0,s=a.__importStar(s),n=a.__importDefault(n),i=a.__importStar(i),m=a.__importDefault(m);t.ManualContacts=e=>{const{preferences:t,user:f}=e,[_,g]=(0,s.useState)(t.saved_contacts_prefs.saved_contacts_count),p=s.default.useContext(u.AccountPageContext),E=()=>a.__awaiter(void 0,void 0,void 0,(function*(){try{yield(0,l.clearContacts)(f.id),g(0),t.saved_contacts_prefs.saved_contacts_count=0,d.Notify.success(c.intl.formatMessage({id:"PoY43K",defaultMessage:"Manually added contacts cleared."}))}catch(e){d.Notify.error(c.intl.formatMessage({id:"u/gT4q",defaultMessage:"Couldn’t clear manually added contacts. Try again."}))}})),v=(0,n.default)("account-preference-manually-added-contacts",p&&p.enableResponsiveAccountPage?m.default.accountToggleBlockResponsive:m.default.accountToggleBlock);return s.default.createElement(o.ButtonBlock,{className:v,label:c.intl.formatMessage({id:"QOI9ju",defaultMessage:"Manually added contacts"}),buttonText:c.intl.formatMessage({id:"cZ6jlq",defaultMessage:"Clear"}),ariaButtonLabel:c.intl.formatMessage({id:"+8/A3B",defaultMessage:"Clear manually added contacts"}),kind:"transparent",buttonAction:{kind:"function",handler:()=>i.mountModal(s.default.createElement(r.SavedContactsModal,{isTeam:t.saved_contacts_prefs.is_team,onAccept:E}))},tooltipText:c.intl.formatMessage({id:"h9EcHm",defaultMessage:"{count, plural, one{{count} manually added contact} other{{count} manually added contacts}}"},{count:_}),ariaTooltipLabel:c.intl.formatMessage({id:"TqQreT",defaultMessage:"More information about manually added contacts"})})}})),define("metaserver/static/js/account_page/widgets/account_preferences/subviews/pass_policy_preferences",["require","exports","tslib","react","metaserver/static/js/core/i18n","metaserver/static/js/account_page/components/toggle_block","metaserver/static/js/core/notify","metaserver/static/js/clean/analytics","metaserver/static/js/account_page/widgets/account_preferences/api","dig-components/buttons","metaserver/static/js/core/browser","styled-components","metaserver/static/js/account_page/pap_logging"],(function(e,t,a,s,n,r,o,l,i,c,d,u,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PassPolicyPreferences=void 0,s=a.__importStar(s),d=a.__importStar(d);const f=(0,(u=a.__importDefault(u)).default)(c.Button)`
  font-size: inherit !important;
  color: inherit !important;
  &&:hover {
    text-decoration: none;
  }
`;t.PassPolicyPreferences=e=>{const{preferences:t,user:c}=e,u=t.user_related_prefs.pass_policy,[_,g]=(0,s.useState)(!!u);if(void 0===u)return null;const p=()=>{d.open_tab("/help/files-folders/share/viewer-information")},E=n.intl.formatMessage({id:"szYHfI",defaultMessage:"<a>More about viewer info</a>"},{a:e=>s.default.createElement(f,{variant:"transparent",onClick:p},e)}),v={onText:n.intl.formatMessage({id:"fNnn8m",defaultMessage:"On by default"}),offText:n.intl.formatMessage({id:"kYZMk+",defaultMessage:"Off by default"})};return s.default.createElement(r.ToggleBlock,{label:n.intl.formatMessage({id:"FZC8rP",defaultMessage:"See info about people who view my files"}),subLabel:E,className:"account-preference-pass-policy",isOn:_,onToggle:e=>a.__awaiter(void 0,void 0,void 0,(function*(){try{yield(0,i.updateUserRelatedPreference)(c.id,"pass_policy",e),o.Notify.success(n.intl.formatMessage({id:"/nHstd",defaultMessage:"Preference updated."})),l.UserActivityLogger.log("web","de_account_general_prefs_pass_policy_toggled",{is_on:e}),(0,m.logSelectAccountPreference)(m.AccountGeneralPreference.PASS_POLICY_ACCOUNT_PREFERENCE_NAME,e),g(e)}catch(e){o.Notify.error(n.intl.formatMessage({id:"wfJMlq",defaultMessage:"There was an error completing this request."}))}})),customStatusDescription:v,ariaIdBase:"pass-policy"})}})),define("metaserver/static/js/account_page/widgets/account_preferences/subviews/smart_sync_preference",["require","exports","tslib","react","classnames","metaserver/static/js/core/i18n","metaserver/static/js/account_page/components/toggle_block","metaserver/static/js/core/notify","metaserver/static/js/clean/analytics","metaserver/static/js/account_page/widgets/account_preferences/api","dig-components/modal","dig-components/typography","dig-components/buttons","metaserver/static/js/core/browser","metaserver/static/js/account_page/pap_logging","metaserver/static/js/account_page/responsive_account_page_context_provider","metaserver/static/js/account_page/widgets/account_preferences/subviews/account_toggle_block.module.css"],(function(e,t,a,s,n,r,o,l,i,c,d,u,m,f,_,g,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmartSyncPreferences=void 0,s=a.__importStar(s),n=a.__importDefault(n),f=a.__importStar(f),p=a.__importDefault(p);t.SmartSyncPreferences=e=>{const t="zero_size_placeholder",{preferences:E,user:v}=e,M=E.user_related_prefs[t],[y,b]=(0,s.useState)(!!M),[h,w]=(0,s.useState)(!1),S=s.default.useContext(g.AccountPageContext);if(void 0===M)return null;const T=()=>{w(!1)},C=(0,n.default)("account-preference-zero-size-placeholder",S&&S.enableResponsiveAccountPage?p.default.accountToggleBlockResponsive:p.default.accountToggleBlock);return s.default.createElement(s.default.Fragment,null,s.default.createElement(o.ToggleBlock,{label:r.intl.formatMessage({id:"9fiFzD",defaultMessage:"Online-only files on Mac"}),subLabel:r.intl.formatMessage({id:"9S4Wr1",defaultMessage:"This displays online-only file sizes in Mac Finder as zero bytes so you can easily review which files are taking up hard drive space."}),className:C,isOn:y,onToggle:e=>a.__awaiter(void 0,void 0,void 0,(function*(){w(!0)})),ariaIdBase:"smart-sync"}),h&&s.default.createElement(d.Modal,{className:"smart-sync-modal",open:!!h,withCloseButton:"Close",onRequestClose:T},s.default.createElement(d.Modal.Header,{hasBottomSpacing:"title-standard"},s.default.createElement(u.Title,null,!y&&r.intl.formatMessage({id:"6vbbsJ",defaultMessage:"Display online-only files as zero bytes?"}),y&&r.intl.formatMessage({id:"+Gmx9l",defaultMessage:"Display online-only file sizes?"}))),s.default.createElement(d.Modal.Body,null,s.default.createElement(u.Text,{size:"standard",className:"zero-size-placeholder-modal__text"},y&&s.default.createElement(s.default.Fragment,null,r.intl.formatMessage({id:"TiPC5g",defaultMessage:"The full size of online-only files will be shown in Mac Finder."}),s.default.createElement("br",null),s.default.createElement("br",null),r.intl.formatMessage({id:"OUUFqP",defaultMessage:"If your file sizes don’t update after a few minutes, try restarting the Dropbox desktop app."})),!y&&s.default.createElement(s.default.Fragment,null,r.intl.formatMessage({id:"3XBYEe",defaultMessage:"Online-only files in Mac Finder will no longer appear to take up hard drive space."}),s.default.createElement("br",null),s.default.createElement("br",null),r.intl.formatMessage({id:"a6QM/W",defaultMessage:"If your file sizes don’t update after a few minutes, try restarting the Dropbox desktop app."})))),s.default.createElement(d.Modal.Footer,null,s.default.createElement(m.Button,{className:"zero-size-placeholder-modal-learn-more",variant:"transparent",onClick:()=>{f.open_tab("/help/accounts-billing/space-storage/low-disk-space")}},r.intl.formatMessage({id:"iGHkCL",defaultMessage:"Learn more"})),s.default.createElement(m.Button,{variant:"opacity",onClick:T,"data-trackingid":"zero-size-placeholder-dismiss"},r.intl.formatMessage({id:"57WYiJ",defaultMessage:"Cancel"})),s.default.createElement(m.Button,{"data-trackingid":"szero-size-placeholder-accept",variant:"primary",onClick:()=>a.__awaiter(void 0,void 0,void 0,(function*(){var e;yield(e=!y,a.__awaiter(void 0,void 0,void 0,(function*(){try{yield(0,c.updateUserRelatedPreference)(v.id,t,e),l.Notify.success(r.intl.formatMessage({id:"wEYWOg",defaultMessage:"Preference updated."})),i.UserActivityLogger.log("web",`de_account_general_prefs_${t}_toggled`,{is_on:e}),(0,_.logSelectAccountPreference)(_.AccountGeneralPreference.ZERO_SIZE_PLACEHOLDER_ACCOUNT_PREFERENCE_NAME,e)}catch(e){l.Notify.error(r.intl.formatMessage({id:"9NijeN",defaultMessage:"There was an error completing this request."}))}b(e)}))),w(!1)}))},r.intl.formatMessage({id:"EwC13Y",defaultMessage:"Update"})))))}})),define("metaserver/static/js/account_page/widgets/account_preferences/subviews/system_extension_preferences",["require","exports","tslib","react","metaserver/static/js/core/i18n","metaserver/static/js/account_page/components/toggle_block","metaserver/static/js/core/notify","metaserver/static/js/clean/analytics","metaserver/static/js/account_page/widgets/account_preferences/api","dig-components/modal","dig-components/typography","dig-components/buttons","metaserver/static/js/core/browser","metaserver/static/js/account_page/pap_logging"],(function(e,t,a,s,n,r,o,l,i,c,d,u,m,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemExtensionPreferences=void 0,s=a.__importStar(s),m=a.__importStar(m);t.SystemExtensionPreferences=e=>{const t="infinite_hard_optout",{preferences:_,user:g}=e;let p=_.user_related_prefs[t];const E=_.team_admin_settings[t],[v]=(0,s.useState)(E),[M,y]=(0,s.useState)(!!p),[b,h]=(0,s.useState)(!1);if(void 0===p)return null;v&&(p=E);const w={onText:"",offText:n.intl.formatMessage({id:"T62fdR",defaultMessage:"Disabled by your admin"})},S=e=>a.__awaiter(void 0,void 0,void 0,(function*(){try{yield(0,i.updateUserRelatedPreference)(g.id,t,e),e?o.Notify.success(n.intl.formatMessage({id:"mLJSvk",defaultMessage:"System extension is removed."})):o.Notify.success(n.intl.formatMessage({id:"jwBs1R",defaultMessage:"System extension installed."})),l.UserActivityLogger.log("web",`de_account_general_prefs_${t}_toggled`,{is_on:e}),(0,f.logSelectAccountPreference)(f.AccountGeneralPreference.INFINITE_HARD_OPTOUT_ACCOUNT_PREFERENCE_NAME,e)}catch(e){o.Notify.error(n.intl.formatMessage({id:"9NijeN",defaultMessage:"There was an error completing this request."}))}y(e)})),T=()=>{h(!1)};return s.default.createElement(s.default.Fragment,null,s.default.createElement(r.ToggleBlock,{label:n.intl.formatMessage({id:"05Iwib",defaultMessage:"Dropbox system extension"}),subLabel:n.intl.formatMessage({id:"PW60gd",defaultMessage:"Allows Dropbox to store files as online-only to save hard drive space."}),isDisabled:v,className:"infinite-hard-optout-toggle",isOn:!M,onToggle:e=>a.__awaiter(void 0,void 0,void 0,(function*(){e?yield S(!1):h(!0)})),customStatusDescription:v?w:void 0,ariaIdBase:"system-extension"}),b&&s.default.createElement(c.Modal,{className:"smart-sync-modal",open:b,withCloseButton:"Close",onRequestClose:T},s.default.createElement(c.Modal.Header,{hasBottomSpacing:"title-standard"},s.default.createElement(d.Title,null," ",n.intl.formatMessage({id:"PF7JDz",defaultMessage:"Remove Dropbox system extension?"})," ")),s.default.createElement(c.Modal.Body,null,s.default.createElement(d.Text,{size:"standard",className:"smart-sync-modal__text"},n.intl.formatMessage({id:"pBbJBK",defaultMessage:"The system extension will be uninstalled and you’ll be signed out of Dropbox on all devices within the hour. When you sign back in, you can choose what folders to download from Dropbox.com. You will no longer be able to make files online-only."}))),s.default.createElement(c.Modal.Footer,null,s.default.createElement(u.Button,{className:"smart-sync-modal__learn-more",variant:"transparent",onClick:()=>{m.open_tab("/help/desktop-web/filesystem-integration")}},n.intl.formatMessage({id:"iGHkCL",defaultMessage:"Learn more"})),s.default.createElement(u.Button,{variant:"opacity",onClick:T,"data-trackingid":"smart-sync-hard-optout-dismiss"},n.intl.formatMessage({id:"57WYiJ",defaultMessage:"Cancel"})),s.default.createElement(u.Button,{"data-trackingid":"smart-sync-hard-optout-accept",variant:"primary",onClick:()=>a.__awaiter(void 0,void 0,void 0,(function*(){yield S(!0),h(!1)}))},n.intl.formatMessage({id:"EFBk/N",defaultMessage:"Remove"})))))}})),define("metaserver/static/js/account_page/widgets/account_preferences/subviews/timezone_preferences",["require","exports","tslib","react","styled-components","metaserver/static/js/core/i18n","metaserver/static/js/account_page/components/toggle_block","metaserver/static/js/core/notify","metaserver/static/js/clean/analytics","metaserver/static/js/account_page/widgets/account_preferences/api","dig-components/menu","dig-components/buttons"],(function(e,t,a,s,n,r,o,l,i,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimezonePreferences=void 0,s=a.__importStar(s);const m=(n=a.__importDefault(n)).default.div`
  margin-bottom: var(--spacing__unit--3);
  background-color: var(--color__black--5);
  border: 1px solid var(--color__standard__border);
  height: 56px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 var(--spacing__unit--2);
  .country {
    margin-right: var(--spacing__unit--2);
  }
`,f=n.default.span`
  flex-grow: 1;
`,_=(0,n.default)(d.Menu.Segment)`
  max-height: 200px;
  overflow: auto;
`,g=(e,t)=>e.timezone_to_country.filter(e=>t===e[0])[0];t.TimezonePreferences=e=>{const{preferences:t,user:n}=e,[p]=(0,s.useState)(t.timezone_prefs),[E,v]=(0,s.useState)(p.selected_timezone),[M,y]=(0,s.useState)(!0),[b]=(0,s.useState)(p.default_timezone_country),[h,w]=(0,s.useState)(""),[S,T]=(0,s.useState)(),[C,A]=(0,s.useState)();(0,s.useEffect)(()=>{if(0!==E){const e=((e,t)=>{for(const a of e.timezone_to_country){if(1===a[1].filter(e=>e.id===t).length)return a}return g(e,e.default_timezone_country)})(p,E);w(e[0]),T(e[1].filter(e=>e.id===E)[0]),A(e[1])}y(0===E)},[E,p]);const R=()=>{l.Notify.success(r.intl.formatMessage({id:"u0FIpm",defaultMessage:"Updated time zone."}))},N=()=>{l.Notify.error(r.intl.formatMessage({id:"wfJMlq",defaultMessage:"There was an error completing this request."}))};return s.default.createElement(s.default.Fragment,null,s.default.createElement(o.ToggleBlock,{label:r.intl.formatMessage({id:"r2uRtk",defaultMessage:"Automatic time zone"}),className:"account-preference-timezone",detail:!!M&&p.timezone_offset,isOn:M,onToggle:e=>a.__awaiter(void 0,void 0,void 0,(function*(){const t=g(p,b)[1][0].id,a=e?0:t;try{yield(0,c.updateTimezoneId)(n.id,a),R(),v(a),i.UserActivityLogger.log("web","de_account_general_prefs_timezone_toggled",{is_on:e})}catch(e){N()}})),ariaIdBase:"time-zone"}),!M&&s.default.createElement(m,null,s.default.createElement(f,null,r.intl.formatMessage({id:"tA1A/A",defaultMessage:"Set timezone"})),s.default.createElement(d.Menu.Wrapper,{className:"country",onSelection:e=>a.__awaiter(void 0,void 0,void 0,(function*(){const t=g(p,e)[1][0].id;try{yield(0,c.updateTimezoneId)(n.id,t),R(),v(t),i.UserActivityLogger.log("web","de_account_general_prefs_timezone_country_changed",{country:e})}catch(e){N()}}))},({getContentProps:e,getTriggerProps:t})=>s.default.createElement(s.default.Fragment,null,s.default.createElement(u.Button,Object.assign({},t(),{withDropdownIcon:!0,variant:"outline"}),h),s.default.createElement(d.Menu.Content,Object.assign({},e()),s.default.createElement(_,null,p.timezone_to_country.map((e,t)=>{const a=e[0],n={value:a,selected:a===h};return s.default.createElement(d.Menu.SelectItem,Object.assign({key:a},n),a)}))))),s.default.createElement(d.Menu.Wrapper,{onSelection:e=>a.__awaiter(void 0,void 0,void 0,(function*(){try{yield(0,c.updateTimezoneId)(n.id,e),R(),v(e),i.UserActivityLogger.log("web","de_account_general_prefs_timezone_id_changed",{tz_id:e})}catch(e){N()}}))},({getContentProps:e,getTriggerProps:t})=>s.default.createElement(s.default.Fragment,null,s.default.createElement(u.Button,Object.assign({},t(),{withDropdownIcon:!0,variant:"outline"}),null==S?void 0:S.name),s.default.createElement(d.Menu.Content,Object.assign({},e()),s.default.createElement(d.Menu.Segment,null,null==C?void 0:C.map(e=>{const t={value:e.id,selected:e.id===E};return s.default.createElement(d.Menu.SelectItem,Object.assign({key:e.id},t),e.name)})))))))}})),define("metaserver/static/js/account_page/widgets/account_preferences/subviews/enable_default_browser_context_menu_preferences",["require","exports","tslib","react","classnames","metaserver/static/js/core/i18n","metaserver/static/js/account_page/components/toggle_block","metaserver/static/js/core/notify","metaserver/static/js/account_page/widgets/account_preferences/api","metaserver/static/js/account_page/widgets/account_preferences/subviews/account_toggle_block.module.css","metaserver/static/js/account_page/responsive_account_page_context_provider"],(function(e,t,a,s,n,r,o,l,i,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnableDefaultBrowserContextMenuPreferences=void 0,s=a.__importStar(s),n=a.__importDefault(n),c=a.__importDefault(c);t.EnableDefaultBrowserContextMenuPreferences=e=>{var t;const{preferences:u,user:m}=e,f=null!==(t=u.user_related_prefs.enable_default_browser_context_menu)&&void 0!==t&&t,[_,g]=(0,s.useState)(Boolean(f)),p=s.default.useContext(d.AccountPageContext);if(void 0===f)return null;const E=(0,n.default)("account-preference-default-menu",p&&p.enableResponsiveAccountPage?c.default.accountToggleBlockResponsive:c.default.accountToggleBlock);return s.default.createElement(o.ToggleBlock,{label:r.intl.formatMessage({id:"yWB0S+",defaultMessage:"Default browser context menu"}),subLabel:r.intl.formatMessage({id:"l6g+Zz",defaultMessage:"Enable the default browser context menu on right mouse button click"}),className:E,isOn:_,onToggle:e=>a.__awaiter(void 0,void 0,void 0,(function*(){try{yield(0,i.updateUserRelatedPreference)(m.id,"enable_default_browser_context_menu",e),l.Notify.success(r.intl.formatMessage({id:"0Rqr6Q",defaultMessage:"Preference updated."})),g(e)}catch(e){l.Notify.error(r.intl.formatMessage({id:"NVVrAz",defaultMessage:"There was an error completing this request."}))}})),ariaIdBase:"default-browser-menu"})},t.EnableDefaultBrowserContextMenuPreferences.displayName="EnableDefaultBrowserContextMenuPreferences"})),define("metaserver/static/js/account_page/widgets/delete_account/view",["require","exports","tslib","metaserver/static/js/core/browser","react","metaserver/static/js/account_page/components/button_block","metaserver/static/js/clean/analytics","metaserver/static/js/clean/viewer","metaserver/static/js/core/i18n","dig-components/typography"],(function(e,t,a,s,n,r,o,l,i,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteAccountRow=void 0,s=a.__importStar(s),n=a.__importDefault(n);t.DeleteAccountRow=e=>{const{user:t}=e,a=()=>{o.UserActivityLogger.log("web","de_account_general_delete_clicked"),s.redirect("/account/delete")};if("work"===t.role)return null;{const e=l.Viewer.get_viewer().is_paired?i.intl.formatMessage({id:"bu+08H",defaultMessage:"Delete personal Dropbox account"}):i.intl.formatMessage({id:"KqmXy0",defaultMessage:"Delete my Dropbox"}),t=i.intl.formatMessage({id:"hINdXo",defaultMessage:"If you delete your account, your data will be gone forever."});return n.default.createElement("div",{className:"account-page-block account-page-block--general"},n.default.createElement("div",{className:"account-page-header"},n.default.createElement(c.Title,{size:"small",isBold:!0},i.intl.formatMessage({id:"F1PCBh",defaultMessage:"Delete account"}))),n.default.createElement(r.ButtonBlock,{label:e,subtext:t,buttonText:i.intl.formatMessage({id:"F1PCBh",defaultMessage:"Delete account"}),kind:"transparent",buttonAction:{kind:"function",handler:a},className:"delete-account-block"}))}}})),define("metaserver/static/js/account_page/widgets/company_info/api",["require","exports","metaserver/static/js/api_v2/user_client"],(function(e,t,a){"use strict";function s(e,t){return(new a.UserApiV2Client).ns("account").rpc("set_user_company_info",t,{subjectUserId:e})}function n(e,t){return(new a.UserApiV2Client).ns("account").rpc("delete_user_company_info",{company_info_keys:[t]},{subjectUserId:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.deleteUserCompanyInfo=t.updateUserCompanyInfo=t.updateCompanySizeId=t.updateCompanyRole=t.updateCompanyName=t.getUserCompanyInfo=void 0,t.getUserCompanyInfo=function(e){return(new a.UserApiV2Client).ns("account").rpc("get_user_company_info",void 0,{subjectUserId:e})},t.updateCompanyName=function(e,t){return""===t?n(e,"company_name"):s(e,{company_name:t})},t.updateCompanyRole=function(e,t){return""===t?n(e,"company_role"):s(e,{company_role:t})},t.updateCompanySizeId=function(e,t){return s(e,{company_size_id:Number(t)})},t.updateUserCompanyInfo=s,t.deleteUserCompanyInfo=n})),define("metaserver/static/js/account_page/widgets/company_info/company_info_view",["require","exports","tslib","react","metaserver/static/js/core/i18n","metaserver/static/js/account_page/components/loading","metaserver/static/js/account_page/widgets/company_info/api","metaserver/static/js/account_page/components/info_tooltip","dig-components/typography","metaserver/static/js/account_page/widgets/company_info/subviews/company_name","metaserver/static/js/account_page/widgets/company_info/subviews/user_work_role","metaserver/static/js/account_page/widgets/company_info/subviews/company_size"],(function(e,t,a,s,n,r,o,l,i,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserCompanyInfo=void 0,s=a.__importStar(s);t.UserCompanyInfo=e=>{const{user:t,userCompanyInfo:m}=e;if(!m)return null;const{companyInfo:f={},loadingState:_}=m,{company_name:g,company_role:p,company_size_id:E}=f,[v,M]=(0,s.useState)(!1),[,y]=(0,s.useState)(g),[,b]=(0,s.useState)(p),[,h]=(0,s.useState)(E);(0,s.useEffect)(()=>{"ready"!==_&&a.__awaiter(void 0,void 0,void 0,(function*(){M(!0);const{company_name:e,company_size_id:a,company_role:s}=yield(0,o.getUserCompanyInfo)(t.id);y(e),b(s),h(a),f.company_name=e,f.company_size_id=a,f.company_role=s,M(!1)}))},[]);const w=n.intl.formatMessage({id:"SSL+1C",defaultMessage:"Info about where you work"});return v?s.default.createElement("div",{className:"account-page-block account-page-block--general"},s.default.createElement("div",{className:"account-page-header"},s.default.createElement(i.Title,{size:"small",isBold:!0}," ",w," "),s.default.createElement(r.Loading,null))):s.default.createElement("div",{className:"account-page-block account-page-block--general account-page-block--company_info"},s.default.createElement("div",{className:"account-page-header"},s.default.createElement(l.InfoTooltip,{prompt:s.default.createElement(i.Title,{size:"small",isBold:!0}," ",w," "),content:n.intl.formatMessage({id:"GuFukq",defaultMessage:"This info helps us create the best Dropbox experience for you"}),position:l.TooltipPlacement.TOP})),s.default.createElement(c.UserCompanyName,Object.assign({},e,{onCompanyNameChange:y})),s.default.createElement(d.UserWorkRole,Object.assign({},e,{onWorkRoleChange:b})),s.default.createElement(u.UserCompanySize,Object.assign({},e,{onCompanySizeChange:h})))}})),define("metaserver/static/js/account_page/widgets/company_info/subviews/company_name",["require","exports","tslib","react","metaserver/static/js/core/i18n","dig-components/modal","metaserver/static/js/account_page/components/key_value_block","dig-components/text_fields","metaserver/static/js/account_page/widgets/company_info/api","metaserver/static/js/account_page/widgets/company_info/subviews/helpers","styled-components","metaserver/static/js/core/notify","metaserver/static/js/clean/analytics","dig-components/typography","dig-components/buttons"],(function(e,t,a,s,n,r,o,l,i,c,d,u,m,f,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserCompanyName=void 0,s=a.__importStar(s);const g=(d=a.__importDefault(d)).default.div`
  color: var(--color__error__text);
`;t.UserCompanyName=({user:e,onCompanyNameChange:t,userCompanyInfo:{companyInfo:d={},loadingState:p}})=>{const[E,v]=(0,s.useState)(d.company_name),[M,y]=(0,s.useState)(!1),[b,h]=(0,s.useState)(!1),[w,S]=(0,s.useState)(E||""),[T,C]=(0,s.useState)();let A;A=E?n.intl.formatMessage({id:"UwFkjc",defaultMessage:"Edit"}):n.intl.formatMessage({id:"RIq3O6",defaultMessage:"Set"});const R=s=>a.__awaiter(void 0,void 0,void 0,(function*(){if(s.preventDefault(),!T){try{h(!0),yield(0,i.updateCompanyName)(e.id,w),a=w,u.Notify.success(n.intl.formatMessage({id:"UfFyft",defaultMessage:"Company name updated."})),v(a),t(a),y(!1)}catch(e){u.Notify.error(n.intl.formatMessage({id:"wfJMlq",defaultMessage:"There was an error completing this request."}))}var a;h(!1)}})),N=()=>{y(!1)};(0,s.useEffect)(()=>{w.length>c.MAX_NAME_LENGTH?C((0,c.MAX_CHARS_ERROR)(w.length,c.MAX_NAME_LENGTH)):C("")},[w]);const I=!T&&!b,x=n.intl.formatMessage({id:"zyt6xR",defaultMessage:"What’s your organization called?"});return s.default.createElement(s.default.Fragment,null,s.default.createElement(o.KeyValueBlock,{className:"company-name-row",keyText:n.intl.formatMessage({id:"5w32MB",defaultMessage:"Where you work"}),linkText:A,valueText:E,placeholder:n.intl.formatMessage({id:"zyt6xR",defaultMessage:"What’s your organization called?"}),onLinkClick:()=>{y(!0),m.UserActivityLogger.log("web","de_account_general_company_info_company_name_edit_clicked")}}),s.default.createElement(r.Modal,{open:M,withCloseButton:"Close",onRequestClose:N},s.default.createElement(r.Modal.Header,{hasBottomSpacing:"title-standard"},s.default.createElement(f.Title,null,n.intl.formatMessage({id:"sgmpQr",defaultMessage:"Update where you work"}))),s.default.createElement(r.Modal.Body,null,s.default.createElement("div",{className:"company-name-subtext"},s.default.createElement(f.Title,{size:"small"},n.intl.formatMessage({id:"5w32MB",defaultMessage:"Where you work"}))),T&&s.default.createElement(g,null,T),s.default.createElement("form",{onSubmit:R},s.default.createElement(l.TextInput,{autoFocus:!0,placeholder:x,"aria-label":x,defaultValue:w,spellCheck:!1,onKeyUp:e=>{S(e.currentTarget.value)},name:"companyname",isInvalid:!1}))),s.default.createElement(r.Modal.Footer,null,s.default.createElement(_.Button,{variant:"opacity",onClick:N},n.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"})),s.default.createElement(_.Button,{disabled:!I,variant:"primary",onClick:R},n.intl.formatMessage({id:"+5HiT6",defaultMessage:"Update"})))))}})),define("metaserver/static/js/account_page/widgets/company_info/subviews/company_size",["require","exports","tslib","react","metaserver/static/js/core/i18n","metaserver/static/js/account_page/widgets/company_info/api","metaserver/static/js/account_page/widgets/company_info/subviews/helpers","metaserver/static/js/account_page/components/dropdown_block","metaserver/static/js/core/notify","metaserver/static/js/clean/analytics"],(function(e,t,a,s,n,r,o,l,i,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserCompanySize=void 0,s=a.__importStar(s);t.UserCompanySize=({user:e,onCompanySizeChange:t,userCompanyInfo:{companyInfo:d={},loadingState:u}})=>{const[m,f]=(0,s.useState)(d.company_size_id),[,_]=(0,s.useState)(!1);return s.default.createElement(l.DropdownBlock,{className:"company-size-id-row",label:n.intl.formatMessage({id:"k96ADH",defaultMessage:"Size of your organization"}),selected:Number(m),items:o.COMPANY_SIZES,onItemSelected:function(s){return a.__awaiter(this,void 0,void 0,(function*(){const a=m;_(!0);try{f(s),yield(0,r.updateCompanySizeId)(e.id,s),(e=>{i.Notify.success(n.intl.formatMessage({id:"9sggQN",defaultMessage:"Company size updated."})),f(e),t(e),c.UserActivityLogger.log("web","de_account_general_company_info_company_size_changed",{format:e})})(s)}catch(e){f(a),i.Notify.error(n.intl.formatMessage({id:"wfJMlq",defaultMessage:"There was an error completing this request."}))}_(!1)}))},placeholder:n.intl.formatMessage({id:"x4xWgG",defaultMessage:"How many people?"})})}})),define("metaserver/static/js/account_page/widgets/company_info/subviews/helpers",["require","exports","metaserver/static/js/core/i18n"],(function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COMPANY_SIZES=t.MAX_NAME_LENGTH=t.MAX_CHARS_ERROR=void 0;t.MAX_CHARS_ERROR=(e,t)=>a.intl.formatMessage({id:"DTOpUy",defaultMessage:"That’s a bit too long ({count} /{max} max)"},{count:e,max:t}),t.MAX_NAME_LENGTH=Number("100"),t.COMPANY_SIZES={1:"1-19",2:"20-99",3:"100-249",4:"250-999",5:"1000+"}})),define("metaserver/static/js/account_page/widgets/company_info/subviews/user_work_role",["require","exports","tslib","react","metaserver/static/js/core/i18n","dig-components/modal","metaserver/static/js/account_page/components/key_value_block","dig-components/text_fields","metaserver/static/js/account_page/widgets/company_info/api","metaserver/static/js/account_page/widgets/company_info/subviews/helpers","styled-components","metaserver/static/js/core/notify","metaserver/static/js/clean/analytics","dig-components/typography","dig-components/buttons"],(function(e,t,a,s,n,r,o,l,i,c,d,u,m,f,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserWorkRole=void 0,s=a.__importStar(s);const g=(d=a.__importDefault(d)).default.div`
  color: var(--color__error__text);
`;t.UserWorkRole=({user:e,onWorkRoleChange:t,userCompanyInfo:{companyInfo:d={},loadingState:p}})=>{const[E,v]=(0,s.useState)(d.company_role),[M,y]=(0,s.useState)(!1),[b,h]=(0,s.useState)(!1),[w,S]=(0,s.useState)(E||""),[T,C]=(0,s.useState)();let A;A=E?n.intl.formatMessage({id:"UwFkjc",defaultMessage:"Edit"}):n.intl.formatMessage({id:"RIq3O6",defaultMessage:"Set"});const R=s=>a.__awaiter(void 0,void 0,void 0,(function*(){if(s.preventDefault(),!T){try{h(!0),yield(0,i.updateCompanyRole)(e.id,w),a=w,u.Notify.success(n.intl.formatMessage({id:"bJMhuf",defaultMessage:"Your role updated."})),v(a),t(a),y(!1)}catch(e){u.Notify.error(n.intl.formatMessage({id:"wfJMlq",defaultMessage:"There was an error completing this request."}))}var a;h(!1)}})),N=()=>{y(!1)};(0,s.useEffect)(()=>{w.length>c.MAX_NAME_LENGTH?C((0,c.MAX_CHARS_ERROR)(w.length,c.MAX_NAME_LENGTH)):C("")},[w]);const I=!T&&!b,x=n.intl.formatMessage({id:"3erukr",defaultMessage:"What’s your job title?"});return s.default.createElement(s.default.Fragment,null,s.default.createElement(o.KeyValueBlock,{className:"company-name-row",keyText:n.intl.formatMessage({id:"1YrAwq",defaultMessage:"Your title"}),linkText:A,valueText:E,placeholder:n.intl.formatMessage({id:"rOEIS1",defaultMessage:"What do you do?"}),onLinkClick:()=>{y(!0),m.UserActivityLogger.log("web","de_account_general_company_info_company_role_edit_clicked")}}),s.default.createElement(r.Modal,{open:M,withCloseButton:"Close",onRequestClose:N},s.default.createElement(r.Modal.Header,{hasBottomSpacing:"title-standard"},s.default.createElement(f.Title,null,n.intl.formatMessage({id:"ooDtnA",defaultMessage:"Update your title"}))),s.default.createElement(r.Modal.Body,null,s.default.createElement("div",{className:"company-name-subtext"},s.default.createElement(f.Title,{size:"small"},n.intl.formatMessage({id:"1YrAwq",defaultMessage:"Your title"}))),T&&s.default.createElement(g,null,T),s.default.createElement("form",{onSubmit:R},s.default.createElement(l.TextInput,{autoFocus:!0,placeholder:x,"aria-label":x,defaultValue:w,spellCheck:!1,onKeyUp:e=>{S(e.currentTarget.value)},name:"companyname",isInvalid:!1}))),s.default.createElement(r.Modal.Footer,null,s.default.createElement(_.Button,{variant:"opacity",onClick:N},n.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"})),s.default.createElement(_.Button,{disabled:!I,variant:"primary",onClick:R},n.intl.formatMessage({id:"+5HiT6",defaultMessage:"Update"})))))}})),define("metaserver/static/js/account_page/widgets/plusplus/view",["require","exports","tslib","metaserver/static/js/core/browser","react-intl","react","metaserver/static/js/account_page/components/key_value_block","metaserver/static/js/account_page/widgets/plusplus/types","metaserver/static/js/core/i18n","metaserver/static/js/plusplus/logging","metaserver/static/js/clean/viewer","dig-components/typography","styled-components","dig-components/buttons","metaserver/static/js/vault/components/vault_row_action","metaserver/static/js/vault/provider","metaserver/static/js/email_ingest/settings_page/row_actions","metaserver/static/js/email_ingest/data_manager","metaserver/static/js/email_ingest/constants","metaserver/static/js/email_ingest/logger","metaserver/static/js/clean/browse_uri_interface","metaserver/static/js/account_page/widgets/account_preferences/api","metaserver/static/js/clean/analytics","metaserver/static/js/core/notify","metaserver/static/js/account_page/components/toggle_block","metaserver/static/js/account_page/widgets/account_preferences/utils","metaserver/static/js/account_page/pap_logging"],(function(e,t,a,s,n,r,o,l,i,c,d,u,m,f,_,g,p,E,v,M,y,b,h,w,S,T,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TRANSCRIPTION_LEARN_MORE_URL=t.PASSWORDS_LEARN_MORE_URL=t.VAULT_LEARN_MORE_URL=t.PlusPlusFeatures=void 0,s=a.__importStar(s),r=a.__importStar(r);const A=(0,(m=a.__importDefault(m)).default)(f.Button)`
  font-size: inherit !important;
  color: inherit !important;
  &&:hover {
    text-decoration: none;
  }
`;t.PlusPlusFeatures=({isPasswordsEnabled:e,vaultSetupState:t,isVaultEnabled:a,isEmailIngestEnabled:s,shouldShowPreviewsTranscription:n,accountPreferences:o,user:l})=>{const i=a||e||s||n,c=(0,T.useAccountPreferencesData)(o,l);if((0,r.useEffect)(()=>{i&&O("shown","plusplus_entry_points")}),!i)return null;const{features:d}=k();return r.default.createElement("div",{className:"account-page-block account-page-block--general account-page-block--preferences"},r.default.createElement("div",{className:"account-page-header"},r.default.createElement(u.Title,{size:"small",isBold:!0},d)),a?r.default.createElement(R,{vaultSetupState:t}):null,e?r.default.createElement(N,null):null,s&&l?r.default.createElement(I,{user:l}):null,n&&l&&c?r.default.createElement(x,{user:l,preferences:c}):null)},t.PlusPlusFeatures.displayName="PlusPlusFeatures";const R=({vaultSetupState:e})=>{const{vaultKeyText:a,getVaultSubtext:n}=k();return r.default.createElement(g.VaultProvider,{experiments:{}},r.default.createElement(o.KeyValueBlock,{keyText:a,subtext:n(()=>{O("select","vault_feature_learn_more"),s.redirect(t.VAULT_LEARN_MORE_URL)}),customControl:r.default.createElement(_.VaultRowAction,{vaultSetupState:null!=e?e:l.VaultSetupState.NO_VAULT})}))};function N(){const{passwordsKeyText:e,getPasswordsSubtext:a,getPasswordsLinkText:n}=k();return r.default.createElement(o.KeyValueBlock,{keyText:e,linkText:n(()=>{s.redirect("/getpasswords")}),subtext:a(()=>{s.redirect(t.PASSWORDS_LEARN_MORE_URL)})})}R.displayName="VaultRow";const I=({user:e})=>{var t,a;const[l,c]=(0,E.useDataManager)(e),{emailIngestKeyText:d,getEmailIngestLinkTextPostSetup:u,getEmailIngestLinkTextPreSetup:m}=k();return r.default.createElement(n.RawIntlProvider,{value:i.intl},r.default.createElement(o.KeyValueBlock,{keyText:d,subtext:l&&l.inboxInfo?u(e,l.inboxInfo.inboxName+v.SAVETO_DOMAIN,l.inboxInfo.fqPath):m(()=>{s.redirect(j),(0,M.logEvent)(M.LoggingEvents.ACCT_CLICK_LEARN_MORE)}),customControl:l&&r.default.createElement(p.EmailIngestRowActions,{user:e,inboxName:null!==(a=null===(t=l.inboxInfo)||void 0===t?void 0:t.inboxName)&&void 0!==a?a:null,refresh:c})}))};I.displayName="EmailIngestRow";const x=e=>{var n;const{user:o,preferences:l}=e,c="previews_transcription",d=null!==(n=l.user_related_prefs[c])&&void 0!==n&&n,[u,m]=r.default.useState(!!d);if(void 0===d)return null;const{transcriptionLabelText:f,getTranscriptionSublabelText:_}=k();return r.default.createElement(S.ToggleBlock,{label:f,subLabel:_(()=>{s.redirect(t.TRANSCRIPTION_LEARN_MORE_URL)}),className:"infinite-hard-optout-toggle",isOn:u,onToggle:e=>a.__awaiter(void 0,void 0,void 0,(function*(){try{yield(0,b.updateUserRelatedPreference)(o.id,c,e),w.Notify.success(i.intl.formatMessage({id:"wEYWOg",defaultMessage:"Preference updated."})),h.UserActivityLogger.log("web",`de_account_general_prefs_${c}_toggled`,{is_on:e}),(0,C.logSelectAccountPreference)(C.AccountGeneralPreference.PREVIEWS_TRANSCRIPTION_ACCOUNT_PREFERENCE_NAME,e)}catch(e){w.Notify.error(i.intl.formatMessage({id:"9NijeN",defaultMessage:"There was an error completing this request."}))}m(e)})),ariaIdBase:"transcription"})};function O(e,t){var a;const s=null===(a=d.Viewer.get_viewer().personal_user)||void 0===a?void 0:a.id;s&&(0,c.logProductAnalytics)(s,"web",e,t,"settings")}function k(){return{features:i.intl.formatMessage({id:"wzs1Yb",defaultMessage:"Features"}),emailIngestKeyText:i.intl.formatMessage({id:"hN0gA0",defaultMessage:"Email to Dropbox"}),getEmailIngestLinkTextPreSetup:e=>i.intl.formatMessage({id:"d3aMQV",defaultMessage:"Automatically save email attachments in a Dropbox folder. <a>Learn more</a>"},{a:t=>r.default.createElement(A,{variant:"transparent",onClick:e,"aria-label":i.intl.formatMessage({id:"QBShgq",defaultMessage:"Learn more about email to Dropbox"})},t)}),getEmailIngestLinkTextPostSetup:(e,t,a)=>a?i.intl.formatMessage({id:"nU3AC/",defaultMessage:"Automatically saves email attachments to a <a>folder</a> when you send emails to <b>{email_address}</b>"},{a:t=>r.default.createElement(u.Link,{href:(0,y.browse_uri_for_fq_path)(e,a).toString(),hasNoUnderline:!0},t),b:e=>r.default.createElement("b",null,e),email_address:t}):i.intl.formatMessage({id:"HbfEAH",defaultMessage:"Automatically saves email attachments when you send emails to <b>{email_address}</b>"},{b:e=>r.default.createElement("b",null,e),email_address:t}),vaultKeyText:i.intl.formatMessage({id:"eP8MBB",defaultMessage:"Vault"}),getVaultSubtext:e=>i.intl.formatMessage({id:"fRBsb1",defaultMessage:"Protect your most important files with extra security. <a>Learn more</a>"},{a:t=>r.default.createElement(A,{variant:"transparent",onClick:e,"aria-label":i.intl.formatMessage({id:"ZYyXEK",defaultMessage:"Learn more about Dropbox Vault"})},t)}),passwordsKeyText:i.intl.formatMessage({id:"/uqEAv",defaultMessage:"Dropbox Passwords"}),getPasswordsLinkText:e=>i.intl.formatMessage({id:"PAlobr",defaultMessage:"<a>Get app</a>"},{a:t=>r.default.createElement(A,{variant:"transparent",onClick:e},t)}),getPasswordsSubtext:e=>i.intl.formatMessage({id:"C94zzZ",defaultMessage:"Sync your passwords to one spot across your devices. <a>Learn more</a>"},{a:t=>r.default.createElement(A,{variant:"transparent",className:"button-as-link",onClick:e,"aria-label":i.intl.formatMessage({id:"ZFlbhl",defaultMessage:"Learn more about Dropbox Passwords"})},t)}),transcriptionLabelText:i.intl.formatMessage({id:"2SmOiL",defaultMessage:"Opt-in to transcription and closed captioning"}),getTranscriptionSublabelText:e=>i.intl.formatMessage({id:"dXdax3",defaultMessage:"This feature is powered by Amazon Transcribe. Your data will be sent to Amazon Web Services for transcription and closed captioning. <a>Learn more</a>"},{a:t=>r.default.createElement(A,{variant:"transparent",onClick:e,"aria-label":i.intl.formatMessage({id:"yFHj30",defaultMessage:"Learn more about transcription"})},t)})}}x.displayName="TranscriptionRow",t.VAULT_LEARN_MORE_URL="https://www.dropbox.com/features/security/vault",t.PASSWORDS_LEARN_MORE_URL="https://www.dropbox.com/features/security/passwords";const j="/apps/email_to_my_dropbox";t.TRANSCRIPTION_LEARN_MORE_URL="https://help.dropbox.com/view-edit/transcript-closed-captions"})),define("metaserver/static/js/logging/hive/schemas/web-email_ingest_web_events",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmailIngestWebEventRow=void 0;t.EmailIngestWebEventRow=class{constructor(e){this.category="web-email_ingest_web_events",this.user_id=null,this.anon_ip=null,this.authed_user_ids=null,this.country=null,this.referrer=null,this.session_id=null,this.user_agent=null,this.ua_browser_name=null,this.ua_browser_version=null,this.ua_os_name=null,this.ua_os_version=null,this.active_user_id=null,this.event_name=e.event_name,this.extra=e.extra,Object.seal(this)}}})),define("metaserver/static/js/email_ingest/api",["require","exports","tslib","metaserver/static/js/api_v2/user_client"],(function(e,t,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.regenerate=t.update=t.create=t.disable=t.getInboxInfo=void 0,t.getInboxInfo=function(e){var t,n;return a.__awaiter(this,void 0,void 0,(function*(){const a=yield(new s.UserApiV2Client).ns("email_ingest").rpc("list_inboxes",void 0,{subjectUserId:e.id}),r=null===(t=a.inboxes)||void 0===t?void 0:t[0];return r?{inboxName:r,fqPath:null===(n=a.fq_paths)||void 0===n?void 0:n[0]}:null}))},t.disable=function(e,t){return a.__awaiter(this,void 0,void 0,(function*(){yield(new s.UserApiV2Client).ns("email_ingest").rpc("delete_inbox",{inbox_name:t},{subjectUserId:e.id})}))},t.create=function(e){return a.__awaiter(this,void 0,void 0,(function*(){return yield(new s.UserApiV2Client).ns("email_ingest").rpc("create_inbox",void 0,{subjectUserId:e.id})}))},t.update=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function*(){yield(new s.UserApiV2Client).ns("email_ingest").rpc("update_inbox_name",{new_inbox_name:t,token:n},{subjectUserId:e.id})}))},t.regenerate=function(e){return a.__awaiter(this,void 0,void 0,(function*(){return(yield(new s.UserApiV2Client).ns("email_ingest").rpc("generate_new_inbox_name_batch",void 0,{subjectUserId:e.id})).new_inbox_name_and_token}))}})),define("metaserver/static/js/email_ingest/config_modals/common",["require","exports","tslib","react","styled-components","metaserver/static/js/email_ingest/constants","dig-components/icons/src","dig-components/icons","dig-components/typography","dig-components/buttons","react-intl","metaserver/static/js/email_ingest/logger"],(function(e,t,a,s,n,r,o,l,i,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmailAddressDisplay=void 0,s=a.__importStar(s);const m=(n=a.__importDefault(n)).default.div`
  margin: var(--spacing__unit--2) 0 var(--spacing__unit--3);
`,f=n.default.div`
  box-sizing: border-box;
  min-height: 40px;
  background-color: var(--color__opacity--1);
  padding: var(--spacing__base_unit) var(--spacing__unit--2) var(--spacing__base_unit)
    var(--spacing__unit--2);
  display: flex;
  flex-direction: row;
  align-items: center;
  position: relative;
  overflow: auto;
`,_=n.default.div`
  position: absolute;
  right: var(--spacing__base_unit);
  top: var(--spacing__unit--0_5);
`;t.EmailAddressDisplay=({inboxName:e,withActions:t,onRefresh:a,refreshing:n})=>{const g=!e||n?"...":e+r.SAVETO_DOMAIN,p=(0,s.useCallback)(()=>{navigator.clipboard&&navigator.clipboard.writeText(g),(0,u.logEvent)(u.LoggingEvents.MODAL_COPY_ADDRESS)},[g]),E=(0,d.useIntl)().formatMessage({id:"O4sXJn",defaultMessage:"Refresh"}),v=(0,s.useCallback)(()=>{(0,u.logEvent)(u.LoggingEvents.MODAL_OPEN_EMAIL)},[]);return s.default.createElement(s.default.Fragment,null,s.default.createElement(f,null,s.default.createElement(i.Text,{className:"email-address",isBold:!0},g),a&&s.default.createElement(_,null,s.default.createElement(c.IconButton,{variant:"transparent",isRounded:!0,onClick:a,disabled:n,"data-testid":"REFRESH_BUTTON"},s.default.createElement(l.UIIcon,{src:o.SyncingLine,"aria-label":E})))),t&&s.default.createElement(m,null,s.default.createElement(c.Button,{variant:"transparent",withIconLeft:s.default.createElement(l.UIIcon,{src:o.CopyLine}),onClick:p},s.default.createElement(d.FormattedMessage,{id:"fvSZVR",defaultMessage:"Copy"})),s.default.createElement("span",{style:{width:"16px",display:"inline-block"}}),s.default.createElement(c.Button,{onClick:v,variant:"transparent",href:"mailto:"+g,withIconLeft:s.default.createElement(l.UIIcon,{src:o.EmailLine})},s.default.createElement(d.FormattedMessage,{id:"y7S+/u",defaultMessage:"Open email"}))))},t.EmailAddressDisplay.displayName="EmailAddressDisplay"})),define("metaserver/static/js/email_ingest/config_modals/disable",["require","exports","tslib","dig-components/modal","react","dig-components/typography","dig-components/buttons","react-intl","metaserver/static/js/email_ingest/logger"],(function(e,t,a,s,n,r,o,l,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisableModal=void 0,n=a.__importStar(n);t.DisableModal=({open:e,onRequestClose:t,inboxName:c,onDisable:d})=>{(0,n.useEffect)(()=>{(0,i.logEvent)(i.LoggingEvents.MODAL_DISABLE_VIEW)},[]);const[u,m]=(0,n.useState)(!1);return n.default.createElement(s.Modal,{open:e,withCloseButton:"Close",onRequestClose:t},n.default.createElement(s.Modal.Header,{hasBottomSpacing:"title-standard"},n.default.createElement(r.Title,null,n.default.createElement(l.FormattedMessage,{id:"oi0zm4",defaultMessage:"Stop saving email attachments to Dropbox?"}))),n.default.createElement(s.Modal.Body,{hasVerticalSpacing:!1},n.default.createElement(l.FormattedMessage,{id:"wpToux",defaultMessage:"To save email attachments again later you’ll need to turn this on in settings and create a new email address. "})),n.default.createElement(s.Modal.Footer,null,n.default.createElement(o.Button,{variant:"opacity",onClick:()=>{t(),(0,i.logEvent)(i.LoggingEvents.MODAL_DISABLE_CLICK_CANCEL)},autoFocus:!0,"data-testid":"CANCEL_BUTTON"},n.default.createElement(l.FormattedMessage,{id:"qwWPBM",defaultMessage:"Cancel"})),n.default.createElement(o.Button,{variant:"primary",onClick:()=>a.__awaiter(void 0,void 0,void 0,(function*(){m(!0),yield d(c),m(!1),t(),(0,i.logEvent)(i.LoggingEvents.MODAL_DISABLE_CLICK_OK)})),isLoading:u,"data-testid":"OK_BUTTON"},n.default.createElement(l.FormattedMessage,{id:"GkZAlh",defaultMessage:"Yes"}))))},t.DisableModal.displayName="DisableModal"})),define("metaserver/static/js/email_ingest/config_modals/regenerate",["require","exports","tslib","styled-components","dig-components/modal","react","dig-components/buttons","dig-components/banner","dig-components/typography","metaserver/static/js/email_ingest/config_modals/common","react-intl","metaserver/static/js/email_ingest/logger"],(function(e,t,a,s,n,r,o,l,i,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegenerateModal=void 0,s=a.__importDefault(s),r=a.__importStar(r);var m;(function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",e[e.NO_LONGER_AVAILABLE=1]="NO_LONGER_AVAILABLE"})(m||(m={}));const f=s.default.div`
  padding-top: var(--spacing__base_unit);
`,_=s.default.div`
  padding-top: var(--spacing__unit--2);
`,g=({error:e})=>null===e?null:r.default.createElement(f,null,r.default.createElement(l.Banner,{type:"alert"},e===m.NO_LONGER_AVAILABLE&&r.default.createElement(l.Banner.Message,null,"This email address is no longer available."),e===m.UNKNOWN_ERROR&&r.default.createElement(l.Banner.Message,null,"Something went wrong. Please try again later.")));g.displayName="ErrorBanner";t.RegenerateModal=({open:e,onRequestClose:t,inboxName:s,onSave:l,fetch:p})=>{var E,v;const[M,y]=(0,r.useState)(!0),[b,h]=(0,r.useState)([]),[w,S]=(0,r.useState)(!1),[T,C]=(0,r.useState)(!1),[A,R]=(0,r.useState)(null),N=()=>a.__awaiter(void 0,void 0,void 0,(function*(){const e=yield p();h(Object.entries(e))}));(0,r.useEffect)(()=>{N().then(()=>y(!1))},[y]),(0,r.useEffect)(()=>{T?(0,u.logEvent)(u.LoggingEvents.MODAL_NEW_ADDRESS_SAVED):(0,u.logEvent)(u.LoggingEvents.MODAL_NEW_ADDRESS_VIEW)},[T]);const I=(0,r.useCallback)(()=>{t(),(0,u.logEvent)(u.LoggingEvents.MODAL_NEW_ADDRESS_CLICK_DONE)},[t]),x=(0,r.useCallback)(()=>{t(),(0,u.logEvent)(u.LoggingEvents.MODAL_NEW_ADDRESS_CLICK_CANCEL)},[t]);return T?r.default.createElement(n.Modal,{open:e},r.default.createElement(n.Modal.Header,{hasBottomSpacing:"title-standard"},r.default.createElement(i.Title,null,r.default.createElement(d.FormattedMessage,{id:"QSvGAQ",defaultMessage:"New email address saved"}))),r.default.createElement(n.Modal.Body,{hasVerticalSpacing:!1},r.default.createElement(i.Text,{tagName:"p"},r.default.createElement(d.FormattedMessage,{id:"fuoivc",defaultMessage:"Use this new email address to automatically save email attachments in your Dropbox folder. Your old address is no longer active."})),r.default.createElement(f,null,r.default.createElement(c.EmailAddressDisplay,{inboxName:null===(E=b[0])||void 0===E?void 0:E[0],withActions:!0}))),r.default.createElement(n.Modal.Footer,null,r.default.createElement(o.Button,{variant:"primary",onClick:I},r.default.createElement(d.FormattedMessage,{id:"1yYk7o",defaultMessage:"Done"})))):r.default.createElement(n.Modal,{open:e,withCloseButton:"Close",onRequestClose:t},r.default.createElement(n.Modal.Header,{hasBottomSpacing:"title-standard"},r.default.createElement(i.Title,null,r.default.createElement(d.FormattedMessage,{id:"ooaUAP",defaultMessage:"Create a new address"}))),r.default.createElement(n.Modal.Body,{hasVerticalSpacing:!1},r.default.createElement(i.Text,{tagName:"p"},r.default.createElement(d.FormattedMessage,{id:"zU7LMK",defaultMessage:"Create a new email address to replace your current address. Your current address will no longer be active."})),r.default.createElement(i.Text,{variant:"label",color:"faint"},r.default.createElement(d.FormattedMessage,{id:"YGBaO5",defaultMessage:"Current address"})),r.default.createElement(c.EmailAddressDisplay,{inboxName:s}),r.default.createElement(_,null,r.default.createElement(i.Text,{variant:"label",color:"faint"},r.default.createElement(d.FormattedMessage,{id:"fEkLFz",defaultMessage:"New address"})),r.default.createElement(c.EmailAddressDisplay,{inboxName:null===(v=b[0])||void 0===v?void 0:v[0],onRefresh:()=>a.__awaiter(void 0,void 0,void 0,(function*(){if(y(!0),R(null),1===b.length)yield N();else{yield(e=300+300*(Math.random()-.5)/2,new Promise(t=>{setTimeout(t,e)}));const[,...t]=b;h(t)}var e;y(!1),(0,u.logEvent)(u.LoggingEvents.MODAL_NEW_ADDRESS_CLICK_REFRESH)})),refreshing:M})),r.default.createElement(g,{error:A})),r.default.createElement(n.Modal.Footer,null,r.default.createElement(o.Button,{variant:"opacity",onClick:x,autoFocus:!0},r.default.createElement(d.FormattedMessage,{id:"qwWPBM",defaultMessage:"Cancel"})),r.default.createElement(o.Button,{variant:"primary",onClick:()=>a.__awaiter(void 0,void 0,void 0,(function*(){S(!0),R(null);try{yield l(b[0][0],b[0][1]),C(!0)}catch(e){if(e&&e.error&&e.error[".tag"])switch(e.error[".tag"]){case"name_occupied":R(m.NO_LONGER_AVAILABLE);break;case"token_expired":R(m.NO_LONGER_AVAILABLE),h([b[0]]);break;default:R(m.UNKNOWN_ERROR)}else R(m.UNKNOWN_ERROR)}S(!1),(0,u.logEvent)(u.LoggingEvents.MODAL_NEW_ADDRESS_CLICK_SAVE)})),disabled:M||w,isLoading:w,"data-testid":"SAVE_BUTTON"},r.default.createElement(d.FormattedMessage,{id:"lBq44Z",defaultMessage:"Save changes"}))))},t.RegenerateModal.displayName="RegenerateModal"})),define("metaserver/static/js/email_ingest/config_modals/setup",["require","exports","tslib","dig-components/modal","react","dig-components/typography","dig-components/buttons","metaserver/static/js/icon/folder_icon","metaserver/static/js/clean/filetypes","styled-components","metaserver/static/js/clean/ui/image","metaserver/static/js/clean/browse_uri_interface","metaserver/static/js/email_ingest/config_modals/common","react-intl","metaserver/static/js/email_ingest/logger","metaserver/static/js/modules/constants/page_load"],(function(e,t,a,s,n,r,o,l,i,c,d,u,m,f,_,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SetupModal=t.SetupModalContent=void 0,n=a.__importStar(n);const p=(c=a.__importDefault(c)).default.div`
  display: flex;
  align-items: center;
  border: 1px solid var(--color__faint__border);
  padding: var(--spacing__unit--0_5) var(--spacing__base_unit);
  margin: var(--spacing__unit--2) 0;
`,E=(0,c.default)(l.FolderIcon)`
  width: 32px;
  height: 32px;
`,v=({user:e,fqPath:t})=>{const a=(null==t?void 0:t.startsWith("/"))?t.substr(1):t;return n.default.createElement(p,null,n.default.createElement(E,{file:{type:i.FileTypes.FOLDER,icon:"folder"}}),n.default.createElement(r.Link,{variant:"monochromatic",href:(0,u.browse_uri_for_fq_path)(e,t).toString(),hasNoUnderline:!0},a))};v.displayName="FolderDisplay";const M=(0,c.default)(d.Image)`
  width: 100%;
  display: block;
  margin-top: var(--spacing__unit--2);
`,y=({onRequestAddress:e,loading:t})=>((0,n.useEffect)(()=>{(0,_.logEvent)(_.LoggingEvents.MODAL_SET_UP_VIEW)},[]),n.default.createElement(n.default.Fragment,null,n.default.createElement(s.Modal.Header,{hasBottomSpacing:"title-standard"},n.default.createElement(r.Title,null,n.default.createElement(f.FormattedMessage,{id:"OKmyv0",defaultMessage:"Save email attachments directly to Dropbox"}))),n.default.createElement(s.Modal.Body,{hasVerticalSpacing:!1},n.default.createElement(M,{role:"presentation",src:`https://assets.dropbox.com/email/en/email-to-dbx/Email-to-Dropbox_1100x620-${g.USER_LOCALE}.png`,alt:""})),n.default.createElement(s.Modal.Footer,null,n.default.createElement(o.Button,{variant:"primary",onClick:e,isLoading:t,disabled:t,"data-testid":"GET_ADDRESS_BUTTON"},n.default.createElement(f.FormattedMessage,{id:"TRCZ1J",defaultMessage:"Create unique email address"})))));y.displayName="SetupModalIntro";const b=({onRequestClose:e,inboxName:t,fqPath:a,user:l})=>{(0,n.useEffect)(()=>{(0,_.logEvent)(_.LoggingEvents.MODAL_SET_UP_ALL_SET_VIEW)},[]);const i=(0,n.useCallback)(()=>{e(),(0,_.logEvent)(_.LoggingEvents.MODAL_SET_UP_DONE)},[e]),c=(0,n.useCallback)(()=>{(0,_.logEvent)(_.LoggingEvents.MODAL_SET_UP_CLICK_VIEW_SETTINGS)},[]);return n.default.createElement(n.default.Fragment,null,n.default.createElement(s.Modal.Header,{hasBottomSpacing:"title-standard"},n.default.createElement(r.Title,null,n.default.createElement(f.FormattedMessage,{id:"OlAriH",defaultMessage:"Here’s your unique email address"}))),n.default.createElement(s.Modal.Body,{hasVerticalSpacing:!1},n.default.createElement(r.Text,{tagName:"p"},n.default.createElement(f.FormattedMessage,{id:"htB2XI",defaultMessage:"We also sent you a confirmation email to get started."})),n.default.createElement(r.Text,{tagName:"p"},n.default.createElement(f.FormattedMessage,{id:"hFGKUm",defaultMessage:"Note: Anyone can send attachments to your Dropbox with this address. Only share it with people you trust."})),n.default.createElement(m.EmailAddressDisplay,{inboxName:t,withActions:!0}),a&&n.default.createElement(n.default.Fragment,null,n.default.createElement(r.Text,null,n.default.createElement(f.FormattedMessage,{id:"mR7qxf",defaultMessage:"Email attachments will be saved to this folder:"})),n.default.createElement(v,{user:l,fqPath:a})),n.default.createElement(r.Text,null,n.default.createElement(f.FormattedMessage,{id:"iiH9u5",defaultMessage:"To turn this feature off or create a new email address, open settings."}))),n.default.createElement(s.Modal.Footer,null,n.default.createElement(o.Button,{variant:"transparent",href:"/account",onClick:c},n.default.createElement(f.FormattedMessage,{id:"E6Ku17",defaultMessage:"Open settings"})),n.default.createElement("div",null),n.default.createElement(o.Button,{variant:"primary",onClick:i,"data-testid":"DONE_BUTTON"},n.default.createElement(f.FormattedMessage,{id:"HhKKvd",defaultMessage:"Done"}))))};b.displayName="SetupModalResult";t.SetupModalContent=({onRequestClose:e,onCreateInbox:t,user:s})=>{const[r,o]=(0,n.useState)(!1),[l,i]=(0,n.useState)(""),[c,d]=(0,n.useState)(void 0),u=(0,n.useCallback)(()=>a.__awaiter(void 0,void 0,void 0,(function*(){o(!0);const e=yield t();i(e.inboxName),d(e.fqPath),(0,_.logEvent)(_.LoggingEvents.MODAL_SET_UP_CLICK_GET_MY_ADDRESS)})),[t,o,i,d]);return l?n.default.createElement(b,{onRequestClose:e,inboxName:l,fqPath:c,user:s}):n.default.createElement(y,{onRequestClose:e,loading:r,onRequestAddress:u})},t.SetupModalContent.displayName="SetupModalContent";t.SetupModal=e=>{const{onRequestClose:a}=e,r=(0,n.useCallback)(()=>{a(),(0,_.logEvent)(_.LoggingEvents.MODAL_SET_UP_EXIT)},[a]);return n.default.createElement(s.Modal,{open:e.open,withCloseButton:"Close",onRequestClose:r},n.default.createElement(t.SetupModalContent,Object.assign({},e)))},t.SetupModal.displayName="SetupModal"})),define("metaserver/static/js/email_ingest/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SAVETO_DOMAIN=void 0,t.SAVETO_DOMAIN="@addtodropbox.com"})),define("metaserver/static/js/email_ingest/data_manager",["require","exports","tslib","react","metaserver/static/js/email_ingest/api"],(function(e,t,a,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDataManager=void 0,t.useDataManager=function(e){const[t,r]=(0,s.useState)(!1),[o,l]=(0,s.useState)(null),i=()=>a.__awaiter(this,void 0,void 0,(function*(){const t=yield(0,n.getInboxInfo)(e);l(t)}));(0,s.useEffect)(()=>{r(!1),i().then(()=>r(!0))},[e]);const c=(0,s.useCallback)(i,[e]);return t?[{inboxInfo:o},c]:[null,c]}})),define("metaserver/static/js/email_ingest/logger",["require","exports","metaserver/static/js/logging/hive/schemas/web-email_ingest_web_events","metaserver/static/js/logging/telemetry"],(function(e,t,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logEvent=t.LoggingEvents=void 0;const n=new s.HiveLogger;(function(e){e.ACCT_CLICK_SET_UP="acct_click_set_up",e.ACCT_CLICK_LEARN_MORE="acct_click_learn_more",e.ACCT_CLICK_DISABLE="acct_click_disable",e.ACCT_CLICK_GET_NEW_EMAIL="acct_click_get_new_email",e.MODAL_SET_UP_EXIT="modal_set_up_exit",e.MODAL_SET_UP_VIEW="modal_set_up_view",e.MODAL_SET_UP_CLICK_GET_MY_ADDRESS="modal_set_up_click_get_my_address",e.MODAL_SET_UP_ALL_SET_VIEW="modal_set_up_all_set_view",e.MODAL_SET_UP_DONE="modal_set_up_done",e.MODAL_SET_UP_CLICK_VIEW_SETTINGS="modal_set_up_click_view_settings",e.MODAL_NEW_ADDRESS_VIEW="modal_new_address_view",e.MODAL_NEW_ADDRESS_CLICK_REFRESH="modal_new_address_click_refresh",e.MODAL_NEW_ADDRESS_SAVED="modal_view_new_address_saved",e.MODAL_NEW_ADDRESS_CLICK_DONE="modal_new_address_click_done",e.MODAL_NEW_ADDRESS_CLICK_CANCEL="modal_new_address_click_cancel",e.MODAL_NEW_ADDRESS_CLICK_SAVE="modal_new_address_click_save",e.MODAL_DISABLE_VIEW="modal_disable_view",e.MODAL_DISABLE_CLICK_CANCEL="modal_disable_click_cancel",e.MODAL_DISABLE_CLICK_OK="modal_disable_click_ok",e.MODAL_OPEN_EMAIL="modal_open_email",e.MODAL_COPY_ADDRESS="modal_copy_address"})(t.LoggingEvents||(t.LoggingEvents={})),t.logEvent=function(e,t={}){n.log(new a.EmailIngestWebEventRow({event_name:e,extra:t}))}})),define("metaserver/static/js/email_ingest/settings_page/row_actions",["require","exports","tslib","react","styled-components","react-intl","dig-components/buttons","dig-components/icons/src","dig-components/icons","dig-components/tooltips","dig-components/buttons","metaserver/static/js/email_ingest/config_modals/disable","metaserver/static/js/email_ingest/api","metaserver/static/js/email_ingest/config_modals/setup","metaserver/static/js/email_ingest/config_modals/regenerate","metaserver/static/js/email_ingest/logger"],(function(e,t,a,s,n,r,o,l,i,c,d,u,m,f,_,g){"use strict";var p;Object.defineProperty(t,"__esModule",{value:!0}),t.EmailIngestRowActions=void 0,s=a.__importStar(s),n=a.__importDefault(n),(function(e){e[e.DISABLE=0]="DISABLE",e[e.SETUP=1]="SETUP",e[e.REGENERATE=2]="REGENERATE"})(p||(p={}));const E=n.default.div`
  display: flex;
`;t.EmailIngestRowActions=({user:e,inboxName:t,refresh:n})=>{const[v,M]=(0,s.useState)(null),y=()=>M(null),b=()=>{M(p.DISABLE),(0,g.logEvent)(g.LoggingEvents.ACCT_CLICK_DISABLE)},h=()=>{M(p.REGENERATE),(0,g.logEvent)(g.LoggingEvents.ACCT_CLICK_GET_NEW_EMAIL)},w=s.default.createElement(s.default.Fragment,null,t&&v===p.DISABLE&&s.default.createElement(u.DisableModal,{open:v===p.DISABLE,onRequestClose:y,inboxName:t,onDisable:()=>a.__awaiter(void 0,void 0,void 0,(function*(){t&&(yield(0,m.disable)(e,t),yield n())}))}),v===p.SETUP&&s.default.createElement(f.SetupModal,{open:v===p.SETUP,onRequestClose:y,onCreateInbox:()=>a.__awaiter(void 0,void 0,void 0,(function*(){const t=yield(0,m.create)(e);return n(),{fqPath:t.fq_path,inboxName:t.inbox}})),user:e}),t&&v===p.REGENERATE&&s.default.createElement(_.RegenerateModal,{open:v===p.REGENERATE,onRequestClose:y,inboxName:t,onSave:(t,s)=>a.__awaiter(void 0,void 0,void 0,(function*(){yield(0,m.update)(e,t,s),yield n()})),fetch:m.regenerate.bind(null,e)})),S=(0,r.useIntl)();return t?s.default.createElement(s.default.Fragment,null,w,s.default.createElement(E,null,s.default.createElement(o.Button,{variant:"transparent",onClick:h,"data-testid":"GET_NEW_EMAIL_BUTTON"},s.default.createElement(r.FormattedMessage,{id:"4/SGQ1",defaultMessage:"Get new address"})),s.default.createElement("div",{style:{width:"var(--spacing__base_unit)"}}),s.default.createElement(c.Tooltip,{title:S.formatMessage({id:"iRMpLo",defaultMessage:"Get a new email address to replace the current one."})},s.default.createElement(d.IconButton,{size:"small",variant:"transparent"},s.default.createElement(i.UIIcon,{src:l.InfoLine}))),s.default.createElement("div",{style:{width:"var(--spacing__unit--3)"}}),s.default.createElement(o.Button,{variant:"transparent",onClick:b,"data-testid":"DISABLE_BUTTON"},s.default.createElement(r.FormattedMessage,{id:"mVC4Qa",defaultMessage:"Turn off"})))):s.default.createElement(s.default.Fragment,null,w,s.default.createElement(o.Button,{variant:"transparent",onClick:()=>{M(p.SETUP),(0,g.logEvent)(g.LoggingEvents.ACCT_CLICK_SET_UP)},"data-testid":"SETUP_BUTTON"},s.default.createElement(r.FormattedMessage,{id:"xIIOk9",defaultMessage:"Set up"})))},t.EmailIngestRowActions.displayName="EmailIngestRowActions"})),define("metaserver/static/js/growth/ui/trial_timeline_modal/context",["require","exports","tslib","react"],(function(e,t,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TrialTimelineModalContext=void 0,s=a.__importDefault(s),t.TrialTimelineModalContext=s.default.createContext({selectedAddons:[],setSelectedAddons:()=>{}})})),define("metaserver/static/js/growth/ui/trial_timeline_modal/hooks",["require","exports","tslib","react"],(function(e,t,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTrialModal=void 0,s=a.__importDefault(s),t.useTrialModal=function(){const[e,t]=s.default.useState(!1),[a,n]=s.default.useState([]);return{openTrialModal:s.default.useCallback(()=>{t(!0)},[t]),closeTrialModal:s.default.useCallback(()=>{t(!1)},[t]),isTrialModalOpen:e,selectedAddons:a,setSelectedAddons:n}}})),define("metaserver/static/js/growth/ui/trial_timeline_modal/index",["require","exports","metaserver/static/js/growth/ui/trial_timeline_modal/context","metaserver/static/js/growth/ui/trial_timeline_modal/hooks","metaserver/static/js/growth/ui/trial_timeline_modal/trial_timeline_modal"],(function(e,t,a,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TrialTimelineModal=t.useTrialModal=t.TrialTimelineModalContext=void 0,Object.defineProperty(t,"TrialTimelineModalContext",{enumerable:!0,get:function(){return a.TrialTimelineModalContext}}),Object.defineProperty(t,"useTrialModal",{enumerable:!0,get:function(){return s.useTrialModal}}),Object.defineProperty(t,"TrialTimelineModal",{enumerable:!0,get:function(){return n.TrialTimelineModal}})})),define("metaserver/static/js/growth/ui/trial_timeline_modal/strings",["require","exports","metaserver/static/js/core/i18n","react-intl"],(function(e,t,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TRIAL_END_DESCRIPTION=t.getTrialEndHeadingString=t.TRIAL_REMINDER_DESCRIPTION=t.TRIAL_REMINDER_HEADING=t.TRIAL_START_DESCRIPTION=t.getTrialStartHeadingString=t.TRIAL_MODAL_TITLE=t.CLOSE=void 0,t.CLOSE=a.intl.formatMessage((0,s.defineMessage)({id:"uvudiR",defaultMessage:"Close"})),t.TRIAL_MODAL_TITLE=a.intl.formatMessage((0,s.defineMessage)({id:"SH4Qg4",defaultMessage:"How your free trial works"}));t.getTrialStartHeadingString=e=>a.intl.formatMessage((0,s.defineMessage)({id:"mtD+hx",defaultMessage:"Trial starts: today, {current_date}"}),{current_date:e}),t.TRIAL_START_DESCRIPTION=a.intl.formatMessage((0,s.defineMessage)({id:"IJ3Taq",defaultMessage:"Get started with premium features"})),t.TRIAL_REMINDER_HEADING=a.intl.formatMessage((0,s.defineMessage)({id:"k2DIIl",defaultMessage:"Trial ending reminder"})),t.TRIAL_REMINDER_DESCRIPTION=a.intl.formatMessage((0,s.defineMessage)({id:"T82l+d",defaultMessage:"We’ll remind you when you have a few days left"}));t.getTrialEndHeadingString=e=>a.intl.formatMessage((0,s.defineMessage)({id:"QbdfDT",defaultMessage:"Trial ends: {ending_date}"}),{ending_date:e}),t.TRIAL_END_DESCRIPTION=a.intl.formatMessage((0,s.defineMessage)({id:"mfvMRy",defaultMessage:"Your trial ends. Upgrade to continue using your premium plan"}))})),define("metaserver/static/js/growth/ui/trial_timeline_modal/timeline",["require","exports","tslib","classnames","metaserver/static/js/growth/ui/trial_timeline_modal/trial_timeline_modal.module.css","react"],(function(e,t,a,s,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimelineConnector=t.TimelineIcon=t.TimelineSeparator=t.TimelineContent=t.TimelineItem=t.Timeline=void 0,s=a.__importDefault(s),n=a.__importDefault(n),r=a.__importDefault(r);t.Timeline=({children:e})=>r.default.createElement("ul",{className:n.default.timeline},e),t.Timeline.displayName="Timeline";t.TimelineItem=({children:e})=>r.default.createElement("li",{className:n.default.timelineItem},e),t.TimelineItem.displayName="TimelineItem";t.TimelineContent=({children:e,bottomMargin:t=!1})=>r.default.createElement("div",{className:(0,s.default)({[n.default.timelineContentBottomMargin]:t})},e),t.TimelineContent.displayName="TimelineContent";t.TimelineSeparator=({children:e})=>r.default.createElement("div",{className:n.default.timelineSeparator},e),t.TimelineSeparator.displayName="TimelineSeparator";t.TimelineIcon=({children:e})=>r.default.createElement("div",{className:n.default.timelineIcon},e),t.TimelineIcon.displayName="TimelineIcon";t.TimelineConnector=()=>r.default.createElement("div",{className:n.default.timelineConnector}),t.TimelineConnector.displayName="TimelineConnector"})),define("metaserver/static/js/growth/ui/trial_timeline_modal/trial_timeline_modal",["require","exports","tslib","dig-components/buttons","dig-components/icons","dig-components/icons/src","dig-components/modal","dig-components/typography","metaserver/static/js/clean/analytics","metaserver/static/js/growth/ui/trial_timeline_modal/context","metaserver/static/js/growth/ui/trial_timeline_modal/strings","metaserver/static/js/growth/ui/trial_timeline_modal/timeline","metaserver/static/js/growth/ui/trial_timeline_modal/utils","metaserver/static/js/growth/ui/util","react"],(function(e,t,a,s,n,r,o,l,i,c,d,u,m,f,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TrialTimelineModal=void 0,_=a.__importDefault(_);t.TrialTimelineModal=({open:e,duration:t,buttonText:a,buttonHref:g,onRequestClose:p,loggingData:E})=>{const v=(0,m.addDays)(new Date,t),{selectedAddons:M}=_.default.useContext(c.TrialTimelineModalContext);return _.default.createElement(o.Modal,{open:e,isCentered:!0,onRequestClose:e=>{i.ProEventsLogger.log("robe_popup_click_x",E),null==p||p(e)},withCloseButton:d.CLOSE,"aria-labelledby":"trial-modal-title"},_.default.createElement(o.Modal.Header,{hasBottomSpacing:"title-standard"},_.default.createElement(o.Modal.Title,{id:"trial-modal-title"},d.TRIAL_MODAL_TITLE)),_.default.createElement(o.Modal.Body,null,_.default.createElement(u.Timeline,null,_.default.createElement(u.TimelineItem,null,_.default.createElement(u.TimelineSeparator,null,_.default.createElement(u.TimelineIcon,null,_.default.createElement(n.UIIcon,{src:r.Twinkle2Line,role:"presentation"})),_.default.createElement(u.TimelineConnector,null)),_.default.createElement(u.TimelineContent,{bottomMargin:!0},_.default.createElement(l.Text,{variant:"label",tagName:"p",isBold:!0},(0,d.getTrialStartHeadingString)((0,m.formatShortDate)(new Date))),_.default.createElement(l.Text,{color:"faint"},d.TRIAL_START_DESCRIPTION))),_.default.createElement(u.TimelineItem,null,_.default.createElement(u.TimelineSeparator,null,_.default.createElement(u.TimelineIcon,null,_.default.createElement(n.UIIcon,{src:r.NotificationLine,role:"presentation"})),_.default.createElement(u.TimelineConnector,null)),_.default.createElement(u.TimelineContent,{bottomMargin:!0},_.default.createElement(l.Text,{variant:"label",tagName:"p",isBold:!0},d.TRIAL_REMINDER_HEADING),_.default.createElement(l.Text,{color:"faint"},d.TRIAL_REMINDER_DESCRIPTION))),_.default.createElement(u.TimelineItem,null,_.default.createElement(u.TimelineSeparator,null,_.default.createElement(u.TimelineIcon,null,_.default.createElement(n.UIIcon,{src:r.DropboxLine,role:"presentation"}))),_.default.createElement(u.TimelineContent,null,_.default.createElement(l.Text,{variant:"label",tagName:"p",isBold:!0},(0,d.getTrialEndHeadingString)((0,m.formatShortDate)(v))),_.default.createElement(l.Text,{color:"faint"},d.TRIAL_END_DESCRIPTION))))),_.default.createElement(o.Modal.Footer,{hasTopBorder:!0},_.default.createElement(s.Button,{variant:"primary",href:(0,f.replaceLinkConsideringAddon)(g,M),onClick:()=>{i.ProEventsLogger.log("robe_popup_click_link",E),i.ProEventsLogger.log("robe_cta_click",Object.assign(Object.assign({},E),{recommended_plan:E.plan,button_text:a}))}},a)))},t.TrialTimelineModal.displayName="TrialTimelineModal"})),define("metaserver/static/js/growth/ui/trial_timeline_modal/trial_timeline_modal.module.css",["require","exports","css!metaserver/static/js/growth/ui/trial_timeline_modal/trial_timeline_modal.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timelineContentBottomMargin=t.timelineConnector=t.timelineIcon=t.timelineSeparator=t.timelineItem=t.timeline=void 0,t.timeline="_timeline_vbqk2_1",t.timelineItem="_timeline-item_vbqk2_9",t.timelineSeparator="_timeline-separator_vbqk2_15",t.timelineIcon="_timeline-icon_vbqk2_23",t.timelineConnector="_timeline-connector_vbqk2_28",t.timelineContentBottomMargin="_timeline-content-bottom-margin_vbqk2_35";t.default={timeline:"_timeline_vbqk2_1",timelineItem:"_timeline-item_vbqk2_9",timelineSeparator:"_timeline-separator_vbqk2_15",timelineIcon:"_timeline-icon_vbqk2_23",timelineConnector:"_timeline-connector_vbqk2_28",timelineContentBottomMargin:"_timeline-content-bottom-margin_vbqk2_35"}})),define("metaserver/static/js/growth/ui/trial_timeline_modal/utils",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addDays=t.formatShortDate=void 0,t.formatShortDate=function(e){const t=Intl.DateTimeFormat("default",{month:"long",day:"numeric"}).formatToParts(e);return`${t.find(e=>"month"===e.type).value} ${t.find(e=>"day"===e.type).value}`},t.addDays=function(e,t){const a=new Date(e);return a.setDate(e.getDate()+t),a}})),define("metaserver/static/js/vault/components/vault_row_action",["require","exports","tslib","react","react-intl","dig-components/buttons","metaserver/static/js/account_page/widgets/plusplus/types","metaserver/static/js/datetime/datetime","metaserver/static/js/clean/ui/hoc","metaserver/static/js/clean/ui/snackbar","metaserver/static/js/vault/components/modals/modal_manager","metaserver/static/js/vault/components/modals/modal_renderer","metaserver/static/js/vault/constants","metaserver/static/js/vault/lib/api","metaserver/static/js/core/browser","typescript/component_libraries/vault/src/common/constants","typescript/component_libraries/vault/src/common/logging-types","typescript/component_libraries/vault/src/common/use-authentication-error-message","typescript/component_libraries/vault/src/components/vault-row-post-setup-context-menu/index"],(function(e,t,a,s,n,r,o,l,i,c,d,u,m,f,_,g,p,E,v){"use strict";var M;Object.defineProperty(t,"__esModule",{value:!0}),t.VaultRowAction=t.loggingFunctions=void 0,s=a.__importStar(s),_=a.__importStar(_),(function(e){e[e.NONE=0]="NONE",e[e.CONFIRM=1]="CONFIRM",e[e.OFFBOARDING_FEEDBACK=2]="OFFBOARDING_FEEDBACK",e[e.PASSWORD=3]="PASSWORD",e[e.DELETED=4]="DELETED"})(M||(M={}));const y=({vaultSetupState:e})=>{const[n,i]=(0,s.useState)(M.NONE),{setupText:m,deletedText:p}=b(),{openModal:y,closeModal:h}=(0,d.useModalManager)(),[w,S]=(0,s.useState)(!1),[T,C]=(0,s.useState)(""),[A,R]=(0,s.useState)(),{genericErrorText:N}=b(),I=e===o.VaultSetupState.COMPLETE,{errorMessage:x,cooldownSeconds:O}=(0,E.useAuthenticationErrorMessage)(A,l.format_time,N),k=()=>{t.loggingFunctions.logSelectVaultOpen(),_.redirect("/vault")},j=(0,s.useCallback)(e=>a.__awaiter(void 0,void 0,void 0,(function*(){var t,a;S(!0);try{yield(0,f.deleteVault)({password:e}),c.Snackbar.complete(p),i(M.OFFBOARDING_FEEDBACK)}catch(e){R(null!==(a=null===(t=e.error)||void 0===t?void 0:t.delete_error)&&void 0!==a?a:e),C("")}S(!1)})),[p]),D=(0,s.useCallback)(()=>{t.loggingFunctions.logSelectDeleteVaultConfirm(),I?i(M.PASSWORD):(j(""),i(M.OFFBOARDING_FEEDBACK))},[j,I]),L=(0,s.useCallback)(()=>{i(M.DELETED)},[]);(0,s.useEffect)(()=>{n===M.CONFIRM?y({id:u.VaultModals.DeletionConfirm,props:{errorMessage:x,loading:w,onCancel:()=>{t.loggingFunctions.logSelectDeleteVaultConfirmCancel(),i(M.NONE)},onDelete:D}}):n===M.OFFBOARDING_FEEDBACK?y({id:u.VaultModals.OffboardingFeedback,props:{onContinue:L}}):n===M.PASSWORD?y({id:u.VaultModals.DeletionPassword,props:{disabled:O>0,errorMessage:x,loading:w,onCancel:()=>{t.loggingFunctions.logSelectDeleteVaultPasswordCancel(),i(M.NONE)},onDelete:()=>j(T),onPasswordChange:C,password:T}}):h()},[n,y,x,w,O,T,h,I,j,D,L]);const P=(e===o.VaultSetupState.NO_PIN||e===o.VaultSetupState.COMPLETE)&&n!==M.DELETED;return s.default.createElement(s.default.Fragment,null,P?s.default.createElement(v.VaultRowPostSetupContextMenu,{onToggleOpen:t.loggingFunctions.logSelectVaultSettingsContext,onOpen:k,onDelete:()=>{t.loggingFunctions.logSelectDeleteVault(),i(M.CONFIRM)}}):s.default.createElement(r.Button,{variant:"transparent",onClick:k,"data-testid":g.TestTarget.ROW_ACTION_OPEN},m))};y.displayName="InternalVaultRowAction";const b=()=>{const e=(0,n.useIntl)();return{setupText:e.formatMessage({id:"3IGaSm",defaultMessage:"Set Up"}),deletedText:e.formatMessage({id:"kBy1Ss",defaultMessage:"Vault has been deleted"}),wrongPinText:e.formatMessage({id:"FBhWHL",defaultMessage:"Wrong PIN, try again"}),genericErrorText:e.formatMessage({id:"Cs6e8c",defaultMessage:"Something went wrong. Please try again later"})}};t.loggingFunctions={logSelectVaultSettingsContext:()=>(0,f.logProductAnalyticsEvent)({actionSurface:p.AnalyticsEventActionSurface.SETTINGS,eventAction:p.AnalyticsEventAction.SELECT,eventObject:p.AnalyticsEventObject.VAULT_SETTINGS_CONTEXT}),logSelectDeleteVault:()=>(0,f.logProductAnalyticsEvent)({actionSurface:p.AnalyticsEventActionSurface.SETTINGS,eventAction:p.AnalyticsEventAction.SELECT,eventObject:p.AnalyticsEventObject.DELETE_VAULT}),logSelectDeleteVaultConfirm:()=>(0,f.logProductAnalyticsEvent)({actionSurface:p.AnalyticsEventActionSurface.SETTINGS,eventAction:p.AnalyticsEventAction.SELECT,eventObject:p.AnalyticsEventObject.DELETE_VAULT_CONFIRM}),logSelectDeleteVaultConfirmCancel:()=>(0,f.logProductAnalyticsEvent)({actionSurface:p.AnalyticsEventActionSurface.SETTINGS,eventAction:p.AnalyticsEventAction.SELECT,eventObject:p.AnalyticsEventObject.DELETE_VAULT_CONFIRM_CANCEL}),logSelectDeleteVaultPasswordCancel:()=>(0,f.logProductAnalyticsEvent)({actionSurface:p.AnalyticsEventActionSurface.SETTINGS,eventAction:p.AnalyticsEventAction.SELECT,eventObject:p.AnalyticsEventObject.DELETE_VAULT_PASSWORD_CANCEL}),logSelectVaultOpen:()=>(0,f.logProductAnalyticsEvent)({actionSurface:p.AnalyticsEventActionSurface.SETTINGS,eventAction:p.AnalyticsEventAction.SELECT,eventObject:p.AnalyticsEventObject.VAULT_OPEN})},t.VaultRowAction=(0,i.withCSS)(m.VAULT_STYLESHEETS)(y)})),define("typescript/component_libraries/vault/src/components/vault-row-post-setup-context-menu/index",["require","exports","tslib","react","react-intl","dig-components/buttons","dig-components/menu","dig-components/icons","dig-components/icons/src","typescript/component_libraries/vault/src/common/constants"],(function(e,t,a,s,n,r,o,l,i,c){"use strict";var d;Object.defineProperty(t,"__esModule",{value:!0}),t.VaultRowPostSetupContextMenu=void 0,s=a.__importDefault(s),(function(e){e.OPEN="open",e.DELETE="delete,"})(d||(d={}));t.VaultRowPostSetupContextMenu=({onOpen:e,onDelete:t,onToggleOpen:a})=>{const{openAction:n,deleteAction:m,showActions:f}=u();return s.default.createElement(o.Menu.Wrapper,{onSelection:a=>{switch(a){case d.OPEN:e();break;case d.DELETE:t()}},"data-testid":c.TestTarget.ROW_CONTEXT_MENU,onToggle:e=>{e.isOpen&&a()}},({getTriggerProps:e,getContentProps:t})=>s.default.createElement(s.default.Fragment,null,s.default.createElement(r.IconButton,Object.assign({variant:"transparent","data-testid":c.TestTarget.ROW_CONTEXT_MENU_SHOW},e()),s.default.createElement(l.UIIcon,{src:i.MoreHorizontalLine,"aria-label":f})),s.default.createElement(o.Menu.Content,Object.assign({},t()),s.default.createElement(o.Menu.Segment,null,s.default.createElement(o.Menu.ActionItem,{value:d.OPEN,"data-testid":c.TestTarget.ROW_CONTEXT_MENU_OPEN},n),s.default.createElement(o.Menu.ActionItem,{value:d.DELETE,"data-testid":c.TestTarget.ROW_CONTEXT_MENU_DELETE},m)))))};const u=()=>{const e=(0,n.useIntl)();return{openAction:e.formatMessage({id:"l8r7nu",defaultMessage:"Open"}),deleteAction:e.formatMessage({id:"bh4Con",defaultMessage:"Delete Vault"}),showActions:e.formatMessage({id:"V5oSno",defaultMessage:"Show actions"})}}})),define("metaserver/static/js/sharing/default_permissions_web_uploads/utils",["require","exports","tslib","metaserver/static/js/clean/filetypes","metaserver/static/js/file_uploader/constants","metaserver/static/js/user_metadata/api","metaserver/static/js/core/exception"],(function(e,t,a,s,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUpdateDefaultPermissionAtUpload=t.ShouldUpdateDefaultPermission=t.setDefaultPermissionForFolderUploads=t.getDefaultPermissionForFolderUploads=t.DefaultPermissionForFolderUploadsOptions=void 0,o=a.__importStar(o);var l,i;function c(e){return a.__awaiter(this,void 0,void 0,(function*(){const t=(yield(0,r.getUserMetadata)(["DEFAULT_PERMISSION_FOR_FOLDER_UPLOADS"],e)).DEFAULT_PERMISSION_FOR_FOLDER_UPLOADS;return void 0===t?0:Number(t)}))}(function(e){e[e.UNDEFINED=0]="UNDEFINED",e[e.INHERIT=1]="INHERIT",e[e.NOT_INHERIT=2]="NOT_INHERIT"})(l=t.DefaultPermissionForFolderUploadsOptions||(t.DefaultPermissionForFolderUploadsOptions={})),t.getDefaultPermissionForFolderUploads=c,t.setDefaultPermissionForFolderUploads=function(e,t){return a.__awaiter(this,void 0,void 0,(function*(){try{yield(0,r.setUserMetadata)({DEFAULT_PERMISSION_FOR_FOLDER_UPLOADS:e},t)}catch(e){o.reportException({err:e,severity:o.SEVERITY.NON_CRITICAL,tags:["default_permission_folder_uploads.JSException"]})}}))},(function(e){e[e.NO_ACTION=0]="NO_ACTION",e[e.SHOW_DEFAULT_PERMISSION_MODAL=1]="SHOW_DEFAULT_PERMISSION_MODAL",e[e.SET_DEFAULT_PERMISSION_NOT_INHERIT=2]="SET_DEFAULT_PERMISSION_NOT_INHERIT"})(i=t.ShouldUpdateDefaultPermission||(t.ShouldUpdateDefaultPermission={})),t.shouldUpdateDefaultPermissionAtUpload=function(e,t){return a.__awaiter(this,void 0,void 0,(function*(){if((yield c(e))!==l.UNDEFINED)return i.NO_ACTION;const a=t.filter(e=>null!==e.teamAccessLevel&&e.type===s.FileTypes.FOLDER);return 0===a.length?i.NO_ACTION:(function(e){const t=e[0].teamAccessLevel;if(e.every(e=>e.teamAccessLevel===t&&(e.teamAccessLevel===n.TeamAccessLevel.INHERIT||e.teamAccessLevel===n.TeamAccessLevel.WRITER)))return!0;return!1})(a)?i.SHOW_DEFAULT_PERMISSION_MODAL:i.SET_DEFAULT_PERMISSION_NOT_INHERIT}))}})),define("metaserver/static/js/clean/ui/file_modal_controller",["require","exports","tslib","react","js/filepath/filepath","metaserver/static/js/clean/ui/file_modals","metaserver/static/js/components/ui/modal_controller","metaserver/static/js/sharing/gating_util","metaserver/static/js/sync_everything/components/modals/backup_delete_device_folder_modal"],(function(e,t,a,s,n,r,o,l,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showBackupDeleteDeviceFolderModal=t.showMoveErrorModal=t.showFileSystemWarningsModal=t.showConfirmOwnershipTransferModal=t.showNoAccess=t.showContentManagerBridge=t.showDelete=t.showPermanentlyDelete=void 0,s=a.__importDefault(s),n=a.__importStar(n),o=a.__importStar(o),t.showPermanentlyDelete=function(e,t,a,n=!0){const l=s.default.createElement(r.PermanentlyDeleteModal,{files:t,userId:e.id,onDelete:a,shouldLogDelete:n});o.mountModal(l)},t.showDelete=function(e,t,a,n,l,i=!0){const c=a.isInsideSharedFolder||a.isNonUserRelativeContext&&a.isCurrentlyInRoot,d=a.isNonUserRelativeContext,u=s.default.createElement(r.DeleteFileModal,{files:t,user:e,isNonUserRelativeContext:d,parentSharedFolderName:c?n:null,onDelete:l,shouldLogDelete:i});o.mountModal(u)},t.showContentManagerBridge=function(e,t,a){const n=s.default.createElement(r.ContentManagerBridgeModal,{files:e,type:t,isLimitedTeam:a});o.mountModal(n)},t.showNoAccess=function(e,t,a){const i=s.default.createElement(r.NoAccessFolderModal,{folderName:n.filename(t),folderPath:t,userIsSameTeam:!(!e.team_dbtid||!a.teamFolderOwnerTeamApiId||e.team_dbtid!==a.teamFolderOwnerTeamApiId),userIsSuperAdmin:l.GoldenGate.hasContentManagerAndSuperAdmin(e.id),userIsCdmMember:e.is_cdm_member});o.mountModal(i)},t.showConfirmOwnershipTransferModal=function(e){const t=s.default.createElement(r.ConfirmOwnershipTransferModal,{onAccept:e});o.mountModal(t)},t.showFileSystemWarningsModal=function(e){o.mountModal(s.default.createElement(r.FileSystemWarningsModal,Object.assign({},e)))},t.showMoveErrorModal=function(e){o.mountModal(s.default.createElement(r.MoveErrorModal,Object.assign({},e)))},t.showBackupDeleteDeviceFolderModal=function(e){o.mountModal(s.default.createElement(i.BackupDeleteDeviceFolderModal,Object.assign({},e)))}})),define("metaserver/static/js/clean/ui/file_modals",["require","exports","tslib","react","react-intl","dig-components/buttons","dig-components/modal","dig-components/typography","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/clean/em_string","js/filepath/filepath","metaserver/static/js/clean/filetypes","metaserver/static/js/pnm/constants","metaserver/static/js/pnm/utils","metaserver/static/js/browse/action_logger","metaserver/static/js/ux_analytics/utils","metaserver/static/js/clean/viewer","metaserver/static/js/clean/web_user_action_events","metaserver/static/js/core/browser","metaserver/static/js/core/i18n","metaserver/static/js/files_view/util","metaserver/static/js/core/browser_detection","metaserver/static/js/action_bar/file_actions/portable/delete/strings","metaserver/static/js/browse/data/hooks","metaserver/static/js/clean/ui/file_modals.module.css"],(function(e,t,a,s,n,r,o,l,i,c,d,u,m,f,_,g,p,E,v,M,y,b,h,w,S){"use strict";function T(t){return a.__awaiter(this,void 0,void 0,(function*(){const{goToContentManagerForPath:s}=yield new Promise((t,a)=>{e(["metaserver/static/js/sharing/content_manager"],t,a)}).then(a.__importStar);s(t)}))}function C(){s.default.useEffect(()=>o.Modal.setAppElement(document.getElementById("embedded-app")||document.body),[])}Object.defineProperty(t,"__esModule",{value:!0}),t.MoveErrorModal=t.FileSystemWarningsModal=t.ConfirmOwnershipTransferModal=t.NoAccessFolderModal=t.ContentManagerBridgeModal=t.DeleteFileModal=t.showPurgeModal=t.showUnifiedTrashModal=t.PermanentlyDeleteModal=void 0,s=a.__importDefault(s),d=a.__importStar(d),v=a.__importStar(v),b=a.__importStar(b),S=a.__importDefault(S);t.PermanentlyDeleteModal=({userId:e,onDelete:t,files:a,shouldLogDelete:n=!0})=>{const[i,c]=s.default.useState(!0);C();const m=()=>{c(!1)},f=()=>1===a.length&&a[0].type===u.FileTypes.SHARED_FOLDER,g=(()=>{const e=a.length;return f()?M.intl.formatMessage({id:"KwecgT",defaultMessage:"Remove access to folder?"}):M.intl.formatMessage({id:"HbIa1K",defaultMessage:"{count, plural, one{Permanently delete {count} file?} other{Delete {count} items permanently?}}"},{count:e})})();return s.default.createElement(o.Modal,{open:i,width:"small",isCentered:!0,onRequestClose:m,withCloseButton:M.intl.formatMessage({id:"a2rDhR",defaultMessage:"Close"})},s.default.createElement(o.Modal.Header,{hasBottomSpacing:"title-small"},s.default.createElement(l.Title,{size:"small"},g)),s.default.createElement(o.Modal.Body,{hasVerticalSpacing:!1},s.default.createElement(l.Text,null,(()=>{const e=a.length;if(1===e){const e=d.filename(a[0].fq_path);return f()?M.intl.formatMessage({id:"Mwm/ks",defaultMessage:"Are you sure you want to remove your access to <strong>{filename}</strong>? It will no longer be viewable in your list of shared folders, and you won’t be able to re-add it to your Dropbox unless you’re re-invited."},{strong:e=>s.default.createElement(l.Text,{isBold:!0},e),filename:e}):M.intl.formatMessage({id:"fd1oHs",defaultMessage:"Are you sure you want to delete <strong>{filename}</strong> from your Dropbox permanently?"},{strong:e=>s.default.createElement(l.Text,{isBold:!0},e),filename:e})}return s.default.createElement("span",null,M.intl.formatMessage({id:"fXXSLA",defaultMessage:"{count, plural, one{Are you sure you want to permanently delete {count} item from your Dropbox?} other{Are you sure you want to permanently delete {count} items from your Dropbox?}}"},{count:e}))})())),s.default.createElement(o.Modal.Footer,null,s.default.createElement(r.Button,{variant:"opacity",onClick:m},M.intl.formatMessage({id:"1X+vxM",defaultMessage:"Cancel"})),s.default.createElement(r.Button,{variant:"primary",onClick:()=>{n&&(0,_.logFileOperationModalClick)({uid:e,event_name:E.WebUserActionLogEvent.PERMANENT_DELETE_ACCEPT_CLICK}),t()}},f()?M.intl.formatMessage({id:"ohh7kh",defaultMessage:"Remove my access"}):M.intl.formatMessage({id:"89Buqa",defaultMessage:"Delete permanently"}))))},t.PermanentlyDeleteModal.displayName="PermanentlyDeleteModal";t.showUnifiedTrashModal=function(t){const s=()=>(({files:e,context:t,userId:a,onRestore:s})=>{e||(e=[{fq_path:t.currentFQPath,ns_path:t.currentNSPath,ns_id:t.currentNSID}]),s(a,e)})(t),{userId:n,context:r,files:o}=t;new Promise((t,a)=>{e(["metaserver/static/js/trash/trash_modal_util"],t,a)}).then(a.__importStar).then(({openTrashModalFromBrowseFiles:e})=>{e({userId:n,context:r,files:o,onRestore:s})})},t.showPurgeModal=function(t){const{userId:s,context:n,files:r}=t,o=()=>(({files:e,context:t,userId:a,onPurge:s})=>{e||(e=[{fq_path:t.currentFQPath,ns_path:t.currentNSPath,ns_id:t.currentNSID}]),s(a,e)})(t);new Promise((t,a)=>{e(["metaserver/static/js/trash/trash_modal_util"],t,a)}).then(a.__importStar).then(({openPurgeModalFromBrowseFiles:e})=>{e({userId:s,context:n,files:r,onPurge:o})})};const A=({files:e})=>1===e.length&&e[0].target_ns;t.DeleteFileModal=({files:e,user:t,parentSharedFolderName:a,onDelete:n,isNonUserRelativeContext:i,shouldLogDelete:c=!0})=>{var u;const v=(0,w.useBackupState)(),S=null!==(u=null==v?void 0:v.backupInfoByFile(e[0]))&&void 0!==u?u:void 0,[T,R]=s.default.useState(!0);C();const N=()=>{const e=p.Viewer.get_viewer().team_name;return e?"‘"+e+"’ ":""},I=()=>{R(!1),(0,g.dispatchModalClosed)()};return s.default.createElement(o.Modal,{open:T,isCentered:!0,onRequestClose:I,onAfterOpen:()=>{(0,g.dispatchModalOpened)()},withCloseButton:M.intl.formatMessage({id:"a2rDhR",defaultMessage:"Close"})},s.default.createElement(o.Modal.Header,{hasBottomSpacing:"title-small"},s.default.createElement(l.Title,{size:"small"},(({files:e,backupInfo:t})=>{if(e.length<1)return"";if(1===e.length){const a=e[0],n=(0,y.getFilename)(a);if((0,f.hasValidLinkNode)(a.per_node_metadata)){return(0,f.getLinkNodeAction)(a.per_node_metadata)===m.BACKUP_PRE_SETUP_ACTION?M.intl.formatMessage({id:"KQOE+H",defaultMessage:"Remove feature?"}):M.intl.formatMessage({id:"SI8Kt7",defaultMessage:"Remove {firstFilename}?"},{firstFilename:n})}return"cb"===(null==t?void 0:t.type)?t.usesAnchors?M.intl.formatMessage(h.BACKUP_DELETE_TITLE_ANCHORS,{folderName:(0,f.getDisplayedFilename)(n),backupName:t.name}):M.intl.formatMessage(h.BACKUP_DELETE_TITLE,{u:e=>s.default.createElement("span",{style:{textDecoration:"underline"}},e)}):e[0].is_dir?A({files:e})?M.intl.formatMessage({id:"Kwsqq2",defaultMessage:"Remove shared folder?"}):M.intl.formatMessage({id:"LhL/zj",defaultMessage:"Delete folder?"}):M.intl.formatMessage({id:"Bq/2xV",defaultMessage:"Delete file?"})}return M.intl.formatMessage({id:"dNH/l9",defaultMessage:"{count, plural, one{Delete {count} item?} other{Delete {count} items?}}"},{count:e.length})})({files:e,backupInfo:S}))),s.default.createElement(o.Modal.Body,{hasVerticalSpacing:!1,className:"uxa-modal",id:"delete-file-modal"},s.default.createElement(l.Text,null,(()=>{if(!t||!e||0===e.length)return"";const n=t.is_cdm_member,r=e[0].target_ns,o=!(!t||!e||0===e.length)&&t.is_cdm_member&&e[0].ns_id===t.root_ns_id&&2===e[0].ns_path.split("/").length,c=e.filter(e=>e.target_ns).length,u=e[0];let _=d.filename(u.fq_path);if((0,f.hasValidLinkNode)(u.per_node_metadata)){const e=(e=>{const t=(0,f.getLinkNodeAction)(e.per_node_metadata);if(!t)return null;switch(t){case m.BACKUP_PRE_SETUP_ACTION:return M.intl.formatMessage({id:"qHAlmH",defaultMessage:"If you change your mind, you can still find it in your Dropbox app preferences."});case m.PASSWORDS_PRE_SETUP_ACTION:return M.intl.formatMessage({id:"0ic7p5",defaultMessage:"You can still find Dropbox Passwords in the app store or your Dropbox settings if you change your mind."});case m.PASSWORDS_POST_SETUP_ACTION:return M.intl.formatMessage({id:"nK3mdw",defaultMessage:"This won’t delete the Dropbox Passwords app or any of the accounts you saved there."});case m.VAULT_PRE_SETUP_ACTION:return M.intl.formatMessage({id:"cI8hTT",defaultMessage:"If you change your mind, you can still find Vault in your Dropbox settings."})}return null})(u);if(e)return e}else(0,f.shouldHideExtension)(u.per_node_metadata)&&(_=d.filename_without_extension(_));const g={filename:_,shared_folder_name:a,b:e=>s.default.createElement(l.Text,{isBold:!0},e),item_count:e.length,team_name:N()};return null!=a?1===e.length?o?M.intl.formatMessage({id:"Cf14JO",defaultMessage:"Are you sure you want to delete <b>{filename}</b> from your {team_name}workspace?"},g):M.intl.formatMessage({id:"rvADKY",defaultMessage:"Are you sure you want to delete <b>{filename}</b> from the shared folder ‘{shared_folder_name}’?"},g):o?M.intl.formatMessage({id:"ZFygrn",defaultMessage:"Are you sure you want to delete {item_count} items from your {team_name}workspace?"},g):M.intl.formatMessage({id:"g1njQQ",defaultMessage:"Are you sure you want to delete {item_count} items from the shared folder ‘{shared_folder_name}’?"},g):1===e.length&&"cb"===(null==S?void 0:S.type)?S.usesAnchors?M.intl.formatMessage(h.BACKUP_DELETE_CONTENT_ANCHORS,{folderName:(0,f.getDisplayedFilename)(_),backupName:S.name}):b.mac?M.intl.formatMessage(h.BACKUP_DELETE_CONTENT_MAC,{b:e=>s.default.createElement(l.Text,{isBold:!0},e)}):M.intl.formatMessage(h.BACKUP_DELETE_CONTENT_WIN,{b:e=>s.default.createElement(l.Text,{isBold:!0},e)}):1===e.length&&r&&!i?n?M.intl.formatMessage({id:"Lrgdx4",defaultMessage:"Are you sure you want to remove the shared folder <b>{filename}</b> from your team member folder? This folder will stay shared with any existing members. You can re-add it later."},g):M.intl.formatMessage({id:"oS1+mX",defaultMessage:"Are you sure you want to remove the shared folder <b>{filename}</b> from your Dropbox? This folder will stay shared with any existing members. You can re-add it later."},g):1===e.length?n?M.intl.formatMessage({id:"emsobI",defaultMessage:"Are you sure you want to delete <b>{filename}</b> from your team member folder?"},g):M.intl.formatMessage({id:"8TOnv7",defaultMessage:"Are you sure you want to delete <b>{filename}</b> from your Dropbox?"},g):c>0?n?M.intl.formatMessage({id:"+IgAux",defaultMessage:"{count, plural, one{Are you sure you want to delete {item_count} items, including {count} shared folder, from your team member folder?} other{Are you sure you want to delete {item_count} items, including {count} shared folders, from your team member folder?}}"},{count:c,item_count:e.length}):M.intl.formatMessage({id:"X9W8tF",defaultMessage:"{count, plural, one{Are you sure you want to delete {item_count} items, including {count} shared folder, from your Dropbox?} other{Are you sure you want to delete {item_count} items, including {count} shared folders, from your Dropbox?}}"},{count:c,item_count:e.length}):n?M.intl.formatMessage({id:"BHsBCZ",defaultMessage:"Are you sure you want to delete {item_count} items from your team member folder?"},g):M.intl.formatMessage({id:"QBUU3e",defaultMessage:"Are you sure you want to delete {item_count} items from your Dropbox?"},g)})())),s.default.createElement(o.Modal.Footer,null,s.default.createElement(r.Button,{variant:"opacity",onClick:I},M.intl.formatMessage({id:"1X+vxM",defaultMessage:"Cancel"})),s.default.createElement(r.Button,{variant:"primary",onClick:()=>{c&&(0,_.logFileOperationModalClick)({uid:t.id,event_name:E.WebUserActionLogEvent.DELETE_ACCEPT_CLICK}),n(),R(!1),(0,g.dispatchModalClosed)()},autoFocus:!0},"cb"===(null==S?void 0:S.type)?S.usesAnchors?M.intl.formatMessage({id:"QRc/Yv",defaultMessage:"Confirm"}):M.intl.formatMessage({id:"NBWMEU",defaultMessage:"Yes, delete"}):A({files:e})&&!i?M.intl.formatMessage({id:"iRdFJf",defaultMessage:"Remove"}):M.intl.formatMessage({id:"/3FrEg",defaultMessage:"Delete"}))))},t.DeleteFileModal.displayName="DeleteFileModal";t.ContentManagerBridgeModal=e=>{const[t,a]=s.default.useState(!0);C();return s.default.createElement(o.Modal,{open:t,width:"small",isCentered:!0,onRequestClose:()=>a(!1),withCloseButton:M.intl.formatMessage({id:"a2rDhR",defaultMessage:"Close"})},s.default.createElement(o.Modal.Body,{hasVerticalSpacing:!1},s.default.createElement(l.Text,null,"archive"===e.type?M.intl.formatMessage({id:"vK+GN+",defaultMessage:"You can archive team folders in the Admin Console."}):M.intl.formatMessage({id:"MXWf1w",defaultMessage:"You can rename team folders in the Admin Console."}))),s.default.createElement(o.Modal.Footer,null,s.default.createElement(r.Button,{variant:"opacity",onClick:()=>a(!1)},M.intl.formatMessage({id:"2A+wkW",defaultMessage:"Cancel"})),s.default.createElement(r.Button,{variant:"primary",onClick:()=>{const t=e.files[0].fq_path;T({containingFolder:d.parent_dir(t),filenameToSelect:d.filename(t)})}},M.intl.formatMessage({id:"YQ7Jrt",defaultMessage:"Go to Admin Console"}))))},t.ContentManagerBridgeModal.displayName="ContentManagerBridgeModal";t.NoAccessFolderModal=e=>{const[t,a]=s.default.useState(!0);C();const d=e.userIsSuperAdmin&&e.userIsSameTeam;let u;return u=d?(0,n.defineMessage)({id:"QbcW7e",defaultMessage:"Access to “{folder_name}” is restricted, but you can access it in the admin console."}):e.userIsSameTeam?(0,n.defineMessage)({id:"H9bzwx",defaultMessage:"Access to “{folder_name}” is restricted."}):(0,n.defineMessage)({id:"f+a3JG",defaultMessage:"You don’t have permission to open the folder “{folder_name}”."}),s.default.createElement(o.Modal,{open:t,width:"small",isCentered:!0,onRequestClose:()=>a(!1),withCloseButton:M.intl.formatMessage({id:"a2rDhR",defaultMessage:"Close"})},s.default.createElement(o.Modal.Header,{hasBottomSpacing:"title-small"},s.default.createElement(l.Title,{size:"small"},d?M.intl.formatMessage({id:"huBwTA",defaultMessage:"View this folder in the admin console"}):M.intl.formatMessage({id:"rAPGQb",defaultMessage:"Can’t open this folder"}))),s.default.createElement(o.Modal.Body,{hasVerticalSpacing:!1},s.default.createElement(l.Text,null,M.intl.formatMessage(u,{folder_name:c.Emstring.em_snippet(e.folderName,i.SNIPPET_SIZES.FILENAME)}))),s.default.createElement(o.Modal.Footer,null,d?s.default.createElement(r.Button,{variant:"opacity",onClick:()=>a(!1)},M.intl.formatMessage({id:"zROW58",defaultMessage:"Cancel"})):null,s.default.createElement(r.Button,{variant:"primary",onClick:()=>{a(!1),e.userIsSuperAdmin&&e.userIsSameTeam&&T({containingFolder:e.folderPath})}},d?M.intl.formatMessage({id:"05xjxH",defaultMessage:"View in admin console"}):M.intl.formatMessage({id:"QHYG8r",defaultMessage:"OK"}))))},t.NoAccessFolderModal.displayName="NoAccessFolderModal";t.ConfirmOwnershipTransferModal=e=>{const[t,a]=s.default.useState(!0);return s.default.createElement(o.Modal,{open:t,width:"small",isCentered:!0,onRequestClose:()=>a(!1),withCloseButton:M.intl.formatMessage({id:"a2rDhR",defaultMessage:"Close"})},s.default.createElement(o.Modal.Header,{hasBottomSpacing:"title-small"},s.default.createElement(l.Title,{size:"small"},M.intl.formatMessage({id:"kJ1NVK",defaultMessage:"Move items?"}))),s.default.createElement(o.Modal.Body,{hasVerticalSpacing:!1},s.default.createElement(l.Text,null,M.intl.formatMessage({id:"h7t7QA",defaultMessage:"If you make this move, you'll no longer be the owner of some of the folders."}))),s.default.createElement(o.Modal.Footer,null,s.default.createElement(r.Button,{variant:"opacity",onClick:()=>a(!1)},M.intl.formatMessage({id:"zROW58",defaultMessage:"Cancel"})),s.default.createElement(r.Button,{variant:"primary",onClick:()=>{e.onAccept(),a(!1)}},M.intl.formatMessage({id:"CPIIvy",defaultMessage:"Move items anyways"}))))},t.ConfirmOwnershipTransferModal.displayName="ConfirmOwnershipTransferModal";t.FileSystemWarningsModal=({confirmText:e,fsws:t,onFinalAccept:a,onAbortAction:n})=>{const[i,c]=s.default.useState(!0),[d,u]=s.default.useState(0);C();const m=t[d],f=()=>{n&&n(),c(!1)};return s.default.createElement(o.Modal,{open:i,width:"small",isCentered:!0,onRequestClose:f,className:"fsw-modal"},s.default.createElement(o.Modal.Header,{className:S.default.fswModalHeader,hasBottomSpacing:"title-small"},s.default.createElement(l.Title,{size:"small"},m.title)),s.default.createElement(o.Modal.Body,{hasVerticalSpacing:!1},s.default.createElement(l.Text,null,m.text)),s.default.createElement(o.Modal.Footer,null,Boolean(m.learn_more)&&s.default.createElement(r.Button,{variant:"transparent",onClick:()=>{v.open_tab(m.learn_more)}},M.intl.formatMessage({id:"SVhp8o",defaultMessage:"Learn more"})),m.blocking?s.default.createElement("span",null):s.default.createElement(r.Button,{variant:"opacity",onClick:f},M.intl.formatMessage({id:"PVls0A",defaultMessage:"Cancel"})),s.default.createElement(r.Button,{variant:"primary",onClick:()=>{d+1===t.length?(m.blocking?n&&n():a(),c(!1)):u(d+1)}},m.blocking?M.intl.formatMessage({id:"RHBGDh",defaultMessage:"OK"}):Boolean(m.confirm_text)?m.confirm_text:e)))},t.FileSystemWarningsModal.displayName="FileSystemWarningsModal";t.MoveErrorModal=e=>{const[t,a]=s.default.useState(!0),n=()=>{e.buttonString&&(a(!1),e.onClick())};return s.default.createElement(o.Modal,{open:t,width:"small",isCentered:!0,onRequestClose:n},s.default.createElement(o.Modal.Header,{hasBottomSpacing:"title-small"},s.default.createElement(l.Title,{size:"small"},e.title)),s.default.createElement(o.Modal.Body,{hasVerticalSpacing:!1},s.default.createElement(l.Text,null,e.content)),s.default.createElement(o.Modal.Footer,null,s.default.createElement(r.Button,{variant:"transparent",onClick:()=>{v.open_tab(e.learnMoreLink)}},M.intl.formatMessage({id:"7ITdJ0",defaultMessage:"Learn more"})),Boolean(e.buttonString)&&s.default.createElement(r.Button,{variant:"opacity",onClick:n},e.buttonString),s.default.createElement(r.Button,{variant:"primary",onClick:()=>a(!1)},M.intl.formatMessage({id:"0qPam6",defaultMessage:"OK"}))))},t.MoveErrorModal.displayName="MoveErrorModal"})),define("metaserver/static/js/clean/ui/file_modals.module.css",["require","exports","css!metaserver/static/js/clean/ui/file_modals.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fswModalHeader=void 0,t.fswModalHeader="_fsw-modal-header_yn013_1";t.default={fswModalHeader:"_fsw-modal-header_yn013_1"}})),define("metaserver/static/js/file_uploader/error_handling",["require","exports","metaserver/static/js/file_uploader/constants","metaserver/static/js/modules/constants/trademark","metaserver/static/js/core/exception","metaserver/static/js/core/i18n"],(function(e,t,a,s,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportUploadException=t.getErrorMessage=void 0,t.getErrorMessage=function(e){switch(e){case a.UploadErrorType.OVER_QUOTA_ERROR:return r.intl.formatMessage({id:"fnG2Ew",defaultMessage:"This file can’t be uploaded because you are over your storage quota. If you believe this message to be in error, try refreshing the page."});case a.UploadErrorType.LOCKED_TEAM_ERROR:return r.intl.formatMessage({id:"tQ1bJN",defaultMessage:"Can’t upload. Your team no longer has full use of {trademark_business} features."},{trademark_business:s.TRADEMARK_BUSINESS});case a.UploadErrorType.FILE_SIZE_ERROR:return r.intl.formatMessage({id:"4SqdmQ",defaultMessage:"This file is too large to upload using the Dropbox website. Please use the desktop client."});case a.UploadErrorType.HTTP_ERROR:return r.intl.formatMessage({id:"eIIEty",defaultMessage:"Something went wrong while uploading this file. There was a server error during the upload request."});case a.UploadErrorType.CONNECTION_ERROR:return r.intl.formatMessage({id:"Lp9J2f",defaultMessage:"Something went wrong while uploading this file. Check your connection to the internet and try again."});case a.UploadErrorType.FOLDER_SAFARI:return r.intl.formatMessage({id:"CeMx7Q",defaultMessage:"Can’t upload folders in Safari. Upload the files separately or try another browser."});case a.UploadErrorType.BLOCKS_MISSING_ERROR:case a.UploadErrorType.CHUNKS_NOT_ENABLED_ERROR:case a.UploadErrorType.BLOCK_INDEX_ERROR:case a.UploadErrorType.BLOCK_EMPTY_ERROR:case a.UploadErrorType.BLOB_EMPTY_ERROR:case a.UploadErrorType.BLOB_MISSING_ERROR:case a.UploadErrorType.CLIENT_HASH_DIGEST_ERROR:case a.UploadErrorType.FILE_READER_NULL_RESULT_ERROR:return r.intl.formatMessage({id:"RVsdJD",defaultMessage:"Something went wrong while uploading this file."});case a.UploadErrorType.COMMIT_HTTP_ERROR:case a.UploadErrorType.UPLOAD_BLOCK_ERROR:case a.UploadErrorType.SERVER_RESPONSE_ERROR:case a.UploadErrorType.SERVER_TOKEN_EMPTY_ERROR:case a.UploadErrorType.SERVER_TOKENS_MISSING_ERROR:case a.UploadErrorType.SERVER_HASH_RESPONSE_ERROR:case a.UploadErrorType.BLOCK_RUNTIME_ID_MISSING_ERROR:case a.UploadErrorType.CLIENT_HASH_EMPTY_ERROR:case a.UploadErrorType.SERVER_HASH_EMPTY_ERROR:case a.UploadErrorType.HASHES_NOT_EQUAL_ERROR:return r.intl.formatMessage({id:"eIIEty",defaultMessage:"Something went wrong while uploading this file. There was a server error during the upload request."});default:return r.intl.formatMessage({id:"RVsdJD",defaultMessage:"Something went wrong while uploading this file."})}},t.reportUploadException=function(e,t,s){switch(e){case a.UploadErrorType.BLOCKS_MISSING_ERROR:(0,n.reportException)({err:new Error("Blocks missing from web upload."),tags:["web_upload","blocks_missing"],severity:n.SEVERITY.CRITICAL,exc_extra:{filename:t,size:s}});break;case a.UploadErrorType.UPLOAD_BLOCK_ERROR:(0,n.reportException)({err:new Error("Server error encountered when trying to upload a block."),tags:["web_upload","upload_block_error"],severity:n.SEVERITY.CRITICAL,exc_extra:{filename:t,size:s}});break;case a.UploadErrorType.CHUNKS_NOT_ENABLED_ERROR:(0,n.reportException)({err:new Error("Chunks not enabled."),tags:["web_upload","chunks_not_enabled_error"],severity:n.SEVERITY.CRITICAL,exc_extra:{filename:t,size:s}});break;case a.UploadErrorType.SERVER_RESPONSE_ERROR:(0,n.reportException)({err:new Error("Server response error."),tags:["web_upload","server_response_error"],severity:n.SEVERITY.CRITICAL,exc_extra:{filename:t,size:s}});break;case a.UploadErrorType.HASHES_NOT_EQUAL_ERROR:(0,n.reportException)({err:new Error("Client and server hashes are not equal."),tags:["web_upload","hashes_not_equal"],severity:n.SEVERITY.CRITICAL,exc_extra:{filename:t,size:s}});break;case a.UploadErrorType.CLIENT_HASH_DIGEST_ERROR:(0,n.reportException)({err:new Error("Client hash digest error."),tags:["web_upload","client_hash_digest_error"],severity:n.SEVERITY.CRITICAL,exc_extra:{filename:t,size:s}});break;case a.UploadErrorType.FILE_READER_NULL_RESULT_ERROR:(0,n.reportException)({err:new Error("File reader null result error."),tags:["web_upload","file_reader_null_result_error"],severity:n.SEVERITY.USER_ERROR,exc_extra:{filename:t,size:s}});break;case a.UploadErrorType.COMMIT_READINESS_ERROR:(0,n.reportException)({err:new Error("Commit readiness error."),tags:["web_upload","commit_readiness_error"],severity:n.SEVERITY.CRITICAL,exc_extra:{filename:t,size:s}})}}})),define("metaserver/static/js/file_uploader/oq_drag_drop_modal_types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UploaderOverQuotaModalContexts=void 0,(function(e){e.UNKNOWN="unknown",e.WENT_OQ_DURING_UPLOAD="went_oq_during_upload",e.ALREADY_OQ_DRAG_AND_DROP="already_oq_drag_and_drop",e.ALREADY_OQ_CLICK_BUTTON="already_oq_upload_button",e.LOCKED_TEAM_DRAG_AND_DROP="locked_team_drag_and_drop",e.LOCKED_TEAM_CLICK_BUTTON="locked_team_click_button"})(t.UploaderOverQuotaModalContexts||(t.UploaderOverQuotaModalContexts={}))})),define("metaserver/static/js/file_uploader/nearquota_upload_alt_action",["require","exports","tslib","react","metaserver/static/js/components/ui/css","metaserver/static/js/core/i18n","dig-components/banner","dig-components/buttons"],(function(e,t,a,s,n,r,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NearquotaUploadAltAction=t.getNearquotaUploadAltActionOQA=void 0,s=a.__importDefault(s);t.getNearquotaUploadAltActionOQA=(e,t)=>e&&t?`wb_nq_${e}_${"/h"===t?"ho":"fb"}`:"upl_nq";const i=e=>{const t=e.oqa?`?oqa=${e.oqa}`:"";return s.default.createElement("div",{className:"nearquota-alt-action"},s.default.createElement(o.Banner,{type:"warning"},s.default.createElement(o.Banner.Message,null,r.intl.formatMessage({id:"6DbW2J",defaultMessage:"You’re almost out of storage space."})),s.default.createElement(o.Banner.Actions,null,s.default.createElement(l.Button,{variant:"transparent",key:"nq-link",href:`/low-space${t}`},r.intl.formatMessage({id:"aIkHtJ",defaultMessage:"Add storage"})))))};i.displayName="NearquotaUploadAltActionComponent",t.NearquotaUploadAltAction=(0,n.requireCssWithComponent)(i,["/static/metaserver/static/css/nearquota_upload_alt_action-vflOyxyD8.css"])})),define("metaserver/static/js/file_uploader/inline_upload_status",["require","exports","tslib","react","metaserver/static/js/datetime/datetime","metaserver/static/js/clean/em_string","metaserver/static/js/growth/ui/rich_snackbar_actions/actions","metaserver/static/js/clean/ui/snackbar","metaserver/static/js/file_uploader/constants","metaserver/static/js/core/i18n","metaserver/static/js/modules/constants/trademark","metaserver/static/js/core/accessible_announce"],(function(e,t,a,s,n,r,o,l,i,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showInlineUploadStatusSnackbar=t.getUploadErrorReason=void 0,s=a.__importDefault(s),n=a.__importStar(n);var m;function f(e){return e.some(e=>e.status===i.FileStatusType.SET_PERMISSIONS||e.status===i.FileStatusType.PENDING||e.status===i.FileStatusType.UPLOADING)?m.UPLOADING:e.some(e=>e.status===i.FileStatusType.FAILED)?m.ERROR:m.COMPLETE}function _(e,t){return e.count(e=>e.status===t)}function g(e){return e.count(e=>e.status!==i.FileStatusType.CANCELLED)}function p(e){return(0,i.isUploadTypeError)(e)?(function(e){switch(e){case i.UploadErrorType.OVER_QUOTA_ERROR:return c.intl.formatMessage({id:"uVZpJw",defaultMessage:"out of space"});case i.UploadErrorType.FILE_SIZE_ERROR:return c.intl.formatMessage({id:"tsdRAZ",defaultMessage:"file too large"});case i.UploadErrorType.CONNECTION_ERROR:return c.intl.formatMessage({id:"vfWhT4",defaultMessage:"lost connection"});case i.UploadErrorType.HTTP_ERROR:return c.intl.formatMessage({id:"b/nZwr",defaultMessage:"server error"});case i.UploadErrorType.EMPTY_OR_FOLDER:return c.intl.formatMessage({id:"Gi+irE",defaultMessage:"can’t upload folders or empty files"});case i.UploadErrorType.FOLDER_SAFARI:return c.intl.formatMessage({id:"Y5AhQP",defaultMessage:"try uploading files separately"});case i.UploadErrorType.PACKAGE_FILE:return c.intl.formatMessage({id:"HjCRjv",defaultMessage:"OSX package file"});case i.UploadErrorType.UPLOAD_PRECHECK_INVALID_CHAR_ERROR:return c.intl.formatMessage({id:"f98azI",defaultMessage:"filename contains invalid character"});case i.UploadErrorType.PERMISSIONS_AT_UPLOAD_ERROR:return c.intl.formatMessage({id:"K+VjRY",defaultMessage:"could not apply permissions"});case i.UploadErrorType.INVALID_EXTENSION:return c.intl.formatMessage({id:"1OLuBC",defaultMessage:"file extension is invalid"});case i.UploadErrorType.BLOCKS_MISSING_ERROR:case i.UploadErrorType.COMMIT_HTTP_ERROR:case i.UploadErrorType.UPLOAD_BLOCK_ERROR:case i.UploadErrorType.SERVER_RESPONSE_ERROR:case i.UploadErrorType.SERVER_TOKEN_EMPTY_ERROR:case i.UploadErrorType.SERVER_TOKENS_MISSING_ERROR:case i.UploadErrorType.SERVER_HASH_RESPONSE_ERROR:case i.UploadErrorType.SERVER_HASH_EMPTY_ERROR:case i.UploadErrorType.HASHES_NOT_EQUAL_ERROR:case i.UploadErrorType.UPLOAD_PRECHECK_ERROR:case i.UploadErrorType.START_UPLOAD_SESSION_ERROR:case i.UploadErrorType.GENERIC:case i.UploadErrorType.LOCKED_TEAM_ERROR:return c.intl.formatMessage({id:"b/nZwr",defaultMessage:"server error"});case i.UploadErrorType.CHUNKS_NOT_ENABLED_ERROR:case i.UploadErrorType.CLIENT_HASH_EMPTY_ERROR:case i.UploadErrorType.BLOCK_RUNTIME_ID_MISSING_ERROR:case i.UploadErrorType.BLOCK_INDEX_ERROR:case i.UploadErrorType.BLOCK_EMPTY_ERROR:case i.UploadErrorType.BLOB_EMPTY_ERROR:case i.UploadErrorType.BLOB_MISSING_ERROR:case i.UploadErrorType.CLIENT_HASH_DIGEST_ERROR:case i.UploadErrorType.FILE_READER_NULL_RESULT_ERROR:case i.UploadErrorType.COMMIT_READINESS_ERROR:case i.UploadErrorType.APPEND_BLOCK_MISSING_PARAMS:case i.UploadErrorType.COMMIT_INVALID_ARGS:case i.UploadErrorType.IGNORED:return c.intl.formatMessage({id:"NpsjeY",defaultMessage:"upload processing error"})}})(e):c.intl.formatMessage({id:"m/cR6w",defaultMessage:"an unknown error occurred"})}function E(e,t){if(t)return;const a=_(e,i.FileStatusType.PENDING),s=c.intl.formatMessage({id:"MZCMJM",defaultMessage:"{count, plural, one{{count} file left} other{{count} files left}}"},{count:a});return a>0?s:c.intl.formatMessage({id:"ut04US",defaultMessage:"View details"})}function v(e,t){const a=f(e),s=g(e);if(t)return c.intl.formatMessage({id:"UhMk+M",defaultMessage:"Uploading {filename}"},{filename:r.Emstring.em_snippet(t.name,20)});if(a===m.UPLOADING)return c.intl.formatMessage({id:"sHyWgn",defaultMessage:"Starting upload..."});if(a===m.COMPLETE){if(s>1)return c.intl.formatMessage({id:"1I2L6w",defaultMessage:"Uploaded {num_files} files"},{num_files:s});if(1===s){const t=(function(e){return e.filter(e=>e.status!==i.FileStatusType.CANCELLED).last()})(e);return c.intl.formatMessage({id:"JS4aqp",defaultMessage:"Uploaded {filename}"},{filename:r.Emstring.em_snippet(t.name,20)})}return c.intl.formatMessage({id:"5B2AGb",defaultMessage:"Upload canceled"})}return""}function M(e,t){const a=f(e);return t||a!==m.ERROR?v(e,t):(function(e){const t=g(e),a=_(e,i.FileStatusType.FAILED);if(t>1){const s=_(e,i.FileStatusType.COMPLETE);return c.intl.formatMessage({id:"bfG+or",defaultMessage:"{count, plural, one{Uploaded {count} of {num_files} files} other{Uploaded {count} of {num_files} files}}"},{count:s,num_files:t})+" - "+c.intl.formatMessage({id:"lTOxVL",defaultMessage:"{count, plural, one{{count} error} other{{count} errors}}"},{count:a})}{const{errorType:t}=e.last();return t===i.UploadErrorType.GENERIC?c.intl.formatMessage({id:"KbJSNk",defaultMessage:"Unable to upload {filename}"},{filename:r.Emstring.em_snippet(e.last().name,20)}):t===i.UploadErrorType.LOCKED_TEAM_ERROR?c.intl.formatMessage({id:"tQ1bJN",defaultMessage:"Can’t upload. Your team no longer has full use of {trademark_business} features."},{trademark_business:d.TRADEMARK_BUSINESS}):c.intl.formatMessage({id:"XwpHsG",defaultMessage:"Unable to upload {filename}: {reason}"},{filename:r.Emstring.em_snippet(e.last().name,20),reason:p(t)})}})(e)}(function(e){e.UPLOADING="uploading",e.ERROR="error",e.COMPLETE="complete"})(m||(m={})),t.getUploadErrorReason=p,t.showInlineUploadStatusSnackbar=function({fileList:e,currentUpload:t,numSecondsLeft:a,onViewDetails:r,onShown:d,onClosed:_,allowParallelUpload:p,expNamingConventionsUploadSnackbar:v,expNamingConventionsReengagement:y,campaigns:b,expFullFunnelSnackbar:h,expPGDocsendUpsellUploadSnackbar:w,snackbarOpenWithReplay:S}){const T=f(e);let C;C=T===m.UPLOADING?"sync":T===m.ERROR?"fail":"complete";let A="";T===m.UPLOADING&&a&&(A=" - "+n.format_time_remaining(a));let R=c.intl.formatMessage({id:"u/p3Pl",defaultMessage:"Close"});T===m.UPLOADING&&(R="");const N=p?e.find(e=>e.status===i.FileStatusType.UPLOADING):t,I=M(e,N),x=g(e);let O;"complete"===C&&e.filter(e=>e.status!==i.FileStatusType.CANCELLED).count()>0&&(O=(0,o.getRichSnackbarPropsForUpload)(e,C,{expNamingConventionsUploadSnackbar:v,expNamingConventionsReengagement:y,expFullFunnelSnackbar:h,expPGDocsendUpsellUploadSnackbar:w,snackbarOpenWithReplay:S},b,x)),l.Snackbar.manager||"complete"!==C&&"fail"!==C||u.AccessibleAnnounce.polite(I);const k=(function(e,t){const a=f(e);return a===m.UPLOADING&&t?t.percentUploaded:a===m.COMPLETE||a===m.ERROR?100:0})(e,N),j={closeButtonText:R,onCloseClick:()=>{},onTimeout:()=>{},actionButtonText:E(e,Boolean(O)),onActionClick:r,title:I+A,variant:C,timeoutDelayMsForCompleteVariant:15e3,externalProgress:k,onClosed:_,onShown:d,id:"inline-upload-snackbar",isLowPriority:!0,accessibleAnnouncement:I,richSnackbarProps:O};l.Snackbar.manager&&(j.timeoutDelayMsForCompleteVariant=void 0),l.Snackbar.update(s.default.createElement(l.Snackbar,Object.assign({},j)))}})),define("metaserver/static/js/cloud_docs/gdd_migration/ui/utils",["require","exports","tslib","metaserver/static/js/api_v2/user_client","metaserver/static/js/core/persistence/storage"],(function(e,t,a,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMigrationDetails=t.setMigrationSettings=t.getMigrationSettings=void 0;t.getMigrationSettings=e=>a.__awaiter(void 0,void 0,void 0,(function*(){const t=n.LocalStorage.get("gdd_migration_override"),a=new s.UserApiV2Client,{settings:r}=yield a.ns("cloud_docs").rpc("get_gdd_migration_settings",void 0,{subjectUserId:e.id});return Object.assign(Object.assign({},r),null==t?void 0:t.settings)}));t.setMigrationSettings=(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=new s.UserApiV2Client,{settings:n}=yield a.ns("cloud_docs").rpc("set_gdd_migration_settings",{settings:t},{subjectUserId:e.id});return n}));t.getMigrationDetails=e=>a.__awaiter(void 0,void 0,void 0,(function*(){const t=n.LocalStorage.get("gdd_migration_override"),a=new s.UserApiV2Client,r=yield a.ns("cloud_docs").rpc("get_gdd_migration_details",void 0,{subjectUserId:e.id});return Object.assign(Object.assign({},r),null==t?void 0:t.details)}))}));
//# sourceMappingURL=pkg-file_uploader_and_account_page.min.js-vflodBMfD.map